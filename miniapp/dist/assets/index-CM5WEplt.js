function cx(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function ux(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gd={exports:{}},Io={},qd={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nl=Symbol.for("react.element"),dx=Symbol.for("react.portal"),fx=Symbol.for("react.fragment"),px=Symbol.for("react.strict_mode"),hx=Symbol.for("react.profiler"),xx=Symbol.for("react.provider"),mx=Symbol.for("react.context"),gx=Symbol.for("react.forward_ref"),yx=Symbol.for("react.suspense"),vx=Symbol.for("react.memo"),wx=Symbol.for("react.lazy"),tu=Symbol.iterator;function bx(e){return e===null||typeof e!="object"?null:(e=tu&&e[tu]||e["@@iterator"],typeof e=="function"?e:null)}var Jd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zd=Object.assign,ef={};function Zr(e,t,n){this.props=e,this.context=t,this.refs=ef,this.updater=n||Jd}Zr.prototype.isReactComponent={};Zr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function tf(){}tf.prototype=Zr.prototype;function Vi(e,t,n){this.props=e,this.context=t,this.refs=ef,this.updater=n||Jd}var Xi=Vi.prototype=new tf;Xi.constructor=Vi;Zd(Xi,Zr.prototype);Xi.isPureReactComponent=!0;var nu=Array.isArray,nf=Object.prototype.hasOwnProperty,Yi={current:null},rf={key:!0,ref:!0,__self:!0,__source:!0};function sf(e,t,n){var r,s={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)nf.call(t,r)&&!rf.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:nl,type:e,key:l,ref:a,props:s,_owner:Yi.current}}function kx(e,t){return{$$typeof:nl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ki(e){return typeof e=="object"&&e!==null&&e.$$typeof===nl}function jx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ru=/\/+/g;function ua(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jx(""+e.key):t.toString(36)}function Wl(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case nl:case dx:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+ua(a,0):r,nu(s)?(n="",e!=null&&(n=e.replace(ru,"$&/")+"/"),Wl(s,t,n,"",function(d){return d})):s!=null&&(Ki(s)&&(s=kx(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(ru,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",nu(e))for(var i=0;i<e.length;i++){l=e[i];var c=r+ua(l,i);a+=Wl(l,t,n,c,s)}else if(c=bx(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=r+ua(l,i++),a+=Wl(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ml(e,t,n){if(e==null)return e;var r=[],s=0;return Wl(e,r,"","",function(l){return t.call(n,l,s++)}),r}function Sx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var yt={current:null},Vl={transition:null},Nx={ReactCurrentDispatcher:yt,ReactCurrentBatchConfig:Vl,ReactCurrentOwner:Yi};function lf(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:ml,forEach:function(e,t,n){ml(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ml(e,function(){t++}),t},toArray:function(e){return ml(e,function(t){return t})||[]},only:function(e){if(!Ki(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xe.Component=Zr;xe.Fragment=fx;xe.Profiler=hx;xe.PureComponent=Vi;xe.StrictMode=px;xe.Suspense=yx;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nx;xe.act=lf;xe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Zd({},e.props),s=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=Yi.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)nf.call(t,c)&&!rf.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];r.children=i}return{$$typeof:nl,type:e.type,key:s,ref:l,props:r,_owner:a}};xe.createContext=function(e){return e={$$typeof:mx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xx,_context:e},e.Consumer=e};xe.createElement=sf;xe.createFactory=function(e){var t=sf.bind(null,e);return t.type=e,t};xe.createRef=function(){return{current:null}};xe.forwardRef=function(e){return{$$typeof:gx,render:e}};xe.isValidElement=Ki;xe.lazy=function(e){return{$$typeof:wx,_payload:{_status:-1,_result:e},_init:Sx}};xe.memo=function(e,t){return{$$typeof:vx,type:e,compare:t===void 0?null:t}};xe.startTransition=function(e){var t=Vl.transition;Vl.transition={};try{e()}finally{Vl.transition=t}};xe.unstable_act=lf;xe.useCallback=function(e,t){return yt.current.useCallback(e,t)};xe.useContext=function(e){return yt.current.useContext(e)};xe.useDebugValue=function(){};xe.useDeferredValue=function(e){return yt.current.useDeferredValue(e)};xe.useEffect=function(e,t){return yt.current.useEffect(e,t)};xe.useId=function(){return yt.current.useId()};xe.useImperativeHandle=function(e,t,n){return yt.current.useImperativeHandle(e,t,n)};xe.useInsertionEffect=function(e,t){return yt.current.useInsertionEffect(e,t)};xe.useLayoutEffect=function(e,t){return yt.current.useLayoutEffect(e,t)};xe.useMemo=function(e,t){return yt.current.useMemo(e,t)};xe.useReducer=function(e,t,n){return yt.current.useReducer(e,t,n)};xe.useRef=function(e){return yt.current.useRef(e)};xe.useState=function(e){return yt.current.useState(e)};xe.useSyncExternalStore=function(e,t,n){return yt.current.useSyncExternalStore(e,t,n)};xe.useTransition=function(){return yt.current.useTransition()};xe.version="18.3.1";qd.exports=xe;var u=qd.exports;const De=ux(u),Cx=cx({__proto__:null,default:De},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ex=u,Mx=Symbol.for("react.element"),_x=Symbol.for("react.fragment"),Tx=Object.prototype.hasOwnProperty,Dx=Ex.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rx={key:!0,ref:!0,__self:!0,__source:!0};function of(e,t,n){var r,s={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Tx.call(t,r)&&!Rx.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Mx,type:e,key:l,ref:a,props:s,_owner:Dx.current}}Io.Fragment=_x;Io.jsx=of;Io.jsxs=of;Gd.exports=Io;var o=Gd.exports,Xa={},af={exports:{}},Lt={},cf={exports:{}},uf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,Q){var _=O.length;O.push(Q);e:for(;0<_;){var ee=_-1>>>1,W=O[ee];if(0<s(W,Q))O[ee]=Q,O[_]=W,_=ee;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var Q=O[0],_=O.pop();if(_!==Q){O[0]=_;e:for(var ee=0,W=O.length,ke=W>>>1;ee<ke;){var ye=2*(ee+1)-1,Ge=O[ye],ve=ye+1,V=O[ve];if(0>s(Ge,_))ve<W&&0>s(V,Ge)?(O[ee]=V,O[ve]=_,ee=ve):(O[ee]=Ge,O[ye]=_,ee=ye);else if(ve<W&&0>s(V,_))O[ee]=V,O[ve]=_,ee=ve;else break e}}return Q}function s(O,Q){var _=O.sortIndex-Q.sortIndex;return _!==0?_:O.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],d=[],p=1,f=null,h=3,x=!1,w=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=O)r(d),Q.sortIndex=Q.expirationTime,t(c,Q);else break;Q=n(d)}}function S(O){if(y=!1,v(O),!w)if(n(c)!==null)w=!0,he(j);else{var Q=n(d);Q!==null&&fe(S,Q.startTime-O)}}function j(O,Q){w=!1,y&&(y=!1,g(E),E=-1),x=!0;var _=h;try{for(v(Q),f=n(c);f!==null&&(!(f.expirationTime>Q)||O&&!L());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,h=f.priorityLevel;var W=ee(f.expirationTime<=Q);Q=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(c)&&r(c),v(Q)}else r(c);f=n(c)}if(f!==null)var ke=!0;else{var ye=n(d);ye!==null&&fe(S,ye.startTime-Q),ke=!1}return ke}finally{f=null,h=_,x=!1}}var N=!1,k=null,E=-1,T=5,z=-1;function L(){return!(e.unstable_now()-z<T)}function ae(){if(k!==null){var O=e.unstable_now();z=O;var Q=!0;try{Q=k(!0,O)}finally{Q?H():(N=!1,k=null)}}else N=!1}var H;if(typeof m=="function")H=function(){m(ae)};else if(typeof MessageChannel!="undefined"){var I=new MessageChannel,q=I.port2;I.port1.onmessage=ae,H=function(){q.postMessage(null)}}else H=function(){b(ae,0)};function he(O){k=O,N||(N=!0,H())}function fe(O,Q){E=b(function(){O(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,he(j))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(O){switch(h){case 1:case 2:case 3:var Q=3;break;default:Q=h}var _=h;h=Q;try{return O()}finally{h=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,Q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var _=h;h=O;try{return Q()}finally{h=_}},e.unstable_scheduleCallback=function(O,Q,_){var ee=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?ee+_:ee):_=ee,O){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=_+W,O={id:p++,callback:Q,priorityLevel:O,startTime:_,expirationTime:W,sortIndex:-1},_>ee?(O.sortIndex=_,t(d,O),n(c)===null&&O===n(d)&&(y?(g(E),E=-1):y=!0,fe(S,_-ee))):(O.sortIndex=W,t(c,O),w||x||(w=!0,he(j))),O},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(O){var Q=h;return function(){var _=h;h=Q;try{return O.apply(this,arguments)}finally{h=_}}}})(uf);cf.exports=uf;var Px=cf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zx=u,It=Px;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var df=new Set,Is={};function hr(e,t){Hr(e,t),Hr(e+"Capture",t)}function Hr(e,t){for(Is[e]=t,e=0;e<t.length;e++)df.add(t[e])}var wn=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Ya=Object.prototype.hasOwnProperty,Ix=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,su={},lu={};function Lx(e){return Ya.call(lu,e)?!0:Ya.call(su,e)?!1:Ix.test(e)?lu[e]=!0:(su[e]=!0,!1)}function Ox(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $x(e,t,n,r){if(t===null||typeof t=="undefined"||Ox(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function vt(e,t,n,r,s,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ct[e]=new vt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ct[t]=new vt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ct[e]=new vt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ct[e]=new vt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ct[e]=new vt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ct[e]=new vt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ct[e]=new vt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ct[e]=new vt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ct[e]=new vt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Qi=/[\-:]([a-z])/g;function Gi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Qi,Gi);ct[t]=new vt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Qi,Gi);ct[t]=new vt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Qi,Gi);ct[t]=new vt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ct[e]=new vt(e,1,!1,e.toLowerCase(),null,!1,!1)});ct.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ct[e]=new vt(e,1,!1,e.toLowerCase(),null,!0,!0)});function qi(e,t,n,r){var s=ct.hasOwnProperty(t)?ct[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($x(t,n,s,r)&&(n=null),r||s===null?Lx(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Nn=zx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gl=Symbol.for("react.element"),jr=Symbol.for("react.portal"),Sr=Symbol.for("react.fragment"),Ji=Symbol.for("react.strict_mode"),Ka=Symbol.for("react.profiler"),ff=Symbol.for("react.provider"),pf=Symbol.for("react.context"),Zi=Symbol.for("react.forward_ref"),Qa=Symbol.for("react.suspense"),Ga=Symbol.for("react.suspense_list"),ec=Symbol.for("react.memo"),En=Symbol.for("react.lazy"),hf=Symbol.for("react.offscreen"),ou=Symbol.iterator;function cs(e){return e===null||typeof e!="object"?null:(e=ou&&e[ou]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,da;function vs(e){if(da===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);da=t&&t[1]||""}return`
`+da+e}var fa=!1;function pa(e,t){if(!e||fa)return"";fa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),l=r.stack.split(`
`),a=s.length-1,i=l.length-1;1<=a&&0<=i&&s[a]!==l[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==l[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==l[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{fa=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?vs(e):""}function Ax(e){switch(e.tag){case 5:return vs(e.type);case 16:return vs("Lazy");case 13:return vs("Suspense");case 19:return vs("SuspenseList");case 0:case 2:case 15:return e=pa(e.type,!1),e;case 11:return e=pa(e.type.render,!1),e;case 1:return e=pa(e.type,!0),e;default:return""}}function qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Sr:return"Fragment";case jr:return"Portal";case Ka:return"Profiler";case Ji:return"StrictMode";case Qa:return"Suspense";case Ga:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pf:return(e.displayName||"Context")+".Consumer";case ff:return(e._context.displayName||"Context")+".Provider";case Zi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ec:return t=e.displayName||null,t!==null?t:qa(e.type)||"Memo";case En:t=e._payload,e=e._init;try{return qa(e(t))}catch(n){}}return null}function Fx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qa(t);case 8:return t===Ji?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Hn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Bx(e){var t=xf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yl(e){e._valueTracker||(e._valueTracker=Bx(e))}function mf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=xf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ro(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ja(e,t){var n=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function au(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Hn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function gf(e,t){t=t.checked,t!=null&&qi(e,"checked",t,!1)}function Za(e,t){gf(e,t);var n=Hn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ei(e,t.type,n):t.hasOwnProperty("defaultValue")&&ei(e,t.type,Hn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function iu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ei(e,t,n){(t!=="number"||ro(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ws=Array.isArray;function Lr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Hn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ti(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(R(92));if(ws(n)){if(1<n.length)throw Error(R(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Hn(n)}}function yf(e,t){var n=Hn(t.value),r=Hn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function uu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function vf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ni(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?vf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var vl,wf=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(vl=vl||document.createElement("div"),vl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ls(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var js={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ux=["Webkit","ms","Moz","O"];Object.keys(js).forEach(function(e){Ux.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),js[t]=js[e]})});function bf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||js.hasOwnProperty(e)&&js[e]?(""+t).trim():t+"px"}function kf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=bf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Hx=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ri(e,t){if(t){if(Hx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function si(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var li=null;function tc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var oi=null,Or=null,$r=null;function du(e){if(e=ll(e)){if(typeof oi!="function")throw Error(R(280));var t=e.stateNode;t&&(t=Fo(t),oi(e.stateNode,e.type,t))}}function jf(e){Or?$r?$r.push(e):$r=[e]:Or=e}function Sf(){if(Or){var e=Or,t=$r;if($r=Or=null,du(e),t)for(e=0;e<t.length;e++)du(t[e])}}function Nf(e,t){return e(t)}function Cf(){}var ha=!1;function Ef(e,t,n){if(ha)return e(t,n);ha=!0;try{return Nf(e,t,n)}finally{ha=!1,(Or!==null||$r!==null)&&(Cf(),Sf())}}function Os(e,t){var n=e.stateNode;if(n===null)return null;var r=Fo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(R(231,t,typeof n));return n}var ai=!1;if(wn)try{var us={};Object.defineProperty(us,"passive",{get:function(){ai=!0}}),window.addEventListener("test",us,us),window.removeEventListener("test",us,us)}catch(e){ai=!1}function Wx(e,t,n,r,s,l,a,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(p){this.onError(p)}}var Ss=!1,so=null,lo=!1,ii=null,Vx={onError:function(e){Ss=!0,so=e}};function Xx(e,t,n,r,s,l,a,i,c){Ss=!1,so=null,Wx.apply(Vx,arguments)}function Yx(e,t,n,r,s,l,a,i,c){if(Xx.apply(this,arguments),Ss){if(Ss){var d=so;Ss=!1,so=null}else throw Error(R(198));lo||(lo=!0,ii=d)}}function xr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Mf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fu(e){if(xr(e)!==e)throw Error(R(188))}function Kx(e){var t=e.alternate;if(!t){if(t=xr(e),t===null)throw Error(R(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return fu(s),e;if(l===r)return fu(s),t;l=l.sibling}throw Error(R(188))}if(n.return!==r.return)n=s,r=l;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=l;break}if(i===r){a=!0,r=s,n=l;break}i=i.sibling}if(!a){for(i=l.child;i;){if(i===n){a=!0,n=l,r=s;break}if(i===r){a=!0,r=l,n=s;break}i=i.sibling}if(!a)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?e:t}function _f(e){return e=Kx(e),e!==null?Tf(e):null}function Tf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Tf(e);if(t!==null)return t;e=e.sibling}return null}var Df=It.unstable_scheduleCallback,pu=It.unstable_cancelCallback,Qx=It.unstable_shouldYield,Gx=It.unstable_requestPaint,Fe=It.unstable_now,qx=It.unstable_getCurrentPriorityLevel,nc=It.unstable_ImmediatePriority,Rf=It.unstable_UserBlockingPriority,oo=It.unstable_NormalPriority,Jx=It.unstable_LowPriority,Pf=It.unstable_IdlePriority,Lo=null,fn=null;function Zx(e){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Lo,e,void 0,(e.current.flags&128)===128)}catch(t){}}var en=Math.clz32?Math.clz32:nm,em=Math.log,tm=Math.LN2;function nm(e){return e>>>=0,e===0?32:31-(em(e)/tm|0)|0}var wl=64,bl=4194304;function bs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ao(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=bs(i):(l&=a,l!==0&&(r=bs(l)))}else a=n&~s,a!==0?r=bs(a):l!==0&&(r=bs(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-en(t),s=1<<n,r|=e[n],t&=~s;return r}function rm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-en(l),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=rm(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function ci(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zf(){var e=wl;return wl<<=1,!(wl&4194240)&&(wl=64),e}function xa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function rl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-en(t),e[t]=n}function lm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-en(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function rc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-en(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ce=0;function If(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Lf,sc,Of,$f,Af,ui=!1,kl=[],In=null,Ln=null,On=null,$s=new Map,As=new Map,Tn=[],om="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hu(e,t){switch(e){case"focusin":case"focusout":In=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":$s.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":As.delete(t.pointerId)}}function ds(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=ll(t),t!==null&&sc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function am(e,t,n,r,s){switch(t){case"focusin":return In=ds(In,e,t,n,r,s),!0;case"dragenter":return Ln=ds(Ln,e,t,n,r,s),!0;case"mouseover":return On=ds(On,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return $s.set(l,ds($s.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,As.set(l,ds(As.get(l)||null,e,t,n,r,s)),!0}return!1}function Ff(e){var t=nr(e.target);if(t!==null){var n=xr(t);if(n!==null){if(t=n.tag,t===13){if(t=Mf(n),t!==null){e.blockedOn=t,Af(e.priority,function(){Of(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=di(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);li=r,n.target.dispatchEvent(r),li=null}else return t=ll(n),t!==null&&sc(t),e.blockedOn=n,!1;t.shift()}return!0}function xu(e,t,n){Xl(e)&&n.delete(t)}function im(){ui=!1,In!==null&&Xl(In)&&(In=null),Ln!==null&&Xl(Ln)&&(Ln=null),On!==null&&Xl(On)&&(On=null),$s.forEach(xu),As.forEach(xu)}function fs(e,t){e.blockedOn===t&&(e.blockedOn=null,ui||(ui=!0,It.unstable_scheduleCallback(It.unstable_NormalPriority,im)))}function Fs(e){function t(s){return fs(s,e)}if(0<kl.length){fs(kl[0],e);for(var n=1;n<kl.length;n++){var r=kl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(In!==null&&fs(In,e),Ln!==null&&fs(Ln,e),On!==null&&fs(On,e),$s.forEach(t),As.forEach(t),n=0;n<Tn.length;n++)r=Tn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Tn.length&&(n=Tn[0],n.blockedOn===null);)Ff(n),n.blockedOn===null&&Tn.shift()}var Ar=Nn.ReactCurrentBatchConfig,io=!0;function cm(e,t,n,r){var s=Ce,l=Ar.transition;Ar.transition=null;try{Ce=1,lc(e,t,n,r)}finally{Ce=s,Ar.transition=l}}function um(e,t,n,r){var s=Ce,l=Ar.transition;Ar.transition=null;try{Ce=4,lc(e,t,n,r)}finally{Ce=s,Ar.transition=l}}function lc(e,t,n,r){if(io){var s=di(e,t,n,r);if(s===null)Na(e,t,r,co,n),hu(e,r);else if(am(s,e,t,n,r))r.stopPropagation();else if(hu(e,r),t&4&&-1<om.indexOf(e)){for(;s!==null;){var l=ll(s);if(l!==null&&Lf(l),l=di(e,t,n,r),l===null&&Na(e,t,r,co,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else Na(e,t,r,null,n)}}var co=null;function di(e,t,n,r){if(co=null,e=tc(r),e=nr(e),e!==null)if(t=xr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Mf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return co=e,null}function Bf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qx()){case nc:return 1;case Rf:return 4;case oo:case Jx:return 16;case Pf:return 536870912;default:return 16}default:return 16}}var Rn=null,oc=null,Yl=null;function Uf(){if(Yl)return Yl;var e,t=oc,n=t.length,r,s="value"in Rn?Rn.value:Rn.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[l-r];r++);return Yl=s.slice(e,1<r?1-r:void 0)}function Kl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function jl(){return!0}function mu(){return!1}function Ot(e){function t(n,r,s,l,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?jl:mu,this.isPropagationStopped=mu,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),t}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ac=Ot(es),sl=Le({},es,{view:0,detail:0}),dm=Ot(sl),ma,ga,ps,Oo=Le({},sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ic,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ps&&(ps&&e.type==="mousemove"?(ma=e.screenX-ps.screenX,ga=e.screenY-ps.screenY):ga=ma=0,ps=e),ma)},movementY:function(e){return"movementY"in e?e.movementY:ga}}),gu=Ot(Oo),fm=Le({},Oo,{dataTransfer:0}),pm=Ot(fm),hm=Le({},sl,{relatedTarget:0}),ya=Ot(hm),xm=Le({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),mm=Ot(xm),gm=Le({},es,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ym=Ot(gm),vm=Le({},es,{data:0}),yu=Ot(vm),wm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},km={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=km[e])?!!t[e]:!1}function ic(){return jm}var Sm=Le({},sl,{key:function(e){if(e.key){var t=wm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Kl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ic,charCode:function(e){return e.type==="keypress"?Kl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nm=Ot(Sm),Cm=Le({},Oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vu=Ot(Cm),Em=Le({},sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ic}),Mm=Ot(Em),_m=Le({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tm=Ot(_m),Dm=Le({},Oo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rm=Ot(Dm),Pm=[9,13,27,32],cc=wn&&"CompositionEvent"in window,Ns=null;wn&&"documentMode"in document&&(Ns=document.documentMode);var zm=wn&&"TextEvent"in window&&!Ns,Hf=wn&&(!cc||Ns&&8<Ns&&11>=Ns),wu=" ",bu=!1;function Wf(e,t){switch(e){case"keyup":return Pm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nr=!1;function Im(e,t){switch(e){case"compositionend":return Vf(t);case"keypress":return t.which!==32?null:(bu=!0,wu);case"textInput":return e=t.data,e===wu&&bu?null:e;default:return null}}function Lm(e,t){if(Nr)return e==="compositionend"||!cc&&Wf(e,t)?(e=Uf(),Yl=oc=Rn=null,Nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hf&&t.locale!=="ko"?null:t.data;default:return null}}var Om={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ku(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Om[e.type]:t==="textarea"}function Xf(e,t,n,r){jf(r),t=uo(t,"onChange"),0<t.length&&(n=new ac("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Cs=null,Bs=null;function $m(e){rp(e,0)}function $o(e){var t=Mr(e);if(mf(t))return e}function Am(e,t){if(e==="change")return t}var Yf=!1;if(wn){var va;if(wn){var wa="oninput"in document;if(!wa){var ju=document.createElement("div");ju.setAttribute("oninput","return;"),wa=typeof ju.oninput=="function"}va=wa}else va=!1;Yf=va&&(!document.documentMode||9<document.documentMode)}function Su(){Cs&&(Cs.detachEvent("onpropertychange",Kf),Bs=Cs=null)}function Kf(e){if(e.propertyName==="value"&&$o(Bs)){var t=[];Xf(t,Bs,e,tc(e)),Ef($m,t)}}function Fm(e,t,n){e==="focusin"?(Su(),Cs=t,Bs=n,Cs.attachEvent("onpropertychange",Kf)):e==="focusout"&&Su()}function Bm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $o(Bs)}function Um(e,t){if(e==="click")return $o(t)}function Hm(e,t){if(e==="input"||e==="change")return $o(t)}function Wm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nn=typeof Object.is=="function"?Object.is:Wm;function Us(e,t){if(nn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ya.call(t,s)||!nn(e[s],t[s]))return!1}return!0}function Nu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cu(e,t){var n=Nu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nu(n)}}function Qf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gf(){for(var e=window,t=ro();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=ro(e.document)}return t}function uc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Vm(e){var t=Gf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Qf(n.ownerDocument.documentElement,n)){if(r!==null&&uc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=Cu(n,l);var a=Cu(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Xm=wn&&"documentMode"in document&&11>=document.documentMode,Cr=null,fi=null,Es=null,pi=!1;function Eu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pi||Cr==null||Cr!==ro(r)||(r=Cr,"selectionStart"in r&&uc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Es&&Us(Es,r)||(Es=r,r=uo(fi,"onSelect"),0<r.length&&(t=new ac("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Cr)))}function Sl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:Sl("Animation","AnimationEnd"),animationiteration:Sl("Animation","AnimationIteration"),animationstart:Sl("Animation","AnimationStart"),transitionend:Sl("Transition","TransitionEnd")},ba={},qf={};wn&&(qf=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);function Ao(e){if(ba[e])return ba[e];if(!Er[e])return e;var t=Er[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in qf)return ba[e]=t[n];return e}var Jf=Ao("animationend"),Zf=Ao("animationiteration"),ep=Ao("animationstart"),tp=Ao("transitionend"),np=new Map,Mu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vn(e,t){np.set(e,t),hr(t,[e])}for(var ka=0;ka<Mu.length;ka++){var ja=Mu[ka],Ym=ja.toLowerCase(),Km=ja[0].toUpperCase()+ja.slice(1);Vn(Ym,"on"+Km)}Vn(Jf,"onAnimationEnd");Vn(Zf,"onAnimationIteration");Vn(ep,"onAnimationStart");Vn("dblclick","onDoubleClick");Vn("focusin","onFocus");Vn("focusout","onBlur");Vn(tp,"onTransitionEnd");Hr("onMouseEnter",["mouseout","mouseover"]);Hr("onMouseLeave",["mouseout","mouseover"]);Hr("onPointerEnter",["pointerout","pointerover"]);Hr("onPointerLeave",["pointerout","pointerover"]);hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hr("onBeforeInput",["compositionend","keypress","textInput","paste"]);hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qm=new Set("cancel close invalid load scroll toggle".split(" ").concat(ks));function _u(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Yx(r,t,void 0,e),e.currentTarget=null}function rp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==l&&s.isPropagationStopped())break e;_u(s,i,d),l=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,d=i.currentTarget,i=i.listener,c!==l&&s.isPropagationStopped())break e;_u(s,i,d),l=c}}}if(lo)throw e=ii,lo=!1,ii=null,e}function Te(e,t){var n=t[yi];n===void 0&&(n=t[yi]=new Set);var r=e+"__bubble";n.has(r)||(sp(t,e,2,!1),n.add(r))}function Sa(e,t,n){var r=0;t&&(r|=4),sp(n,e,r,t)}var Nl="_reactListening"+Math.random().toString(36).slice(2);function Hs(e){if(!e[Nl]){e[Nl]=!0,df.forEach(function(n){n!=="selectionchange"&&(Qm.has(n)||Sa(n,!1,e),Sa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Nl]||(t[Nl]=!0,Sa("selectionchange",!1,t))}}function sp(e,t,n,r){switch(Bf(t)){case 1:var s=cm;break;case 4:s=um;break;default:s=lc}n=s.bind(null,t,n,e),s=void 0,!ai||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Na(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=nr(i),a===null)return;if(c=a.tag,c===5||c===6){r=l=a;continue e}i=i.parentNode}}r=r.return}Ef(function(){var d=l,p=tc(n),f=[];e:{var h=np.get(e);if(h!==void 0){var x=ac,w=e;switch(e){case"keypress":if(Kl(n)===0)break e;case"keydown":case"keyup":x=Nm;break;case"focusin":w="focus",x=ya;break;case"focusout":w="blur",x=ya;break;case"beforeblur":case"afterblur":x=ya;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=gu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=pm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Mm;break;case Jf:case Zf:case ep:x=mm;break;case tp:x=Tm;break;case"scroll":x=dm;break;case"wheel":x=Rm;break;case"copy":case"cut":case"paste":x=ym;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=vu}var y=(t&4)!==0,b=!y&&e==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var m=d,v;m!==null;){v=m;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,g!==null&&(S=Os(m,g),S!=null&&y.push(Ws(m,S,v)))),b)break;m=m.return}0<y.length&&(h=new x(h,w,null,n,p),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==li&&(w=n.relatedTarget||n.fromElement)&&(nr(w)||w[bn]))break e;if((x||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,x?(w=n.relatedTarget||n.toElement,x=d,w=w?nr(w):null,w!==null&&(b=xr(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=d),x!==w)){if(y=gu,S="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(y=vu,S="onPointerLeave",g="onPointerEnter",m="pointer"),b=x==null?h:Mr(x),v=w==null?h:Mr(w),h=new y(S,m+"leave",x,n,p),h.target=b,h.relatedTarget=v,S=null,nr(p)===d&&(y=new y(g,m+"enter",w,n,p),y.target=v,y.relatedTarget=b,S=y),b=S,x&&w)t:{for(y=x,g=w,m=0,v=y;v;v=wr(v))m++;for(v=0,S=g;S;S=wr(S))v++;for(;0<m-v;)y=wr(y),m--;for(;0<v-m;)g=wr(g),v--;for(;m--;){if(y===g||g!==null&&y===g.alternate)break t;y=wr(y),g=wr(g)}y=null}else y=null;x!==null&&Tu(f,h,x,y,!1),w!==null&&b!==null&&Tu(f,b,w,y,!0)}}e:{if(h=d?Mr(d):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var j=Am;else if(ku(h))if(Yf)j=Hm;else{j=Bm;var N=Fm}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=Um);if(j&&(j=j(e,d))){Xf(f,j,n,p);break e}N&&N(e,h,d),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&ei(h,"number",h.value)}switch(N=d?Mr(d):window,e){case"focusin":(ku(N)||N.contentEditable==="true")&&(Cr=N,fi=d,Es=null);break;case"focusout":Es=fi=Cr=null;break;case"mousedown":pi=!0;break;case"contextmenu":case"mouseup":case"dragend":pi=!1,Eu(f,n,p);break;case"selectionchange":if(Xm)break;case"keydown":case"keyup":Eu(f,n,p)}var k;if(cc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Nr?Wf(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Hf&&n.locale!=="ko"&&(Nr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Nr&&(k=Uf()):(Rn=p,oc="value"in Rn?Rn.value:Rn.textContent,Nr=!0)),N=uo(d,E),0<N.length&&(E=new yu(E,e,null,n,p),f.push({event:E,listeners:N}),k?E.data=k:(k=Vf(n),k!==null&&(E.data=k)))),(k=zm?Im(e,n):Lm(e,n))&&(d=uo(d,"onBeforeInput"),0<d.length&&(p=new yu("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:d}),p.data=k))}rp(f,t)})}function Ws(e,t,n){return{instance:e,listener:t,currentTarget:n}}function uo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=Os(e,n),l!=null&&r.unshift(Ws(e,l,s)),l=Os(e,t),l!=null&&r.push(Ws(e,l,s))),e=e.return}return r}function wr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Tu(e,t,n,r,s){for(var l=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,d=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&d!==null&&(i=d,s?(c=Os(n,l),c!=null&&a.unshift(Ws(n,c,i))):s||(c=Os(n,l),c!=null&&a.push(Ws(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Gm=/\r\n?/g,qm=/\u0000|\uFFFD/g;function Du(e){return(typeof e=="string"?e:""+e).replace(Gm,`
`).replace(qm,"")}function Cl(e,t,n){if(t=Du(t),Du(e)!==t&&n)throw Error(R(425))}function fo(){}var hi=null,xi=null;function mi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gi=typeof setTimeout=="function"?setTimeout:void 0,Jm=typeof clearTimeout=="function"?clearTimeout:void 0,Ru=typeof Promise=="function"?Promise:void 0,Zm=typeof queueMicrotask=="function"?queueMicrotask:typeof Ru!="undefined"?function(e){return Ru.resolve(null).then(e).catch(eg)}:gi;function eg(e){setTimeout(function(){throw e})}function Ca(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Fs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fs(t)}function $n(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ts=Math.random().toString(36).slice(2),dn="__reactFiber$"+ts,Vs="__reactProps$"+ts,bn="__reactContainer$"+ts,yi="__reactEvents$"+ts,tg="__reactListeners$"+ts,ng="__reactHandles$"+ts;function nr(e){var t=e[dn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[bn]||n[dn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Pu(e);e!==null;){if(n=e[dn])return n;e=Pu(e)}return t}e=n,n=e.parentNode}return null}function ll(e){return e=e[dn]||e[bn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function Fo(e){return e[Vs]||null}var vi=[],_r=-1;function Xn(e){return{current:e}}function Re(e){0>_r||(e.current=vi[_r],vi[_r]=null,_r--)}function _e(e,t){_r++,vi[_r]=e.current,e.current=t}var Wn={},ht=Xn(Wn),Nt=Xn(!1),ir=Wn;function Wr(e,t){var n=e.type.contextTypes;if(!n)return Wn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ct(e){return e=e.childContextTypes,e!=null}function po(){Re(Nt),Re(ht)}function zu(e,t,n){if(ht.current!==Wn)throw Error(R(168));_e(ht,t),_e(Nt,n)}function lp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(R(108,Fx(e)||"Unknown",s));return Le({},n,r)}function ho(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wn,ir=ht.current,_e(ht,e),_e(Nt,Nt.current),!0}function Iu(e,t,n){var r=e.stateNode;if(!r)throw Error(R(169));n?(e=lp(e,t,ir),r.__reactInternalMemoizedMergedChildContext=e,Re(Nt),Re(ht),_e(ht,e)):Re(Nt),_e(Nt,n)}var mn=null,Bo=!1,Ea=!1;function op(e){mn===null?mn=[e]:mn.push(e)}function rg(e){Bo=!0,op(e)}function Yn(){if(!Ea&&mn!==null){Ea=!0;var e=0,t=Ce;try{var n=mn;for(Ce=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}mn=null,Bo=!1}catch(s){throw mn!==null&&(mn=mn.slice(e+1)),Df(nc,Yn),s}finally{Ce=t,Ea=!1}}return null}var Tr=[],Dr=0,xo=null,mo=0,Bt=[],Ut=0,cr=null,gn=1,yn="";function Zn(e,t){Tr[Dr++]=mo,Tr[Dr++]=xo,xo=e,mo=t}function ap(e,t,n){Bt[Ut++]=gn,Bt[Ut++]=yn,Bt[Ut++]=cr,cr=e;var r=gn;e=yn;var s=32-en(r)-1;r&=~(1<<s),n+=1;var l=32-en(t)+s;if(30<l){var a=s-s%5;l=(r&(1<<a)-1).toString(32),r>>=a,s-=a,gn=1<<32-en(t)+s|n<<s|r,yn=l+e}else gn=1<<l|n<<s|r,yn=e}function dc(e){e.return!==null&&(Zn(e,1),ap(e,1,0))}function fc(e){for(;e===xo;)xo=Tr[--Dr],Tr[Dr]=null,mo=Tr[--Dr],Tr[Dr]=null;for(;e===cr;)cr=Bt[--Ut],Bt[Ut]=null,yn=Bt[--Ut],Bt[Ut]=null,gn=Bt[--Ut],Bt[Ut]=null}var zt=null,Pt=null,Pe=!1,Zt=null;function ip(e,t){var n=Ht(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Lu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,zt=e,Pt=$n(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,zt=e,Pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=cr!==null?{id:gn,overflow:yn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ht(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,zt=e,Pt=null,!0):!1;default:return!1}}function wi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bi(e){if(Pe){var t=Pt;if(t){var n=t;if(!Lu(e,t)){if(wi(e))throw Error(R(418));t=$n(n.nextSibling);var r=zt;t&&Lu(e,t)?ip(r,n):(e.flags=e.flags&-4097|2,Pe=!1,zt=e)}}else{if(wi(e))throw Error(R(418));e.flags=e.flags&-4097|2,Pe=!1,zt=e}}}function Ou(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;zt=e}function El(e){if(e!==zt)return!1;if(!Pe)return Ou(e),Pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!mi(e.type,e.memoizedProps)),t&&(t=Pt)){if(wi(e))throw cp(),Error(R(418));for(;t;)ip(e,t),t=$n(t.nextSibling)}if(Ou(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Pt=$n(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Pt=null}}else Pt=zt?$n(e.stateNode.nextSibling):null;return!0}function cp(){for(var e=Pt;e;)e=$n(e.nextSibling)}function Vr(){Pt=zt=null,Pe=!1}function pc(e){Zt===null?Zt=[e]:Zt.push(e)}var sg=Nn.ReactCurrentBatchConfig;function hs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var i=s.refs;a===null?delete i[l]:i[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,e))}return e}function Ml(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $u(e){var t=e._init;return t(e._payload)}function up(e){function t(g,m){if(e){var v=g.deletions;v===null?(g.deletions=[m],g.flags|=16):v.push(m)}}function n(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=Un(g,m),g.index=0,g.sibling=null,g}function l(g,m,v){return g.index=v,e?(v=g.alternate,v!==null?(v=v.index,v<m?(g.flags|=2,m):v):(g.flags|=2,m)):(g.flags|=1048576,m)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,m,v,S){return m===null||m.tag!==6?(m=za(v,g.mode,S),m.return=g,m):(m=s(m,v),m.return=g,m)}function c(g,m,v,S){var j=v.type;return j===Sr?p(g,m,v.props.children,S,v.key):m!==null&&(m.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===En&&$u(j)===m.type)?(S=s(m,v.props),S.ref=hs(g,m,v),S.return=g,S):(S=to(v.type,v.key,v.props,null,g.mode,S),S.ref=hs(g,m,v),S.return=g,S)}function d(g,m,v,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Ia(v,g.mode,S),m.return=g,m):(m=s(m,v.children||[]),m.return=g,m)}function p(g,m,v,S,j){return m===null||m.tag!==7?(m=or(v,g.mode,S,j),m.return=g,m):(m=s(m,v),m.return=g,m)}function f(g,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=za(""+m,g.mode,v),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case gl:return v=to(m.type,m.key,m.props,null,g.mode,v),v.ref=hs(g,null,m),v.return=g,v;case jr:return m=Ia(m,g.mode,v),m.return=g,m;case En:var S=m._init;return f(g,S(m._payload),v)}if(ws(m)||cs(m))return m=or(m,g.mode,v,null),m.return=g,m;Ml(g,m)}return null}function h(g,m,v,S){var j=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return j!==null?null:i(g,m,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case gl:return v.key===j?c(g,m,v,S):null;case jr:return v.key===j?d(g,m,v,S):null;case En:return j=v._init,h(g,m,j(v._payload),S)}if(ws(v)||cs(v))return j!==null?null:p(g,m,v,S,null);Ml(g,v)}return null}function x(g,m,v,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(v)||null,i(m,g,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case gl:return g=g.get(S.key===null?v:S.key)||null,c(m,g,S,j);case jr:return g=g.get(S.key===null?v:S.key)||null,d(m,g,S,j);case En:var N=S._init;return x(g,m,v,N(S._payload),j)}if(ws(S)||cs(S))return g=g.get(v)||null,p(m,g,S,j,null);Ml(m,S)}return null}function w(g,m,v,S){for(var j=null,N=null,k=m,E=m=0,T=null;k!==null&&E<v.length;E++){k.index>E?(T=k,k=null):T=k.sibling;var z=h(g,k,v[E],S);if(z===null){k===null&&(k=T);break}e&&k&&z.alternate===null&&t(g,k),m=l(z,m,E),N===null?j=z:N.sibling=z,N=z,k=T}if(E===v.length)return n(g,k),Pe&&Zn(g,E),j;if(k===null){for(;E<v.length;E++)k=f(g,v[E],S),k!==null&&(m=l(k,m,E),N===null?j=k:N.sibling=k,N=k);return Pe&&Zn(g,E),j}for(k=r(g,k);E<v.length;E++)T=x(k,g,E,v[E],S),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?E:T.key),m=l(T,m,E),N===null?j=T:N.sibling=T,N=T);return e&&k.forEach(function(L){return t(g,L)}),Pe&&Zn(g,E),j}function y(g,m,v,S){var j=cs(v);if(typeof j!="function")throw Error(R(150));if(v=j.call(v),v==null)throw Error(R(151));for(var N=j=null,k=m,E=m=0,T=null,z=v.next();k!==null&&!z.done;E++,z=v.next()){k.index>E?(T=k,k=null):T=k.sibling;var L=h(g,k,z.value,S);if(L===null){k===null&&(k=T);break}e&&k&&L.alternate===null&&t(g,k),m=l(L,m,E),N===null?j=L:N.sibling=L,N=L,k=T}if(z.done)return n(g,k),Pe&&Zn(g,E),j;if(k===null){for(;!z.done;E++,z=v.next())z=f(g,z.value,S),z!==null&&(m=l(z,m,E),N===null?j=z:N.sibling=z,N=z);return Pe&&Zn(g,E),j}for(k=r(g,k);!z.done;E++,z=v.next())z=x(k,g,E,z.value,S),z!==null&&(e&&z.alternate!==null&&k.delete(z.key===null?E:z.key),m=l(z,m,E),N===null?j=z:N.sibling=z,N=z);return e&&k.forEach(function(ae){return t(g,ae)}),Pe&&Zn(g,E),j}function b(g,m,v,S){if(typeof v=="object"&&v!==null&&v.type===Sr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case gl:e:{for(var j=v.key,N=m;N!==null;){if(N.key===j){if(j=v.type,j===Sr){if(N.tag===7){n(g,N.sibling),m=s(N,v.props.children),m.return=g,g=m;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===En&&$u(j)===N.type){n(g,N.sibling),m=s(N,v.props),m.ref=hs(g,N,v),m.return=g,g=m;break e}n(g,N);break}else t(g,N);N=N.sibling}v.type===Sr?(m=or(v.props.children,g.mode,S,v.key),m.return=g,g=m):(S=to(v.type,v.key,v.props,null,g.mode,S),S.ref=hs(g,m,v),S.return=g,g=S)}return a(g);case jr:e:{for(N=v.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(g,m.sibling),m=s(m,v.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else t(g,m);m=m.sibling}m=Ia(v,g.mode,S),m.return=g,g=m}return a(g);case En:return N=v._init,b(g,m,N(v._payload),S)}if(ws(v))return w(g,m,v,S);if(cs(v))return y(g,m,v,S);Ml(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,v),m.return=g,g=m):(n(g,m),m=za(v,g.mode,S),m.return=g,g=m),a(g)):n(g,m)}return b}var Xr=up(!0),dp=up(!1),go=Xn(null),yo=null,Rr=null,hc=null;function xc(){hc=Rr=yo=null}function mc(e){var t=go.current;Re(go),e._currentValue=t}function ki(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Fr(e,t){yo=e,hc=Rr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(St=!0),e.firstContext=null)}function Vt(e){var t=e._currentValue;if(hc!==e)if(e={context:e,memoizedValue:t,next:null},Rr===null){if(yo===null)throw Error(R(308));Rr=e,yo.dependencies={lanes:0,firstContext:e}}else Rr=Rr.next=e;return t}var rr=null;function gc(e){rr===null?rr=[e]:rr.push(e)}function fp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,gc(t)):(n.next=s.next,s.next=n),t.interleaved=n,kn(e,r)}function kn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mn=!1;function yc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function An(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,be&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,kn(e,n)}return s=r.interleaved,s===null?(t.next=t,gc(r)):(t.next=s.next,s.next=t),r.interleaved=t,kn(e,n)}function Ql(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,rc(e,n)}}function Au(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function vo(e,t,n,r){var s=e.updateQueue;Mn=!1;var l=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,d=c.next;c.next=null,a===null?l=d:a.next=d,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,i=p.lastBaseUpdate,i!==a&&(i===null?p.firstBaseUpdate=d:i.next=d,p.lastBaseUpdate=c))}if(l!==null){var f=s.baseState;a=0,p=d=c=null,i=l;do{var h=i.lane,x=i.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var w=e,y=i;switch(h=t,x=n,y.tag){case 1:if(w=y.payload,typeof w=="function"){f=w.call(x,f,h);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,h=typeof w=="function"?w.call(x,f,h):w,h==null)break e;f=Le({},f,h);break e;case 2:Mn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[i]:h.push(i))}else x={eventTime:x,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},p===null?(d=p=x,c=f):p=p.next=x,a|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;h=i,i=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);dr|=a,e.lanes=a,e.memoizedState=f}}function Fu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(R(191,s));s.call(r)}}}var ol={},pn=Xn(ol),Xs=Xn(ol),Ys=Xn(ol);function sr(e){if(e===ol)throw Error(R(174));return e}function vc(e,t){switch(_e(Ys,t),_e(Xs,e),_e(pn,ol),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ni(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ni(t,e)}Re(pn),_e(pn,t)}function Yr(){Re(pn),Re(Xs),Re(Ys)}function hp(e){sr(Ys.current);var t=sr(pn.current),n=ni(t,e.type);t!==n&&(_e(Xs,e),_e(pn,n))}function wc(e){Xs.current===e&&(Re(pn),Re(Xs))}var ze=Xn(0);function wo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ma=[];function bc(){for(var e=0;e<Ma.length;e++)Ma[e]._workInProgressVersionPrimary=null;Ma.length=0}var Gl=Nn.ReactCurrentDispatcher,_a=Nn.ReactCurrentBatchConfig,ur=0,Ie=null,Xe=null,tt=null,bo=!1,Ms=!1,Ks=0,lg=0;function ut(){throw Error(R(321))}function kc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nn(e[n],t[n]))return!1;return!0}function jc(e,t,n,r,s,l){if(ur=l,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Gl.current=e===null||e.memoizedState===null?cg:ug,e=n(r,s),Ms){l=0;do{if(Ms=!1,Ks=0,25<=l)throw Error(R(301));l+=1,tt=Xe=null,t.updateQueue=null,Gl.current=dg,e=n(r,s)}while(Ms)}if(Gl.current=ko,t=Xe!==null&&Xe.next!==null,ur=0,tt=Xe=Ie=null,bo=!1,t)throw Error(R(300));return e}function Sc(){var e=Ks!==0;return Ks=0,e}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Ie.memoizedState=tt=e:tt=tt.next=e,tt}function Xt(){if(Xe===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=tt===null?Ie.memoizedState:tt.next;if(t!==null)tt=t,Xe=e;else{if(e===null)throw Error(R(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},tt===null?Ie.memoizedState=tt=e:tt=tt.next=e}return tt}function Qs(e,t){return typeof t=="function"?t(e):t}function Ta(e){var t=Xt(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=Xe,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var a=s.next;s.next=l.next,l.next=a}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var i=a=null,c=null,d=l;do{var p=d.lane;if((ur&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var f={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=f,a=r):c=c.next=f,Ie.lanes|=p,dr|=p}d=d.next}while(d!==null&&d!==l);c===null?a=r:c.next=i,nn(r,t.memoizedState)||(St=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,Ie.lanes|=l,dr|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Da(e){var t=Xt(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do l=e(l,a.action),a=a.next;while(a!==s);nn(l,t.memoizedState)||(St=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function xp(){}function mp(e,t){var n=Ie,r=Xt(),s=t(),l=!nn(r.memoizedState,s);if(l&&(r.memoizedState=s,St=!0),r=r.queue,Nc(vp.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,Gs(9,yp.bind(null,n,r,s,t),void 0,null),rt===null)throw Error(R(349));ur&30||gp(n,t,s)}return s}function gp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function yp(e,t,n,r){t.value=n,t.getSnapshot=r,wp(t)&&bp(e)}function vp(e,t,n){return n(function(){wp(t)&&bp(e)})}function wp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nn(e,n)}catch(r){return!0}}function bp(e){var t=kn(e,1);t!==null&&tn(t,e,1,-1)}function Bu(e){var t=un();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:e},t.queue=e,e=e.dispatch=ig.bind(null,Ie,e),[t.memoizedState,e]}function Gs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function kp(){return Xt().memoizedState}function ql(e,t,n,r){var s=un();Ie.flags|=e,s.memoizedState=Gs(1|t,n,void 0,r===void 0?null:r)}function Uo(e,t,n,r){var s=Xt();r=r===void 0?null:r;var l=void 0;if(Xe!==null){var a=Xe.memoizedState;if(l=a.destroy,r!==null&&kc(r,a.deps)){s.memoizedState=Gs(t,n,l,r);return}}Ie.flags|=e,s.memoizedState=Gs(1|t,n,l,r)}function Uu(e,t){return ql(8390656,8,e,t)}function Nc(e,t){return Uo(2048,8,e,t)}function jp(e,t){return Uo(4,2,e,t)}function Sp(e,t){return Uo(4,4,e,t)}function Np(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Cp(e,t,n){return n=n!=null?n.concat([e]):null,Uo(4,4,Np.bind(null,t,e),n)}function Cc(){}function Ep(e,t){var n=Xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&kc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Mp(e,t){var n=Xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&kc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function _p(e,t,n){return ur&21?(nn(n,t)||(n=zf(),Ie.lanes|=n,dr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,St=!0),e.memoizedState=n)}function og(e,t){var n=Ce;Ce=n!==0&&4>n?n:4,e(!0);var r=_a.transition;_a.transition={};try{e(!1),t()}finally{Ce=n,_a.transition=r}}function Tp(){return Xt().memoizedState}function ag(e,t,n){var r=Bn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Dp(e))Rp(t,n);else if(n=fp(e,t,n,r),n!==null){var s=gt();tn(n,e,r,s),Pp(n,t,r)}}function ig(e,t,n){var r=Bn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dp(e))Rp(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,i=l(a,n);if(s.hasEagerState=!0,s.eagerState=i,nn(i,a)){var c=t.interleaved;c===null?(s.next=s,gc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch(d){}finally{}n=fp(e,t,s,r),n!==null&&(s=gt(),tn(n,e,r,s),Pp(n,t,r))}}function Dp(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function Rp(e,t){Ms=bo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Pp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,rc(e,n)}}var ko={readContext:Vt,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},cg={readContext:Vt,useCallback:function(e,t){return un().memoizedState=[e,t===void 0?null:t],e},useContext:Vt,useEffect:Uu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ql(4194308,4,Np.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ql(4194308,4,e,t)},useInsertionEffect:function(e,t){return ql(4,2,e,t)},useMemo:function(e,t){var n=un();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=un();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ag.bind(null,Ie,e),[r.memoizedState,e]},useRef:function(e){var t=un();return e={current:e},t.memoizedState=e},useState:Bu,useDebugValue:Cc,useDeferredValue:function(e){return un().memoizedState=e},useTransition:function(){var e=Bu(!1),t=e[0];return e=og.bind(null,e[1]),un().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ie,s=un();if(Pe){if(n===void 0)throw Error(R(407));n=n()}else{if(n=t(),rt===null)throw Error(R(349));ur&30||gp(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,Uu(vp.bind(null,r,l,e),[e]),r.flags|=2048,Gs(9,yp.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=un(),t=rt.identifierPrefix;if(Pe){var n=yn,r=gn;n=(r&~(1<<32-en(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ks++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=lg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ug={readContext:Vt,useCallback:Ep,useContext:Vt,useEffect:Nc,useImperativeHandle:Cp,useInsertionEffect:jp,useLayoutEffect:Sp,useMemo:Mp,useReducer:Ta,useRef:kp,useState:function(){return Ta(Qs)},useDebugValue:Cc,useDeferredValue:function(e){var t=Xt();return _p(t,Xe.memoizedState,e)},useTransition:function(){var e=Ta(Qs)[0],t=Xt().memoizedState;return[e,t]},useMutableSource:xp,useSyncExternalStore:mp,useId:Tp,unstable_isNewReconciler:!1},dg={readContext:Vt,useCallback:Ep,useContext:Vt,useEffect:Nc,useImperativeHandle:Cp,useInsertionEffect:jp,useLayoutEffect:Sp,useMemo:Mp,useReducer:Da,useRef:kp,useState:function(){return Da(Qs)},useDebugValue:Cc,useDeferredValue:function(e){var t=Xt();return Xe===null?t.memoizedState=e:_p(t,Xe.memoizedState,e)},useTransition:function(){var e=Da(Qs)[0],t=Xt().memoizedState;return[e,t]},useMutableSource:xp,useSyncExternalStore:mp,useId:Tp,unstable_isNewReconciler:!1};function qt(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ji(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Le({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ho={isMounted:function(e){return(e=e._reactInternals)?xr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=gt(),s=Bn(e),l=vn(r,s);l.payload=t,n!=null&&(l.callback=n),t=An(e,l,s),t!==null&&(tn(t,e,s,r),Ql(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=gt(),s=Bn(e),l=vn(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=An(e,l,s),t!==null&&(tn(t,e,s,r),Ql(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=gt(),r=Bn(e),s=vn(n,r);s.tag=2,t!=null&&(s.callback=t),t=An(e,s,r),t!==null&&(tn(t,e,r,n),Ql(t,e,r))}};function Hu(e,t,n,r,s,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!Us(n,r)||!Us(s,l):!0}function zp(e,t,n){var r=!1,s=Wn,l=t.contextType;return typeof l=="object"&&l!==null?l=Vt(l):(s=Ct(t)?ir:ht.current,r=t.contextTypes,l=(r=r!=null)?Wr(e,s):Wn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ho,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function Wu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ho.enqueueReplaceState(t,t.state,null)}function Si(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},yc(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Vt(l):(l=Ct(t)?ir:ht.current,s.context=Wr(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ji(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ho.enqueueReplaceState(s,s.state,null),vo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Kr(e,t){try{var n="",r=t;do n+=Ax(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function Ra(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function Ni(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fg=typeof WeakMap=="function"?WeakMap:Map;function Ip(e,t,n){n=vn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){So||(So=!0,Ii=r),Ni(e,t)},n}function Lp(e,t,n){n=vn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ni(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Ni(e,t),typeof r!="function"&&(Fn===null?Fn=new Set([this]):Fn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Vu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new fg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Cg.bind(null,e,t,n),t.then(e,e))}function Xu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Yu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=vn(-1,1),t.tag=2,An(n,t,1))),n.lanes|=1),e)}var pg=Nn.ReactCurrentOwner,St=!1;function mt(e,t,n,r){t.child=e===null?dp(t,null,n,r):Xr(t,e.child,n,r)}function Ku(e,t,n,r,s){n=n.render;var l=t.ref;return Fr(t,s),r=jc(e,t,n,r,l,s),n=Sc(),e!==null&&!St?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,jn(e,t,s)):(Pe&&n&&dc(t),t.flags|=1,mt(e,t,r,s),t.child)}function Qu(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!zc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Op(e,t,l,r,s)):(e=to(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:Us,n(a,r)&&e.ref===t.ref)return jn(e,t,s)}return t.flags|=1,e=Un(l,r),e.ref=t.ref,e.return=t,t.child=e}function Op(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(Us(l,r)&&e.ref===t.ref)if(St=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(St=!0);else return t.lanes=e.lanes,jn(e,t,s)}return Ci(e,t,n,r,s)}function $p(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(zr,Rt),Rt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(zr,Rt),Rt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,_e(zr,Rt),Rt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,_e(zr,Rt),Rt|=r;return mt(e,t,s,n),t.child}function Ap(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ci(e,t,n,r,s){var l=Ct(n)?ir:ht.current;return l=Wr(t,l),Fr(t,s),n=jc(e,t,n,r,l,s),r=Sc(),e!==null&&!St?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,jn(e,t,s)):(Pe&&r&&dc(t),t.flags|=1,mt(e,t,n,s),t.child)}function Gu(e,t,n,r,s){if(Ct(n)){var l=!0;ho(t)}else l=!1;if(Fr(t,s),t.stateNode===null)Jl(e,t),zp(t,n,r),Si(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Vt(d):(d=Ct(n)?ir:ht.current,d=Wr(t,d));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==d)&&Wu(t,a,r,d),Mn=!1;var h=t.memoizedState;a.state=h,vo(t,r,a,s),c=t.memoizedState,i!==r||h!==c||Nt.current||Mn?(typeof p=="function"&&(ji(t,n,p,r),c=t.memoizedState),(i=Mn||Hu(t,n,i,r,h,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,pp(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:qt(t.type,i),a.props=d,f=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Vt(c):(c=Ct(n)?ir:ht.current,c=Wr(t,c));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||h!==c)&&Wu(t,a,r,c),Mn=!1,h=t.memoizedState,a.state=h,vo(t,r,a,s);var w=t.memoizedState;i!==f||h!==w||Nt.current||Mn?(typeof x=="function"&&(ji(t,n,x,r),w=t.memoizedState),(d=Mn||Hu(t,n,d,r,h,w,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ei(e,t,n,r,l,s)}function Ei(e,t,n,r,s,l){Ap(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Iu(t,n,!1),jn(e,t,l);r=t.stateNode,pg.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Xr(t,e.child,null,l),t.child=Xr(t,null,i,l)):mt(e,t,i,l),t.memoizedState=r.state,s&&Iu(t,n,!0),t.child}function Fp(e){var t=e.stateNode;t.pendingContext?zu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&zu(e,t.context,!1),vc(e,t.containerInfo)}function qu(e,t,n,r,s){return Vr(),pc(s),t.flags|=256,mt(e,t,n,r),t.child}var Mi={dehydrated:null,treeContext:null,retryLane:0};function _i(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bp(e,t,n){var r=t.pendingProps,s=ze.current,l=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),_e(ze,s&1),e===null)return bi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=Xo(a,r,0,null),e=or(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=_i(n),t.memoizedState=Mi,e):Ec(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return hg(e,t,a,r,i,s,n);if(l){l=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Un(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?l=Un(i,l):(l=or(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?_i(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=Mi,r}return l=e.child,e=l.sibling,r=Un(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ec(e,t){return t=Xo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _l(e,t,n,r){return r!==null&&pc(r),Xr(t,e.child,null,n),e=Ec(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hg(e,t,n,r,s,l,a){if(n)return t.flags&256?(t.flags&=-257,r=Ra(Error(R(422))),_l(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=Xo({mode:"visible",children:r.children},s,0,null),l=or(l,s,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Xr(t,e.child,null,a),t.child.memoizedState=_i(a),t.memoizedState=Mi,l);if(!(t.mode&1))return _l(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(R(419)),r=Ra(l,r,void 0),_l(e,t,a,r)}if(i=(a&e.childLanes)!==0,St||i){if(r=rt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,kn(e,s),tn(r,e,s,-1))}return Pc(),r=Ra(Error(R(421))),_l(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Eg.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,Pt=$n(s.nextSibling),zt=t,Pe=!0,Zt=null,e!==null&&(Bt[Ut++]=gn,Bt[Ut++]=yn,Bt[Ut++]=cr,gn=e.id,yn=e.overflow,cr=t),t=Ec(t,r.children),t.flags|=4096,t)}function Ju(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ki(e.return,t,n)}function Pa(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function Up(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(mt(e,t,r.children,n),r=ze.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ju(e,n,t);else if(e.tag===19)Ju(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_e(ze,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&wo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Pa(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&wo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Pa(t,!0,n,null,l);break;case"together":Pa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function jn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),dr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,n=Un(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Un(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function xg(e,t,n){switch(t.tag){case 3:Fp(t),Vr();break;case 5:hp(t);break;case 1:Ct(t.type)&&ho(t);break;case 4:vc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;_e(go,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(_e(ze,ze.current&1),t.flags|=128,null):n&t.child.childLanes?Bp(e,t,n):(_e(ze,ze.current&1),e=jn(e,t,n),e!==null?e.sibling:null);_e(ze,ze.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Up(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(ze,ze.current),r)break;return null;case 22:case 23:return t.lanes=0,$p(e,t,n)}return jn(e,t,n)}var Hp,Ti,Wp,Vp;Hp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ti=function(){};Wp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,sr(pn.current);var l=null;switch(n){case"input":s=Ja(e,s),r=Ja(e,r),l=[];break;case"select":s=Le({},s,{value:void 0}),r=Le({},r,{value:void 0}),l=[];break;case"textarea":s=ti(e,s),r=ti(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=fo)}ri(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var i=s[d];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Is.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var c=r[d];if(i=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(l||(l=[]),l.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Is.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Te("scroll",e),l||i===c||(l=[])):(l=l||[]).push(d,c))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};Vp=function(e,t,n,r){n!==r&&(t.flags|=4)};function xs(e,t){if(!Pe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function mg(e,t,n){var r=t.pendingProps;switch(fc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return Ct(t.type)&&po(),dt(t),null;case 3:return r=t.stateNode,Yr(),Re(Nt),Re(ht),bc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(El(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zt!==null&&($i(Zt),Zt=null))),Ti(e,t),dt(t),null;case 5:wc(t);var s=sr(Ys.current);if(n=t.type,e!==null&&t.stateNode!=null)Wp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(R(166));return dt(t),null}if(e=sr(pn.current),El(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[dn]=t,r[Vs]=l,e=(t.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(s=0;s<ks.length;s++)Te(ks[s],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":au(r,l),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Te("invalid",r);break;case"textarea":cu(r,l),Te("invalid",r)}ri(n,l),s=null;for(var a in l)if(l.hasOwnProperty(a)){var i=l[a];a==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&Cl(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&Cl(r.textContent,i,e),s=["children",""+i]):Is.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Te("scroll",r)}switch(n){case"input":yl(r),iu(r,l,!0);break;case"textarea":yl(r),uu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=fo)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=vf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[dn]=t,e[Vs]=r,Hp(e,t,!1,!1),t.stateNode=e;e:{switch(a=si(n,r),n){case"dialog":Te("cancel",e),Te("close",e),s=r;break;case"iframe":case"object":case"embed":Te("load",e),s=r;break;case"video":case"audio":for(s=0;s<ks.length;s++)Te(ks[s],e);s=r;break;case"source":Te("error",e),s=r;break;case"img":case"image":case"link":Te("error",e),Te("load",e),s=r;break;case"details":Te("toggle",e),s=r;break;case"input":au(e,r),s=Ja(e,r),Te("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Le({},r,{value:void 0}),Te("invalid",e);break;case"textarea":cu(e,r),s=ti(e,r),Te("invalid",e);break;default:s=r}ri(n,s),i=s;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?kf(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&wf(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ls(e,c):typeof c=="number"&&Ls(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Is.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Te("scroll",e):c!=null&&qi(e,l,c,a))}switch(n){case"input":yl(e),iu(e,r,!1);break;case"textarea":yl(e),uu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Hn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Lr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=fo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)Vp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(R(166));if(n=sr(Ys.current),sr(pn.current),El(t)){if(r=t.stateNode,n=t.memoizedProps,r[dn]=t,(l=r.nodeValue!==n)&&(e=zt,e!==null))switch(e.tag){case 3:Cl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Cl(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[dn]=t,t.stateNode=r}return dt(t),null;case 13:if(Re(ze),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pe&&Pt!==null&&t.mode&1&&!(t.flags&128))cp(),Vr(),t.flags|=98560,l=!1;else if(l=El(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(R(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(R(317));l[dn]=t}else Vr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),l=!1}else Zt!==null&&($i(Zt),Zt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ze.current&1?Ke===0&&(Ke=3):Pc())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return Yr(),Ti(e,t),e===null&&Hs(t.stateNode.containerInfo),dt(t),null;case 10:return mc(t.type._context),dt(t),null;case 17:return Ct(t.type)&&po(),dt(t),null;case 19:if(Re(ze),l=t.memoizedState,l===null)return dt(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)xs(l,!1);else{if(Ke!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=wo(e),a!==null){for(t.flags|=128,xs(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _e(ze,ze.current&1|2),t.child}e=e.sibling}l.tail!==null&&Fe()>Qr&&(t.flags|=128,r=!0,xs(l,!1),t.lanes=4194304)}else{if(!r)if(e=wo(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),xs(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!Pe)return dt(t),null}else 2*Fe()-l.renderingStartTime>Qr&&n!==1073741824&&(t.flags|=128,r=!0,xs(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Fe(),t.sibling=null,n=ze.current,_e(ze,r?n&1|2:n&1),t):(dt(t),null);case 22:case 23:return Rc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Rt&1073741824&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function gg(e,t){switch(fc(t),t.tag){case 1:return Ct(t.type)&&po(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yr(),Re(Nt),Re(ht),bc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wc(t),null;case 13:if(Re(ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));Vr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Re(ze),null;case 4:return Yr(),null;case 10:return mc(t.type._context),null;case 22:case 23:return Rc(),null;case 24:return null;default:return null}}var Tl=!1,pt=!1,yg=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Pr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(e,t,r)}else n.current=null}function Di(e,t,n){try{n()}catch(r){$e(e,t,r)}}var Zu=!1;function vg(e,t){if(hi=io,e=Gf(),uc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch(S){n=null;break e}var a=0,i=-1,c=-1,d=0,p=0,f=e,h=null;t:for(;;){for(var x;f!==n||s!==0&&f.nodeType!==3||(i=a+s),f!==l||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)h=f,f=x;for(;;){if(f===e)break t;if(h===n&&++d===s&&(i=a),h===l&&++p===r&&(c=a),(x=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=x}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(xi={focusedElem:e,selectionRange:n},io=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,b=w.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:qt(t.type,y),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(S){$e(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return w=Zu,Zu=!1,w}function _s(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&Di(t,n,l)}s=s.next}while(s!==r)}}function Wo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ri(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Xp(e){var t=e.alternate;t!==null&&(e.alternate=null,Xp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dn],delete t[Vs],delete t[yi],delete t[tg],delete t[ng])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Yp(e){return e.tag===5||e.tag===3||e.tag===4}function ed(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Yp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=fo));else if(r!==4&&(e=e.child,e!==null))for(Pi(e,t,n),e=e.sibling;e!==null;)Pi(e,t,n),e=e.sibling}function zi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(zi(e,t,n),e=e.sibling;e!==null;)zi(e,t,n),e=e.sibling}var at=null,Jt=!1;function Cn(e,t,n){for(n=n.child;n!==null;)Kp(e,t,n),n=n.sibling}function Kp(e,t,n){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Lo,n)}catch(i){}switch(n.tag){case 5:pt||Pr(n,t);case 6:var r=at,s=Jt;at=null,Cn(e,t,n),at=r,Jt=s,at!==null&&(Jt?(e=at,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(Jt?(e=at,n=n.stateNode,e.nodeType===8?Ca(e.parentNode,n):e.nodeType===1&&Ca(e,n),Fs(e)):Ca(at,n.stateNode));break;case 4:r=at,s=Jt,at=n.stateNode.containerInfo,Jt=!0,Cn(e,t,n),at=r,Jt=s;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&Di(n,t,a),s=s.next}while(s!==r)}Cn(e,t,n);break;case 1:if(!pt&&(Pr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){$e(n,t,i)}Cn(e,t,n);break;case 21:Cn(e,t,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,Cn(e,t,n),pt=r):Cn(e,t,n);break;default:Cn(e,t,n)}}function td(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new yg),t.forEach(function(r){var s=Mg.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:at=i.stateNode,Jt=!1;break e;case 3:at=i.stateNode.containerInfo,Jt=!0;break e;case 4:at=i.stateNode.containerInfo,Jt=!0;break e}i=i.return}if(at===null)throw Error(R(160));Kp(l,a,s),at=null,Jt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){$e(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Qp(t,e),t=t.sibling}function Qp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gt(t,e),cn(e),r&4){try{_s(3,e,e.return),Wo(3,e)}catch(y){$e(e,e.return,y)}try{_s(5,e,e.return)}catch(y){$e(e,e.return,y)}}break;case 1:Gt(t,e),cn(e),r&512&&n!==null&&Pr(n,n.return);break;case 5:if(Gt(t,e),cn(e),r&512&&n!==null&&Pr(n,n.return),e.flags&32){var s=e.stateNode;try{Ls(s,"")}catch(y){$e(e,e.return,y)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&gf(s,l),si(i,a);var d=si(i,l);for(a=0;a<c.length;a+=2){var p=c[a],f=c[a+1];p==="style"?kf(s,f):p==="dangerouslySetInnerHTML"?wf(s,f):p==="children"?Ls(s,f):qi(s,p,f,d)}switch(i){case"input":Za(s,l);break;case"textarea":yf(s,l);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?Lr(s,!!l.multiple,x,!1):h!==!!l.multiple&&(l.defaultValue!=null?Lr(s,!!l.multiple,l.defaultValue,!0):Lr(s,!!l.multiple,l.multiple?[]:"",!1))}s[Vs]=l}catch(y){$e(e,e.return,y)}}break;case 6:if(Gt(t,e),cn(e),r&4){if(e.stateNode===null)throw Error(R(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(y){$e(e,e.return,y)}}break;case 3:if(Gt(t,e),cn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fs(t.containerInfo)}catch(y){$e(e,e.return,y)}break;case 4:Gt(t,e),cn(e);break;case 13:Gt(t,e),cn(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(Tc=Fe())),r&4&&td(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(pt=(d=pt)||p,Gt(t,e),pt=d):Gt(t,e),cn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(Y=e,p=e.child;p!==null;){for(f=Y=p;Y!==null;){switch(h=Y,x=h.child,h.tag){case 0:case 11:case 14:case 15:_s(4,h,h.return);break;case 1:Pr(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(y){$e(r,n,y)}}break;case 5:Pr(h,h.return);break;case 22:if(h.memoizedState!==null){rd(f);continue}}x!==null?(x.return=h,Y=x):rd(f)}p=p.sibling}e:for(p=null,f=e;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,d?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=bf("display",a))}catch(y){$e(e,e.return,y)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){$e(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Gt(t,e),cn(e),r&4&&td(e);break;case 21:break;default:Gt(t,e),cn(e)}}function cn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Yp(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ls(s,""),r.flags&=-33);var l=ed(e);zi(e,l,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=ed(e);Pi(e,i,a);break;default:throw Error(R(161))}}catch(c){$e(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wg(e,t,n){Y=e,Gp(e)}function Gp(e,t,n){for(var r=(e.mode&1)!==0;Y!==null;){var s=Y,l=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Tl;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||pt;i=Tl;var d=pt;if(Tl=a,(pt=c)&&!d)for(Y=s;Y!==null;)a=Y,c=a.child,a.tag===22&&a.memoizedState!==null?sd(s):c!==null?(c.return=a,Y=c):sd(s);for(;l!==null;)Y=l,Gp(l),l=l.sibling;Y=s,Tl=i,pt=d}nd(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,Y=l):nd(e)}}function nd(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:pt||Wo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!pt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:qt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Fu(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Fu(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&Fs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}pt||t.flags&512&&Ri(t)}catch(h){$e(t,t.return,h)}}if(t===e){Y=null;break}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}}function rd(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Y=n;break}Y=t.return}}function sd(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Wo(4,t)}catch(c){$e(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){$e(t,s,c)}}var l=t.return;try{Ri(t)}catch(c){$e(t,l,c)}break;case 5:var a=t.return;try{Ri(t)}catch(c){$e(t,a,c)}}}catch(c){$e(t,t.return,c)}if(t===e){Y=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Y=i;break}Y=t.return}}var bg=Math.ceil,jo=Nn.ReactCurrentDispatcher,Mc=Nn.ReactCurrentOwner,Wt=Nn.ReactCurrentBatchConfig,be=0,rt=null,He=null,it=0,Rt=0,zr=Xn(0),Ke=0,qs=null,dr=0,Vo=0,_c=0,Ts=null,jt=null,Tc=0,Qr=1/0,xn=null,So=!1,Ii=null,Fn=null,Dl=!1,Pn=null,No=0,Ds=0,Li=null,Zl=-1,eo=0;function gt(){return be&6?Fe():Zl!==-1?Zl:Zl=Fe()}function Bn(e){return e.mode&1?be&2&&it!==0?it&-it:sg.transition!==null?(eo===0&&(eo=zf()),eo):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:Bf(e.type)),e):1}function tn(e,t,n,r){if(50<Ds)throw Ds=0,Li=null,Error(R(185));rl(e,n,r),(!(be&2)||e!==rt)&&(e===rt&&(!(be&2)&&(Vo|=n),Ke===4&&Dn(e,it)),Et(e,r),n===1&&be===0&&!(t.mode&1)&&(Qr=Fe()+500,Bo&&Yn()))}function Et(e,t){var n=e.callbackNode;sm(e,t);var r=ao(e,e===rt?it:0);if(r===0)n!==null&&pu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&pu(n),t===1)e.tag===0?rg(ld.bind(null,e)):op(ld.bind(null,e)),Zm(function(){!(be&6)&&Yn()}),n=null;else{switch(If(r)){case 1:n=nc;break;case 4:n=Rf;break;case 16:n=oo;break;case 536870912:n=Pf;break;default:n=oo}n=sh(n,qp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function qp(e,t){if(Zl=-1,eo=0,be&6)throw Error(R(327));var n=e.callbackNode;if(Br()&&e.callbackNode!==n)return null;var r=ao(e,e===rt?it:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Co(e,r);else{t=r;var s=be;be|=2;var l=Zp();(rt!==e||it!==t)&&(xn=null,Qr=Fe()+500,lr(e,t));do try{Sg();break}catch(i){Jp(e,i)}while(!0);xc(),jo.current=l,be=s,He!==null?t=0:(rt=null,it=0,t=Ke)}if(t!==0){if(t===2&&(s=ci(e),s!==0&&(r=s,t=Oi(e,s))),t===1)throw n=qs,lr(e,0),Dn(e,r),Et(e,Fe()),n;if(t===6)Dn(e,r);else{if(s=e.current.alternate,!(r&30)&&!kg(s)&&(t=Co(e,r),t===2&&(l=ci(e),l!==0&&(r=l,t=Oi(e,l))),t===1))throw n=qs,lr(e,0),Dn(e,r),Et(e,Fe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(R(345));case 2:er(e,jt,xn);break;case 3:if(Dn(e,r),(r&130023424)===r&&(t=Tc+500-Fe(),10<t)){if(ao(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){gt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=gi(er.bind(null,e,jt,xn),t);break}er(e,jt,xn);break;case 4:if(Dn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-en(r);l=1<<a,a=t[a],a>s&&(s=a),r&=~l}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bg(r/1960))-r,10<r){e.timeoutHandle=gi(er.bind(null,e,jt,xn),r);break}er(e,jt,xn);break;case 5:er(e,jt,xn);break;default:throw Error(R(329))}}}return Et(e,Fe()),e.callbackNode===n?qp.bind(null,e):null}function Oi(e,t){var n=Ts;return e.current.memoizedState.isDehydrated&&(lr(e,t).flags|=256),e=Co(e,t),e!==2&&(t=jt,jt=n,t!==null&&$i(t)),e}function $i(e){jt===null?jt=e:jt.push.apply(jt,e)}function kg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!nn(l(),s))return!1}catch(a){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dn(e,t){for(t&=~_c,t&=~Vo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-en(t),r=1<<n;e[n]=-1,t&=~r}}function ld(e){if(be&6)throw Error(R(327));Br();var t=ao(e,0);if(!(t&1))return Et(e,Fe()),null;var n=Co(e,t);if(e.tag!==0&&n===2){var r=ci(e);r!==0&&(t=r,n=Oi(e,r))}if(n===1)throw n=qs,lr(e,0),Dn(e,t),Et(e,Fe()),n;if(n===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,er(e,jt,xn),Et(e,Fe()),null}function Dc(e,t){var n=be;be|=1;try{return e(t)}finally{be=n,be===0&&(Qr=Fe()+500,Bo&&Yn())}}function fr(e){Pn!==null&&Pn.tag===0&&!(be&6)&&Br();var t=be;be|=1;var n=Wt.transition,r=Ce;try{if(Wt.transition=null,Ce=1,e)return e()}finally{Ce=r,Wt.transition=n,be=t,!(be&6)&&Yn()}}function Rc(){Rt=zr.current,Re(zr)}function lr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Jm(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(fc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&po();break;case 3:Yr(),Re(Nt),Re(ht),bc();break;case 5:wc(r);break;case 4:Yr();break;case 13:Re(ze);break;case 19:Re(ze);break;case 10:mc(r.type._context);break;case 22:case 23:Rc()}n=n.return}if(rt=e,He=e=Un(e.current,null),it=Rt=t,Ke=0,qs=null,_c=Vo=dr=0,jt=Ts=null,rr!==null){for(t=0;t<rr.length;t++)if(n=rr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=s,r.next=a}n.pending=r}rr=null}return e}function Jp(e,t){do{var n=He;try{if(xc(),Gl.current=ko,bo){for(var r=Ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}bo=!1}if(ur=0,tt=Xe=Ie=null,Ms=!1,Ks=0,Mc.current=null,n===null||n.return===null){Ke=1,qs=t,He=null;break}e:{var l=e,a=n.return,i=n,c=t;if(t=it,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=i,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=Xu(a);if(x!==null){x.flags&=-257,Yu(x,a,i,l,t),x.mode&1&&Vu(l,d,t),t=x,c=d;var w=t.updateQueue;if(w===null){var y=new Set;y.add(c),t.updateQueue=y}else w.add(c);break e}else{if(!(t&1)){Vu(l,d,t),Pc();break e}c=Error(R(426))}}else if(Pe&&i.mode&1){var b=Xu(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Yu(b,a,i,l,t),pc(Kr(c,i));break e}}l=c=Kr(c,i),Ke!==4&&(Ke=2),Ts===null?Ts=[l]:Ts.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var g=Ip(l,c,t);Au(l,g);break e;case 1:i=c;var m=l.type,v=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Fn===null||!Fn.has(v)))){l.flags|=65536,t&=-t,l.lanes|=t;var S=Lp(l,i,t);Au(l,S);break e}}l=l.return}while(l!==null)}th(n)}catch(j){t=j,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function Zp(){var e=jo.current;return jo.current=ko,e===null?ko:e}function Pc(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),rt===null||!(dr&268435455)&&!(Vo&268435455)||Dn(rt,it)}function Co(e,t){var n=be;be|=2;var r=Zp();(rt!==e||it!==t)&&(xn=null,lr(e,t));do try{jg();break}catch(s){Jp(e,s)}while(!0);if(xc(),be=n,jo.current=r,He!==null)throw Error(R(261));return rt=null,it=0,Ke}function jg(){for(;He!==null;)eh(He)}function Sg(){for(;He!==null&&!Qx();)eh(He)}function eh(e){var t=rh(e.alternate,e,Rt);e.memoizedProps=e.pendingProps,t===null?th(e):He=t,Mc.current=null}function th(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=gg(n,t),n!==null){n.flags&=32767,He=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ke=6,He=null;return}}else if(n=mg(n,t,Rt),n!==null){He=n;return}if(t=t.sibling,t!==null){He=t;return}He=t=e}while(t!==null);Ke===0&&(Ke=5)}function er(e,t,n){var r=Ce,s=Wt.transition;try{Wt.transition=null,Ce=1,Ng(e,t,n,r)}finally{Wt.transition=s,Ce=r}return null}function Ng(e,t,n,r){do Br();while(Pn!==null);if(be&6)throw Error(R(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(lm(e,l),e===rt&&(He=rt=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dl||(Dl=!0,sh(oo,function(){return Br(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Wt.transition,Wt.transition=null;var a=Ce;Ce=1;var i=be;be|=4,Mc.current=null,vg(e,n),Qp(n,e),Vm(xi),io=!!hi,xi=hi=null,e.current=n,wg(n),Gx(),be=i,Ce=a,Wt.transition=l}else e.current=n;if(Dl&&(Dl=!1,Pn=e,No=s),l=e.pendingLanes,l===0&&(Fn=null),Zx(n.stateNode),Et(e,Fe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(So)throw So=!1,e=Ii,Ii=null,e;return No&1&&e.tag!==0&&Br(),l=e.pendingLanes,l&1?e===Li?Ds++:(Ds=0,Li=e):Ds=0,Yn(),null}function Br(){if(Pn!==null){var e=If(No),t=Wt.transition,n=Ce;try{if(Wt.transition=null,Ce=16>e?16:e,Pn===null)var r=!1;else{if(e=Pn,Pn=null,No=0,be&6)throw Error(R(331));var s=be;for(be|=4,Y=e.current;Y!==null;){var l=Y,a=l.child;if(Y.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(Y=d;Y!==null;){var p=Y;switch(p.tag){case 0:case 11:case 15:_s(8,p,l)}var f=p.child;if(f!==null)f.return=p,Y=f;else for(;Y!==null;){p=Y;var h=p.sibling,x=p.return;if(Xp(p),p===d){Y=null;break}if(h!==null){h.return=x,Y=h;break}Y=x}}}var w=l.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}Y=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,Y=a;else e:for(;Y!==null;){if(l=Y,l.flags&2048)switch(l.tag){case 0:case 11:case 15:_s(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,Y=g;break e}Y=l.return}}var m=e.current;for(Y=m;Y!==null;){a=Y;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,Y=v;else e:for(a=m;Y!==null;){if(i=Y,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Wo(9,i)}}catch(j){$e(i,i.return,j)}if(i===a){Y=null;break e}var S=i.sibling;if(S!==null){S.return=i.return,Y=S;break e}Y=i.return}}if(be=s,Yn(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Lo,e)}catch(j){}r=!0}return r}finally{Ce=n,Wt.transition=t}}return!1}function od(e,t,n){t=Kr(n,t),t=Ip(e,t,1),e=An(e,t,1),t=gt(),e!==null&&(rl(e,1,t),Et(e,t))}function $e(e,t,n){if(e.tag===3)od(e,e,n);else for(;t!==null;){if(t.tag===3){od(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fn===null||!Fn.has(r))){e=Kr(n,e),e=Lp(t,e,1),t=An(t,e,1),e=gt(),t!==null&&(rl(t,1,e),Et(t,e));break}}t=t.return}}function Cg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=gt(),e.pingedLanes|=e.suspendedLanes&n,rt===e&&(it&n)===n&&(Ke===4||Ke===3&&(it&130023424)===it&&500>Fe()-Tc?lr(e,0):_c|=n),Et(e,t)}function nh(e,t){t===0&&(e.mode&1?(t=bl,bl<<=1,!(bl&130023424)&&(bl=4194304)):t=1);var n=gt();e=kn(e,t),e!==null&&(rl(e,t,n),Et(e,n))}function Eg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),nh(e,n)}function Mg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(t),nh(e,n)}var rh;rh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Nt.current)St=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return St=!1,xg(e,t,n);St=!!(e.flags&131072)}else St=!1,Pe&&t.flags&1048576&&ap(t,mo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Jl(e,t),e=t.pendingProps;var s=Wr(t,ht.current);Fr(t,n),s=jc(null,t,r,e,s,n);var l=Sc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ct(r)?(l=!0,ho(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yc(t),s.updater=Ho,t.stateNode=s,s._reactInternals=t,Si(t,r,e,n),t=Ei(null,t,r,!0,l,n)):(t.tag=0,Pe&&l&&dc(t),mt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Jl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Tg(r),e=qt(r,e),s){case 0:t=Ci(null,t,r,e,n);break e;case 1:t=Gu(null,t,r,e,n);break e;case 11:t=Ku(null,t,r,e,n);break e;case 14:t=Qu(null,t,r,qt(r.type,e),n);break e}throw Error(R(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),Ci(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),Gu(e,t,r,s,n);case 3:e:{if(Fp(t),e===null)throw Error(R(387));r=t.pendingProps,l=t.memoizedState,s=l.element,pp(e,t),vo(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Kr(Error(R(423)),t),t=qu(e,t,r,n,s);break e}else if(r!==s){s=Kr(Error(R(424)),t),t=qu(e,t,r,n,s);break e}else for(Pt=$n(t.stateNode.containerInfo.firstChild),zt=t,Pe=!0,Zt=null,n=dp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vr(),r===s){t=jn(e,t,n);break e}mt(e,t,r,n)}t=t.child}return t;case 5:return hp(t),e===null&&bi(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,a=s.children,mi(r,s)?a=null:l!==null&&mi(r,l)&&(t.flags|=32),Ap(e,t),mt(e,t,a,n),t.child;case 6:return e===null&&bi(t),null;case 13:return Bp(e,t,n);case 4:return vc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Xr(t,null,r,n):mt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),Ku(e,t,r,s,n);case 7:return mt(e,t,t.pendingProps,n),t.child;case 8:return mt(e,t,t.pendingProps.children,n),t.child;case 12:return mt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,a=s.value,_e(go,r._currentValue),r._currentValue=a,l!==null)if(nn(l.value,a)){if(l.children===s.children&&!Nt.current){t=jn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){a=l.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=vn(-1,n&-n),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),ki(l.return,n,t),i.lanes|=n;break}c=c.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(R(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),ki(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}mt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Fr(t,n),s=Vt(s),r=r(s),t.flags|=1,mt(e,t,r,n),t.child;case 14:return r=t.type,s=qt(r,t.pendingProps),s=qt(r.type,s),Qu(e,t,r,s,n);case 15:return Op(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),Jl(e,t),t.tag=1,Ct(r)?(e=!0,ho(t)):e=!1,Fr(t,n),zp(t,r,s),Si(t,r,s,n),Ei(null,t,r,!0,e,n);case 19:return Up(e,t,n);case 22:return $p(e,t,n)}throw Error(R(156,t.tag))};function sh(e,t){return Df(e,t)}function _g(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(e,t,n,r){return new _g(e,t,n,r)}function zc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tg(e){if(typeof e=="function")return zc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zi)return 11;if(e===ec)return 14}return 2}function Un(e,t){var n=e.alternate;return n===null?(n=Ht(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function to(e,t,n,r,s,l){var a=2;if(r=e,typeof e=="function")zc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Sr:return or(n.children,s,l,t);case Ji:a=8,s|=8;break;case Ka:return e=Ht(12,n,t,s|2),e.elementType=Ka,e.lanes=l,e;case Qa:return e=Ht(13,n,t,s),e.elementType=Qa,e.lanes=l,e;case Ga:return e=Ht(19,n,t,s),e.elementType=Ga,e.lanes=l,e;case hf:return Xo(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ff:a=10;break e;case pf:a=9;break e;case Zi:a=11;break e;case ec:a=14;break e;case En:a=16,r=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=Ht(a,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function or(e,t,n,r){return e=Ht(7,e,r,t),e.lanes=n,e}function Xo(e,t,n,r){return e=Ht(22,e,r,t),e.elementType=hf,e.lanes=n,e.stateNode={isHidden:!1},e}function za(e,t,n){return e=Ht(6,e,null,t),e.lanes=n,e}function Ia(e,t,n){return t=Ht(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dg(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xa(0),this.expirationTimes=xa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xa(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ic(e,t,n,r,s,l,a,i,c){return e=new Dg(e,t,n,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Ht(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yc(l),e}function Rg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function lh(e){if(!e)return Wn;e=e._reactInternals;e:{if(xr(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var n=e.type;if(Ct(n))return lp(e,n,t)}return t}function oh(e,t,n,r,s,l,a,i,c){return e=Ic(n,r,!0,e,s,l,a,i,c),e.context=lh(null),n=e.current,r=gt(),s=Bn(n),l=vn(r,s),l.callback=t!=null?t:null,An(n,l,s),e.current.lanes=s,rl(e,s,r),Et(e,r),e}function Yo(e,t,n,r){var s=t.current,l=gt(),a=Bn(s);return n=lh(n),t.context===null?t.context=n:t.pendingContext=n,t=vn(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=An(s,t,a),e!==null&&(tn(e,s,a,l),Ql(e,s,a)),a}function Eo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ad(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Lc(e,t){ad(e,t),(e=e.alternate)&&ad(e,t)}function Pg(){return null}var ah=typeof reportError=="function"?reportError:function(e){console.error(e)};function Oc(e){this._internalRoot=e}Ko.prototype.render=Oc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));Yo(e,t,null,null)};Ko.prototype.unmount=Oc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fr(function(){Yo(null,e,null,null)}),t[bn]=null}};function Ko(e){this._internalRoot=e}Ko.prototype.unstable_scheduleHydration=function(e){if(e){var t=$f();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Tn.length&&t!==0&&t<Tn[n].priority;n++);Tn.splice(n,0,e),n===0&&Ff(e)}};function $c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function id(){}function zg(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var d=Eo(a);l.call(d)}}var a=oh(t,r,e,0,null,!1,!1,"",id);return e._reactRootContainer=a,e[bn]=a.current,Hs(e.nodeType===8?e.parentNode:e),fr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var d=Eo(c);i.call(d)}}var c=Ic(e,0,!1,null,null,!1,!1,"",id);return e._reactRootContainer=c,e[bn]=c.current,Hs(e.nodeType===8?e.parentNode:e),fr(function(){Yo(t,c,n,r)}),c}function Go(e,t,n,r,s){var l=n._reactRootContainer;if(l){var a=l;if(typeof s=="function"){var i=s;s=function(){var c=Eo(a);i.call(c)}}Yo(t,a,e,s)}else a=zg(n,t,e,s,r);return Eo(a)}Lf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=bs(t.pendingLanes);n!==0&&(rc(t,n|1),Et(t,Fe()),!(be&6)&&(Qr=Fe()+500,Yn()))}break;case 13:fr(function(){var r=kn(e,1);if(r!==null){var s=gt();tn(r,e,1,s)}}),Lc(e,1)}};sc=function(e){if(e.tag===13){var t=kn(e,134217728);if(t!==null){var n=gt();tn(t,e,134217728,n)}Lc(e,134217728)}};Of=function(e){if(e.tag===13){var t=Bn(e),n=kn(e,t);if(n!==null){var r=gt();tn(n,e,t,r)}Lc(e,t)}};$f=function(){return Ce};Af=function(e,t){var n=Ce;try{return Ce=e,t()}finally{Ce=n}};oi=function(e,t,n){switch(t){case"input":if(Za(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Fo(r);if(!s)throw Error(R(90));mf(r),Za(r,s)}}}break;case"textarea":yf(e,n);break;case"select":t=n.value,t!=null&&Lr(e,!!n.multiple,t,!1)}};Nf=Dc;Cf=fr;var Ig={usingClientEntryPoint:!1,Events:[ll,Mr,Fo,jf,Sf,Dc]},ms={findFiberByHostInstance:nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lg={bundleType:ms.bundleType,version:ms.version,rendererPackageName:ms.rendererPackageName,rendererConfig:ms.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_f(e),e===null?null:e.stateNode},findFiberByHostInstance:ms.findFiberByHostInstance||Pg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rl.isDisabled&&Rl.supportsFiber)try{Lo=Rl.inject(Lg),fn=Rl}catch(e){}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ig;Lt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$c(t))throw Error(R(200));return Rg(e,t,null,n)};Lt.createRoot=function(e,t){if(!$c(e))throw Error(R(299));var n=!1,r="",s=ah;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ic(e,1,!1,null,null,n,!1,r,s),e[bn]=t.current,Hs(e.nodeType===8?e.parentNode:e),new Oc(t)};Lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=_f(t),e=e===null?null:e.stateNode,e};Lt.flushSync=function(e){return fr(e)};Lt.hydrate=function(e,t,n){if(!Qo(t))throw Error(R(200));return Go(null,e,t,!0,n)};Lt.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",a=ah;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=oh(t,null,e,1,n!=null?n:null,s,!1,l,a),e[bn]=t.current,Hs(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ko(t)};Lt.render=function(e,t,n){if(!Qo(t))throw Error(R(200));return Go(null,e,t,!1,n)};Lt.unmountComponentAtNode=function(e){if(!Qo(e))throw Error(R(40));return e._reactRootContainer?(fr(function(){Go(null,null,e,!1,function(){e._reactRootContainer=null,e[bn]=null})}),!0):!1};Lt.unstable_batchedUpdates=Dc;Lt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qo(n))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return Go(e,t,n,!1,r)};Lt.version="18.3.1-next-f1338f8080-20240426";function ih(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ih)}catch(e){console.error(e)}}ih(),af.exports=Lt;var Ir=af.exports,cd=Ir;Xa.createRoot=cd.createRoot,Xa.hydrateRoot=cd.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Js(){return Js=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Js.apply(this,arguments)}var zn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(zn||(zn={}));const ud="popstate";function Og(e){e===void 0&&(e={});function t(s,l){let{pathname:a="/",search:i="",hash:c=""}=mr(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Ai("",{pathname:a,search:i,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(s,l){let a=s.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");i=d===-1?c:c.slice(0,d)}return i+"#"+(typeof l=="string"?l:ch(l))}function r(s,l){qo(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return Ag(t,n,r,e)}function Qe(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function qo(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function $g(){return Math.random().toString(36).substr(2,8)}function dd(e,t){return{usr:e.state,key:e.key,idx:t}}function Ai(e,t,n,r){return n===void 0&&(n=null),Js({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?mr(t):t,{state:n,key:t&&t.key||r||$g()})}function ch(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function mr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Ag(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,a=s.history,i=zn.Pop,c=null,d=p();d==null&&(d=0,a.replaceState(Js({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function f(){i=zn.Pop;let b=p(),g=b==null?null:b-d;d=b,c&&c({action:i,location:y.location,delta:g})}function h(b,g){i=zn.Push;let m=Ai(y.location,b,g);n&&n(m,b),d=p()+1;let v=dd(m,d),S=y.createHref(m);try{a.pushState(v,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}l&&c&&c({action:i,location:y.location,delta:1})}function x(b,g){i=zn.Replace;let m=Ai(y.location,b,g);n&&n(m,b),d=p();let v=dd(m,d),S=y.createHref(m);a.replaceState(v,"",S),l&&c&&c({action:i,location:y.location,delta:0})}function w(b){let g=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof b=="string"?b:ch(b);return m=m.replace(/ $/,"%20"),Qe(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let y={get action(){return i},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(ud,f),c=b,()=>{s.removeEventListener(ud,f),c=null}},createHref(b){return t(s,b)},createURL:w,encodeLocation(b){let g=w(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:x,go(b){return a.go(b)}};return y}var fd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(fd||(fd={}));function Fg(e,t,n){return n===void 0&&(n="/"),Bg(e,t,n)}function Bg(e,t,n,r){let s=typeof t=="string"?mr(t):t,l=fh(s.pathname||"/",n);if(l==null)return null;let a=uh(e);Ug(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let d=ey(l);i=qg(a[c],d)}return i}function uh(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,a,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:a,route:l};c.relativePath.startsWith("/")&&(Qe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=ar([r,c.relativePath]),p=n.concat(c);l.children&&l.children.length>0&&(Qe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),uh(l.children,t,p,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:Qg(d,l.index),routesMeta:p})};return e.forEach((l,a)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))s(l,a);else for(let c of dh(l.path))s(l,a,c)}),t}function dh(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let a=dh(r.join("/")),i=[];return i.push(...a.map(c=>c===""?l:[l,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Ug(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Gg(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Hg=/^:[\w-]+$/,Wg=3,Vg=2,Xg=1,Yg=10,Kg=-2,pd=e=>e==="*";function Qg(e,t){let n=e.split("/"),r=n.length;return n.some(pd)&&(r+=Kg),t&&(r+=Vg),n.filter(s=>!pd(s)).reduce((s,l)=>s+(Hg.test(l)?Wg:l===""?Xg:Yg),r)}function Gg(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function qg(e,t,n){let{routesMeta:r}=e,s={},l="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],d=i===r.length-1,p=l==="/"?t:t.slice(l.length)||"/",f=Jg({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),h=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:ar([l,f.pathname]),pathnameBase:ay(ar([l,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(l=ar([l,f.pathnameBase]))}return a}function Jg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Zg(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],a=l.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((d,p,f)=>{let{paramName:h,isOptional:x}=p;if(h==="*"){let y=i[f]||"";a=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const w=i[f];return x&&!w?d[h]=void 0:d[h]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:a,pattern:e}}function Zg(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),qo(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function ey(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qo(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function fh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const ty=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ny=e=>ty.test(e);function ry(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?mr(e):e,l;if(n)if(ny(n))l=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),qo(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?l=hd(n.substring(1),"/"):l=hd(n,t)}else l=t;return{pathname:l,search:iy(r),hash:cy(s)}}function hd(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function La(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sy(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ly(e,t){let n=sy(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function oy(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=mr(e):(s=Js({},e),Qe(!s.pathname||!s.pathname.includes("?"),La("?","pathname","search",s)),Qe(!s.pathname||!s.pathname.includes("#"),La("#","pathname","hash",s)),Qe(!s.search||!s.search.includes("#"),La("#","search","hash",s)));let l=e===""||s.pathname==="",a=l?"/":s.pathname,i;if(a==null)i=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}i=f>=0?t[f]:"/"}let c=ry(s,i),d=a&&a!=="/"&&a.endsWith("/"),p=(l||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const ar=e=>e.join("/").replace(/\/\/+/g,"/"),ay=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),iy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function uy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ph=["post","put","patch","delete"];new Set(ph);const dy=["get",...ph];new Set(dy);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zs(){return Zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zs.apply(this,arguments)}const Ac=u.createContext(null),fy=u.createContext(null),Jo=u.createContext(null),Zo=u.createContext(null),gr=u.createContext({outlet:null,matches:[],isDataRoute:!1}),hh=u.createContext(null);function ea(){return u.useContext(Zo)!=null}function Fc(){return ea()||Qe(!1),u.useContext(Zo).location}function xh(e){u.useContext(Jo).static||u.useLayoutEffect(e)}function $t(){let{isDataRoute:e}=u.useContext(gr);return e?Ny():py()}function py(){ea()||Qe(!1);let e=u.useContext(Ac),{basename:t,future:n,navigator:r}=u.useContext(Jo),{matches:s}=u.useContext(gr),{pathname:l}=Fc(),a=JSON.stringify(ly(s,n.v7_relativeSplatPath)),i=u.useRef(!1);return xh(()=>{i.current=!0}),u.useCallback(function(d,p){if(p===void 0&&(p={}),!i.current)return;if(typeof d=="number"){r.go(d);return}let f=oy(d,JSON.parse(a),l,p.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:ar([t,f.pathname])),(p.replace?r.replace:r.push)(f,p.state,p)},[t,r,a,l,e])}function mh(){let{matches:e}=u.useContext(gr),t=e[e.length-1];return t?t.params:{}}function hy(e,t){return xy(e,t)}function xy(e,t,n,r){ea()||Qe(!1);let{navigator:s}=u.useContext(Jo),{matches:l}=u.useContext(gr),a=l[l.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Fc(),p;if(t){var f;let b=typeof t=="string"?mr(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Qe(!1),p=b}else p=d;let h=p.pathname||"/",x=h;if(c!=="/"){let b=c.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=Fg(e,{pathname:x}),y=wy(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},i,b.params),pathname:ar([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:ar([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,n,r);return t&&y?u.createElement(Zo.Provider,{value:{location:Zs({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:zn.Pop}},y):y}function my(){let e=Sy(),t=uy(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:s},n):null,null)}const gy=u.createElement(my,null);class yy extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(gr.Provider,{value:this.props.routeContext},u.createElement(hh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vy(e){let{routeContext:t,match:n,children:r}=e,s=u.useContext(Ac);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(gr.Provider,{value:t},r)}function wy(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let p=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);p>=0||Qe(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let f=a[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=p),f.route.id){let{loaderData:h,errors:x}=n,w=f.route.loader&&h[f.route.id]===void 0&&(!x||x[f.route.id]===void 0);if(f.route.lazy||w){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,f,h)=>{let x,w=!1,y=null,b=null;n&&(x=i&&f.route.id?i[f.route.id]:void 0,y=f.route.errorElement||gy,c&&(d<0&&h===0?(Cy("route-fallback"),w=!0,b=null):d===h&&(w=!0,b=f.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,h+1)),m=()=>{let v;return x?v=y:w?v=b:f.route.Component?v=u.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=p,u.createElement(vy,{match:f,routeContext:{outlet:p,matches:g,isDataRoute:n!=null},children:v})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?u.createElement(yy,{location:n.location,revalidation:n.revalidation,component:y,error:x,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var gh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(gh||{}),yh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(yh||{});function by(e){let t=u.useContext(Ac);return t||Qe(!1),t}function ky(e){let t=u.useContext(fy);return t||Qe(!1),t}function jy(e){let t=u.useContext(gr);return t||Qe(!1),t}function vh(e){let t=jy(),n=t.matches[t.matches.length-1];return n.route.id||Qe(!1),n.route.id}function Sy(){var e;let t=u.useContext(hh),n=ky(),r=vh();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Ny(){let{router:e}=by(gh.UseNavigateStable),t=vh(yh.UseNavigateStable),n=u.useRef(!1);return xh(()=>{n.current=!0}),u.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Zs({fromRouteId:t},l)))},[e,t])}const xd={};function Cy(e,t,n){xd[e]||(xd[e]=!0)}function Ey(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ft(e){Qe(!1)}function My(e){let{basename:t="/",children:n=null,location:r,navigationType:s=zn.Pop,navigator:l,static:a=!1,future:i}=e;ea()&&Qe(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:l,static:a,future:Zs({v7_relativeSplatPath:!1},i)}),[c,i,l,a]);typeof r=="string"&&(r=mr(r));let{pathname:p="/",search:f="",hash:h="",state:x=null,key:w="default"}=r,y=u.useMemo(()=>{let b=fh(p,c);return b==null?null:{location:{pathname:b,search:f,hash:h,state:x,key:w},navigationType:s}},[c,p,f,h,x,w,s]);return y==null?null:u.createElement(Jo.Provider,{value:d},u.createElement(Zo.Provider,{children:n,value:y}))}function _y(e){let{children:t,location:n}=e;return hy(Fi(t),n)}new Promise(()=>{});function Fi(e,t){t===void 0&&(t=[]);let n=[];return u.Children.forEach(e,(r,s)=>{if(!u.isValidElement(r))return;let l=[...t,s];if(r.type===u.Fragment){n.push.apply(n,Fi(r.props.children,l));return}r.type!==ft&&Qe(!1),!r.props.index||!r.props.children||Qe(!1);let a={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Fi(r.props.children,l)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Ty="6";try{window.__reactRouterVersion=Ty}catch(e){}const Dy="startTransition",md=Cx[Dy];function Ry(e){let{basename:t,children:n,future:r,window:s}=e,l=u.useRef();l.current==null&&(l.current=Og({window:s,v5Compat:!0}));let a=l.current,[i,c]=u.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},p=u.useCallback(f=>{d&&md?md(()=>c(f)):c(f)},[c,d]);return u.useLayoutEffect(()=>a.listen(p),[a,p]),u.useEffect(()=>Ey(r),[r]),u.createElement(My,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}var gd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(gd||(gd={}));var yd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(yd||(yd={}));const Bc="";async function vd(){var r,s;const e=localStorage.getItem("whisper_token");if(e)return e;const t=(s=(r=window.Telegram)==null?void 0:r.WebApp)==null?void 0:s.initData;if(t){const a=await(await fetch(`${Bc}/api/auth/telegram`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:t})})).json();if(a.success&&a.token)return localStorage.setItem("whisper_token",a.token),a.token}const n=new Error("need_login");throw n.code="NEED_LOGIN",n}async function F(e,t={}){let n=await vd();const r=`${Bc}${e}`,s=a=>fetch(r,{...t,cache:"no-store",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`,...t.headers},body:t.body?JSON.stringify(t.body):void 0});let l=await s(n);if(l.status===401&&(localStorage.removeItem("whisper_token"),n=await vd(),l=await s(n)),l.status===204)return null;if(!l.ok){const a=await l.json().catch(()=>({}));throw new Error(a.detail||` (${l.status})`)}return l.json()}async function Py(e){const n=await(await fetch(`${Bc}/api/auth/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})})).json();if(n.success&&n.token)return localStorage.setItem("whisper_token",n.token),!0;throw new Error(n.detail||"")}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wh=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Iy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:a,...i},c)=>u.createElement("svg",{ref:c,...Iy,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:wh("lucide",s),...i},[...a.map(([d,p])=>u.createElement(d,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(e,t)=>{const n=u.forwardRef(({className:r,...s},l)=>u.createElement(Ly,{ref:l,iconNode:t,className:wh(`lucide-${zy(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=me("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=me("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=me("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=me("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=me("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=me("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=me("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=me("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=me("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=me("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=me("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=me("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=me("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=me("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=me("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=me("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=me("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=me("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=me("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=me("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=me("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=me("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=me("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=me("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=me("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ev="WhisperMiniDB",tv=1,Jr="avatars",Sh=()=>new Promise((e,t)=>{const n=indexedDB.open(ev,tv);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(Jr)||r.createObjectStore(Jr,{keyPath:"key"})}}),Bi=async(e,t)=>{const n=await Sh();return new Promise((r,s)=>{const l=n.transaction([Jr],"readwrite");l.objectStore(Jr).put({key:e,base64:t}),l.oncomplete=()=>r(),l.onerror=()=>s(l.error)})},ss=async e=>{const t=await Sh();return new Promise((n,r)=>{const l=t.transaction([Jr],"readonly").objectStore(Jr).get(e);l.onsuccess=()=>{var a;return n(((a=l.result)==null?void 0:a.base64)||null)},l.onerror=()=>r(l.error)})},kt={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function br({icon:e,label:t,desc:n,disabled:r,onClick:s,badge:l}){const[a,i]=u.useState(!1),c=()=>!r&&i(!0),d=()=>{i(!1),r||s==null||s()};return o.jsxs("button",{className:"flex flex-col items-start rounded-[18px] gap-2 text-left",style:{padding:"16px 14px",background:kt.bg,boxShadow:a?"inset 3px 3px 8px rgba(174,176,182,0.5), inset -3px -3px 8px #ffffff":"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff",opacity:r?.4:1,transform:a?"scale(0.97)":"scale(1)",transition:"transform 0.1s, box-shadow 0.1s",cursor:r?"default":"pointer",WebkitTapHighlightColor:"transparent"},disabled:r,onTouchStart:c,onTouchEnd:d,onMouseDown:c,onMouseUp:d,onMouseLeave:()=>i(!1),children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-[12px]",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))"},children:e}),l&&o.jsx("div",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full",style:{background:"#ef4444",border:"2px solid var(--bg)"}})]}),o.jsxs("div",{className:"pl-1",children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:kt.text},children:t}),o.jsx("div",{className:"mt-0.5 text-[10px] leading-snug",style:{color:kt.textMuted},children:n})]})]})}function kd({children:e}){return o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-[3px]",style:{color:kt.textMuted},children:e})}function nv(){const e=$t(),[t,n]=u.useState(()=>{try{return JSON.parse(localStorage.getItem("whisper_profile")||"null")}catch(d){return null}}),[r,s]=u.useState(null),[l,a]=u.useState(!1);u.useEffect(()=>{F("/api/user/profile").then(d=>{n(d),localStorage.setItem("whisper_profile",JSON.stringify(d))}).catch(()=>{}),ss("user-avatar").then(d=>{d&&s(d)}).catch(function(){}),F("/api/diary/unread-count").then(d=>{d.count>0&&a(!0)}).catch(()=>{})},[]);const i=(t==null?void 0:t.nickname)||"",c=(t==null?void 0:t.background_url)||"";return o.jsxs("div",{className:"flex flex-col overflow-y-auto",style:{background:kt.bg,height:"100%",paddingBottom:16},children:[o.jsxs("div",{className:"flex flex-col px-5",style:{paddingTop:"max(12px, env(safe-area-inset-top))"},children:[o.jsx("h1",{className:"mb-4 text-center text-[17px] font-medium",style:{color:kt.textMuted,letterSpacing:"4px"},children:"W H I S P E R"}),o.jsxs("button",{className:"mb-5 flex w-full items-center gap-4 rounded-[20px] p-5 text-left",style:{background:kt.bg,boxShadow:"6px 6px 14px rgba(174,176,182,0.5), -6px -6px 14px #ffffff"},onClick:()=>e("/profile"),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:52,height:52,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:kt.bg},children:r?o.jsx("img",{src:r,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:22},children:""})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"text-[17px] font-bold truncate",style:{color:kt.text},children:["@",i]}),o.jsxs("div",{className:"mt-0.5 text-[11px] italic",style:{color:kt.textMuted},children:['"',c,'"']})]}),o.jsx(Gr,{size:16,style:{color:kt.textMuted,flexShrink:0}})]}),o.jsx(kd,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(br,{icon:o.jsx(Uc,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/world-books")}),o.jsx(br,{icon:o.jsx($y,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/memories")}),o.jsx(br,{icon:o.jsx(bh,{size:18,color:"white"}),label:"",desc:"Core Blocks",onClick:()=>e("/assistants")}),o.jsx(br,{icon:o.jsx(qy,{size:18,color:"white"}),label:"",desc:"API",onClick:()=>e("/settings")})]}),o.jsx(kd,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(br,{icon:o.jsx(Oy,{size:18,color:"white"}),label:"",desc:"",badge:l,onClick:()=>e("/diary")}),o.jsx(br,{icon:o.jsx(Jy,{size:18,color:"white"}),label:"",desc:"",disabled:!0})]}),o.jsx("button",{className:"flex w-full items-center justify-center rounded-[18px] py-4",style:{background:kt.bg,boxShadow:"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff"},onClick:()=>e("/cot"),children:o.jsx(Wy,{size:32,fill:kt.accent,style:{color:kt.accent,animation:"heartbeat 2s ease-in-out infinite"}})})]}),o.jsx("style",{children:`
        @keyframes heartbeat {
          0%, 100% { transform: scale(1); }
          15% { transform: scale(1.15); }
          30% { transform: scale(1); }
          45% { transform: scale(1.1); }
          60% { transform: scale(1); }
        }
      `})]})}function rv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const na=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function ls(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Vc(e){return"nodeType"in e}function wt(e){var t,n;return e?ls(e)?e:Vc(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Xc(e){const{Document:t}=wt(e);return e instanceof t}function dl(e){return ls(e)?!1:e instanceof wt(e).HTMLElement}function Nh(e){return e instanceof wt(e).SVGElement}function os(e){return e?ls(e)?e.document:Vc(e)?Xc(e)?e:dl(e)||Nh(e)?e.ownerDocument:document:document:document}const rn=na?u.useLayoutEffect:u.useEffect;function ra(e){const t=u.useRef(e);return rn(()=>{t.current=e}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function sv(){const e=u.useRef(null),t=u.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=u.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function el(e,t){t===void 0&&(t=[e]);const n=u.useRef(e);return rn(()=>{n.current!==e&&(n.current=e)},t),n}function fl(e,t){const n=u.useRef();return u.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Mo(e){const t=ra(e),n=u.useRef(null),r=u.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function _o(e){const t=u.useRef();return u.useEffect(()=>{t.current=e},[e]),t.current}let Oa={};function pl(e,t){return u.useMemo(()=>{if(t)return t;const n=Oa[e]==null?0:Oa[e]+1;return Oa[e]=n,e+"-"+n},[e,t])}function Ch(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const i=Object.entries(a);for(const[c,d]of i){const p=l[c];p!=null&&(l[c]=p+e*d)}return l},{...t})}}const Ur=Ch(1),To=Ch(-1);function lv(e){return"clientX"in e&&"clientY"in e}function sa(e){if(!e)return!1;const{KeyboardEvent:t}=wt(e.target);return t&&e instanceof t}function ov(e){if(!e)return!1;const{TouchEvent:t}=wt(e.target);return t&&e instanceof t}function Do(e){if(ov(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return lv(e)?{x:e.clientX,y:e.clientY}:null}const Sn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Sn.Translate.toString(e),Sn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),jd="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function av(e){return e.matches(jd)?e:e.querySelector(jd)}const iv={display:"none"};function cv(e){let{id:t,value:n}=e;return De.createElement("div",{id:t,style:iv},n)}function uv(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return De.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function dv(){const[e,t]=u.useState("");return{announce:u.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Eh=u.createContext(null);function fv(e){const t=u.useContext(Eh);u.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function pv(){const[e]=u.useState(()=>new Set),t=u.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[u.useCallback(r=>{let{type:s,event:l}=r;e.forEach(a=>{var i;return(i=a[s])==null?void 0:i.call(a,l)})},[e]),t]}const hv={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},xv={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function mv(e){let{announcements:t=xv,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=hv}=e;const{announce:l,announcement:a}=dv(),i=pl("DndLiveRegion"),[c,d]=u.useState(!1);if(u.useEffect(()=>{d(!0)},[]),fv(u.useMemo(()=>({onDragStart(f){let{active:h}=f;l(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:x}=f;t.onDragMove&&l(t.onDragMove({active:h,over:x}))},onDragOver(f){let{active:h,over:x}=f;l(t.onDragOver({active:h,over:x}))},onDragEnd(f){let{active:h,over:x}=f;l(t.onDragEnd({active:h,over:x}))},onDragCancel(f){let{active:h,over:x}=f;l(t.onDragCancel({active:h,over:x}))}}),[l,t])),!c)return null;const p=De.createElement(De.Fragment,null,De.createElement(cv,{id:r,value:s.draggable}),De.createElement(uv,{id:i,announcement:a}));return n?Ir.createPortal(p,n):p}var Ye;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ye||(Ye={}));function Ro(){}function Po(e,t){return u.useMemo(()=>({sensor:e,options:t!=null?t:{}}),[e,t])}function Mh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const sn=Object.freeze({x:0,y:0});function gv(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function yv(e,t){const n=Do(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function vv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function wv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function bv(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Sd(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const _h=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=Sd(t,t.left,t.top),l=[];for(const a of r){const{id:i}=a,c=n.get(i);if(c){const d=gv(Sd(c),s);l.push({id:i,data:{droppableContainer:a,value:d}})}}return l.sort(vv)};function kv(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height),a=s-r,i=l-n;if(r<s&&n<l){const c=t.width*t.height,d=e.width*e.height,p=a*i,f=p/(c+d-p);return Number(f.toFixed(4))}return 0}const jv=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const l of r){const{id:a}=l,i=n.get(a);if(i){const c=kv(i,t);c>0&&s.push({id:a,data:{droppableContainer:l,value:c}})}}return s.sort(wv)};function Sv(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Th(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:sn}function Nv(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,i)=>({...a,top:a.top+e*i.y,bottom:a.bottom+e*i.y,left:a.left+e*i.x,right:a.right+e*i.x}),{...n})}}const Cv=Nv(1);function Dh(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Ev(e,t,n){const r=Dh(t);if(!r)return e;const{scaleX:s,scaleY:l,x:a,y:i}=r,c=e.left-a-(1-s)*parseFloat(n),d=e.top-i-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),p=s?e.width/s:e.width,f=l?e.height/l:e.height;return{width:p,height:f,top:d,right:c+p,bottom:d+f,left:c}}const Mv={ignoreTransform:!1};function as(e,t){t===void 0&&(t=Mv);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:p}=wt(e).getComputedStyle(e);d&&(n=Ev(n,d,p))}const{top:r,left:s,width:l,height:a,bottom:i,right:c}=n;return{top:r,left:s,width:l,height:a,bottom:i,right:c}}function Nd(e){return as(e,{ignoreTransform:!0})}function _v(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Tv(e,t){return t===void 0&&(t=wt(e).getComputedStyle(e)),t.position==="fixed"}function Dv(e,t){t===void 0&&(t=wt(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=t[s];return typeof l=="string"?n.test(l):!1})}function Yc(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Xc(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!dl(s)||Nh(s)||n.includes(s))return n;const l=wt(e).getComputedStyle(s);return s!==e&&Dv(s,l)&&n.push(s),Tv(s,l)?n:r(s.parentNode)}return e?r(e):n}function Rh(e){const[t]=Yc(e,1);return t!=null?t:null}function $a(e){return!na||!e?null:ls(e)?e:Vc(e)?Xc(e)||e===os(e).scrollingElement?window:dl(e)?e:null:null}function Ph(e){return ls(e)?e.scrollX:e.scrollLeft}function zh(e){return ls(e)?e.scrollY:e.scrollTop}function Ui(e){return{x:Ph(e),y:zh(e)}}var nt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(nt||(nt={}));function Ih(e){return!na||!e?!1:e===document.scrollingElement}function Lh(e){const t={x:0,y:0},n=Ih(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,l=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:i,maxScroll:r,minScroll:t}}const Rv={x:.2,y:.2};function Pv(e,t,n,r,s){let{top:l,left:a,right:i,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=Rv);const{isTop:d,isBottom:p,isLeft:f,isRight:h}=Lh(e),x={x:0,y:0},w={x:0,y:0},y={height:t.height*s.y,width:t.width*s.x};return!d&&l<=t.top+y.height?(x.y=nt.Backward,w.y=r*Math.abs((t.top+y.height-l)/y.height)):!p&&c>=t.bottom-y.height&&(x.y=nt.Forward,w.y=r*Math.abs((t.bottom-y.height-c)/y.height)),!h&&i>=t.right-y.width?(x.x=nt.Forward,w.x=r*Math.abs((t.right-y.width-i)/y.width)):!f&&a<=t.left+y.width&&(x.x=nt.Backward,w.x=r*Math.abs((t.left+y.width-a)/y.width)),{direction:x,speed:w}}function zv(e){if(e===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function Oh(e){return e.reduce((t,n)=>Ur(t,Ui(n)),sn)}function Iv(e){return e.reduce((t,n)=>t+Ph(n),0)}function Lv(e){return e.reduce((t,n)=>t+zh(n),0)}function $h(e,t){if(t===void 0&&(t=as),!e)return;const{top:n,left:r,bottom:s,right:l}=t(e);Rh(e)&&(s<=0||l<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Ov=[["x",["left","right"],Iv],["y",["top","bottom"],Lv]];class Kc{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Yc(n),s=Oh(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[l,a,i]of Ov)for(const c of a)Object.defineProperty(this,c,{get:()=>{const d=i(r),p=s[l]-d;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Rs{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function $v(e){const{EventTarget:t}=wt(e);return e instanceof t?e:os(e)}function Aa(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Ft;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ft||(Ft={}));function Cd(e){e.preventDefault()}function Av(e){e.stopPropagation()}var je;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(je||(je={}));const Ah={start:[je.Space,je.Enter],cancel:[je.Esc],end:[je.Space,je.Enter,je.Tab]},Fv=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case je.Right:return{...n,x:n.x+25};case je.Left:return{...n,x:n.x-25};case je.Down:return{...n,y:n.y+25};case je.Up:return{...n,y:n.y-25}}};class Fh{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Rs(os(n)),this.windowListeners=new Rs(wt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ft.Resize,this.handleCancel),this.windowListeners.add(Ft.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ft.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&$h(r),n(sn)}handleKeyDown(t){if(sa(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:l=Ah,coordinateGetter:a=Fv,scrollBehavior:i="smooth"}=s,{code:c}=t;if(l.end.includes(c)){this.handleEnd(t);return}if(l.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:sn;this.referenceCoordinates||(this.referenceCoordinates=p);const f=a(t,{active:n,context:r.current,currentCoordinates:p});if(f){const h=To(f,p),x={x:0,y:0},{scrollableAncestors:w}=r.current;for(const y of w){const b=t.code,{isTop:g,isRight:m,isLeft:v,isBottom:S,maxScroll:j,minScroll:N}=Lh(y),k=zv(y),E={x:Math.min(b===je.Right?k.right-k.width/2:k.right,Math.max(b===je.Right?k.left:k.left+k.width/2,f.x)),y:Math.min(b===je.Down?k.bottom-k.height/2:k.bottom,Math.max(b===je.Down?k.top:k.top+k.height/2,f.y))},T=b===je.Right&&!m||b===je.Left&&!v,z=b===je.Down&&!S||b===je.Up&&!g;if(T&&E.x!==f.x){const L=y.scrollLeft+h.x,ae=b===je.Right&&L<=j.x||b===je.Left&&L>=N.x;if(ae&&!h.y){y.scrollTo({left:L,behavior:i});return}ae?x.x=y.scrollLeft-L:x.x=b===je.Right?y.scrollLeft-j.x:y.scrollLeft-N.x,x.x&&y.scrollBy({left:-x.x,behavior:i});break}else if(z&&E.y!==f.y){const L=y.scrollTop+h.y,ae=b===je.Down&&L<=j.y||b===je.Up&&L>=N.y;if(ae&&!h.x){y.scrollTo({top:L,behavior:i});return}ae?x.y=y.scrollTop-L:x.y=b===je.Down?y.scrollTop-j.y:y.scrollTop-N.y,x.y&&y.scrollBy({top:-x.y,behavior:i});break}}this.handleMove(t,Ur(To(f,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Fh.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Ah,onActivation:s}=t,{active:l}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const i=l.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function Ed(e){return!!(e&&"distance"in e)}function Md(e){return!!(e&&"delay"in e)}class Qc{constructor(t,n,r){var s;r===void 0&&(r=$v(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:l}=t,{target:a}=l;this.props=t,this.events=n,this.document=os(a),this.documentListeners=new Rs(this.document),this.listeners=new Rs(r),this.windowListeners=new Rs(wt(a)),this.initialCoordinates=(s=Do(l))!=null?s:sn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ft.Resize,this.handleCancel),this.windowListeners.add(Ft.DragStart,Cd),this.windowListeners.add(Ft.VisibilityChange,this.handleCancel),this.windowListeners.add(Ft.ContextMenu,Cd),this.documentListeners.add(Ft.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Md(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Ed(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ft.Click,Av,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ft.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:i}}=l;if(!s)return;const c=(n=Do(t))!=null?n:sn,d=To(s,c);if(!r&&i){if(Ed(i)){if(i.tolerance!=null&&Aa(d,i.tolerance))return this.handleCancel();if(Aa(d,i.distance))return this.handleStart()}if(Md(i)&&Aa(d,i.tolerance))return this.handleCancel();this.handlePending(i,d);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===je.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Bv={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class la extends Qc{constructor(t){const{event:n}=t,r=os(n.target);super(t,Bv,r)}}la.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Uv={move:{name:"mousemove"},end:{name:"mouseup"}};var Hi;(function(e){e[e.RightClick=2]="RightClick"})(Hi||(Hi={}));class Hv extends Qc{constructor(t){super(t,Uv,os(t.event.target))}}Hv.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Hi.RightClick?!1:(r==null||r({event:n}),!0)}}];const Fa={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Gc extends Qc{constructor(t){super(t,Fa)}static setup(){return window.addEventListener(Fa.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Fa.move.name,t)};function t(){}}}Gc.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Ps;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ps||(Ps={}));var zo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(zo||(zo={}));function Wv(e){let{acceleration:t,activator:n=Ps.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:i=zo.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:p,delta:f,threshold:h}=e;const x=Xv({delta:f,disabled:!l}),[w,y]=sv(),b=u.useRef({x:0,y:0}),g=u.useRef({x:0,y:0}),m=u.useMemo(()=>{switch(n){case Ps.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Ps.DraggableRect:return s}},[n,s,c]),v=u.useRef(null),S=u.useCallback(()=>{const N=v.current;if(!N)return;const k=b.current.x*g.current.x,E=b.current.y*g.current.y;N.scrollBy(k,E)},[]),j=u.useMemo(()=>i===zo.TreeOrder?[...d].reverse():d,[i,d]);u.useEffect(()=>{if(!l||!d.length||!m){y();return}for(const N of j){if((r==null?void 0:r(N))===!1)continue;const k=d.indexOf(N),E=p[k];if(!E)continue;const{direction:T,speed:z}=Pv(N,E,m,t,h);for(const L of["x","y"])x[L][T[L]]||(z[L]=0,T[L]=0);if(z.x>0||z.y>0){y(),v.current=N,w(S,a),b.current=z,g.current=T;return}}b.current={x:0,y:0},g.current={x:0,y:0},y()},[t,S,r,y,l,a,JSON.stringify(m),JSON.stringify(x),w,d,j,p,JSON.stringify(h)])}const Vv={x:{[nt.Backward]:!1,[nt.Forward]:!1},y:{[nt.Backward]:!1,[nt.Forward]:!1}};function Xv(e){let{delta:t,disabled:n}=e;const r=_o(t);return fl(s=>{if(n||!r||!s)return Vv;const l={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[nt.Backward]:s.x[nt.Backward]||l.x===-1,[nt.Forward]:s.x[nt.Forward]||l.x===1},y:{[nt.Backward]:s.y[nt.Backward]||l.y===-1,[nt.Forward]:s.y[nt.Forward]||l.y===1}}},[n,t,r])}function Yv(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return fl(s=>{var l;return t==null?null:(l=r!=null?r:s)!=null?l:null},[r,t])}function Kv(e,t){return u.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...l]},[]),[e,t])}var tl;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(tl||(tl={}));var Wi;(function(e){e.Optimized="optimized"})(Wi||(Wi={}));const _d=new Map;function Qv(e,t){let{dragging:n,dependencies:r,config:s}=t;const[l,a]=u.useState(null),{frequency:i,measure:c,strategy:d}=s,p=u.useRef(e),f=b(),h=el(f),x=u.useCallback(function(g){g===void 0&&(g=[]),!h.current&&a(m=>m===null?g:m.concat(g.filter(v=>!m.includes(v))))},[h]),w=u.useRef(null),y=fl(g=>{if(f&&!n)return _d;if(!g||g===_d||p.current!==e||l!=null){const m=new Map;for(let v of e){if(!v)continue;if(l&&l.length>0&&!l.includes(v.id)&&v.rect.current){m.set(v.id,v.rect.current);continue}const S=v.node.current,j=S?new Kc(c(S),S):null;v.rect.current=j,j&&m.set(v.id,j)}return m}return g},[e,l,n,f,c]);return u.useEffect(()=>{p.current=e},[e]),u.useEffect(()=>{f||x()},[n,f]),u.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),u.useEffect(()=>{f||typeof i!="number"||w.current!==null||(w.current=setTimeout(()=>{x(),w.current=null},i))},[i,f,x,...r]),{droppableRects:y,measureDroppableContainers:x,measuringScheduled:l!=null};function b(){switch(d){case tl.Always:return!1;case tl.BeforeDragging:return n;default:return!n}}}function qc(e,t){return fl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Gv(e,t){return qc(e,t)}function qv(e){let{callback:t,disabled:n}=e;const r=ra(t),s=u.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:l}=window;return new l(r)},[r,n]);return u.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function oa(e){let{callback:t,disabled:n}=e;const r=ra(t),s=u.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:l}=window;return new l(r)},[n]);return u.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Jv(e){return new Kc(as(e),e)}function Td(e,t,n){t===void 0&&(t=Jv);const[r,s]=u.useState(null);function l(){s(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c!=null?c:n)!=null?d:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=qv({callback(c){if(e)for(const d of c){const{type:p,target:f}=d;if(p==="childList"&&f instanceof HTMLElement&&f.contains(e)){l();break}}}}),i=oa({callback:l});return rn(()=>{l(),e?(i==null||i.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),a==null||a.disconnect())},[e]),r}function Zv(e){const t=qc(e);return Th(e,t)}const Dd=[];function e1(e){const t=u.useRef(e),n=fl(r=>e?r&&r!==Dd&&e&&t.current&&e.parentNode===t.current.parentNode?r:Yc(e):Dd,[e]);return u.useEffect(()=>{t.current=e},[e]),n}function t1(e){const[t,n]=u.useState(null),r=u.useRef(e),s=u.useCallback(l=>{const a=$a(l.target);a&&n(i=>i?(i.set(a,Ui(a)),new Map(i)):null)},[]);return u.useEffect(()=>{const l=r.current;if(e!==l){a(l);const i=e.map(c=>{const d=$a(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,Ui(d)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=e}return()=>{a(e),a(l)};function a(i){i.forEach(c=>{const d=$a(c);d==null||d.removeEventListener("scroll",s)})}},[s,e]),u.useMemo(()=>e.length?t?Array.from(t.values()).reduce((l,a)=>Ur(l,a),sn):Oh(e):sn,[e,t])}function Rd(e,t){t===void 0&&(t=[]);const n=u.useRef(null);return u.useEffect(()=>{n.current=null},t),u.useEffect(()=>{const r=e!==sn;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?To(e,n.current):sn}function n1(e){u.useEffect(()=>{if(!na)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function r1(e,t){return u.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:l}=r;return n[s]=a=>{l(a,t)},n},{}),[e,t])}function Bh(e){return u.useMemo(()=>e?_v(e):null,[e])}const Pd=[];function s1(e,t){t===void 0&&(t=as);const[n]=e,r=Bh(n?wt(n):null),[s,l]=u.useState(Pd);function a(){l(()=>e.length?e.map(c=>Ih(c)?r:new Kc(t(c),c)):Pd)}const i=oa({callback:a});return rn(()=>{i==null||i.disconnect(),a(),e.forEach(c=>i==null?void 0:i.observe(c))},[e]),s}function Uh(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return dl(t)?t:e}function l1(e){let{measure:t}=e;const[n,r]=u.useState(null),s=u.useCallback(d=>{for(const{target:p}of d)if(dl(p)){r(f=>{const h=t(p);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),l=oa({callback:s}),a=u.useCallback(d=>{const p=Uh(d);l==null||l.disconnect(),p&&(l==null||l.observe(p)),r(p?t(p):null)},[t,l]),[i,c]=Mo(a);return u.useMemo(()=>({nodeRef:i,rect:n,setRef:c}),[n,i,c])}const o1=[{sensor:la,options:{}},{sensor:Fh,options:{}}],a1={current:{}},no={draggable:{measure:Nd},droppable:{measure:Nd,strategy:tl.WhileDragging,frequency:Wi.Optimized},dragOverlay:{measure:as}};class zs extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const i1={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new zs,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ro},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:no,measureDroppableContainers:Ro,windowRect:null,measuringScheduled:!1},Hh={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ro,draggableNodes:new Map,over:null,measureDroppableContainers:Ro},hl=u.createContext(Hh),Wh=u.createContext(i1);function c1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new zs}}}function u1(e,t){switch(t.type){case Ye.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ye.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ye.DragEnd:case Ye.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ye.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new zs(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Ye.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,l=e.droppable.containers.get(n);if(!l||r!==l.key)return e;const a=new zs(e.droppable.containers);return a.set(n,{...l,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case Ye.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const l=new zs(e.droppable.containers);return l.delete(n),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function d1(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=u.useContext(hl),l=_o(r),a=_o(n==null?void 0:n.id);return u.useEffect(()=>{if(!t&&!r&&l&&a!=null){if(!sa(l)||document.activeElement===l.target)return;const i=s.get(a);if(!i)return;const{activatorNode:c,node:d}=i;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[c.current,d.current]){if(!p)continue;const f=av(p);if(f){f.focus();break}}})}},[r,t,s,a,l]),null}function Vh(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,l)=>l({transform:s,...r}),n):n}function f1(e){return u.useMemo(()=>({draggable:{...no.draggable,...e==null?void 0:e.draggable},droppable:{...no.droppable,...e==null?void 0:e.droppable},dragOverlay:{...no.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function p1(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const l=u.useRef(!1),{x:a,y:i}=typeof s=="boolean"?{x:s,y:s}:s;rn(()=>{if(!a&&!i||!t){l.current=!1;return}if(l.current||!r)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const p=n(d),f=Th(p,r);if(a||(f.x=0),i||(f.y=0),l.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=Rh(d);h&&h.scrollBy({top:f.y,left:f.x})}},[t,a,i,r,n])}const aa=u.createContext({...sn,scaleX:1,scaleY:1});var _n;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(_n||(_n={}));const Xh=u.memo(function(t){var n,r,s,l;let{id:a,accessibility:i,autoScroll:c=!0,children:d,sensors:p=o1,collisionDetection:f=jv,measuring:h,modifiers:x,...w}=t;const y=u.useReducer(u1,void 0,c1),[b,g]=y,[m,v]=pv(),[S,j]=u.useState(_n.Uninitialized),N=S===_n.Initialized,{draggable:{active:k,nodes:E,translate:T},droppable:{containers:z}}=b,L=k!=null?E.get(k):null,ae=u.useRef({initial:null,translated:null}),H=u.useMemo(()=>{var Je;return k!=null?{id:k,data:(Je=L==null?void 0:L.data)!=null?Je:a1,rect:ae}:null},[k,L]),I=u.useRef(null),[q,he]=u.useState(null),[fe,O]=u.useState(null),Q=el(w,Object.values(w)),_=pl("DndDescribedBy",a),ee=u.useMemo(()=>z.getEnabled(),[z]),W=f1(h),{droppableRects:ke,measureDroppableContainers:ye,measuringScheduled:Ge}=Qv(ee,{dragging:N,dependencies:[T.x,T.y],config:W.droppable}),ve=Yv(E,k),V=u.useMemo(()=>fe?Do(fe):null,[fe]),we=is(),ne=Gv(ve,W.draggable.measure);p1({activeNode:k!=null?E.get(k):null,config:we.layoutShiftCompensation,initialRect:ne,measure:W.draggable.measure});const te=Td(ve,W.draggable.measure,ne),Be=Td(ve?ve.parentElement:null),Me=u.useRef({activatorEvent:null,active:null,activeNode:ve,collisionRect:null,collisions:null,droppableRects:ke,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),st=z.getNodeFor((n=Me.current.over)==null?void 0:n.id),X=l1({measure:W.dragOverlay.measure}),U=(r=X.nodeRef.current)!=null?r:ve,ue=N?(s=X.rect)!=null?s:te:null,re=!!(X.nodeRef.current&&X.rect),de=Zv(re?null:te),P=Bh(U?wt(U):null),Z=e1(N?st!=null?st:ve:null),se=s1(Z),ce=Vh(x,{transform:{x:T.x-de.x,y:T.y-de.y,scaleX:1,scaleY:1},activatorEvent:fe,active:H,activeNodeRect:te,containerNodeRect:Be,draggingNodeRect:ue,over:Me.current.over,overlayNodeRect:X.rect,scrollableAncestors:Z,scrollableAncestorRects:se,windowRect:P}),qe=V?Ur(V,T):null,We=t1(Z),Kn=Rd(We),Ue=Rd(We,[te]),Yt=Ur(ce,Kn),ln=ue?Cv(ue,ce):null,Kt=H&&ln?f({active:H,collisionRect:ln,droppableRects:ke,droppableContainers:ee,pointerCoordinates:qe}):null,Qn=bv(Kt,"id"),[_t,Gn]=u.useState(null),vr=re?ce:Ur(ce,Ue),$=Sv(vr,(l=_t==null?void 0:_t.rect)!=null?l:null,te),ge=u.useRef(null),ie=u.useCallback((Je,lt)=>{let{sensor:ot,options:on}=lt;if(I.current==null)return;const Tt=E.get(I.current);if(!Tt)return;const bt=Je.nativeEvent,Qt=new ot({active:I.current,activeNode:Tt,event:bt,options:on,context:Me,onAbort(Ze){if(!E.get(Ze))return;const{onDragAbort:Dt}=Q.current,C={id:Ze};Dt==null||Dt(C),m({type:"onDragAbort",event:C})},onPending(Ze,an,Dt,C){if(!E.get(Ze))return;const{onDragPending:K}=Q.current,J={id:Ze,constraint:an,initialCoordinates:Dt,offset:C};K==null||K(J),m({type:"onDragPending",event:J})},onStart(Ze){const an=I.current;if(an==null)return;const Dt=E.get(an);if(!Dt)return;const{onDragStart:C}=Q.current,A={activatorEvent:bt,active:{id:an,data:Dt.data,rect:ae}};Ir.unstable_batchedUpdates(()=>{C==null||C(A),j(_n.Initializing),g({type:Ye.DragStart,initialCoordinates:Ze,active:an}),m({type:"onDragStart",event:A}),he(ge.current),O(bt)})},onMove(Ze){g({type:Ye.DragMove,coordinates:Ze})},onEnd:qn(Ye.DragEnd),onCancel:qn(Ye.DragCancel)});ge.current=Qt;function qn(Ze){return async function(){const{active:Dt,collisions:C,over:A,scrollAdjustedTranslate:K}=Me.current;let J=null;if(Dt&&K){const{cancelDrop:Oe}=Q.current;J={activatorEvent:bt,active:Dt,collisions:C,delta:K,over:A},Ze===Ye.DragEnd&&typeof Oe=="function"&&await Promise.resolve(Oe(J))&&(Ze=Ye.DragCancel)}I.current=null,Ir.unstable_batchedUpdates(()=>{g({type:Ze}),j(_n.Uninitialized),Gn(null),he(null),O(null),ge.current=null;const Oe=Ze===Ye.DragEnd?"onDragEnd":"onDragCancel";if(J){const At=Q.current[Oe];At==null||At(J),m({type:Oe,event:J})}})}}},[E]),Ee=u.useCallback((Je,lt)=>(ot,on)=>{const Tt=ot.nativeEvent,bt=E.get(on);if(I.current!==null||!bt||Tt.dndKit||Tt.defaultPrevented)return;const Qt={active:bt};Je(ot,lt.options,Qt)===!0&&(Tt.dndKit={capturedBy:lt.sensor},I.current=on,ie(ot,lt))},[E,ie]),xt=Kv(p,Ee);n1(p),rn(()=>{te&&S===_n.Initializing&&j(_n.Initialized)},[te,S]),u.useEffect(()=>{const{onDragMove:Je}=Q.current,{active:lt,activatorEvent:ot,collisions:on,over:Tt}=Me.current;if(!lt||!ot)return;const bt={active:lt,activatorEvent:ot,collisions:on,delta:{x:Yt.x,y:Yt.y},over:Tt};Ir.unstable_batchedUpdates(()=>{Je==null||Je(bt),m({type:"onDragMove",event:bt})})},[Yt.x,Yt.y]),u.useEffect(()=>{const{active:Je,activatorEvent:lt,collisions:ot,droppableContainers:on,scrollAdjustedTranslate:Tt}=Me.current;if(!Je||I.current==null||!lt||!Tt)return;const{onDragOver:bt}=Q.current,Qt=on.get(Qn),qn=Qt&&Qt.rect.current?{id:Qt.id,rect:Qt.rect.current,data:Qt.data,disabled:Qt.disabled}:null,Ze={active:Je,activatorEvent:lt,collisions:ot,delta:{x:Tt.x,y:Tt.y},over:qn};Ir.unstable_batchedUpdates(()=>{Gn(qn),bt==null||bt(Ze),m({type:"onDragOver",event:Ze})})},[Qn]),rn(()=>{Me.current={activatorEvent:fe,active:H,activeNode:ve,collisionRect:ln,collisions:Kt,droppableRects:ke,draggableNodes:E,draggingNode:U,draggingNodeRect:ue,droppableContainers:z,over:_t,scrollableAncestors:Z,scrollAdjustedTranslate:Yt},ae.current={initial:ue,translated:ln}},[H,ve,Kt,ln,E,U,ue,ke,z,_t,Z,Yt]),Wv({...we,delta:T,draggingRect:ln,pointerCoordinates:qe,scrollableAncestors:Z,scrollableAncestorRects:se});const hn=u.useMemo(()=>({active:H,activeNode:ve,activeNodeRect:te,activatorEvent:fe,collisions:Kt,containerNodeRect:Be,dragOverlay:X,draggableNodes:E,droppableContainers:z,droppableRects:ke,over:_t,measureDroppableContainers:ye,scrollableAncestors:Z,scrollableAncestorRects:se,measuringConfiguration:W,measuringScheduled:Ge,windowRect:P}),[H,ve,te,fe,Kt,Be,X,E,z,ke,_t,ye,Z,se,W,Ge,P]),xl=u.useMemo(()=>({activatorEvent:fe,activators:xt,active:H,activeNodeRect:te,ariaDescribedById:{draggable:_},dispatch:g,draggableNodes:E,over:_t,measureDroppableContainers:ye}),[fe,xt,H,te,g,_,E,_t,ye]);return De.createElement(Eh.Provider,{value:v},De.createElement(hl.Provider,{value:xl},De.createElement(Wh.Provider,{value:hn},De.createElement(aa.Provider,{value:$},d)),De.createElement(d1,{disabled:(i==null?void 0:i.restoreFocus)===!1})),De.createElement(mv,{...i,hiddenTextDescribedById:_}));function is(){const Je=(q==null?void 0:q.autoScrollEnabled)===!1,lt=typeof c=="object"?c.enabled===!1:c===!1,ot=N&&!Je&&!lt;return typeof c=="object"?{...c,enabled:ot}:{enabled:ot}}}),h1=u.createContext(null),zd="button",x1="Draggable";function m1(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const l=pl(x1),{activators:a,activatorEvent:i,active:c,activeNodeRect:d,ariaDescribedById:p,draggableNodes:f,over:h}=u.useContext(hl),{role:x=zd,roleDescription:w="draggable",tabIndex:y=0}=s!=null?s:{},b=(c==null?void 0:c.id)===t,g=u.useContext(b?aa:h1),[m,v]=Mo(),[S,j]=Mo(),N=r1(a,t),k=el(n);rn(()=>(f.set(t,{id:t,key:l,node:m,activatorNode:S,data:k}),()=>{const T=f.get(t);T&&T.key===l&&f.delete(t)}),[f,t]);const E=u.useMemo(()=>({role:x,tabIndex:y,"aria-disabled":r,"aria-pressed":b&&x===zd?!0:void 0,"aria-roledescription":w,"aria-describedby":p.draggable}),[r,x,y,b,w,p.draggable]);return{active:c,activatorEvent:i,activeNodeRect:d,attributes:E,isDragging:b,listeners:r?void 0:N,node:m,over:h,setNodeRef:v,setActivatorNodeRef:j,transform:g}}function Yh(){return u.useContext(Wh)}const g1="Droppable",y1={timeout:25};function v1(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const l=pl(g1),{active:a,dispatch:i,over:c,measureDroppableContainers:d}=u.useContext(hl),p=u.useRef({disabled:n}),f=u.useRef(!1),h=u.useRef(null),x=u.useRef(null),{disabled:w,updateMeasurementsFor:y,timeout:b}={...y1,...s},g=el(y!=null?y:r),m=u.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(g.current)?g.current:[g.current]),x.current=null},b)},[b]),v=oa({callback:m,disabled:w||!a}),S=u.useCallback((E,T)=>{v&&(T&&(v.unobserve(T),f.current=!1),E&&v.observe(E))},[v]),[j,N]=Mo(S),k=el(t);return u.useEffect(()=>{!v||!j.current||(v.disconnect(),f.current=!1,v.observe(j.current))},[j,v]),u.useEffect(()=>(i({type:Ye.RegisterDroppable,element:{id:r,key:l,disabled:n,node:j,rect:h,data:k}}),()=>i({type:Ye.UnregisterDroppable,key:l,id:r})),[r]),u.useEffect(()=>{n!==p.current.disabled&&(i({type:Ye.SetDroppableDisabled,id:r,key:l,disabled:n}),p.current.disabled=n)},[r,l,n,i]),{active:a,rect:h,isOver:(c==null?void 0:c.id)===r,node:j,over:c,setNodeRef:N}}function w1(e){let{animation:t,children:n}=e;const[r,s]=u.useState(null),[l,a]=u.useState(null),i=_o(n);return!n&&!r&&i&&s(i),rn(()=>{if(!l)return;const c=r==null?void 0:r.key,d=r==null?void 0:r.props.id;if(c==null||d==null){s(null);return}Promise.resolve(t(d,l)).then(()=>{s(null)})},[t,r,l]),De.createElement(De.Fragment,null,n,r?u.cloneElement(r,{ref:a}):null)}const b1={x:0,y:0,scaleX:1,scaleY:1};function k1(e){let{children:t}=e;return De.createElement(hl.Provider,{value:Hh},De.createElement(aa.Provider,{value:b1},t))}const j1={position:"fixed",touchAction:"none"},S1=e=>sa(e)?"transform 250ms ease":void 0,N1=u.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:l,className:a,rect:i,style:c,transform:d,transition:p=S1}=e;if(!i)return null;const f=s?d:{...d,scaleX:1,scaleY:1},h={...j1,width:i.width,height:i.height,top:i.top,left:i.left,transform:Sn.Transform.toString(f),transformOrigin:s&&r?yv(r,i):void 0,transition:typeof p=="function"?p(r):p,...c};return De.createElement(n,{className:a,style:h,ref:t},l)}),C1=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:l,className:a}=e;if(l!=null&&l.active)for(const[i,c]of Object.entries(l.active))c!==void 0&&(s[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,c));if(l!=null&&l.dragOverlay)for(const[i,c]of Object.entries(l.dragOverlay))c!==void 0&&r.node.style.setProperty(i,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,d]of Object.entries(s))n.node.style.setProperty(c,d);a!=null&&a.active&&n.node.classList.remove(a.active)}},E1=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Sn.Transform.toString(t)},{transform:Sn.Transform.toString(n)}]},M1={duration:250,easing:"ease",keyframes:E1,sideEffects:C1({styles:{active:{opacity:"0"}}})};function _1(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return ra((l,a)=>{if(t===null)return;const i=n.get(l);if(!i)return;const c=i.node.current;if(!c)return;const d=Uh(a);if(!d)return;const{transform:p}=wt(a).getComputedStyle(a),f=Dh(p);if(!f)return;const h=typeof t=="function"?t:T1(t);return $h(c,s.draggable.measure),h({active:{id:l,data:i.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function T1(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...M1,...e};return l=>{let{active:a,dragOverlay:i,transform:c,...d}=l;if(!t)return;const p={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},f={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/i.rect.height:1},h={x:c.x-p.x,y:c.y-p.y,...f},x=s({...d,active:a,dragOverlay:i,transform:{initial:c,final:h}}),[w]=x,y=x[x.length-1];if(JSON.stringify(w)===JSON.stringify(y))return;const b=r==null?void 0:r({active:a,dragOverlay:i,...d}),g=i.node.animate(x,{duration:t,easing:n,fill:"forwards"});return new Promise(m=>{g.onfinish=()=>{b==null||b(),m()}})}}let Id=0;function D1(e){return u.useMemo(()=>{if(e!=null)return Id++,Id},[e])}const Kh=De.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:l,modifiers:a,wrapperElement:i="div",className:c,zIndex:d=999}=e;const{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggableNodes:w,droppableContainers:y,dragOverlay:b,over:g,measuringConfiguration:m,scrollableAncestors:v,scrollableAncestorRects:S,windowRect:j}=Yh(),N=u.useContext(aa),k=D1(f==null?void 0:f.id),E=Vh(a,{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggingNodeRect:b.rect,over:g,overlayNodeRect:b.rect,scrollableAncestors:v,scrollableAncestorRects:S,transform:N,windowRect:j}),T=qc(h),z=_1({config:r,draggableNodes:w,droppableContainers:y,measuringConfiguration:m}),L=T?b.setRef:void 0;return De.createElement(k1,null,De.createElement(w1,{animation:z},f&&k?De.createElement(N1,{key:k,id:f.id,ref:L,as:i,activatorEvent:p,adjustScale:t,className:c,transition:l,rect:T,style:{zIndex:d,...s},transform:E},n):null))});function ia(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function R1(e,t){return e.reduce((n,r,s)=>{const l=t.get(r);return l&&(n[s]=l),n},Array(e.length))}function Pl(e){return e!==null&&e>=0}function P1(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function z1(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Qh=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const l=ia(t,r,n),a=t[s],i=l[s];return!i||!a?null:{x:i.left-a.left,y:i.top-a.top,scaleX:i.width/a.width,scaleY:i.height/a.height}},zl={scaleX:1,scaleY:1},Gh=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:l,overIndex:a}=e;const i=(t=l[n])!=null?t:r;if(!i)return null;if(s===n){const d=l[a];return d?{x:0,y:n<a?d.top+d.height-(i.top+i.height):d.top-i.top,...zl}:null}const c=I1(l,s,n);return s>n&&s<=a?{x:0,y:-i.height-c,...zl}:s<n&&s>=a?{x:0,y:i.height+c,...zl}:{x:0,y:0,...zl}};function I1(e,t,n){const r=e[t],s=e[t-1],l=e[t+1];return r?n<t?s?r.top-(s.top+s.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const qh="Sortable",Jh=De.createContext({activeIndex:-1,containerId:qh,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Qh,disabled:{draggable:!1,droppable:!1}});function Zh(e){let{children:t,id:n,items:r,strategy:s=Qh,disabled:l=!1}=e;const{active:a,dragOverlay:i,droppableRects:c,over:d,measureDroppableContainers:p}=Yh(),f=pl(qh,n),h=i.rect!==null,x=u.useMemo(()=>r.map(N=>typeof N=="object"&&"id"in N?N.id:N),[r]),w=a!=null,y=a?x.indexOf(a.id):-1,b=d?x.indexOf(d.id):-1,g=u.useRef(x),m=!P1(x,g.current),v=b!==-1&&y===-1||m,S=z1(l);rn(()=>{m&&w&&p(x)},[m,x,w,p]),u.useEffect(()=>{g.current=x},[x]);const j=u.useMemo(()=>({activeIndex:y,containerId:f,disabled:S,disableTransforms:v,items:x,overIndex:b,useDragOverlay:h,sortedRects:R1(x,c),strategy:s}),[y,f,S.draggable,S.droppable,v,x,b,c,h,s]);return De.createElement(Jh.Provider,{value:j},t)}const L1=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return ia(n,r,s).indexOf(t)},O1=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:l,newIndex:a,previousItems:i,previousContainerId:c,transition:d}=e;return!d||!r||i!==l&&s===a?!1:n?!0:a!==s&&t===c},$1={duration:200,easing:"ease"},ex="transform",A1=Sn.Transition.toString({property:ex,duration:0,easing:"linear"}),F1={roleDescription:"sortable"};function B1(e){let{disabled:t,index:n,node:r,rect:s}=e;const[l,a]=u.useState(null),i=u.useRef(n);return rn(()=>{if(!t&&n!==i.current&&r.current){const c=s.current;if(c){const d=as(r.current,{ignoreTransform:!0}),p={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(p.x||p.y)&&a(p)}}n!==i.current&&(i.current=n)},[t,n,r,s]),u.useEffect(()=>{l&&a(null)},[l]),l}function tx(e){let{animateLayoutChanges:t=O1,attributes:n,disabled:r,data:s,getNewIndex:l=L1,id:a,strategy:i,resizeObserverConfig:c,transition:d=$1}=e;const{items:p,containerId:f,activeIndex:h,disabled:x,disableTransforms:w,sortedRects:y,overIndex:b,useDragOverlay:g,strategy:m}=u.useContext(Jh),v=U1(r,x),S=p.indexOf(a),j=u.useMemo(()=>({sortable:{containerId:f,index:S,items:p},...s}),[f,s,S,p]),N=u.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:k,node:E,isOver:T,setNodeRef:z}=v1({id:a,data:j,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...c}}),{active:L,activatorEvent:ae,activeNodeRect:H,attributes:I,setNodeRef:q,listeners:he,isDragging:fe,over:O,setActivatorNodeRef:Q,transform:_}=m1({id:a,data:j,attributes:{...F1,...n},disabled:v.draggable}),ee=rv(z,q),W=!!L,ke=W&&!w&&Pl(h)&&Pl(b),ye=!g&&fe,Ge=ye&&ke?_:null,ve=i!=null?i:m,V=ke?Ge!=null?Ge:ve({rects:y,activeNodeRect:H,activeIndex:h,overIndex:b,index:S}):null,we=Pl(h)&&Pl(b)?l({id:a,items:p,activeIndex:h,overIndex:b}):S,ne=L==null?void 0:L.id,te=u.useRef({activeId:ne,items:p,newIndex:we,containerId:f}),Be=p!==te.current.items,Me=t({active:L,containerId:f,isDragging:fe,isSorting:W,id:a,index:S,items:p,newIndex:te.current.newIndex,previousItems:te.current.items,previousContainerId:te.current.containerId,transition:d,wasDragging:te.current.activeId!=null}),st=B1({disabled:!Me,index:S,node:E,rect:k});return u.useEffect(()=>{W&&te.current.newIndex!==we&&(te.current.newIndex=we),f!==te.current.containerId&&(te.current.containerId=f),p!==te.current.items&&(te.current.items=p)},[W,we,f,p]),u.useEffect(()=>{if(ne===te.current.activeId)return;if(ne!=null&&te.current.activeId==null){te.current.activeId=ne;return}const U=setTimeout(()=>{te.current.activeId=ne},50);return()=>clearTimeout(U)},[ne]),{active:L,activeIndex:h,attributes:I,data:j,rect:k,index:S,newIndex:we,items:p,isOver:T,isSorting:W,isDragging:fe,listeners:he,node:E,overIndex:b,over:O,setNodeRef:ee,setActivatorNodeRef:Q,setDroppableNodeRef:z,setDraggableNodeRef:q,transform:st!=null?st:V,transition:X()};function X(){if(st||Be&&te.current.newIndex===S)return A1;if(!(ye&&!sa(ae)||!d)&&(W||Me))return Sn.Transition.toString({...d,property:ex})}}function U1(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}je.Down,je.Right,je.Up,je.Left;const Se={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Ld={always:{label:"",color:"#6b9b6e",bg:"#e0f0e1"},keyword:{label:"",color:"#9b6b6b",bg:"#f0e0e0"},mood:{label:"",color:"#9b7a3b",bg:"#f0ebd8"},message_mode:{label:"",color:"#6b7b9b",bg:"#e0e6f0"}};function nx({activation:e}){const t=Ld[e]||Ld.always;return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:t.color,background:t.bg},children:t.label})}const Il=80;function H1({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Il);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{if(p.target.closest(".drag-handle"))return;const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Il,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Il)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Il):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(rs,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function W1({book:e,onTap:t,onDelete:n}){var p;const{attributes:r,listeners:s,setNodeRef:l,transform:a,transition:i,isDragging:c}=tx({id:String(e.id)}),d={transform:Sn.Transform.toString(a),transition:i,opacity:c?0:1};return o.jsx("div",{ref:l,style:d,className:"mb-3",children:o.jsx(H1,{onDelete:()=>n(e),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Se.bg,userSelect:"none"},children:[o.jsx("div",{...r,...s,className:"drag-handle shrink-0 cursor-grab touch-none px-1",style:{cursor:c?"grabbing":"grab"},children:o.jsx(al,{size:18,style:{color:Se.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>t(e),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:Se.text},children:e.name}),o.jsx(nx,{activation:e.activation})]}),e.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:Se.textMuted},children:e.folder}),e.activation==="keyword"&&((p=e.keywords)==null?void 0:p.length)>0&&o.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[e.keywords.slice(0,3).map((f,h)=>o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(232,160,191,0.15)",color:Se.accentDark},children:f},h)),e.keywords.length>3&&o.jsxs("span",{className:"text-[10px]",style:{color:Se.textMuted},children:["+",e.keywords.length-3]})]})]}),o.jsx(Gr,{size:16,style:{color:Se.textMuted,flexShrink:0},onClick:()=>t(e)})]})})})}function V1({folder:e,books:t,onDelete:n,onTap:r,onReorder:s}){const[l,a]=u.useState(!0),[i,c]=u.useState(null),d=Mh(Po(la,{activationConstraint:{distance:5}}),Po(Gc,{activationConstraint:{delay:200,tolerance:5}})),p=({active:h,over:x})=>{if(c(null),!x||h.id===x.id)return;const w=t.findIndex(g=>String(g.id)===String(h.id)),y=t.findIndex(g=>String(g.id)===String(x.id));if(w<0||y<0)return;const b=ia(t,w,y);s(e,b)},f=i?t.find(h=>String(h.id)===String(i)):null;return o.jsxs("div",{className:"mb-4",children:[o.jsxs("button",{className:"mb-2 flex w-full items-center gap-2 px-1",onClick:()=>a(!l),children:[l?o.jsx(yr,{size:14,style:{color:Se.textMuted}}):o.jsx(Gr,{size:14,style:{color:Se.textMuted}}),o.jsx("span",{className:"text-[12px] font-bold tracking-wide",style:{color:Se.textMuted},children:e||""}),o.jsx("span",{className:"ml-1 rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.12)",color:Se.textMuted},children:t.length})]}),l&&o.jsxs(Xh,{sensors:d,collisionDetection:_h,onDragStart:({active:h})=>c(h.id),onDragEnd:p,children:[o.jsx(Zh,{items:t.map(h=>String(h.id)),strategy:Gh,children:t.map(h=>o.jsx(W1,{book:h,onTap:r,onDelete:n},h.id))}),o.jsx(Kh,{children:f&&o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Se.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx("div",{className:"shrink-0 px-1",children:o.jsx(al,{size:18,style:{color:Se.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:Se.text},children:f.name}),o.jsx(nx,{activation:f.activation})]}),f.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:Se.textMuted},children:f.folder})]}),o.jsx(Gr,{size:16,style:{color:Se.textMuted,flexShrink:0}})]})})]})]})}function X1(){const e=$t(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[l,a]=u.useState(null),[i,c]=u.useState(null),d=y=>{c(y),setTimeout(()=>c(null),2e3)},p=()=>{s(!0),F("/api/world-books").then(y=>n(y.world_books||[])).catch(()=>d("")).finally(()=>s(!1))};u.useEffect(()=>{p()},[]);const f=async y=>{a(null);try{await F(`/api/world-books/${y.id}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==y.id)),d("")}catch(b){d("")}},h=(y,b)=>{const g=y||"";n(m=>[...m.filter(S=>(S.folder||"")!==g),...b]),F("/api/world-books/reorder",{method:"PUT",body:{ordered_ids:b.map(m=>m.id)}}).catch(()=>d(""))},x={};for(const y of t){const b=y.folder||"";x[b]||(x[b]=[]),x[b].push(y)}const w=Object.keys(x).sort((y,b)=>y===""?1:b===""?-1:y.localeCompare(b));return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Se.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full nm-active",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:Se.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Se.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books/new"),children:o.jsx(ns,{size:20,style:{color:Se.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-t-transparent",style:{borderColor:Se.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(al,{size:36,style:{color:Se.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:Se.textMuted},children:" + "})]}):w.map(y=>o.jsx(V1,{folder:y,books:x[y],onDelete:b=>a(b),onTap:b=>e(`/world-books/${b.id}`),onReorder:h},y))}),l&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>a(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Se.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:y=>y.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Se.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Se.textMuted},children:["",l.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)",color:Se.text},onClick:()=>a(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>f(l),children:""})]})]})}),i&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const le={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Y1({label:e,value:t,onChange:n,placeholder:r}){return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:le.textMuted},children:e}),o.jsx("input",{type:"text",value:t,onChange:s=>n(s.target.value),placeholder:r,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:le.bg,color:le.text}})]})}function K1({value:e,onChange:t,folders:n}){const[r,s]=u.useState(!1),l=n.filter(a=>a!==e&&a.toLowerCase().includes(e.toLowerCase()));return o.jsxs("div",{className:"relative mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:le.textMuted},children:""}),o.jsx("input",{type:"text",value:e,onChange:a=>{t(a.target.value),s(!0)},onFocus:()=>s(!0),onBlur:()=>setTimeout(()=>s(!1),150),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:le.bg,color:le.text}}),r&&l.length>0&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[160px] overflow-y-auto rounded-[14px]",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:l.map(a=>o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:le.text},onMouseDown:()=>{t(a),s(!1)},children:a},a))})]})}function Q1({value:e,onChange:t}){const n=[{value:"always",label:""},{value:"keyword",label:""},{value:"mood",label:""},{value:"message_mode",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:le.textMuted},children:""}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:le.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:e===r.value?le.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?le.accentDark:le.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})]})}function G1({selected:e,onChange:t}){const n=[{value:"long",label:""},{value:"short",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:le.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:le.bg,minHeight:48},children:n.map(r=>{const s=e===r.value;return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?le.accentDark:le.bg,color:s?"white":le.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>t(r.value),children:r.label},r.value)})})]})}const q1=[{value:"happy",label:""},{value:"sad",label:""},{value:"angry",label:""},{value:"anxious",label:""},{value:"tired",label:""},{value:"emo",label:""},{value:"flirty",label:""},{value:"proud",label:""},{value:"calm",label:""}];function J1({selected:e,onChange:t}){const n=r=>{e.includes(r)?t(e.filter(s=>s!==r)):t([...e,r])};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:le.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:le.bg,minHeight:48},children:q1.map(r=>{const s=e.includes(r.value);return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?le.accentDark:le.bg,color:s?"white":le.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>n(r.value),children:r.label},r.value)})})]})}function Z1({keywords:e,onChange:t}){const[n,r]=u.useState(""),s=()=>{const l=n.trim();if(!l||e.includes(l)){r("");return}t([...e,l]),r("")};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:le.textMuted},children:""}),o.jsxs("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:le.bg,minHeight:48},children:[e.map(l=>o.jsxs("span",{className:"flex items-center gap-1 rounded-full px-2.5 py-1 text-[12px] font-medium",style:{background:"rgba(232,160,191,0.2)",color:le.accentDark},children:[l,o.jsx("button",{onClick:()=>t(e.filter(a=>a!==l)),children:o.jsx(ul,{size:10})})]},l)),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),onKeyDown:l=>{(l.key==="Enter"||l.key===",")&&(l.preventDefault(),s())},placeholder:"...",className:"w-24 bg-transparent text-[12px] outline-none",style:{color:le.text}}),n.trim()&&o.jsx("button",{className:"flex h-5 w-5 items-center justify-center rounded-full",style:{background:le.accentDark},onClick:s,children:o.jsx(ns,{size:10,color:"white"})})]})]}),o.jsx("p",{className:"mt-1 text-[10px]",style:{color:le.textMuted},children:" Enter "})]})}function e0({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:le.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:le.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:le.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(qr,{size:18,style:{color:le.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:le.bg,color:le.text},placeholder:"..."})]})}function Od(){const e=$t(),{id:t}=mh(),n=!t,[r,s]=u.useState(""),[l,a]=u.useState(""),[i,c]=u.useState("always"),[d,p]=u.useState([]),[f,h]=u.useState("long"),[x,w]=u.useState(""),[y,b]=u.useState(!1),[g,m]=u.useState(!n),[v,S]=u.useState(null),[j,N]=u.useState([]),[k,E]=u.useState(!1),T=u.useRef(null),z=H=>{var he;const I=(he=H.target.files)==null?void 0:he[0];if(!I)return;const q=new FileReader;q.onload=fe=>w(fe.target.result||""),q.readAsText(I),H.target.value=""},L=H=>{S(H),setTimeout(()=>S(null),2e3)};u.useEffect(()=>{F("/api/world-books").then(H=>{const I=H.world_books||[];if(N([...new Set(I.map(q=>q.folder).filter(Boolean))]),!n){const q=I.find(he=>String(he.id)===String(t));q&&(s(q.name),a(q.folder||""),c(q.activation),p(q.keywords||[]),h(q.message_mode||"long"),w(q.content))}}).catch(()=>L("")).finally(()=>m(!1))},[t,n]);const ae=async()=>{if(!r.trim()){L("");return}b(!0);try{const H={name:r.trim(),folder:l.trim()||null,activation:i,keywords:i==="keyword"||i==="mood"?d:[],message_mode:i==="message_mode"?f:null,content:x};n?(await F("/api/world-books",{method:"POST",body:H}),L("")):(await F(`/api/world-books/${t}`,{method:"PUT",body:H}),L(""))}catch(H){L(": "+H.message)}finally{b(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:le.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:le.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:le.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:le.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:le.bg,boxShadow:y?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:ae,disabled:y,children:o.jsx(cl,{size:18,style:{color:le.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:g?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:le.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"rounded-[20px] p-5 mb-4",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(Y1,{label:"",value:r,onChange:s,placeholder:""}),o.jsx(K1,{value:l,onChange:a,folders:j}),o.jsx(Q1,{value:i,onChange:c}),i==="keyword"&&o.jsx(Z1,{keywords:d,onChange:p}),i==="mood"&&o.jsx(J1,{selected:d,onChange:p}),i==="message_mode"&&o.jsx(G1,{selected:f,onChange:h})]}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:le.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:le.bg},onClick:()=>{var H;return(H=T.current)==null?void 0:H.click()},title:"",children:o.jsx(ta,{size:13,style:{color:le.textMuted}})}),o.jsx("input",{ref:T,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:z}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:le.bg},onClick:()=>E(!0),title:"",children:o.jsx(il,{size:13,style:{color:le.accentDark}})})]})]}),o.jsx("textarea",{value:x,onChange:H=>w(H.target.value),placeholder:"...",rows:10,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:le.bg,color:le.text}})]})]})}),k&&o.jsx(e0,{value:x,onChange:w,onClose:()=>E(!1)}),v&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:v})})]})}const Ae={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Ll=80;function t0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Ll);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Ll,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Ll)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Ll):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Ae.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(rs,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function n0({assistant:e,localAvatar:t,onTap:n}){var s;const r=t||null;return o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Ae.bg,userSelect:"none"},onClick:()=>n(e),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:48,height:48,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Ae.bg},children:r?o.jsx("img",{src:r,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[20px]",style:{color:Ae.accentDark},children:((s=e.name)==null?void 0:s[0])||"?"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[15px] font-bold",style:{color:Ae.text},children:e.name}),e.created_at&&o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:Ae.textMuted},children:e.created_at.slice(0,10)})]}),o.jsx(Gr,{size:16,style:{color:Ae.textMuted,flexShrink:0}})]})}function r0(){const e=$t(),[t,n]=u.useState([]),[r,s]=u.useState({}),[l,a]=u.useState(!0),[i,c]=u.useState(null),[d,p]=u.useState(null),f=w=>{p(w),setTimeout(()=>p(null),2e3)},h=()=>{a(!0),F("/api/assistants").then(async w=>{const y=w.assistants||[];n(y);const b={};await Promise.all(y.map(async g=>{const m=await ss(`assistant-avatar-${g.id}`).catch(()=>null);m&&(b[g.id]=m)})),s(b)}).catch(()=>f("")).finally(()=>a(!1))};u.useEffect(()=>{h()},[]);const x=async w=>{c(null);try{await F(`/api/assistants/${w.id}`,{method:"DELETE"}),n(y=>y.filter(b=>b.id!==w.id)),f("")}catch(y){f("")}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ae.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ae.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:Ae.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ae.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ae.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants/new"),children:o.jsx(ns,{size:20,style:{color:Ae.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8 pt-5",children:l?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ae.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(bh,{size:36,style:{color:Ae.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:Ae.textMuted},children:" + "})]}):t.map(w=>o.jsx(t0,{onDelete:()=>c(w),children:o.jsx(n0,{assistant:w,localAvatar:r[w.id],onTap:y=>e(`/assistants/${y.id}`)})},w.id))}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>c(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Ae.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:w=>w.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Ae.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Ae.textMuted},children:["",i.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Ae.bg,boxShadow:"var(--card-shadow-sm)",color:Ae.text},onClick:()=>c(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>x(i),children:""})]})]})}),d&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:d})})]})}const M={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function $d({label:e,value:t,onChange:n,placeholder:r,rows:s,onExpand:l,onHistory:a}){const i=u.useRef(null),c=d=>{var h;const p=(h=d.target.files)==null?void 0:h[0];if(!p)return;const f=new FileReader;f.onload=x=>n(x.target.result||""),f.readAsText(p),d.target.value=""};return o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),o.jsxs("div",{className:"flex items-center gap-2",children:[a&&o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:a,children:o.jsx(Vy,{size:13,style:{color:M.textMuted}})}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var d;return(d=i.current)==null?void 0:d.click()},children:o.jsx(ta,{size:13,style:{color:M.textMuted}})}),o.jsx("input",{ref:i,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:c}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:l,children:o.jsx(il,{size:13,style:{color:M.accentDark}})})]})]}),o.jsx("textarea",{value:t,onChange:d=>n(d.target.value),placeholder:r,rows:s||6,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})}function Ba({label:e,value:t,onChange:n,presets:r}){const[s,l]=u.useState(!1),a=r.find(i=>i.id===t);return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text},onClick:()=>l(!s),children:[o.jsx("span",{style:{color:a?M.text:M.textMuted},children:a?a.name:""}),o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:M.textMuted,transform:s?"rotate(180deg)":"none",transition:"transform 0.2s"},children:o.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&o.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:M.bg,boxShadow:"var(--card-shadow)",zIndex:40},children:[o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:M.textMuted},onClick:()=>{n(null),l(!1)},children:""}),r.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[14px]",style:{color:M.text},onClick:()=>{n(i.id),l(!1)},children:[o.jsx("span",{children:i.name}),i.id===t&&o.jsx(pr,{size:14,style:{color:M.accentDark}})]},i.id))]})]})]})}function Ua({value:e,onChange:t,onClose:n,title:r,placeholder:s}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:r||""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(qr,{size:18,style:{color:M.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:l=>t(l.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:M.bg,color:M.text},placeholder:s||""})]})}const Ol=80;function s0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Ol);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Ol,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Ol)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Ol):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(rs,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function l0({title:e,message:t,onConfirm:n,onCancel:r}){return o.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:r,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:M.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:s=>s.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:M.text},children:e||""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:M.textMuted},children:t}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.text},onClick:r,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:n,children:""})]})]})})}function o0({items:e,currentContent:t,onApply:n,onClose:r,onDelete:s}){const[l,a]=u.useState("current"),[i,c]=u.useState(null),[d,p]=u.useState(null),f=x=>x?new Date(x).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",h=async()=>{if(l==="current"){r();return}const x=e.find(w=>w.id===l);x&&await n(x.content),r()};return i?o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsxs("span",{className:"text-[15px] font-bold",style:{color:M.text},children:[" ",i.version]}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>c(null),children:o.jsx(qr,{size:18,style:{color:M.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:o.jsx("div",{className:"rounded-[14px] p-4",style:{boxShadow:"var(--inset-shadow)",background:M.bg},children:o.jsx("p",{className:"whitespace-pre-wrap text-[13px] leading-relaxed",style:{color:M.text},children:i.content})})})]}):o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:r,children:o.jsx(qr,{size:18,style:{color:M.accentDark}})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[o.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:l==="current"?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[o.jsx("button",{onClick:()=>a("current"),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:l==="current"?M.accentDark:M.bg,boxShadow:l==="current"?"none":"var(--icon-inset)"},children:l==="current"&&o.jsx(pr,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:""}),o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#2a9d5c",background:"rgba(42,157,92,0.12)"},children:""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:t})]})]}),e.length===0&&o.jsx("p",{className:"py-8 text-center text-[13px]",style:{color:M.textMuted},children:""}),e.map(x=>o.jsx("div",{className:"mb-2",children:o.jsx(s0,{onDelete:()=>p(x.id),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:l===x.id?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[o.jsx("button",{onClick:()=>a(x.id),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:l===x.id?M.accentDark:M.bg,boxShadow:l===x.id?"none":"var(--icon-inset)"},children:l===x.id&&o.jsx(pr,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>c(x),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:[" ",x.version]}),o.jsx("span",{className:"text-[10px]",style:{color:M.textMuted},children:f(x.created_at)})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:x.content})]})]})})},x.id))]}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsx("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:h,children:""})}),d&&o.jsx(l0,{message:"",onCancel:()=>p(null),onConfirm:()=>{s(d),p(null)}})]})}function rx(e){return e==="always"?"":e==="keyword"?"":e==="message_mode"?"":""}function sx(e){return!e||!Array.isArray(e)?[]:e.map((t,n)=>typeof t=="object"&&t!==null?t:{id:t,position:"after",sort_order:n})}function a0({item:e,book:t,position:n,sectionList:r,onRemove:s,onChangePosition:l}){const{attributes:a,listeners:i,setNodeRef:c,transform:d,transition:p,isDragging:f}=tx({id:String(e.id)}),h={transform:Sn.Transform.toString(d),transition:p,opacity:f?0:1};return t?o.jsxs("div",{ref:c,style:h,className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",children:[o.jsx("div",{...a,...i,className:"cursor-grab touch-none p-1",style:{cursor:f?"grabbing":"grab"},children:o.jsx(al,{size:14,style:{color:M.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.text},children:t.name}),o.jsxs("div",{className:"text-[10px]",style:{color:M.textMuted},children:[rx(t.activation),t.folder?`  ${t.folder}`:""]})]}),o.jsx("button",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},onClick:()=>l(e.id,n==="before"?"after":"before"),children:n==="before"?"":""}),o.jsx("button",{onClick:()=>s(e.id),children:o.jsx(ul,{size:14,style:{color:M.textMuted}})})]}):null}function i0({allBooks:e,mountedIds:t,onClose:n,onConfirm:r}){const[s,l]=u.useState(new Set(t)),a={};e.forEach(d=>{const p=d.folder||"";a[p]||(a[p]=[]),a[p].push(d)});const i=d=>{l(p=>{const f=new Set(p);return f.has(d)?f.delete(d):f.add(d),f})},c=d=>{const p=d.every(f=>s.has(f.id));l(f=>{const h=new Set(f);return p?d.forEach(x=>h.delete(x.id)):d.forEach(x=>h.add(x.id)),h})};return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-end",style:{background:"rgba(0,0,0,0.4)"},children:o.jsxs("div",{className:"flex w-full flex-col rounded-t-[24px]",style:{background:M.bg,maxHeight:"82vh"},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between p-5 pb-3",children:[o.jsx("h3",{className:"text-[16px] font-bold",style:{color:M.text},children:""}),o.jsx("button",{onClick:n,children:o.jsx(ul,{size:20,style:{color:M.textMuted}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5",children:Object.entries(a).map(([d,p])=>{const f=p.every(h=>s.has(h.id));return o.jsxs("div",{className:"mb-5",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:d}),o.jsx("button",{className:"rounded-full px-2.5 py-1 text-[11px] font-semibold",style:{background:f?"rgba(201,98,138,0.15)":"rgba(136,136,160,0.1)",color:f?M.accentDark:M.textMuted},onClick:()=>c(p),children:f?"":""})]}),o.jsx("div",{className:"space-y-2",children:p.map(h=>{const x=s.has(h.id);return o.jsxs("button",{className:"flex w-full items-center gap-3 rounded-[14px] p-3",style:{background:M.bg,boxShadow:x?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>i(h.id),children:[o.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:x?M.accentDark:M.bg,boxShadow:x?"none":"var(--icon-inset)"},children:x&&o.jsx(pr,{size:12,color:"white"})}),o.jsx("div",{className:"flex-1 min-w-0 text-left",children:o.jsx("div",{className:"truncate text-[13px] font-medium",style:{color:x?M.accentDark:M.text},children:h.name})}),o.jsx("span",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},children:rx(h.activation)})]},h.id)})})]},d)})}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsxs("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>r([...s]),children:[" ",s.size,""]})})]})})}function c0({ruleSetIds:e,onChange:t,allBooks:n}){const[r,s]=u.useState(!1),[l,a]=u.useState(null),i=sx(e),c=i.filter(j=>j.position==="before").sort((j,N)=>j.sort_order-N.sort_order),d=i.filter(j=>j.position==="after").sort((j,N)=>j.sort_order-N.sort_order),p=j=>n.find(N=>N.id===j||N.id===Number(j)),f=Mh(Po(la,{activationConstraint:{distance:5}}),Po(Gc,{activationConstraint:{delay:150,tolerance:5}})),h=({active:j})=>a(j.id),x=({active:j,over:N})=>{if(!N)return;const k=i.find(T=>String(T.id)===String(j.id)),E=i.find(T=>String(T.id)===String(N.id));if(!(!k||!E)&&k.position!==E.position){const T=i.map(z=>String(z.id)===String(k.id)?{...z,position:E.position}:z);t(T)}},w=({active:j,over:N})=>{if(a(null),!N||j.id===N.id)return;const k=i.find(I=>String(I.id)===String(j.id)),E=i.find(I=>String(I.id)===String(N.id));if(!k||!E||k.position!==E.position)return;const T=k.position==="before"?[...c]:[...d],z=T.findIndex(I=>String(I.id)===String(j.id)),L=T.findIndex(I=>String(I.id)===String(N.id)),ae=ia(T,z,L).map((I,q)=>({...I,sort_order:q})),H=i.filter(I=>I.position!==k.position);t([...H,...ae])},y=j=>t(i.filter(N=>N.id!==j)),b=(j,N)=>{const E=(N==="before"?c:d).length;t(i.map(T=>T.id===j?{...T,position:N,sort_order:E}:T))},g=j=>{const N=i.map(L=>L.id),E=j.filter(L=>!N.includes(L)).map((L,ae)=>({id:L,position:"after",sort_order:d.length+ae})),T=new Set(N.filter(L=>!j.includes(L))),z=i.filter(L=>!T.has(L.id));t([...z,...E])},m=(j,N)=>j.length===0?o.jsx("div",{className:"py-3 text-center text-[12px]",style:{color:M.textMuted},children:""}):o.jsx(Zh,{items:j.map(k=>String(k.id)),strategy:Gh,children:o.jsx("div",{className:"rounded-[14px] px-2 pt-1",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:j.map((k,E)=>o.jsxs("div",{children:[E>0&&o.jsx("div",{className:"mx-2",style:{height:1,background:"rgba(0,0,0,0.06)"}}),o.jsx(a0,{item:k,book:p(k.id),position:N,sectionList:j,onRemove:y,onChangePosition:b})]},k.id))})}),v=l?i.find(j=>String(j.id)===String(l)):null,S=v?p(v.id):null;return o.jsxs(Xh,{sensors:f,collisionDetection:_h,onDragStart:h,onDragOver:x,onDragEnd:w,children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(c,"before")]}),o.jsxs("div",{className:"my-4 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}}),o.jsx("span",{className:"rounded-full px-3 py-1 text-[11px] font-bold",style:{background:"rgba(232,160,191,0.15)",color:M.accentDark},children:"System Prompt"}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(d,"after")]}),o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-3 text-[14px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.accentDark},onClick:()=>s(!0),children:[o.jsx(ns,{size:16})," "]}),o.jsx(Kh,{children:S&&o.jsxs("div",{className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",style:{background:M.bg,boxShadow:"var(--card-shadow)",opacity:.9},children:[o.jsx(al,{size:14,style:{color:M.textMuted}}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.accentDark},children:S.name})})]})}),r&&o.jsx(i0,{allBooks:n,mountedIds:i.map(j=>j.id),onClose:()=>s(!1),onConfirm:j=>{g(j),s(!1)}})]})}function Ad(){const e=$t(),{id:t}=mh(),n=!t,[r,s]=u.useState("basic"),[l,a]=u.useState(""),[i,c]=u.useState(""),[d,p]=u.useState(""),[f,h]=u.useState(null),[x,w]=u.useState(null),[y,b]=u.useState(null),[g,m]=u.useState(""),[v,S]=u.useState(""),[j,N]=u.useState(null),[k,E]=u.useState(null),[T,z]=u.useState([]),[L,ae]=u.useState([]),[H,I]=u.useState([]),[q,he]=u.useState(!1),[fe,O]=u.useState(!n),[Q,_]=u.useState(null),[ee,W]=u.useState(!1),[ke,ye]=u.useState(!1),[Ge,ve]=u.useState(!1),[V,we]=u.useState(null),[ne,te]=u.useState([]),Be=u.useRef(null),Me=u.useRef(null),st=P=>{var ce;const Z=(ce=P.target.files)==null?void 0:ce[0];if(!Z)return;const se=new FileReader;se.onload=qe=>p(qe.target.result||""),se.readAsText(Z),P.target.value=""},X=P=>{_(P),setTimeout(()=>_(null),2500)},U=async P=>{const Z=P==="human"?j:k;if(!Z){X("");return}try{const se=await F(`/api/core-blocks/${Z}/history`);te(se.history||[]),we(P)}catch(se){X("")}};u.useEffect(()=>{(async()=>{const[Z,se]=await Promise.all([F("/api/presets").catch(()=>({presets:[]})),F("/api/world-books").catch(()=>({world_books:[]}))]);if(ae(Z.presets||[]),I(se.world_books||[]),n)O(!1);else try{const[ce,qe]=await Promise.all([F(`/api/assistants/${t}`),F(`/api/core-blocks?assistant_id=${t}`).catch(()=>({blocks:[]}))]);a(ce.name||""),ss(`assistant-avatar-${t}`).then(We=>{We&&c(We)}).catch(function(){}),p(ce.system_prompt||""),h(ce.model_preset_id||null),w(ce.summary_model_preset_id||null),b(ce.summary_fallback_preset_id||null),z(ce.rule_set_ids||[]);for(const We of qe.blocks||[])We.block_type==="human"?(m(We.content||""),N(We.id)):We.block_type==="persona"&&(S(We.content||""),E(We.id))}catch(ce){X(": "+ce.message)}finally{O(!1)}})()},[t,n]);const ue=P=>{var ce;const Z=(ce=P.target.files)==null?void 0:ce[0];if(!Z)return;const se=new FileReader;se.onload=async qe=>{const We=qe.target.result,Kn=`assistant-avatar-${t||"new"}`;try{await Bi(Kn,We),c(We)}catch(Ue){X("")}},se.readAsDataURL(Z),P.target.value=""},re=async()=>{if(!l.trim()){X("");return}he(!0);try{const P={name:l.trim(),avatar_url:i?`assistant-avatar-${t||"new"}`:null,system_prompt:d,model_preset_id:f,summary_model_preset_id:x,summary_fallback_preset_id:y,rule_set_ids:sx(T)};let Z=t;if(n?(Z=(await F("/api/assistants",{method:"POST",body:{name:l.trim()}})).id,i&&(await Bi(`assistant-avatar-${Z}`,i),P.avatar_url=`assistant-avatar-${Z}`),await F(`/api/assistants/${Z}`,{method:"PUT",body:P})):await F(`/api/assistants/${t}`,{method:"PUT",body:P}),j)await F(`/api/core-blocks/${j}`,{method:"PUT",body:{content:g}});else if(g.trim()){const se=await F("/api/core-blocks",{method:"POST",body:{block_type:"human",assistant_id:Number(Z),content:g}});N(se.id)}if(k)await F(`/api/core-blocks/${k}`,{method:"PUT",body:{content:v}});else if(v.trim()){const se=await F("/api/core-blocks",{method:"POST",body:{block_type:"persona",assistant_id:Number(Z),content:v}});E(se.id)}X("")}catch(P){X(": "+P.message)}finally{he(!1)}},de=[{key:"basic",label:""},{key:"about",label:"Core Blocks"},{key:"books",label:""}];return o.jsxs("div",{className:"flex h-full flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:M.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:M.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:q?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:re,disabled:q,children:o.jsx(cl,{size:18,style:{color:M.accentDark}})})]}),o.jsx("div",{className:"flex shrink-0 gap-1 px-5 pb-3",children:de.map(P=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2.5 text-[13px] font-semibold transition-all",style:{background:r===P.key?M.bg:"transparent",boxShadow:r===P.key?"var(--card-shadow-sm)":"none",color:r===P.key?M.accentDark:M.textMuted},onClick:()=>s(P.key),children:P.label},P.key))}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:fe?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:M.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[r==="basic"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-4 flex items-center gap-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var P;return(P=Be.current)==null?void 0:P.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:M.bg},children:i?o.jsx("img",{src:i,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[24px]",style:{color:M.accentDark},children:(l==null?void 0:l[0])||"?"})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:M.accentDark},children:o.jsx(kh,{size:9,color:"white"})})]}),o.jsx("input",{ref:Be,type:"file",accept:"image/*",className:"hidden",onChange:ue}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),o.jsx("input",{type:"text",value:l,onChange:P=>a(P.target.value),placeholder:"",className:"w-full rounded-[12px] px-4 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})]}),o.jsxs("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var P;return(P=Me.current)==null?void 0:P.click()},title:"",children:o.jsx(ta,{size:13,style:{color:M.textMuted}})}),o.jsx("input",{ref:Me,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:st}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>W(!0),title:"",children:o.jsx(il,{size:13,style:{color:M.accentDark}})})]})]}),o.jsx("textarea",{value:d,onChange:P=>p(P.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(Ba,{label:"",value:f,onChange:h,presets:L}),o.jsx(Ba,{label:"",value:x,onChange:w,presets:L}),o.jsx(Ba,{label:"",value:y,onChange:b,presets:L})]})]}),r==="about"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx($d,{label:"human block",value:g,onChange:m,placeholder:" AI ...",rows:7,onExpand:()=>ye(!0),onHistory:()=>U("human")})}),o.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx($d,{label:"persona block",value:v,onChange:S,placeholder:"AI ...",rows:7,onExpand:()=>ve(!0),onHistory:()=>U("persona")})})]}),r==="books"&&o.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(c0,{ruleSetIds:T,onChange:z,allBooks:H})})]})}),ee&&o.jsx(Ua,{value:d,onChange:p,onClose:()=>W(!1),title:"",placeholder:"..."}),ke&&o.jsx(Ua,{value:g,onChange:m,onClose:()=>ye(!1),title:"human block",placeholder:" AI ..."}),Ge&&o.jsx(Ua,{value:v,onChange:S,onClose:()=>ve(!1),title:"persona block",placeholder:"AI ..."}),V&&o.jsx(o0,{items:ne,currentContent:V==="human"?g:v,onApply:async P=>{const Z=V==="human"?j:k;try{await F(`/api/core-blocks/${Z}`,{method:"PUT",body:{content:P}}),V==="human"?m(P):S(P),X("")}catch(se){X("")}},onDelete:async P=>{try{await F(`/api/core-blocks/history/${P}`,{method:"DELETE"}),te(Z=>Z.filter(se=>se.id!==P)),X("")}catch(Z){X("")}},onClose:()=>we(null)}),Q&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:Q})})]})}const oe={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function Ha({icon:e,label:t,hint:n,onClick:r}){return o.jsxs("button",{className:"flex w-full items-center gap-4 px-4 py-4",onClick:r,children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:oe.bg},children:e}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:oe.text},children:t}),n&&o.jsx("div",{className:"text-[11px]",style:{color:oe.textMuted},children:n})]}),o.jsx(Gr,{size:16,style:{color:oe.textMuted}})]})}function Fd(){return o.jsx("div",{className:"mx-4 h-px",style:{background:"rgba(136,136,160,0.15)"}})}function Jn({value:e,onChange:t,min:n,max:r}){const[s,l]=u.useState(String(e));u.useEffect(()=>l(String(e)),[e]);const a=()=>{let i=parseInt(s);isNaN(i)&&(i=n),i=Math.max(n,Math.min(r,i)),l(String(i)),t(i)};return o.jsx("input",{type:"number",value:s,onChange:i=>l(i.target.value),onBlur:a,onKeyDown:i=>i.key==="Enter"&&a(),className:"w-20 rounded-[10px] py-2 text-center text-[14px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:oe.bg,color:oe.text},min:n,max:r})}function u0(){const e=$t(),[t,n]=u.useState(()=>parseInt(localStorage.getItem("telegram_buffer_seconds")||"15")),[r,s]=u.useState(8),[l,a]=u.useState(8e3),[i,c]=u.useState(16e3),[d,p]=u.useState(800),[f,h]=u.useState(800),[x,w]=u.useState(2e3),[y,b]=u.useState(!1),[g,m]=u.useState(!1),[v,S]=u.useState(null),j=k=>{S(k),setTimeout(()=>S(null),2e3)};u.useEffect(()=>{F("/api/settings/context-budget").then(k=>{a(k.retain_budget),c(k.trigger_threshold),p(k.summary_budget_longterm),h(k.summary_budget_daily),w(k.summary_budget_recent),b(!0)}).catch(()=>b(!0))},[]),u.useEffect(()=>{localStorage.setItem("telegram_buffer_seconds",String(t)),F("/api/settings/buffer-seconds",{method:"PUT",body:{seconds:t}}).catch(()=>{})},[t]),u.useEffect(()=>{F("/api/settings/short-msg-max").then(k=>s(k.max_count||8)).catch(()=>{})},[]),u.useEffect(()=>{F("/api/settings/short-msg-max",{method:"PUT",body:{max_count:r}}).catch(()=>{})},[r]);const N=async()=>{m(!0);try{await F("/api/settings/context-budget",{method:"PUT",body:{retain_budget:l,trigger_threshold:i,summary_budget_longterm:d,summary_budget_daily:f,summary_budget_recent:x}}),j("")}catch(k){j("")}finally{m(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:oe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:oe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:oe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:oe.text},children:""}),o.jsx("div",{className:"w-10"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5 space-y-4",children:[o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:oe.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(Ha,{icon:o.jsx(Gy,{size:18,style:{color:oe.text}}),label:"API ",hint:"  ",onClick:()=>e("/settings/api")}),o.jsx(Fd,{}),o.jsx(Ha,{icon:o.jsx(Ky,{size:18,style:{color:oe.textMuted}}),label:"",hint:"",onClick:()=>j("")})]}),o.jsx("div",{className:"rounded-[20px] overflow-hidden",style:{background:oe.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Ha,{icon:o.jsx(Yy,{size:18,style:{color:oe.text}}),label:"",hint:" AI ",onClick:()=>e("/settings/proactive")})}),o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:oe.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:oe.bg},children:o.jsx(Zy,{size:18,style:{color:oe.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:oe.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:oe.textMuted},children:" ()"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Jn,{value:t,onChange:n,min:1,max:120}),o.jsx("span",{className:"text-[12px]",style:{color:oe.textMuted},children:""})]})]}),o.jsx(Fd,{}),o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:oe.bg},children:o.jsx(Hy,{size:18,style:{color:oe.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:oe.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:oe.textMuted},children:""})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Jn,{value:r,onChange:s,min:2,max:20}),o.jsx("span",{className:"text-[12px]",style:{color:oe.textMuted},children:""})]})]})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:oe.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:oe.bg},children:o.jsx(Fy,{size:18,style:{color:oe.text}})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:oe.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:oe.textMuted},children:""})]})]}),y?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:oe.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:oe.textMuted},children:" token "})]}),o.jsx(Jn,{value:l,onChange:a,min:1e3,max:1e5})]}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:oe.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:oe.textMuted},children:""})]}),o.jsx(Jn,{value:i,onChange:c,min:1e3,max:2e5})]}),o.jsx("div",{className:"h-px mb-4",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:oe.bg},children:o.jsx(Uc,{size:18,style:{color:oe.text}})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:oe.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:oe.textMuted},children:""})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:oe.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:oe.textMuted},children:""})]}),o.jsx(Jn,{value:d,onChange:p,min:200,max:5e3})]}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:oe.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:oe.textMuted},children:""})]}),o.jsx(Jn,{value:f,onChange:h,min:200,max:5e3})]}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:oe.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:oe.textMuted},children:""})]}),o.jsx(Jn,{value:x,onChange:w,min:500,max:2e4})]}),o.jsx("button",{className:"w-full rounded-[14px] py-3 text-[14px] font-bold text-white",style:{background:g?"rgba(201,98,138,0.5)":"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"3px 3px 8px rgba(201,98,138,0.3)"},onClick:N,disabled:g,children:g?"...":""})]}):o.jsx("div",{className:"flex justify-center py-4",children:o.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2",style:{borderColor:oe.accent,borderTopColor:"transparent"}})})]})]}),v&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:v})})]})}const B={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},d0=["claude-opus-4-6","claude-opus-4-5-20251101","claude-sonnet-4-6","claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001"];function f0(e){try{return new URL(e).hostname}catch(t){return e}}function Bd({label:e,value:t,onChange:n,placeholder:r,password:s,disabled:l}){const[a,i]=u.useState(!1);return o.jsxs("div",{className:"mb-4",children:[e&&o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:B.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:s&&!a?"password":"text",value:t,onChange:c=>n(c.target.value),placeholder:r,disabled:l,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none pr-12",style:{boxShadow:"var(--inset-shadow)",background:B.bg,color:l?B.textMuted:B.text,opacity:l?.5:1}}),s&&o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>i(!a),children:a?o.jsx(Uy,{size:16,style:{color:B.textMuted}}):o.jsx(By,{size:16,style:{color:B.textMuted}})})]})]})}function p0({value:e,onChange:t,options:n}){return o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:B.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[12px] font-semibold transition-all",style:{background:e===r.value?B.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?B.accentDark:B.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})}function h0({value:e,onChange:t,options:n,placeholder:r}){const[s,l]=u.useState(!1),a=u.useRef(null);return u.useEffect(()=>{if(!s)return;const i=c=>{a.current&&!a.current.contains(c.target)&&l(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[s]),o.jsxs("div",{className:"relative",ref:a,children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:B.bg,color:e?B.text:B.textMuted},onClick:()=>l(!s),children:[o.jsx("span",{className:"truncate",children:e||r||""}),o.jsx(yr,{size:16,style:{color:B.textMuted,flexShrink:0,transform:s?"rotate(180deg)":"none"}})]}),s&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:B.bg,boxShadow:"var(--card-shadow)"},children:n.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[13px]",style:{color:B.text},onClick:()=>{t(i),l(!1)},children:[o.jsx("span",{className:"truncate",children:i}),i===e&&o.jsx(pr,{size:12,style:{color:B.accentDark,flexShrink:0}})]},i))})]})}function x0({value:e,onChange:t}){const[n,r]=u.useState(!1),s=u.useRef(null);return u.useEffect(()=>{if(!n)return;const l=a=>{s.current&&!s.current.contains(a.target)&&r(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[n]),o.jsxs("div",{className:"relative",ref:s,children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"",value:e,onChange:l=>t(l.target.value),className:"w-full rounded-[14px] px-4 py-3 pr-10 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:B.bg,color:B.text}}),o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>r(!n),children:o.jsx(yr,{size:16,style:{color:B.textMuted}})})]}),n&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:B.bg,boxShadow:"var(--card-shadow)"},children:d0.map(l=>o.jsx("button",{className:"flex w-full px-4 py-3 text-left text-[13px]",style:{color:B.text},onClick:()=>{t(l),r(!1)},children:l},l))})]})}function Wa({value:e,onChange:t,min:n,max:r,step:s}){const[l,a]=u.useState(String(e));u.useEffect(()=>a(String(e)),[e]);const i=()=>{let c=parseFloat(l);isNaN(c)&&(c=n),c=Math.max(n,Math.min(r,c)),c=Math.round(c/s)*s,c=parseFloat(c.toFixed(4)),a(String(c)),t(c)};return o.jsx("input",{type:"number",value:l,onChange:c=>a(c.target.value),onBlur:i,onKeyDown:c=>c.key==="Enter"&&i(),step:s,min:n,max:r,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:B.bg,color:B.text}})}function Ud({on:e,onToggle:t}){return o.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":B.bg,transition:"background 0.2s"},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function Va({children:e,className:t=""}){return o.jsx("div",{className:`rounded-[20px] p-5 mb-4 space-y-4 ${t}`,style:{background:B.bg,boxShadow:"var(--card-shadow)"},children:e})}function m0(){const e=$t(),[t,n]=u.useState([]),[r,s]=u.useState([]),[l,a]=u.useState(!0),[i,c]=u.useState(""),[d,p]=u.useState(""),[f,h]=u.useState("api_key"),[x,w]=u.useState(""),[y,b]=u.useState([]),[g,m]=u.useState(!1),[v,S]=u.useState(1),[j,N]=u.useState(!1),[k,E]=u.useState(1),[T,z]=u.useState(!1),[L,ae]=u.useState(4096),[H,I]=u.useState(null),[q,he]=u.useState(0),[fe,O]=u.useState(null),[Q,_]=u.useState(!1),[ee,W]=u.useState(!1),[ke,ye]=u.useState(""),[Ge,ve]=u.useState(!1),[V,we]=u.useState(!1),[ne,te]=u.useState(null),[Be,Me]=u.useState(null),[st,X]=u.useState(""),U=u.useRef(null),ue=u.useRef(!1),re=u.useRef(null),de=u.useRef({});de.current={baseUrl:i,apiKey:d,authType:f,modelName:x,temperature:v,tempEnabled:j,topP:k,topPEnabled:T,maxTokens:L,thinkingBudget:q,editingPreset:H,providers:t};const P=u.useCallback($=>{O($),setTimeout(()=>O(null),2500)},[]),Z=u.useCallback(async()=>{try{const[$,ge]=await Promise.all([F("/api/providers"),F("/api/presets")]);n($.providers||[]),s(ge.presets||[])}catch($){P(": "+$.message)}finally{a(!1)}},[P]);u.useEffect(()=>{Z()},[Z]);const se=$=>{var ie,Ee;I($),w($.model_name),N($.temperature!=null),S((ie=$.temperature)!=null?ie:1),z($.top_p!=null),E((Ee=$.top_p)!=null?Ee:1),ae($.max_tokens),he($.thinking_budget||0);const ge=t.find(xt=>xt.id===$.api_provider_id);ge&&(c(ge.base_url),p(ge.api_key),h(ge.auth_type||"api_key"))},ce=()=>{I(null),c(""),p(""),h("api_key"),w(""),S(1),N(!1),E(1),z(!1),ae(4096),he(0),b([])},qe=async()=>{if(!i.trim()||!d.trim()){P(" API  Key");return}m(!0);try{const $=await fetch(`${i.trim().replace(/\/+$/,"")}/models`,{headers:{Authorization:`Bearer ${d.trim()}`}});if(!$.ok)throw new Error(`HTTP ${$.status}`);const ie=((await $.json()).data||[]).map(Ee=>Ee.id).sort();b(ie),P(ie.length?` ${ie.length} `:"")}catch($){P(": "+$.message)}finally{m(!1)}},We=async()=>{var $;if(!i.trim()||!d.trim()||!x.trim()){P(" API Key ");return}_(!0);try{const ge=i.trim().replace(/\/+$/,""),ie={"Content-Type":"application/json",Authorization:`Bearer ${d.trim()}`};f==="oauth_token"&&(ie["anthropic-beta"]="claude-code-20250219,oauth-2025-04-20,fine-grained-tool-streaming-2025-05-14",ie["anthropic-dangerous-direct-browser-access"]="true",ie["x-app"]="cli");const Ee=await fetch(`${ge}/chat/completions`,{method:"POST",headers:ie,body:JSON.stringify({model:x.trim(),max_tokens:10,messages:[{role:"user",content:"Hi"}]})});if(!Ee.ok){const xt=await Ee.json().catch(()=>({}));throw new Error((($=xt.error)==null?void 0:$.message)||`HTTP ${Ee.status}`)}P(" ")}catch(ge){P(": "+ge.message)}finally{_(!1)}},Kn=async $=>{const ge=de.current,ie=ge.baseUrl.trim(),Ee=ge.apiKey.trim(),xt=ge.authType,hn=$.find(is=>is.base_url===ie);return hn?((hn.api_key!==Ee||hn.auth_type!==xt)&&await F(`/api/providers/${hn.id}`,{method:"PUT",body:{api_key:Ee,auth_type:xt}}),hn.id):(await F("/api/providers",{method:"POST",body:{name:f0(ie),base_url:ie,api_key:Ee,auth_type:xt}})).id},Ue=async($,ge)=>{const ie=de.current;if(!ie.baseUrl.trim()||!ie.apiKey.trim()||!ie.modelName.trim()){P("");return}we(!0);try{const Ee=await Kn(ie.providers),xt={name:$,model_name:ie.modelName.trim(),temperature:ie.tempEnabled?ie.temperature:null,top_p:ie.topPEnabled?ie.topP:null,max_tokens:Number(ie.maxTokens)||4096,thinking_budget:Number(ie.thinkingBudget)||0,api_provider_id:Ee};ie.editingPreset&&!ge?(await F(`/api/presets/${ie.editingPreset.id}`,{method:"PUT",body:xt}),P("")):(await F("/api/presets",{method:"POST",body:xt}),P("")),await Z()}catch(Ee){P(": "+Ee.message)}finally{we(!1)}},Yt=()=>{const $=ke.trim();$&&(W(!1),Ue($,Ge))},ln=()=>{H&&Ue(H.name,!1)},Kt=async()=>{if(ne){try{await F(`/api/presets/${ne.id}`,{method:"DELETE"}),P(""),(H==null?void 0:H.id)===ne.id&&ce(),Z()}catch($){P(": "+$.message)}te(null)}},Qn=async()=>{const $=st.trim();if(!(!$||!Be)){try{await F(`/api/presets/${Be.id}`,{method:"PUT",body:{name:$}}),P(""),Z()}catch(ge){P("")}Me(null)}},_t=($,ge)=>{ue.current=!1;const ie=$.touches?$.touches[0]:$;re.current={x:ie.clientX,y:ie.clientY},U.current=setTimeout(()=>{ue.current=!0,te(ge)},600)},Gn=$=>{if(!re.current||!U.current)return;const ge=$.touches?$.touches[0]:$,ie=ge.clientX-re.current.x,Ee=ge.clientY-re.current.y;ie*ie+Ee*Ee>100&&(clearTimeout(U.current),U.current=null)},vr=()=>clearTimeout(U.current);return o.jsxs("div",{className:"flex h-full flex-col",style:{background:B.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:B.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:B.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:B.text},children:"API "}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:l?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:B.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs(Va,{children:[o.jsx(Bd,{label:"API ",value:i,onChange:c,placeholder:"https://api.openai.com/v1",disabled:f==="oauth_token"}),o.jsx(Bd,{label:"API Key",value:d,onChange:p,placeholder:f==="oauth_token"?"sk-ant-oat01-...":"sk-...",password:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:B.textMuted},children:""}),o.jsx(p0,{value:f,onChange:$=>{h($),$==="oauth_token"&&c("https://api.anthropic.com/v1")},options:[{value:"api_key",label:" API Key"},{value:"oauth_token",label:"Setup Token"}]})]})]}),o.jsxs(Va,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:B.textMuted},children:""}),f==="oauth_token"?o.jsx(x0,{value:x,onChange:w}):o.jsx(h0,{value:x,onChange:w,options:y})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:B.bg,boxShadow:"var(--card-shadow-sm)",color:B.text},onClick:We,disabled:Q,children:[Q?o.jsx(bd,{size:14,className:"animate-spin"}):null,""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:B.bg,boxShadow:"var(--card-shadow-sm)",color:B.text,opacity:f==="oauth_token"?.4:1},onClick:qe,disabled:g||f==="oauth_token",children:[g?o.jsx(bd,{size:14,className:"animate-spin"}):o.jsx(Wc,{size:14}),""]})]})]}),o.jsxs(Va,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:B.text},children:" (0-2)"}),o.jsx("div",{className:"text-[11px]",style:{color:B.textMuted},children:""})]}),o.jsx(Ud,{on:j,onToggle:()=>N(!j)})]}),j&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:B.textMuted},children:""}),o.jsx(Wa,{value:v,onChange:S,min:0,max:2,step:.1})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:B.text},children:"Top P (0-1)"}),o.jsx(Ud,{on:T,onToggle:()=>z(!T)})]}),T&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:B.textMuted},children:""}),o.jsx(Wa,{value:k,onChange:E,min:0,max:1,step:.05})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:B.text},children:"Max Tokens"}),o.jsx(Wa,{value:L,onChange:ae,min:128,max:2e5,step:1})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:B.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:B.textMuted},children:"Extended Thinking tokens"})]}),o.jsxs("select",{className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none appearance-none",style:{boxShadow:"var(--inset-shadow)",background:B.bg,color:B.text,WebkitAppearance:"none",textAlignLast:"center"},value:q,onChange:$=>he(Number($.target.value)),children:[o.jsx("option",{value:0,children:""}),o.jsx("option",{value:1024,children:"1024"}),o.jsx("option",{value:2048,children:"2048"}),o.jsx("option",{value:4096,children:"4096"}),o.jsx("option",{value:8192,children:"8192"}),o.jsx("option",{value:16384,children:"16384"})]})]})]}),o.jsxs("div",{className:"mb-4 space-y-3",children:[H?o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:ln,disabled:V,children:[o.jsx(cl,{size:14}),V?"...":""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold",style:{background:B.bg,boxShadow:"var(--card-shadow-sm)",color:B.text},onClick:()=>{ve(!0),ye(""),W(!0)},disabled:V,children:[o.jsx(Ay,{size:14}),""]})]}):o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>{ve(!0),ye(""),W(!0)},disabled:V,children:[o.jsx(ns,{size:14}),""]}),H&&o.jsx("button",{className:"w-full py-1 text-center text-[12px]",style:{color:B.textMuted},onClick:ce,children:""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"mb-3 text-[12px] font-bold uppercase tracking-wide",style:{color:B.textMuted},children:""}),r.length===0?o.jsx("div",{className:"rounded-[20px] py-8 text-center text-[13px]",style:{background:B.bg,boxShadow:"var(--card-shadow)",color:B.textMuted},children:""}):o.jsx("div",{className:"space-y-3",children:r.map($=>{var ge,ie;return o.jsxs("div",{className:"rounded-[18px] p-4",style:{background:B.bg,boxShadow:(H==null?void 0:H.id)===$.id?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{ue.current||se($)},onTouchStart:Ee=>_t(Ee,$),onTouchMove:Gn,onTouchEnd:vr,onMouseDown:Ee=>_t(Ee,$),onMouseMove:Gn,onMouseUp:vr,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-[14px] font-bold truncate",style:{color:(H==null?void 0:H.id)===$.id?B.accentDark:B.text},children:$.name}),o.jsx(Hc,{size:12,style:{color:B.textMuted,flexShrink:0,marginLeft:8}})]}),o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:B.textMuted},children:$.model_name}),o.jsxs("div",{className:"mt-1 text-[10px] font-mono",style:{color:B.textMuted},children:["T: ",(ge=$.temperature)!=null?ge:""," | Top-P: ",(ie=$.top_p)!=null?ie:""," | Max: ",$.max_tokens,$.thinking_budget?` | Think: ${$.thinking_budget}`:""]})]},$.id)})})]})]})}),ee&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>W(!1),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:B.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:$=>$.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:B.text},children:""}),o.jsx("input",{type:"text",value:ke,onChange:$=>ye($.target.value),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:B.bg,color:B.text},autoFocus:!0,onKeyDown:$=>$.key==="Enter"&&Yt()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:B.bg,boxShadow:"var(--card-shadow-sm)",color:B.text},onClick:()=>W(!1),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:ke.trim()?"linear-gradient(135deg, var(--accent), var(--accent-dark))":"rgba(201,98,138,0.3)"},onClick:Yt,disabled:!ke.trim(),children:""})]})]})}),ne&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>te(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:B.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:$=>$.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:B.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:B.textMuted},children:["",ne.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:B.bg,boxShadow:"var(--card-shadow-sm)",color:B.text},onClick:()=>te(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:Kt,children:""})]})]})}),Be&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>Me(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:B.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:$=>$.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:B.text},children:""}),o.jsx("input",{autoFocus:!0,type:"text",value:st,onChange:$=>X($.target.value),className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:B.bg,color:B.text},onKeyDown:$=>$.key==="Enter"&&Qn()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:B.bg,boxShadow:"var(--card-shadow-sm)",color:B.text},onClick:()=>Me(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))"},onClick:Qn,children:""})]})]})}),fe&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:fe})})]})}const Ve={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function $l({on:e,onToggle:t,disabled:n}){return o.jsx("button",{onClick:()=>!n&&t(),className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":Ve.bg,transition:"background 0.2s",opacity:n?.4:1,cursor:n?"not-allowed":"pointer"},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function gs({label:e,hint:t,value:n,onChange:r,min:s,max:l,step:a=1,disabled:i}){const[c,d]=u.useState(String(n));u.useEffect(()=>d(String(n)),[n]);const p=()=>{let f=parseFloat(c);isNaN(f)&&(f=s),f=Math.max(s,Math.min(l,f)),f=Math.round(f/a)*a,f=parseFloat(f.toFixed(a<1?1:0)),d(String(f)),r(f)};return o.jsxs("div",{className:"flex items-center justify-between",style:{opacity:i?.4:1,pointerEvents:i?"none":"auto"},children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ve.text},children:e}),t&&o.jsx("div",{className:"text-[11px]",style:{color:Ve.textMuted},children:t})]}),o.jsx("input",{type:"number",value:c,onChange:f=>d(f.target.value),onBlur:p,onKeyDown:f=>f.key==="Enter"&&p(),step:a,min:s,max:l,disabled:i,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ve.bg,color:Ve.text}})]})}function Al({children:e}){return o.jsx("div",{className:"rounded-[20px] p-5 mb-4 space-y-4",style:{background:Ve.bg,boxShadow:"var(--card-shadow)"},children:e})}function Fl(){return o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}})}function g0(){const e=$t(),[t,n]=u.useState(!0),[r,s]=u.useState(!1),[l,a]=u.useState({enabled:!1,random_mode:!1,interval:30,min_gap:30,retry_enabled:!0,retry_gap:1.5,max_retries:8,voice_enabled:!1,voice_chance:30}),[i,c]=u.useState(null),d=u.useCallback(w=>{c(w),setTimeout(()=>c(null),2e3)},[]);u.useEffect(()=>{(async()=>{try{const w=await F("/api/settings/proactive");a(w)}catch(w){d(": "+w.message)}finally{n(!1)}})()},[d]);const p=async()=>{s(!0);try{await F("/api/settings/proactive",{method:"PUT",body:l}),d("")}catch(w){d(": "+w.message)}finally{s(!1)}},f=w=>a(y=>({...y,...w})),h=!l.enabled,x=l.random_mode&&l.enabled;return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ve.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ve.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:Ve.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ve.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ve.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:p,disabled:r,children:o.jsx(cl,{size:18,style:{color:Ve.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:t?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ve.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs(Al,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:Ve.text},children:""}),o.jsx($l,{on:l.enabled,onToggle:()=>f({enabled:!l.enabled})})]}),l.enabled&&o.jsxs(o.Fragment,{children:[o.jsx(Fl,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ve.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:Ve.textMuted},children:""})]}),o.jsx($l,{on:l.random_mode,onToggle:()=>f({random_mode:!l.random_mode})})]})]})]}),o.jsxs(Al,{children:[o.jsx(gs,{label:" ()",hint:" (10-60)",value:x?10:l.interval,onChange:w=>f({interval:w}),min:10,max:60,disabled:h||x}),o.jsx(Fl,{}),o.jsx(gs,{label:" ()",hint:" (15-120)",value:l.min_gap,onChange:w=>f({min_gap:w}),min:15,max:120,disabled:h||x})]}),o.jsxs(Al,{children:[o.jsxs("div",{className:"flex items-center justify-between",style:{opacity:h?.4:1,pointerEvents:h?"none":"auto"},children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ve.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:Ve.textMuted},children:" = "})]}),o.jsx($l,{on:l.retry_enabled,onToggle:()=>f({retry_enabled:!l.retry_enabled}),disabled:h})]}),l.retry_enabled&&!h&&o.jsxs(o.Fragment,{children:[o.jsx(Fl,{}),o.jsx(gs,{label:" ()",hint:"0.5-4.0",value:l.retry_gap,onChange:w=>f({retry_gap:w}),min:.5,max:4,step:.1,disabled:x}),o.jsx(gs,{label:"",hint:"1-15",value:l.max_retries,onChange:w=>f({max_retries:w}),min:1,max:15})]})]}),o.jsxs(Al,{children:[o.jsxs("div",{className:"flex items-center justify-between",style:{opacity:h?.4:1,pointerEvents:h?"none":"auto"},children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ve.text},children:""}),o.jsx($l,{on:l.voice_enabled,onToggle:()=>f({voice_enabled:!l.voice_enabled}),disabled:h})]}),l.voice_enabled&&!h&&o.jsxs(o.Fragment,{children:[o.jsx(Fl,{}),o.jsx(gs,{label:" (%)",hint:"0-100",value:l.voice_chance,onChange:w=>f({voice_chance:w}),min:0,max:100})]})]})]})}),i&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const pe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},ca={thinking:{bg:"rgba(168,130,200,0.12)",color:"#8860c8",label:""},tool_use:{bg:"rgba(232,160,60,0.12)",color:"#b8820a",label:""},tool_result:{bg:"rgba(80,160,200,0.12)",color:"#1a7ab0",label:""},injected_memories:{bg:"rgba(80,180,120,0.12)",color:"#3a8a5f",label:""}},Hd=[{key:"short",label:""},{key:"long",label:""}],y0=[{key:"happy",label:""},{key:"sad",label:""},{key:"angry",label:""},{key:"anxious",label:""},{key:"tired",label:""},{key:"emo",label:""},{key:"flirty",label:""},{key:"proud",label:""},{key:"calm",label:""}],Wd=300;function Jc({block_type:e}){const t=ca[e]||{bg:"rgba(136,136,160,0.1)",color:pe.textMuted,label:e};return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:t.bg,color:t.color},children:t.label})}function lx({content:e}){const[t,n]=u.useState(!1),r=e.length>Wd;return o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:pe.text},children:r&&!t?e.slice(0,Wd)+"...":e}),r&&o.jsx("div",{className:"mt-1.5 flex justify-center",children:o.jsx("button",{className:"rounded-full px-3 py-0.5 text-[11px]",style:{color:pe.accentDark,background:"rgba(232,160,191,0.12)"},onClick:s=>{s.stopPropagation(),n(!t)},children:t?"":""})})]})}function v0({block:e,cacheKey:t,translateCache:n}){const r=n.current.get(t),[s,l]=u.useState(r||null),[a,i]=u.useState(!!r),[c,d]=u.useState(!1),p=ca.thinking,f=async h=>{if(h.stopPropagation(),s){i(!a);return}d(!0);try{const x=await F("/api/cot/translate",{method:"POST",body:{text:e.content}});l(x.translated),i(!0),n.current.set(t,x.translated)}catch(x){console.error("Translation failed:",x),alert("")}finally{d(!1)}};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:p.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(Jc,{block_type:"thinking"}),o.jsx("span",{className:"flex-1"}),o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#1a7ab0",background:"rgba(80,160,200,0.15)"},onClick:f,disabled:c,children:c?"...":a?"":""})]}),o.jsx(lx,{content:a&&s?s:e.content})]})}function w0({avatarUrl:e}){return o.jsx("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full overflow-hidden",style:{boxShadow:"var(--icon-inset)",background:pe.bg},children:e?o.jsx("img",{src:e,alt:"",className:"h-full w-full object-cover"}):o.jsx("span",{style:{fontSize:16},children:""})})}function Vd(e){return e?e>=1e3?`${(e/1e3).toFixed(1)}k`:String(e):"0"}function b0(e){if(!e)return null;const t=e/1e3;return t>=100?`${Math.round(t)}s`:`${t.toFixed(1)}s`}function k0({prompt:e,completion:t,elapsedMs:n,hasToolCalls:r,cacheHit:s}){if(!(e||t||n)&&!r)return null;const a=s?"rgba(220,120,160,0.12)":"rgba(80,160,120,0.12)",i=s?"#d478a0":"#3a8a5f";return o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:a,color:i},children:["",Vd(e)]}),o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(160,100,220,0.12)",color:"#8a5abf"},children:["",Vd(t)]}),n?o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(200,140,60,0.12)",color:"#b8820a"},children:b0(n)}):null]})}function j0(e){const t=[],n=[],r=[],s=[];for(const a of e)a.block_type==="thinking"?t.push(a):a.block_type==="tool_use"?n.push(a):a.block_type==="tool_result"?r.push(a):s.push(a);const l=[];for(let a=0;a<n.length;a++)l.push(n[a]),a<r.length&&l.push(r[a]);for(let a=n.length;a<r.length;a++)l.push(r[a]);return[...t,...l,...s]}function S0({memories:e}){const[t,n]=u.useState(!1);if(!e||e.length===0)return null;const r=ca.injected_memories;return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:r.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-2",onClick:()=>n(!t),children:[o.jsx(Jc,{block_type:"injected_memories"}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:r.color},children:["(",e.length,")"]}),t?o.jsx(jh,{size:12,style:{color:r.color}}):o.jsx(yr,{size:12,style:{color:r.color}})]}),t&&o.jsx("div",{className:"mt-2 space-y-1",children:e.map(s=>o.jsxs("p",{className:"text-[11px] leading-relaxed",style:{color:pe.text},children:[o.jsxs("span",{style:{color:r.color,fontWeight:600},children:["#",s.id]})," ",s.content]},s.id))})]})}function N0({item:e,expanded:t,onToggle:n,live:r,avatarUrl:s,translateCache:l}){const a=e.rounds.map(c=>({...c,blocks:j0(c.blocks.filter(d=>d.block_type!=="text"&&d.block_type!=="usage"))})).filter(c=>c.blocks.length>0),i=a.length>0||e.injectedMemories&&e.injectedMemories.length>0||r&&e.textPreview;return o.jsxs("div",{className:"rounded-[18px] overflow-hidden",style:{background:pe.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-3 p-4",onClick:n,children:[o.jsx(w0,{avatarUrl:s}),o.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r&&o.jsx("span",{className:"inline-block h-3 w-3 animate-spin rounded-full border-[1.5px]",style:{borderColor:pe.accentDark,borderTopColor:"transparent"}}),e.has_tool_calls&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold",style:{background:"rgba(232,160,60,0.15)",color:"#b8820a"},children:""}),o.jsx(k0,{prompt:e.prompt_tokens||0,completion:e.completion_tokens||0,elapsedMs:e.elapsed_ms||0,hasToolCalls:e.has_tool_calls,cacheHit:e.cache_hit}),o.jsx("span",{className:"text-[10px]",style:{color:pe.textMuted},children:e.created_at||""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[13px]",style:{color:pe.text},children:e.preview||"()"})]}),t?o.jsx(jh,{size:16,style:{color:pe.textMuted,flexShrink:0}}):o.jsx(yr,{size:16,style:{color:pe.textMuted,flexShrink:0}})]}),t&&i&&o.jsxs("div",{className:"px-4 pb-4",children:[o.jsx(S0,{memories:e.injectedMemories}),a.map(c=>o.jsxs("div",{className:"mb-3",children:[a.length>1&&o.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:pe.textMuted},children:[" ",c.round_index+1]}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}})]}),c.blocks.map((d,p)=>{if(d.block_type==="thinking")return o.jsx(v0,{block:d,cacheKey:`${e.request_id}:${c.round_index}:${p}`,translateCache:l},p);const f=ca[d.block_type]||{bg:"rgba(136,136,160,0.08)",color:pe.textMuted,label:d.block_type};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:f.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(Jc,{block_type:d.block_type}),d.tool_name&&o.jsx("span",{className:"text-[10px] font-mono",style:{color:f.color},children:d.tool_name})]}),o.jsx(lx,{content:d.content})]},p)})]},c.round_index)),r&&e.textPreview&&o.jsxs("div",{className:"rounded-[12px] p-3",style:{background:"rgba(232,160,191,0.08)"},children:[o.jsx("div",{className:"mb-1",children:o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(232,160,191,0.15)",color:pe.accentDark},children:""})}),o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:pe.text},children:e.textPreview})]})]})]})}function C0(){var Q;const e=$t(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[l,a]=u.useState(new Set),[i,c]=u.useState(()=>localStorage.getItem("chat_mode")||"long"),[d,p]=u.useState(null),[f,h]=u.useState(!1),[x,w]=u.useState(new Set),[y,b]=u.useState(null),[g,m]=u.useState(null),v=u.useRef(null),S=u.useRef(new Map),[j,N]=u.useState(null),[k,E]=u.useState(!1),T=u.useRef(null),z=u.useRef(new Set),L=u.useRef(!1),ae=u.useRef([]),[H,I]=u.useState(()=>localStorage.getItem("whisper_token")),q=u.useRef(null),he=()=>{s(!0),b(null),L.current=!1,F("/api/cot?limit=100").then(_=>{n(Array.isArray(_)?_:[]),L.current=!0;const ee=ae.current;if(ae.current=[],ee.length>0&&q.current)for(const W of ee)q.current(W)}).catch(_=>{console.error("COT load error:",_),b(_.message||""),L.current=!0}).finally(()=>{s(!1);const _=localStorage.getItem("whisper_token");_&&_!==H&&I(_)})};u.useEffect(()=>{he()},[]),u.useEffect(()=>{F("/api/sessions?limit=1").then(_=>{var W;const ee=(W=_.sessions)==null?void 0:W[0];ee!=null&&ee.assistant_id&&ss(`assistant-avatar-${ee.assistant_id}`).then(ke=>{ke&&m(ke)}).catch(()=>{})}).catch(()=>{})},[]),u.useEffect(()=>{F("/api/settings/mood").then(_=>N(_.mood||"calm")).catch(()=>N("calm"))},[]),u.useEffect(()=>{if(!k)return;const _=ee=>{T.current&&!T.current.contains(ee.target)&&E(!1)};return document.addEventListener("pointerdown",_),()=>document.removeEventListener("pointerdown",_)},[k]),u.useEffect(()=>{if(!H){console.log("[COT WS] No token yet, waiting...");return}const ee=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/cot?token=${encodeURIComponent(H)}`;console.log("[COT WS] Connecting to",ee);let W,ke,ye=!1;const Ge=()=>{if(ye)return;W=new WebSocket(ee),v.current=W,W.onopen=()=>{console.log("[COT WS] Connected"),h(!0)};const ve=V=>{var st;const{type:we,request_id:ne}=V,te=X=>{const U=X.findIndex(P=>P.request_id===ne);return U>=0?[X,U]:[[{request_id:ne,created_at:new Date().toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),preview:"...",has_tool_calls:!1,rounds:[],injectedMemories:[],textPreview:""},...X],0]},Be=(X,U)=>{const ue=X.findIndex(de=>de.round_index===U);if(ue>=0)return[X,ue];const re=[...X,{round_index:U,blocks:[]}];return re.sort((de,P)=>de.round_index-P.round_index),[re,re.findIndex(de=>de.round_index===U)]},Me=X=>{z.current.has(X)||a(U=>{if(U.has(X))return U;const ue=new Set(U);return ue.add(X),ue})};if(we==="tokens_update"){n(X=>X.map(U=>U.request_id===ne?{...U,prompt_tokens:V.prompt_tokens||0,completion_tokens:V.completion_tokens||0,cache_hit:V.cache_hit||!1}:U));return}if(we==="replay_snapshot"){console.log("[COT] replay_snapshot",ne,"thinking_rounds:",(st=V.rounds)==null?void 0:st.length,"text_len:",(V.text_preview||"").length),n(X=>{let[U,ue]=te(X);U=[...U];const re={...U[ue]};if(V.rounds)for(const de of V.rounds){if(!de.thinking)continue;let[P,Z]=Be([...re.rounds],de.round_index);const se={...P[Z],blocks:[...P[Z].blocks]},ce=se.blocks.findIndex(qe=>qe.block_type==="thinking");ce>=0?de.thinking.length>se.blocks[ce].content.length&&(se.blocks[ce]={...se.blocks[ce],content:de.thinking}):se.blocks.push({block_type:"thinking",content:de.thinking,tool_name:null}),P[Z]=se,re.rounds=P}return V.text_preview&&V.text_preview.length>(re.textPreview||"").length&&(re.textPreview=V.text_preview,(!re.preview||re.preview==="...")&&(re.preview=V.text_preview.slice(0,80))),V.injected_memories&&(re.injectedMemories=V.injected_memories),V.prompt_tokens&&(re.prompt_tokens=V.prompt_tokens),V.completion_tokens&&(re.completion_tokens=V.completion_tokens),V.cache_hit&&(re.cache_hit=V.cache_hit),U[ue]=re,U}),w(X=>new Set(X).add(ne)),Me(ne);return}if(we==="done"){w(X=>{const U=new Set(X);return U.delete(ne),U}),z.current.delete(ne),n(X=>X.map(U=>U.request_id===ne?{...U,prompt_tokens:V.prompt_tokens||0,completion_tokens:V.completion_tokens||0,elapsed_ms:V.elapsed_ms||0,cache_hit:V.cache_hit||!1,textPreview:""}:U));return}if(we==="injected_memories"){n(X=>{let[U,ue]=te(X);return U=[...U],U[ue]={...U[ue],injectedMemories:V.memories||[]},U}),w(X=>new Set(X).add(ne)),Me(ne);return}if(we==="thinking_delta"){n(X=>{let[U,ue]=te(X);U=[...U];const re={...U[ue]};let[de,P]=Be([...re.rounds],V.round_index);const Z={...de[P],blocks:[...de[P].blocks]};let se=-1;for(let ce=Z.blocks.length-1;ce>=0;ce--)if(Z.blocks[ce].block_type==="thinking"){se=ce;break}return se>=0?Z.blocks[se]={...Z.blocks[se],content:Z.blocks[se].content+V.content}:Z.blocks.push({block_type:"thinking",content:V.content,tool_name:null}),de[P]=Z,re.rounds=de,U[ue]=re,U}),w(X=>new Set(X).add(ne)),Me(ne);return}if(we==="text_delta"){n(X=>{let[U,ue]=te(X);U=[...U];const re={...U[ue]};return re.textPreview=(re.textPreview||"")+V.content,(!re.preview||re.preview==="...")&&(re.preview=re.textPreview.slice(0,80)),U[ue]=re,U}),w(X=>new Set(X).add(ne)),Me(ne);return}if(we==="tool_use"||we==="tool_result"){n(X=>{let[U,ue]=te(X);U=[...U];const re={...U[ue]};let[de,P]=Be([...re.rounds],V.round_index);return de[P]={...de[P],blocks:[...de[P].blocks,{block_type:we,content:V.content,tool_name:V.tool_name}]},re.rounds=de,we==="tool_use"&&(re.has_tool_calls=!0),U[ue]=re,U}),w(X=>new Set(X).add(ne)),Me(ne);return}if(V.block_type){const{round_index:X,block_type:U,content:ue,tool_name:re}=V;n(de=>{let[P,Z]=te(de);P=[...P];const se={...P[Z]};let[ce,qe]=Be([...se.rounds],X);return ce[qe]={...ce[qe],blocks:[...ce[qe].blocks,{block_type:U,content:ue,tool_name:re}]},se.rounds=ce,U==="tool_use"&&(se.has_tool_calls=!0),U==="text"&&(!se.preview||se.preview==="...")&&(se.preview=ue.slice(0,80)),P[Z]=se,P}),w(de=>new Set(de).add(ne)),Me(ne)}};q.current=ve,W.onmessage=V=>{try{const we=JSON.parse(V.data);if(!L.current){ae.current.push(we);return}ve(we)}catch(we){}},W.onclose=V=>{console.log("[COT WS] Disconnected, code:",V.code,"reason:",V.reason),h(!1),v.current=null,ye||(ke=setTimeout(Ge,3e3))},W.onerror=V=>{console.error("[COT WS] Error:",V),W.close()}};return Ge(),()=>{ye=!0,clearTimeout(ke),v.current&&(v.current.onclose=null,v.current.close())}},[H]);const fe=u.useRef(!0);u.useEffect(()=>{if(fe.current){fe.current=!1;return}localStorage.setItem("chat_mode",i);const _=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({..._,shortMode:i==="short"})),F("/api/settings/chat-mode",{method:"PUT",body:{mode:i}}).catch(()=>{})},[i]);const O=_=>{N(_),E(!1),F("/api/settings/mood",{method:"PUT",body:{mood:_}}).catch(()=>{})};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:pe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:pe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:pe.text},children:"COT "}),o.jsxs("div",{className:"flex items-center gap-2",children:[f&&o.jsx("div",{className:"h-2 w-2 rounded-full",style:{background:"#2a9d5c"},title:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:pe.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:he,disabled:r,children:o.jsx(Wc,{size:16,style:{color:pe.accentDark},className:r?"animate-spin":""})})]})]}),o.jsx("div",{className:"shrink-0 pb-3",style:{paddingLeft:20,paddingRight:20},children:o.jsxs("div",{className:"flex items-stretch gap-4 justify-center",children:[o.jsxs("div",{className:"relative flex",ref:T,children:[o.jsx("button",{className:"flex w-[42px] shrink-0 items-center justify-center rounded-[14px]",style:{background:pe.bg,boxShadow:"var(--inset-shadow)"},onClick:()=>j&&E(!k),children:j?o.jsx("img",{src:`/miniapp/assets/mood/${j}.png`,alt:j,className:"h-6 w-6",style:{imageRendering:"pixelated"}}):o.jsx("div",{className:"h-6 w-6"})}),k&&o.jsx("div",{className:"absolute left-0 top-12 z-50 rounded-[16px] overflow-hidden",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)",width:174},children:y0.map((_,ee)=>{const W=Math.floor(ee/3),ke=ee%3,ye=j===_.key;return o.jsxs("button",{className:"inline-flex flex-col items-center justify-center",style:{width:"calc(100% / 3)",padding:"8px 0 6px",background:ye?"rgba(232,160,191,0.18)":"transparent",boxShadow:[ke<2?"inset -1px 0 0 rgba(136,136,160,0.12)":"",W<2?"inset 0 -1px 0 rgba(136,136,160,0.12)":""].filter(Boolean).join(", ")||"none"},onClick:()=>O(_.key),children:[o.jsx("img",{src:`/miniapp/assets/mood/${_.key}.png`,alt:_.label,className:"h-7 w-7",style:{imageRendering:"pixelated",filter:ye?"drop-shadow(0 0 3px #e8a0bf)":"none"}}),o.jsx("span",{className:"text-[10px] mt-0.5",style:{color:ye?"#d48aab":pe.textMuted},children:_.label})]},_.key)})})]}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:pe.bg,width:160},children:Hd.map(_=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:i===_.key?pe.bg:"transparent",boxShadow:i===_.key?"var(--card-shadow-sm)":"none",color:i===_.key?pe.accentDark:pe.textMuted},onClick:()=>{_.key!==i&&p(_.key)},children:_.label},_.key))})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8 pt-5",children:r?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:pe.accent,borderTopColor:"transparent"}})}):y?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(wd,{size:36,style:{color:"#ef4444",opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:"#ef4444"},children:y})]}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(wd,{size:36,style:{color:pe.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:pe.textMuted},children:" COT "})]}):t.map(_=>o.jsx("div",{className:"mb-3 rounded-[18px]",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)"},children:o.jsx(N0,{item:_,expanded:l.has(_.request_id),onToggle:()=>{a(ee=>{const W=new Set(ee);return W.has(_.request_id)?(W.delete(_.request_id),z.current.add(_.request_id)):(W.add(_.request_id),z.current.delete(_.request_id)),W})},live:x.has(_.request_id),avatarUrl:g,translateCache:S})},_.request_id))}),d&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>p(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:pe.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:_=>_.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:pe.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:pe.textMuted},children:["",((Q=Hd.find(_=>_.key===d))==null?void 0:Q.label)||d,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)",color:pe.text},onClick:()=>p(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:pe.accentDark,boxShadow:"4px 4px 10px rgba(201,98,138,0.4)"},onClick:()=>{c(d),p(null)},children:""})]})]})})]})}const et={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Bl=80;function E0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Bl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Bl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Bl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Bl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:et.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(rs,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function M0({msg:e,roleLabel:t,roleColor:n,fmtTime:r,onDelete:s}){const[l,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);return u.useLayoutEffect(()=>{const p=d.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e.content,l]),o.jsx(E0,{onDelete:s,children:o.jsxs("div",{className:"rounded-[18px] p-3",style:{background:et.bg},children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:n(e.role)},children:t(e.role)}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[e.summarized&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px] font-semibold",style:{background:"rgba(58,138,95,0.15)",color:"#2d7a4a"},children:""}),o.jsx("span",{className:"text-[10px]",style:{color:et.textMuted},children:r(e.created_at)})]})]}),o.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:et.text}:{color:et.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:e.content}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:"#d48aab",background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})})]})})}function _0(){const e=$t(),[t,n]=u.useState([]),[r,s]=u.useState(null),[l,a]=u.useState(!0),[i,c]=u.useState(!1),d=async()=>{var y;a(!0);try{const g=(y=(await F("/api/sessions?limit=1")).sessions)==null?void 0:y[0];if(!g){a(!1);return}s(g.id);const m=await F(`/api/sessions/${g.id}/messages?limit=50`);n((m.messages||[]).reverse()),c(m.has_more||!1)}catch(b){console.error(b)}a(!1)};u.useEffect(()=>{d()},[]);const p=async y=>{if(r)try{await F(`/api/sessions/${r}/messages/${y}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==y))}catch(b){console.error("Delete failed",b)}},f=async()=>{if(!r||!i||l)return;const y=t[t.length-1];if(y){a(!0);try{const b=await F(`/api/sessions/${r}/messages?limit=50&before_id=${y.id}`),g=(b.messages||[]).reverse();n(m=>[...m,...g]),c(b.has_more||!1)}catch(b){console.error(b)}a(!1)}},h=y=>{if(!y)return"";const b=new Date(y),g=new Date;return b.toDateString()===g.toDateString()?b.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):b.toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})},x=y=>y==="user"?"":y==="assistant"?"AI":"",w=y=>y==="user"?et.accentDark:y==="assistant"?"#3a9b5c":et.textMuted;return o.jsxs("div",{className:"flex h-full flex-col",style:{background:et.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:et.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:et.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:et.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:et.bg,boxShadow:l?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:d,disabled:l,children:o.jsx(Wc,{size:16,style:{color:et.accentDark},className:l?"animate-spin":""})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("p",{className:"text-[11px]",style:{color:et.textMuted},children:""})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l&&t.length===0?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:et.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:et.textMuted},children:""}):o.jsxs(o.Fragment,{children:[t.map(y=>o.jsx(M0,{msg:y,roleLabel:x,roleColor:w,fmtTime:h,onDelete:()=>p(y.id)},y.id)),i&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:et.bg,boxShadow:"var(--card-shadow-sm)",color:et.accentDark},onClick:f,disabled:l,children:l?"...":""})]})})]})}const D={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},T0=[{key:"memories",label:""},{key:"summaries",label:""},{key:"messages",label:""}],Xd={identity:{color:"#7b5ea7",bg:"#ede4f7"},relationship:{color:"#c26a8a",bg:"#f7e0ea"},bond:{color:"#d48aab",bg:"#fce8f0"},conflict:{color:"#b5454a",bg:"#f5dede"},fact:{color:"#4a8ab5",bg:"#deedf5"},preference:{color:"#9b7a3b",bg:"#f0ebd8"},health:{color:"#4a9b6e",bg:"#ddf0e5"},task:{color:"#6b7b9b",bg:"#e0e6f0"},ephemeral:{color:"#9b9b9b",bg:"#ececec"},other:{color:"#8a7a6a",bg:"#efe8df"}},ox=[{value:"",label:""},{value:"identity",label:"identity"},{value:"relationship",label:"relationship"},{value:"bond",label:"bond"},{value:"conflict",label:"conflict"},{value:"fact",label:"fact"},{value:"preference",label:"preference"},{value:"health",label:"health"},{value:"task",label:"task"},{value:"ephemeral",label:"ephemeral"},{value:"other",label:"other"}],D0=[{value:"",label:""},{value:"sad",label:"sad"},{value:"angry",label:"angry"},{value:"anxious",label:"anxious"},{value:"tired",label:"tired"},{value:"emo",label:"emo"},{value:"happy",label:"happy"},{value:"flirty",label:"flirty"},{value:"proud",label:"proud"},{value:"calm",label:"calm"}],R0=[{value:"",label:""},{value:"user",label:""},{value:"assistant",label:""},{value:"system",label:""}];function tr(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function Zc({text:e,keyword:t}){if(!t||!e)return o.jsx(o.Fragment,{children:e});const n=e.toLowerCase(),r=t.toLowerCase(),s=[];let l=0,a=n.indexOf(r,l);for(;a!==-1;)a>l&&s.push(o.jsx("span",{children:e.slice(l,a)},l)),s.push(o.jsx("span",{style:{color:D.accentDark,fontWeight:600},children:e.slice(a,a+r.length)},`h${a}`)),l=a+r.length,a=n.indexOf(r,l);return l<e.length&&s.push(o.jsx("span",{children:e.slice(l)},l)),o.jsx(o.Fragment,{children:s})}function ax({selected:e}){return o.jsx("div",{className:"flex h-5 w-5 shrink-0 items-center justify-center rounded-full",style:e?{background:D.accentDark,boxShadow:"0 2px 6px rgba(201,98,138,0.3)"}:{background:D.bg,boxShadow:"var(--inset-shadow)"},children:e&&o.jsx(pr,{size:12,color:"white",strokeWidth:3})})}function P0({title:e="",message:t,confirmLabel:n="",confirmColor:r="#ff4d6d",onConfirm:s,onCancel:l}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:l,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:D.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:a=>a.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:D.text},children:e}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:D.textMuted},children:t}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.text},onClick:l,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:r,boxShadow:`4px 4px 10px ${r}66`},onClick:s,children:n})]})]})})}function Yd({initialText:e,onSave:t,onCancel:n,memoryData:r}){var h;const[s,l]=u.useState(e),[a,i]=u.useState((r==null?void 0:r.klass)||"other"),[c,d]=u.useState((((h=r==null?void 0:r.tags)==null?void 0:h.topic)||[]).join(", ")),p=!!r,f=ox.filter(x=>x.value);return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-5 w-full max-w-[340px] rounded-[18px] p-4",style:{background:D.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:x=>x.stopPropagation(),children:[o.jsx("textarea",{className:"w-full rounded-[12px] p-3 text-[12px] leading-relaxed resize-none outline-none",style:{background:D.bg,boxShadow:"var(--inset-shadow)",color:D.text,minHeight:p?100:140,maxHeight:280},value:s,onChange:x=>l(x.target.value),autoFocus:!0}),p&&o.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:D.textMuted},children:""}),o.jsxs("div",{className:"relative flex-1",children:[o.jsx("select",{className:"w-full appearance-none rounded-[10px] px-3 py-1.5 text-[11px] font-medium outline-none",style:{background:D.bg,boxShadow:"var(--inset-shadow)",color:D.text,WebkitAppearance:"none"},value:a,onChange:x=>i(x.target.value),children:f.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))}),o.jsx(yr,{size:10,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2",style:{color:D.textMuted}})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:D.textMuted},children:""}),o.jsx("input",{className:"flex-1 rounded-[10px] px-3 py-1.5 text-[11px] outline-none",style:{background:D.bg,boxShadow:"var(--inset-shadow)",color:D.text},placeholder:", ",value:c,onChange:x=>d(x.target.value)})]})]}),o.jsxs("div",{className:"mt-3 flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.textMuted},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.accentDark},onClick:()=>{if(p){const x=c.split(/[,]/).map(w=>w.trim()).filter(Boolean);t(s,a,{topic:x})}else t(s)},disabled:!s.trim(),children:""})]})]})})}function Kd({value:e,rawValue:t,onChange:n,options:r,width:s,active:l}){var p;const[a,i]=u.useState(!1),c=u.useRef(null);u.useEffect(()=>{if(!a)return;const f=h=>{c.current&&!c.current.contains(h.target)&&i(!1)};return document.addEventListener("mousedown",f),document.addEventListener("touchstart",f),()=>{document.removeEventListener("mousedown",f),document.removeEventListener("touchstart",f)}},[a]);const d=((p=r.find(f=>f.value===String(t)))==null?void 0:p.label)||e||"";return o.jsxs("div",{className:"relative",style:{width:s},ref:c,children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[12px] px-2.5 py-2 text-[11px] font-medium text-left",style:{boxShadow:"var(--card-shadow-sm)",background:D.bg,color:l?D.accentDark:D.text},onClick:()=>i(!a),children:[o.jsx("span",{className:"truncate flex-1",children:d}),o.jsx(yr,{size:10,style:{color:D.textMuted,flexShrink:0,marginLeft:2,transform:a?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),a&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[12px]",style:{background:D.bg,boxShadow:"var(--card-shadow)"},children:r.map(f=>o.jsxs("button",{className:"flex w-full items-center justify-between px-3 py-2 text-[11px]",style:{color:D.text},onClick:()=>{n(f.value),i(!1)},children:[o.jsx("span",{className:"truncate",children:f.label}),String(t)===f.value&&o.jsx(pr,{size:10,style:{color:D.accentDark,flexShrink:0}})]},f.value))})]})}function Qd({children:e,time:t,badge:n,keyword:r,onEdit:s,selectMode:l,selected:a,onToggle:i,onLongPress:c}){const[d,p]=u.useState(!1),[f,h]=u.useState(!1),x=u.useRef(null),w=typeof e=="string"?e:"",y=u.useRef(null),b=u.useRef(!1),g=u.useRef(null);u.useLayoutEffect(()=>{const N=x.current;N&&!d&&h(N.scrollHeight>N.clientHeight+1)},[w,d]);const m=N=>{if(l)return;const k=N.touches[0];g.current={x:k.clientX,y:k.clientY},b.current=!1,y.current=setTimeout(()=>{b.current=!0,c==null||c()},600)},v=N=>{if(!g.current||!y.current)return;const k=N.touches[0],E=k.clientX-g.current.x,T=k.clientY-g.current.y;E*E+T*T>100&&(clearTimeout(y.current),y.current=null)},S=()=>{clearTimeout(y.current)},j=()=>{if(!b.current&&l){i==null||i();return}};return o.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:m,onTouchMove:v,onTouchEnd:S,onTouchCancel:S,onClick:j,children:[l&&o.jsx("div",{className:"mt-1",children:o.jsx(ax,{selected:a})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between gap-1",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[n,o.jsx("div",{ref:x,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:d?{color:D.text}:{color:D.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:N=>{l||(N.stopPropagation(),p(!d))},children:o.jsx(Zc,{text:w,keyword:r})})]}),!l&&s&&o.jsx("button",{className:"mt-0.5 flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},onClick:N=>{N.stopPropagation(),s()},children:o.jsx(Hc,{size:11,style:{color:D.accentDark}})})]}),o.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:D.textMuted},children:t||""}),!l&&(f||d)&&o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:D.accentDark,background:"rgba(232,160,191,0.1)"},onClick:N=>{N.stopPropagation(),p(!d)},children:d?"":""})]})]})]})}function z0({content:e,deletedAt:t,keyword:n,onRestore:r,onPermanentDelete:s}){const[l,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);return u.useLayoutEffect(()=>{const p=d.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e,l]),o.jsxs("div",{className:"mb-2 rounded-[14px] p-3",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",opacity:.75},children:[o.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:D.text}:{color:D.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:o.jsx(Zc,{text:e,keyword:n})}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:D.accentDark,background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:D.textMuted},children:t?(()=>{const p=Math.max(0,30-Math.floor((Date.now()-new Date(t).getTime())/864e5));return` ${tr(t)}  ${p}`})():""}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(59,130,246,0.1)",color:"#3b82f6"},onClick:r,children:""}),o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(239,68,68,0.1)",color:"#ef4444"},onClick:s,children:""})]})]})]})}function I0({msg:e,keyword:t,roleLabel:n,roleColor:r,selectMode:s,selected:l,onToggle:a,onLongPress:i}){const[c,d]=u.useState(!1),[p,f]=u.useState(!1),h=u.useRef(null),x=u.useRef(null),w=u.useRef(!1),y=u.useRef(null);u.useLayoutEffect(()=>{const S=h.current;S&&!c&&f(S.scrollHeight>S.clientHeight+1)},[e.content,c]);const b=S=>{if(s)return;const j=S.touches[0];y.current={x:j.clientX,y:j.clientY},w.current=!1,x.current=setTimeout(()=>{w.current=!0,i==null||i()},600)},g=S=>{if(!y.current||!x.current)return;const j=S.touches[0],N=j.clientX-y.current.x,k=j.clientY-y.current.y;N*N+k*k>100&&(clearTimeout(x.current),x.current=null)},m=()=>{clearTimeout(x.current)},v=()=>{if(!w.current&&s){a==null||a();return}};return o.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:b,onTouchMove:g,onTouchEnd:m,onTouchCancel:m,onClick:v,children:[s&&o.jsx("div",{className:"mt-1",children:o.jsx(ax,{selected:l})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:r(e.role)},children:n(e.role)}),e.summary_group_id&&o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(74,138,181,0.1)",color:"#4a8ab5"},children:["",e.summary_group_id]})]}),o.jsx("span",{className:"text-[10px]",style:{color:D.textMuted},children:tr(e.created_at)})]}),o.jsx("div",{ref:h,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:c?{color:D.text}:{color:D.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:S=>{s||(S.stopPropagation(),d(!c))},children:o.jsx(Zc,{text:e.content,keyword:t})}),!s&&(p||c)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:D.accentDark,background:"rgba(232,160,191,0.1)"},onClick:S=>{S.stopPropagation(),d(!c)},children:c?"":""})})]})]})}function L0(){var Dt;const e=$t(),[t,n]=u.useState("memories"),[r,s]=u.useState(!1),[l,a]=u.useState(!1),[i,c]=u.useState(null),[d,p]=u.useState([]),[f,h]=u.useState(null),[x,w]=u.useState(""),[y,b]=u.useState(null),[g,m]=u.useState(null),[v,S]=u.useState(""),[j,N]=u.useState(""),[k,E]=u.useState(""),[T,z]=u.useState(!1),[L,ae]=u.useState(new Set),[H,I]=u.useState([]),[q,he]=u.useState([]),[fe,O]=u.useState([]),[Q,_]=u.useState([]),[ee,W]=u.useState([]),[ke,ye]=u.useState({longterm:null,daily:null}),[Ge,ve]=u.useState(!1),[V,we]=u.useState(null),[ne,te]=u.useState(!0),[Be,Me]=u.useState(!1),[st,X]=u.useState(!1),[U,ue]=u.useState(!1);u.useEffect(()=>{z(!1),ae(new Set)},[t,r]),u.useEffect(()=>{t!=="messages"||!r||(ve(!0),F("/api/settings/summary-layers").then(C=>ye({longterm:C.longterm,daily:C.daily})).catch(C=>console.error(C)).finally(()=>ve(!1)))},[t,r]),u.useEffect(()=>{F("/api/sessions?limit=50").then(C=>{const A=C.sessions||[];p(A),A.length>0&&!i&&c(A[0].id)}).catch(()=>{})},[]),u.useEffect(()=>{i&&F(`/api/sessions/${i}/info`).then(C=>h(C.assistant_name||null)).catch(()=>h(null))},[i]);const re=50,de=u.useRef(""),P=u.useRef(null),Z=u.useRef({klass:"",mood:"",role:""});Z.current={klass:v,mood:j,role:k},u.useEffect(()=>{i&&ce()},[i,l]),u.useEffect(()=>{i&&!l&&ce()},[t]),u.useEffect(()=>{i&&!l&&ce()},[v,j,k]),u.useEffect(()=>(P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{const C=x.trim();C!==de.current&&(de.current=C,i&&ce(C))},400),()=>{P.current&&clearTimeout(P.current)}),[x]);const se=C=>{const A=[],K=(C!=null?C:de.current||"").trim();K&&A.push(`search=${encodeURIComponent(K)}`);const J=Z.current;return t==="memories"&&J.klass&&A.push(`klass=${encodeURIComponent(J.klass)}`),t==="summaries"&&J.mood&&A.push(`mood_tag=${encodeURIComponent(J.mood)}`),t==="messages"&&J.role&&A.push(`role=${encodeURIComponent(J.role)}`),A.length?`&${A.join("&")}`:""},ce=async C=>{if(!i)return;te(!0);const A=se(C);try{if(l){const[K,J]=await Promise.all([F("/api/memories/trash?limit=100"),F(`/api/sessions/${i}/summaries/trash`)]);_(K.memories||[]),W(J.summaries||[])}else if(t==="memories"){const K=await F(`/api/memories?limit=${re}&offset=0${A}`);I(K.memories||[]),Me((K.total||0)>(K.memories||[]).length)}else if(t==="summaries"){const K=await F(`/api/sessions/${i}/summaries?limit=${re}&offset=0${A}`);he(K.summaries||[]),X((K.total||0)>(K.summaries||[]).length)}else{const K=await F(`/api/sessions/${i}/messages?limit=50${A}`);O((K.messages||[]).reverse()),ue(K.has_more||!1)}}catch(K){console.error(K)}te(!1)},qe=async()=>{if(!Be||ne)return;te(!0);const C=se();try{const A=await F(`/api/memories?limit=${re}&offset=${H.length}${C}`),K=A.memories||[];I(J=>[...J,...K]),Me((A.total||0)>H.length+K.length)}catch(A){console.error(A)}te(!1)},We=async()=>{if(!i||!st||ne)return;te(!0);const C=se();try{const A=await F(`/api/sessions/${i}/summaries?limit=${re}&offset=${q.length}${C}`),K=A.summaries||[];he(J=>[...J,...K]),X((A.total||0)>q.length+K.length)}catch(A){console.error(A)}te(!1)},Kn=async()=>{if(!i||!U||ne)return;const C=fe[fe.length-1];if(!C)return;te(!0);const A=se();try{const K=await F(`/api/sessions/${i}/messages?limit=50&before_id=${C.id}${A}`);O(J=>[...J,...(K.messages||[]).reverse()]),ue(K.has_more||!1)}catch(K){console.error(K)}te(!1)},Ue=x.trim(),Yt=u.useMemo(()=>Ue?Q.filter(C=>C.content.toLowerCase().includes(Ue.toLowerCase())):Q,[Q,Ue]),ln=u.useMemo(()=>Ue?ee.filter(C=>(C.summary_content||"").toLowerCase().includes(Ue.toLowerCase())):ee,[ee,Ue]),Kt=(C,A)=>b({message:C,action:A}),Qn=async C=>{await F(`/api/memories/${C}/restore`,{method:"POST"}),_(A=>A.filter(K=>K.id!==C))},_t=C=>Kt("",async()=>{await F(`/api/memories/${C}/permanent`,{method:"DELETE"}),_(A=>A.filter(K=>K.id!==C))}),Gn=async C=>{await F(`/api/sessions/${i}/summaries/${C}/restore`,{method:"POST"}),W(A=>A.filter(K=>K.id!==C))},vr=C=>Kt("",async()=>{await F(`/api/sessions/${i}/summaries/${C}/permanent`,{method:"DELETE"}),W(A=>A.filter(K=>K.id!==C))}),$=C=>{ae(A=>{const K=new Set(A);return K.has(C)?K.delete(C):K.add(C),K})},ge=C=>{z(!0),ae(new Set([C]))},ie=()=>{let C=[];t==="memories"?C=H.map(A=>A.id):t==="summaries"?C=q.map(A=>A.id):C=fe.map(A=>A.id),ae(new Set(C))},Ee=()=>{z(!1),ae(new Set)},xt=()=>{if(L.size===0)return;const C=L.size,A=t==="messages"?` ${C} `:` ${C} ${t==="memories"?"":""}`;Kt(A,async()=>{const K=[...L];t==="memories"?(await F("/api/memories/batch",{method:"DELETE",body:{ids:K}}),I(J=>J.filter(Oe=>!L.has(Oe.id)))):t==="summaries"?(await F(`/api/sessions/${i}/summaries/batch`,{method:"DELETE",body:{ids:K}}),he(J=>J.filter(Oe=>!L.has(Oe.id)))):(await F(`/api/sessions/${i}/messages/batch`,{method:"DELETE",body:{ids:K}}),O(J=>J.filter(Oe=>!L.has(Oe.id)))),Ee()})},hn=async(C,A,K)=>{if(g){try{if(g.type==="memory"){const J={content:C};A!==void 0&&(J.klass=A),K!==void 0&&(J.tags=K),await F(`/api/memories/${g.id}`,{method:"PUT",body:J}),I(Oe=>Oe.map(At=>At.id===g.id?{...At,content:C,...A!==void 0?{klass:A}:{},...K!==void 0?{tags:K}:{}}:At))}else await F(`/api/sessions/${i}/summaries/${g.id}`,{method:"PATCH",body:{summary_content:C}}),he(J=>J.map(Oe=>Oe.id===g.id?{...Oe,summary_content:C}:Oe))}catch(J){console.error(J)}m(null)}},xl=C=>{if(!V)return;const A=V.type;we(null),b({title:"",message:"",confirmLabel:"",confirmColor:D.accentDark,action:async()=>{await F(`/api/settings/summary-layers/${A}`,{method:"PUT",body:{content:C}}),ye(K=>({...K,[A]:{...K[A]||{},content:C}}))}})},is=C=>C==="user"?"":C==="assistant"?f||"":"",Je=C=>C==="user"?D.accentDark:C==="assistant"?"#8d68c4":D.textMuted,lt=t==="memories"?ox:t==="summaries"?D0:R0,ot=t==="memories"?v:t==="summaries"?j:k,on=C=>{t==="memories"?S(C):t==="summaries"?N(C):E(C)},an=l?(()=>{if(ne)return o.jsx(ys,{});const C=t==="memories"?Yt:ln;return C.length===0?o.jsx(Ul,{text:Ue?"":""}):C.map(A=>o.jsx(z0,{content:A.content||A.summary_content||"()",deletedAt:A.deleted_at,keyword:Ue,onRestore:()=>t==="memories"?Qn(A.id):Gn(A.id),onPermanentDelete:()=>t==="memories"?_t(A.id):vr(A.id)},A.id))})():t==="memories"?ne&&H.length===0?o.jsx(ys,{}):H.length===0?o.jsx(Ul,{text:Ue?"":""}):o.jsxs(o.Fragment,{children:[!T&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:D.textMuted},children:""}),H.map(C=>o.jsx(Qd,{time:C.updated_at?`${tr(C.created_at)}   ${tr(C.updated_at)}`:tr(C.created_at),keyword:Ue,onEdit:()=>m({type:"memory",id:C.id,text:C.content,klass:C.klass,tags:C.tags}),selectMode:T,selected:L.has(C.id),onToggle:()=>$(C.id),onLongPress:()=>ge(C.id),badge:(()=>{var J;const A=Xd[C.klass]||Xd.other,K=((J=C.tags)==null?void 0:J.topic)||[];return o.jsxs("div",{className:"flex flex-wrap items-center gap-1 mb-1",children:[o.jsx("span",{className:"inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:A.bg,color:A.color},children:C.klass}),o.jsxs("span",{className:"inline-block text-[10px]",style:{color:D.textMuted},children:["#",C.id]}),K.map((Oe,At)=>o.jsx("span",{className:"inline-block rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(136,136,160,0.1)",color:D.textMuted},children:Oe},At))]})})(),children:C.content},C.id)),Be&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.accentDark},onClick:qe,disabled:ne,children:ne?"...":""})]}):t==="summaries"?ne&&q.length===0?o.jsx(ys,{}):q.length===0?o.jsx(Ul,{text:Ue?"":""}):o.jsxs(o.Fragment,{children:[!T&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:D.textMuted},children:""}),q.map(C=>o.jsx(Qd,{time:tr(C.created_at),keyword:Ue,onEdit:()=>m({type:"summary",id:C.id,text:C.summary_content}),selectMode:T,selected:L.has(C.id),onToggle:()=>$(C.id),onLongPress:()=>ge(C.id),badge:o.jsxs(o.Fragment,{children:[C.mood_tag&&o.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:"rgba(232,160,191,0.15)",color:D.accentDark},children:C.mood_tag}),o.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:D.textMuted},children:["#",C.id]})]}),children:C.summary_content||"()"},C.id)),st&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.accentDark},onClick:We,disabled:ne,children:ne?"...":""})]}):r?Ge?o.jsx(ys,{}):o.jsx("div",{className:"space-y-4",children:[{type:"longterm",label:"",hint:""},{type:"daily",label:"",hint:""}].map(({type:C,label:A,hint:K})=>{var At,eu;const J=ke[C],Oe=(At=J==null?void 0:J.content)==null?void 0:At.trim();return o.jsxs("div",{className:"rounded-[18px] p-4",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:D.text},children:A}),o.jsx("div",{className:"text-[11px]",style:{color:D.textMuted},children:K})]}),o.jsx("button",{className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-full",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>we({type:C,content:(J==null?void 0:J.content)||""}),children:o.jsx(Hc,{size:13,style:{color:D.accentDark}})})]}),o.jsx("div",{className:"text-[12px] leading-relaxed whitespace-pre-wrap break-words",style:{color:Oe?D.text:D.textMuted},children:Oe?J.content:""}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:D.textMuted},children:J!=null&&J.updated_at?` ${tr(J.updated_at)}`:""}),o.jsxs("span",{className:"text-[10px]",style:{color:D.textMuted},children:[((eu=J==null?void 0:J.content)==null?void 0:eu.length)||0," "]})]})]},C)})}):ne&&fe.length===0?o.jsx(ys,{}):fe.length===0?o.jsx(Ul,{text:Ue?"":""}):o.jsxs(o.Fragment,{children:[!T&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:D.textMuted},children:""}),fe.map(C=>o.jsx(I0,{msg:C,keyword:Ue,roleLabel:is,roleColor:Je,selectMode:T,selected:L.has(C.id),onToggle:()=>$(C.id),onLongPress:()=>ge(C.id)},C.id)),U&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.accentDark},onClick:Kn,disabled:ne,children:ne?"...":""})]});return o.jsxs("div",{className:"flex h-full flex-col",style:{background:D.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:D.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:D.text},children:l?"":""}),t==="messages"?o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:D.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>s(!r),children:o.jsx(Uc,{size:16,style:{color:r?D.accentDark:D.textMuted}})}):o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:D.bg,boxShadow:l?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>a(!l),children:o.jsx(rs,{size:16,style:{color:l?"#ef4444":D.accentDark}})})]}),T&&o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsxs("div",{className:"flex items-center justify-between rounded-[14px] px-4 py-2.5",style:{background:D.bg,boxShadow:"var(--inset-shadow)"},children:[o.jsxs("span",{className:"text-[12px] font-semibold",style:{color:D.accentDark},children:[" ",L.size," "]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:"rgba(59,130,246,0.15)",color:"#3b82f6"},onClick:ie,children:""}),o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.textMuted},onClick:Ee,children:""}),o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold text-white",style:{background:L.size>0?"#ff4d6d":"rgba(255,77,109,0.3)"},onClick:xt,disabled:L.size===0,children:""})]})]})}),!T&&o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:D.bg,boxShadow:"var(--inset-shadow)"},children:T0.map(C=>{const A=l&&C.key==="messages",K=t===C.key,J=C.key==="messages"&&r?"":C.label;return o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:A?{color:D.textMuted,opacity:.35,cursor:"default"}:K?{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.accentDark}:{color:D.textMuted},disabled:A,onClick:()=>!A&&n(C.key),children:J},C.key)})})}),!T&&!(t==="messages"&&r)&&o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Kd,{value:i?`#${i}`:"",rawValue:i!=null?i:"",onChange:C=>c(Number(C)),options:d.map(C=>({value:String(C.id),label:`#${C.id} ${C.title||""}`})),width:"22%"}),o.jsx(Kd,{value:((Dt=lt.find(C=>C.value===ot))==null?void 0:Dt.label)||lt[0].label,rawValue:ot,onChange:on,options:lt.map(C=>({value:C.value,label:C.label})),width:"22%",active:!!ot}),o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Qy,{size:13,className:"absolute left-2.5 top-1/2 -translate-y-1/2",style:{color:D.textMuted}}),o.jsx("input",{className:"w-full rounded-[12px] py-2 pl-8 pr-7 text-[11px] outline-none",style:{background:D.bg,boxShadow:"var(--inset-shadow)",color:D.text},placeholder:"...",value:x,onChange:C=>w(C.target.value)}),x&&o.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>w(""),children:o.jsx(ul,{size:13,style:{color:D.textMuted}})})]})]})}),o.jsx("div",{className:`flex-1 overflow-y-auto px-5 pb-8${t==="messages"&&r?" pt-5":""}`,children:an}),y&&o.jsx(P0,{title:y.title,message:y.message,confirmLabel:y.confirmLabel,confirmColor:y.confirmColor,onConfirm:async()=>{try{await y.action()}catch(C){console.error(C)}b(null)},onCancel:()=>b(null)}),g&&o.jsx(Yd,{initialText:g.text,onSave:hn,onCancel:()=>m(null),memoryData:g.type==="memory"?{klass:g.klass,tags:g.tags}:null}),V&&o.jsx(Yd,{initialText:V.content,onSave:xl,onCancel:()=>we(null)})]})}function ys(){return o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:D.accent,borderTopColor:"transparent"}})})}function Ul({text:e}){return o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:D.textMuted},children:e})}const G={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},O0=[{key:"theirs",label:""},{key:"mine",label:""}],Hl=80;function ix(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function $0({message:e,onConfirm:t,onCancel:n}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:G.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:G.text},children:""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:G.textMuted},children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)",color:G.text},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function A0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Hl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Hl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Hl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Hl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(rs,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function F0({unlockAt:e}){const[t,n]=u.useState(Date.now());u.useEffect(()=>{const d=setInterval(()=>n(Date.now()),1e3);return()=>clearInterval(d)},[]);const r=new Date(e).getTime()-t;if(r<=0)return null;const s=Math.floor(r/864e5),l=Math.floor(r%864e5/36e5),a=Math.floor(r%36e5/6e4),i=Math.floor(r%6e4/1e3);let c="";return s>0&&(c+=`${s}`),(l>0||s>0)&&(c+=`${l}`),c+=`${a}${i}`,o.jsxs("div",{className:"flex items-center gap-1.5 text-[12px]",style:{color:G.accentDark},children:[o.jsx(Xy,{size:12}),o.jsx("span",{children:c})]})}function B0({assistants:e,avatarMap:t,currentId:n,onSelect:r,onClose:s}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:s,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-5",style:{background:G.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:l=>l.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:G.text},children:""}),o.jsx("button",{onClick:s,children:o.jsx(ul,{size:18,style:{color:G.textMuted}})})]}),o.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:e.map(l=>{var i;const a=t[l.id]||l.avatar_url;return o.jsxs("button",{className:"mb-2 flex w-full items-center gap-3 rounded-[14px] p-3 text-left",style:{background:G.bg,boxShadow:l.id===n?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{r(l.id),s()},children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:36,height:36,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:2},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:G.bg},children:a?o.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:G.accentDark},children:((i=l.name)==null?void 0:i[0])||"?"})})}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:G.text},children:l.name})]},l.id)})})]})})}function U0({diary:e,onBack:t,onMarkRead:n}){return u.useEffect(()=>{e&&!e.is_read&&e.author==="assistant"&&(!e.unlock_at||new Date(e.unlock_at)<=new Date)&&n(e.id)},[e]),o.jsxs("div",{className:"flex h-full flex-col",style:{background:G.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:t,children:o.jsx(Mt,{size:22,style:{color:G.text}})}),o.jsx("h1",{className:"text-[15px] font-bold truncate max-w-[60%]",style:{color:G.text},children:e.title||""}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:o.jsxs("div",{className:"rounded-[18px] p-5",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{className:"mb-3 text-[10px]",style:{color:G.textMuted},children:ix(e.created_at)}),o.jsx("div",{className:"text-[13px] leading-[28px]",style:{color:G.text},children:e.content.split(`
`).map((r,s)=>o.jsx("div",{style:{borderBottom:"1px solid rgba(0,0,0,0.06)",minHeight:28},children:r||""},s))})]})})]})}function H0({assistantId:e,onSave:t,onCancel:n}){const[r,s]=u.useState(""),[l,a]=u.useState(""),[i,c]=u.useState(!1),[d,p]=u.useState(""),[f,h]=u.useState(!1),[x,w]=u.useState(!1),y=async()=>{if(!(!l.trim()||f)){h(!0);try{const b={assistant_id:e,author:"user",title:r.trim(),content:l.trim()};i&&d&&(b.unlock_at=new Date(d).toISOString()),await t(b)}finally{h(!1)}}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:G.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Mt,{size:22,style:{color:G.text}})}),o.jsx("h1",{className:"text-[15px] font-bold",style:{color:G.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:l.trim()?"var(--card-shadow-sm)":"var(--inset-shadow)"},onClick:y,disabled:!l.trim()||f,children:o.jsx("span",{className:"text-[12px] font-bold",style:{color:l.trim()?G.accentDark:G.textMuted},children:""})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[!x&&o.jsx("input",{className:"mb-3 w-full rounded-[12px] px-3 py-2.5 text-[13px] font-medium outline-none",style:{background:G.bg,boxShadow:"var(--inset-shadow)",color:G.text},placeholder:"",value:r,onChange:b=>s(b.target.value)}),o.jsxs("div",{className:"relative mb-3",children:[o.jsx("textarea",{className:"w-full rounded-[14px] p-3 text-[13px] leading-[28px] resize-none outline-none",style:{background:G.bg,boxShadow:"var(--inset-shadow)",color:G.text,minHeight:x?"calc(100vh - 120px)":200,backgroundImage:"repeating-linear-gradient(transparent, transparent 27px, rgba(0,0,0,0.05) 27px, rgba(0,0,0,0.05) 28px)",backgroundPositionY:9},placeholder:"...",value:l,onChange:b=>a(b.target.value),autoFocus:!0}),o.jsx("button",{className:"absolute top-2 right-2 flex h-7 w-7 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>w(!x),children:x?o.jsx(qr,{size:13,style:{color:G.accentDark}}):o.jsx(il,{size:13,style:{color:G.accentDark}})})]}),!x&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-[14px] px-4 py-3",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-[13px] font-medium",style:{color:G.text},children:""}),o.jsx("p",{className:"text-[10px]",style:{color:G.textMuted},children:""})]}),o.jsx("button",{className:"relative h-7 w-12 rounded-full transition-colors",style:{background:i?G.accent:"rgba(0,0,0,0.1)"},onClick:()=>{if(!i&&!d){const b=new Date;b.setDate(b.getDate()+1),b.setHours(9,0,0,0);const g=m=>String(m).padStart(2,"0");p(`${b.getFullYear()}-${g(b.getMonth()+1)}-${g(b.getDate())}T${g(b.getHours())}:${g(b.getMinutes())}`)}c(!i)},children:o.jsx("div",{className:"absolute top-0.5 h-6 w-6 rounded-full transition-transform",style:{background:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",transform:i?"translateX(22px)":"translateX(2px)"}})})]}),i&&o.jsxs("div",{className:"rounded-[14px] px-4 py-3",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("p",{className:"mb-2 text-[12px] font-medium",style:{color:G.text},children:""}),o.jsx("input",{type:"datetime-local",className:"w-full rounded-[10px] px-3 py-2 text-[13px] outline-none",style:{background:G.bg,boxShadow:"var(--inset-shadow)",color:G.text},value:d,onChange:b=>p(b.target.value)})]})]})]})]})}function W0(){var H;const e=$t(),[t,n]=u.useState("theirs"),[r,s]=u.useState([]),[l,a]=u.useState({}),[i,c]=u.useState(()=>{const I=localStorage.getItem("diary_assistant_id");return I?Number(I):null}),d=I=>{c(I),I!=null&&localStorage.setItem("diary_assistant_id",String(I))},[p,f]=u.useState(!1),[h,x]=u.useState([]),[w,y]=u.useState(!0),[b,g]=u.useState(null),[m,v]=u.useState(null),[S,j]=u.useState(!1);u.useEffect(()=>{F("/api/assistants").then(async I=>{const q=I.assistants||[];s(q),q.length>0&&(i&&q.some(O=>O.id===i)||d(q[0].id));const he={};await Promise.all(q.map(async fe=>{const O=await ss(`assistant-avatar-${fe.id}`).catch(()=>null);O&&(he[fe.id]=O)})),a(he)}).catch(()=>{})},[]);const N=r.find(I=>I.id===i),k=i&&l[i]||(N==null?void 0:N.avatar_url);u.useEffect(()=>{i!=null&&E()},[i,t]);const E=async()=>{y(!0);try{const q=await F(`/api/diary?assistant_id=${i}&author=${t==="theirs"?"assistant":"user"}&limit=100`);x(q.diary||[])}catch(I){console.error(I)}y(!1)},T=I=>{g({message:"",action:async()=>{await F(`/api/diary/${I}`,{method:"DELETE"}),x(q=>q.filter(he=>he.id!==I))}})},z=async I=>{try{await F(`/api/diary/${I}/read`,{method:"POST"}),x(q=>q.map(he=>he.id===I?{...he,is_read:!0}:he))}catch(q){console.error(q)}},L=async I=>{await F("/api/diary",{method:"POST",body:I}),j(!1),E()},ae=I=>{I.unlock_at&&new Date(I.unlock_at)>new Date||v(I)};return m?o.jsx(U0,{diary:m,onBack:()=>{v(null),E()},onMarkRead:z}):S?o.jsx(H0,{assistantId:i,onSave:L,onCancel:()=>j(!1)}):o.jsxs("div",{className:"flex h-full flex-col",style:{background:G.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:G.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:G.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{border:"2px solid #e8a0bf",padding:2},onClick:()=>f(!0),children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:G.bg},children:k?o.jsx("img",{src:k,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:G.accentDark},children:((H=N==null?void 0:N.name)==null?void 0:H[0])||"?"})})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:G.bg,boxShadow:"var(--inset-shadow)"},children:O0.map(I=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:t===I.key?{background:G.bg,boxShadow:"var(--card-shadow-sm)",color:G.accentDark}:{color:G.textMuted},onClick:()=>n(I.key),children:I.label},I.key))})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24 pt-5",children:w?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:G.accent,borderTopColor:"transparent"}})}):h.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:G.textMuted},children:t==="theirs"?"":""}):h.map(I=>{const q=I.unlock_at&&new Date(I.unlock_at)>new Date;return o.jsx(A0,{onDelete:()=>T(I.id),children:o.jsxs("div",{className:"p-4 rounded-[18px]",style:{background:G.bg,userSelect:"none"},onClick:()=>ae(I),children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[!I.is_read&&I.author==="assistant"&&!q&&o.jsx("div",{className:"h-2 w-2 shrink-0 rounded-full",style:{background:"#ef4444"}}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:G.text},children:I.title||""})]}),o.jsx("span",{className:"text-[10px] shrink-0 ml-2",style:{color:G.textMuted},children:ix(I.created_at)})]}),q?o.jsx(F0,{unlockAt:I.unlock_at}):o.jsx("p",{className:"text-[12px] leading-relaxed break-words",style:{color:G.textMuted,maxHeight:40,overflow:"hidden"},children:I.content.length>60?I.content.slice(0,60)+"...":I.content})]})},I.id)})}),t==="mine"&&o.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center",style:{zIndex:30},children:o.jsx("button",{className:"flex h-12 w-12 items-center justify-center rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",boxShadow:"0 4px 14px rgba(232,160,191,0.4)"},onClick:()=>j(!0),children:o.jsx(ns,{size:22,color:"white"})})}),p&&o.jsx(B0,{assistants:r,avatarMap:l,currentId:i,onSelect:d,onClose:()=>f(!1)}),b&&o.jsx($0,{message:b.message,onConfirm:async()=>{try{await b.action()}catch(I){console.error(I)}g(null)},onCancel:()=>g(null)})]})}const Ne={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function V0({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:Ne.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:Ne.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(qr,{size:18,style:{color:Ne.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:Ne.bg,color:Ne.text},placeholder:"..."})]})}function X0(){const e=$t(),[t,n]=u.useState(""),[r,s]=u.useState(""),[l,a]=u.useState(""),[i,c]=u.useState(""),[d,p]=u.useState(!1),[f,h]=u.useState(!0),[x,w]=u.useState(null),[y,b]=u.useState(!1),g=u.useRef(null),m=u.useRef(null),v=k=>{w(k),setTimeout(()=>w(null),2e3)};u.useEffect(()=>{F("/api/user/profile").then(k=>{n(k.nickname||""),s(k.background_url||""),a(k.basic_info||"")}).catch(()=>{}).finally(()=>h(!1)),ss("user-avatar").then(k=>{k&&c(k)}).catch(function(){})},[]);const S=k=>{var z;const E=(z=k.target.files)==null?void 0:z[0];if(!E)return;const T=new FileReader;T.onload=async L=>{const ae=L.target.result;try{await Bi("user-avatar",ae),c(ae)}catch(H){v("")}},T.readAsDataURL(E),k.target.value=""},j=k=>{var z;const E=(z=k.target.files)==null?void 0:z[0];if(!E)return;const T=new FileReader;T.onload=L=>a(L.target.result||""),T.readAsText(E),k.target.value=""},N=async()=>{p(!0);try{const k={nickname:t.trim()||null,background_url:r||null,basic_info:l||null,avatar_url:i?"user-avatar":null};await F("/api/user/profile",{method:"PUT",body:k});try{const E=JSON.parse(localStorage.getItem("whisper_profile")||"{}");localStorage.setItem("whisper_profile",JSON.stringify({...E,...k}))}catch(E){}v("")}catch(k){v("")}finally{p(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ne.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:Ne.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ne.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:d?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:N,disabled:d,children:o.jsx(cl,{size:18,style:{color:Ne.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5 space-y-4",children:f?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ne.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-[20px] p-5",style:{background:Ne.bg,boxShadow:"var(--card-shadow)"},children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var k;return(k=g.current)==null?void 0:k.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Ne.bg},children:i?o.jsx("img",{src:i,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:24},children:""})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:Ne.accentDark},children:o.jsx(kh,{size:9,color:"white"})})]}),o.jsx("input",{ref:g,type:"file",accept:"image/*",className:"hidden",onChange:S}),o.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Ne.textMuted},children:""}),o.jsx("input",{type:"text",value:t,onChange:k=>n(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ne.bg,color:Ne.text}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Ne.textMuted},children:""}),o.jsx("input",{type:"text",value:r,onChange:k=>s(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2 text-[13px] italic outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ne.bg,color:Ne.text}})]})]})]})}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:Ne.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:Ne.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Ne.bg},onClick:()=>{var k;return(k=m.current)==null?void 0:k.click()},title:"",children:o.jsx(ta,{size:13,style:{color:Ne.textMuted}})}),o.jsx("input",{ref:m,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:j}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Ne.bg},onClick:()=>b(!0),title:"",children:o.jsx(il,{size:13,style:{color:Ne.accentDark}})})]})]}),o.jsx("textarea",{value:l,onChange:k=>a(k.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ne.bg,color:Ne.text}})]})]})}),y&&o.jsx(V0,{value:l,onChange:a,onClose:()=>b(!1)}),x&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:x})})]})}function kr(){var n;const e=(n=window.Telegram)==null?void 0:n.WebApp,t=Math.max((e==null?void 0:e.viewportHeight)||0,window.innerHeight);document.documentElement.style.setProperty("--tg-viewport-height",t+"px")}function Y0({onSuccess:e}){const[t,n]=u.useState(""),[r,s]=u.useState(""),[l,a]=u.useState(!1),i=async c=>{if(c.preventDefault(),!!t.trim()){a(!0),s("");try{await Py(t),e()}catch(d){s(d.message||"")}finally{a(!1)}}};return o.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--bg)",padding:"2rem"},children:o.jsxs("div",{style:{width:"100%",maxWidth:320,borderRadius:24,padding:"2rem 1.5rem",background:"var(--bg)",boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontSize:36,marginBottom:8},children:""}),o.jsx("h1",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--text)",margin:0},children:"WHISPER"}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:4},children:""})]}),o.jsxs("form",{onSubmit:i,children:[o.jsx("input",{type:"password",value:t,onChange:c=>n(c.target.value),placeholder:"",autoFocus:!0,style:{width:"100%",padding:"12px 16px",borderRadius:14,border:"none",outline:"none",fontSize:14,color:"var(--text)",background:"var(--bg)",boxShadow:"var(--inset-shadow)",boxSizing:"border-box"}}),r&&o.jsx("p",{style:{color:"#ef4444",fontSize:"0.75rem",textAlign:"center",marginTop:8,marginBottom:0},children:r}),o.jsx("button",{type:"submit",disabled:l||!t.trim(),style:{width:"100%",marginTop:16,padding:"12px 0",borderRadius:14,border:"none",fontSize:14,fontWeight:600,color:"#fff",background:l||!t.trim()?"var(--text-muted)":"linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%)",cursor:l||!t.trim()?"not-allowed":"pointer",boxShadow:"var(--card-shadow-sm)"},children:l?"...":""})]})]})})}function K0(){const e=Fc();return u.useEffect(()=>{var n;const t=(n=window.Telegram)==null?void 0:n.WebApp;t&&!e.pathname.startsWith("/cot")&&t.expand(),kr()},[e.pathname]),o.jsxs(_y,{children:[o.jsx(ft,{path:"/",element:o.jsx(nv,{})}),o.jsx(ft,{path:"/profile",element:o.jsx(X0,{})}),o.jsx(ft,{path:"/world-books",element:o.jsx(X1,{})}),o.jsx(ft,{path:"/world-books/new",element:o.jsx(Od,{})}),o.jsx(ft,{path:"/world-books/:id",element:o.jsx(Od,{})}),o.jsx(ft,{path:"/assistants",element:o.jsx(r0,{})}),o.jsx(ft,{path:"/assistants/new",element:o.jsx(Ad,{})}),o.jsx(ft,{path:"/assistants/:id",element:o.jsx(Ad,{})}),o.jsx(ft,{path:"/settings",element:o.jsx(u0,{})}),o.jsx(ft,{path:"/settings/api",element:o.jsx(m0,{})}),o.jsx(ft,{path:"/settings/proactive",element:o.jsx(g0,{})}),o.jsx(ft,{path:"/cot",element:o.jsx(C0,{})}),o.jsx(ft,{path:"/memories",element:o.jsx(L0,{})}),o.jsx(ft,{path:"/diary",element:o.jsx(W0,{})}),o.jsx(ft,{path:"/messages",element:o.jsx(_0,{})})]})}function Q0(){const[e,t]=u.useState(null);return u.useEffect(()=>{var r;const n=(r=window.Telegram)==null?void 0:r.WebApp;return localStorage.getItem("whisper_token")||n&&n.initData&&n.initData.length>0?t("ok"):t("login"),n&&(n.ready(),window.location.hash.startsWith("#/cot")||n.expand()),kr(),n&&n.onEvent("viewportChanged",kr),window.addEventListener("resize",kr),()=>{n&&n.offEvent("viewportChanged",kr),window.removeEventListener("resize",kr)}},[]),e===null?null:e==="login"?o.jsx(Y0,{onSuccess:()=>t("ok")}):o.jsx(Ry,{children:o.jsx(K0,{})})}window.location.hash&&!window.location.hash.startsWith("#/")&&history.replaceState(null,"",window.location.pathname+"#/cot");Xa.createRoot(document.getElementById("root")).render(o.jsx(De.StrictMode,{children:o.jsx(Q0,{})}));
