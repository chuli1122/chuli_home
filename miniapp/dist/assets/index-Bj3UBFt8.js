function qh(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function Zh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $d={exports:{}},Mo={},Fd={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qs=Symbol.for("react.element"),em=Symbol.for("react.portal"),tm=Symbol.for("react.fragment"),nm=Symbol.for("react.strict_mode"),rm=Symbol.for("react.profiler"),sm=Symbol.for("react.provider"),lm=Symbol.for("react.context"),om=Symbol.for("react.forward_ref"),am=Symbol.for("react.suspense"),im=Symbol.for("react.memo"),cm=Symbol.for("react.lazy"),Xc=Symbol.iterator;function um(e){return e===null||typeof e!="object"?null:(e=Xc&&e[Xc]||e["@@iterator"],typeof e=="function"?e:null)}var Bd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ud=Object.assign,Hd={};function Yr(e,t,n){this.props=e,this.context=t,this.refs=Hd,this.updater=n||Bd}Yr.prototype.isReactComponent={};Yr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Yr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wd(){}Wd.prototype=Yr.prototype;function $i(e,t,n){this.props=e,this.context=t,this.refs=Hd,this.updater=n||Bd}var Fi=$i.prototype=new Wd;Fi.constructor=$i;Ud(Fi,Yr.prototype);Fi.isPureReactComponent=!0;var Kc=Array.isArray,Vd=Object.prototype.hasOwnProperty,Bi={current:null},Xd={key:!0,ref:!0,__self:!0,__source:!0};function Kd(e,t,n){var r,s={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)Vd.call(t,r)&&!Xd.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:qs,type:e,key:l,ref:a,props:s,_owner:Bi.current}}function dm(e,t){return{$$typeof:qs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ui(e){return typeof e=="object"&&e!==null&&e.$$typeof===qs}function fm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Yc=/\/+/g;function oa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fm(""+e.key):t.toString(36)}function Ll(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case qs:case em:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+oa(a,0):r,Kc(s)?(n="",e!=null&&(n=e.replace(Yc,"$&/")+"/"),Ll(s,t,n,"",function(u){return u})):s!=null&&(Ui(s)&&(s=dm(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Yc,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Kc(e))for(var i=0;i<e.length;i++){l=e[i];var c=r+oa(l,i);a+=Ll(l,t,n,c,s)}else if(c=um(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=r+oa(l,i++),a+=Ll(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ul(e,t,n){if(e==null)return e;var r=[],s=0;return Ll(e,r,"","",function(l){return t.call(n,l,s++)}),r}function pm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var at={current:null},Al={transition:null},hm={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:Al,ReactCurrentOwner:Bi};function Yd(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:ul,forEach:function(e,t,n){ul(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ul(e,function(){t++}),t},toArray:function(e){return ul(e,function(t){return t})||[]},only:function(e){if(!Ui(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ce.Component=Yr;ce.Fragment=tm;ce.Profiler=rm;ce.PureComponent=$i;ce.StrictMode=nm;ce.Suspense=am;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hm;ce.act=Yd;ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ud({},e.props),s=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=Bi.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Vd.call(t,c)&&!Xd.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var u=0;u<c;u++)i[u]=arguments[u+2];r.children=i}return{$$typeof:qs,type:e.type,key:s,ref:l,props:r,_owner:a}};ce.createContext=function(e){return e={$$typeof:lm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sm,_context:e},e.Consumer=e};ce.createElement=Kd;ce.createFactory=function(e){var t=Kd.bind(null,e);return t.type=e,t};ce.createRef=function(){return{current:null}};ce.forwardRef=function(e){return{$$typeof:om,render:e}};ce.isValidElement=Ui;ce.lazy=function(e){return{$$typeof:cm,_payload:{_status:-1,_result:e},_init:pm}};ce.memo=function(e,t){return{$$typeof:im,type:e,compare:t===void 0?null:t}};ce.startTransition=function(e){var t=Al.transition;Al.transition={};try{e()}finally{Al.transition=t}};ce.unstable_act=Yd;ce.useCallback=function(e,t){return at.current.useCallback(e,t)};ce.useContext=function(e){return at.current.useContext(e)};ce.useDebugValue=function(){};ce.useDeferredValue=function(e){return at.current.useDeferredValue(e)};ce.useEffect=function(e,t){return at.current.useEffect(e,t)};ce.useId=function(){return at.current.useId()};ce.useImperativeHandle=function(e,t,n){return at.current.useImperativeHandle(e,t,n)};ce.useInsertionEffect=function(e,t){return at.current.useInsertionEffect(e,t)};ce.useLayoutEffect=function(e,t){return at.current.useLayoutEffect(e,t)};ce.useMemo=function(e,t){return at.current.useMemo(e,t)};ce.useReducer=function(e,t,n){return at.current.useReducer(e,t,n)};ce.useRef=function(e){return at.current.useRef(e)};ce.useState=function(e){return at.current.useState(e)};ce.useSyncExternalStore=function(e,t,n){return at.current.useSyncExternalStore(e,t,n)};ce.useTransition=function(){return at.current.useTransition()};ce.version="18.3.1";Fd.exports=ce;var d=Fd.exports;const Me=Zh(d),mm=qh({__proto__:null,default:Me},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xm=d,gm=Symbol.for("react.element"),ym=Symbol.for("react.fragment"),vm=Object.prototype.hasOwnProperty,wm=xm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bm={key:!0,ref:!0,__self:!0,__source:!0};function Qd(e,t,n){var r,s={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)vm.call(t,r)&&!bm.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:gm,type:e,key:l,ref:a,props:s,_owner:wm.current}}Mo.Fragment=ym;Mo.jsx=Qd;Mo.jsxs=Qd;$d.exports=Mo;var o=$d.exports,Fa={},Gd={exports:{}},Ct={},Jd={exports:{}},qd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,W){var H=z.length;z.push(W);e:for(;0<H;){var G=H-1>>>1,K=z[G];if(0<s(K,W))z[G]=W,z[H]=K,H=G;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var W=z[0],H=z.pop();if(H!==W){z[0]=H;e:for(var G=0,K=z.length,Se=K>>>1;G<Se;){var ge=2*(G+1)-1,ee=z[ge],B=ge+1,ie=z[B];if(0>s(ee,H))B<K&&0>s(ie,ee)?(z[G]=ie,z[B]=H,G=B):(z[G]=ee,z[ge]=H,G=ge);else if(B<K&&0>s(ie,H))z[G]=ie,z[B]=H,G=B;else break e}}return W}function s(z,W){var H=z.sortIndex-W.sortIndex;return H!==0?H:z.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],u=[],p=1,f=null,h=3,x=!1,w=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(z){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=z)r(u),W.sortIndex=W.expirationTime,t(c,W);else break;W=n(u)}}function j(z){if(y=!1,v(z),!w)if(n(c)!==null)w=!0,oe(S);else{var W=n(u);W!==null&&ae(j,W.startTime-z)}}function S(z,W){w=!1,y&&(y=!1,g(E),E=-1),x=!0;var H=h;try{for(v(W),f=n(c);f!==null&&(!(f.expirationTime>W)||z&&!L());){var G=f.callback;if(typeof G=="function"){f.callback=null,h=f.priorityLevel;var K=G(f.expirationTime<=W);W=e.unstable_now(),typeof K=="function"?f.callback=K:f===n(c)&&r(c),v(W)}else r(c);f=n(c)}if(f!==null)var Se=!0;else{var ge=n(u);ge!==null&&ae(j,ge.startTime-W),Se=!1}return Se}finally{f=null,h=H,x=!1}}var C=!1,k=null,E=-1,D=5,P=-1;function L(){return!(e.unstable_now()-P<D)}function re(){if(k!==null){var z=e.unstable_now();P=z;var W=!0;try{W=k(!0,z)}finally{W?_():(C=!1,k=null)}}else C=!1}var _;if(typeof m=="function")_=function(){m(re)};else if(typeof MessageChannel!="undefined"){var T=new MessageChannel,V=T.port2;T.port1.onmessage=re,_=function(){V.postMessage(null)}}else _=function(){b(re,0)};function oe(z){k=z,C||(C=!0,_())}function ae(z,W){E=b(function(){z(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,oe(S))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(z){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var H=h;h=W;try{return z()}finally{h=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,W){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var H=h;h=z;try{return W()}finally{h=H}},e.unstable_scheduleCallback=function(z,W,H){var G=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?G+H:G):H=G,z){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=H+K,z={id:p++,callback:W,priorityLevel:z,startTime:H,expirationTime:K,sortIndex:-1},H>G?(z.sortIndex=H,t(u,z),n(c)===null&&z===n(u)&&(y?(g(E),E=-1):y=!0,ae(j,H-G))):(z.sortIndex=K,t(c,z),w||x||(w=!0,oe(S))),z},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(z){var W=h;return function(){var H=h;h=W;try{return z.apply(this,arguments)}finally{h=H}}}})(qd);Jd.exports=qd;var km=Jd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jm=d,Nt=km;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zd=new Set,Ds={};function lr(e,t){Lr(e,t),Lr(e+"Capture",t)}function Lr(e,t){for(Ds[e]=t,e=0;e<t.length;e++)Zd.add(t[e])}var dn=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Ba=Object.prototype.hasOwnProperty,Sm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qc={},Gc={};function Nm(e){return Ba.call(Gc,e)?!0:Ba.call(Qc,e)?!1:Sm.test(e)?Gc[e]=!0:(Qc[e]=!0,!1)}function Cm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Em(e,t,n,r){if(t===null||typeof t=="undefined"||Cm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function it(e,t,n,r,s,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ze[e]=new it(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ze[t]=new it(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ze[e]=new it(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ze[e]=new it(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ze[e]=new it(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ze[e]=new it(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ze[e]=new it(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ze[e]=new it(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ze[e]=new it(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hi=/[\-:]([a-z])/g;function Wi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Hi,Wi);Ze[t]=new it(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Hi,Wi);Ze[t]=new it(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Hi,Wi);Ze[t]=new it(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ze[e]=new it(e,1,!1,e.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new it("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ze[e]=new it(e,1,!1,e.toLowerCase(),null,!0,!0)});function Vi(e,t,n,r){var s=Ze.hasOwnProperty(t)?Ze[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Em(t,n,s,r)&&(n=null),r||s===null?Nm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var xn=jm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dl=Symbol.for("react.element"),xr=Symbol.for("react.portal"),gr=Symbol.for("react.fragment"),Xi=Symbol.for("react.strict_mode"),Ua=Symbol.for("react.profiler"),ef=Symbol.for("react.provider"),tf=Symbol.for("react.context"),Ki=Symbol.for("react.forward_ref"),Ha=Symbol.for("react.suspense"),Wa=Symbol.for("react.suspense_list"),Yi=Symbol.for("react.memo"),kn=Symbol.for("react.lazy"),nf=Symbol.for("react.offscreen"),Jc=Symbol.iterator;function as(e){return e===null||typeof e!="object"?null:(e=Jc&&e[Jc]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,aa;function ms(e){if(aa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);aa=t&&t[1]||""}return`
`+aa+e}var ia=!1;function ca(e,t){if(!e||ia)return"";ia=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),l=r.stack.split(`
`),a=s.length-1,i=l.length-1;1<=a&&0<=i&&s[a]!==l[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==l[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==l[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{ia=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ms(e):""}function Mm(e){switch(e.tag){case 5:return ms(e.type);case 16:return ms("Lazy");case 13:return ms("Suspense");case 19:return ms("SuspenseList");case 0:case 2:case 15:return e=ca(e.type,!1),e;case 11:return e=ca(e.type.render,!1),e;case 1:return e=ca(e.type,!0),e;default:return""}}function Va(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case gr:return"Fragment";case xr:return"Portal";case Ua:return"Profiler";case Xi:return"StrictMode";case Ha:return"Suspense";case Wa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case tf:return(e.displayName||"Context")+".Consumer";case ef:return(e._context.displayName||"Context")+".Provider";case Ki:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Yi:return t=e.displayName||null,t!==null?t:Va(e.type)||"Memo";case kn:t=e._payload,e=e._init;try{return Va(e(t))}catch(n){}}return null}function _m(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Va(t);case 8:return t===Xi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function An(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Tm(e){var t=rf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fl(e){e._valueTracker||(e._valueTracker=Tm(e))}function sf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=rf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Gl(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Xa(e,t){var n=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function qc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=An(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lf(e,t){t=t.checked,t!=null&&Vi(e,"checked",t,!1)}function Ka(e,t){lf(e,t);var n=An(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ya(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ya(e,t.type,An(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ya(e,t,n){(t!=="number"||Gl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var xs=Array.isArray;function Tr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+An(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Qa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function eu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(R(92));if(xs(n)){if(1<n.length)throw Error(R(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:An(n)}}function of(e,t){var n=An(t.value),r=An(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function tu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function af(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ga(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?af(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var pl,cf=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(pl=pl||document.createElement("div"),pl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var vs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dm=["Webkit","ms","Moz","O"];Object.keys(vs).forEach(function(e){Dm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),vs[t]=vs[e]})});function uf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||vs.hasOwnProperty(e)&&vs[e]?(""+t).trim():t+"px"}function df(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=uf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Rm=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ja(e,t){if(t){if(Rm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function qa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Za=null;function Qi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ei=null,Dr=null,Rr=null;function nu(e){if(e=tl(e)){if(typeof ei!="function")throw Error(R(280));var t=e.stateNode;t&&(t=Po(t),ei(e.stateNode,e.type,t))}}function ff(e){Dr?Rr?Rr.push(e):Rr=[e]:Dr=e}function pf(){if(Dr){var e=Dr,t=Rr;if(Rr=Dr=null,nu(e),t)for(e=0;e<t.length;e++)nu(t[e])}}function hf(e,t){return e(t)}function mf(){}var ua=!1;function xf(e,t,n){if(ua)return e(t,n);ua=!0;try{return hf(e,t,n)}finally{ua=!1,(Dr!==null||Rr!==null)&&(mf(),pf())}}function Ps(e,t){var n=e.stateNode;if(n===null)return null;var r=Po(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(R(231,t,typeof n));return n}var ti=!1;if(dn)try{var is={};Object.defineProperty(is,"passive",{get:function(){ti=!0}}),window.addEventListener("test",is,is),window.removeEventListener("test",is,is)}catch(e){ti=!1}function Pm(e,t,n,r,s,l,a,i,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(p){this.onError(p)}}var ws=!1,Jl=null,ql=!1,ni=null,zm={onError:function(e){ws=!0,Jl=e}};function Im(e,t,n,r,s,l,a,i,c){ws=!1,Jl=null,Pm.apply(zm,arguments)}function Om(e,t,n,r,s,l,a,i,c){if(Im.apply(this,arguments),ws){if(ws){var u=Jl;ws=!1,Jl=null}else throw Error(R(198));ql||(ql=!0,ni=u)}}function or(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function gf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ru(e){if(or(e)!==e)throw Error(R(188))}function Lm(e){var t=e.alternate;if(!t){if(t=or(e),t===null)throw Error(R(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return ru(s),e;if(l===r)return ru(s),t;l=l.sibling}throw Error(R(188))}if(n.return!==r.return)n=s,r=l;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=l;break}if(i===r){a=!0,r=s,n=l;break}i=i.sibling}if(!a){for(i=l.child;i;){if(i===n){a=!0,n=l,r=s;break}if(i===r){a=!0,r=l,n=s;break}i=i.sibling}if(!a)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?e:t}function yf(e){return e=Lm(e),e!==null?vf(e):null}function vf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vf(e);if(t!==null)return t;e=e.sibling}return null}var wf=Nt.unstable_scheduleCallback,su=Nt.unstable_cancelCallback,Am=Nt.unstable_shouldYield,$m=Nt.unstable_requestPaint,$e=Nt.unstable_now,Fm=Nt.unstable_getCurrentPriorityLevel,Gi=Nt.unstable_ImmediatePriority,bf=Nt.unstable_UserBlockingPriority,Zl=Nt.unstable_NormalPriority,Bm=Nt.unstable_LowPriority,kf=Nt.unstable_IdlePriority,_o=null,tn=null;function Um(e){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(_o,e,void 0,(e.current.flags&128)===128)}catch(t){}}var Wt=Math.clz32?Math.clz32:Vm,Hm=Math.log,Wm=Math.LN2;function Vm(e){return e>>>=0,e===0?32:31-(Hm(e)/Wm|0)|0}var hl=64,ml=4194304;function gs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function eo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=gs(i):(l&=a,l!==0&&(r=gs(l)))}else a=n&~s,a!==0?r=gs(a):l!==0&&(r=gs(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Wt(t),s=1<<n,r|=e[n],t&=~s;return r}function Xm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Km(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-Wt(l),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=Xm(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function ri(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jf(){var e=hl;return hl<<=1,!(hl&4194240)&&(hl=64),e}function da(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Zs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wt(t),e[t]=n}function Ym(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Wt(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function Ji(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Wt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var je=0;function Sf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Nf,qi,Cf,Ef,Mf,si=!1,xl=[],Tn=null,Dn=null,Rn=null,zs=new Map,Is=new Map,Nn=[],Qm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lu(e,t){switch(e){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":zs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(t.pointerId)}}function cs(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=tl(t),t!==null&&qi(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Gm(e,t,n,r,s){switch(t){case"focusin":return Tn=cs(Tn,e,t,n,r,s),!0;case"dragenter":return Dn=cs(Dn,e,t,n,r,s),!0;case"mouseover":return Rn=cs(Rn,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return zs.set(l,cs(zs.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,Is.set(l,cs(Is.get(l)||null,e,t,n,r,s)),!0}return!1}function _f(e){var t=Kn(e.target);if(t!==null){var n=or(t);if(n!==null){if(t=n.tag,t===13){if(t=gf(n),t!==null){e.blockedOn=t,Mf(e.priority,function(){Cf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $l(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=li(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Za=r,n.target.dispatchEvent(r),Za=null}else return t=tl(n),t!==null&&qi(t),e.blockedOn=n,!1;t.shift()}return!0}function ou(e,t,n){$l(e)&&n.delete(t)}function Jm(){si=!1,Tn!==null&&$l(Tn)&&(Tn=null),Dn!==null&&$l(Dn)&&(Dn=null),Rn!==null&&$l(Rn)&&(Rn=null),zs.forEach(ou),Is.forEach(ou)}function us(e,t){e.blockedOn===t&&(e.blockedOn=null,si||(si=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,Jm)))}function Os(e){function t(s){return us(s,e)}if(0<xl.length){us(xl[0],e);for(var n=1;n<xl.length;n++){var r=xl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Tn!==null&&us(Tn,e),Dn!==null&&us(Dn,e),Rn!==null&&us(Rn,e),zs.forEach(t),Is.forEach(t),n=0;n<Nn.length;n++)r=Nn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Nn.length&&(n=Nn[0],n.blockedOn===null);)_f(n),n.blockedOn===null&&Nn.shift()}var Pr=xn.ReactCurrentBatchConfig,to=!0;function qm(e,t,n,r){var s=je,l=Pr.transition;Pr.transition=null;try{je=1,Zi(e,t,n,r)}finally{je=s,Pr.transition=l}}function Zm(e,t,n,r){var s=je,l=Pr.transition;Pr.transition=null;try{je=4,Zi(e,t,n,r)}finally{je=s,Pr.transition=l}}function Zi(e,t,n,r){if(to){var s=li(e,t,n,r);if(s===null)ba(e,t,r,no,n),lu(e,r);else if(Gm(s,e,t,n,r))r.stopPropagation();else if(lu(e,r),t&4&&-1<Qm.indexOf(e)){for(;s!==null;){var l=tl(s);if(l!==null&&Nf(l),l=li(e,t,n,r),l===null&&ba(e,t,r,no,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else ba(e,t,r,null,n)}}var no=null;function li(e,t,n,r){if(no=null,e=Qi(r),e=Kn(e),e!==null)if(t=or(e),t===null)e=null;else if(n=t.tag,n===13){if(e=gf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return no=e,null}function Tf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fm()){case Gi:return 1;case bf:return 4;case Zl:case Bm:return 16;case kf:return 536870912;default:return 16}default:return 16}}var En=null,ec=null,Fl=null;function Df(){if(Fl)return Fl;var e,t=ec,n=t.length,r,s="value"in En?En.value:En.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[l-r];r++);return Fl=s.slice(e,1<r?1-r:void 0)}function Bl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gl(){return!0}function au(){return!1}function Et(e){function t(n,r,s,l,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?gl:au,this.isPropagationStopped=au,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gl)},persist:function(){},isPersistent:gl}),t}var Qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tc=Et(Qr),el=Oe({},Qr,{view:0,detail:0}),ex=Et(el),fa,pa,ds,To=Oe({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ds&&(ds&&e.type==="mousemove"?(fa=e.screenX-ds.screenX,pa=e.screenY-ds.screenY):pa=fa=0,ds=e),fa)},movementY:function(e){return"movementY"in e?e.movementY:pa}}),iu=Et(To),tx=Oe({},To,{dataTransfer:0}),nx=Et(tx),rx=Oe({},el,{relatedTarget:0}),ha=Et(rx),sx=Oe({},Qr,{animationName:0,elapsedTime:0,pseudoElement:0}),lx=Et(sx),ox=Oe({},Qr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ax=Et(ox),ix=Oe({},Qr,{data:0}),cu=Et(ix),cx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ux={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dx[e])?!!t[e]:!1}function nc(){return fx}var px=Oe({},el,{key:function(e){if(e.key){var t=cx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ux[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nc,charCode:function(e){return e.type==="keypress"?Bl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hx=Et(px),mx=Oe({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uu=Et(mx),xx=Oe({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nc}),gx=Et(xx),yx=Oe({},Qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),vx=Et(yx),wx=Oe({},To,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bx=Et(wx),kx=[9,13,27,32],rc=dn&&"CompositionEvent"in window,bs=null;dn&&"documentMode"in document&&(bs=document.documentMode);var jx=dn&&"TextEvent"in window&&!bs,Rf=dn&&(!rc||bs&&8<bs&&11>=bs),du=" ",fu=!1;function Pf(e,t){switch(e){case"keyup":return kx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yr=!1;function Sx(e,t){switch(e){case"compositionend":return zf(t);case"keypress":return t.which!==32?null:(fu=!0,du);case"textInput":return e=t.data,e===du&&fu?null:e;default:return null}}function Nx(e,t){if(yr)return e==="compositionend"||!rc&&Pf(e,t)?(e=Df(),Fl=ec=En=null,yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rf&&t.locale!=="ko"?null:t.data;default:return null}}var Cx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Cx[e.type]:t==="textarea"}function If(e,t,n,r){ff(r),t=ro(t,"onChange"),0<t.length&&(n=new tc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ks=null,Ls=null;function Ex(e){Xf(e,0)}function Do(e){var t=br(e);if(sf(t))return e}function Mx(e,t){if(e==="change")return t}var Of=!1;if(dn){var ma;if(dn){var xa="oninput"in document;if(!xa){var hu=document.createElement("div");hu.setAttribute("oninput","return;"),xa=typeof hu.oninput=="function"}ma=xa}else ma=!1;Of=ma&&(!document.documentMode||9<document.documentMode)}function mu(){ks&&(ks.detachEvent("onpropertychange",Lf),Ls=ks=null)}function Lf(e){if(e.propertyName==="value"&&Do(Ls)){var t=[];If(t,Ls,e,Qi(e)),xf(Ex,t)}}function _x(e,t,n){e==="focusin"?(mu(),ks=t,Ls=n,ks.attachEvent("onpropertychange",Lf)):e==="focusout"&&mu()}function Tx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Do(Ls)}function Dx(e,t){if(e==="click")return Do(t)}function Rx(e,t){if(e==="input"||e==="change")return Do(t)}function Px(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xt=typeof Object.is=="function"?Object.is:Px;function As(e,t){if(Xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ba.call(t,s)||!Xt(e[s],t[s]))return!1}return!0}function xu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gu(e,t){var n=xu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xu(n)}}function Af(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Af(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $f(){for(var e=window,t=Gl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=Gl(e.document)}return t}function sc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zx(e){var t=$f(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Af(n.ownerDocument.documentElement,n)){if(r!==null&&sc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=gu(n,l);var a=gu(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ix=dn&&"documentMode"in document&&11>=document.documentMode,vr=null,oi=null,js=null,ai=!1;function yu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ai||vr==null||vr!==Gl(r)||(r=vr,"selectionStart"in r&&sc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),js&&As(js,r)||(js=r,r=ro(oi,"onSelect"),0<r.length&&(t=new tc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function yl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:yl("Animation","AnimationEnd"),animationiteration:yl("Animation","AnimationIteration"),animationstart:yl("Animation","AnimationStart"),transitionend:yl("Transition","TransitionEnd")},ga={},Ff={};dn&&(Ff=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);function Ro(e){if(ga[e])return ga[e];if(!wr[e])return e;var t=wr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ff)return ga[e]=t[n];return e}var Bf=Ro("animationend"),Uf=Ro("animationiteration"),Hf=Ro("animationstart"),Wf=Ro("transitionend"),Vf=new Map,vu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fn(e,t){Vf.set(e,t),lr(t,[e])}for(var ya=0;ya<vu.length;ya++){var va=vu[ya],Ox=va.toLowerCase(),Lx=va[0].toUpperCase()+va.slice(1);Fn(Ox,"on"+Lx)}Fn(Bf,"onAnimationEnd");Fn(Uf,"onAnimationIteration");Fn(Hf,"onAnimationStart");Fn("dblclick","onDoubleClick");Fn("focusin","onFocus");Fn("focusout","onBlur");Fn(Wf,"onTransitionEnd");Lr("onMouseEnter",["mouseout","mouseover"]);Lr("onMouseLeave",["mouseout","mouseover"]);Lr("onPointerEnter",["pointerout","pointerover"]);Lr("onPointerLeave",["pointerout","pointerover"]);lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ax=new Set("cancel close invalid load scroll toggle".split(" ").concat(ys));function wu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Om(r,t,void 0,e),e.currentTarget=null}function Xf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,u=i.currentTarget;if(i=i.listener,c!==l&&s.isPropagationStopped())break e;wu(s,i,u),l=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,u=i.currentTarget,i=i.listener,c!==l&&s.isPropagationStopped())break e;wu(s,i,u),l=c}}}if(ql)throw e=ni,ql=!1,ni=null,e}function Ee(e,t){var n=t[fi];n===void 0&&(n=t[fi]=new Set);var r=e+"__bubble";n.has(r)||(Kf(t,e,2,!1),n.add(r))}function wa(e,t,n){var r=0;t&&(r|=4),Kf(n,e,r,t)}var vl="_reactListening"+Math.random().toString(36).slice(2);function $s(e){if(!e[vl]){e[vl]=!0,Zd.forEach(function(n){n!=="selectionchange"&&(Ax.has(n)||wa(n,!1,e),wa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vl]||(t[vl]=!0,wa("selectionchange",!1,t))}}function Kf(e,t,n,r){switch(Tf(t)){case 1:var s=qm;break;case 4:s=Zm;break;default:s=Zi}n=s.bind(null,t,n,e),s=void 0,!ti||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ba(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=Kn(i),a===null)return;if(c=a.tag,c===5||c===6){r=l=a;continue e}i=i.parentNode}}r=r.return}xf(function(){var u=l,p=Qi(n),f=[];e:{var h=Vf.get(e);if(h!==void 0){var x=tc,w=e;switch(e){case"keypress":if(Bl(n)===0)break e;case"keydown":case"keyup":x=hx;break;case"focusin":w="focus",x=ha;break;case"focusout":w="blur",x=ha;break;case"beforeblur":case"afterblur":x=ha;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=iu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=nx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=gx;break;case Bf:case Uf:case Hf:x=lx;break;case Wf:x=vx;break;case"scroll":x=ex;break;case"wheel":x=bx;break;case"copy":case"cut":case"paste":x=ax;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=uu}var y=(t&4)!==0,b=!y&&e==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var m=u,v;m!==null;){v=m;var j=v.stateNode;if(v.tag===5&&j!==null&&(v=j,g!==null&&(j=Ps(m,g),j!=null&&y.push(Fs(m,j,v)))),b)break;m=m.return}0<y.length&&(h=new x(h,w,null,n,p),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==Za&&(w=n.relatedTarget||n.fromElement)&&(Kn(w)||w[fn]))break e;if((x||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,x?(w=n.relatedTarget||n.toElement,x=u,w=w?Kn(w):null,w!==null&&(b=or(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=u),x!==w)){if(y=iu,j="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(y=uu,j="onPointerLeave",g="onPointerEnter",m="pointer"),b=x==null?h:br(x),v=w==null?h:br(w),h=new y(j,m+"leave",x,n,p),h.target=b,h.relatedTarget=v,j=null,Kn(p)===u&&(y=new y(g,m+"enter",w,n,p),y.target=v,y.relatedTarget=b,j=y),b=j,x&&w)t:{for(y=x,g=w,m=0,v=y;v;v=fr(v))m++;for(v=0,j=g;j;j=fr(j))v++;for(;0<m-v;)y=fr(y),m--;for(;0<v-m;)g=fr(g),v--;for(;m--;){if(y===g||g!==null&&y===g.alternate)break t;y=fr(y),g=fr(g)}y=null}else y=null;x!==null&&bu(f,h,x,y,!1),w!==null&&b!==null&&bu(f,b,w,y,!0)}}e:{if(h=u?br(u):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var S=Mx;else if(pu(h))if(Of)S=Rx;else{S=Tx;var C=_x}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=Dx);if(S&&(S=S(e,u))){If(f,S,n,p);break e}C&&C(e,h,u),e==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&Ya(h,"number",h.value)}switch(C=u?br(u):window,e){case"focusin":(pu(C)||C.contentEditable==="true")&&(vr=C,oi=u,js=null);break;case"focusout":js=oi=vr=null;break;case"mousedown":ai=!0;break;case"contextmenu":case"mouseup":case"dragend":ai=!1,yu(f,n,p);break;case"selectionchange":if(Ix)break;case"keydown":case"keyup":yu(f,n,p)}var k;if(rc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else yr?Pf(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Rf&&n.locale!=="ko"&&(yr||E!=="onCompositionStart"?E==="onCompositionEnd"&&yr&&(k=Df()):(En=p,ec="value"in En?En.value:En.textContent,yr=!0)),C=ro(u,E),0<C.length&&(E=new cu(E,e,null,n,p),f.push({event:E,listeners:C}),k?E.data=k:(k=zf(n),k!==null&&(E.data=k)))),(k=jx?Sx(e,n):Nx(e,n))&&(u=ro(u,"onBeforeInput"),0<u.length&&(p=new cu("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:u}),p.data=k))}Xf(f,t)})}function Fs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ro(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=Ps(e,n),l!=null&&r.unshift(Fs(e,l,s)),l=Ps(e,t),l!=null&&r.push(Fs(e,l,s))),e=e.return}return r}function fr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bu(e,t,n,r,s){for(var l=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,u=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&u!==null&&(i=u,s?(c=Ps(n,l),c!=null&&a.unshift(Fs(n,c,i))):s||(c=Ps(n,l),c!=null&&a.push(Fs(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var $x=/\r\n?/g,Fx=/\u0000|\uFFFD/g;function ku(e){return(typeof e=="string"?e:""+e).replace($x,`
`).replace(Fx,"")}function wl(e,t,n){if(t=ku(t),ku(e)!==t&&n)throw Error(R(425))}function so(){}var ii=null,ci=null;function ui(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var di=typeof setTimeout=="function"?setTimeout:void 0,Bx=typeof clearTimeout=="function"?clearTimeout:void 0,ju=typeof Promise=="function"?Promise:void 0,Ux=typeof queueMicrotask=="function"?queueMicrotask:typeof ju!="undefined"?function(e){return ju.resolve(null).then(e).catch(Hx)}:di;function Hx(e){setTimeout(function(){throw e})}function ka(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Os(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Os(t)}function Pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Su(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),en="__reactFiber$"+Gr,Bs="__reactProps$"+Gr,fn="__reactContainer$"+Gr,fi="__reactEvents$"+Gr,Wx="__reactListeners$"+Gr,Vx="__reactHandles$"+Gr;function Kn(e){var t=e[en];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fn]||n[en]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Su(e);e!==null;){if(n=e[en])return n;e=Su(e)}return t}e=n,n=e.parentNode}return null}function tl(e){return e=e[en]||e[fn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function br(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function Po(e){return e[Bs]||null}var pi=[],kr=-1;function Bn(e){return{current:e}}function _e(e){0>kr||(e.current=pi[kr],pi[kr]=null,kr--)}function Ce(e,t){kr++,pi[kr]=e.current,e.current=t}var $n={},rt=Bn($n),mt=Bn(!1),Zn=$n;function Ar(e,t){var n=e.type.contextTypes;if(!n)return $n;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function xt(e){return e=e.childContextTypes,e!=null}function lo(){_e(mt),_e(rt)}function Nu(e,t,n){if(rt.current!==$n)throw Error(R(168));Ce(rt,t),Ce(mt,n)}function Yf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(R(108,_m(e)||"Unknown",s));return Oe({},n,r)}function oo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$n,Zn=rt.current,Ce(rt,e),Ce(mt,mt.current),!0}function Cu(e,t,n){var r=e.stateNode;if(!r)throw Error(R(169));n?(e=Yf(e,t,Zn),r.__reactInternalMemoizedMergedChildContext=e,_e(mt),_e(rt),Ce(rt,e)):_e(mt),Ce(mt,n)}var on=null,zo=!1,ja=!1;function Qf(e){on===null?on=[e]:on.push(e)}function Xx(e){zo=!0,Qf(e)}function Un(){if(!ja&&on!==null){ja=!0;var e=0,t=je;try{var n=on;for(je=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}on=null,zo=!1}catch(s){throw on!==null&&(on=on.slice(e+1)),wf(Gi,Un),s}finally{je=t,ja=!1}}return null}var jr=[],Sr=0,ao=null,io=0,Rt=[],Pt=0,er=null,an=1,cn="";function Vn(e,t){jr[Sr++]=io,jr[Sr++]=ao,ao=e,io=t}function Gf(e,t,n){Rt[Pt++]=an,Rt[Pt++]=cn,Rt[Pt++]=er,er=e;var r=an;e=cn;var s=32-Wt(r)-1;r&=~(1<<s),n+=1;var l=32-Wt(t)+s;if(30<l){var a=s-s%5;l=(r&(1<<a)-1).toString(32),r>>=a,s-=a,an=1<<32-Wt(t)+s|n<<s|r,cn=l+e}else an=1<<l|n<<s|r,cn=e}function lc(e){e.return!==null&&(Vn(e,1),Gf(e,1,0))}function oc(e){for(;e===ao;)ao=jr[--Sr],jr[Sr]=null,io=jr[--Sr],jr[Sr]=null;for(;e===er;)er=Rt[--Pt],Rt[Pt]=null,cn=Rt[--Pt],Rt[Pt]=null,an=Rt[--Pt],Rt[Pt]=null}var St=null,jt=null,Te=!1,Ht=null;function Jf(e,t){var n=zt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Eu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,St=e,jt=Pn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,St=e,jt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=er!==null?{id:an,overflow:cn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=zt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,St=e,jt=null,!0):!1;default:return!1}}function hi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mi(e){if(Te){var t=jt;if(t){var n=t;if(!Eu(e,t)){if(hi(e))throw Error(R(418));t=Pn(n.nextSibling);var r=St;t&&Eu(e,t)?Jf(r,n):(e.flags=e.flags&-4097|2,Te=!1,St=e)}}else{if(hi(e))throw Error(R(418));e.flags=e.flags&-4097|2,Te=!1,St=e}}}function Mu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;St=e}function bl(e){if(e!==St)return!1;if(!Te)return Mu(e),Te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ui(e.type,e.memoizedProps)),t&&(t=jt)){if(hi(e))throw qf(),Error(R(418));for(;t;)Jf(e,t),t=Pn(t.nextSibling)}if(Mu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){jt=Pn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}jt=null}}else jt=St?Pn(e.stateNode.nextSibling):null;return!0}function qf(){for(var e=jt;e;)e=Pn(e.nextSibling)}function $r(){jt=St=null,Te=!1}function ac(e){Ht===null?Ht=[e]:Ht.push(e)}var Kx=xn.ReactCurrentBatchConfig;function fs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var i=s.refs;a===null?delete i[l]:i[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,e))}return e}function kl(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _u(e){var t=e._init;return t(e._payload)}function Zf(e){function t(g,m){if(e){var v=g.deletions;v===null?(g.deletions=[m],g.flags|=16):v.push(m)}}function n(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=Ln(g,m),g.index=0,g.sibling=null,g}function l(g,m,v){return g.index=v,e?(v=g.alternate,v!==null?(v=v.index,v<m?(g.flags|=2,m):v):(g.flags|=2,m)):(g.flags|=1048576,m)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,m,v,j){return m===null||m.tag!==6?(m=Ta(v,g.mode,j),m.return=g,m):(m=s(m,v),m.return=g,m)}function c(g,m,v,j){var S=v.type;return S===gr?p(g,m,v.props.children,j,v.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===kn&&_u(S)===m.type)?(j=s(m,v.props),j.ref=fs(g,m,v),j.return=g,j):(j=Yl(v.type,v.key,v.props,null,g.mode,j),j.ref=fs(g,m,v),j.return=g,j)}function u(g,m,v,j){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Da(v,g.mode,j),m.return=g,m):(m=s(m,v.children||[]),m.return=g,m)}function p(g,m,v,j,S){return m===null||m.tag!==7?(m=Jn(v,g.mode,j,S),m.return=g,m):(m=s(m,v),m.return=g,m)}function f(g,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ta(""+m,g.mode,v),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case dl:return v=Yl(m.type,m.key,m.props,null,g.mode,v),v.ref=fs(g,null,m),v.return=g,v;case xr:return m=Da(m,g.mode,v),m.return=g,m;case kn:var j=m._init;return f(g,j(m._payload),v)}if(xs(m)||as(m))return m=Jn(m,g.mode,v,null),m.return=g,m;kl(g,m)}return null}function h(g,m,v,j){var S=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:i(g,m,""+v,j);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case dl:return v.key===S?c(g,m,v,j):null;case xr:return v.key===S?u(g,m,v,j):null;case kn:return S=v._init,h(g,m,S(v._payload),j)}if(xs(v)||as(v))return S!==null?null:p(g,m,v,j,null);kl(g,v)}return null}function x(g,m,v,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return g=g.get(v)||null,i(m,g,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case dl:return g=g.get(j.key===null?v:j.key)||null,c(m,g,j,S);case xr:return g=g.get(j.key===null?v:j.key)||null,u(m,g,j,S);case kn:var C=j._init;return x(g,m,v,C(j._payload),S)}if(xs(j)||as(j))return g=g.get(v)||null,p(m,g,j,S,null);kl(m,j)}return null}function w(g,m,v,j){for(var S=null,C=null,k=m,E=m=0,D=null;k!==null&&E<v.length;E++){k.index>E?(D=k,k=null):D=k.sibling;var P=h(g,k,v[E],j);if(P===null){k===null&&(k=D);break}e&&k&&P.alternate===null&&t(g,k),m=l(P,m,E),C===null?S=P:C.sibling=P,C=P,k=D}if(E===v.length)return n(g,k),Te&&Vn(g,E),S;if(k===null){for(;E<v.length;E++)k=f(g,v[E],j),k!==null&&(m=l(k,m,E),C===null?S=k:C.sibling=k,C=k);return Te&&Vn(g,E),S}for(k=r(g,k);E<v.length;E++)D=x(k,g,E,v[E],j),D!==null&&(e&&D.alternate!==null&&k.delete(D.key===null?E:D.key),m=l(D,m,E),C===null?S=D:C.sibling=D,C=D);return e&&k.forEach(function(L){return t(g,L)}),Te&&Vn(g,E),S}function y(g,m,v,j){var S=as(v);if(typeof S!="function")throw Error(R(150));if(v=S.call(v),v==null)throw Error(R(151));for(var C=S=null,k=m,E=m=0,D=null,P=v.next();k!==null&&!P.done;E++,P=v.next()){k.index>E?(D=k,k=null):D=k.sibling;var L=h(g,k,P.value,j);if(L===null){k===null&&(k=D);break}e&&k&&L.alternate===null&&t(g,k),m=l(L,m,E),C===null?S=L:C.sibling=L,C=L,k=D}if(P.done)return n(g,k),Te&&Vn(g,E),S;if(k===null){for(;!P.done;E++,P=v.next())P=f(g,P.value,j),P!==null&&(m=l(P,m,E),C===null?S=P:C.sibling=P,C=P);return Te&&Vn(g,E),S}for(k=r(g,k);!P.done;E++,P=v.next())P=x(k,g,E,P.value,j),P!==null&&(e&&P.alternate!==null&&k.delete(P.key===null?E:P.key),m=l(P,m,E),C===null?S=P:C.sibling=P,C=P);return e&&k.forEach(function(re){return t(g,re)}),Te&&Vn(g,E),S}function b(g,m,v,j){if(typeof v=="object"&&v!==null&&v.type===gr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case dl:e:{for(var S=v.key,C=m;C!==null;){if(C.key===S){if(S=v.type,S===gr){if(C.tag===7){n(g,C.sibling),m=s(C,v.props.children),m.return=g,g=m;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===kn&&_u(S)===C.type){n(g,C.sibling),m=s(C,v.props),m.ref=fs(g,C,v),m.return=g,g=m;break e}n(g,C);break}else t(g,C);C=C.sibling}v.type===gr?(m=Jn(v.props.children,g.mode,j,v.key),m.return=g,g=m):(j=Yl(v.type,v.key,v.props,null,g.mode,j),j.ref=fs(g,m,v),j.return=g,g=j)}return a(g);case xr:e:{for(C=v.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(g,m.sibling),m=s(m,v.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else t(g,m);m=m.sibling}m=Da(v,g.mode,j),m.return=g,g=m}return a(g);case kn:return C=v._init,b(g,m,C(v._payload),j)}if(xs(v))return w(g,m,v,j);if(as(v))return y(g,m,v,j);kl(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,v),m.return=g,g=m):(n(g,m),m=Ta(v,g.mode,j),m.return=g,g=m),a(g)):n(g,m)}return b}var Fr=Zf(!0),ep=Zf(!1),co=Bn(null),uo=null,Nr=null,ic=null;function cc(){ic=Nr=uo=null}function uc(e){var t=co.current;_e(co),e._currentValue=t}function xi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function zr(e,t){uo=e,ic=Nr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ht=!0),e.firstContext=null)}function Ot(e){var t=e._currentValue;if(ic!==e)if(e={context:e,memoizedValue:t,next:null},Nr===null){if(uo===null)throw Error(R(308));Nr=e,uo.dependencies={lanes:0,firstContext:e}}else Nr=Nr.next=e;return t}var Yn=null;function dc(e){Yn===null?Yn=[e]:Yn.push(e)}function tp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,dc(t)):(n.next=s.next,s.next=n),t.interleaved=n,pn(e,r)}function pn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var jn=!1;function fc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function np(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function un(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,pn(e,n)}return s=r.interleaved,s===null?(t.next=t,dc(r)):(t.next=s.next,s.next=t),r.interleaved=t,pn(e,n)}function Ul(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ji(e,n)}}function Tu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fo(e,t,n,r){var s=e.updateQueue;jn=!1;var l=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,u=c.next;c.next=null,a===null?l=u:a.next=u,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,i=p.lastBaseUpdate,i!==a&&(i===null?p.firstBaseUpdate=u:i.next=u,p.lastBaseUpdate=c))}if(l!==null){var f=s.baseState;a=0,p=u=c=null,i=l;do{var h=i.lane,x=i.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var w=e,y=i;switch(h=t,x=n,y.tag){case 1:if(w=y.payload,typeof w=="function"){f=w.call(x,f,h);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,h=typeof w=="function"?w.call(x,f,h):w,h==null)break e;f=Oe({},f,h);break e;case 2:jn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[i]:h.push(i))}else x={eventTime:x,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},p===null?(u=p=x,c=f):p=p.next=x,a|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;h=i,i=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);nr|=a,e.lanes=a,e.memoizedState=f}}function Du(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(R(191,s));s.call(r)}}}var nl={},nn=Bn(nl),Us=Bn(nl),Hs=Bn(nl);function Qn(e){if(e===nl)throw Error(R(174));return e}function pc(e,t){switch(Ce(Hs,t),Ce(Us,e),Ce(nn,nl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ga(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ga(t,e)}_e(nn),Ce(nn,t)}function Br(){_e(nn),_e(Us),_e(Hs)}function rp(e){Qn(Hs.current);var t=Qn(nn.current),n=Ga(t,e.type);t!==n&&(Ce(Us,e),Ce(nn,n))}function hc(e){Us.current===e&&(_e(nn),_e(Us))}var ze=Bn(0);function po(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Sa=[];function mc(){for(var e=0;e<Sa.length;e++)Sa[e]._workInProgressVersionPrimary=null;Sa.length=0}var Hl=xn.ReactCurrentDispatcher,Na=xn.ReactCurrentBatchConfig,tr=0,Ie=null,Ue=null,Ke=null,ho=!1,Ss=!1,Ws=0,Yx=0;function et(){throw Error(R(321))}function xc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xt(e[n],t[n]))return!1;return!0}function gc(e,t,n,r,s,l){if(tr=l,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Hl.current=e===null||e.memoizedState===null?qx:Zx,e=n(r,s),Ss){l=0;do{if(Ss=!1,Ws=0,25<=l)throw Error(R(301));l+=1,Ke=Ue=null,t.updateQueue=null,Hl.current=eg,e=n(r,s)}while(Ss)}if(Hl.current=mo,t=Ue!==null&&Ue.next!==null,tr=0,Ke=Ue=Ie=null,ho=!1,t)throw Error(R(300));return e}function yc(){var e=Ws!==0;return Ws=0,e}function Zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Ie.memoizedState=Ke=e:Ke=Ke.next=e,Ke}function Lt(){if(Ue===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=Ke===null?Ie.memoizedState:Ke.next;if(t!==null)Ke=t,Ue=e;else{if(e===null)throw Error(R(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Ke===null?Ie.memoizedState=Ke=e:Ke=Ke.next=e}return Ke}function Vs(e,t){return typeof t=="function"?t(e):t}function Ca(e){var t=Lt(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=Ue,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var a=s.next;s.next=l.next,l.next=a}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var i=a=null,c=null,u=l;do{var p=u.lane;if((tr&p)===p)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(i=c=f,a=r):c=c.next=f,Ie.lanes|=p,nr|=p}u=u.next}while(u!==null&&u!==l);c===null?a=r:c.next=i,Xt(r,t.memoizedState)||(ht=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,Ie.lanes|=l,nr|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ea(e){var t=Lt(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do l=e(l,a.action),a=a.next;while(a!==s);Xt(l,t.memoizedState)||(ht=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function sp(){}function lp(e,t){var n=Ie,r=Lt(),s=t(),l=!Xt(r.memoizedState,s);if(l&&(r.memoizedState=s,ht=!0),r=r.queue,vc(ip.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,Xs(9,ap.bind(null,n,r,s,t),void 0,null),Qe===null)throw Error(R(349));tr&30||op(n,t,s)}return s}function op(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ap(e,t,n,r){t.value=n,t.getSnapshot=r,cp(t)&&up(e)}function ip(e,t,n){return n(function(){cp(t)&&up(e)})}function cp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xt(e,n)}catch(r){return!0}}function up(e){var t=pn(e,1);t!==null&&Vt(t,e,1,-1)}function Ru(e){var t=Zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:e},t.queue=e,e=e.dispatch=Jx.bind(null,Ie,e),[t.memoizedState,e]}function Xs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function dp(){return Lt().memoizedState}function Wl(e,t,n,r){var s=Zt();Ie.flags|=e,s.memoizedState=Xs(1|t,n,void 0,r===void 0?null:r)}function Io(e,t,n,r){var s=Lt();r=r===void 0?null:r;var l=void 0;if(Ue!==null){var a=Ue.memoizedState;if(l=a.destroy,r!==null&&xc(r,a.deps)){s.memoizedState=Xs(t,n,l,r);return}}Ie.flags|=e,s.memoizedState=Xs(1|t,n,l,r)}function Pu(e,t){return Wl(8390656,8,e,t)}function vc(e,t){return Io(2048,8,e,t)}function fp(e,t){return Io(4,2,e,t)}function pp(e,t){return Io(4,4,e,t)}function hp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mp(e,t,n){return n=n!=null?n.concat([e]):null,Io(4,4,hp.bind(null,t,e),n)}function wc(){}function xp(e,t){var n=Lt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function gp(e,t){var n=Lt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function yp(e,t,n){return tr&21?(Xt(n,t)||(n=jf(),Ie.lanes|=n,nr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=n)}function Qx(e,t){var n=je;je=n!==0&&4>n?n:4,e(!0);var r=Na.transition;Na.transition={};try{e(!1),t()}finally{je=n,Na.transition=r}}function vp(){return Lt().memoizedState}function Gx(e,t,n){var r=On(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wp(e))bp(t,n);else if(n=tp(e,t,n,r),n!==null){var s=ot();Vt(n,e,r,s),kp(n,t,r)}}function Jx(e,t,n){var r=On(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wp(e))bp(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,i=l(a,n);if(s.hasEagerState=!0,s.eagerState=i,Xt(i,a)){var c=t.interleaved;c===null?(s.next=s,dc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch(u){}finally{}n=tp(e,t,s,r),n!==null&&(s=ot(),Vt(n,e,r,s),kp(n,t,r))}}function wp(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function bp(e,t){Ss=ho=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function kp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ji(e,n)}}var mo={readContext:Ot,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},qx={readContext:Ot,useCallback:function(e,t){return Zt().memoizedState=[e,t===void 0?null:t],e},useContext:Ot,useEffect:Pu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Wl(4194308,4,hp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wl(4,2,e,t)},useMemo:function(e,t){var n=Zt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Zt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gx.bind(null,Ie,e),[r.memoizedState,e]},useRef:function(e){var t=Zt();return e={current:e},t.memoizedState=e},useState:Ru,useDebugValue:wc,useDeferredValue:function(e){return Zt().memoizedState=e},useTransition:function(){var e=Ru(!1),t=e[0];return e=Qx.bind(null,e[1]),Zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ie,s=Zt();if(Te){if(n===void 0)throw Error(R(407));n=n()}else{if(n=t(),Qe===null)throw Error(R(349));tr&30||op(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,Pu(ip.bind(null,r,l,e),[e]),r.flags|=2048,Xs(9,ap.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Zt(),t=Qe.identifierPrefix;if(Te){var n=cn,r=an;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ws++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Yx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zx={readContext:Ot,useCallback:xp,useContext:Ot,useEffect:vc,useImperativeHandle:mp,useInsertionEffect:fp,useLayoutEffect:pp,useMemo:gp,useReducer:Ca,useRef:dp,useState:function(){return Ca(Vs)},useDebugValue:wc,useDeferredValue:function(e){var t=Lt();return yp(t,Ue.memoizedState,e)},useTransition:function(){var e=Ca(Vs)[0],t=Lt().memoizedState;return[e,t]},useMutableSource:sp,useSyncExternalStore:lp,useId:vp,unstable_isNewReconciler:!1},eg={readContext:Ot,useCallback:xp,useContext:Ot,useEffect:vc,useImperativeHandle:mp,useInsertionEffect:fp,useLayoutEffect:pp,useMemo:gp,useReducer:Ea,useRef:dp,useState:function(){return Ea(Vs)},useDebugValue:wc,useDeferredValue:function(e){var t=Lt();return Ue===null?t.memoizedState=e:yp(t,Ue.memoizedState,e)},useTransition:function(){var e=Ea(Vs)[0],t=Lt().memoizedState;return[e,t]},useMutableSource:sp,useSyncExternalStore:lp,useId:vp,unstable_isNewReconciler:!1};function Bt(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function gi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Oe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Oo={isMounted:function(e){return(e=e._reactInternals)?or(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ot(),s=On(e),l=un(r,s);l.payload=t,n!=null&&(l.callback=n),t=zn(e,l,s),t!==null&&(Vt(t,e,s,r),Ul(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ot(),s=On(e),l=un(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=zn(e,l,s),t!==null&&(Vt(t,e,s,r),Ul(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ot(),r=On(e),s=un(n,r);s.tag=2,t!=null&&(s.callback=t),t=zn(e,s,r),t!==null&&(Vt(t,e,r,n),Ul(t,e,r))}};function zu(e,t,n,r,s,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!As(n,r)||!As(s,l):!0}function jp(e,t,n){var r=!1,s=$n,l=t.contextType;return typeof l=="object"&&l!==null?l=Ot(l):(s=xt(t)?Zn:rt.current,r=t.contextTypes,l=(r=r!=null)?Ar(e,s):$n),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Oo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function Iu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Oo.enqueueReplaceState(t,t.state,null)}function yi(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},fc(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Ot(l):(l=xt(t)?Zn:rt.current,s.context=Ar(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(gi(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Oo.enqueueReplaceState(s,s.state,null),fo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ur(e,t){try{var n="",r=t;do n+=Mm(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function Ma(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function vi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var tg=typeof WeakMap=="function"?WeakMap:Map;function Sp(e,t,n){n=un(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){go||(go=!0,_i=r),vi(e,t)},n}function Np(e,t,n){n=un(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){vi(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){vi(e,t),typeof r!="function"&&(In===null?In=new Set([this]):In.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Ou(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new tg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=mg.bind(null,e,t,n),t.then(e,e))}function Lu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Au(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=un(-1,1),t.tag=2,zn(n,t,1))),n.lanes|=1),e)}var ng=xn.ReactCurrentOwner,ht=!1;function lt(e,t,n,r){t.child=e===null?ep(t,null,n,r):Fr(t,e.child,n,r)}function $u(e,t,n,r,s){n=n.render;var l=t.ref;return zr(t,s),r=gc(e,t,n,r,l,s),n=yc(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,hn(e,t,s)):(Te&&n&&lc(t),t.flags|=1,lt(e,t,r,s),t.child)}function Fu(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!Mc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Cp(e,t,l,r,s)):(e=Yl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:As,n(a,r)&&e.ref===t.ref)return hn(e,t,s)}return t.flags|=1,e=Ln(l,r),e.ref=t.ref,e.return=t,t.child=e}function Cp(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(As(l,r)&&e.ref===t.ref)if(ht=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(ht=!0);else return t.lanes=e.lanes,hn(e,t,s)}return wi(e,t,n,r,s)}function Ep(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Er,kt),kt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ce(Er,kt),kt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Ce(Er,kt),kt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,Ce(Er,kt),kt|=r;return lt(e,t,s,n),t.child}function Mp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function wi(e,t,n,r,s){var l=xt(n)?Zn:rt.current;return l=Ar(t,l),zr(t,s),n=gc(e,t,n,r,l,s),r=yc(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,hn(e,t,s)):(Te&&r&&lc(t),t.flags|=1,lt(e,t,n,s),t.child)}function Bu(e,t,n,r,s){if(xt(n)){var l=!0;oo(t)}else l=!1;if(zr(t,s),t.stateNode===null)Vl(e,t),jp(t,n,r),yi(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ot(u):(u=xt(n)?Zn:rt.current,u=Ar(t,u));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==u)&&Iu(t,a,r,u),jn=!1;var h=t.memoizedState;a.state=h,fo(t,r,a,s),c=t.memoizedState,i!==r||h!==c||mt.current||jn?(typeof p=="function"&&(gi(t,n,p,r),c=t.memoizedState),(i=jn||zu(t,n,i,r,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,np(e,t),i=t.memoizedProps,u=t.type===t.elementType?i:Bt(t.type,i),a.props=u,f=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ot(c):(c=xt(n)?Zn:rt.current,c=Ar(t,c));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||h!==c)&&Iu(t,a,r,c),jn=!1,h=t.memoizedState,a.state=h,fo(t,r,a,s);var w=t.memoizedState;i!==f||h!==w||mt.current||jn?(typeof x=="function"&&(gi(t,n,x,r),w=t.memoizedState),(u=jn||zu(t,n,u,r,h,w,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return bi(e,t,n,r,l,s)}function bi(e,t,n,r,s,l){Mp(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Cu(t,n,!1),hn(e,t,l);r=t.stateNode,ng.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Fr(t,e.child,null,l),t.child=Fr(t,null,i,l)):lt(e,t,i,l),t.memoizedState=r.state,s&&Cu(t,n,!0),t.child}function _p(e){var t=e.stateNode;t.pendingContext?Nu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Nu(e,t.context,!1),pc(e,t.containerInfo)}function Uu(e,t,n,r,s){return $r(),ac(s),t.flags|=256,lt(e,t,n,r),t.child}var ki={dehydrated:null,treeContext:null,retryLane:0};function ji(e){return{baseLanes:e,cachePool:null,transitions:null}}function Tp(e,t,n){var r=t.pendingProps,s=ze.current,l=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ce(ze,s&1),e===null)return mi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=$o(a,r,0,null),e=Jn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=ji(n),t.memoizedState=ki,e):bc(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return rg(e,t,a,r,i,s,n);if(l){l=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ln(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?l=Ln(i,l):(l=Jn(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?ji(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=ki,r}return l=e.child,e=l.sibling,r=Ln(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function bc(e,t){return t=$o({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jl(e,t,n,r){return r!==null&&ac(r),Fr(t,e.child,null,n),e=bc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rg(e,t,n,r,s,l,a){if(n)return t.flags&256?(t.flags&=-257,r=Ma(Error(R(422))),jl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=$o({mode:"visible",children:r.children},s,0,null),l=Jn(l,s,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Fr(t,e.child,null,a),t.child.memoizedState=ji(a),t.memoizedState=ki,l);if(!(t.mode&1))return jl(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(R(419)),r=Ma(l,r,void 0),jl(e,t,a,r)}if(i=(a&e.childLanes)!==0,ht||i){if(r=Qe,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,pn(e,s),Vt(r,e,s,-1))}return Ec(),r=Ma(Error(R(421))),jl(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=xg.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,jt=Pn(s.nextSibling),St=t,Te=!0,Ht=null,e!==null&&(Rt[Pt++]=an,Rt[Pt++]=cn,Rt[Pt++]=er,an=e.id,cn=e.overflow,er=t),t=bc(t,r.children),t.flags|=4096,t)}function Hu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),xi(e.return,t,n)}function _a(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function Dp(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(lt(e,t,r.children,n),r=ze.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hu(e,n,t);else if(e.tag===19)Hu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ce(ze,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&po(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),_a(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&po(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}_a(t,!0,n,null,l);break;case"together":_a(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),nr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,n=Ln(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ln(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sg(e,t,n){switch(t.tag){case 3:_p(t),$r();break;case 5:rp(t);break;case 1:xt(t.type)&&oo(t);break;case 4:pc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ce(co,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ce(ze,ze.current&1),t.flags|=128,null):n&t.child.childLanes?Tp(e,t,n):(Ce(ze,ze.current&1),e=hn(e,t,n),e!==null?e.sibling:null);Ce(ze,ze.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Dp(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ce(ze,ze.current),r)break;return null;case 22:case 23:return t.lanes=0,Ep(e,t,n)}return hn(e,t,n)}var Rp,Si,Pp,zp;Rp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Si=function(){};Pp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Qn(nn.current);var l=null;switch(n){case"input":s=Xa(e,s),r=Xa(e,r),l=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),l=[];break;case"textarea":s=Qa(e,s),r=Qa(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=so)}Ja(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var i=s[u];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ds.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in r){var c=r[u];if(i=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==i&&(c!=null||i!=null))if(u==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(l||(l=[]),l.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ds.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ee("scroll",e),l||i===c||(l=[])):(l=l||[]).push(u,c))}n&&(l=l||[]).push("style",n);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};zp=function(e,t,n,r){n!==r&&(t.flags|=4)};function ps(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function lg(e,t,n){var r=t.pendingProps;switch(oc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return xt(t.type)&&lo(),tt(t),null;case 3:return r=t.stateNode,Br(),_e(mt),_e(rt),mc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(bl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ht!==null&&(Ri(Ht),Ht=null))),Si(e,t),tt(t),null;case 5:hc(t);var s=Qn(Hs.current);if(n=t.type,e!==null&&t.stateNode!=null)Pp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(R(166));return tt(t),null}if(e=Qn(nn.current),bl(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[en]=t,r[Bs]=l,e=(t.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(s=0;s<ys.length;s++)Ee(ys[s],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":qc(r,l),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ee("invalid",r);break;case"textarea":eu(r,l),Ee("invalid",r)}Ja(n,l),s=null;for(var a in l)if(l.hasOwnProperty(a)){var i=l[a];a==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&wl(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&wl(r.textContent,i,e),s=["children",""+i]):Ds.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Ee("scroll",r)}switch(n){case"input":fl(r),Zc(r,l,!0);break;case"textarea":fl(r),tu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=so)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=af(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[en]=t,e[Bs]=r,Rp(e,t,!1,!1),t.stateNode=e;e:{switch(a=qa(n,r),n){case"dialog":Ee("cancel",e),Ee("close",e),s=r;break;case"iframe":case"object":case"embed":Ee("load",e),s=r;break;case"video":case"audio":for(s=0;s<ys.length;s++)Ee(ys[s],e);s=r;break;case"source":Ee("error",e),s=r;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),s=r;break;case"details":Ee("toggle",e),s=r;break;case"input":qc(e,r),s=Xa(e,r),Ee("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),Ee("invalid",e);break;case"textarea":eu(e,r),s=Qa(e,r),Ee("invalid",e);break;default:s=r}Ja(n,s),i=s;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?df(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&cf(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Rs(e,c):typeof c=="number"&&Rs(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ds.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Ee("scroll",e):c!=null&&Vi(e,l,c,a))}switch(n){case"input":fl(e),Zc(e,r,!1);break;case"textarea":fl(e),tu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+An(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Tr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Tr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=so)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)zp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(R(166));if(n=Qn(Hs.current),Qn(nn.current),bl(t)){if(r=t.stateNode,n=t.memoizedProps,r[en]=t,(l=r.nodeValue!==n)&&(e=St,e!==null))switch(e.tag){case 3:wl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wl(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[en]=t,t.stateNode=r}return tt(t),null;case 13:if(_e(ze),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Te&&jt!==null&&t.mode&1&&!(t.flags&128))qf(),$r(),t.flags|=98560,l=!1;else if(l=bl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(R(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(R(317));l[en]=t}else $r(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tt(t),l=!1}else Ht!==null&&(Ri(Ht),Ht=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ze.current&1?We===0&&(We=3):Ec())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return Br(),Si(e,t),e===null&&$s(t.stateNode.containerInfo),tt(t),null;case 10:return uc(t.type._context),tt(t),null;case 17:return xt(t.type)&&lo(),tt(t),null;case 19:if(_e(ze),l=t.memoizedState,l===null)return tt(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)ps(l,!1);else{if(We!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=po(e),a!==null){for(t.flags|=128,ps(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ce(ze,ze.current&1|2),t.child}e=e.sibling}l.tail!==null&&$e()>Hr&&(t.flags|=128,r=!0,ps(l,!1),t.lanes=4194304)}else{if(!r)if(e=po(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ps(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!Te)return tt(t),null}else 2*$e()-l.renderingStartTime>Hr&&n!==1073741824&&(t.flags|=128,r=!0,ps(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=$e(),t.sibling=null,n=ze.current,Ce(ze,r?n&1|2:n&1),t):(tt(t),null);case 22:case 23:return Cc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?kt&1073741824&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function og(e,t){switch(oc(t),t.tag){case 1:return xt(t.type)&&lo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Br(),_e(mt),_e(rt),mc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return hc(t),null;case 13:if(_e(ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));$r()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _e(ze),null;case 4:return Br(),null;case 10:return uc(t.type._context),null;case 22:case 23:return Cc(),null;case 24:return null;default:return null}}var Sl=!1,nt=!1,ag=typeof WeakSet=="function"?WeakSet:Set,X=null;function Cr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(e,t,r)}else n.current=null}function Ni(e,t,n){try{n()}catch(r){Le(e,t,r)}}var Wu=!1;function ig(e,t){if(ii=to,e=$f(),sc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch(j){n=null;break e}var a=0,i=-1,c=-1,u=0,p=0,f=e,h=null;t:for(;;){for(var x;f!==n||s!==0&&f.nodeType!==3||(i=a+s),f!==l||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)h=f,f=x;for(;;){if(f===e)break t;if(h===n&&++u===s&&(i=a),h===l&&++p===r&&(c=a),(x=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=x}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ci={focusedElem:e,selectionRange:n},to=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,b=w.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Bt(t.type,y),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(j){Le(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return w=Wu,Wu=!1,w}function Ns(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&Ni(t,n,l)}s=s.next}while(s!==r)}}function Lo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ci(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ip(e){var t=e.alternate;t!==null&&(e.alternate=null,Ip(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[en],delete t[Bs],delete t[fi],delete t[Wx],delete t[Vx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Op(e){return e.tag===5||e.tag===3||e.tag===4}function Vu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Op(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ei(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=so));else if(r!==4&&(e=e.child,e!==null))for(Ei(e,t,n),e=e.sibling;e!==null;)Ei(e,t,n),e=e.sibling}function Mi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Mi(e,t,n),e=e.sibling;e!==null;)Mi(e,t,n),e=e.sibling}var Je=null,Ut=!1;function bn(e,t,n){for(n=n.child;n!==null;)Lp(e,t,n),n=n.sibling}function Lp(e,t,n){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(_o,n)}catch(i){}switch(n.tag){case 5:nt||Cr(n,t);case 6:var r=Je,s=Ut;Je=null,bn(e,t,n),Je=r,Ut=s,Je!==null&&(Ut?(e=Je,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Ut?(e=Je,n=n.stateNode,e.nodeType===8?ka(e.parentNode,n):e.nodeType===1&&ka(e,n),Os(e)):ka(Je,n.stateNode));break;case 4:r=Je,s=Ut,Je=n.stateNode.containerInfo,Ut=!0,bn(e,t,n),Je=r,Ut=s;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&Ni(n,t,a),s=s.next}while(s!==r)}bn(e,t,n);break;case 1:if(!nt&&(Cr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Le(n,t,i)}bn(e,t,n);break;case 21:bn(e,t,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,bn(e,t,n),nt=r):bn(e,t,n);break;default:bn(e,t,n)}}function Xu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ag),t.forEach(function(r){var s=gg.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ft(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:Je=i.stateNode,Ut=!1;break e;case 3:Je=i.stateNode.containerInfo,Ut=!0;break e;case 4:Je=i.stateNode.containerInfo,Ut=!0;break e}i=i.return}if(Je===null)throw Error(R(160));Lp(l,a,s),Je=null,Ut=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Le(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ap(t,e),t=t.sibling}function Ap(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ft(t,e),qt(e),r&4){try{Ns(3,e,e.return),Lo(3,e)}catch(y){Le(e,e.return,y)}try{Ns(5,e,e.return)}catch(y){Le(e,e.return,y)}}break;case 1:Ft(t,e),qt(e),r&512&&n!==null&&Cr(n,n.return);break;case 5:if(Ft(t,e),qt(e),r&512&&n!==null&&Cr(n,n.return),e.flags&32){var s=e.stateNode;try{Rs(s,"")}catch(y){Le(e,e.return,y)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&lf(s,l),qa(i,a);var u=qa(i,l);for(a=0;a<c.length;a+=2){var p=c[a],f=c[a+1];p==="style"?df(s,f):p==="dangerouslySetInnerHTML"?cf(s,f):p==="children"?Rs(s,f):Vi(s,p,f,u)}switch(i){case"input":Ka(s,l);break;case"textarea":of(s,l);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?Tr(s,!!l.multiple,x,!1):h!==!!l.multiple&&(l.defaultValue!=null?Tr(s,!!l.multiple,l.defaultValue,!0):Tr(s,!!l.multiple,l.multiple?[]:"",!1))}s[Bs]=l}catch(y){Le(e,e.return,y)}}break;case 6:if(Ft(t,e),qt(e),r&4){if(e.stateNode===null)throw Error(R(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(y){Le(e,e.return,y)}}break;case 3:if(Ft(t,e),qt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Os(t.containerInfo)}catch(y){Le(e,e.return,y)}break;case 4:Ft(t,e),qt(e);break;case 13:Ft(t,e),qt(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(Sc=$e())),r&4&&Xu(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(nt=(u=nt)||p,Ft(t,e),nt=u):Ft(t,e),qt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!p&&e.mode&1)for(X=e,p=e.child;p!==null;){for(f=X=p;X!==null;){switch(h=X,x=h.child,h.tag){case 0:case 11:case 14:case 15:Ns(4,h,h.return);break;case 1:Cr(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(y){Le(r,n,y)}}break;case 5:Cr(h,h.return);break;case 22:if(h.memoizedState!==null){Yu(f);continue}}x!==null?(x.return=h,X=x):Yu(f)}p=p.sibling}e:for(p=null,f=e;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,u?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=uf("display",a))}catch(y){Le(e,e.return,y)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){Le(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ft(t,e),qt(e),r&4&&Xu(e);break;case 21:break;default:Ft(t,e),qt(e)}}function qt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Op(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Rs(s,""),r.flags&=-33);var l=Vu(e);Mi(e,l,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=Vu(e);Ei(e,i,a);break;default:throw Error(R(161))}}catch(c){Le(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cg(e,t,n){X=e,$p(e)}function $p(e,t,n){for(var r=(e.mode&1)!==0;X!==null;){var s=X,l=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Sl;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||nt;i=Sl;var u=nt;if(Sl=a,(nt=c)&&!u)for(X=s;X!==null;)a=X,c=a.child,a.tag===22&&a.memoizedState!==null?Qu(s):c!==null?(c.return=a,X=c):Qu(s);for(;l!==null;)X=l,$p(l),l=l.sibling;X=s,Sl=i,nt=u}Ku(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,X=l):Ku(e)}}function Ku(e){for(;X!==null;){var t=X;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nt||Lo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!nt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Bt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Du(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Du(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&Os(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}nt||t.flags&512&&Ci(t)}catch(h){Le(t,t.return,h)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function Yu(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function Qu(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Lo(4,t)}catch(c){Le(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Le(t,s,c)}}var l=t.return;try{Ci(t)}catch(c){Le(t,l,c)}break;case 5:var a=t.return;try{Ci(t)}catch(c){Le(t,a,c)}}}catch(c){Le(t,t.return,c)}if(t===e){X=null;break}var i=t.sibling;if(i!==null){i.return=t.return,X=i;break}X=t.return}}var ug=Math.ceil,xo=xn.ReactCurrentDispatcher,kc=xn.ReactCurrentOwner,It=xn.ReactCurrentBatchConfig,me=0,Qe=null,Fe=null,qe=0,kt=0,Er=Bn(0),We=0,Ks=null,nr=0,Ao=0,jc=0,Cs=null,pt=null,Sc=0,Hr=1/0,ln=null,go=!1,_i=null,In=null,Nl=!1,Mn=null,yo=0,Es=0,Ti=null,Xl=-1,Kl=0;function ot(){return me&6?$e():Xl!==-1?Xl:Xl=$e()}function On(e){return e.mode&1?me&2&&qe!==0?qe&-qe:Kx.transition!==null?(Kl===0&&(Kl=jf()),Kl):(e=je,e!==0||(e=window.event,e=e===void 0?16:Tf(e.type)),e):1}function Vt(e,t,n,r){if(50<Es)throw Es=0,Ti=null,Error(R(185));Zs(e,n,r),(!(me&2)||e!==Qe)&&(e===Qe&&(!(me&2)&&(Ao|=n),We===4&&Cn(e,qe)),gt(e,r),n===1&&me===0&&!(t.mode&1)&&(Hr=$e()+500,zo&&Un()))}function gt(e,t){var n=e.callbackNode;Km(e,t);var r=eo(e,e===Qe?qe:0);if(r===0)n!==null&&su(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&su(n),t===1)e.tag===0?Xx(Gu.bind(null,e)):Qf(Gu.bind(null,e)),Ux(function(){!(me&6)&&Un()}),n=null;else{switch(Sf(r)){case 1:n=Gi;break;case 4:n=bf;break;case 16:n=Zl;break;case 536870912:n=kf;break;default:n=Zl}n=Kp(n,Fp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Fp(e,t){if(Xl=-1,Kl=0,me&6)throw Error(R(327));var n=e.callbackNode;if(Ir()&&e.callbackNode!==n)return null;var r=eo(e,e===Qe?qe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=vo(e,r);else{t=r;var s=me;me|=2;var l=Up();(Qe!==e||qe!==t)&&(ln=null,Hr=$e()+500,Gn(e,t));do try{pg();break}catch(i){Bp(e,i)}while(!0);cc(),xo.current=l,me=s,Fe!==null?t=0:(Qe=null,qe=0,t=We)}if(t!==0){if(t===2&&(s=ri(e),s!==0&&(r=s,t=Di(e,s))),t===1)throw n=Ks,Gn(e,0),Cn(e,r),gt(e,$e()),n;if(t===6)Cn(e,r);else{if(s=e.current.alternate,!(r&30)&&!dg(s)&&(t=vo(e,r),t===2&&(l=ri(e),l!==0&&(r=l,t=Di(e,l))),t===1))throw n=Ks,Gn(e,0),Cn(e,r),gt(e,$e()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(R(345));case 2:Xn(e,pt,ln);break;case 3:if(Cn(e,r),(r&130023424)===r&&(t=Sc+500-$e(),10<t)){if(eo(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){ot(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=di(Xn.bind(null,e,pt,ln),t);break}Xn(e,pt,ln);break;case 4:if(Cn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Wt(r);l=1<<a,a=t[a],a>s&&(s=a),r&=~l}if(r=s,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ug(r/1960))-r,10<r){e.timeoutHandle=di(Xn.bind(null,e,pt,ln),r);break}Xn(e,pt,ln);break;case 5:Xn(e,pt,ln);break;default:throw Error(R(329))}}}return gt(e,$e()),e.callbackNode===n?Fp.bind(null,e):null}function Di(e,t){var n=Cs;return e.current.memoizedState.isDehydrated&&(Gn(e,t).flags|=256),e=vo(e,t),e!==2&&(t=pt,pt=n,t!==null&&Ri(t)),e}function Ri(e){pt===null?pt=e:pt.push.apply(pt,e)}function dg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!Xt(l(),s))return!1}catch(a){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cn(e,t){for(t&=~jc,t&=~Ao,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function Gu(e){if(me&6)throw Error(R(327));Ir();var t=eo(e,0);if(!(t&1))return gt(e,$e()),null;var n=vo(e,t);if(e.tag!==0&&n===2){var r=ri(e);r!==0&&(t=r,n=Di(e,r))}if(n===1)throw n=Ks,Gn(e,0),Cn(e,t),gt(e,$e()),n;if(n===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xn(e,pt,ln),gt(e,$e()),null}function Nc(e,t){var n=me;me|=1;try{return e(t)}finally{me=n,me===0&&(Hr=$e()+500,zo&&Un())}}function rr(e){Mn!==null&&Mn.tag===0&&!(me&6)&&Ir();var t=me;me|=1;var n=It.transition,r=je;try{if(It.transition=null,je=1,e)return e()}finally{je=r,It.transition=n,me=t,!(me&6)&&Un()}}function Cc(){kt=Er.current,_e(Er)}function Gn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Bx(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(oc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lo();break;case 3:Br(),_e(mt),_e(rt),mc();break;case 5:hc(r);break;case 4:Br();break;case 13:_e(ze);break;case 19:_e(ze);break;case 10:uc(r.type._context);break;case 22:case 23:Cc()}n=n.return}if(Qe=e,Fe=e=Ln(e.current,null),qe=kt=t,We=0,Ks=null,jc=Ao=nr=0,pt=Cs=null,Yn!==null){for(t=0;t<Yn.length;t++)if(n=Yn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=s,r.next=a}n.pending=r}Yn=null}return e}function Bp(e,t){do{var n=Fe;try{if(cc(),Hl.current=mo,ho){for(var r=Ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ho=!1}if(tr=0,Ke=Ue=Ie=null,Ss=!1,Ws=0,kc.current=null,n===null||n.return===null){We=1,Ks=t,Fe=null;break}e:{var l=e,a=n.return,i=n,c=t;if(t=qe,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,p=i,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=Lu(a);if(x!==null){x.flags&=-257,Au(x,a,i,l,t),x.mode&1&&Ou(l,u,t),t=x,c=u;var w=t.updateQueue;if(w===null){var y=new Set;y.add(c),t.updateQueue=y}else w.add(c);break e}else{if(!(t&1)){Ou(l,u,t),Ec();break e}c=Error(R(426))}}else if(Te&&i.mode&1){var b=Lu(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Au(b,a,i,l,t),ac(Ur(c,i));break e}}l=c=Ur(c,i),We!==4&&(We=2),Cs===null?Cs=[l]:Cs.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var g=Sp(l,c,t);Tu(l,g);break e;case 1:i=c;var m=l.type,v=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(In===null||!In.has(v)))){l.flags|=65536,t&=-t,l.lanes|=t;var j=Np(l,i,t);Tu(l,j);break e}}l=l.return}while(l!==null)}Wp(n)}catch(S){t=S,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function Up(){var e=xo.current;return xo.current=mo,e===null?mo:e}function Ec(){(We===0||We===3||We===2)&&(We=4),Qe===null||!(nr&268435455)&&!(Ao&268435455)||Cn(Qe,qe)}function vo(e,t){var n=me;me|=2;var r=Up();(Qe!==e||qe!==t)&&(ln=null,Gn(e,t));do try{fg();break}catch(s){Bp(e,s)}while(!0);if(cc(),me=n,xo.current=r,Fe!==null)throw Error(R(261));return Qe=null,qe=0,We}function fg(){for(;Fe!==null;)Hp(Fe)}function pg(){for(;Fe!==null&&!Am();)Hp(Fe)}function Hp(e){var t=Xp(e.alternate,e,kt);e.memoizedProps=e.pendingProps,t===null?Wp(e):Fe=t,kc.current=null}function Wp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=og(n,t),n!==null){n.flags&=32767,Fe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{We=6,Fe=null;return}}else if(n=lg(n,t,kt),n!==null){Fe=n;return}if(t=t.sibling,t!==null){Fe=t;return}Fe=t=e}while(t!==null);We===0&&(We=5)}function Xn(e,t,n){var r=je,s=It.transition;try{It.transition=null,je=1,hg(e,t,n,r)}finally{It.transition=s,je=r}return null}function hg(e,t,n,r){do Ir();while(Mn!==null);if(me&6)throw Error(R(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Ym(e,l),e===Qe&&(Fe=Qe=null,qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nl||(Nl=!0,Kp(Zl,function(){return Ir(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=It.transition,It.transition=null;var a=je;je=1;var i=me;me|=4,kc.current=null,ig(e,n),Ap(n,e),zx(ci),to=!!ii,ci=ii=null,e.current=n,cg(n),$m(),me=i,je=a,It.transition=l}else e.current=n;if(Nl&&(Nl=!1,Mn=e,yo=s),l=e.pendingLanes,l===0&&(In=null),Um(n.stateNode),gt(e,$e()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(go)throw go=!1,e=_i,_i=null,e;return yo&1&&e.tag!==0&&Ir(),l=e.pendingLanes,l&1?e===Ti?Es++:(Es=0,Ti=e):Es=0,Un(),null}function Ir(){if(Mn!==null){var e=Sf(yo),t=It.transition,n=je;try{if(It.transition=null,je=16>e?16:e,Mn===null)var r=!1;else{if(e=Mn,Mn=null,yo=0,me&6)throw Error(R(331));var s=me;for(me|=4,X=e.current;X!==null;){var l=X,a=l.child;if(X.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var u=i[c];for(X=u;X!==null;){var p=X;switch(p.tag){case 0:case 11:case 15:Ns(8,p,l)}var f=p.child;if(f!==null)f.return=p,X=f;else for(;X!==null;){p=X;var h=p.sibling,x=p.return;if(Ip(p),p===u){X=null;break}if(h!==null){h.return=x,X=h;break}X=x}}}var w=l.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}X=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,X=a;else e:for(;X!==null;){if(l=X,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ns(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,X=g;break e}X=l.return}}var m=e.current;for(X=m;X!==null;){a=X;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,X=v;else e:for(a=m;X!==null;){if(i=X,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Lo(9,i)}}catch(S){Le(i,i.return,S)}if(i===a){X=null;break e}var j=i.sibling;if(j!==null){j.return=i.return,X=j;break e}X=i.return}}if(me=s,Un(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(_o,e)}catch(S){}r=!0}return r}finally{je=n,It.transition=t}}return!1}function Ju(e,t,n){t=Ur(n,t),t=Sp(e,t,1),e=zn(e,t,1),t=ot(),e!==null&&(Zs(e,1,t),gt(e,t))}function Le(e,t,n){if(e.tag===3)Ju(e,e,n);else for(;t!==null;){if(t.tag===3){Ju(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(In===null||!In.has(r))){e=Ur(n,e),e=Np(t,e,1),t=zn(t,e,1),e=ot(),t!==null&&(Zs(t,1,e),gt(t,e));break}}t=t.return}}function mg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ot(),e.pingedLanes|=e.suspendedLanes&n,Qe===e&&(qe&n)===n&&(We===4||We===3&&(qe&130023424)===qe&&500>$e()-Sc?Gn(e,0):jc|=n),gt(e,t)}function Vp(e,t){t===0&&(e.mode&1?(t=ml,ml<<=1,!(ml&130023424)&&(ml=4194304)):t=1);var n=ot();e=pn(e,t),e!==null&&(Zs(e,t,n),gt(e,n))}function xg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Vp(e,n)}function gg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(t),Vp(e,n)}var Xp;Xp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)ht=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ht=!1,sg(e,t,n);ht=!!(e.flags&131072)}else ht=!1,Te&&t.flags&1048576&&Gf(t,io,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vl(e,t),e=t.pendingProps;var s=Ar(t,rt.current);zr(t,n),s=gc(null,t,r,e,s,n);var l=yc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xt(r)?(l=!0,oo(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,fc(t),s.updater=Oo,t.stateNode=s,s._reactInternals=t,yi(t,r,e,n),t=bi(null,t,r,!0,l,n)):(t.tag=0,Te&&l&&lc(t),lt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=vg(r),e=Bt(r,e),s){case 0:t=wi(null,t,r,e,n);break e;case 1:t=Bu(null,t,r,e,n);break e;case 11:t=$u(null,t,r,e,n);break e;case 14:t=Fu(null,t,r,Bt(r.type,e),n);break e}throw Error(R(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),wi(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),Bu(e,t,r,s,n);case 3:e:{if(_p(t),e===null)throw Error(R(387));r=t.pendingProps,l=t.memoizedState,s=l.element,np(e,t),fo(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Ur(Error(R(423)),t),t=Uu(e,t,r,n,s);break e}else if(r!==s){s=Ur(Error(R(424)),t),t=Uu(e,t,r,n,s);break e}else for(jt=Pn(t.stateNode.containerInfo.firstChild),St=t,Te=!0,Ht=null,n=ep(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($r(),r===s){t=hn(e,t,n);break e}lt(e,t,r,n)}t=t.child}return t;case 5:return rp(t),e===null&&mi(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,a=s.children,ui(r,s)?a=null:l!==null&&ui(r,l)&&(t.flags|=32),Mp(e,t),lt(e,t,a,n),t.child;case 6:return e===null&&mi(t),null;case 13:return Tp(e,t,n);case 4:return pc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fr(t,null,r,n):lt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),$u(e,t,r,s,n);case 7:return lt(e,t,t.pendingProps,n),t.child;case 8:return lt(e,t,t.pendingProps.children,n),t.child;case 12:return lt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,a=s.value,Ce(co,r._currentValue),r._currentValue=a,l!==null)if(Xt(l.value,a)){if(l.children===s.children&&!mt.current){t=hn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){a=l.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=un(-1,n&-n),c.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?c.next=c:(c.next=p.next,p.next=c),u.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),xi(l.return,n,t),i.lanes|=n;break}c=c.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(R(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),xi(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}lt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,zr(t,n),s=Ot(s),r=r(s),t.flags|=1,lt(e,t,r,n),t.child;case 14:return r=t.type,s=Bt(r,t.pendingProps),s=Bt(r.type,s),Fu(e,t,r,s,n);case 15:return Cp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),Vl(e,t),t.tag=1,xt(r)?(e=!0,oo(t)):e=!1,zr(t,n),jp(t,r,s),yi(t,r,s,n),bi(null,t,r,!0,e,n);case 19:return Dp(e,t,n);case 22:return Ep(e,t,n)}throw Error(R(156,t.tag))};function Kp(e,t){return wf(e,t)}function yg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,t,n,r){return new yg(e,t,n,r)}function Mc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vg(e){if(typeof e=="function")return Mc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ki)return 11;if(e===Yi)return 14}return 2}function Ln(e,t){var n=e.alternate;return n===null?(n=zt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Yl(e,t,n,r,s,l){var a=2;if(r=e,typeof e=="function")Mc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case gr:return Jn(n.children,s,l,t);case Xi:a=8,s|=8;break;case Ua:return e=zt(12,n,t,s|2),e.elementType=Ua,e.lanes=l,e;case Ha:return e=zt(13,n,t,s),e.elementType=Ha,e.lanes=l,e;case Wa:return e=zt(19,n,t,s),e.elementType=Wa,e.lanes=l,e;case nf:return $o(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ef:a=10;break e;case tf:a=9;break e;case Ki:a=11;break e;case Yi:a=14;break e;case kn:a=16,r=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=zt(a,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function Jn(e,t,n,r){return e=zt(7,e,r,t),e.lanes=n,e}function $o(e,t,n,r){return e=zt(22,e,r,t),e.elementType=nf,e.lanes=n,e.stateNode={isHidden:!1},e}function Ta(e,t,n){return e=zt(6,e,null,t),e.lanes=n,e}function Da(e,t,n){return t=zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wg(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=da(0),this.expirationTimes=da(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=da(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _c(e,t,n,r,s,l,a,i,c){return e=new wg(e,t,n,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=zt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fc(l),e}function bg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Yp(e){if(!e)return $n;e=e._reactInternals;e:{if(or(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var n=e.type;if(xt(n))return Yf(e,n,t)}return t}function Qp(e,t,n,r,s,l,a,i,c){return e=_c(n,r,!0,e,s,l,a,i,c),e.context=Yp(null),n=e.current,r=ot(),s=On(n),l=un(r,s),l.callback=t!=null?t:null,zn(n,l,s),e.current.lanes=s,Zs(e,s,r),gt(e,r),e}function Fo(e,t,n,r){var s=t.current,l=ot(),a=On(s);return n=Yp(n),t.context===null?t.context=n:t.pendingContext=n,t=un(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=zn(s,t,a),e!==null&&(Vt(e,s,a,l),Ul(e,s,a)),a}function wo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Tc(e,t){qu(e,t),(e=e.alternate)&&qu(e,t)}function kg(){return null}var Gp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Dc(e){this._internalRoot=e}Bo.prototype.render=Dc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));Fo(e,t,null,null)};Bo.prototype.unmount=Dc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rr(function(){Fo(null,e,null,null)}),t[fn]=null}};function Bo(e){this._internalRoot=e}Bo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ef();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nn.length&&t!==0&&t<Nn[n].priority;n++);Nn.splice(n,0,e),n===0&&_f(e)}};function Rc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Uo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zu(){}function jg(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var u=wo(a);l.call(u)}}var a=Qp(t,r,e,0,null,!1,!1,"",Zu);return e._reactRootContainer=a,e[fn]=a.current,$s(e.nodeType===8?e.parentNode:e),rr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var u=wo(c);i.call(u)}}var c=_c(e,0,!1,null,null,!1,!1,"",Zu);return e._reactRootContainer=c,e[fn]=c.current,$s(e.nodeType===8?e.parentNode:e),rr(function(){Fo(t,c,n,r)}),c}function Ho(e,t,n,r,s){var l=n._reactRootContainer;if(l){var a=l;if(typeof s=="function"){var i=s;s=function(){var c=wo(a);i.call(c)}}Fo(t,a,e,s)}else a=jg(n,t,e,s,r);return wo(a)}Nf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gs(t.pendingLanes);n!==0&&(Ji(t,n|1),gt(t,$e()),!(me&6)&&(Hr=$e()+500,Un()))}break;case 13:rr(function(){var r=pn(e,1);if(r!==null){var s=ot();Vt(r,e,1,s)}}),Tc(e,1)}};qi=function(e){if(e.tag===13){var t=pn(e,134217728);if(t!==null){var n=ot();Vt(t,e,134217728,n)}Tc(e,134217728)}};Cf=function(e){if(e.tag===13){var t=On(e),n=pn(e,t);if(n!==null){var r=ot();Vt(n,e,t,r)}Tc(e,t)}};Ef=function(){return je};Mf=function(e,t){var n=je;try{return je=e,t()}finally{je=n}};ei=function(e,t,n){switch(t){case"input":if(Ka(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Po(r);if(!s)throw Error(R(90));sf(r),Ka(r,s)}}}break;case"textarea":of(e,n);break;case"select":t=n.value,t!=null&&Tr(e,!!n.multiple,t,!1)}};hf=Nc;mf=rr;var Sg={usingClientEntryPoint:!1,Events:[tl,br,Po,ff,pf,Nc]},hs={findFiberByHostInstance:Kn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ng={bundleType:hs.bundleType,version:hs.version,rendererPackageName:hs.rendererPackageName,rendererConfig:hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yf(e),e===null?null:e.stateNode},findFiberByHostInstance:hs.findFiberByHostInstance||kg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{_o=Cl.inject(Ng),tn=Cl}catch(e){}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sg;Ct.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rc(t))throw Error(R(200));return bg(e,t,null,n)};Ct.createRoot=function(e,t){if(!Rc(e))throw Error(R(299));var n=!1,r="",s=Gp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=_c(e,1,!1,null,null,n,!1,r,s),e[fn]=t.current,$s(e.nodeType===8?e.parentNode:e),new Dc(t)};Ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=yf(t),e=e===null?null:e.stateNode,e};Ct.flushSync=function(e){return rr(e)};Ct.hydrate=function(e,t,n){if(!Uo(t))throw Error(R(200));return Ho(null,e,t,!0,n)};Ct.hydrateRoot=function(e,t,n){if(!Rc(e))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",a=Gp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Qp(t,null,e,1,n!=null?n:null,s,!1,l,a),e[fn]=t.current,$s(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Bo(t)};Ct.render=function(e,t,n){if(!Uo(t))throw Error(R(200));return Ho(null,e,t,!1,n)};Ct.unmountComponentAtNode=function(e){if(!Uo(e))throw Error(R(40));return e._reactRootContainer?(rr(function(){Ho(null,null,e,!1,function(){e._reactRootContainer=null,e[fn]=null})}),!0):!1};Ct.unstable_batchedUpdates=Nc;Ct.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Uo(n))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return Ho(e,t,n,!1,r)};Ct.version="18.3.1-next-f1338f8080-20240426";function Jp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jp)}catch(e){console.error(e)}}Jp(),Gd.exports=Ct;var Mr=Gd.exports,ed=Mr;Fa.createRoot=ed.createRoot,Fa.hydrateRoot=ed.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ys(){return Ys=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ys.apply(this,arguments)}var _n;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(_n||(_n={}));const td="popstate";function Cg(e){e===void 0&&(e={});function t(s,l){let{pathname:a="/",search:i="",hash:c=""}=ar(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Pi("",{pathname:a,search:i,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(s,l){let a=s.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");i=u===-1?c:c.slice(0,u)}return i+"#"+(typeof l=="string"?l:qp(l))}function r(s,l){Wo(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return Mg(t,n,r,e)}function Ve(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function Wo(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Eg(){return Math.random().toString(36).substr(2,8)}function nd(e,t){return{usr:e.state,key:e.key,idx:t}}function Pi(e,t,n,r){return n===void 0&&(n=null),Ys({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ar(t):t,{state:n,key:t&&t.key||r||Eg()})}function qp(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ar(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Mg(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,a=s.history,i=_n.Pop,c=null,u=p();u==null&&(u=0,a.replaceState(Ys({},a.state,{idx:u}),""));function p(){return(a.state||{idx:null}).idx}function f(){i=_n.Pop;let b=p(),g=b==null?null:b-u;u=b,c&&c({action:i,location:y.location,delta:g})}function h(b,g){i=_n.Push;let m=Pi(y.location,b,g);n&&n(m,b),u=p()+1;let v=nd(m,u),j=y.createHref(m);try{a.pushState(v,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(j)}l&&c&&c({action:i,location:y.location,delta:1})}function x(b,g){i=_n.Replace;let m=Pi(y.location,b,g);n&&n(m,b),u=p();let v=nd(m,u),j=y.createHref(m);a.replaceState(v,"",j),l&&c&&c({action:i,location:y.location,delta:0})}function w(b){let g=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof b=="string"?b:qp(b);return m=m.replace(/ $/,"%20"),Ve(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let y={get action(){return i},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(td,f),c=b,()=>{s.removeEventListener(td,f),c=null}},createHref(b){return t(s,b)},createURL:w,encodeLocation(b){let g=w(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:x,go(b){return a.go(b)}};return y}var rd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(rd||(rd={}));function _g(e,t,n){return n===void 0&&(n="/"),Tg(e,t,n)}function Tg(e,t,n,r){let s=typeof t=="string"?ar(t):t,l=th(s.pathname||"/",n);if(l==null)return null;let a=Zp(e);Dg(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let u=Hg(l);i=Fg(a[c],u)}return i}function Zp(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,a,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:a,route:l};c.relativePath.startsWith("/")&&(Ve(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=qn([r,c.relativePath]),p=n.concat(c);l.children&&l.children.length>0&&(Ve(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Zp(l.children,t,p,u)),!(l.path==null&&!l.index)&&t.push({path:u,score:Ag(u,l.index),routesMeta:p})};return e.forEach((l,a)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))s(l,a);else for(let c of eh(l.path))s(l,a,c)}),t}function eh(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let a=eh(r.join("/")),i=[];return i.push(...a.map(c=>c===""?l:[l,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Dg(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:$g(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Rg=/^:[\w-]+$/,Pg=3,zg=2,Ig=1,Og=10,Lg=-2,sd=e=>e==="*";function Ag(e,t){let n=e.split("/"),r=n.length;return n.some(sd)&&(r+=Lg),t&&(r+=zg),n.filter(s=>!sd(s)).reduce((s,l)=>s+(Rg.test(l)?Pg:l===""?Ig:Og),r)}function $g(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Fg(e,t,n){let{routesMeta:r}=e,s={},l="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],u=i===r.length-1,p=l==="/"?t:t.slice(l.length)||"/",f=Bg({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},p),h=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:qn([l,f.pathname]),pathnameBase:Gg(qn([l,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(l=qn([l,f.pathnameBase]))}return a}function Bg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Ug(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],a=l.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((u,p,f)=>{let{paramName:h,isOptional:x}=p;if(h==="*"){let y=i[f]||"";a=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const w=i[f];return x&&!w?u[h]=void 0:u[h]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:a,pattern:e}}function Ug(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Wo(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Hg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Wo(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function th(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const Wg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vg=e=>Wg.test(e);function Xg(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?ar(e):e,l;if(n)if(Vg(n))l=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Wo(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?l=ld(n.substring(1),"/"):l=ld(n,t)}else l=t;return{pathname:l,search:Jg(r),hash:qg(s)}}function ld(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ra(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Kg(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Yg(e,t){let n=Kg(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Qg(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=ar(e):(s=Ys({},e),Ve(!s.pathname||!s.pathname.includes("?"),Ra("?","pathname","search",s)),Ve(!s.pathname||!s.pathname.includes("#"),Ra("#","pathname","hash",s)),Ve(!s.search||!s.search.includes("#"),Ra("#","search","hash",s)));let l=e===""||s.pathname==="",a=l?"/":s.pathname,i;if(a==null)i=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}i=f>=0?t[f]:"/"}let c=Xg(s,i),u=a&&a!=="/"&&a.endsWith("/"),p=(l||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||p)&&(c.pathname+="/"),c}const qn=e=>e.join("/").replace(/\/\/+/g,"/"),Gg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Jg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,qg=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Zg(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nh=["post","put","patch","delete"];new Set(nh);const ey=["get",...nh];new Set(ey);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qs(){return Qs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qs.apply(this,arguments)}const Pc=d.createContext(null),ty=d.createContext(null),Vo=d.createContext(null),Xo=d.createContext(null),ir=d.createContext({outlet:null,matches:[],isDataRoute:!1}),rh=d.createContext(null);function Ko(){return d.useContext(Xo)!=null}function zc(){return Ko()||Ve(!1),d.useContext(Xo).location}function sh(e){d.useContext(Vo).static||d.useLayoutEffect(e)}function At(){let{isDataRoute:e}=d.useContext(ir);return e?hy():ny()}function ny(){Ko()||Ve(!1);let e=d.useContext(Pc),{basename:t,future:n,navigator:r}=d.useContext(Vo),{matches:s}=d.useContext(ir),{pathname:l}=zc(),a=JSON.stringify(Yg(s,n.v7_relativeSplatPath)),i=d.useRef(!1);return sh(()=>{i.current=!0}),d.useCallback(function(u,p){if(p===void 0&&(p={}),!i.current)return;if(typeof u=="number"){r.go(u);return}let f=Qg(u,JSON.parse(a),l,p.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:qn([t,f.pathname])),(p.replace?r.replace:r.push)(f,p.state,p)},[t,r,a,l,e])}function lh(){let{matches:e}=d.useContext(ir),t=e[e.length-1];return t?t.params:{}}function ry(e,t){return sy(e,t)}function sy(e,t,n,r){Ko()||Ve(!1);let{navigator:s}=d.useContext(Vo),{matches:l}=d.useContext(ir),a=l[l.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=zc(),p;if(t){var f;let b=typeof t=="string"?ar(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Ve(!1),p=b}else p=u;let h=p.pathname||"/",x=h;if(c!=="/"){let b=c.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=_g(e,{pathname:x}),y=cy(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},i,b.params),pathname:qn([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:qn([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,n,r);return t&&y?d.createElement(Xo.Provider,{value:{location:Qs({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:_n.Pop}},y):y}function ly(){let e=py(),t=Zg(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},t),n?d.createElement("pre",{style:s},n):null,null)}const oy=d.createElement(ly,null);class ay extends d.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?d.createElement(ir.Provider,{value:this.props.routeContext},d.createElement(rh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iy(e){let{routeContext:t,match:n,children:r}=e,s=d.useContext(Pc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),d.createElement(ir.Provider,{value:t},r)}function cy(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let p=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);p>=0||Ve(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let f=a[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=p),f.route.id){let{loaderData:h,errors:x}=n,w=f.route.loader&&h[f.route.id]===void 0&&(!x||x[f.route.id]===void 0);if(f.route.lazy||w){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((p,f,h)=>{let x,w=!1,y=null,b=null;n&&(x=i&&f.route.id?i[f.route.id]:void 0,y=f.route.errorElement||oy,c&&(u<0&&h===0?(my("route-fallback"),w=!0,b=null):u===h&&(w=!0,b=f.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,h+1)),m=()=>{let v;return x?v=y:w?v=b:f.route.Component?v=d.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=p,d.createElement(iy,{match:f,routeContext:{outlet:p,matches:g,isDataRoute:n!=null},children:v})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?d.createElement(ay,{location:n.location,revalidation:n.revalidation,component:y,error:x,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var oh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(oh||{}),ah=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ah||{});function uy(e){let t=d.useContext(Pc);return t||Ve(!1),t}function dy(e){let t=d.useContext(ty);return t||Ve(!1),t}function fy(e){let t=d.useContext(ir);return t||Ve(!1),t}function ih(e){let t=fy(),n=t.matches[t.matches.length-1];return n.route.id||Ve(!1),n.route.id}function py(){var e;let t=d.useContext(rh),n=dy(),r=ih();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function hy(){let{router:e}=uy(oh.UseNavigateStable),t=ih(ah.UseNavigateStable),n=d.useRef(!1);return sh(()=>{n.current=!0}),d.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Qs({fromRouteId:t},l)))},[e,t])}const od={};function my(e,t,n){od[e]||(od[e]=!0)}function xy(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function st(e){Ve(!1)}function gy(e){let{basename:t="/",children:n=null,location:r,navigationType:s=_n.Pop,navigator:l,static:a=!1,future:i}=e;Ko()&&Ve(!1);let c=t.replace(/^\/*/,"/"),u=d.useMemo(()=>({basename:c,navigator:l,static:a,future:Qs({v7_relativeSplatPath:!1},i)}),[c,i,l,a]);typeof r=="string"&&(r=ar(r));let{pathname:p="/",search:f="",hash:h="",state:x=null,key:w="default"}=r,y=d.useMemo(()=>{let b=th(p,c);return b==null?null:{location:{pathname:b,search:f,hash:h,state:x,key:w},navigationType:s}},[c,p,f,h,x,w,s]);return y==null?null:d.createElement(Vo.Provider,{value:u},d.createElement(Xo.Provider,{children:n,value:y}))}function yy(e){let{children:t,location:n}=e;return ry(zi(t),n)}new Promise(()=>{});function zi(e,t){t===void 0&&(t=[]);let n=[];return d.Children.forEach(e,(r,s)=>{if(!d.isValidElement(r))return;let l=[...t,s];if(r.type===d.Fragment){n.push.apply(n,zi(r.props.children,l));return}r.type!==st&&Ve(!1),!r.props.index||!r.props.children||Ve(!1);let a={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=zi(r.props.children,l)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const vy="6";try{window.__reactRouterVersion=vy}catch(e){}const wy="startTransition",ad=mm[wy];function by(e){let{basename:t,children:n,future:r,window:s}=e,l=d.useRef();l.current==null&&(l.current=Cg({window:s,v5Compat:!0}));let a=l.current,[i,c]=d.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},p=d.useCallback(f=>{u&&ad?ad(()=>c(f)):c(f)},[c,u]);return d.useLayoutEffect(()=>a.listen(p),[a,p]),d.useEffect(()=>xy(r),[r]),d.createElement(gy,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}var id;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(id||(id={}));var cd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(cd||(cd={}));const Ic="";async function ud(){var r,s;const e=localStorage.getItem("whisper_token");if(e)return e;const t=(s=(r=window.Telegram)==null?void 0:r.WebApp)==null?void 0:s.initData;if(t){const a=await(await fetch(`${Ic}/api/auth/telegram`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:t})})).json();if(a.success&&a.token)return localStorage.setItem("whisper_token",a.token),a.token}const n=new Error("need_login");throw n.code="NEED_LOGIN",n}async function $(e,t={}){let n=await ud();const r=`${Ic}${e}`,s=a=>fetch(r,{...t,cache:"no-store",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`,...t.headers},body:t.body?JSON.stringify(t.body):void 0});let l=await s(n);if(l.status===401&&(localStorage.removeItem("whisper_token"),n=await ud(),l=await s(n)),l.status===204)return null;if(!l.ok){const a=await l.json().catch(()=>({}));throw new Error(a.detail||` (${l.status})`)}return l.json()}async function ky(e){const n=await(await fetch(`${Ic}/api/auth/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})})).json();if(n.success&&n.token)return localStorage.setItem("whisper_token",n.token),!0;throw new Error(n.detail||"")}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ch=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:a,...i},c)=>d.createElement("svg",{ref:c,...Sy,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:ch("lucide",s),...i},[...a.map(([u,p])=>d.createElement(u,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=(e,t)=>{const n=d.forwardRef(({className:r,...s},l)=>d.createElement(Ny,{ref:l,iconNode:t,className:ch(`lucide-${jy(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=ue("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=ue("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=ue("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=ue("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=ue("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=ue("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=ue("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=ue("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=ue("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=ue("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=ue("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=ue("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=ue("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=ue("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=ue("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=ue("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=ue("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=ue("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=ue("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=ue("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=ue("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=ue("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Wy="WhisperMiniDB",Vy=1,Kr="avatars",hh=()=>new Promise((e,t)=>{const n=indexedDB.open(Wy,Vy);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(Kr)||r.createObjectStore(Kr,{keyPath:"key"})}}),Ii=async(e,t)=>{const n=await hh();return new Promise((r,s)=>{const l=n.transaction([Kr],"readwrite");l.objectStore(Kr).put({key:e,base64:t}),l.oncomplete=()=>r(),l.onerror=()=>s(l.error)})},Zr=async e=>{const t=await hh();return new Promise((n,r)=>{const l=t.transaction([Kr],"readonly").objectStore(Kr).get(e);l.onsuccess=()=>{var a;return n(((a=l.result)==null?void 0:a.base64)||null)},l.onerror=()=>r(l.error)})},ft={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function pr({icon:e,label:t,desc:n,disabled:r,onClick:s,badge:l}){const[a,i]=d.useState(!1),c=()=>!r&&i(!0),u=()=>{i(!1),r||s==null||s()};return o.jsxs("button",{className:"flex flex-col items-start rounded-[18px] gap-2 text-left",style:{padding:"16px 14px",background:ft.bg,boxShadow:a?"inset 3px 3px 8px rgba(174,176,182,0.5), inset -3px -3px 8px #ffffff":"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff",opacity:r?.4:1,transform:a?"scale(0.97)":"scale(1)",transition:"transform 0.1s, box-shadow 0.1s",cursor:r?"default":"pointer",WebkitTapHighlightColor:"transparent"},disabled:r,onTouchStart:c,onTouchEnd:u,onMouseDown:c,onMouseUp:u,onMouseLeave:()=>i(!1),children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-[12px]",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))"},children:e}),l&&o.jsx("div",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full",style:{background:"#ef4444",border:"2px solid var(--bg)"}})]}),o.jsxs("div",{className:"pl-1",children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:ft.text},children:t}),o.jsx("div",{className:"mt-0.5 text-[10px] leading-snug",style:{color:ft.textMuted},children:n})]})]})}function pd({children:e}){return o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-[3px]",style:{color:ft.textMuted},children:e})}function Xy(){const e=At(),[t,n]=d.useState(()=>{try{return JSON.parse(localStorage.getItem("whisper_profile")||"null")}catch(u){return null}}),[r,s]=d.useState(null),[l,a]=d.useState(!1);d.useEffect(()=>{$("/api/user/profile").then(u=>{n(u),localStorage.setItem("whisper_profile",JSON.stringify(u))}).catch(()=>{}),Zr("user-avatar").then(u=>{u&&s(u)}).catch(function(){}),$("/api/diary/unread-count").then(u=>{u.count>0&&a(!0)}).catch(()=>{})},[]);const i=(t==null?void 0:t.nickname)||"",c=(t==null?void 0:t.background_url)||"";return o.jsxs("div",{className:"flex flex-col overflow-y-auto",style:{background:ft.bg,height:"100%",paddingBottom:16},children:[o.jsxs("div",{className:"flex flex-col px-5",style:{paddingTop:"max(12px, env(safe-area-inset-top))"},children:[o.jsx("h1",{className:"mb-4 text-center text-[17px] font-medium",style:{color:ft.textMuted,letterSpacing:"4px"},children:"W H I S P E R"}),o.jsxs("button",{className:"mb-5 flex w-full items-center gap-4 rounded-[20px] p-5 text-left",style:{background:ft.bg,boxShadow:"6px 6px 14px rgba(174,176,182,0.5), -6px -6px 14px #ffffff"},onClick:()=>e("/profile"),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:52,height:52,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:ft.bg},children:r?o.jsx("img",{src:r,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:22},children:""})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"text-[17px] font-bold truncate",style:{color:ft.text},children:["@",i]}),o.jsxs("div",{className:"mt-0.5 text-[11px] italic",style:{color:ft.textMuted},children:['"',c,'"']})]}),o.jsx(Vr,{size:16,style:{color:ft.textMuted,flexShrink:0}})]}),o.jsx(pd,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(pr,{icon:o.jsx(Ey,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/world-books")}),o.jsx(pr,{icon:o.jsx(My,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/memories")}),o.jsx(pr,{icon:o.jsx(uh,{size:18,color:"white"}),label:"",desc:"Core Blocks",onClick:()=>e("/assistants")}),o.jsx(pr,{icon:o.jsx(By,{size:18,color:"white"}),label:"",desc:"API",onClick:()=>e("/settings")})]}),o.jsx(pd,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(pr,{icon:o.jsx(Cy,{size:18,color:"white"}),label:"",desc:"",badge:l,onClick:()=>e("/diary")}),o.jsx(pr,{icon:o.jsx(Uy,{size:18,color:"white"}),label:"",desc:"",disabled:!0})]}),o.jsx("button",{className:"flex w-full items-center justify-center rounded-[18px] py-4",style:{background:ft.bg,boxShadow:"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff"},onClick:()=>e("/cot"),children:o.jsx(zy,{size:32,fill:ft.accent,style:{color:ft.accent,animation:"heartbeat 2s ease-in-out infinite"}})})]}),o.jsx("style",{children:`
        @keyframes heartbeat {
          0%, 100% { transform: scale(1); }
          15% { transform: scale(1.15); }
          30% { transform: scale(1); }
          45% { transform: scale(1.1); }
          60% { transform: scale(1); }
        }
      `})]})}function Ky(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const Go=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function es(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Lc(e){return"nodeType"in e}function ct(e){var t,n;return e?es(e)?e:Lc(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Ac(e){const{Document:t}=ct(e);return e instanceof t}function ol(e){return es(e)?!1:e instanceof ct(e).HTMLElement}function mh(e){return e instanceof ct(e).SVGElement}function ts(e){return e?es(e)?e.document:Lc(e)?Ac(e)?e:ol(e)||mh(e)?e.ownerDocument:document:document:document}const Kt=Go?d.useLayoutEffect:d.useEffect;function Jo(e){const t=d.useRef(e);return Kt(()=>{t.current=e}),d.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function Yy(){const e=d.useRef(null),t=d.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=d.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Gs(e,t){t===void 0&&(t=[e]);const n=d.useRef(e);return Kt(()=>{n.current!==e&&(n.current=e)},t),n}function al(e,t){const n=d.useRef();return d.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function bo(e){const t=Jo(e),n=d.useRef(null),r=d.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function ko(e){const t=d.useRef();return d.useEffect(()=>{t.current=e},[e]),t.current}let Pa={};function il(e,t){return d.useMemo(()=>{if(t)return t;const n=Pa[e]==null?0:Pa[e]+1;return Pa[e]=n,e+"-"+n},[e,t])}function xh(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const i=Object.entries(a);for(const[c,u]of i){const p=l[c];p!=null&&(l[c]=p+e*u)}return l},{...t})}}const Or=xh(1),jo=xh(-1);function Qy(e){return"clientX"in e&&"clientY"in e}function qo(e){if(!e)return!1;const{KeyboardEvent:t}=ct(e.target);return t&&e instanceof t}function Gy(e){if(!e)return!1;const{TouchEvent:t}=ct(e.target);return t&&e instanceof t}function So(e){if(Gy(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Qy(e)?{x:e.clientX,y:e.clientY}:null}const mn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[mn.Translate.toString(e),mn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),hd="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Jy(e){return e.matches(hd)?e:e.querySelector(hd)}const qy={display:"none"};function Zy(e){let{id:t,value:n}=e;return Me.createElement("div",{id:t,style:qy},n)}function ev(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Me.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function tv(){const[e,t]=d.useState("");return{announce:d.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const gh=d.createContext(null);function nv(e){const t=d.useContext(gh);d.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function rv(){const[e]=d.useState(()=>new Set),t=d.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[d.useCallback(r=>{let{type:s,event:l}=r;e.forEach(a=>{var i;return(i=a[s])==null?void 0:i.call(a,l)})},[e]),t]}const sv={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},lv={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ov(e){let{announcements:t=lv,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=sv}=e;const{announce:l,announcement:a}=tv(),i=il("DndLiveRegion"),[c,u]=d.useState(!1);if(d.useEffect(()=>{u(!0)},[]),nv(d.useMemo(()=>({onDragStart(f){let{active:h}=f;l(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:x}=f;t.onDragMove&&l(t.onDragMove({active:h,over:x}))},onDragOver(f){let{active:h,over:x}=f;l(t.onDragOver({active:h,over:x}))},onDragEnd(f){let{active:h,over:x}=f;l(t.onDragEnd({active:h,over:x}))},onDragCancel(f){let{active:h,over:x}=f;l(t.onDragCancel({active:h,over:x}))}}),[l,t])),!c)return null;const p=Me.createElement(Me.Fragment,null,Me.createElement(Zy,{id:r,value:s.draggable}),Me.createElement(ev,{id:i,announcement:a}));return n?Mr.createPortal(p,n):p}var He;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(He||(He={}));function No(){}function Co(e,t){return d.useMemo(()=>({sensor:e,options:t!=null?t:{}}),[e,t])}function yh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Yt=Object.freeze({x:0,y:0});function av(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function iv(e,t){const n=So(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function cv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function uv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function dv(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function md(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const vh=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=md(t,t.left,t.top),l=[];for(const a of r){const{id:i}=a,c=n.get(i);if(c){const u=av(md(c),s);l.push({id:i,data:{droppableContainer:a,value:u}})}}return l.sort(cv)};function fv(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height),a=s-r,i=l-n;if(r<s&&n<l){const c=t.width*t.height,u=e.width*e.height,p=a*i,f=p/(c+u-p);return Number(f.toFixed(4))}return 0}const pv=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const l of r){const{id:a}=l,i=n.get(a);if(i){const c=fv(i,t);c>0&&s.push({id:a,data:{droppableContainer:l,value:c}})}}return s.sort(uv)};function hv(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function wh(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Yt}function mv(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,i)=>({...a,top:a.top+e*i.y,bottom:a.bottom+e*i.y,left:a.left+e*i.x,right:a.right+e*i.x}),{...n})}}const xv=mv(1);function bh(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function gv(e,t,n){const r=bh(t);if(!r)return e;const{scaleX:s,scaleY:l,x:a,y:i}=r,c=e.left-a-(1-s)*parseFloat(n),u=e.top-i-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),p=s?e.width/s:e.width,f=l?e.height/l:e.height;return{width:p,height:f,top:u,right:c+p,bottom:u+f,left:c}}const yv={ignoreTransform:!1};function ns(e,t){t===void 0&&(t=yv);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:p}=ct(e).getComputedStyle(e);u&&(n=gv(n,u,p))}const{top:r,left:s,width:l,height:a,bottom:i,right:c}=n;return{top:r,left:s,width:l,height:a,bottom:i,right:c}}function xd(e){return ns(e,{ignoreTransform:!0})}function vv(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function wv(e,t){return t===void 0&&(t=ct(e).getComputedStyle(e)),t.position==="fixed"}function bv(e,t){t===void 0&&(t=ct(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=t[s];return typeof l=="string"?n.test(l):!1})}function $c(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Ac(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!ol(s)||mh(s)||n.includes(s))return n;const l=ct(e).getComputedStyle(s);return s!==e&&bv(s,l)&&n.push(s),wv(s,l)?n:r(s.parentNode)}return e?r(e):n}function kh(e){const[t]=$c(e,1);return t!=null?t:null}function za(e){return!Go||!e?null:es(e)?e:Lc(e)?Ac(e)||e===ts(e).scrollingElement?window:ol(e)?e:null:null}function jh(e){return es(e)?e.scrollX:e.scrollLeft}function Sh(e){return es(e)?e.scrollY:e.scrollTop}function Oi(e){return{x:jh(e),y:Sh(e)}}var Ye;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ye||(Ye={}));function Nh(e){return!Go||!e?!1:e===document.scrollingElement}function Ch(e){const t={x:0,y:0},n=Nh(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,l=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:i,maxScroll:r,minScroll:t}}const kv={x:.2,y:.2};function jv(e,t,n,r,s){let{top:l,left:a,right:i,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=kv);const{isTop:u,isBottom:p,isLeft:f,isRight:h}=Ch(e),x={x:0,y:0},w={x:0,y:0},y={height:t.height*s.y,width:t.width*s.x};return!u&&l<=t.top+y.height?(x.y=Ye.Backward,w.y=r*Math.abs((t.top+y.height-l)/y.height)):!p&&c>=t.bottom-y.height&&(x.y=Ye.Forward,w.y=r*Math.abs((t.bottom-y.height-c)/y.height)),!h&&i>=t.right-y.width?(x.x=Ye.Forward,w.x=r*Math.abs((t.right-y.width-i)/y.width)):!f&&a<=t.left+y.width&&(x.x=Ye.Backward,w.x=r*Math.abs((t.left+y.width-a)/y.width)),{direction:x,speed:w}}function Sv(e){if(e===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function Eh(e){return e.reduce((t,n)=>Or(t,Oi(n)),Yt)}function Nv(e){return e.reduce((t,n)=>t+jh(n),0)}function Cv(e){return e.reduce((t,n)=>t+Sh(n),0)}function Mh(e,t){if(t===void 0&&(t=ns),!e)return;const{top:n,left:r,bottom:s,right:l}=t(e);kh(e)&&(s<=0||l<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Ev=[["x",["left","right"],Nv],["y",["top","bottom"],Cv]];class Fc{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=$c(n),s=Eh(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[l,a,i]of Ev)for(const c of a)Object.defineProperty(this,c,{get:()=>{const u=i(r),p=s[l]-u;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ms{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Mv(e){const{EventTarget:t}=ct(e);return e instanceof t?e:ts(e)}function Ia(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Dt;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Dt||(Dt={}));function gd(e){e.preventDefault()}function _v(e){e.stopPropagation()}var ve;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(ve||(ve={}));const _h={start:[ve.Space,ve.Enter],cancel:[ve.Esc],end:[ve.Space,ve.Enter,ve.Tab]},Tv=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case ve.Right:return{...n,x:n.x+25};case ve.Left:return{...n,x:n.x-25};case ve.Down:return{...n,y:n.y+25};case ve.Up:return{...n,y:n.y-25}}};class Th{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ms(ts(n)),this.windowListeners=new Ms(ct(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Dt.Resize,this.handleCancel),this.windowListeners.add(Dt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Dt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Mh(r),n(Yt)}handleKeyDown(t){if(qo(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:l=_h,coordinateGetter:a=Tv,scrollBehavior:i="smooth"}=s,{code:c}=t;if(l.end.includes(c)){this.handleEnd(t);return}if(l.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=r.current,p=u?{x:u.left,y:u.top}:Yt;this.referenceCoordinates||(this.referenceCoordinates=p);const f=a(t,{active:n,context:r.current,currentCoordinates:p});if(f){const h=jo(f,p),x={x:0,y:0},{scrollableAncestors:w}=r.current;for(const y of w){const b=t.code,{isTop:g,isRight:m,isLeft:v,isBottom:j,maxScroll:S,minScroll:C}=Ch(y),k=Sv(y),E={x:Math.min(b===ve.Right?k.right-k.width/2:k.right,Math.max(b===ve.Right?k.left:k.left+k.width/2,f.x)),y:Math.min(b===ve.Down?k.bottom-k.height/2:k.bottom,Math.max(b===ve.Down?k.top:k.top+k.height/2,f.y))},D=b===ve.Right&&!m||b===ve.Left&&!v,P=b===ve.Down&&!j||b===ve.Up&&!g;if(D&&E.x!==f.x){const L=y.scrollLeft+h.x,re=b===ve.Right&&L<=S.x||b===ve.Left&&L>=C.x;if(re&&!h.y){y.scrollTo({left:L,behavior:i});return}re?x.x=y.scrollLeft-L:x.x=b===ve.Right?y.scrollLeft-S.x:y.scrollLeft-C.x,x.x&&y.scrollBy({left:-x.x,behavior:i});break}else if(P&&E.y!==f.y){const L=y.scrollTop+h.y,re=b===ve.Down&&L<=S.y||b===ve.Up&&L>=C.y;if(re&&!h.x){y.scrollTo({top:L,behavior:i});return}re?x.y=y.scrollTop-L:x.y=b===ve.Down?y.scrollTop-S.y:y.scrollTop-C.y,x.y&&y.scrollBy({top:-x.y,behavior:i});break}}this.handleMove(t,Or(jo(f,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Th.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=_h,onActivation:s}=t,{active:l}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const i=l.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function yd(e){return!!(e&&"distance"in e)}function vd(e){return!!(e&&"delay"in e)}class Bc{constructor(t,n,r){var s;r===void 0&&(r=Mv(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:l}=t,{target:a}=l;this.props=t,this.events=n,this.document=ts(a),this.documentListeners=new Ms(this.document),this.listeners=new Ms(r),this.windowListeners=new Ms(ct(a)),this.initialCoordinates=(s=So(l))!=null?s:Yt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Dt.Resize,this.handleCancel),this.windowListeners.add(Dt.DragStart,gd),this.windowListeners.add(Dt.VisibilityChange,this.handleCancel),this.windowListeners.add(Dt.ContextMenu,gd),this.documentListeners.add(Dt.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(vd(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(yd(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Dt.Click,_v,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Dt.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:i}}=l;if(!s)return;const c=(n=So(t))!=null?n:Yt,u=jo(s,c);if(!r&&i){if(yd(i)){if(i.tolerance!=null&&Ia(u,i.tolerance))return this.handleCancel();if(Ia(u,i.distance))return this.handleStart()}if(vd(i)&&Ia(u,i.tolerance))return this.handleCancel();this.handlePending(i,u);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===ve.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Dv={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Zo extends Bc{constructor(t){const{event:n}=t,r=ts(n.target);super(t,Dv,r)}}Zo.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Rv={move:{name:"mousemove"},end:{name:"mouseup"}};var Li;(function(e){e[e.RightClick=2]="RightClick"})(Li||(Li={}));class Pv extends Bc{constructor(t){super(t,Rv,ts(t.event.target))}}Pv.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Li.RightClick?!1:(r==null||r({event:n}),!0)}}];const Oa={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Uc extends Bc{constructor(t){super(t,Oa)}static setup(){return window.addEventListener(Oa.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Oa.move.name,t)};function t(){}}}Uc.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var _s;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(_s||(_s={}));var Eo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Eo||(Eo={}));function zv(e){let{acceleration:t,activator:n=_s.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:i=Eo.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:p,delta:f,threshold:h}=e;const x=Ov({delta:f,disabled:!l}),[w,y]=Yy(),b=d.useRef({x:0,y:0}),g=d.useRef({x:0,y:0}),m=d.useMemo(()=>{switch(n){case _s.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case _s.DraggableRect:return s}},[n,s,c]),v=d.useRef(null),j=d.useCallback(()=>{const C=v.current;if(!C)return;const k=b.current.x*g.current.x,E=b.current.y*g.current.y;C.scrollBy(k,E)},[]),S=d.useMemo(()=>i===Eo.TreeOrder?[...u].reverse():u,[i,u]);d.useEffect(()=>{if(!l||!u.length||!m){y();return}for(const C of S){if((r==null?void 0:r(C))===!1)continue;const k=u.indexOf(C),E=p[k];if(!E)continue;const{direction:D,speed:P}=jv(C,E,m,t,h);for(const L of["x","y"])x[L][D[L]]||(P[L]=0,D[L]=0);if(P.x>0||P.y>0){y(),v.current=C,w(j,a),b.current=P,g.current=D;return}}b.current={x:0,y:0},g.current={x:0,y:0},y()},[t,j,r,y,l,a,JSON.stringify(m),JSON.stringify(x),w,u,S,p,JSON.stringify(h)])}const Iv={x:{[Ye.Backward]:!1,[Ye.Forward]:!1},y:{[Ye.Backward]:!1,[Ye.Forward]:!1}};function Ov(e){let{delta:t,disabled:n}=e;const r=ko(t);return al(s=>{if(n||!r||!s)return Iv;const l={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Ye.Backward]:s.x[Ye.Backward]||l.x===-1,[Ye.Forward]:s.x[Ye.Forward]||l.x===1},y:{[Ye.Backward]:s.y[Ye.Backward]||l.y===-1,[Ye.Forward]:s.y[Ye.Forward]||l.y===1}}},[n,t,r])}function Lv(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return al(s=>{var l;return t==null?null:(l=r!=null?r:s)!=null?l:null},[r,t])}function Av(e,t){return d.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...l]},[]),[e,t])}var Js;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Js||(Js={}));var Ai;(function(e){e.Optimized="optimized"})(Ai||(Ai={}));const wd=new Map;function $v(e,t){let{dragging:n,dependencies:r,config:s}=t;const[l,a]=d.useState(null),{frequency:i,measure:c,strategy:u}=s,p=d.useRef(e),f=b(),h=Gs(f),x=d.useCallback(function(g){g===void 0&&(g=[]),!h.current&&a(m=>m===null?g:m.concat(g.filter(v=>!m.includes(v))))},[h]),w=d.useRef(null),y=al(g=>{if(f&&!n)return wd;if(!g||g===wd||p.current!==e||l!=null){const m=new Map;for(let v of e){if(!v)continue;if(l&&l.length>0&&!l.includes(v.id)&&v.rect.current){m.set(v.id,v.rect.current);continue}const j=v.node.current,S=j?new Fc(c(j),j):null;v.rect.current=S,S&&m.set(v.id,S)}return m}return g},[e,l,n,f,c]);return d.useEffect(()=>{p.current=e},[e]),d.useEffect(()=>{f||x()},[n,f]),d.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),d.useEffect(()=>{f||typeof i!="number"||w.current!==null||(w.current=setTimeout(()=>{x(),w.current=null},i))},[i,f,x,...r]),{droppableRects:y,measureDroppableContainers:x,measuringScheduled:l!=null};function b(){switch(u){case Js.Always:return!1;case Js.BeforeDragging:return n;default:return!n}}}function Hc(e,t){return al(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Fv(e,t){return Hc(e,t)}function Bv(e){let{callback:t,disabled:n}=e;const r=Jo(t),s=d.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:l}=window;return new l(r)},[r,n]);return d.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function ea(e){let{callback:t,disabled:n}=e;const r=Jo(t),s=d.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:l}=window;return new l(r)},[n]);return d.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Uv(e){return new Fc(ns(e),e)}function bd(e,t,n){t===void 0&&(t=Uv);const[r,s]=d.useState(null);function l(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c!=null?c:n)!=null?u:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=Bv({callback(c){if(e)for(const u of c){const{type:p,target:f}=u;if(p==="childList"&&f instanceof HTMLElement&&f.contains(e)){l();break}}}}),i=ea({callback:l});return Kt(()=>{l(),e?(i==null||i.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),a==null||a.disconnect())},[e]),r}function Hv(e){const t=Hc(e);return wh(e,t)}const kd=[];function Wv(e){const t=d.useRef(e),n=al(r=>e?r&&r!==kd&&e&&t.current&&e.parentNode===t.current.parentNode?r:$c(e):kd,[e]);return d.useEffect(()=>{t.current=e},[e]),n}function Vv(e){const[t,n]=d.useState(null),r=d.useRef(e),s=d.useCallback(l=>{const a=za(l.target);a&&n(i=>i?(i.set(a,Oi(a)),new Map(i)):null)},[]);return d.useEffect(()=>{const l=r.current;if(e!==l){a(l);const i=e.map(c=>{const u=za(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Oi(u)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=e}return()=>{a(e),a(l)};function a(i){i.forEach(c=>{const u=za(c);u==null||u.removeEventListener("scroll",s)})}},[s,e]),d.useMemo(()=>e.length?t?Array.from(t.values()).reduce((l,a)=>Or(l,a),Yt):Eh(e):Yt,[e,t])}function jd(e,t){t===void 0&&(t=[]);const n=d.useRef(null);return d.useEffect(()=>{n.current=null},t),d.useEffect(()=>{const r=e!==Yt;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?jo(e,n.current):Yt}function Xv(e){d.useEffect(()=>{if(!Go)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Kv(e,t){return d.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:l}=r;return n[s]=a=>{l(a,t)},n},{}),[e,t])}function Dh(e){return d.useMemo(()=>e?vv(e):null,[e])}const Sd=[];function Yv(e,t){t===void 0&&(t=ns);const[n]=e,r=Dh(n?ct(n):null),[s,l]=d.useState(Sd);function a(){l(()=>e.length?e.map(c=>Nh(c)?r:new Fc(t(c),c)):Sd)}const i=ea({callback:a});return Kt(()=>{i==null||i.disconnect(),a(),e.forEach(c=>i==null?void 0:i.observe(c))},[e]),s}function Rh(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return ol(t)?t:e}function Qv(e){let{measure:t}=e;const[n,r]=d.useState(null),s=d.useCallback(u=>{for(const{target:p}of u)if(ol(p)){r(f=>{const h=t(p);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),l=ea({callback:s}),a=d.useCallback(u=>{const p=Rh(u);l==null||l.disconnect(),p&&(l==null||l.observe(p)),r(p?t(p):null)},[t,l]),[i,c]=bo(a);return d.useMemo(()=>({nodeRef:i,rect:n,setRef:c}),[n,i,c])}const Gv=[{sensor:Zo,options:{}},{sensor:Th,options:{}}],Jv={current:{}},Ql={draggable:{measure:xd},droppable:{measure:xd,strategy:Js.WhileDragging,frequency:Ai.Optimized},dragOverlay:{measure:ns}};class Ts extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const qv={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ts,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:No},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ql,measureDroppableContainers:No,windowRect:null,measuringScheduled:!1},Ph={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:No,draggableNodes:new Map,over:null,measureDroppableContainers:No},cl=d.createContext(Ph),zh=d.createContext(qv);function Zv(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ts}}}function e1(e,t){switch(t.type){case He.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case He.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case He.DragEnd:case He.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case He.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Ts(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case He.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,l=e.droppable.containers.get(n);if(!l||r!==l.key)return e;const a=new Ts(e.droppable.containers);return a.set(n,{...l,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case He.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const l=new Ts(e.droppable.containers);return l.delete(n),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function t1(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=d.useContext(cl),l=ko(r),a=ko(n==null?void 0:n.id);return d.useEffect(()=>{if(!t&&!r&&l&&a!=null){if(!qo(l)||document.activeElement===l.target)return;const i=s.get(a);if(!i)return;const{activatorNode:c,node:u}=i;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const p of[c.current,u.current]){if(!p)continue;const f=Jy(p);if(f){f.focus();break}}})}},[r,t,s,a,l]),null}function Ih(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,l)=>l({transform:s,...r}),n):n}function n1(e){return d.useMemo(()=>({draggable:{...Ql.draggable,...e==null?void 0:e.draggable},droppable:{...Ql.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Ql.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function r1(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const l=d.useRef(!1),{x:a,y:i}=typeof s=="boolean"?{x:s,y:s}:s;Kt(()=>{if(!a&&!i||!t){l.current=!1;return}if(l.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const p=n(u),f=wh(p,r);if(a||(f.x=0),i||(f.y=0),l.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=kh(u);h&&h.scrollBy({top:f.y,left:f.x})}},[t,a,i,r,n])}const ta=d.createContext({...Yt,scaleX:1,scaleY:1});var Sn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Sn||(Sn={}));const Oh=d.memo(function(t){var n,r,s,l;let{id:a,accessibility:i,autoScroll:c=!0,children:u,sensors:p=Gv,collisionDetection:f=pv,measuring:h,modifiers:x,...w}=t;const y=d.useReducer(e1,void 0,Zv),[b,g]=y,[m,v]=rv(),[j,S]=d.useState(Sn.Uninitialized),C=j===Sn.Initialized,{draggable:{active:k,nodes:E,translate:D},droppable:{containers:P}}=b,L=k!=null?E.get(k):null,re=d.useRef({initial:null,translated:null}),_=d.useMemo(()=>{var N;return k!=null?{id:k,data:(N=L==null?void 0:L.data)!=null?N:Jv,rect:re}:null},[k,L]),T=d.useRef(null),[V,oe]=d.useState(null),[ae,z]=d.useState(null),W=Gs(w,Object.values(w)),H=il("DndDescribedBy",a),G=d.useMemo(()=>P.getEnabled(),[P]),K=n1(h),{droppableRects:Se,measureDroppableContainers:ge,measuringScheduled:ee}=$v(G,{dragging:C,dependencies:[D.x,D.y],config:K.droppable}),B=Lv(E,k),ie=d.useMemo(()=>ae?So(ae):null,[ae]),se=rs(),ne=Fv(B,K.draggable.measure);r1({activeNode:k!=null?E.get(k):null,config:se.layoutShiftCompensation,initialRect:ne,measure:K.draggable.measure});const Q=bd(B,K.draggable.measure,ne),ye=bd(B?B.parentElement:null),fe=d.useRef({activatorEvent:null,active:null,activeNode:B,collisionRect:null,collisions:null,droppableRects:Se,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ne=P.getNodeFor((n=fe.current.over)==null?void 0:n.id),pe=Qv({measure:K.dragOverlay.measure}),ut=(r=pe.nodeRef.current)!=null?r:B,_t=C?(s=pe.rect)!=null?s:Q:null,rn=!!(pe.nodeRef.current&&pe.rect),De=Hv(rn?null:Q),J=Dh(ut?ct(ut):null),Z=Wv(C?Ne!=null?Ne:B:null),he=Yv(Z),Re=Ih(x,{transform:{x:D.x-De.x,y:D.y-De.y,scaleX:1,scaleY:1},activatorEvent:ae,active:_,activeNodeRect:Q,containerNodeRect:ye,draggingNodeRect:_t,over:fe.current.over,overlayNodeRect:pe.rect,scrollableAncestors:Z,scrollableAncestorRects:he,windowRect:J}),yt=ie?Or(ie,D):null,Be=Vv(Z),Hn=jd(Be),gn=jd(Be,[Q]),vt=Or(Re,Hn),$t=_t?xv(_t,Re):null,Qt=_&&$t?f({active:_,collisionRect:$t,droppableRects:Se,droppableContainers:G,pointerCoordinates:yt}):null,cr=dv(Qt,"id"),[wt,Wn]=d.useState(null),ur=rn?Re:Or(Re,gn),A=hv(ur,(l=wt==null?void 0:wt.rect)!=null?l:null,Q),de=d.useRef(null),le=d.useCallback((N,I)=>{let{sensor:U,options:ke}=I;if(T.current==null)return;const Tt=E.get(T.current);if(!Tt)return;const bt=N.nativeEvent,Gt=new U({active:T.current,activeNode:Tt,event:bt,options:ke,context:fe,onAbort(Ge){if(!E.get(Ge))return;const{onDragAbort:Jt}=W.current,sn={id:Ge};Jt==null||Jt(sn),m({type:"onDragAbort",event:sn})},onPending(Ge,vn,Jt,sn){if(!E.get(Ge))return;const{onDragPending:ls}=W.current,wn={id:Ge,constraint:vn,initialCoordinates:Jt,offset:sn};ls==null||ls(wn),m({type:"onDragPending",event:wn})},onStart(Ge){const vn=T.current;if(vn==null)return;const Jt=E.get(vn);if(!Jt)return;const{onDragStart:sn}=W.current,ss={activatorEvent:bt,active:{id:vn,data:Jt.data,rect:re}};Mr.unstable_batchedUpdates(()=>{sn==null||sn(ss),S(Sn.Initializing),g({type:He.DragStart,initialCoordinates:Ge,active:vn}),m({type:"onDragStart",event:ss}),oe(de.current),z(bt)})},onMove(Ge){g({type:He.DragMove,coordinates:Ge})},onEnd:dr(He.DragEnd),onCancel:dr(He.DragCancel)});de.current=Gt;function dr(Ge){return async function(){const{active:Jt,collisions:sn,over:ss,scrollAdjustedTranslate:ls}=fe.current;let wn=null;if(Jt&&ls){const{cancelDrop:os}=W.current;wn={activatorEvent:bt,active:Jt,collisions:sn,delta:ls,over:ss},Ge===He.DragEnd&&typeof os=="function"&&await Promise.resolve(os(wn))&&(Ge=He.DragCancel)}T.current=null,Mr.unstable_batchedUpdates(()=>{g({type:Ge}),S(Sn.Uninitialized),Wn(null),oe(null),z(null),de.current=null;const os=Ge===He.DragEnd?"onDragEnd":"onDragCancel";if(wn){const la=W.current[os];la==null||la(wn),m({type:os,event:wn})}})}}},[E]),Pe=d.useCallback((N,I)=>(U,ke)=>{const Tt=U.nativeEvent,bt=E.get(ke);if(T.current!==null||!bt||Tt.dndKit||Tt.defaultPrevented)return;const Gt={active:bt};N(U,I.options,Gt)===!0&&(Tt.dndKit={capturedBy:I.sensor},T.current=ke,le(U,I))},[E,le]),dt=Av(p,Pe);Xv(p),Kt(()=>{Q&&j===Sn.Initializing&&S(Sn.Initialized)},[Q,j]),d.useEffect(()=>{const{onDragMove:N}=W.current,{active:I,activatorEvent:U,collisions:ke,over:Tt}=fe.current;if(!I||!U)return;const bt={active:I,activatorEvent:U,collisions:ke,delta:{x:vt.x,y:vt.y},over:Tt};Mr.unstable_batchedUpdates(()=>{N==null||N(bt),m({type:"onDragMove",event:bt})})},[vt.x,vt.y]),d.useEffect(()=>{const{active:N,activatorEvent:I,collisions:U,droppableContainers:ke,scrollAdjustedTranslate:Tt}=fe.current;if(!N||T.current==null||!I||!Tt)return;const{onDragOver:bt}=W.current,Gt=ke.get(cr),dr=Gt&&Gt.rect.current?{id:Gt.id,rect:Gt.rect.current,data:Gt.data,disabled:Gt.disabled}:null,Ge={active:N,activatorEvent:I,collisions:U,delta:{x:Tt.x,y:Tt.y},over:dr};Mr.unstable_batchedUpdates(()=>{Wn(dr),bt==null||bt(Ge),m({type:"onDragOver",event:Ge})})},[cr]),Kt(()=>{fe.current={activatorEvent:ae,active:_,activeNode:B,collisionRect:$t,collisions:Qt,droppableRects:Se,draggableNodes:E,draggingNode:ut,draggingNodeRect:_t,droppableContainers:P,over:wt,scrollableAncestors:Z,scrollAdjustedTranslate:vt},re.current={initial:_t,translated:$t}},[_,B,Qt,$t,E,ut,_t,Se,P,wt,Z,vt]),zv({...se,delta:D,draggingRect:$t,pointerCoordinates:yt,scrollableAncestors:Z,scrollableAncestorRects:he});const yn=d.useMemo(()=>({active:_,activeNode:B,activeNodeRect:Q,activatorEvent:ae,collisions:Qt,containerNodeRect:ye,dragOverlay:pe,draggableNodes:E,droppableContainers:P,droppableRects:Se,over:wt,measureDroppableContainers:ge,scrollableAncestors:Z,scrollableAncestorRects:he,measuringConfiguration:K,measuringScheduled:ee,windowRect:J}),[_,B,Q,ae,Qt,ye,pe,E,P,Se,wt,ge,Z,he,K,ee,J]),sa=d.useMemo(()=>({activatorEvent:ae,activators:dt,active:_,activeNodeRect:Q,ariaDescribedById:{draggable:H},dispatch:g,draggableNodes:E,over:wt,measureDroppableContainers:ge}),[ae,dt,_,Q,g,H,E,wt,ge]);return Me.createElement(gh.Provider,{value:v},Me.createElement(cl.Provider,{value:sa},Me.createElement(zh.Provider,{value:yn},Me.createElement(ta.Provider,{value:A},u)),Me.createElement(t1,{disabled:(i==null?void 0:i.restoreFocus)===!1})),Me.createElement(ov,{...i,hiddenTextDescribedById:H}));function rs(){const N=(V==null?void 0:V.autoScrollEnabled)===!1,I=typeof c=="object"?c.enabled===!1:c===!1,U=C&&!N&&!I;return typeof c=="object"?{...c,enabled:U}:{enabled:U}}}),s1=d.createContext(null),Nd="button",l1="Draggable";function o1(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const l=il(l1),{activators:a,activatorEvent:i,active:c,activeNodeRect:u,ariaDescribedById:p,draggableNodes:f,over:h}=d.useContext(cl),{role:x=Nd,roleDescription:w="draggable",tabIndex:y=0}=s!=null?s:{},b=(c==null?void 0:c.id)===t,g=d.useContext(b?ta:s1),[m,v]=bo(),[j,S]=bo(),C=Kv(a,t),k=Gs(n);Kt(()=>(f.set(t,{id:t,key:l,node:m,activatorNode:j,data:k}),()=>{const D=f.get(t);D&&D.key===l&&f.delete(t)}),[f,t]);const E=d.useMemo(()=>({role:x,tabIndex:y,"aria-disabled":r,"aria-pressed":b&&x===Nd?!0:void 0,"aria-roledescription":w,"aria-describedby":p.draggable}),[r,x,y,b,w,p.draggable]);return{active:c,activatorEvent:i,activeNodeRect:u,attributes:E,isDragging:b,listeners:r?void 0:C,node:m,over:h,setNodeRef:v,setActivatorNodeRef:S,transform:g}}function Lh(){return d.useContext(zh)}const a1="Droppable",i1={timeout:25};function c1(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const l=il(a1),{active:a,dispatch:i,over:c,measureDroppableContainers:u}=d.useContext(cl),p=d.useRef({disabled:n}),f=d.useRef(!1),h=d.useRef(null),x=d.useRef(null),{disabled:w,updateMeasurementsFor:y,timeout:b}={...i1,...s},g=Gs(y!=null?y:r),m=d.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{u(Array.isArray(g.current)?g.current:[g.current]),x.current=null},b)},[b]),v=ea({callback:m,disabled:w||!a}),j=d.useCallback((E,D)=>{v&&(D&&(v.unobserve(D),f.current=!1),E&&v.observe(E))},[v]),[S,C]=bo(j),k=Gs(t);return d.useEffect(()=>{!v||!S.current||(v.disconnect(),f.current=!1,v.observe(S.current))},[S,v]),d.useEffect(()=>(i({type:He.RegisterDroppable,element:{id:r,key:l,disabled:n,node:S,rect:h,data:k}}),()=>i({type:He.UnregisterDroppable,key:l,id:r})),[r]),d.useEffect(()=>{n!==p.current.disabled&&(i({type:He.SetDroppableDisabled,id:r,key:l,disabled:n}),p.current.disabled=n)},[r,l,n,i]),{active:a,rect:h,isOver:(c==null?void 0:c.id)===r,node:S,over:c,setNodeRef:C}}function u1(e){let{animation:t,children:n}=e;const[r,s]=d.useState(null),[l,a]=d.useState(null),i=ko(n);return!n&&!r&&i&&s(i),Kt(()=>{if(!l)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(t(u,l)).then(()=>{s(null)})},[t,r,l]),Me.createElement(Me.Fragment,null,n,r?d.cloneElement(r,{ref:a}):null)}const d1={x:0,y:0,scaleX:1,scaleY:1};function f1(e){let{children:t}=e;return Me.createElement(cl.Provider,{value:Ph},Me.createElement(ta.Provider,{value:d1},t))}const p1={position:"fixed",touchAction:"none"},h1=e=>qo(e)?"transform 250ms ease":void 0,m1=d.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:l,className:a,rect:i,style:c,transform:u,transition:p=h1}=e;if(!i)return null;const f=s?u:{...u,scaleX:1,scaleY:1},h={...p1,width:i.width,height:i.height,top:i.top,left:i.left,transform:mn.Transform.toString(f),transformOrigin:s&&r?iv(r,i):void 0,transition:typeof p=="function"?p(r):p,...c};return Me.createElement(n,{className:a,style:h,ref:t},l)}),x1=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:l,className:a}=e;if(l!=null&&l.active)for(const[i,c]of Object.entries(l.active))c!==void 0&&(s[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,c));if(l!=null&&l.dragOverlay)for(const[i,c]of Object.entries(l.dragOverlay))c!==void 0&&r.node.style.setProperty(i,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);a!=null&&a.active&&n.node.classList.remove(a.active)}},g1=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:mn.Transform.toString(t)},{transform:mn.Transform.toString(n)}]},y1={duration:250,easing:"ease",keyframes:g1,sideEffects:x1({styles:{active:{opacity:"0"}}})};function v1(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return Jo((l,a)=>{if(t===null)return;const i=n.get(l);if(!i)return;const c=i.node.current;if(!c)return;const u=Rh(a);if(!u)return;const{transform:p}=ct(a).getComputedStyle(a),f=bh(p);if(!f)return;const h=typeof t=="function"?t:w1(t);return Mh(c,s.draggable.measure),h({active:{id:l,data:i.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function w1(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...y1,...e};return l=>{let{active:a,dragOverlay:i,transform:c,...u}=l;if(!t)return;const p={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},f={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/i.rect.height:1},h={x:c.x-p.x,y:c.y-p.y,...f},x=s({...u,active:a,dragOverlay:i,transform:{initial:c,final:h}}),[w]=x,y=x[x.length-1];if(JSON.stringify(w)===JSON.stringify(y))return;const b=r==null?void 0:r({active:a,dragOverlay:i,...u}),g=i.node.animate(x,{duration:t,easing:n,fill:"forwards"});return new Promise(m=>{g.onfinish=()=>{b==null||b(),m()}})}}let Cd=0;function b1(e){return d.useMemo(()=>{if(e!=null)return Cd++,Cd},[e])}const Ah=Me.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:l,modifiers:a,wrapperElement:i="div",className:c,zIndex:u=999}=e;const{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggableNodes:w,droppableContainers:y,dragOverlay:b,over:g,measuringConfiguration:m,scrollableAncestors:v,scrollableAncestorRects:j,windowRect:S}=Lh(),C=d.useContext(ta),k=b1(f==null?void 0:f.id),E=Ih(a,{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggingNodeRect:b.rect,over:g,overlayNodeRect:b.rect,scrollableAncestors:v,scrollableAncestorRects:j,transform:C,windowRect:S}),D=Hc(h),P=v1({config:r,draggableNodes:w,droppableContainers:y,measuringConfiguration:m}),L=D?b.setRef:void 0;return Me.createElement(f1,null,Me.createElement(u1,{animation:P},f&&k?Me.createElement(m1,{key:k,id:f.id,ref:L,as:i,activatorEvent:p,adjustScale:t,className:c,transition:l,rect:D,style:{zIndex:u,...s},transform:E},n):null))});function na(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function k1(e,t){return e.reduce((n,r,s)=>{const l=t.get(r);return l&&(n[s]=l),n},Array(e.length))}function El(e){return e!==null&&e>=0}function j1(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function S1(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const $h=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const l=na(t,r,n),a=t[s],i=l[s];return!i||!a?null:{x:i.left-a.left,y:i.top-a.top,scaleX:i.width/a.width,scaleY:i.height/a.height}},Ml={scaleX:1,scaleY:1},Fh=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:l,overIndex:a}=e;const i=(t=l[n])!=null?t:r;if(!i)return null;if(s===n){const u=l[a];return u?{x:0,y:n<a?u.top+u.height-(i.top+i.height):u.top-i.top,...Ml}:null}const c=N1(l,s,n);return s>n&&s<=a?{x:0,y:-i.height-c,...Ml}:s<n&&s>=a?{x:0,y:i.height+c,...Ml}:{x:0,y:0,...Ml}};function N1(e,t,n){const r=e[t],s=e[t-1],l=e[t+1];return r?n<t?s?r.top-(s.top+s.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Bh="Sortable",Uh=Me.createContext({activeIndex:-1,containerId:Bh,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:$h,disabled:{draggable:!1,droppable:!1}});function Hh(e){let{children:t,id:n,items:r,strategy:s=$h,disabled:l=!1}=e;const{active:a,dragOverlay:i,droppableRects:c,over:u,measureDroppableContainers:p}=Lh(),f=il(Bh,n),h=i.rect!==null,x=d.useMemo(()=>r.map(C=>typeof C=="object"&&"id"in C?C.id:C),[r]),w=a!=null,y=a?x.indexOf(a.id):-1,b=u?x.indexOf(u.id):-1,g=d.useRef(x),m=!j1(x,g.current),v=b!==-1&&y===-1||m,j=S1(l);Kt(()=>{m&&w&&p(x)},[m,x,w,p]),d.useEffect(()=>{g.current=x},[x]);const S=d.useMemo(()=>({activeIndex:y,containerId:f,disabled:j,disableTransforms:v,items:x,overIndex:b,useDragOverlay:h,sortedRects:k1(x,c),strategy:s}),[y,f,j.draggable,j.droppable,v,x,b,c,h,s]);return Me.createElement(Uh.Provider,{value:S},t)}const C1=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return na(n,r,s).indexOf(t)},E1=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:l,newIndex:a,previousItems:i,previousContainerId:c,transition:u}=e;return!u||!r||i!==l&&s===a?!1:n?!0:a!==s&&t===c},M1={duration:200,easing:"ease"},Wh="transform",_1=mn.Transition.toString({property:Wh,duration:0,easing:"linear"}),T1={roleDescription:"sortable"};function D1(e){let{disabled:t,index:n,node:r,rect:s}=e;const[l,a]=d.useState(null),i=d.useRef(n);return Kt(()=>{if(!t&&n!==i.current&&r.current){const c=s.current;if(c){const u=ns(r.current,{ignoreTransform:!0}),p={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(p.x||p.y)&&a(p)}}n!==i.current&&(i.current=n)},[t,n,r,s]),d.useEffect(()=>{l&&a(null)},[l]),l}function Vh(e){let{animateLayoutChanges:t=E1,attributes:n,disabled:r,data:s,getNewIndex:l=C1,id:a,strategy:i,resizeObserverConfig:c,transition:u=M1}=e;const{items:p,containerId:f,activeIndex:h,disabled:x,disableTransforms:w,sortedRects:y,overIndex:b,useDragOverlay:g,strategy:m}=d.useContext(Uh),v=R1(r,x),j=p.indexOf(a),S=d.useMemo(()=>({sortable:{containerId:f,index:j,items:p},...s}),[f,s,j,p]),C=d.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:k,node:E,isOver:D,setNodeRef:P}=c1({id:a,data:S,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...c}}),{active:L,activatorEvent:re,activeNodeRect:_,attributes:T,setNodeRef:V,listeners:oe,isDragging:ae,over:z,setActivatorNodeRef:W,transform:H}=o1({id:a,data:S,attributes:{...T1,...n},disabled:v.draggable}),G=Ky(P,V),K=!!L,Se=K&&!w&&El(h)&&El(b),ge=!g&&ae,ee=ge&&Se?H:null,B=i!=null?i:m,ie=Se?ee!=null?ee:B({rects:y,activeNodeRect:_,activeIndex:h,overIndex:b,index:j}):null,se=El(h)&&El(b)?l({id:a,items:p,activeIndex:h,overIndex:b}):j,ne=L==null?void 0:L.id,Q=d.useRef({activeId:ne,items:p,newIndex:se,containerId:f}),ye=p!==Q.current.items,fe=t({active:L,containerId:f,isDragging:ae,isSorting:K,id:a,index:j,items:p,newIndex:Q.current.newIndex,previousItems:Q.current.items,previousContainerId:Q.current.containerId,transition:u,wasDragging:Q.current.activeId!=null}),Ne=D1({disabled:!fe,index:j,node:E,rect:k});return d.useEffect(()=>{K&&Q.current.newIndex!==se&&(Q.current.newIndex=se),f!==Q.current.containerId&&(Q.current.containerId=f),p!==Q.current.items&&(Q.current.items=p)},[K,se,f,p]),d.useEffect(()=>{if(ne===Q.current.activeId)return;if(ne!=null&&Q.current.activeId==null){Q.current.activeId=ne;return}const ut=setTimeout(()=>{Q.current.activeId=ne},50);return()=>clearTimeout(ut)},[ne]),{active:L,activeIndex:h,attributes:T,data:S,rect:k,index:j,newIndex:se,items:p,isOver:D,isSorting:K,isDragging:ae,listeners:oe,node:E,overIndex:b,over:z,setNodeRef:G,setActivatorNodeRef:W,setDroppableNodeRef:P,setDraggableNodeRef:V,transform:Ne!=null?Ne:ie,transition:pe()};function pe(){if(Ne||ye&&Q.current.newIndex===j)return _1;if(!(ge&&!qo(re)||!u)&&(K||fe))return mn.Transition.toString({...u,property:Wh})}}function R1(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}ve.Down,ve.Right,ve.Up,ve.Left;const we={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Ed={always:{label:"",color:"#6b9b6e",bg:"#e0f0e1"},keyword:{label:"",color:"#9b6b6b",bg:"#f0e0e0"},mood:{label:"",color:"#9b7a3b",bg:"#f0ebd8"},message_mode:{label:"",color:"#6b7b9b",bg:"#e0e6f0"}};function Xh({activation:e}){const t=Ed[e]||Ed.always;return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:t.color,background:t.bg},children:t.label})}const _l=80;function P1({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/_l);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{if(p.target.closest(".drag-handle"))return;const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-_l,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/_l)}`),f.current=y},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-_l):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:we.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(qr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function z1({book:e,onTap:t,onDelete:n}){var p;const{attributes:r,listeners:s,setNodeRef:l,transform:a,transition:i,isDragging:c}=Vh({id:String(e.id)}),u={transform:mn.Transform.toString(a),transition:i,opacity:c?0:1};return o.jsx("div",{ref:l,style:u,className:"mb-3",children:o.jsx(P1,{onDelete:()=>n(e),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:we.bg,userSelect:"none"},children:[o.jsx("div",{...r,...s,className:"drag-handle shrink-0 cursor-grab touch-none px-1",style:{cursor:c?"grabbing":"grab"},children:o.jsx(rl,{size:18,style:{color:we.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>t(e),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:we.text},children:e.name}),o.jsx(Xh,{activation:e.activation})]}),e.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:we.textMuted},children:e.folder}),e.activation==="keyword"&&((p=e.keywords)==null?void 0:p.length)>0&&o.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[e.keywords.slice(0,3).map((f,h)=>o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(232,160,191,0.15)",color:we.accentDark},children:f},h)),e.keywords.length>3&&o.jsxs("span",{className:"text-[10px]",style:{color:we.textMuted},children:["+",e.keywords.length-3]})]})]}),o.jsx(Vr,{size:16,style:{color:we.textMuted,flexShrink:0},onClick:()=>t(e)})]})})})}function I1({folder:e,books:t,onDelete:n,onTap:r,onReorder:s}){const[l,a]=d.useState(!0),[i,c]=d.useState(null),u=yh(Co(Zo,{activationConstraint:{distance:5}}),Co(Uc,{activationConstraint:{delay:200,tolerance:5}})),p=({active:h,over:x})=>{if(c(null),!x||h.id===x.id)return;const w=t.findIndex(g=>String(g.id)===String(h.id)),y=t.findIndex(g=>String(g.id)===String(x.id));if(w<0||y<0)return;const b=na(t,w,y);s(e,b)},f=i?t.find(h=>String(h.id)===String(i)):null;return o.jsxs("div",{className:"mb-4",children:[o.jsxs("button",{className:"mb-2 flex w-full items-center gap-2 px-1",onClick:()=>a(!l),children:[l?o.jsx(sr,{size:14,style:{color:we.textMuted}}):o.jsx(Vr,{size:14,style:{color:we.textMuted}}),o.jsx("span",{className:"text-[12px] font-bold tracking-wide",style:{color:we.textMuted},children:e||""}),o.jsx("span",{className:"ml-1 rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.12)",color:we.textMuted},children:t.length})]}),l&&o.jsxs(Oh,{sensors:u,collisionDetection:vh,onDragStart:({active:h})=>c(h.id),onDragEnd:p,children:[o.jsx(Hh,{items:t.map(h=>String(h.id)),strategy:Fh,children:t.map(h=>o.jsx(z1,{book:h,onTap:r,onDelete:n},h.id))}),o.jsx(Ah,{children:f&&o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:we.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx("div",{className:"shrink-0 px-1",children:o.jsx(rl,{size:18,style:{color:we.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:we.text},children:f.name}),o.jsx(Xh,{activation:f.activation})]}),f.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:we.textMuted},children:f.folder})]}),o.jsx(Vr,{size:16,style:{color:we.textMuted,flexShrink:0}})]})})]})]})}function O1(){const e=At(),[t,n]=d.useState([]),[r,s]=d.useState(!0),[l,a]=d.useState(null),[i,c]=d.useState(null),u=y=>{c(y),setTimeout(()=>c(null),2e3)},p=()=>{s(!0),$("/api/world-books").then(y=>n(y.world_books||[])).catch(()=>u("")).finally(()=>s(!1))};d.useEffect(()=>{p()},[]);const f=async y=>{a(null);try{await $(`/api/world-books/${y.id}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==y.id)),u("")}catch(b){u("")}},h=(y,b)=>{const g=y||"";n(m=>[...m.filter(j=>(j.folder||"")!==g),...b]),$("/api/world-books/reorder",{method:"PUT",body:{ordered_ids:b.map(m=>m.id)}}).catch(()=>u(""))},x={};for(const y of t){const b=y.folder||"";x[b]||(x[b]=[]),x[b].push(y)}const w=Object.keys(x).sort((y,b)=>y===""?1:b===""?-1:y.localeCompare(b));return o.jsxs("div",{className:"flex h-full flex-col",style:{background:we.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full nm-active",style:{background:we.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:we.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:we.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:we.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books/new"),children:o.jsx(Jr,{size:20,style:{color:we.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-t-transparent",style:{borderColor:we.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(rl,{size:36,style:{color:we.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:we.textMuted},children:" + "})]}):w.map(y=>o.jsx(I1,{folder:y,books:x[y],onDelete:b=>a(b),onTap:b=>e(`/world-books/${b.id}`),onReorder:h},y))}),l&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>a(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:we.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:y=>y.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:we.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:we.textMuted},children:["",l.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:we.bg,boxShadow:"var(--card-shadow-sm)",color:we.text},onClick:()=>a(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>f(l),children:""})]})]})}),i&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const q={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function L1({label:e,value:t,onChange:n,placeholder:r}){return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:q.textMuted},children:e}),o.jsx("input",{type:"text",value:t,onChange:s=>n(s.target.value),placeholder:r,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:q.bg,color:q.text}})]})}function A1({value:e,onChange:t,folders:n}){const[r,s]=d.useState(!1),l=n.filter(a=>a!==e&&a.toLowerCase().includes(e.toLowerCase()));return o.jsxs("div",{className:"relative mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:q.textMuted},children:""}),o.jsx("input",{type:"text",value:e,onChange:a=>{t(a.target.value),s(!0)},onFocus:()=>s(!0),onBlur:()=>setTimeout(()=>s(!1),150),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:q.bg,color:q.text}}),r&&l.length>0&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[160px] overflow-y-auto rounded-[14px]",style:{background:q.bg,boxShadow:"var(--card-shadow)"},children:l.map(a=>o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:q.text},onMouseDown:()=>{t(a),s(!1)},children:a},a))})]})}function $1({value:e,onChange:t}){const n=[{value:"always",label:""},{value:"keyword",label:""},{value:"mood",label:""},{value:"message_mode",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:q.textMuted},children:""}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:q.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:e===r.value?q.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?q.accentDark:q.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})]})}function F1({selected:e,onChange:t}){const n=[{value:"long",label:""},{value:"short",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:q.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:q.bg,minHeight:48},children:n.map(r=>{const s=e===r.value;return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?q.accentDark:q.bg,color:s?"white":q.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>t(r.value),children:r.label},r.value)})})]})}const B1=[{value:"happy",label:""},{value:"sad",label:""},{value:"angry",label:""},{value:"anxious",label:""},{value:"tired",label:""},{value:"emo",label:""},{value:"flirty",label:""},{value:"proud",label:""},{value:"calm",label:""}];function U1({selected:e,onChange:t}){const n=r=>{e.includes(r)?t(e.filter(s=>s!==r)):t([...e,r])};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:q.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:q.bg,minHeight:48},children:B1.map(r=>{const s=e.includes(r.value);return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?q.accentDark:q.bg,color:s?"white":q.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>n(r.value),children:r.label},r.value)})})]})}function H1({keywords:e,onChange:t}){const[n,r]=d.useState(""),s=()=>{const l=n.trim();if(!l||e.includes(l)){r("");return}t([...e,l]),r("")};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:q.textMuted},children:""}),o.jsxs("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:q.bg,minHeight:48},children:[e.map(l=>o.jsxs("span",{className:"flex items-center gap-1 rounded-full px-2.5 py-1 text-[12px] font-medium",style:{background:"rgba(232,160,191,0.2)",color:q.accentDark},children:[l,o.jsx("button",{onClick:()=>t(e.filter(a=>a!==l)),children:o.jsx(ll,{size:10})})]},l)),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),onKeyDown:l=>{(l.key==="Enter"||l.key===",")&&(l.preventDefault(),s())},placeholder:"...",className:"w-24 bg-transparent text-[12px] outline-none",style:{color:q.text}}),n.trim()&&o.jsx("button",{className:"flex h-5 w-5 items-center justify-center rounded-full",style:{background:q.accentDark},onClick:s,children:o.jsx(Jr,{size:10,color:"white"})})]})]}),o.jsx("p",{className:"mt-1 text-[10px]",style:{color:q.textMuted},children:" Enter "})]})}function W1({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:q.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:q.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Xr,{size:18,style:{color:q.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:q.bg,color:q.text},placeholder:"..."})]})}function Md(){const e=At(),{id:t}=lh(),n=!t,[r,s]=d.useState(""),[l,a]=d.useState(""),[i,c]=d.useState("always"),[u,p]=d.useState([]),[f,h]=d.useState("long"),[x,w]=d.useState(""),[y,b]=d.useState(!1),[g,m]=d.useState(!n),[v,j]=d.useState(null),[S,C]=d.useState([]),[k,E]=d.useState(!1),D=d.useRef(null),P=_=>{var oe;const T=(oe=_.target.files)==null?void 0:oe[0];if(!T)return;const V=new FileReader;V.onload=ae=>w(ae.target.result||""),V.readAsText(T),_.target.value=""},L=_=>{j(_),setTimeout(()=>j(null),2e3)};d.useEffect(()=>{$("/api/world-books").then(_=>{const T=_.world_books||[];if(C([...new Set(T.map(V=>V.folder).filter(Boolean))]),!n){const V=T.find(oe=>String(oe.id)===String(t));V&&(s(V.name),a(V.folder||""),c(V.activation),p(V.keywords||[]),h(V.message_mode||"long"),w(V.content))}}).catch(()=>L("")).finally(()=>m(!1))},[t,n]);const re=async()=>{if(!r.trim()){L("");return}b(!0);try{const _={name:r.trim(),folder:l.trim()||null,activation:i,keywords:i==="keyword"||i==="mood"?u:[],message_mode:i==="message_mode"?f:null,content:x};n?(await $("/api/world-books",{method:"POST",body:_}),L("")):(await $(`/api/world-books/${t}`,{method:"PUT",body:_}),L(""))}catch(_){L(": "+_.message)}finally{b(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:q.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:q.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:q.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:y?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:re,disabled:y,children:o.jsx(Qo,{size:18,style:{color:q.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:g?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:q.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"rounded-[20px] p-5 mb-4",style:{background:q.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(L1,{label:"",value:r,onChange:s,placeholder:""}),o.jsx(A1,{value:l,onChange:a,folders:S}),o.jsx($1,{value:i,onChange:c}),i==="keyword"&&o.jsx(H1,{keywords:u,onChange:p}),i==="mood"&&o.jsx(U1,{selected:u,onChange:p}),i==="message_mode"&&o.jsx(F1,{selected:f,onChange:h})]}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:q.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:q.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:q.bg},onClick:()=>{var _;return(_=D.current)==null?void 0:_.click()},title:"",children:o.jsx(Yo,{size:13,style:{color:q.textMuted}})}),o.jsx("input",{ref:D,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:P}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:q.bg},onClick:()=>E(!0),title:"",children:o.jsx(sl,{size:13,style:{color:q.accentDark}})})]})]}),o.jsx("textarea",{value:x,onChange:_=>w(_.target.value),placeholder:"...",rows:10,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:q.bg,color:q.text}})]})]})}),k&&o.jsx(W1,{value:x,onChange:w,onClose:()=>E(!1)}),v&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:v})})]})}const Ae={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Tl=80;function V1({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Tl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Tl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Tl)}`),f.current=y},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Tl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Ae.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(qr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function X1({assistant:e,localAvatar:t,onTap:n}){var s;const r=t||null;return o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Ae.bg,userSelect:"none"},onClick:()=>n(e),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:48,height:48,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Ae.bg},children:r?o.jsx("img",{src:r,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[20px]",style:{color:Ae.accentDark},children:((s=e.name)==null?void 0:s[0])||"?"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[15px] font-bold",style:{color:Ae.text},children:e.name}),e.created_at&&o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:Ae.textMuted},children:e.created_at.slice(0,10)})]}),o.jsx(Vr,{size:16,style:{color:Ae.textMuted,flexShrink:0}})]})}function K1(){const e=At(),[t,n]=d.useState([]),[r,s]=d.useState({}),[l,a]=d.useState(!0),[i,c]=d.useState(null),[u,p]=d.useState(null),f=w=>{p(w),setTimeout(()=>p(null),2e3)},h=()=>{a(!0),$("/api/assistants").then(async w=>{const y=w.assistants||[];n(y);const b={};await Promise.all(y.map(async g=>{const m=await Zr(`assistant-avatar-${g.id}`).catch(()=>null);m&&(b[g.id]=m)})),s(b)}).catch(()=>f("")).finally(()=>a(!1))};d.useEffect(()=>{h()},[]);const x=async w=>{c(null);try{await $(`/api/assistants/${w.id}`,{method:"DELETE"}),n(y=>y.filter(b=>b.id!==w.id)),f("")}catch(y){f("")}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ae.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ae.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:Ae.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ae.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ae.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants/new"),children:o.jsx(Jr,{size:20,style:{color:Ae.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ae.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(uh,{size:36,style:{color:Ae.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:Ae.textMuted},children:" + "})]}):t.map(w=>o.jsx(V1,{onDelete:()=>c(w),children:o.jsx(X1,{assistant:w,localAvatar:r[w.id],onTap:y=>e(`/assistants/${y.id}`)})},w.id))}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>c(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Ae.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:w=>w.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Ae.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Ae.textMuted},children:["",i.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Ae.bg,boxShadow:"var(--card-shadow-sm)",color:Ae.text},onClick:()=>c(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>x(i),children:""})]})]})}),u&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:u})})]})}const M={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function _d({label:e,value:t,onChange:n,placeholder:r,rows:s,onExpand:l,onHistory:a}){const i=d.useRef(null),c=u=>{var h;const p=(h=u.target.files)==null?void 0:h[0];if(!p)return;const f=new FileReader;f.onload=x=>n(x.target.result||""),f.readAsText(p),u.target.value=""};return o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),o.jsxs("div",{className:"flex items-center gap-2",children:[a&&o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:a,children:o.jsx(Iy,{size:13,style:{color:M.textMuted}})}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var u;return(u=i.current)==null?void 0:u.click()},children:o.jsx(Yo,{size:13,style:{color:M.textMuted}})}),o.jsx("input",{ref:i,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:c}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:l,children:o.jsx(sl,{size:13,style:{color:M.accentDark}})})]})]}),o.jsx("textarea",{value:t,onChange:u=>n(u.target.value),placeholder:r,rows:s||6,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})}function La({label:e,value:t,onChange:n,presets:r}){const[s,l]=d.useState(!1),a=r.find(i=>i.id===t);return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text},onClick:()=>l(!s),children:[o.jsx("span",{style:{color:a?M.text:M.textMuted},children:a?a.name:""}),o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:M.textMuted,transform:s?"rotate(180deg)":"none",transition:"transform 0.2s"},children:o.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&o.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:M.bg,boxShadow:"var(--card-shadow)",zIndex:40},children:[o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:M.textMuted},onClick:()=>{n(null),l(!1)},children:""}),r.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[14px]",style:{color:M.text},onClick:()=>{n(i.id),l(!1)},children:[o.jsx("span",{children:i.name}),i.id===t&&o.jsx(Wr,{size:14,style:{color:M.accentDark}})]},i.id))]})]})]})}function Aa({value:e,onChange:t,onClose:n,title:r,placeholder:s}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:r||""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Xr,{size:18,style:{color:M.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:l=>t(l.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:M.bg,color:M.text},placeholder:s||""})]})}const Dl=80;function Y1({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Dl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Dl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Dl)}`),f.current=y},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Dl):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(qr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function Q1({title:e,message:t,onConfirm:n,onCancel:r}){return o.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:r,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:M.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:s=>s.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:M.text},children:e||""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:M.textMuted},children:t}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.text},onClick:r,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:n,children:""})]})]})})}function G1({items:e,currentContent:t,onApply:n,onClose:r,onDelete:s}){const[l,a]=d.useState("current"),[i,c]=d.useState(null),[u,p]=d.useState(null),f=x=>x?new Date(x).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",h=async()=>{if(l==="current"){r();return}const x=e.find(w=>w.id===l);x&&await n(x.content),r()};return i?o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsxs("span",{className:"text-[15px] font-bold",style:{color:M.text},children:[" ",i.version]}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>c(null),children:o.jsx(Xr,{size:18,style:{color:M.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:o.jsx("div",{className:"rounded-[14px] p-4",style:{boxShadow:"var(--inset-shadow)",background:M.bg},children:o.jsx("p",{className:"whitespace-pre-wrap text-[13px] leading-relaxed",style:{color:M.text},children:i.content})})})]}):o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:r,children:o.jsx(Xr,{size:18,style:{color:M.accentDark}})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[o.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:l==="current"?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[o.jsx("button",{onClick:()=>a("current"),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:l==="current"?M.accentDark:M.bg,boxShadow:l==="current"?"none":"var(--icon-inset)"},children:l==="current"&&o.jsx(Wr,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:""}),o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#2a9d5c",background:"rgba(42,157,92,0.12)"},children:""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:t})]})]}),e.length===0&&o.jsx("p",{className:"py-8 text-center text-[13px]",style:{color:M.textMuted},children:""}),e.map(x=>o.jsx("div",{className:"mb-2",children:o.jsx(Y1,{onDelete:()=>p(x.id),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:l===x.id?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[o.jsx("button",{onClick:()=>a(x.id),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:l===x.id?M.accentDark:M.bg,boxShadow:l===x.id?"none":"var(--icon-inset)"},children:l===x.id&&o.jsx(Wr,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>c(x),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:[" ",x.version]}),o.jsx("span",{className:"text-[10px]",style:{color:M.textMuted},children:f(x.created_at)})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:x.content})]})]})})},x.id))]}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsx("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:h,children:""})}),u&&o.jsx(Q1,{message:"",onCancel:()=>p(null),onConfirm:()=>{s(u),p(null)}})]})}function Kh(e){return e==="always"?"":e==="keyword"?"":e==="message_mode"?"":""}function Yh(e){return!e||!Array.isArray(e)?[]:e.map((t,n)=>typeof t=="object"&&t!==null?t:{id:t,position:"after",sort_order:n})}function J1({item:e,book:t,position:n,sectionList:r,onRemove:s,onChangePosition:l}){const{attributes:a,listeners:i,setNodeRef:c,transform:u,transition:p,isDragging:f}=Vh({id:String(e.id)}),h={transform:mn.Transform.toString(u),transition:p,opacity:f?0:1};return t?o.jsxs("div",{ref:c,style:h,className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",children:[o.jsx("div",{...a,...i,className:"cursor-grab touch-none p-1",style:{cursor:f?"grabbing":"grab"},children:o.jsx(rl,{size:14,style:{color:M.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.text},children:t.name}),o.jsxs("div",{className:"text-[10px]",style:{color:M.textMuted},children:[Kh(t.activation),t.folder?`  ${t.folder}`:""]})]}),o.jsx("button",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},onClick:()=>l(e.id,n==="before"?"after":"before"),children:n==="before"?"":""}),o.jsx("button",{onClick:()=>s(e.id),children:o.jsx(ll,{size:14,style:{color:M.textMuted}})})]}):null}function q1({allBooks:e,mountedIds:t,onClose:n,onConfirm:r}){const[s,l]=d.useState(new Set(t)),a={};e.forEach(u=>{const p=u.folder||"";a[p]||(a[p]=[]),a[p].push(u)});const i=u=>{l(p=>{const f=new Set(p);return f.has(u)?f.delete(u):f.add(u),f})},c=u=>{const p=u.every(f=>s.has(f.id));l(f=>{const h=new Set(f);return p?u.forEach(x=>h.delete(x.id)):u.forEach(x=>h.add(x.id)),h})};return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-end",style:{background:"rgba(0,0,0,0.4)"},children:o.jsxs("div",{className:"flex w-full flex-col rounded-t-[24px]",style:{background:M.bg,maxHeight:"82vh"},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between p-5 pb-3",children:[o.jsx("h3",{className:"text-[16px] font-bold",style:{color:M.text},children:""}),o.jsx("button",{onClick:n,children:o.jsx(ll,{size:20,style:{color:M.textMuted}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5",children:Object.entries(a).map(([u,p])=>{const f=p.every(h=>s.has(h.id));return o.jsxs("div",{className:"mb-5",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:u}),o.jsx("button",{className:"rounded-full px-2.5 py-1 text-[11px] font-semibold",style:{background:f?"rgba(201,98,138,0.15)":"rgba(136,136,160,0.1)",color:f?M.accentDark:M.textMuted},onClick:()=>c(p),children:f?"":""})]}),o.jsx("div",{className:"space-y-2",children:p.map(h=>{const x=s.has(h.id);return o.jsxs("button",{className:"flex w-full items-center gap-3 rounded-[14px] p-3",style:{background:M.bg,boxShadow:x?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>i(h.id),children:[o.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:x?M.accentDark:M.bg,boxShadow:x?"none":"var(--icon-inset)"},children:x&&o.jsx(Wr,{size:12,color:"white"})}),o.jsx("div",{className:"flex-1 min-w-0 text-left",children:o.jsx("div",{className:"truncate text-[13px] font-medium",style:{color:x?M.accentDark:M.text},children:h.name})}),o.jsx("span",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},children:Kh(h.activation)})]},h.id)})})]},u)})}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsxs("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>r([...s]),children:[" ",s.size,""]})})]})})}function Z1({ruleSetIds:e,onChange:t,allBooks:n}){const[r,s]=d.useState(!1),[l,a]=d.useState(null),i=Yh(e),c=i.filter(S=>S.position==="before").sort((S,C)=>S.sort_order-C.sort_order),u=i.filter(S=>S.position==="after").sort((S,C)=>S.sort_order-C.sort_order),p=S=>n.find(C=>C.id===S||C.id===Number(S)),f=yh(Co(Zo,{activationConstraint:{distance:5}}),Co(Uc,{activationConstraint:{delay:150,tolerance:5}})),h=({active:S})=>a(S.id),x=({active:S,over:C})=>{if(!C)return;const k=i.find(D=>String(D.id)===String(S.id)),E=i.find(D=>String(D.id)===String(C.id));if(!(!k||!E)&&k.position!==E.position){const D=i.map(P=>String(P.id)===String(k.id)?{...P,position:E.position}:P);t(D)}},w=({active:S,over:C})=>{if(a(null),!C||S.id===C.id)return;const k=i.find(T=>String(T.id)===String(S.id)),E=i.find(T=>String(T.id)===String(C.id));if(!k||!E||k.position!==E.position)return;const D=k.position==="before"?[...c]:[...u],P=D.findIndex(T=>String(T.id)===String(S.id)),L=D.findIndex(T=>String(T.id)===String(C.id)),re=na(D,P,L).map((T,V)=>({...T,sort_order:V})),_=i.filter(T=>T.position!==k.position);t([..._,...re])},y=S=>t(i.filter(C=>C.id!==S)),b=(S,C)=>{const E=(C==="before"?c:u).length;t(i.map(D=>D.id===S?{...D,position:C,sort_order:E}:D))},g=S=>{const C=i.map(L=>L.id),E=S.filter(L=>!C.includes(L)).map((L,re)=>({id:L,position:"after",sort_order:u.length+re})),D=new Set(C.filter(L=>!S.includes(L))),P=i.filter(L=>!D.has(L.id));t([...P,...E])},m=(S,C)=>S.length===0?o.jsx("div",{className:"py-3 text-center text-[12px]",style:{color:M.textMuted},children:""}):o.jsx(Hh,{items:S.map(k=>String(k.id)),strategy:Fh,children:o.jsx("div",{className:"rounded-[14px] px-2 pt-1",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:S.map((k,E)=>o.jsxs("div",{children:[E>0&&o.jsx("div",{className:"mx-2",style:{height:1,background:"rgba(0,0,0,0.06)"}}),o.jsx(J1,{item:k,book:p(k.id),position:C,sectionList:S,onRemove:y,onChangePosition:b})]},k.id))})}),v=l?i.find(S=>String(S.id)===String(l)):null,j=v?p(v.id):null;return o.jsxs(Oh,{sensors:f,collisionDetection:vh,onDragStart:h,onDragOver:x,onDragEnd:w,children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(c,"before")]}),o.jsxs("div",{className:"my-4 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}}),o.jsx("span",{className:"rounded-full px-3 py-1 text-[11px] font-bold",style:{background:"rgba(232,160,191,0.15)",color:M.accentDark},children:"System Prompt"}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(u,"after")]}),o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-3 text-[14px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.accentDark},onClick:()=>s(!0),children:[o.jsx(Jr,{size:16})," "]}),o.jsx(Ah,{children:j&&o.jsxs("div",{className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",style:{background:M.bg,boxShadow:"var(--card-shadow)",opacity:.9},children:[o.jsx(rl,{size:14,style:{color:M.textMuted}}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.accentDark},children:j.name})})]})}),r&&o.jsx(q1,{allBooks:n,mountedIds:i.map(S=>S.id),onClose:()=>s(!1),onConfirm:S=>{g(S),s(!1)}})]})}function Td(){const e=At(),{id:t}=lh(),n=!t,[r,s]=d.useState("basic"),[l,a]=d.useState(""),[i,c]=d.useState(""),[u,p]=d.useState(""),[f,h]=d.useState(null),[x,w]=d.useState(null),[y,b]=d.useState(null),[g,m]=d.useState(""),[v,j]=d.useState(""),[S,C]=d.useState(null),[k,E]=d.useState(null),[D,P]=d.useState([]),[L,re]=d.useState([]),[_,T]=d.useState([]),[V,oe]=d.useState(!1),[ae,z]=d.useState(!n),[W,H]=d.useState(null),[G,K]=d.useState(!1),[Se,ge]=d.useState(!1),[ee,B]=d.useState(!1),[ie,se]=d.useState(null),[ne,Q]=d.useState([]),ye=d.useRef(null),fe=d.useRef(null),Ne=J=>{var Re;const Z=(Re=J.target.files)==null?void 0:Re[0];if(!Z)return;const he=new FileReader;he.onload=yt=>p(yt.target.result||""),he.readAsText(Z),J.target.value=""},pe=J=>{H(J),setTimeout(()=>H(null),2500)},ut=async J=>{const Z=J==="human"?S:k;if(!Z){pe("");return}try{const he=await $(`/api/core-blocks/${Z}/history`);Q(he.history||[]),se(J)}catch(he){pe("")}};d.useEffect(()=>{(async()=>{const[Z,he]=await Promise.all([$("/api/presets").catch(()=>({presets:[]})),$("/api/world-books").catch(()=>({world_books:[]}))]);if(re(Z.presets||[]),T(he.world_books||[]),n)z(!1);else try{const[Re,yt]=await Promise.all([$(`/api/assistants/${t}`),$(`/api/core-blocks?assistant_id=${t}`).catch(()=>({blocks:[]}))]);a(Re.name||""),Zr(`assistant-avatar-${t}`).then(Be=>{Be&&c(Be)}).catch(function(){}),p(Re.system_prompt||""),h(Re.model_preset_id||null),w(Re.summary_model_preset_id||null),b(Re.summary_fallback_preset_id||null),P(Re.rule_set_ids||[]);for(const Be of yt.blocks||[])Be.block_type==="human"?(m(Be.content||""),C(Be.id)):Be.block_type==="persona"&&(j(Be.content||""),E(Be.id))}catch(Re){pe(": "+Re.message)}finally{z(!1)}})()},[t,n]);const _t=J=>{var Re;const Z=(Re=J.target.files)==null?void 0:Re[0];if(!Z)return;const he=new FileReader;he.onload=async yt=>{const Be=yt.target.result,Hn=`assistant-avatar-${t||"new"}`;try{await Ii(Hn,Be),c(Be)}catch(gn){pe("")}},he.readAsDataURL(Z),J.target.value=""},rn=async()=>{if(!l.trim()){pe("");return}oe(!0);try{const J={name:l.trim(),avatar_url:i?`assistant-avatar-${t||"new"}`:null,system_prompt:u,model_preset_id:f,summary_model_preset_id:x,summary_fallback_preset_id:y,rule_set_ids:Yh(D)};let Z=t;if(n?(Z=(await $("/api/assistants",{method:"POST",body:{name:l.trim()}})).id,i&&(await Ii(`assistant-avatar-${Z}`,i),J.avatar_url=`assistant-avatar-${Z}`),await $(`/api/assistants/${Z}`,{method:"PUT",body:J})):await $(`/api/assistants/${t}`,{method:"PUT",body:J}),S)await $(`/api/core-blocks/${S}`,{method:"PUT",body:{content:g}});else if(g.trim()){const he=await $("/api/core-blocks",{method:"POST",body:{block_type:"human",assistant_id:Number(Z),content:g}});C(he.id)}if(k)await $(`/api/core-blocks/${k}`,{method:"PUT",body:{content:v}});else if(v.trim()){const he=await $("/api/core-blocks",{method:"POST",body:{block_type:"persona",assistant_id:Number(Z),content:v}});E(he.id)}pe("")}catch(J){pe(": "+J.message)}finally{oe(!1)}},De=[{key:"basic",label:""},{key:"about",label:"Core Blocks"},{key:"books",label:""}];return o.jsxs("div",{className:"flex h-full flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:M.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:M.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:V?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:rn,disabled:V,children:o.jsx(Qo,{size:18,style:{color:M.accentDark}})})]}),o.jsx("div",{className:"flex shrink-0 gap-1 px-5 pb-3",children:De.map(J=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2.5 text-[13px] font-semibold transition-all",style:{background:r===J.key?M.bg:"transparent",boxShadow:r===J.key?"var(--card-shadow-sm)":"none",color:r===J.key?M.accentDark:M.textMuted},onClick:()=>s(J.key),children:J.label},J.key))}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px",children:ae?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:M.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[r==="basic"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-4 flex items-center gap-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var J;return(J=ye.current)==null?void 0:J.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:M.bg},children:i?o.jsx("img",{src:i,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[24px]",style:{color:M.accentDark},children:(l==null?void 0:l[0])||"?"})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:M.accentDark},children:o.jsx(dh,{size:9,color:"white"})})]}),o.jsx("input",{ref:ye,type:"file",accept:"image/*",className:"hidden",onChange:_t}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),o.jsx("input",{type:"text",value:l,onChange:J=>a(J.target.value),placeholder:"",className:"w-full rounded-[12px] px-4 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})]}),o.jsxs("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var J;return(J=fe.current)==null?void 0:J.click()},title:"",children:o.jsx(Yo,{size:13,style:{color:M.textMuted}})}),o.jsx("input",{ref:fe,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:Ne}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>K(!0),title:"",children:o.jsx(sl,{size:13,style:{color:M.accentDark}})})]})]}),o.jsx("textarea",{value:u,onChange:J=>p(J.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(La,{label:"",value:f,onChange:h,presets:L}),o.jsx(La,{label:"",value:x,onChange:w,presets:L}),o.jsx(La,{label:"",value:y,onChange:b,presets:L})]})]}),r==="about"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(_d,{label:"human block",value:g,onChange:m,placeholder:" AI ...",rows:7,onExpand:()=>ge(!0),onHistory:()=>ut("human")})}),o.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(_d,{label:"persona block",value:v,onChange:j,placeholder:"AI ...",rows:7,onExpand:()=>B(!0),onHistory:()=>ut("persona")})})]}),r==="books"&&o.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Z1,{ruleSetIds:D,onChange:P,allBooks:_})})]})}),G&&o.jsx(Aa,{value:u,onChange:p,onClose:()=>K(!1),title:"",placeholder:"..."}),Se&&o.jsx(Aa,{value:g,onChange:m,onClose:()=>ge(!1),title:"human block",placeholder:" AI ..."}),ee&&o.jsx(Aa,{value:v,onChange:j,onClose:()=>B(!1),title:"persona block",placeholder:"AI ..."}),ie&&o.jsx(G1,{items:ne,currentContent:ie==="human"?g:v,onApply:async J=>{const Z=ie==="human"?S:k;try{await $(`/api/core-blocks/${Z}`,{method:"PUT",body:{content:J}}),ie==="human"?m(J):j(J),pe("")}catch(he){pe("")}},onDelete:async J=>{try{await $(`/api/core-blocks/history/${J}`,{method:"DELETE"}),Q(Z=>Z.filter(he=>he.id!==J)),pe("")}catch(Z){pe("")}},onClose:()=>se(null)}),W&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:W})})]})}const te={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function e0({on:e,onToggle:t}){return o.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full transition-all",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":te.bg},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function Dd({icon:e,label:t,hint:n,onClick:r}){return o.jsxs("button",{className:"flex w-full items-center gap-4 px-4 py-4",onClick:r,children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:te.bg},children:e}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:te.text},children:t}),n&&o.jsx("div",{className:"text-[11px]",style:{color:te.textMuted},children:n})]}),o.jsx(Vr,{size:16,style:{color:te.textMuted}})]})}function Rd(){return o.jsx("div",{className:"mx-4 h-px",style:{background:"rgba(136,136,160,0.15)"}})}function hr({value:e,onChange:t,min:n,max:r}){const[s,l]=d.useState(String(e));d.useEffect(()=>l(String(e)),[e]);const a=()=>{let i=parseInt(s);isNaN(i)&&(i=n),i=Math.max(n,Math.min(r,i)),l(String(i)),t(i)};return o.jsx("input",{type:"number",value:s,onChange:i=>l(i.target.value),onBlur:a,onKeyDown:i=>i.key==="Enter"&&a(),className:"w-20 rounded-[10px] py-2 text-center text-[14px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:te.bg,color:te.text},min:n,max:r})}function t0(){const e=At(),[t,n]=d.useState(()=>{var k;return((k=JSON.parse(localStorage.getItem("app-settings")||"{}"))==null?void 0:k.autoMessage)||!1}),[r,s]=d.useState(()=>{var k;return((k=JSON.parse(localStorage.getItem("app-settings")||"{}"))==null?void 0:k.autoMessageIntervalMin)||30}),[l,a]=d.useState(()=>{var k;return((k=JSON.parse(localStorage.getItem("app-settings")||"{}"))==null?void 0:k.autoMessageIntervalMax)||60}),[i,c]=d.useState(()=>parseInt(localStorage.getItem("telegram_buffer_seconds")||"15")),[u,p]=d.useState(8),[f,h]=d.useState(8e3),[x,w]=d.useState(16e3),[y,b]=d.useState(!1),[g,m]=d.useState(!1),[v,j]=d.useState(null),S=k=>{j(k),setTimeout(()=>j(null),2e3)};d.useEffect(()=>{$("/api/settings/context-budget").then(k=>{h(k.retain_budget),w(k.trigger_threshold),b(!0)}).catch(()=>b(!0))},[]),d.useEffect(()=>{const k=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({...k,autoMessage:t,autoMessageIntervalMin:r,autoMessageIntervalMax:l}))},[t,r,l]),d.useEffect(()=>{localStorage.setItem("telegram_buffer_seconds",String(i)),$("/api/settings/buffer-seconds",{method:"PUT",body:{seconds:i}}).catch(()=>{})},[i]),d.useEffect(()=>{$("/api/settings/short-msg-max").then(k=>p(k.max_count||8)).catch(()=>{})},[]),d.useEffect(()=>{$("/api/settings/short-msg-max",{method:"PUT",body:{max_count:u}}).catch(()=>{})},[u]);const C=async()=>{m(!0);try{await $("/api/settings/context-budget",{method:"PUT",body:{retain_budget:f,trigger_threshold:x}}),S("")}catch(k){S("")}finally{m(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:te.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:te.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:te.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:te.text},children:""}),o.jsx("div",{className:"w-10"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px space-y-4",children:[o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:te.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(Dd,{icon:o.jsx(Fy,{size:18,style:{color:te.text}}),label:"API ",hint:"  ",onClick:()=>e("/settings/api")}),o.jsx(Rd,{}),o.jsx(Dd,{icon:o.jsx(Ay,{size:18,style:{color:te.textMuted}}),label:"",hint:"",onClick:()=>S("")})]}),o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:te.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:te.bg},children:o.jsx(Ly,{size:18,style:{color:te.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:te.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:te.textMuted},children:" AI "})]}),o.jsx(e0,{on:t,onToggle:()=>n(!t)})]}),t&&o.jsx("div",{className:"px-4 pb-4",children:o.jsxs("div",{className:"flex items-center justify-between rounded-[12px] px-4 py-3",style:{boxShadow:"var(--inset-shadow)",background:te.bg},children:[o.jsx("span",{className:"text-[12px] font-medium",style:{color:te.textMuted},children:" ()"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(hr,{value:r,onChange:s,min:1,max:999}),o.jsx("span",{style:{color:te.textMuted},children:"~"}),o.jsx(hr,{value:l,onChange:a,min:1,max:999})]})]})})]}),o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:te.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:te.bg},children:o.jsx(Hy,{size:18,style:{color:te.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:te.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:te.textMuted},children:" ()"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(hr,{value:i,onChange:c,min:1,max:120}),o.jsx("span",{className:"text-[12px]",style:{color:te.textMuted},children:""})]})]}),o.jsx(Rd,{}),o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:te.bg},children:o.jsx(Py,{size:18,style:{color:te.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:te.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:te.textMuted},children:""})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(hr,{value:u,onChange:p,min:2,max:20}),o.jsx("span",{className:"text-[12px]",style:{color:te.textMuted},children:""})]})]})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:te.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:te.bg},children:o.jsx(Ty,{size:18,style:{color:te.text}})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:te.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:te.textMuted},children:""})]})]}),y?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:te.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:te.textMuted},children:" token "})]}),o.jsx(hr,{value:f,onChange:h,min:1e3,max:1e5})]}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:te.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:te.textMuted},children:""})]}),o.jsx(hr,{value:x,onChange:w,min:1e3,max:2e5})]}),o.jsx("button",{className:"w-full rounded-[14px] py-3 text-[14px] font-bold text-white",style:{background:g?"rgba(201,98,138,0.5)":"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"3px 3px 8px rgba(201,98,138,0.3)"},onClick:C,disabled:g,children:g?"...":""})]}):o.jsx("div",{className:"flex justify-center py-4",children:o.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2",style:{borderColor:te.accent,borderTopColor:"transparent"}})})]})]}),v&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:v})})]})}const O={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},n0=["claude-opus-4-6","claude-opus-4-5-20251101","claude-sonnet-4-6","claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001"];function r0(e){try{return new URL(e).hostname}catch(t){return e}}function Pd({label:e,value:t,onChange:n,placeholder:r,password:s,disabled:l}){const[a,i]=d.useState(!1);return o.jsxs("div",{className:"mb-4",children:[e&&o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:O.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:s&&!a?"password":"text",value:t,onChange:c=>n(c.target.value),placeholder:r,disabled:l,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none pr-12",style:{boxShadow:"var(--inset-shadow)",background:O.bg,color:l?O.textMuted:O.text,opacity:l?.5:1}}),s&&o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>i(!a),children:a?o.jsx(Ry,{size:16,style:{color:O.textMuted}}):o.jsx(Dy,{size:16,style:{color:O.textMuted}})})]})]})}function s0({value:e,onChange:t,options:n}){return o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:O.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[12px] font-semibold transition-all",style:{background:e===r.value?O.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?O.accentDark:O.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})}function l0({value:e,onChange:t,options:n,placeholder:r}){const[s,l]=d.useState(!1),a=d.useRef(null);return d.useEffect(()=>{if(!s)return;const i=c=>{a.current&&!a.current.contains(c.target)&&l(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[s]),o.jsxs("div",{className:"relative",ref:a,children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:O.bg,color:e?O.text:O.textMuted},onClick:()=>l(!s),children:[o.jsx("span",{className:"truncate",children:e||r||""}),o.jsx(sr,{size:16,style:{color:O.textMuted,flexShrink:0,transform:s?"rotate(180deg)":"none"}})]}),s&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:O.bg,boxShadow:"var(--card-shadow)"},children:n.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[13px]",style:{color:O.text},onClick:()=>{t(i),l(!1)},children:[o.jsx("span",{className:"truncate",children:i}),i===e&&o.jsx(Wr,{size:12,style:{color:O.accentDark,flexShrink:0}})]},i))})]})}function o0({value:e,onChange:t}){const[n,r]=d.useState(!1),s=d.useRef(null);return d.useEffect(()=>{if(!n)return;const l=a=>{s.current&&!s.current.contains(a.target)&&r(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[n]),o.jsxs("div",{className:"relative",ref:s,children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"",value:e,onChange:l=>t(l.target.value),className:"w-full rounded-[14px] px-4 py-3 pr-10 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:O.bg,color:O.text}}),o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>r(!n),children:o.jsx(sr,{size:16,style:{color:O.textMuted}})})]}),n&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:O.bg,boxShadow:"var(--card-shadow)"},children:n0.map(l=>o.jsx("button",{className:"flex w-full px-4 py-3 text-left text-[13px]",style:{color:O.text},onClick:()=>{t(l),r(!1)},children:l},l))})]})}function $a({value:e,onChange:t,min:n,max:r,step:s}){const[l,a]=d.useState(String(e));d.useEffect(()=>a(String(e)),[e]);const i=()=>{let c=parseFloat(l);isNaN(c)&&(c=n),c=Math.max(n,Math.min(r,c)),c=Math.round(c/s)*s,c=parseFloat(c.toFixed(4)),a(String(c)),t(c)};return o.jsx("input",{type:"number",value:l,onChange:c=>a(c.target.value),onBlur:i,onKeyDown:c=>c.key==="Enter"&&i(),step:s,min:n,max:r,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:O.bg,color:O.text}})}function zd({on:e,onToggle:t}){return o.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":O.bg,transition:"background 0.2s"},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function Rl({children:e,className:t=""}){return o.jsx("div",{className:`rounded-[20px] p-5 mb-4 space-y-4 ${t}`,style:{background:O.bg,boxShadow:"var(--card-shadow)"},children:e})}function a0(){const e=At(),[t,n]=d.useState([]),[r,s]=d.useState([]),[l,a]=d.useState(!0),[i,c]=d.useState(""),[u,p]=d.useState(""),[f,h]=d.useState("api_key"),[x,w]=d.useState(""),[y,b]=d.useState([]),[g,m]=d.useState(!1),[v,j]=d.useState(1),[S,C]=d.useState(!1),[k,E]=d.useState(1),[D,P]=d.useState(!1),[L,re]=d.useState(4096),[_,T]=d.useState(null),[V,oe]=d.useState(0),[ae,z]=d.useState(0),[W,H]=d.useState(null),[G,K]=d.useState(!1),[Se,ge]=d.useState(!1),[ee,B]=d.useState(""),[ie,se]=d.useState(!1),[ne,Q]=d.useState(!1),[ye,fe]=d.useState(null),[Ne,pe]=d.useState(null),[ut,_t]=d.useState(""),rn=d.useRef(null),De=d.useRef(!1),J=d.useRef({});J.current={baseUrl:i,apiKey:u,authType:f,modelName:x,temperature:v,tempEnabled:S,topP:k,topPEnabled:D,maxTokens:L,editingPreset:_,providers:t};const Z=d.useCallback(A=>{H(A),setTimeout(()=>H(null),2500)},[]),he=d.useCallback(async()=>{try{const[A,de,le]=await Promise.all([$("/api/providers"),$("/api/presets"),$("/api/settings/thinking-budget")]);n(A.providers||[]),s(de.presets||[]),oe(le.main||0),z(le.summary||0)}catch(A){Z(": "+A.message)}finally{a(!1)}},[Z]);d.useEffect(()=>{he()},[he]);const Re=A=>{var le,Pe;T(A),w(A.model_name),C(A.temperature!=null),j((le=A.temperature)!=null?le:1),P(A.top_p!=null),E((Pe=A.top_p)!=null?Pe:1),re(A.max_tokens);const de=t.find(dt=>dt.id===A.api_provider_id);de&&(c(de.base_url),p(de.api_key),h(de.auth_type||"api_key"))},yt=()=>{T(null),c(""),p(""),h("api_key"),w(""),j(1),C(!1),E(1),P(!1),re(4096),b([])},Be=async()=>{if(!i.trim()||!u.trim()){Z(" API  Key");return}m(!0);try{const A=await fetch(`${i.trim().replace(/\/+$/,"")}/models`,{headers:{Authorization:`Bearer ${u.trim()}`}});if(!A.ok)throw new Error(`HTTP ${A.status}`);const le=((await A.json()).data||[]).map(Pe=>Pe.id).sort();b(le),Z(le.length?` ${le.length} `:"")}catch(A){Z(": "+A.message)}finally{m(!1)}},Hn=async()=>{var A;if(!i.trim()||!u.trim()||!x.trim()){Z(" API Key ");return}K(!0);try{const de=i.trim().replace(/\/+$/,""),le={"Content-Type":"application/json",Authorization:`Bearer ${u.trim()}`};f==="oauth_token"&&(le["anthropic-beta"]="claude-code-20250219,oauth-2025-04-20,fine-grained-tool-streaming-2025-05-14",le["anthropic-dangerous-direct-browser-access"]="true",le["x-app"]="cli");const Pe=await fetch(`${de}/chat/completions`,{method:"POST",headers:le,body:JSON.stringify({model:x.trim(),max_tokens:10,messages:[{role:"user",content:"Hi"}]})});if(!Pe.ok){const dt=await Pe.json().catch(()=>({}));throw new Error(((A=dt.error)==null?void 0:A.message)||`HTTP ${Pe.status}`)}Z(" ")}catch(de){Z(": "+de.message)}finally{K(!1)}},gn=async A=>{const de=J.current,le=de.baseUrl.trim(),Pe=de.apiKey.trim(),dt=de.authType,yn=A.find(rs=>rs.base_url===le);return yn?((yn.api_key!==Pe||yn.auth_type!==dt)&&await $(`/api/providers/${yn.id}`,{method:"PUT",body:{api_key:Pe,auth_type:dt}}),yn.id):(await $("/api/providers",{method:"POST",body:{name:r0(le),base_url:le,api_key:Pe,auth_type:dt}})).id},vt=async(A,de)=>{const le=J.current;if(!le.baseUrl.trim()||!le.apiKey.trim()||!le.modelName.trim()){Z("");return}Q(!0);try{const Pe=await gn(le.providers),dt={name:A,model_name:le.modelName.trim(),temperature:le.tempEnabled?le.temperature:null,top_p:le.topPEnabled?le.topP:null,max_tokens:Number(le.maxTokens)||4096,api_provider_id:Pe};le.editingPreset&&!de?(await $(`/api/presets/${le.editingPreset.id}`,{method:"PUT",body:dt}),Z("")):(await $("/api/presets",{method:"POST",body:dt}),Z("")),await he()}catch(Pe){Z(": "+Pe.message)}finally{Q(!1)}},$t=()=>{const A=ee.trim();A&&(ge(!1),vt(A,ie))},Qt=()=>{_&&vt(_.name,!1)},cr=async()=>{if(ye){try{await $(`/api/presets/${ye.id}`,{method:"DELETE"}),Z(""),(_==null?void 0:_.id)===ye.id&&yt(),he()}catch(A){Z(": "+A.message)}fe(null)}},wt=async()=>{const A=ut.trim();if(!(!A||!Ne)){try{await $(`/api/presets/${Ne.id}`,{method:"PUT",body:{name:A}}),Z(""),he()}catch(de){Z("")}pe(null)}},Wn=(A,de)=>{De.current=!1,A.touches?A.touches[0].clientX:A.clientX,A.touches?A.touches[0].clientY:A.clientY,rn.current=setTimeout(()=>{De.current=!0,fe(de)},600)},ur=()=>clearTimeout(rn.current);return o.jsxs("div",{className:"flex h-full flex-col",style:{background:O.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:O.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:O.text},children:"API "}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px",children:l?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:O.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs(Rl,{children:[o.jsx(Pd,{label:"API ",value:i,onChange:c,placeholder:"https://api.openai.com/v1",disabled:f==="oauth_token"}),o.jsx(Pd,{label:"API Key",value:u,onChange:p,placeholder:f==="oauth_token"?"sk-ant-oat01-...":"sk-...",password:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:O.textMuted},children:""}),o.jsx(s0,{value:f,onChange:A=>{h(A),A==="oauth_token"&&c("https://api.anthropic.com/v1")},options:[{value:"api_key",label:" API Key"},{value:"oauth_token",label:"Setup Token"}]})]})]}),o.jsxs(Rl,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:O.textMuted},children:""}),f==="oauth_token"?o.jsx(o0,{value:x,onChange:w}):o.jsx(l0,{value:x,onChange:w,options:y})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)",color:O.text},onClick:Hn,disabled:G,children:[G?o.jsx(fd,{size:14,className:"animate-spin"}):null,""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)",color:O.text,opacity:f==="oauth_token"?.4:1},onClick:Be,disabled:g||f==="oauth_token",children:[g?o.jsx(fd,{size:14,className:"animate-spin"}):o.jsx(Oc,{size:14}),""]})]})]}),o.jsxs(Rl,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:O.text},children:" (0-2)"}),o.jsx("div",{className:"text-[11px]",style:{color:O.textMuted},children:""})]}),o.jsx(zd,{on:S,onToggle:()=>C(!S)})]}),S&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:O.textMuted},children:""}),o.jsx($a,{value:v,onChange:j,min:0,max:2,step:.1})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:O.text},children:"Top P (0-1)"}),o.jsx(zd,{on:D,onToggle:()=>P(!D)})]}),D&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:O.textMuted},children:""}),o.jsx($a,{value:k,onChange:E,min:0,max:1,step:.05})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:O.text},children:"Max Tokens"}),o.jsx($a,{value:L,onChange:re,min:128,max:2e5,step:1})]})]}),o.jsxs(Rl,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:O.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:O.textMuted},children:"Extended Thinking tokens"})]}),o.jsxs("select",{className:"rounded-[10px] py-2 px-3 text-[13px] font-bold outline-none appearance-none text-center",style:{boxShadow:"var(--inset-shadow)",background:O.bg,color:O.text,WebkitAppearance:"none",minWidth:90},value:V,onChange:async A=>{const de=Number(A.target.value);oe(de);try{await $("/api/settings/thinking-budget",{method:"PUT",body:{main:de,summary:ae}})}catch(le){}},children:[o.jsx("option",{value:0,children:""}),o.jsx("option",{value:1024,children:"1024"}),o.jsx("option",{value:2048,children:"2048"}),o.jsx("option",{value:4096,children:"4096"}),o.jsx("option",{value:8192,children:"8192"}),o.jsx("option",{value:16384,children:"16384"})]})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:O.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:O.textMuted},children:" Thinking tokens"})]}),o.jsxs("select",{className:"rounded-[10px] py-2 px-3 text-[13px] font-bold outline-none appearance-none text-center",style:{boxShadow:"var(--inset-shadow)",background:O.bg,color:O.text,WebkitAppearance:"none",minWidth:90},value:ae,onChange:async A=>{const de=Number(A.target.value);z(de);try{await $("/api/settings/thinking-budget",{method:"PUT",body:{main:V,summary:de}})}catch(le){}},children:[o.jsx("option",{value:0,children:""}),o.jsx("option",{value:1024,children:"1024"}),o.jsx("option",{value:2048,children:"2048"}),o.jsx("option",{value:4096,children:"4096"}),o.jsx("option",{value:8192,children:"8192"}),o.jsx("option",{value:16384,children:"16384"})]})]})]}),o.jsxs("div",{className:"mb-4 space-y-3",children:[_?o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:Qt,disabled:ne,children:[o.jsx(Qo,{size:14}),ne?"...":""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)",color:O.text},onClick:()=>{se(!0),B(""),ge(!0)},disabled:ne,children:[o.jsx(_y,{size:14}),""]})]}):o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>{se(!0),B(""),ge(!0)},disabled:ne,children:[o.jsx(Jr,{size:14}),""]}),_&&o.jsx("button",{className:"w-full py-1 text-center text-[12px]",style:{color:O.textMuted},onClick:yt,children:""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"mb-3 text-[12px] font-bold uppercase tracking-wide",style:{color:O.textMuted},children:""}),r.length===0?o.jsx("div",{className:"rounded-[20px] py-8 text-center text-[13px]",style:{background:O.bg,boxShadow:"var(--card-shadow)",color:O.textMuted},children:""}):o.jsx("div",{className:"space-y-3",children:r.map(A=>{var de,le;return o.jsxs("div",{className:"rounded-[18px] p-4",style:{background:O.bg,boxShadow:(_==null?void 0:_.id)===A.id?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{De.current||Re(A)},onTouchStart:Pe=>Wn(Pe,A),onTouchEnd:ur,onMouseDown:Pe=>Wn(Pe,A),onMouseUp:ur,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-[14px] font-bold truncate",style:{color:(_==null?void 0:_.id)===A.id?O.accentDark:O.text},children:A.name}),o.jsx(ph,{size:12,style:{color:O.textMuted,flexShrink:0,marginLeft:8}})]}),o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:O.textMuted},children:A.model_name}),o.jsxs("div",{className:"mt-1 text-[10px] font-mono",style:{color:O.textMuted},children:["T: ",(de=A.temperature)!=null?de:""," | Top-P: ",(le=A.top_p)!=null?le:""," | Max: ",A.max_tokens]})]},A.id)})})]})]})}),Se&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>ge(!1),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:O.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:A=>A.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:O.text},children:""}),o.jsx("input",{type:"text",value:ee,onChange:A=>B(A.target.value),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:O.bg,color:O.text},autoFocus:!0,onKeyDown:A=>A.key==="Enter"&&$t()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)",color:O.text},onClick:()=>ge(!1),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:ee.trim()?"linear-gradient(135deg, var(--accent), var(--accent-dark))":"rgba(201,98,138,0.3)"},onClick:$t,disabled:!ee.trim(),children:""})]})]})}),ye&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>fe(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:O.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:A=>A.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:O.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:O.textMuted},children:["",ye.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)",color:O.text},onClick:()=>fe(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:cr,children:""})]})]})}),Ne&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>pe(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:O.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:A=>A.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:O.text},children:""}),o.jsx("input",{autoFocus:!0,type:"text",value:ut,onChange:A=>_t(A.target.value),className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:O.bg,color:O.text},onKeyDown:A=>A.key==="Enter"&&wt()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)",color:O.text},onClick:()=>pe(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))"},onClick:wt,children:""})]})]})}),W&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:W})})]})}const xe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},ra={thinking:{bg:"rgba(168,130,200,0.12)",color:"#8860c8",label:""},tool_use:{bg:"rgba(232,160,60,0.12)",color:"#b8820a",label:""},tool_result:{bg:"rgba(80,160,200,0.12)",color:"#1a7ab0",label:""},injected_memories:{bg:"rgba(80,180,120,0.12)",color:"#3a8a5f",label:""}},i0=[{key:"short",label:""},{key:"long",label:""},{key:"theater",label:""}],c0=[{key:"happy",label:""},{key:"sad",label:""},{key:"angry",label:""},{key:"anxious",label:""},{key:"tired",label:""},{key:"emo",label:""},{key:"flirty",label:""},{key:"proud",label:""},{key:"calm",label:""}],Id=300;function Wc({block_type:e}){const t=ra[e]||{bg:"rgba(136,136,160,0.1)",color:xe.textMuted,label:e};return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:t.bg,color:t.color},children:t.label})}function Qh({content:e}){const[t,n]=d.useState(!1),r=e.length>Id;return o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:xe.text},children:r&&!t?e.slice(0,Id)+"...":e}),r&&o.jsx("div",{className:"mt-1.5 flex justify-center",children:o.jsx("button",{className:"rounded-full px-3 py-0.5 text-[11px]",style:{color:xe.accentDark,background:"rgba(232,160,191,0.12)"},onClick:s=>{s.stopPropagation(),n(!t)},children:t?"":""})})]})}function u0({block:e,cacheKey:t,translateCache:n}){const r=n.current.get(t),[s,l]=d.useState(r||null),[a,i]=d.useState(!!r),[c,u]=d.useState(!1),p=ra.thinking,f=async h=>{if(h.stopPropagation(),s){i(!a);return}u(!0);try{const x=await $("/api/cot/translate",{method:"POST",body:{text:e.content}});l(x.translated),i(!0),n.current.set(t,x.translated)}catch(x){console.error("Translation failed:",x)}finally{u(!1)}};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:p.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(Wc,{block_type:"thinking"}),o.jsx("span",{className:"flex-1"}),o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#1a7ab0",background:"rgba(80,160,200,0.15)"},onClick:f,disabled:c,children:c?"...":a?"":""})]}),o.jsx(Qh,{content:a&&s?s:e.content})]})}function d0({avatarUrl:e}){return o.jsx("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full overflow-hidden",style:{boxShadow:"var(--icon-inset)",background:xe.bg},children:e?o.jsx("img",{src:e,alt:"",className:"h-full w-full object-cover"}):o.jsx("span",{style:{fontSize:16},children:""})})}function Od(e){return e?e>=1e3?`${(e/1e3).toFixed(1)}k`:String(e):"0"}function f0(e){if(!e)return null;const t=e/1e3;return t>=100?`${Math.round(t)}s`:`${t.toFixed(1)}s`}function p0({prompt:e,completion:t,elapsedMs:n}){return!e&&!t&&!n?null:o.jsxs(o.Fragment,{children:[e||t?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(80,160,120,0.12)",color:"#3a8a5f"},children:["",Od(e)]}),o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(160,100,220,0.12)",color:"#8a5abf"},children:["",Od(t)]})]}):null,n?o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(200,140,60,0.12)",color:"#b8820a"},children:f0(n)}):null]})}function h0(e){const t=[],n=[],r=[],s=[];for(const a of e)a.block_type==="thinking"?t.push(a):a.block_type==="tool_use"?n.push(a):a.block_type==="tool_result"?r.push(a):s.push(a);const l=[];for(let a=0;a<n.length;a++)l.push(n[a]),a<r.length&&l.push(r[a]);for(let a=n.length;a<r.length;a++)l.push(r[a]);return[...t,...l,...s]}function m0({memories:e}){const[t,n]=d.useState(!1);if(!e||e.length===0)return null;const r=ra.injected_memories;return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:r.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-2",onClick:()=>n(!t),children:[o.jsx(Wc,{block_type:"injected_memories"}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:r.color},children:["(",e.length,")"]}),t?o.jsx(fh,{size:12,style:{color:r.color}}):o.jsx(sr,{size:12,style:{color:r.color}})]}),t&&o.jsx("div",{className:"mt-2 space-y-1",children:e.map(s=>o.jsxs("p",{className:"text-[11px] leading-relaxed",style:{color:xe.text},children:[o.jsxs("span",{style:{color:r.color,fontWeight:600},children:["#",s.id]})," ",s.content]},s.id))})]})}function x0({item:e,expanded:t,onToggle:n,live:r,avatarUrl:s,translateCache:l}){const a=e.rounds.map(c=>({...c,blocks:h0(c.blocks.filter(u=>u.block_type!=="text"&&u.block_type!=="usage"))})).filter(c=>c.blocks.length>0),i=a.length>0||e.injectedMemories&&e.injectedMemories.length>0||r&&e.textPreview;return o.jsxs("div",{className:"rounded-[18px] overflow-hidden",style:{background:xe.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-3 p-4",onClick:n,children:[o.jsx(d0,{avatarUrl:s}),o.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r&&o.jsx("span",{className:"inline-block h-3 w-3 animate-spin rounded-full border-[1.5px]",style:{borderColor:xe.accentDark,borderTopColor:"transparent"}}),e.has_tool_calls&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold",style:{background:"rgba(232,160,60,0.15)",color:"#b8820a"},children:""}),o.jsx(p0,{prompt:e.prompt_tokens||0,completion:e.completion_tokens||0,elapsedMs:e.elapsed_ms||0}),o.jsx("span",{className:"text-[10px]",style:{color:xe.textMuted},children:e.created_at||""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[13px]",style:{color:xe.text},children:e.preview||"()"})]}),t?o.jsx(fh,{size:16,style:{color:xe.textMuted,flexShrink:0}}):o.jsx(sr,{size:16,style:{color:xe.textMuted,flexShrink:0}})]}),t&&i&&o.jsxs("div",{className:"px-4 pb-4",children:[o.jsx(m0,{memories:e.injectedMemories}),a.map(c=>o.jsxs("div",{className:"mb-3",children:[a.length>1&&o.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:xe.textMuted},children:[" ",c.round_index+1]}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}})]}),c.blocks.map((u,p)=>{if(u.block_type==="thinking")return o.jsx(u0,{block:u,cacheKey:`${e.request_id}:${c.round_index}:${p}`,translateCache:l},p);const f=ra[u.block_type]||{bg:"rgba(136,136,160,0.08)",color:xe.textMuted,label:u.block_type};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:f.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(Wc,{block_type:u.block_type}),u.tool_name&&o.jsx("span",{className:"text-[10px] font-mono",style:{color:f.color},children:u.tool_name})]}),o.jsx(Qh,{content:u.content})]},p)})]},c.round_index)),r&&e.textPreview&&o.jsxs("div",{className:"rounded-[12px] p-3",style:{background:"rgba(232,160,191,0.08)"},children:[o.jsx("div",{className:"mb-1",children:o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(232,160,191,0.15)",color:xe.accentDark},children:""})}),o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:xe.text},children:e.textPreview})]})]})]})}function g0(){const e=At(),[t,n]=d.useState([]),[r,s]=d.useState(!0),[l,a]=d.useState(null),[i,c]=d.useState(()=>localStorage.getItem("chat_mode")||"long"),[u,p]=d.useState(!1),[f,h]=d.useState(new Set),[x,w]=d.useState(null),[y,b]=d.useState(null),g=d.useRef(null),m=d.useRef(new Map),[v,j]=d.useState(null),[S,C]=d.useState(!1),k=d.useRef(null),[E,D]=d.useState(()=>localStorage.getItem("whisper_token")),P=()=>{s(!0),w(null),$("/api/cot?limit=100").then(_=>{n(Array.isArray(_)?_:[])}).catch(_=>{console.error("COT load error:",_),w(_.message||"")}).finally(()=>{s(!1);const _=localStorage.getItem("whisper_token");_&&_!==E&&D(_)})};d.useEffect(()=>{P()},[]),d.useEffect(()=>{$("/api/sessions?limit=1").then(_=>{var V;const T=(V=_.sessions)==null?void 0:V[0];T!=null&&T.assistant_id&&Zr(`assistant-avatar-${T.assistant_id}`).then(oe=>{oe&&b(oe)}).catch(()=>{})}).catch(()=>{})},[]),d.useEffect(()=>{$("/api/settings/mood").then(_=>j(_.mood||"calm")).catch(()=>j("calm"))},[]),d.useEffect(()=>{if(!S)return;const _=T=>{k.current&&!k.current.contains(T.target)&&C(!1)};return document.addEventListener("pointerdown",_),()=>document.removeEventListener("pointerdown",_)},[S]),d.useEffect(()=>{if(!E){console.log("[COT WS] No token yet, waiting...");return}const T=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/cot?token=${encodeURIComponent(E)}`;console.log("[COT WS] Connecting to",T);let V,oe,ae=!1;const z=()=>{ae||(V=new WebSocket(T),g.current=V,V.onopen=()=>{console.log("[COT WS] Connected"),p(!0)},V.onmessage=W=>{try{const H=JSON.parse(W.data),{type:G,request_id:K}=H,Se=ee=>{const B=ee.findIndex(Q=>Q.request_id===K);return B>=0?[ee,B]:[[{request_id:K,created_at:new Date().toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),preview:"...",has_tool_calls:!1,rounds:[],injectedMemories:[],textPreview:""},...ee],0]},ge=(ee,B)=>{const ie=ee.findIndex(ne=>ne.round_index===B);if(ie>=0)return[ee,ie];const se=[...ee,{round_index:B,blocks:[]}];return se.sort((ne,Q)=>ne.round_index-Q.round_index),[se,se.findIndex(ne=>ne.round_index===B)]};if(G==="done"){h(ee=>{const B=new Set(ee);return B.delete(K),B}),n(ee=>ee.map(B=>B.request_id===K?{...B,prompt_tokens:H.prompt_tokens||0,completion_tokens:H.completion_tokens||0,elapsed_ms:H.elapsed_ms||0,textPreview:""}:B));return}if(G==="injected_memories"){n(ee=>{let[B,ie]=Se(ee);return B=[...B],B[ie]={...B[ie],injectedMemories:H.memories||[]},B}),h(ee=>new Set(ee).add(K)),a(K);return}if(G==="thinking_delta"){n(ee=>{let[B,ie]=Se(ee);B=[...B];const se={...B[ie]};let[ne,Q]=ge([...se.rounds],H.round_index);const ye={...ne[Q],blocks:[...ne[Q].blocks]};let fe=-1;for(let Ne=ye.blocks.length-1;Ne>=0;Ne--)if(ye.blocks[Ne].block_type==="thinking"){fe=Ne;break}return fe>=0?ye.blocks[fe]={...ye.blocks[fe],content:ye.blocks[fe].content+H.content}:ye.blocks.push({block_type:"thinking",content:H.content,tool_name:null}),ne[Q]=ye,se.rounds=ne,B[ie]=se,B}),h(ee=>new Set(ee).add(K)),a(K);return}if(G==="text_delta"){n(ee=>{let[B,ie]=Se(ee);B=[...B];const se={...B[ie]};return se.textPreview=(se.textPreview||"")+H.content,(!se.preview||se.preview==="...")&&(se.preview=se.textPreview.slice(0,80)),B[ie]=se,B}),h(ee=>new Set(ee).add(K)),a(K);return}if(G==="tool_use"||G==="tool_result"){n(ee=>{let[B,ie]=Se(ee);B=[...B];const se={...B[ie]};let[ne,Q]=ge([...se.rounds],H.round_index);return ne[Q]={...ne[Q],blocks:[...ne[Q].blocks,{block_type:G,content:H.content,tool_name:H.tool_name}]},se.rounds=ne,G==="tool_use"&&(se.has_tool_calls=!0),B[ie]=se,B}),h(ee=>new Set(ee).add(K)),a(K);return}if(H.block_type){const{round_index:ee,block_type:B,content:ie,tool_name:se}=H;n(ne=>{let[Q,ye]=Se(ne);Q=[...Q];const fe={...Q[ye]};let[Ne,pe]=ge([...fe.rounds],ee);return Ne[pe]={...Ne[pe],blocks:[...Ne[pe].blocks,{block_type:B,content:ie,tool_name:se}]},fe.rounds=Ne,B==="tool_use"&&(fe.has_tool_calls=!0),B==="text"&&(!fe.preview||fe.preview==="...")&&(fe.preview=ie.slice(0,80)),Q[ye]=fe,Q}),h(ne=>new Set(ne).add(K)),a(K)}}catch(H){}},V.onclose=W=>{console.log("[COT WS] Disconnected, code:",W.code,"reason:",W.reason),p(!1),g.current=null,ae||(oe=setTimeout(z,3e3))},V.onerror=W=>{console.error("[COT WS] Error:",W),V.close()})};return z(),()=>{ae=!0,clearTimeout(oe),g.current&&(g.current.onclose=null,g.current.close())}},[E]);const L=d.useRef(!0);d.useEffect(()=>{if(L.current){L.current=!1;return}localStorage.setItem("chat_mode",i);const _=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({..._,shortMode:i==="short",theaterMode:i==="theater"})),$("/api/settings/chat-mode",{method:"PUT",body:{mode:i}}).catch(()=>{})},[i]);const re=_=>{j(_),C(!1),$("/api/settings/mood",{method:"PUT",body:{mood:_}}).catch(()=>{})};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:xe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:xe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:xe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:xe.text},children:"COT "}),o.jsxs("div",{className:"flex items-center gap-2",children:[u&&o.jsx("div",{className:"h-2 w-2 rounded-full",style:{background:"#2a9d5c"},title:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:xe.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:P,disabled:r,children:o.jsx(Oc,{size:16,style:{color:xe.accentDark},className:r?"animate-spin":""})})]})]}),o.jsx("div",{className:"shrink-0 pb-3",style:{paddingLeft:20,paddingRight:20},children:o.jsxs("div",{className:"flex items-stretch gap-4 justify-center",children:[o.jsxs("div",{className:"relative flex",ref:k,children:[o.jsx("button",{className:"flex w-[42px] shrink-0 items-center justify-center rounded-[14px]",style:{background:xe.bg,boxShadow:"var(--inset-shadow)"},onClick:()=>v&&C(!S),children:v?o.jsx("img",{src:`/miniapp/assets/mood/${v}.png`,alt:v,className:"h-6 w-6",style:{imageRendering:"pixelated"}}):o.jsx("div",{className:"h-6 w-6"})}),S&&o.jsx("div",{className:"absolute left-0 top-12 z-50 rounded-[16px] overflow-hidden",style:{background:xe.bg,boxShadow:"var(--card-shadow-sm)",width:174},children:c0.map((_,T)=>{const V=Math.floor(T/3),oe=T%3,ae=v===_.key;return o.jsxs("button",{className:"inline-flex flex-col items-center justify-center",style:{width:"calc(100% / 3)",padding:"8px 0 6px",background:ae?"rgba(232,160,191,0.18)":"transparent",boxShadow:[oe<2?"inset -1px 0 0 rgba(136,136,160,0.12)":"",V<2?"inset 0 -1px 0 rgba(136,136,160,0.12)":""].filter(Boolean).join(", ")||"none"},onClick:()=>re(_.key),children:[o.jsx("img",{src:`/miniapp/assets/mood/${_.key}.png`,alt:_.label,className:"h-7 w-7",style:{imageRendering:"pixelated",filter:ae?"drop-shadow(0 0 3px #e8a0bf)":"none"}}),o.jsx("span",{className:"text-[10px] mt-0.5",style:{color:ae?"#d48aab":xe.textMuted},children:_.label})]},_.key)})})]}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:xe.bg,width:240},children:i0.map(_=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:i===_.key?xe.bg:"transparent",boxShadow:i===_.key?"var(--card-shadow-sm)":"none",color:i===_.key?xe.accentDark:xe.textMuted},onClick:()=>c(_.key),children:_.label},_.key))})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:xe.accent,borderTopColor:"transparent"}})}):x?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(dd,{size:36,style:{color:"#ef4444",opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:"#ef4444"},children:x})]}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(dd,{size:36,style:{color:xe.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:xe.textMuted},children:" COT "})]}):t.map(_=>o.jsx("div",{className:"mb-3 rounded-[18px]",style:{background:xe.bg,boxShadow:"var(--card-shadow-sm)"},children:o.jsx(x0,{item:_,expanded:l===_.request_id,onToggle:()=>a(l===_.request_id?null:_.request_id),live:f.has(_.request_id),avatarUrl:y,translateCache:m})},_.request_id))})]})}const Xe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Pl=80;function y0({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Pl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Pl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Pl)}`),f.current=y},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Pl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Xe.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(qr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function v0({msg:e,roleLabel:t,roleColor:n,fmtTime:r,onDelete:s}){const[l,a]=d.useState(!1),[i,c]=d.useState(!1),u=d.useRef(null);return d.useLayoutEffect(()=>{const p=u.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e.content,l]),o.jsx(y0,{onDelete:s,children:o.jsxs("div",{className:"rounded-[18px] p-3",style:{background:Xe.bg},children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:n(e.role)},children:t(e.role)}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[e.summarized&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px] font-semibold",style:{background:"rgba(58,138,95,0.15)",color:"#2d7a4a"},children:""}),o.jsx("span",{className:"text-[10px]",style:{color:Xe.textMuted},children:r(e.created_at)})]})]}),o.jsx("div",{ref:u,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:Xe.text}:{color:Xe.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:e.content}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:"#d48aab",background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})})]})})}function w0(){const e=At(),[t,n]=d.useState([]),[r,s]=d.useState(null),[l,a]=d.useState(!0),[i,c]=d.useState(!1),u=async()=>{var y;a(!0);try{const g=(y=(await $("/api/sessions?limit=1")).sessions)==null?void 0:y[0];if(!g){a(!1);return}s(g.id);const m=await $(`/api/sessions/${g.id}/messages?limit=50`);n((m.messages||[]).reverse()),c(m.has_more||!1)}catch(b){console.error(b)}a(!1)};d.useEffect(()=>{u()},[]);const p=async y=>{if(r)try{await $(`/api/sessions/${r}/messages/${y}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==y))}catch(b){console.error("Delete failed",b)}},f=async()=>{if(!r||!i||l)return;const y=t[t.length-1];if(y){a(!0);try{const b=await $(`/api/sessions/${r}/messages?limit=50&before_id=${y.id}`),g=(b.messages||[]).reverse();n(m=>[...m,...g]),c(b.has_more||!1)}catch(b){console.error(b)}a(!1)}},h=y=>{if(!y)return"";const b=new Date(y),g=new Date;return b.toDateString()===g.toDateString()?b.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):b.toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})},x=y=>y==="user"?"":y==="assistant"?"AI":"",w=y=>y==="user"?Xe.accentDark:y==="assistant"?"#3a9b5c":Xe.textMuted;return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Xe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Xe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:Xe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Xe.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Xe.bg,boxShadow:l?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:u,disabled:l,children:o.jsx(Oc,{size:16,style:{color:Xe.accentDark},className:l?"animate-spin":""})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("p",{className:"text-[11px]",style:{color:Xe.textMuted},children:""})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l&&t.length===0?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Xe.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:Xe.textMuted},children:""}):o.jsxs(o.Fragment,{children:[t.map(y=>o.jsx(v0,{msg:y,roleLabel:x,roleColor:w,fmtTime:h,onDelete:()=>p(y.id)},y.id)),i&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:Xe.bg,boxShadow:"var(--card-shadow-sm)",color:Xe.accentDark},onClick:f,disabled:l,children:l?"...":""})]})})]})}const F={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},b0=[{key:"memories",label:""},{key:"summaries",label:""},{key:"messages",label:""}],Ld={identity:{color:"#7b5ea7",bg:"#ede4f7"},relationship:{color:"#c26a8a",bg:"#f7e0ea"},bond:{color:"#d48aab",bg:"#fce8f0"},conflict:{color:"#b5454a",bg:"#f5dede"},fact:{color:"#4a8ab5",bg:"#deedf5"},preference:{color:"#9b7a3b",bg:"#f0ebd8"},health:{color:"#4a9b6e",bg:"#ddf0e5"},task:{color:"#6b7b9b",bg:"#e0e6f0"},ephemeral:{color:"#9b9b9b",bg:"#ececec"},other:{color:"#8a7a6a",bg:"#efe8df"}},k0=[{value:"",label:""},{value:"identity",label:"identity"},{value:"relationship",label:"relationship"},{value:"bond",label:"bond"},{value:"conflict",label:"conflict"},{value:"fact",label:"fact"},{value:"preference",label:"preference"},{value:"health",label:"health"},{value:"task",label:"task"},{value:"ephemeral",label:"ephemeral"},{value:"other",label:"other"}],j0=[{value:"",label:""},{value:"sad",label:"sad"},{value:"angry",label:"angry"},{value:"anxious",label:"anxious"},{value:"tired",label:"tired"},{value:"emo",label:"emo"},{value:"happy",label:"happy"},{value:"flirty",label:"flirty"},{value:"proud",label:"proud"},{value:"calm",label:"calm"}],S0=[{value:"",label:""},{value:"user",label:""},{value:"assistant",label:""},{value:"system",label:""}];function _r(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function Vc({text:e,keyword:t}){if(!t||!e)return o.jsx(o.Fragment,{children:e});const n=e.toLowerCase(),r=t.toLowerCase(),s=[];let l=0,a=n.indexOf(r,l);for(;a!==-1;)a>l&&s.push(o.jsx("span",{children:e.slice(l,a)},l)),s.push(o.jsx("span",{style:{color:F.accentDark,fontWeight:600},children:e.slice(a,a+r.length)},`h${a}`)),l=a+r.length,a=n.indexOf(r,l);return l<e.length&&s.push(o.jsx("span",{children:e.slice(l)},l)),o.jsx(o.Fragment,{children:s})}function Gh({selected:e}){return o.jsx("div",{className:"flex h-5 w-5 shrink-0 items-center justify-center rounded-full",style:e?{background:F.accentDark,boxShadow:"0 2px 6px rgba(201,98,138,0.3)"}:{background:F.bg,boxShadow:"var(--inset-shadow)"},children:e&&o.jsx(Wr,{size:12,color:"white",strokeWidth:3})})}function N0({message:e,onConfirm:t,onCancel:n}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:F.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:F.text},children:""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:F.textMuted},children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function C0({initialText:e,onSave:t,onCancel:n}){const[r,s]=d.useState(e);return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-5 w-full max-w-[340px] rounded-[18px] p-4",style:{background:F.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:l=>l.stopPropagation(),children:[o.jsx("textarea",{className:"w-full rounded-[12px] p-3 text-[12px] leading-relaxed resize-none outline-none",style:{background:F.bg,boxShadow:"var(--inset-shadow)",color:F.text,minHeight:140,maxHeight:280},value:r,onChange:l=>s(l.target.value),autoFocus:!0}),o.jsxs("div",{className:"mt-3 flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.textMuted},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.accentDark},onClick:()=>t(r),disabled:!r.trim(),children:""})]})]})})}function Ad({children:e,time:t,badge:n,keyword:r,onEdit:s,selectMode:l,selected:a,onToggle:i,onLongPress:c}){const[u,p]=d.useState(!1),[f,h]=d.useState(!1),x=d.useRef(null),w=typeof e=="string"?e:"",y=d.useRef(null),b=d.useRef(!1);d.useLayoutEffect(()=>{const j=x.current;j&&!u&&h(j.scrollHeight>j.clientHeight+1)},[w,u]);const g=()=>{l||(b.current=!1,y.current=setTimeout(()=>{b.current=!0,c==null||c()},600))},m=()=>{clearTimeout(y.current)},v=()=>{if(!b.current&&l){i==null||i();return}};return o.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:g,onTouchEnd:m,onTouchCancel:m,onClick:v,children:[l&&o.jsx("div",{className:"mt-1",children:o.jsx(Gh,{selected:a})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between gap-1",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[n,o.jsx("div",{ref:x,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:u?{color:F.text}:{color:F.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:j=>{l||(j.stopPropagation(),p(!u))},children:o.jsx(Vc,{text:w,keyword:r})})]}),!l&&s&&o.jsx("button",{className:"mt-0.5 flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)"},onClick:j=>{j.stopPropagation(),s()},children:o.jsx(ph,{size:11,style:{color:F.accentDark}})})]}),o.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:F.textMuted},children:t||""}),!l&&(f||u)&&o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:F.accentDark,background:"rgba(232,160,191,0.1)"},onClick:j=>{j.stopPropagation(),p(!u)},children:u?"":""})]})]})]})}function E0({content:e,deletedAt:t,keyword:n,onRestore:r,onPermanentDelete:s}){const[l,a]=d.useState(!1),[i,c]=d.useState(!1),u=d.useRef(null);return d.useLayoutEffect(()=>{const p=u.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e,l]),o.jsxs("div",{className:"mb-2 rounded-[14px] p-3",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",opacity:.75},children:[o.jsx("div",{ref:u,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:F.text}:{color:F.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:o.jsx(Vc,{text:e,keyword:n})}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:F.accentDark,background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:F.textMuted},children:t?` ${_r(t)}`:""}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(59,130,246,0.1)",color:"#3b82f6"},onClick:r,children:""}),o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(239,68,68,0.1)",color:"#ef4444"},onClick:s,children:""})]})]})]})}function M0({msg:e,keyword:t,roleLabel:n,roleColor:r,selectMode:s,selected:l,onToggle:a,onLongPress:i}){const[c,u]=d.useState(!1),[p,f]=d.useState(!1),h=d.useRef(null),x=d.useRef(null),w=d.useRef(!1);d.useLayoutEffect(()=>{const m=h.current;m&&!c&&f(m.scrollHeight>m.clientHeight+1)},[e.content,c]);const y=()=>{s||(w.current=!1,x.current=setTimeout(()=>{w.current=!0,i==null||i()},600))},b=()=>{clearTimeout(x.current)},g=()=>{if(!w.current&&s){a==null||a();return}};return o.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:y,onTouchEnd:b,onTouchCancel:b,onClick:g,children:[s&&o.jsx("div",{className:"mt-1",children:o.jsx(Gh,{selected:l})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:r(e.role)},children:n(e.role)}),e.summary_group_id&&o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(74,138,181,0.1)",color:"#4a8ab5"},children:["",e.summary_group_id]})]}),o.jsx("span",{className:"text-[10px]",style:{color:F.textMuted},children:_r(e.created_at)})]}),o.jsx("div",{ref:h,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:c?{color:F.text}:{color:F.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:m=>{s||(m.stopPropagation(),u(!c))},children:o.jsx(Vc,{text:e.content,keyword:t})}),!s&&(p||c)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:F.accentDark,background:"rgba(232,160,191,0.1)"},onClick:m=>{m.stopPropagation(),u(!c)},children:c?"":""})})]})]})}function _0(){const e=At(),[t,n]=d.useState("memories"),[r,s]=d.useState(!1),[l,a]=d.useState(null),[i,c]=d.useState([]),[u,p]=d.useState(null),[f,h]=d.useState(""),[x,w]=d.useState(null),[y,b]=d.useState(null),[g,m]=d.useState(""),[v,j]=d.useState(""),[S,C]=d.useState(""),[k,E]=d.useState(!1),[D,P]=d.useState(new Set),[L,re]=d.useState([]),[_,T]=d.useState([]),[V,oe]=d.useState([]),[ae,z]=d.useState([]),[W,H]=d.useState([]),[G,K]=d.useState(!0),[Se,ge]=d.useState(!1),[ee,B]=d.useState(!1),[ie,se]=d.useState(!1);d.useEffect(()=>{E(!1),P(new Set)},[t]),d.useEffect(()=>{$("/api/sessions?limit=50").then(N=>{const I=N.sessions||[];c(I),I.length>0&&!l&&a(I[0].id)}).catch(()=>{})},[]),d.useEffect(()=>{l&&$(`/api/sessions/${l}/info`).then(N=>p(N.assistant_name||null)).catch(()=>p(null))},[l]);const ne=50,Q=d.useRef(""),ye=d.useRef(null),fe=d.useRef({klass:"",mood:"",role:""});fe.current={klass:g,mood:v,role:S},d.useEffect(()=>{l&&pe()},[l,r]),d.useEffect(()=>{l&&!r&&pe()},[t]),d.useEffect(()=>{l&&!r&&pe()},[g,v,S]),d.useEffect(()=>(ye.current&&clearTimeout(ye.current),ye.current=setTimeout(()=>{const N=f.trim();N!==Q.current&&(Q.current=N,l&&pe(N))},400),()=>{ye.current&&clearTimeout(ye.current)}),[f]);const Ne=N=>{const I=[],U=(N!=null?N:Q.current||"").trim();U&&I.push(`search=${encodeURIComponent(U)}`);const ke=fe.current;return t==="memories"&&ke.klass&&I.push(`klass=${encodeURIComponent(ke.klass)}`),t==="summaries"&&ke.mood&&I.push(`mood_tag=${encodeURIComponent(ke.mood)}`),t==="messages"&&ke.role&&I.push(`role=${encodeURIComponent(ke.role)}`),I.length?`&${I.join("&")}`:""},pe=async N=>{if(!l)return;K(!0);const I=Ne(N);try{if(r){const[U,ke]=await Promise.all([$("/api/memories/trash?limit=100"),$(`/api/sessions/${l}/summaries/trash`)]);z(U.memories||[]),H(ke.summaries||[])}else if(t==="memories"){const U=await $(`/api/memories?limit=${ne}&offset=0${I}`);re(U.memories||[]),ge((U.total||0)>(U.memories||[]).length)}else if(t==="summaries"){const U=await $(`/api/sessions/${l}/summaries?limit=${ne}&offset=0${I}`);T(U.summaries||[]),B((U.total||0)>(U.summaries||[]).length)}else{const U=await $(`/api/sessions/${l}/messages?limit=50${I}`);oe((U.messages||[]).reverse()),se(U.has_more||!1)}}catch(U){console.error(U)}K(!1)},ut=async()=>{if(!Se||G)return;K(!0);const N=Ne();try{const I=await $(`/api/memories?limit=${ne}&offset=${L.length}${N}`),U=I.memories||[];re(ke=>[...ke,...U]),ge((I.total||0)>L.length+U.length)}catch(I){console.error(I)}K(!1)},_t=async()=>{if(!l||!ee||G)return;K(!0);const N=Ne();try{const I=await $(`/api/sessions/${l}/summaries?limit=${ne}&offset=${_.length}${N}`),U=I.summaries||[];T(ke=>[...ke,...U]),B((I.total||0)>_.length+U.length)}catch(I){console.error(I)}K(!1)},rn=async()=>{if(!l||!ie||G)return;const N=V[V.length-1];if(!N)return;K(!0);const I=Ne();try{const U=await $(`/api/sessions/${l}/messages?limit=50&before_id=${N.id}${I}`);oe(ke=>[...ke,...(U.messages||[]).reverse()]),se(U.has_more||!1)}catch(U){console.error(U)}K(!1)},De=f.trim(),J=d.useMemo(()=>De?ae.filter(N=>N.content.toLowerCase().includes(De.toLowerCase())):ae,[ae,De]),Z=d.useMemo(()=>De?W.filter(N=>(N.summary_content||"").toLowerCase().includes(De.toLowerCase())):W,[W,De]),he=(N,I)=>w({message:N,action:I}),Re=async N=>{await $(`/api/memories/${N}/restore`,{method:"POST"}),z(I=>I.filter(U=>U.id!==N))},yt=N=>he("",async()=>{await $(`/api/memories/${N}/permanent`,{method:"DELETE"}),z(I=>I.filter(U=>U.id!==N))}),Be=async N=>{await $(`/api/sessions/${l}/summaries/${N}/restore`,{method:"POST"}),H(I=>I.filter(U=>U.id!==N))},Hn=N=>he("",async()=>{await $(`/api/sessions/${l}/summaries/${N}/permanent`,{method:"DELETE"}),H(I=>I.filter(U=>U.id!==N))}),gn=N=>{P(I=>{const U=new Set(I);return U.has(N)?U.delete(N):U.add(N),U})},vt=N=>{E(!0),P(new Set([N]))},$t=()=>{let N=[];t==="memories"?N=L.map(I=>I.id):t==="summaries"?N=_.map(I=>I.id):N=V.map(I=>I.id),P(new Set(N))},Qt=()=>{E(!1),P(new Set)},cr=()=>{if(D.size===0)return;const N=D.size;he(` ${N} ${t==="memories"?"":t==="summaries"?"":""}`,async()=>{const I=[...D];t==="memories"?(await $("/api/memories/batch",{method:"DELETE",body:{ids:I}}),re(U=>U.filter(ke=>!D.has(ke.id)))):t==="summaries"?(await $(`/api/sessions/${l}/summaries/batch`,{method:"DELETE",body:{ids:I}}),T(U=>U.filter(ke=>!D.has(ke.id)))):(await $(`/api/sessions/${l}/messages/batch`,{method:"DELETE",body:{ids:I}}),oe(U=>U.filter(ke=>!D.has(ke.id)))),Qt()})},wt=async N=>{if(y){try{y.type==="memory"?(await $(`/api/memories/${y.id}`,{method:"PUT",body:{content:N}}),re(I=>I.map(U=>U.id===y.id?{...U,content:N}:U))):(await $(`/api/sessions/${l}/summaries/${y.id}`,{method:"PATCH",body:{summary_content:N}}),T(I=>I.map(U=>U.id===y.id?{...U,summary_content:N}:U)))}catch(I){console.error(I)}b(null)}},Wn=N=>N==="user"?"":N==="assistant"?u||"":"",ur=N=>N==="user"?F.accentDark:N==="assistant"?"#8d68c4":F.textMuted,A=t==="memories"?k0:t==="summaries"?j0:S0,de=t==="memories"?g:t==="summaries"?v:S,le=N=>{t==="memories"?m(N):t==="summaries"?j(N):C(N)},rs=r?(()=>{if(G)return o.jsx(zl,{});const N=t==="memories"?J:Z;return N.length===0?o.jsx(Il,{text:De?"":""}):N.map(I=>o.jsx(E0,{content:I.content||I.summary_content||"()",deletedAt:I.deleted_at,keyword:De,onRestore:()=>t==="memories"?Re(I.id):Be(I.id),onPermanentDelete:()=>t==="memories"?yt(I.id):Hn(I.id)},I.id))})():t==="memories"?G&&L.length===0?o.jsx(zl,{}):L.length===0?o.jsx(Il,{text:De?"":""}):o.jsxs(o.Fragment,{children:[!k&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:F.textMuted},children:""}),L.map(N=>o.jsx(Ad,{time:N.updated_at?`${_r(N.created_at)}   ${_r(N.updated_at)}`:_r(N.created_at),keyword:De,onEdit:()=>b({type:"memory",id:N.id,text:N.content}),selectMode:k,selected:D.has(N.id),onToggle:()=>gn(N.id),onLongPress:()=>vt(N.id),badge:(()=>{const I=Ld[N.klass]||Ld.other;return o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:I.bg,color:I.color},children:N.klass}),o.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:F.textMuted},children:["#",N.id]})]})})(),children:N.content},N.id)),Se&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.accentDark},onClick:ut,disabled:G,children:G?"...":""})]}):t==="summaries"?G&&_.length===0?o.jsx(zl,{}):_.length===0?o.jsx(Il,{text:De?"":""}):o.jsxs(o.Fragment,{children:[!k&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:F.textMuted},children:""}),_.map(N=>o.jsx(Ad,{time:_r(N.created_at),keyword:De,onEdit:()=>b({type:"summary",id:N.id,text:N.summary_content}),selectMode:k,selected:D.has(N.id),onToggle:()=>gn(N.id),onLongPress:()=>vt(N.id),badge:o.jsxs(o.Fragment,{children:[N.mood_tag&&o.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:"rgba(232,160,191,0.15)",color:F.accentDark},children:N.mood_tag}),o.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:F.textMuted},children:["#",N.id]})]}),children:N.summary_content||"()"},N.id)),ee&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.accentDark},onClick:_t,disabled:G,children:G?"...":""})]}):G&&V.length===0?o.jsx(zl,{}):V.length===0?o.jsx(Il,{text:De?"":""}):o.jsxs(o.Fragment,{children:[!k&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:F.textMuted},children:""}),V.map(N=>o.jsx(M0,{msg:N,keyword:De,roleLabel:Wn,roleColor:ur,selectMode:k,selected:D.has(N.id),onToggle:()=>gn(N.id),onLongPress:()=>vt(N.id)},N.id)),ie&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.accentDark},onClick:rn,disabled:G,children:G?"...":""})]});return o.jsxs("div",{className:"flex h-full flex-col",style:{background:F.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:F.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:F.text},children:r?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:F.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>s(!r),children:o.jsx(qr,{size:16,style:{color:r?"#ef4444":F.accentDark}})})]}),k&&o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsxs("div",{className:"flex items-center justify-between rounded-[14px] px-4 py-2.5",style:{background:F.bg,boxShadow:"var(--inset-shadow)"},children:[o.jsxs("span",{className:"text-[12px] font-semibold",style:{color:F.accentDark},children:[" ",D.size," "]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{className:"text-[12px] font-medium",style:{color:F.text},onClick:$t,children:""}),o.jsx("button",{className:"text-[12px] font-medium",style:{color:F.textMuted},onClick:Qt,children:""}),o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold text-white",style:{background:D.size>0?"#ff4d6d":"rgba(255,77,109,0.3)"},onClick:cr,disabled:D.size===0,children:""})]})]})}),!k&&o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:F.bg,boxShadow:"var(--inset-shadow)"},children:b0.map(N=>{const I=r&&N.key==="messages",U=t===N.key;return o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:I?{color:F.textMuted,opacity:.35,cursor:"default"}:U?{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.accentDark}:{color:F.textMuted},disabled:I,onClick:()=>!I&&n(N.key),children:N.label},N.key)})})}),!k&&o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative",style:{width:"28%"},children:[o.jsx("select",{className:"w-full appearance-none rounded-[12px] py-2 pl-3 pr-7 text-[11px] font-medium outline-none truncate",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text,WebkitAppearance:"none"},value:l!=null?l:"",onChange:N=>a(Number(N.target.value)),children:i.map(N=>o.jsxs("option",{value:N.id,children:["#",N.id," ",N.title||""]},N.id))}),o.jsx(sr,{size:12,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2",style:{color:F.textMuted}})]}),o.jsxs("div",{className:"relative",style:{width:"28%"},children:[o.jsx("select",{className:"w-full appearance-none rounded-[12px] py-2 pl-3 pr-7 text-[11px] font-medium outline-none truncate",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:de?F.accentDark:F.text,WebkitAppearance:"none"},value:de,onChange:N=>le(N.target.value),children:A.map(N=>o.jsx("option",{value:N.value,children:N.label},N.value))}),o.jsx(sr,{size:12,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2",style:{color:F.textMuted}})]}),o.jsxs("div",{className:"relative flex-1",children:[o.jsx($y,{size:13,className:"absolute left-2.5 top-1/2 -translate-y-1/2",style:{color:F.textMuted}}),o.jsx("input",{className:"w-full rounded-[12px] py-2 pl-8 pr-7 text-[11px] outline-none",style:{background:F.bg,boxShadow:"var(--inset-shadow)",color:F.text},placeholder:"...",value:f,onChange:N=>h(N.target.value)}),f&&o.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>h(""),children:o.jsx(ll,{size:13,style:{color:F.textMuted}})})]})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:rs}),x&&o.jsx(N0,{message:x.message,onConfirm:async()=>{try{await x.action()}catch(N){console.error(N)}w(null)},onCancel:()=>w(null)}),y&&o.jsx(C0,{initialText:y.text,onSave:wt,onCancel:()=>b(null)})]})}function zl(){return o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:F.accent,borderTopColor:"transparent"}})})}function Il({text:e}){return o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:F.textMuted},children:e})}const Y={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},T0=[{key:"theirs",label:""},{key:"mine",label:""}],Ol=80;function Jh(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function D0({message:e,onConfirm:t,onCancel:n}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Y.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Y.text},children:""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:Y.textMuted},children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)",color:Y.text},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function R0({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Ol);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Ol,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Ol)}`),f.current=y},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Ol):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(qr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function P0({unlockAt:e}){const[t,n]=d.useState(Date.now());d.useEffect(()=>{const u=setInterval(()=>n(Date.now()),1e3);return()=>clearInterval(u)},[]);const r=new Date(e).getTime()-t;if(r<=0)return null;const s=Math.floor(r/864e5),l=Math.floor(r%864e5/36e5),a=Math.floor(r%36e5/6e4),i=Math.floor(r%6e4/1e3);let c="";return s>0&&(c+=`${s}`),(l>0||s>0)&&(c+=`${l}`),c+=`${a}${i}`,o.jsxs("div",{className:"flex items-center gap-1.5 text-[12px]",style:{color:Y.accentDark},children:[o.jsx(Oy,{size:12}),o.jsx("span",{children:c})]})}function z0({assistants:e,avatarMap:t,currentId:n,onSelect:r,onClose:s}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:s,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-5",style:{background:Y.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:l=>l.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:Y.text},children:""}),o.jsx("button",{onClick:s,children:o.jsx(ll,{size:18,style:{color:Y.textMuted}})})]}),o.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:e.map(l=>{var i;const a=t[l.id]||l.avatar_url;return o.jsxs("button",{className:"mb-2 flex w-full items-center gap-3 rounded-[14px] p-3 text-left",style:{background:Y.bg,boxShadow:l.id===n?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{r(l.id),s()},children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:36,height:36,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:2},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Y.bg},children:a?o.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:Y.accentDark},children:((i=l.name)==null?void 0:i[0])||"?"})})}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:Y.text},children:l.name})]},l.id)})})]})})}function I0({diary:e,onBack:t,onMarkRead:n}){return d.useEffect(()=>{e&&!e.is_read&&e.author==="assistant"&&(!e.unlock_at||new Date(e.unlock_at)<=new Date)&&n(e.id)},[e]),o.jsxs("div",{className:"flex h-full flex-col",style:{background:Y.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)"},onClick:t,children:o.jsx(Mt,{size:22,style:{color:Y.text}})}),o.jsx("h1",{className:"text-[15px] font-bold truncate max-w-[60%]",style:{color:Y.text},children:e.title||""}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:o.jsxs("div",{className:"rounded-[18px] p-5",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{className:"mb-3 text-[10px]",style:{color:Y.textMuted},children:Jh(e.created_at)}),o.jsx("div",{className:"text-[13px] leading-[28px]",style:{color:Y.text},children:e.content.split(`
`).map((r,s)=>o.jsx("div",{style:{borderBottom:"1px solid rgba(0,0,0,0.06)",minHeight:28},children:r||""},s))})]})})]})}function O0({assistantId:e,onSave:t,onCancel:n}){const[r,s]=d.useState(""),[l,a]=d.useState(""),[i,c]=d.useState(!1),[u,p]=d.useState(""),[f,h]=d.useState(!1),[x,w]=d.useState(!1),y=async()=>{if(!(!l.trim()||f)){h(!0);try{const b={assistant_id:e,author:"user",title:r.trim(),content:l.trim()};i&&u&&(b.unlock_at=new Date(u).toISOString()),await t(b)}finally{h(!1)}}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Y.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Mt,{size:22,style:{color:Y.text}})}),o.jsx("h1",{className:"text-[15px] font-bold",style:{color:Y.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Y.bg,boxShadow:l.trim()?"var(--card-shadow-sm)":"var(--inset-shadow)"},onClick:y,disabled:!l.trim()||f,children:o.jsx("span",{className:"text-[12px] font-bold",style:{color:l.trim()?Y.accentDark:Y.textMuted},children:""})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[!x&&o.jsx("input",{className:"mb-3 w-full rounded-[12px] px-3 py-2.5 text-[13px] font-medium outline-none",style:{background:Y.bg,boxShadow:"var(--inset-shadow)",color:Y.text},placeholder:"",value:r,onChange:b=>s(b.target.value)}),o.jsxs("div",{className:"relative mb-3",children:[o.jsx("textarea",{className:"w-full rounded-[14px] p-3 text-[13px] leading-[28px] resize-none outline-none",style:{background:Y.bg,boxShadow:"var(--inset-shadow)",color:Y.text,minHeight:x?"calc(100vh - 120px)":200,backgroundImage:"repeating-linear-gradient(transparent, transparent 27px, rgba(0,0,0,0.05) 27px, rgba(0,0,0,0.05) 28px)",backgroundPositionY:9},placeholder:"...",value:l,onChange:b=>a(b.target.value),autoFocus:!0}),o.jsx("button",{className:"absolute top-2 right-2 flex h-7 w-7 items-center justify-center rounded-full",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>w(!x),children:x?o.jsx(Xr,{size:13,style:{color:Y.accentDark}}):o.jsx(sl,{size:13,style:{color:Y.accentDark}})})]}),!x&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-[14px] px-4 py-3",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-[13px] font-medium",style:{color:Y.text},children:""}),o.jsx("p",{className:"text-[10px]",style:{color:Y.textMuted},children:""})]}),o.jsx("button",{className:"relative h-7 w-12 rounded-full transition-colors",style:{background:i?Y.accent:"rgba(0,0,0,0.1)"},onClick:()=>{if(!i&&!u){const b=new Date;b.setDate(b.getDate()+1),b.setHours(9,0,0,0);const g=m=>String(m).padStart(2,"0");p(`${b.getFullYear()}-${g(b.getMonth()+1)}-${g(b.getDate())}T${g(b.getHours())}:${g(b.getMinutes())}`)}c(!i)},children:o.jsx("div",{className:"absolute top-0.5 h-6 w-6 rounded-full transition-transform",style:{background:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",transform:i?"translateX(22px)":"translateX(2px)"}})})]}),i&&o.jsxs("div",{className:"rounded-[14px] px-4 py-3",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("p",{className:"mb-2 text-[12px] font-medium",style:{color:Y.text},children:""}),o.jsx("input",{type:"datetime-local",className:"w-full rounded-[10px] px-3 py-2 text-[13px] outline-none",style:{background:Y.bg,boxShadow:"var(--inset-shadow)",color:Y.text},value:u,onChange:b=>p(b.target.value)})]})]})]})]})}function L0(){var _;const e=At(),[t,n]=d.useState("theirs"),[r,s]=d.useState([]),[l,a]=d.useState({}),[i,c]=d.useState(()=>{const T=localStorage.getItem("diary_assistant_id");return T?Number(T):null}),u=T=>{c(T),T!=null&&localStorage.setItem("diary_assistant_id",String(T))},[p,f]=d.useState(!1),[h,x]=d.useState([]),[w,y]=d.useState(!0),[b,g]=d.useState(null),[m,v]=d.useState(null),[j,S]=d.useState(!1);d.useEffect(()=>{$("/api/assistants").then(async T=>{const V=T.assistants||[];s(V),V.length>0&&(i&&V.some(z=>z.id===i)||u(V[0].id));const oe={};await Promise.all(V.map(async ae=>{const z=await Zr(`assistant-avatar-${ae.id}`).catch(()=>null);z&&(oe[ae.id]=z)})),a(oe)}).catch(()=>{})},[]);const C=r.find(T=>T.id===i),k=i&&l[i]||(C==null?void 0:C.avatar_url);d.useEffect(()=>{i!=null&&E()},[i,t]);const E=async()=>{y(!0);try{const V=await $(`/api/diary?assistant_id=${i}&author=${t==="theirs"?"assistant":"user"}&limit=100`);x(V.diary||[])}catch(T){console.error(T)}y(!1)},D=T=>{g({message:"",action:async()=>{await $(`/api/diary/${T}`,{method:"DELETE"}),x(V=>V.filter(oe=>oe.id!==T))}})},P=async T=>{try{await $(`/api/diary/${T}/read`,{method:"POST"}),x(V=>V.map(oe=>oe.id===T?{...oe,is_read:!0}:oe))}catch(V){console.error(V)}},L=async T=>{await $("/api/diary",{method:"POST",body:T}),S(!1),E()},re=T=>{T.unlock_at&&new Date(T.unlock_at)>new Date||v(T)};return m?o.jsx(I0,{diary:m,onBack:()=>{v(null),E()},onMarkRead:P}):j?o.jsx(O0,{assistantId:i,onSave:L,onCancel:()=>S(!1)}):o.jsxs("div",{className:"flex h-full flex-col",style:{background:Y.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:Y.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Y.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{border:"2px solid #e8a0bf",padding:2},onClick:()=>f(!0),children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Y.bg},children:k?o.jsx("img",{src:k,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:Y.accentDark},children:((_=C==null?void 0:C.name)==null?void 0:_[0])||"?"})})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:Y.bg,boxShadow:"var(--inset-shadow)"},children:T0.map(T=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:t===T.key?{background:Y.bg,boxShadow:"var(--card-shadow-sm)",color:Y.accentDark}:{color:Y.textMuted},onClick:()=>n(T.key),children:T.label},T.key))})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24",children:w?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Y.accent,borderTopColor:"transparent"}})}):h.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:Y.textMuted},children:t==="theirs"?"":""}):h.map(T=>{const V=T.unlock_at&&new Date(T.unlock_at)>new Date;return o.jsx(R0,{onDelete:()=>D(T.id),children:o.jsxs("div",{className:"p-4 rounded-[18px]",style:{background:Y.bg,userSelect:"none"},onClick:()=>re(T),children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[!T.is_read&&T.author==="assistant"&&!V&&o.jsx("div",{className:"h-2 w-2 shrink-0 rounded-full",style:{background:"#ef4444"}}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:Y.text},children:T.title||""})]}),o.jsx("span",{className:"text-[10px] shrink-0 ml-2",style:{color:Y.textMuted},children:Jh(T.created_at)})]}),V?o.jsx(P0,{unlockAt:T.unlock_at}):o.jsx("p",{className:"text-[12px] leading-relaxed break-words",style:{color:Y.textMuted,maxHeight:40,overflow:"hidden"},children:T.content.length>60?T.content.slice(0,60)+"...":T.content})]})},T.id)})}),t==="mine"&&o.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center",style:{zIndex:30},children:o.jsx("button",{className:"flex h-12 w-12 items-center justify-center rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",boxShadow:"0 4px 14px rgba(232,160,191,0.4)"},onClick:()=>S(!0),children:o.jsx(Jr,{size:22,color:"white"})})}),p&&o.jsx(z0,{assistants:r,avatarMap:l,currentId:i,onSelect:u,onClose:()=>f(!1)}),b&&o.jsx(D0,{message:b.message,onConfirm:async()=>{try{await b.action()}catch(T){console.error(T)}g(null)},onCancel:()=>g(null)})]})}const be={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function A0({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:be.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:be.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:be.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Xr,{size:18,style:{color:be.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:be.bg,color:be.text},placeholder:"..."})]})}function $0(){const e=At(),[t,n]=d.useState(""),[r,s]=d.useState(""),[l,a]=d.useState(""),[i,c]=d.useState(""),[u,p]=d.useState(!1),[f,h]=d.useState(!0),[x,w]=d.useState(null),[y,b]=d.useState(!1),g=d.useRef(null),m=d.useRef(null),v=k=>{w(k),setTimeout(()=>w(null),2e3)};d.useEffect(()=>{$("/api/user/profile").then(k=>{n(k.nickname||""),s(k.background_url||""),a(k.basic_info||"")}).catch(()=>{}).finally(()=>h(!1)),Zr("user-avatar").then(k=>{k&&c(k)}).catch(function(){})},[]);const j=k=>{var P;const E=(P=k.target.files)==null?void 0:P[0];if(!E)return;const D=new FileReader;D.onload=async L=>{const re=L.target.result;try{await Ii("user-avatar",re),c(re)}catch(_){v("")}},D.readAsDataURL(E),k.target.value=""},S=k=>{var P;const E=(P=k.target.files)==null?void 0:P[0];if(!E)return;const D=new FileReader;D.onload=L=>a(L.target.result||""),D.readAsText(E),k.target.value=""},C=async()=>{p(!0);try{const k={nickname:t.trim()||null,background_url:r||null,basic_info:l||null,avatar_url:i?"user-avatar":null};await $("/api/user/profile",{method:"PUT",body:k});try{const E=JSON.parse(localStorage.getItem("whisper_profile")||"{}");localStorage.setItem("whisper_profile",JSON.stringify({...E,...k}))}catch(E){}v("")}catch(k){v("")}finally{p(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:be.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:be.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Mt,{size:22,style:{color:be.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:be.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:be.bg,boxShadow:u?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:C,disabled:u,children:o.jsx(Qo,{size:18,style:{color:be.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px space-y-4",children:f?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:be.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-[20px] p-5",style:{background:be.bg,boxShadow:"var(--card-shadow)"},children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var k;return(k=g.current)==null?void 0:k.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:be.bg},children:i?o.jsx("img",{src:i,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:24},children:""})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:be.accentDark},children:o.jsx(dh,{size:9,color:"white"})})]}),o.jsx("input",{ref:g,type:"file",accept:"image/*",className:"hidden",onChange:j}),o.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:be.textMuted},children:""}),o.jsx("input",{type:"text",value:t,onChange:k=>n(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:be.bg,color:be.text}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:be.textMuted},children:""}),o.jsx("input",{type:"text",value:r,onChange:k=>s(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2 text-[13px] italic outline-none",style:{boxShadow:"var(--inset-shadow)",background:be.bg,color:be.text}})]})]})]})}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:be.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:be.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:be.bg},onClick:()=>{var k;return(k=m.current)==null?void 0:k.click()},title:"",children:o.jsx(Yo,{size:13,style:{color:be.textMuted}})}),o.jsx("input",{ref:m,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:S}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:be.bg},onClick:()=>b(!0),title:"",children:o.jsx(sl,{size:13,style:{color:be.accentDark}})})]})]}),o.jsx("textarea",{value:l,onChange:k=>a(k.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:be.bg,color:be.text}})]})]})}),y&&o.jsx(A0,{value:l,onChange:a,onClose:()=>b(!1)}),x&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:x})})]})}function mr(){var n;const e=(n=window.Telegram)==null?void 0:n.WebApp,t=Math.max((e==null?void 0:e.viewportHeight)||0,window.innerHeight);document.documentElement.style.setProperty("--tg-viewport-height",t+"px")}function F0({onSuccess:e}){const[t,n]=d.useState(""),[r,s]=d.useState(""),[l,a]=d.useState(!1),i=async c=>{if(c.preventDefault(),!!t.trim()){a(!0),s("");try{await ky(t),e()}catch(u){s(u.message||"")}finally{a(!1)}}};return o.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--bg)",padding:"2rem"},children:o.jsxs("div",{style:{width:"100%",maxWidth:320,borderRadius:24,padding:"2rem 1.5rem",background:"var(--bg)",boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontSize:36,marginBottom:8},children:""}),o.jsx("h1",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--text)",margin:0},children:"WHISPER"}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:4},children:""})]}),o.jsxs("form",{onSubmit:i,children:[o.jsx("input",{type:"password",value:t,onChange:c=>n(c.target.value),placeholder:"",autoFocus:!0,style:{width:"100%",padding:"12px 16px",borderRadius:14,border:"none",outline:"none",fontSize:14,color:"var(--text)",background:"var(--bg)",boxShadow:"var(--inset-shadow)",boxSizing:"border-box"}}),r&&o.jsx("p",{style:{color:"#ef4444",fontSize:"0.75rem",textAlign:"center",marginTop:8,marginBottom:0},children:r}),o.jsx("button",{type:"submit",disabled:l||!t.trim(),style:{width:"100%",marginTop:16,padding:"12px 0",borderRadius:14,border:"none",fontSize:14,fontWeight:600,color:"#fff",background:l||!t.trim()?"var(--text-muted)":"linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%)",cursor:l||!t.trim()?"not-allowed":"pointer",boxShadow:"var(--card-shadow-sm)"},children:l?"...":""})]})]})})}function B0(){const e=zc();return d.useEffect(()=>{var n;const t=(n=window.Telegram)==null?void 0:n.WebApp;t&&!e.pathname.startsWith("/cot")&&t.expand(),mr()},[e.pathname]),o.jsxs(yy,{children:[o.jsx(st,{path:"/",element:o.jsx(Xy,{})}),o.jsx(st,{path:"/profile",element:o.jsx($0,{})}),o.jsx(st,{path:"/world-books",element:o.jsx(O1,{})}),o.jsx(st,{path:"/world-books/new",element:o.jsx(Md,{})}),o.jsx(st,{path:"/world-books/:id",element:o.jsx(Md,{})}),o.jsx(st,{path:"/assistants",element:o.jsx(K1,{})}),o.jsx(st,{path:"/assistants/new",element:o.jsx(Td,{})}),o.jsx(st,{path:"/assistants/:id",element:o.jsx(Td,{})}),o.jsx(st,{path:"/settings",element:o.jsx(t0,{})}),o.jsx(st,{path:"/settings/api",element:o.jsx(a0,{})}),o.jsx(st,{path:"/cot",element:o.jsx(g0,{})}),o.jsx(st,{path:"/memories",element:o.jsx(_0,{})}),o.jsx(st,{path:"/diary",element:o.jsx(L0,{})}),o.jsx(st,{path:"/messages",element:o.jsx(w0,{})})]})}function U0(){const[e,t]=d.useState(null);return d.useEffect(()=>{var r;const n=(r=window.Telegram)==null?void 0:r.WebApp;return localStorage.getItem("whisper_token")||n&&n.initData&&n.initData.length>0?t("ok"):t("login"),n&&(n.ready(),window.location.hash.startsWith("#/cot")||n.expand()),mr(),n&&n.onEvent("viewportChanged",mr),window.addEventListener("resize",mr),()=>{n&&n.offEvent("viewportChanged",mr),window.removeEventListener("resize",mr)}},[]),e===null?null:e==="login"?o.jsx(F0,{onSuccess:()=>t("ok")}):o.jsx(by,{children:o.jsx(B0,{})})}Fa.createRoot(document.getElementById("root")).render(o.jsx(Me.StrictMode,{children:o.jsx(U0,{})}));
