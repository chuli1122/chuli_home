function _x(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Mx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pf={exports:{}},Qo={},hf={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ml=Symbol.for("react.element"),Tx=Symbol.for("react.portal"),Dx=Symbol.for("react.fragment"),Rx=Symbol.for("react.strict_mode"),zx=Symbol.for("react.profiler"),Px=Symbol.for("react.provider"),Lx=Symbol.for("react.context"),Ix=Symbol.for("react.forward_ref"),Ox=Symbol.for("react.suspense"),$x=Symbol.for("react.memo"),Ax=Symbol.for("react.lazy"),gu=Symbol.iterator;function Fx(e){return e===null||typeof e!="object"?null:(e=gu&&e[gu]||e["@@iterator"],typeof e=="function"?e:null)}var xf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mf=Object.assign,gf={};function ps(e,t,n){this.props=e,this.context=t,this.refs=gf,this.updater=n||xf}ps.prototype.isReactComponent={};ps.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ps.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yf(){}yf.prototype=ps.prototype;function ic(e,t,n){this.props=e,this.context=t,this.refs=gf,this.updater=n||xf}var cc=ic.prototype=new yf;cc.constructor=ic;mf(cc,ps.prototype);cc.isPureReactComponent=!0;var yu=Array.isArray,vf=Object.prototype.hasOwnProperty,uc={current:null},bf={key:!0,ref:!0,__self:!0,__source:!0};function wf(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)vf.call(t,r)&&!bf.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:ml,type:e,key:o,ref:a,props:s,_owner:uc.current}}function Bx(e,t){return{$$typeof:ml,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function dc(e){return typeof e=="object"&&e!==null&&e.$$typeof===ml}function Ux(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var vu=/\/+/g;function Ca(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ux(""+e.key):t.toString(36)}function so(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case ml:case Tx:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Ca(a,0):r,yu(s)?(n="",e!=null&&(n=e.replace(vu,"$&/")+"/"),so(s,t,n,"",function(d){return d})):s!=null&&(dc(s)&&(s=Bx(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(vu,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",yu(e))for(var i=0;i<e.length;i++){o=e[i];var c=r+Ca(o,i);a+=so(o,t,n,c,s)}else if(c=Fx(e),typeof c=="function")for(e=c.call(e),i=0;!(o=e.next()).done;)o=o.value,c=r+Ca(o,i++),a+=so(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Tl(e,t,n){if(e==null)return e;var r=[],s=0;return so(e,r,"","",function(o){return t.call(n,o,s++)}),r}function Hx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var St={current:null},lo={transition:null},Wx={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:lo,ReactCurrentOwner:uc};function kf(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Tl,forEach:function(e,t,n){Tl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Tl(e,function(){t++}),t},toArray:function(e){return Tl(e,function(t){return t})||[]},only:function(e){if(!dc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Component=ps;ve.Fragment=Dx;ve.Profiler=zx;ve.PureComponent=ic;ve.StrictMode=Rx;ve.Suspense=Ox;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wx;ve.act=kf;ve.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=mf({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=uc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)vf.call(t,c)&&!bf.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];r.children=i}return{$$typeof:ml,type:e.type,key:s,ref:o,props:r,_owner:a}};ve.createContext=function(e){return e={$$typeof:Lx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Px,_context:e},e.Consumer=e};ve.createElement=wf;ve.createFactory=function(e){var t=wf.bind(null,e);return t.type=e,t};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:Ix,render:e}};ve.isValidElement=dc;ve.lazy=function(e){return{$$typeof:Ax,_payload:{_status:-1,_result:e},_init:Hx}};ve.memo=function(e,t){return{$$typeof:$x,type:e,compare:t===void 0?null:t}};ve.startTransition=function(e){var t=lo.transition;lo.transition={};try{e()}finally{lo.transition=t}};ve.unstable_act=kf;ve.useCallback=function(e,t){return St.current.useCallback(e,t)};ve.useContext=function(e){return St.current.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e){return St.current.useDeferredValue(e)};ve.useEffect=function(e,t){return St.current.useEffect(e,t)};ve.useId=function(){return St.current.useId()};ve.useImperativeHandle=function(e,t,n){return St.current.useImperativeHandle(e,t,n)};ve.useInsertionEffect=function(e,t){return St.current.useInsertionEffect(e,t)};ve.useLayoutEffect=function(e,t){return St.current.useLayoutEffect(e,t)};ve.useMemo=function(e,t){return St.current.useMemo(e,t)};ve.useReducer=function(e,t,n){return St.current.useReducer(e,t,n)};ve.useRef=function(e){return St.current.useRef(e)};ve.useState=function(e){return St.current.useState(e)};ve.useSyncExternalStore=function(e,t,n){return St.current.useSyncExternalStore(e,t,n)};ve.useTransition=function(){return St.current.useTransition()};ve.version="18.3.1";hf.exports=ve;var u=hf.exports;const Pe=Mx(u),Vx=_x({__proto__:null,default:Pe},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xx=u,Kx=Symbol.for("react.element"),Yx=Symbol.for("react.fragment"),Qx=Object.prototype.hasOwnProperty,Gx=Xx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qx={key:!0,ref:!0,__self:!0,__source:!0};function jf(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Qx.call(t,r)&&!qx.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Kx,type:e,key:o,ref:a,props:s,_owner:Gx.current}}Qo.Fragment=Yx;Qo.jsx=jf;Qo.jsxs=jf;pf.exports=Qo;var l=pf.exports,ci={},Sf={exports:{}},Ut={},Nf={exports:{}},Cf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,Q){var ee=A.length;A.push(Q);e:for(;0<ee;){var ge=ee-1>>>1,R=A[ge];if(0<s(R,Q))A[ge]=Q,A[ee]=R,ee=ge;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var Q=A[0],ee=A.pop();if(ee!==Q){A[0]=ee;e:for(var ge=0,R=A.length,de=R>>>1;ge<de;){var ie=2*(ge+1)-1,Oe=A[ie],xe=ie+1,_e=A[xe];if(0>s(Oe,ee))xe<R&&0>s(_e,Oe)?(A[ge]=_e,A[xe]=ee,ge=xe):(A[ge]=Oe,A[ie]=ee,ge=ie);else if(xe<R&&0>s(_e,ee))A[ge]=_e,A[xe]=ee,ge=xe;else break e}}return Q}function s(A,Q){var ee=A.sortIndex-Q.sortIndex;return ee!==0?ee:A.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],d=[],p=1,f=null,h=3,x=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(A){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=A)r(d),Q.sortIndex=Q.expirationTime,t(c,Q);else break;Q=n(d)}}function S(A){if(y=!1,b(A),!v)if(n(c)!==null)v=!0,be(j);else{var Q=n(d);Q!==null&&he(S,Q.startTime-A)}}function j(A,Q){v=!1,y&&(y=!1,g(E),E=-1),x=!0;var ee=h;try{for(b(Q),f=n(c);f!==null&&(!(f.expirationTime>Q)||A&&!$());){var ge=f.callback;if(typeof ge=="function"){f.callback=null,h=f.priorityLevel;var R=ge(f.expirationTime<=Q);Q=e.unstable_now(),typeof R=="function"?f.callback=R:f===n(c)&&r(c),b(Q)}else r(c);f=n(c)}if(f!==null)var de=!0;else{var ie=n(d);ie!==null&&he(S,ie.startTime-Q),de=!1}return de}finally{f=null,h=ee,x=!1}}var C=!1,k=null,E=-1,M=5,L=-1;function $(){return!(e.unstable_now()-L<M)}function ae(){if(k!==null){var A=e.unstable_now();L=A;var Q=!0;try{Q=k(!0,A)}finally{Q?K():(C=!1,k=null)}}else C=!1}var K;if(typeof m=="function")K=function(){m(ae)};else if(typeof MessageChannel!="undefined"){var P=new MessageChannel,J=P.port2;P.port1.onmessage=ae,K=function(){J.postMessage(null)}}else K=function(){w(ae,0)};function be(A){k=A,C||(C=!0,K())}function he(A,Q){E=w(function(){A(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,be(j))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(A){switch(h){case 1:case 2:case 3:var Q=3;break;default:Q=h}var ee=h;h=Q;try{return A()}finally{h=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,Q){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var ee=h;h=A;try{return Q()}finally{h=ee}},e.unstable_scheduleCallback=function(A,Q,ee){var ge=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ge+ee:ge):ee=ge,A){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=ee+R,A={id:p++,callback:Q,priorityLevel:A,startTime:ee,expirationTime:R,sortIndex:-1},ee>ge?(A.sortIndex=ee,t(d,A),n(c)===null&&A===n(d)&&(y?(g(E),E=-1):y=!0,he(S,ee-ge))):(A.sortIndex=R,t(c,A),v||x||(v=!0,be(j))),A},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(A){var Q=h;return function(){var ee=h;h=Q;try{return A.apply(this,arguments)}finally{h=ee}}}})(Cf);Nf.exports=Cf;var Jx=Nf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zx=u,Bt=Jx;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ef=new Set,Qs={};function Tr(e,t){ss(e,t),ss(e+"Capture",t)}function ss(e,t){for(Qs[e]=t,e=0;e<t.length;e++)Ef.add(t[e])}var zn=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),ui=Object.prototype.hasOwnProperty,em=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bu={},wu={};function tm(e){return ui.call(wu,e)?!0:ui.call(bu,e)?!1:em.test(e)?wu[e]=!0:(bu[e]=!0,!1)}function nm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function rm(e,t,n,r){if(t===null||typeof t=="undefined"||nm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nt(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dt[e]=new Nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dt[t]=new Nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){dt[e]=new Nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dt[e]=new Nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dt[e]=new Nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){dt[e]=new Nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){dt[e]=new Nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){dt[e]=new Nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){dt[e]=new Nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var fc=/[\-:]([a-z])/g;function pc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fc,pc);dt[t]=new Nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fc,pc);dt[t]=new Nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fc,pc);dt[t]=new Nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){dt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!1,!1)});dt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){dt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function hc(e,t,n,r){var s=dt.hasOwnProperty(t)?dt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(rm(t,n,s,r)&&(n=null),r||s===null?tm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var $n=Zx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dl=Symbol.for("react.element"),$r=Symbol.for("react.portal"),Ar=Symbol.for("react.fragment"),xc=Symbol.for("react.strict_mode"),di=Symbol.for("react.profiler"),_f=Symbol.for("react.provider"),Mf=Symbol.for("react.context"),mc=Symbol.for("react.forward_ref"),fi=Symbol.for("react.suspense"),pi=Symbol.for("react.suspense_list"),gc=Symbol.for("react.memo"),Wn=Symbol.for("react.lazy"),Tf=Symbol.for("react.offscreen"),ku=Symbol.iterator;function js(e){return e===null||typeof e!="object"?null:(e=ku&&e[ku]||e["@@iterator"],typeof e=="function"?e:null)}var Be=Object.assign,Ea;function zs(e){if(Ea===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ea=t&&t[1]||""}return`
`+Ea+e}var _a=!1;function Ma(e,t){if(!e||_a)return"";_a=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,i=o.length-1;1<=a&&0<=i&&s[a]!==o[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==o[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==o[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{_a=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?zs(e):""}function sm(e){switch(e.tag){case 5:return zs(e.type);case 16:return zs("Lazy");case 13:return zs("Suspense");case 19:return zs("SuspenseList");case 0:case 2:case 15:return e=Ma(e.type,!1),e;case 11:return e=Ma(e.type.render,!1),e;case 1:return e=Ma(e.type,!0),e;default:return""}}function hi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ar:return"Fragment";case $r:return"Portal";case di:return"Profiler";case xc:return"StrictMode";case fi:return"Suspense";case pi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Mf:return(e.displayName||"Context")+".Consumer";case _f:return(e._context.displayName||"Context")+".Provider";case mc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gc:return t=e.displayName||null,t!==null?t:hi(e.type)||"Memo";case Wn:t=e._payload,e=e._init;try{return hi(e(t))}catch(n){}}return null}function lm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hi(t);case 8:return t===xc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function or(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Df(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function om(e){var t=Df(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rl(e){e._valueTracker||(e._valueTracker=om(e))}function Rf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Df(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function yo(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function xi(e,t){var n=t.checked;return Be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function ju(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=or(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function zf(e,t){t=t.checked,t!=null&&hc(e,"checked",t,!1)}function mi(e,t){zf(e,t);var n=or(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?gi(e,t.type,n):t.hasOwnProperty("defaultValue")&&gi(e,t.type,or(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Su(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function gi(e,t,n){(t!=="number"||yo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ps=Array.isArray;function qr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+or(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function yi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return Be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(z(92));if(Ps(n)){if(1<n.length)throw Error(z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:or(n)}}function Pf(e,t){var n=or(t.value),r=or(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Cu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Lf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Lf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zl,If=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zl=zl||document.createElement("div"),zl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},am=["Webkit","ms","Moz","O"];Object.keys(Os).forEach(function(e){am.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Os[t]=Os[e]})});function Of(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Os.hasOwnProperty(e)&&Os[e]?(""+t).trim():t+"px"}function $f(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Of(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var im=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bi(e,t){if(t){if(im[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function wi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ki=null;function yc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ji=null,Jr=null,Zr=null;function Eu(e){if(e=vl(e)){if(typeof ji!="function")throw Error(z(280));var t=e.stateNode;t&&(t=ea(t),ji(e.stateNode,e.type,t))}}function Af(e){Jr?Zr?Zr.push(e):Zr=[e]:Jr=e}function Ff(){if(Jr){var e=Jr,t=Zr;if(Zr=Jr=null,Eu(e),t)for(e=0;e<t.length;e++)Eu(t[e])}}function Bf(e,t){return e(t)}function Uf(){}var Ta=!1;function Hf(e,t,n){if(Ta)return e(t,n);Ta=!0;try{return Bf(e,t,n)}finally{Ta=!1,(Jr!==null||Zr!==null)&&(Uf(),Ff())}}function qs(e,t){var n=e.stateNode;if(n===null)return null;var r=ea(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(z(231,t,typeof n));return n}var Si=!1;if(zn)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){Si=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch(e){Si=!1}function cm(e,t,n,r,s,o,a,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(p){this.onError(p)}}var $s=!1,vo=null,bo=!1,Ni=null,um={onError:function(e){$s=!0,vo=e}};function dm(e,t,n,r,s,o,a,i,c){$s=!1,vo=null,cm.apply(um,arguments)}function fm(e,t,n,r,s,o,a,i,c){if(dm.apply(this,arguments),$s){if($s){var d=vo;$s=!1,vo=null}else throw Error(z(198));bo||(bo=!0,Ni=d)}}function Dr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Wf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _u(e){if(Dr(e)!==e)throw Error(z(188))}function pm(e){var t=e.alternate;if(!t){if(t=Dr(e),t===null)throw Error(z(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return _u(s),e;if(o===r)return _u(s),t;o=o.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=o;break}if(i===r){a=!0,r=s,n=o;break}i=i.sibling}if(!a){for(i=o.child;i;){if(i===n){a=!0,n=o,r=s;break}if(i===r){a=!0,r=o,n=s;break}i=i.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?e:t}function Vf(e){return e=pm(e),e!==null?Xf(e):null}function Xf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Xf(e);if(t!==null)return t;e=e.sibling}return null}var Kf=Bt.unstable_scheduleCallback,Mu=Bt.unstable_cancelCallback,hm=Bt.unstable_shouldYield,xm=Bt.unstable_requestPaint,Ke=Bt.unstable_now,mm=Bt.unstable_getCurrentPriorityLevel,vc=Bt.unstable_ImmediatePriority,Yf=Bt.unstable_UserBlockingPriority,wo=Bt.unstable_NormalPriority,gm=Bt.unstable_LowPriority,Qf=Bt.unstable_IdlePriority,Go=null,kn=null;function ym(e){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Go,e,void 0,(e.current.flags&128)===128)}catch(t){}}var cn=Math.clz32?Math.clz32:wm,vm=Math.log,bm=Math.LN2;function wm(e){return e>>>=0,e===0?32:31-(vm(e)/bm|0)|0}var Pl=64,Ll=4194304;function Ls(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ko(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=Ls(i):(o&=a,o!==0&&(r=Ls(o)))}else a=n&~s,a!==0?r=Ls(a):o!==0&&(r=Ls(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-cn(t),s=1<<n,r|=e[n],t&=~s;return r}function km(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-cn(o),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=km(i,t)):c<=t&&(e.expiredLanes|=i),o&=~i}}function Ci(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Gf(){var e=Pl;return Pl<<=1,!(Pl&4194240)&&(Pl=64),e}function Da(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-cn(t),e[t]=n}function Sm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-cn(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function bc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-cn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ee=0;function qf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Jf,wc,Zf,ep,tp,Ei=!1,Il=[],Jn=null,Zn=null,er=null,Js=new Map,Zs=new Map,Kn=[],Nm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tu(e,t){switch(e){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":Js.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zs.delete(t.pointerId)}}function Ns(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=vl(t),t!==null&&wc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Cm(e,t,n,r,s){switch(t){case"focusin":return Jn=Ns(Jn,e,t,n,r,s),!0;case"dragenter":return Zn=Ns(Zn,e,t,n,r,s),!0;case"mouseover":return er=Ns(er,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Js.set(o,Ns(Js.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Zs.set(o,Ns(Zs.get(o)||null,e,t,n,r,s)),!0}return!1}function np(e){var t=vr(e.target);if(t!==null){var n=Dr(t);if(n!==null){if(t=n.tag,t===13){if(t=Wf(n),t!==null){e.blockedOn=t,tp(e.priority,function(){Zf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_i(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ki=r,n.target.dispatchEvent(r),ki=null}else return t=vl(n),t!==null&&wc(t),e.blockedOn=n,!1;t.shift()}return!0}function Du(e,t,n){oo(e)&&n.delete(t)}function Em(){Ei=!1,Jn!==null&&oo(Jn)&&(Jn=null),Zn!==null&&oo(Zn)&&(Zn=null),er!==null&&oo(er)&&(er=null),Js.forEach(Du),Zs.forEach(Du)}function Cs(e,t){e.blockedOn===t&&(e.blockedOn=null,Ei||(Ei=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,Em)))}function el(e){function t(s){return Cs(s,e)}if(0<Il.length){Cs(Il[0],e);for(var n=1;n<Il.length;n++){var r=Il[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Jn!==null&&Cs(Jn,e),Zn!==null&&Cs(Zn,e),er!==null&&Cs(er,e),Js.forEach(t),Zs.forEach(t),n=0;n<Kn.length;n++)r=Kn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Kn.length&&(n=Kn[0],n.blockedOn===null);)np(n),n.blockedOn===null&&Kn.shift()}var es=$n.ReactCurrentBatchConfig,jo=!0;function _m(e,t,n,r){var s=Ee,o=es.transition;es.transition=null;try{Ee=1,kc(e,t,n,r)}finally{Ee=s,es.transition=o}}function Mm(e,t,n,r){var s=Ee,o=es.transition;es.transition=null;try{Ee=4,kc(e,t,n,r)}finally{Ee=s,es.transition=o}}function kc(e,t,n,r){if(jo){var s=_i(e,t,n,r);if(s===null)Ba(e,t,r,So,n),Tu(e,r);else if(Cm(s,e,t,n,r))r.stopPropagation();else if(Tu(e,r),t&4&&-1<Nm.indexOf(e)){for(;s!==null;){var o=vl(s);if(o!==null&&Jf(o),o=_i(e,t,n,r),o===null&&Ba(e,t,r,So,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Ba(e,t,r,null,n)}}var So=null;function _i(e,t,n,r){if(So=null,e=yc(r),e=vr(e),e!==null)if(t=Dr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Wf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return So=e,null}function rp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mm()){case vc:return 1;case Yf:return 4;case wo:case gm:return 16;case Qf:return 536870912;default:return 16}default:return 16}}var Qn=null,jc=null,ao=null;function sp(){if(ao)return ao;var e,t=jc,n=t.length,r,s="value"in Qn?Qn.value:Qn.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return ao=s.slice(e,1<r?1-r:void 0)}function io(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ol(){return!0}function Ru(){return!1}function Ht(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(o):o[i]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ol:Ru,this.isPropagationStopped=Ru,this}return Be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ol)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ol)},persist:function(){},isPersistent:Ol}),t}var hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sc=Ht(hs),yl=Be({},hs,{view:0,detail:0}),Tm=Ht(yl),Ra,za,Es,qo=Be({},yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Es&&(Es&&e.type==="mousemove"?(Ra=e.screenX-Es.screenX,za=e.screenY-Es.screenY):za=Ra=0,Es=e),Ra)},movementY:function(e){return"movementY"in e?e.movementY:za}}),zu=Ht(qo),Dm=Be({},qo,{dataTransfer:0}),Rm=Ht(Dm),zm=Be({},yl,{relatedTarget:0}),Pa=Ht(zm),Pm=Be({},hs,{animationName:0,elapsedTime:0,pseudoElement:0}),Lm=Ht(Pm),Im=Be({},hs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Om=Ht(Im),$m=Be({},hs,{data:0}),Pu=Ht($m),Am={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Um(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Bm[e])?!!t[e]:!1}function Nc(){return Um}var Hm=Be({},yl,{key:function(e){if(e.key){var t=Am[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=io(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nc,charCode:function(e){return e.type==="keypress"?io(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?io(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wm=Ht(Hm),Vm=Be({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lu=Ht(Vm),Xm=Be({},yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nc}),Km=Ht(Xm),Ym=Be({},hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qm=Ht(Ym),Gm=Be({},qo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qm=Ht(Gm),Jm=[9,13,27,32],Cc=zn&&"CompositionEvent"in window,As=null;zn&&"documentMode"in document&&(As=document.documentMode);var Zm=zn&&"TextEvent"in window&&!As,lp=zn&&(!Cc||As&&8<As&&11>=As),Iu=" ",Ou=!1;function op(e,t){switch(e){case"keyup":return Jm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ap(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fr=!1;function eg(e,t){switch(e){case"compositionend":return ap(t);case"keypress":return t.which!==32?null:(Ou=!0,Iu);case"textInput":return e=t.data,e===Iu&&Ou?null:e;default:return null}}function tg(e,t){if(Fr)return e==="compositionend"||!Cc&&op(e,t)?(e=sp(),ao=jc=Qn=null,Fr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lp&&t.locale!=="ko"?null:t.data;default:return null}}var ng={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $u(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ng[e.type]:t==="textarea"}function ip(e,t,n,r){Af(r),t=No(t,"onChange"),0<t.length&&(n=new Sc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fs=null,tl=null;function rg(e){vp(e,0)}function Jo(e){var t=Hr(e);if(Rf(t))return e}function sg(e,t){if(e==="change")return t}var cp=!1;if(zn){var La;if(zn){var Ia="oninput"in document;if(!Ia){var Au=document.createElement("div");Au.setAttribute("oninput","return;"),Ia=typeof Au.oninput=="function"}La=Ia}else La=!1;cp=La&&(!document.documentMode||9<document.documentMode)}function Fu(){Fs&&(Fs.detachEvent("onpropertychange",up),tl=Fs=null)}function up(e){if(e.propertyName==="value"&&Jo(tl)){var t=[];ip(t,tl,e,yc(e)),Hf(rg,t)}}function lg(e,t,n){e==="focusin"?(Fu(),Fs=t,tl=n,Fs.attachEvent("onpropertychange",up)):e==="focusout"&&Fu()}function og(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jo(tl)}function ag(e,t){if(e==="click")return Jo(t)}function ig(e,t){if(e==="input"||e==="change")return Jo(t)}function cg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dn=typeof Object.is=="function"?Object.is:cg;function nl(e,t){if(dn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ui.call(t,s)||!dn(e[s],t[s]))return!1}return!0}function Bu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Uu(e,t){var n=Bu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bu(n)}}function dp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?dp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fp(){for(var e=window,t=yo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=yo(e.document)}return t}function Ec(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ug(e){var t=fp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dp(n.ownerDocument.documentElement,n)){if(r!==null&&Ec(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=Uu(n,o);var a=Uu(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dg=zn&&"documentMode"in document&&11>=document.documentMode,Br=null,Mi=null,Bs=null,Ti=!1;function Hu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ti||Br==null||Br!==yo(r)||(r=Br,"selectionStart"in r&&Ec(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bs&&nl(Bs,r)||(Bs=r,r=No(Mi,"onSelect"),0<r.length&&(t=new Sc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Br)))}function $l(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ur={animationend:$l("Animation","AnimationEnd"),animationiteration:$l("Animation","AnimationIteration"),animationstart:$l("Animation","AnimationStart"),transitionend:$l("Transition","TransitionEnd")},Oa={},pp={};zn&&(pp=document.createElement("div").style,"AnimationEvent"in window||(delete Ur.animationend.animation,delete Ur.animationiteration.animation,delete Ur.animationstart.animation),"TransitionEvent"in window||delete Ur.transitionend.transition);function Zo(e){if(Oa[e])return Oa[e];if(!Ur[e])return e;var t=Ur[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in pp)return Oa[e]=t[n];return e}var hp=Zo("animationend"),xp=Zo("animationiteration"),mp=Zo("animationstart"),gp=Zo("transitionend"),yp=new Map,Wu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cr(e,t){yp.set(e,t),Tr(t,[e])}for(var $a=0;$a<Wu.length;$a++){var Aa=Wu[$a],fg=Aa.toLowerCase(),pg=Aa[0].toUpperCase()+Aa.slice(1);cr(fg,"on"+pg)}cr(hp,"onAnimationEnd");cr(xp,"onAnimationIteration");cr(mp,"onAnimationStart");cr("dblclick","onDoubleClick");cr("focusin","onFocus");cr("focusout","onBlur");cr(gp,"onTransitionEnd");ss("onMouseEnter",["mouseout","mouseover"]);ss("onMouseLeave",["mouseout","mouseover"]);ss("onPointerEnter",["pointerout","pointerover"]);ss("onPointerLeave",["pointerout","pointerover"]);Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Is));function Vu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,fm(r,t,void 0,e),e.currentTarget=null}function vp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==o&&s.isPropagationStopped())break e;Vu(s,i,d),o=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,d=i.currentTarget,i=i.listener,c!==o&&s.isPropagationStopped())break e;Vu(s,i,d),o=c}}}if(bo)throw e=Ni,bo=!1,Ni=null,e}function ze(e,t){var n=t[Li];n===void 0&&(n=t[Li]=new Set);var r=e+"__bubble";n.has(r)||(bp(t,e,2,!1),n.add(r))}function Fa(e,t,n){var r=0;t&&(r|=4),bp(n,e,r,t)}var Al="_reactListening"+Math.random().toString(36).slice(2);function rl(e){if(!e[Al]){e[Al]=!0,Ef.forEach(function(n){n!=="selectionchange"&&(hg.has(n)||Fa(n,!1,e),Fa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Al]||(t[Al]=!0,Fa("selectionchange",!1,t))}}function bp(e,t,n,r){switch(rp(t)){case 1:var s=_m;break;case 4:s=Mm;break;default:s=kc}n=s.bind(null,t,n,e),s=void 0,!Si||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Ba(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=vr(i),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}i=i.parentNode}}r=r.return}Hf(function(){var d=o,p=yc(n),f=[];e:{var h=yp.get(e);if(h!==void 0){var x=Sc,v=e;switch(e){case"keypress":if(io(n)===0)break e;case"keydown":case"keyup":x=Wm;break;case"focusin":v="focus",x=Pa;break;case"focusout":v="blur",x=Pa;break;case"beforeblur":case"afterblur":x=Pa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=zu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Rm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Km;break;case hp:case xp:case mp:x=Lm;break;case gp:x=Qm;break;case"scroll":x=Tm;break;case"wheel":x=qm;break;case"copy":case"cut":case"paste":x=Om;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Lu}var y=(t&4)!==0,w=!y&&e==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var m=d,b;m!==null;){b=m;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,g!==null&&(S=qs(m,g),S!=null&&y.push(sl(m,S,b)))),w)break;m=m.return}0<y.length&&(h=new x(h,v,null,n,p),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==ki&&(v=n.relatedTarget||n.fromElement)&&(vr(v)||v[Pn]))break e;if((x||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,x?(v=n.relatedTarget||n.toElement,x=d,v=v?vr(v):null,v!==null&&(w=Dr(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=d),x!==v)){if(y=zu,S="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(y=Lu,S="onPointerLeave",g="onPointerEnter",m="pointer"),w=x==null?h:Hr(x),b=v==null?h:Hr(v),h=new y(S,m+"leave",x,n,p),h.target=w,h.relatedTarget=b,S=null,vr(p)===d&&(y=new y(g,m+"enter",v,n,p),y.target=b,y.relatedTarget=w,S=y),w=S,x&&v)t:{for(y=x,g=v,m=0,b=y;b;b=Lr(b))m++;for(b=0,S=g;S;S=Lr(S))b++;for(;0<m-b;)y=Lr(y),m--;for(;0<b-m;)g=Lr(g),b--;for(;m--;){if(y===g||g!==null&&y===g.alternate)break t;y=Lr(y),g=Lr(g)}y=null}else y=null;x!==null&&Xu(f,h,x,y,!1),v!==null&&w!==null&&Xu(f,w,v,y,!0)}}e:{if(h=d?Hr(d):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var j=sg;else if($u(h))if(cp)j=ig;else{j=og;var C=lg}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=ag);if(j&&(j=j(e,d))){ip(f,j,n,p);break e}C&&C(e,h,d),e==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&gi(h,"number",h.value)}switch(C=d?Hr(d):window,e){case"focusin":($u(C)||C.contentEditable==="true")&&(Br=C,Mi=d,Bs=null);break;case"focusout":Bs=Mi=Br=null;break;case"mousedown":Ti=!0;break;case"contextmenu":case"mouseup":case"dragend":Ti=!1,Hu(f,n,p);break;case"selectionchange":if(dg)break;case"keydown":case"keyup":Hu(f,n,p)}var k;if(Cc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Fr?op(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(lp&&n.locale!=="ko"&&(Fr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Fr&&(k=sp()):(Qn=p,jc="value"in Qn?Qn.value:Qn.textContent,Fr=!0)),C=No(d,E),0<C.length&&(E=new Pu(E,e,null,n,p),f.push({event:E,listeners:C}),k?E.data=k:(k=ap(n),k!==null&&(E.data=k)))),(k=Zm?eg(e,n):tg(e,n))&&(d=No(d,"onBeforeInput"),0<d.length&&(p=new Pu("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:d}),p.data=k))}vp(f,t)})}function sl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function No(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=qs(e,n),o!=null&&r.unshift(sl(e,o,s)),o=qs(e,t),o!=null&&r.push(sl(e,o,s))),e=e.return}return r}function Lr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xu(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,d=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&d!==null&&(i=d,s?(c=qs(n,o),c!=null&&a.unshift(sl(n,c,i))):s||(c=qs(n,o),c!=null&&a.push(sl(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var xg=/\r\n?/g,mg=/\u0000|\uFFFD/g;function Ku(e){return(typeof e=="string"?e:""+e).replace(xg,`
`).replace(mg,"")}function Fl(e,t,n){if(t=Ku(t),Ku(e)!==t&&n)throw Error(z(425))}function Co(){}var Di=null,Ri=null;function zi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pi=typeof setTimeout=="function"?setTimeout:void 0,gg=typeof clearTimeout=="function"?clearTimeout:void 0,Yu=typeof Promise=="function"?Promise:void 0,yg=typeof queueMicrotask=="function"?queueMicrotask:typeof Yu!="undefined"?function(e){return Yu.resolve(null).then(e).catch(vg)}:Pi;function vg(e){setTimeout(function(){throw e})}function Ua(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),el(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);el(t)}function tr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Qu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var xs=Math.random().toString(36).slice(2),wn="__reactFiber$"+xs,ll="__reactProps$"+xs,Pn="__reactContainer$"+xs,Li="__reactEvents$"+xs,bg="__reactListeners$"+xs,wg="__reactHandles$"+xs;function vr(e){var t=e[wn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pn]||n[wn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Qu(e);e!==null;){if(n=e[wn])return n;e=Qu(e)}return t}e=n,n=e.parentNode}return null}function vl(e){return e=e[wn]||e[Pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function ea(e){return e[ll]||null}var Ii=[],Wr=-1;function ur(e){return{current:e}}function Le(e){0>Wr||(e.current=Ii[Wr],Ii[Wr]=null,Wr--)}function De(e,t){Wr++,Ii[Wr]=e.current,e.current=t}var ar={},mt=ur(ar),zt=ur(!1),Nr=ar;function ls(e,t){var n=e.type.contextTypes;if(!n)return ar;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pt(e){return e=e.childContextTypes,e!=null}function Eo(){Le(zt),Le(mt)}function Gu(e,t,n){if(mt.current!==ar)throw Error(z(168));De(mt,t),De(zt,n)}function wp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(z(108,lm(e)||"Unknown",s));return Be({},n,r)}function _o(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ar,Nr=mt.current,De(mt,e),De(zt,zt.current),!0}function qu(e,t,n){var r=e.stateNode;if(!r)throw Error(z(169));n?(e=wp(e,t,Nr),r.__reactInternalMemoizedMergedChildContext=e,Le(zt),Le(mt),De(mt,e)):Le(zt),De(zt,n)}var Mn=null,ta=!1,Ha=!1;function kp(e){Mn===null?Mn=[e]:Mn.push(e)}function kg(e){ta=!0,kp(e)}function dr(){if(!Ha&&Mn!==null){Ha=!0;var e=0,t=Ee;try{var n=Mn;for(Ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Mn=null,ta=!1}catch(s){throw Mn!==null&&(Mn=Mn.slice(e+1)),Kf(vc,dr),s}finally{Ee=t,Ha=!1}}return null}var Vr=[],Xr=0,Mo=null,To=0,Kt=[],Yt=0,Cr=null,Tn=1,Dn="";function mr(e,t){Vr[Xr++]=To,Vr[Xr++]=Mo,Mo=e,To=t}function jp(e,t,n){Kt[Yt++]=Tn,Kt[Yt++]=Dn,Kt[Yt++]=Cr,Cr=e;var r=Tn;e=Dn;var s=32-cn(r)-1;r&=~(1<<s),n+=1;var o=32-cn(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Tn=1<<32-cn(t)+s|n<<s|r,Dn=o+e}else Tn=1<<o|n<<s|r,Dn=e}function _c(e){e.return!==null&&(mr(e,1),jp(e,1,0))}function Mc(e){for(;e===Mo;)Mo=Vr[--Xr],Vr[Xr]=null,To=Vr[--Xr],Vr[Xr]=null;for(;e===Cr;)Cr=Kt[--Yt],Kt[Yt]=null,Dn=Kt[--Yt],Kt[Yt]=null,Tn=Kt[--Yt],Kt[Yt]=null}var Ft=null,At=null,Ie=!1,an=null;function Sp(e,t){var n=Qt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ju(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ft=e,At=tr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ft=e,At=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Cr!==null?{id:Tn,overflow:Dn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Qt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ft=e,At=null,!0):!1;default:return!1}}function Oi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $i(e){if(Ie){var t=At;if(t){var n=t;if(!Ju(e,t)){if(Oi(e))throw Error(z(418));t=tr(n.nextSibling);var r=Ft;t&&Ju(e,t)?Sp(r,n):(e.flags=e.flags&-4097|2,Ie=!1,Ft=e)}}else{if(Oi(e))throw Error(z(418));e.flags=e.flags&-4097|2,Ie=!1,Ft=e}}}function Zu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ft=e}function Bl(e){if(e!==Ft)return!1;if(!Ie)return Zu(e),Ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!zi(e.type,e.memoizedProps)),t&&(t=At)){if(Oi(e))throw Np(),Error(z(418));for(;t;)Sp(e,t),t=tr(t.nextSibling)}if(Zu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){At=tr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}At=null}}else At=Ft?tr(e.stateNode.nextSibling):null;return!0}function Np(){for(var e=At;e;)e=tr(e.nextSibling)}function os(){At=Ft=null,Ie=!1}function Tc(e){an===null?an=[e]:an.push(e)}var jg=$n.ReactCurrentBatchConfig;function _s(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var i=s.refs;a===null?delete i[o]:i[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,e))}return e}function Ul(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ed(e){var t=e._init;return t(e._payload)}function Cp(e){function t(g,m){if(e){var b=g.deletions;b===null?(g.deletions=[m],g.flags|=16):b.push(m)}}function n(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=lr(g,m),g.index=0,g.sibling=null,g}function o(g,m,b){return g.index=b,e?(b=g.alternate,b!==null?(b=b.index,b<m?(g.flags|=2,m):b):(g.flags|=2,m)):(g.flags|=1048576,m)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,m,b,S){return m===null||m.tag!==6?(m=Ga(b,g.mode,S),m.return=g,m):(m=s(m,b),m.return=g,m)}function c(g,m,b,S){var j=b.type;return j===Ar?p(g,m,b.props.children,S,b.key):m!==null&&(m.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Wn&&ed(j)===m.type)?(S=s(m,b.props),S.ref=_s(g,m,b),S.return=g,S):(S=mo(b.type,b.key,b.props,null,g.mode,S),S.ref=_s(g,m,b),S.return=g,S)}function d(g,m,b,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==b.containerInfo||m.stateNode.implementation!==b.implementation?(m=qa(b,g.mode,S),m.return=g,m):(m=s(m,b.children||[]),m.return=g,m)}function p(g,m,b,S,j){return m===null||m.tag!==7?(m=jr(b,g.mode,S,j),m.return=g,m):(m=s(m,b),m.return=g,m)}function f(g,m,b){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ga(""+m,g.mode,b),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Dl:return b=mo(m.type,m.key,m.props,null,g.mode,b),b.ref=_s(g,null,m),b.return=g,b;case $r:return m=qa(m,g.mode,b),m.return=g,m;case Wn:var S=m._init;return f(g,S(m._payload),b)}if(Ps(m)||js(m))return m=jr(m,g.mode,b,null),m.return=g,m;Ul(g,m)}return null}function h(g,m,b,S){var j=m!==null?m.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:i(g,m,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Dl:return b.key===j?c(g,m,b,S):null;case $r:return b.key===j?d(g,m,b,S):null;case Wn:return j=b._init,h(g,m,j(b._payload),S)}if(Ps(b)||js(b))return j!==null?null:p(g,m,b,S,null);Ul(g,b)}return null}function x(g,m,b,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(b)||null,i(m,g,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Dl:return g=g.get(S.key===null?b:S.key)||null,c(m,g,S,j);case $r:return g=g.get(S.key===null?b:S.key)||null,d(m,g,S,j);case Wn:var C=S._init;return x(g,m,b,C(S._payload),j)}if(Ps(S)||js(S))return g=g.get(b)||null,p(m,g,S,j,null);Ul(m,S)}return null}function v(g,m,b,S){for(var j=null,C=null,k=m,E=m=0,M=null;k!==null&&E<b.length;E++){k.index>E?(M=k,k=null):M=k.sibling;var L=h(g,k,b[E],S);if(L===null){k===null&&(k=M);break}e&&k&&L.alternate===null&&t(g,k),m=o(L,m,E),C===null?j=L:C.sibling=L,C=L,k=M}if(E===b.length)return n(g,k),Ie&&mr(g,E),j;if(k===null){for(;E<b.length;E++)k=f(g,b[E],S),k!==null&&(m=o(k,m,E),C===null?j=k:C.sibling=k,C=k);return Ie&&mr(g,E),j}for(k=r(g,k);E<b.length;E++)M=x(k,g,E,b[E],S),M!==null&&(e&&M.alternate!==null&&k.delete(M.key===null?E:M.key),m=o(M,m,E),C===null?j=M:C.sibling=M,C=M);return e&&k.forEach(function($){return t(g,$)}),Ie&&mr(g,E),j}function y(g,m,b,S){var j=js(b);if(typeof j!="function")throw Error(z(150));if(b=j.call(b),b==null)throw Error(z(151));for(var C=j=null,k=m,E=m=0,M=null,L=b.next();k!==null&&!L.done;E++,L=b.next()){k.index>E?(M=k,k=null):M=k.sibling;var $=h(g,k,L.value,S);if($===null){k===null&&(k=M);break}e&&k&&$.alternate===null&&t(g,k),m=o($,m,E),C===null?j=$:C.sibling=$,C=$,k=M}if(L.done)return n(g,k),Ie&&mr(g,E),j;if(k===null){for(;!L.done;E++,L=b.next())L=f(g,L.value,S),L!==null&&(m=o(L,m,E),C===null?j=L:C.sibling=L,C=L);return Ie&&mr(g,E),j}for(k=r(g,k);!L.done;E++,L=b.next())L=x(k,g,E,L.value,S),L!==null&&(e&&L.alternate!==null&&k.delete(L.key===null?E:L.key),m=o(L,m,E),C===null?j=L:C.sibling=L,C=L);return e&&k.forEach(function(ae){return t(g,ae)}),Ie&&mr(g,E),j}function w(g,m,b,S){if(typeof b=="object"&&b!==null&&b.type===Ar&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Dl:e:{for(var j=b.key,C=m;C!==null;){if(C.key===j){if(j=b.type,j===Ar){if(C.tag===7){n(g,C.sibling),m=s(C,b.props.children),m.return=g,g=m;break e}}else if(C.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Wn&&ed(j)===C.type){n(g,C.sibling),m=s(C,b.props),m.ref=_s(g,C,b),m.return=g,g=m;break e}n(g,C);break}else t(g,C);C=C.sibling}b.type===Ar?(m=jr(b.props.children,g.mode,S,b.key),m.return=g,g=m):(S=mo(b.type,b.key,b.props,null,g.mode,S),S.ref=_s(g,m,b),S.return=g,g=S)}return a(g);case $r:e:{for(C=b.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===b.containerInfo&&m.stateNode.implementation===b.implementation){n(g,m.sibling),m=s(m,b.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else t(g,m);m=m.sibling}m=qa(b,g.mode,S),m.return=g,g=m}return a(g);case Wn:return C=b._init,w(g,m,C(b._payload),S)}if(Ps(b))return v(g,m,b,S);if(js(b))return y(g,m,b,S);Ul(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,b),m.return=g,g=m):(n(g,m),m=Ga(b,g.mode,S),m.return=g,g=m),a(g)):n(g,m)}return w}var as=Cp(!0),Ep=Cp(!1),Do=ur(null),Ro=null,Kr=null,Dc=null;function Rc(){Dc=Kr=Ro=null}function zc(e){var t=Do.current;Le(Do),e._currentValue=t}function Ai(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ts(e,t){Ro=e,Dc=Kr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Rt=!0),e.firstContext=null)}function qt(e){var t=e._currentValue;if(Dc!==e)if(e={context:e,memoizedValue:t,next:null},Kr===null){if(Ro===null)throw Error(z(308));Kr=e,Ro.dependencies={lanes:0,firstContext:e}}else Kr=Kr.next=e;return t}var br=null;function Pc(e){br===null?br=[e]:br.push(e)}function _p(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Pc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ln(e,r)}function Ln(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Vn=!1;function Lc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function nr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ln(e,n)}return s=r.interleaved,s===null?(t.next=t,Pc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ln(e,n)}function co(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,bc(e,n)}}function td(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zo(e,t,n,r){var s=e.updateQueue;Vn=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,d=c.next;c.next=null,a===null?o=d:a.next=d,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,i=p.lastBaseUpdate,i!==a&&(i===null?p.firstBaseUpdate=d:i.next=d,p.lastBaseUpdate=c))}if(o!==null){var f=s.baseState;a=0,p=d=c=null,i=o;do{var h=i.lane,x=i.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var v=e,y=i;switch(h=t,x=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){f=v.call(x,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,h=typeof v=="function"?v.call(x,f,h):v,h==null)break e;f=Be({},f,h);break e;case 2:Vn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[i]:h.push(i))}else x={eventTime:x,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},p===null?(d=p=x,c=f):p=p.next=x,a|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;h=i,i=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);_r|=a,e.lanes=a,e.memoizedState=f}}function nd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var bl={},jn=ur(bl),ol=ur(bl),al=ur(bl);function wr(e){if(e===bl)throw Error(z(174));return e}function Ic(e,t){switch(De(al,t),De(ol,e),De(jn,bl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:vi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=vi(t,e)}Le(jn),De(jn,t)}function is(){Le(jn),Le(ol),Le(al)}function Tp(e){wr(al.current);var t=wr(jn.current),n=vi(t,e.type);t!==n&&(De(ol,e),De(jn,n))}function Oc(e){ol.current===e&&(Le(jn),Le(ol))}var Ae=ur(0);function Po(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wa=[];function $c(){for(var e=0;e<Wa.length;e++)Wa[e]._workInProgressVersionPrimary=null;Wa.length=0}var uo=$n.ReactCurrentDispatcher,Va=$n.ReactCurrentBatchConfig,Er=0,Fe=null,Ze=null,st=null,Lo=!1,Us=!1,il=0,Sg=0;function pt(){throw Error(z(321))}function Ac(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!dn(e[n],t[n]))return!1;return!0}function Fc(e,t,n,r,s,o){if(Er=o,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uo.current=e===null||e.memoizedState===null?_g:Mg,e=n(r,s),Us){o=0;do{if(Us=!1,il=0,25<=o)throw Error(z(301));o+=1,st=Ze=null,t.updateQueue=null,uo.current=Tg,e=n(r,s)}while(Us)}if(uo.current=Io,t=Ze!==null&&Ze.next!==null,Er=0,st=Ze=Fe=null,Lo=!1,t)throw Error(z(300));return e}function Bc(){var e=il!==0;return il=0,e}function bn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Fe.memoizedState=st=e:st=st.next=e,st}function Jt(){if(Ze===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=st===null?Fe.memoizedState:st.next;if(t!==null)st=t,Ze=e;else{if(e===null)throw Error(z(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},st===null?Fe.memoizedState=st=e:st=st.next=e}return st}function cl(e,t){return typeof t=="function"?t(e):t}function Xa(e){var t=Jt(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=Ze,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var i=a=null,c=null,d=o;do{var p=d.lane;if((Er&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var f={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=f,a=r):c=c.next=f,Fe.lanes|=p,_r|=p}d=d.next}while(d!==null&&d!==o);c===null?a=r:c.next=i,dn(r,t.memoizedState)||(Rt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Fe.lanes|=o,_r|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ka(e){var t=Jt(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);dn(o,t.memoizedState)||(Rt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Dp(){}function Rp(e,t){var n=Fe,r=Jt(),s=t(),o=!dn(r.memoizedState,s);if(o&&(r.memoizedState=s,Rt=!0),r=r.queue,Uc(Lp.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,ul(9,Pp.bind(null,n,r,s,t),void 0,null),ot===null)throw Error(z(349));Er&30||zp(n,t,s)}return s}function zp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Pp(e,t,n,r){t.value=n,t.getSnapshot=r,Ip(t)&&Op(e)}function Lp(e,t,n){return n(function(){Ip(t)&&Op(e)})}function Ip(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!dn(e,n)}catch(r){return!0}}function Op(e){var t=Ln(e,1);t!==null&&un(t,e,1,-1)}function rd(e){var t=bn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:e},t.queue=e,e=e.dispatch=Eg.bind(null,Fe,e),[t.memoizedState,e]}function ul(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function $p(){return Jt().memoizedState}function fo(e,t,n,r){var s=bn();Fe.flags|=e,s.memoizedState=ul(1|t,n,void 0,r===void 0?null:r)}function na(e,t,n,r){var s=Jt();r=r===void 0?null:r;var o=void 0;if(Ze!==null){var a=Ze.memoizedState;if(o=a.destroy,r!==null&&Ac(r,a.deps)){s.memoizedState=ul(t,n,o,r);return}}Fe.flags|=e,s.memoizedState=ul(1|t,n,o,r)}function sd(e,t){return fo(8390656,8,e,t)}function Uc(e,t){return na(2048,8,e,t)}function Ap(e,t){return na(4,2,e,t)}function Fp(e,t){return na(4,4,e,t)}function Bp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Up(e,t,n){return n=n!=null?n.concat([e]):null,na(4,4,Bp.bind(null,t,e),n)}function Hc(){}function Hp(e,t){var n=Jt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ac(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wp(e,t){var n=Jt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ac(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Vp(e,t,n){return Er&21?(dn(n,t)||(n=Gf(),Fe.lanes|=n,_r|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Rt=!0),e.memoizedState=n)}function Ng(e,t){var n=Ee;Ee=n!==0&&4>n?n:4,e(!0);var r=Va.transition;Va.transition={};try{e(!1),t()}finally{Ee=n,Va.transition=r}}function Xp(){return Jt().memoizedState}function Cg(e,t,n){var r=sr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Kp(e))Yp(t,n);else if(n=_p(e,t,n,r),n!==null){var s=jt();un(n,e,r,s),Qp(n,t,r)}}function Eg(e,t,n){var r=sr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Kp(e))Yp(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,i=o(a,n);if(s.hasEagerState=!0,s.eagerState=i,dn(i,a)){var c=t.interleaved;c===null?(s.next=s,Pc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch(d){}finally{}n=_p(e,t,s,r),n!==null&&(s=jt(),un(n,e,r,s),Qp(n,t,r))}}function Kp(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function Yp(e,t){Us=Lo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,bc(e,n)}}var Io={readContext:qt,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},_g={readContext:qt,useCallback:function(e,t){return bn().memoizedState=[e,t===void 0?null:t],e},useContext:qt,useEffect:sd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,fo(4194308,4,Bp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return fo(4194308,4,e,t)},useInsertionEffect:function(e,t){return fo(4,2,e,t)},useMemo:function(e,t){var n=bn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Cg.bind(null,Fe,e),[r.memoizedState,e]},useRef:function(e){var t=bn();return e={current:e},t.memoizedState=e},useState:rd,useDebugValue:Hc,useDeferredValue:function(e){return bn().memoizedState=e},useTransition:function(){var e=rd(!1),t=e[0];return e=Ng.bind(null,e[1]),bn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Fe,s=bn();if(Ie){if(n===void 0)throw Error(z(407));n=n()}else{if(n=t(),ot===null)throw Error(z(349));Er&30||zp(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,sd(Lp.bind(null,r,o,e),[e]),r.flags|=2048,ul(9,Pp.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=bn(),t=ot.identifierPrefix;if(Ie){var n=Dn,r=Tn;n=(r&~(1<<32-cn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=il++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Sg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Mg={readContext:qt,useCallback:Hp,useContext:qt,useEffect:Uc,useImperativeHandle:Up,useInsertionEffect:Ap,useLayoutEffect:Fp,useMemo:Wp,useReducer:Xa,useRef:$p,useState:function(){return Xa(cl)},useDebugValue:Hc,useDeferredValue:function(e){var t=Jt();return Vp(t,Ze.memoizedState,e)},useTransition:function(){var e=Xa(cl)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:Dp,useSyncExternalStore:Rp,useId:Xp,unstable_isNewReconciler:!1},Tg={readContext:qt,useCallback:Hp,useContext:qt,useEffect:Uc,useImperativeHandle:Up,useInsertionEffect:Ap,useLayoutEffect:Fp,useMemo:Wp,useReducer:Ka,useRef:$p,useState:function(){return Ka(cl)},useDebugValue:Hc,useDeferredValue:function(e){var t=Jt();return Ze===null?t.memoizedState=e:Vp(t,Ze.memoizedState,e)},useTransition:function(){var e=Ka(cl)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:Dp,useSyncExternalStore:Rp,useId:Xp,unstable_isNewReconciler:!1};function ln(e,t){if(e&&e.defaultProps){t=Be({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Fi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Be({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ra={isMounted:function(e){return(e=e._reactInternals)?Dr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jt(),s=sr(e),o=Rn(r,s);o.payload=t,n!=null&&(o.callback=n),t=nr(e,o,s),t!==null&&(un(t,e,s,r),co(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jt(),s=sr(e),o=Rn(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=nr(e,o,s),t!==null&&(un(t,e,s,r),co(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jt(),r=sr(e),s=Rn(n,r);s.tag=2,t!=null&&(s.callback=t),t=nr(e,s,r),t!==null&&(un(t,e,r,n),co(t,e,r))}};function ld(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!nl(n,r)||!nl(s,o):!0}function Gp(e,t,n){var r=!1,s=ar,o=t.contextType;return typeof o=="object"&&o!==null?o=qt(o):(s=Pt(t)?Nr:mt.current,r=t.contextTypes,o=(r=r!=null)?ls(e,s):ar),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ra,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function od(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ra.enqueueReplaceState(t,t.state,null)}function Bi(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Lc(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=qt(o):(o=Pt(t)?Nr:mt.current,s.context=ls(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Fi(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ra.enqueueReplaceState(s,s.state,null),zo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do n+=sm(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Ya(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function Ui(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Dg=typeof WeakMap=="function"?WeakMap:Map;function qp(e,t,n){n=Rn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$o||($o=!0,Ji=r),Ui(e,t)},n}function Jp(e,t,n){n=Rn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ui(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ui(e,t),typeof r!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function ad(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Dg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Vg.bind(null,e,t,n),t.then(e,e))}function id(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cd(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Rn(-1,1),t.tag=2,nr(n,t,1))),n.lanes|=1),e)}var Rg=$n.ReactCurrentOwner,Rt=!1;function kt(e,t,n,r){t.child=e===null?Ep(t,null,n,r):as(t,e.child,n,r)}function ud(e,t,n,r,s){n=n.render;var o=t.ref;return ts(t,s),r=Fc(e,t,n,r,o,s),n=Bc(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,In(e,t,s)):(Ie&&n&&_c(t),t.flags|=1,kt(e,t,r,s),t.child)}function dd(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!qc(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Zp(e,t,o,r,s)):(e=mo(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:nl,n(a,r)&&e.ref===t.ref)return In(e,t,s)}return t.flags|=1,e=lr(o,r),e.ref=t.ref,e.return=t,t.child=e}function Zp(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(nl(o,r)&&e.ref===t.ref)if(Rt=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(Rt=!0);else return t.lanes=e.lanes,In(e,t,s)}return Hi(e,t,n,r,s)}function eh(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Qr,$t),$t|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,De(Qr,$t),$t|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,De(Qr,$t),$t|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,De(Qr,$t),$t|=r;return kt(e,t,s,n),t.child}function th(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Hi(e,t,n,r,s){var o=Pt(n)?Nr:mt.current;return o=ls(t,o),ts(t,s),n=Fc(e,t,n,r,o,s),r=Bc(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,In(e,t,s)):(Ie&&r&&_c(t),t.flags|=1,kt(e,t,n,s),t.child)}function fd(e,t,n,r,s){if(Pt(n)){var o=!0;_o(t)}else o=!1;if(ts(t,s),t.stateNode===null)po(e,t),Gp(t,n,r),Bi(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=qt(d):(d=Pt(n)?Nr:mt.current,d=ls(t,d));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==d)&&od(t,a,r,d),Vn=!1;var h=t.memoizedState;a.state=h,zo(t,r,a,s),c=t.memoizedState,i!==r||h!==c||zt.current||Vn?(typeof p=="function"&&(Fi(t,n,p,r),c=t.memoizedState),(i=Vn||ld(t,n,i,r,h,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Mp(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:ln(t.type,i),a.props=d,f=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=qt(c):(c=Pt(n)?Nr:mt.current,c=ls(t,c));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||h!==c)&&od(t,a,r,c),Vn=!1,h=t.memoizedState,a.state=h,zo(t,r,a,s);var v=t.memoizedState;i!==f||h!==v||zt.current||Vn?(typeof x=="function"&&(Fi(t,n,x,r),v=t.memoizedState),(d=Vn||ld(t,n,d,r,h,v,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Wi(e,t,n,r,o,s)}function Wi(e,t,n,r,s,o){th(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&qu(t,n,!1),In(e,t,o);r=t.stateNode,Rg.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=as(t,e.child,null,o),t.child=as(t,null,i,o)):kt(e,t,i,o),t.memoizedState=r.state,s&&qu(t,n,!0),t.child}function nh(e){var t=e.stateNode;t.pendingContext?Gu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gu(e,t.context,!1),Ic(e,t.containerInfo)}function pd(e,t,n,r,s){return os(),Tc(s),t.flags|=256,kt(e,t,n,r),t.child}var Vi={dehydrated:null,treeContext:null,retryLane:0};function Xi(e){return{baseLanes:e,cachePool:null,transitions:null}}function rh(e,t,n){var r=t.pendingProps,s=Ae.current,o=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),De(Ae,s&1),e===null)return $i(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=oa(a,r,0,null),e=jr(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Xi(n),t.memoizedState=Vi,e):Wc(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return zg(e,t,a,r,i,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=lr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?o=lr(i,o):(o=jr(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?Xi(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Vi,r}return o=e.child,e=o.sibling,r=lr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Wc(e,t){return t=oa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Hl(e,t,n,r){return r!==null&&Tc(r),as(t,e.child,null,n),e=Wc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zg(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=Ya(Error(z(422))),Hl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=oa({mode:"visible",children:r.children},s,0,null),o=jr(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&as(t,e.child,null,a),t.child.memoizedState=Xi(a),t.memoizedState=Vi,o);if(!(t.mode&1))return Hl(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,o=Error(z(419)),r=Ya(o,r,void 0),Hl(e,t,a,r)}if(i=(a&e.childLanes)!==0,Rt||i){if(r=ot,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ln(e,s),un(r,e,s,-1))}return Gc(),r=Ya(Error(z(421))),Hl(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Xg.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,At=tr(s.nextSibling),Ft=t,Ie=!0,an=null,e!==null&&(Kt[Yt++]=Tn,Kt[Yt++]=Dn,Kt[Yt++]=Cr,Tn=e.id,Dn=e.overflow,Cr=t),t=Wc(t,r.children),t.flags|=4096,t)}function hd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ai(e.return,t,n)}function Qa(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function sh(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(kt(e,t,r.children,n),r=Ae.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hd(e,n,t);else if(e.tag===19)hd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(De(Ae,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Po(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Qa(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Po(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Qa(t,!0,n,null,o);break;case"together":Qa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function po(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function In(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),_r|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,n=lr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=lr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Pg(e,t,n){switch(t.tag){case 3:nh(t),os();break;case 5:Tp(t);break;case 1:Pt(t.type)&&_o(t);break;case 4:Ic(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;De(Do,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(De(Ae,Ae.current&1),t.flags|=128,null):n&t.child.childLanes?rh(e,t,n):(De(Ae,Ae.current&1),e=In(e,t,n),e!==null?e.sibling:null);De(Ae,Ae.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return sh(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),De(Ae,Ae.current),r)break;return null;case 22:case 23:return t.lanes=0,eh(e,t,n)}return In(e,t,n)}var lh,Ki,oh,ah;lh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ki=function(){};oh=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,wr(jn.current);var o=null;switch(n){case"input":s=xi(e,s),r=xi(e,r),o=[];break;case"select":s=Be({},s,{value:void 0}),r=Be({},r,{value:void 0}),o=[];break;case"textarea":s=yi(e,s),r=yi(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Co)}bi(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var i=s[d];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Qs.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(i=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Qs.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ze("scroll",e),o||i===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};ah=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ms(e,t){if(!Ie)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ht(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Lg(e,t,n){var r=t.pendingProps;switch(Mc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(t),null;case 1:return Pt(t.type)&&Eo(),ht(t),null;case 3:return r=t.stateNode,is(),Le(zt),Le(mt),$c(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Bl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,an!==null&&(tc(an),an=null))),Ki(e,t),ht(t),null;case 5:Oc(t);var s=wr(al.current);if(n=t.type,e!==null&&t.stateNode!=null)oh(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(z(166));return ht(t),null}if(e=wr(jn.current),Bl(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[wn]=t,r[ll]=o,e=(t.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(s=0;s<Is.length;s++)ze(Is[s],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":ju(r,o),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ze("invalid",r);break;case"textarea":Nu(r,o),ze("invalid",r)}bi(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var i=o[a];a==="children"?typeof i=="string"?r.textContent!==i&&(o.suppressHydrationWarning!==!0&&Fl(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(o.suppressHydrationWarning!==!0&&Fl(r.textContent,i,e),s=["children",""+i]):Qs.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&ze("scroll",r)}switch(n){case"input":Rl(r),Su(r,o,!0);break;case"textarea":Rl(r),Cu(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Co)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Lf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[wn]=t,e[ll]=r,lh(e,t,!1,!1),t.stateNode=e;e:{switch(a=wi(n,r),n){case"dialog":ze("cancel",e),ze("close",e),s=r;break;case"iframe":case"object":case"embed":ze("load",e),s=r;break;case"video":case"audio":for(s=0;s<Is.length;s++)ze(Is[s],e);s=r;break;case"source":ze("error",e),s=r;break;case"img":case"image":case"link":ze("error",e),ze("load",e),s=r;break;case"details":ze("toggle",e),s=r;break;case"input":ju(e,r),s=xi(e,r),ze("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Be({},r,{value:void 0}),ze("invalid",e);break;case"textarea":Nu(e,r),s=yi(e,r),ze("invalid",e);break;default:s=r}bi(n,s),i=s;for(o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="style"?$f(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&If(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Gs(e,c):typeof c=="number"&&Gs(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Qs.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ze("scroll",e):c!=null&&hc(e,o,c,a))}switch(n){case"input":Rl(e),Su(e,r,!1);break;case"textarea":Rl(e),Cu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+or(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?qr(e,!!r.multiple,o,!1):r.defaultValue!=null&&qr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Co)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ht(t),null;case 6:if(e&&t.stateNode!=null)ah(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(z(166));if(n=wr(al.current),wr(jn.current),Bl(t)){if(r=t.stateNode,n=t.memoizedProps,r[wn]=t,(o=r.nodeValue!==n)&&(e=Ft,e!==null))switch(e.tag){case 3:Fl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fl(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wn]=t,t.stateNode=r}return ht(t),null;case 13:if(Le(Ae),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ie&&At!==null&&t.mode&1&&!(t.flags&128))Np(),os(),t.flags|=98560,o=!1;else if(o=Bl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(z(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(z(317));o[wn]=t}else os(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ht(t),o=!1}else an!==null&&(tc(an),an=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ae.current&1?tt===0&&(tt=3):Gc())),t.updateQueue!==null&&(t.flags|=4),ht(t),null);case 4:return is(),Ki(e,t),e===null&&rl(t.stateNode.containerInfo),ht(t),null;case 10:return zc(t.type._context),ht(t),null;case 17:return Pt(t.type)&&Eo(),ht(t),null;case 19:if(Le(Ae),o=t.memoizedState,o===null)return ht(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)Ms(o,!1);else{if(tt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Po(e),a!==null){for(t.flags|=128,Ms(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return De(Ae,Ae.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ke()>us&&(t.flags|=128,r=!0,Ms(o,!1),t.lanes=4194304)}else{if(!r)if(e=Po(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ms(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ie)return ht(t),null}else 2*Ke()-o.renderingStartTime>us&&n!==1073741824&&(t.flags|=128,r=!0,Ms(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ke(),t.sibling=null,n=Ae.current,De(Ae,r?n&1|2:n&1),t):(ht(t),null);case 22:case 23:return Qc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?$t&1073741824&&(ht(t),t.subtreeFlags&6&&(t.flags|=8192)):ht(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function Ig(e,t){switch(Mc(t),t.tag){case 1:return Pt(t.type)&&Eo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return is(),Le(zt),Le(mt),$c(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Oc(t),null;case 13:if(Le(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));os()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Le(Ae),null;case 4:return is(),null;case 10:return zc(t.type._context),null;case 22:case 23:return Qc(),null;case 24:return null;default:return null}}var Wl=!1,xt=!1,Og=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Yr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(e,t,r)}else n.current=null}function Yi(e,t,n){try{n()}catch(r){He(e,t,r)}}var xd=!1;function $g(e,t){if(Di=jo,e=fp(),Ec(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(S){n=null;break e}var a=0,i=-1,c=-1,d=0,p=0,f=e,h=null;t:for(;;){for(var x;f!==n||s!==0&&f.nodeType!==3||(i=a+s),f!==o||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)h=f,f=x;for(;;){if(f===e)break t;if(h===n&&++d===s&&(i=a),h===o&&++p===r&&(c=a),(x=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=x}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ri={focusedElem:e,selectionRange:n},jo=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,w=v.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ln(t.type,y),w);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(S){He(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return v=xd,xd=!1,v}function Hs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Yi(t,n,o)}s=s.next}while(s!==r)}}function sa(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Qi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ih(e){var t=e.alternate;t!==null&&(e.alternate=null,ih(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wn],delete t[ll],delete t[Li],delete t[bg],delete t[wg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ch(e){return e.tag===5||e.tag===3||e.tag===4}function md(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ch(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Co));else if(r!==4&&(e=e.child,e!==null))for(Gi(e,t,n),e=e.sibling;e!==null;)Gi(e,t,n),e=e.sibling}function qi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(qi(e,t,n),e=e.sibling;e!==null;)qi(e,t,n),e=e.sibling}var ct=null,on=!1;function Hn(e,t,n){for(n=n.child;n!==null;)uh(e,t,n),n=n.sibling}function uh(e,t,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Go,n)}catch(i){}switch(n.tag){case 5:xt||Yr(n,t);case 6:var r=ct,s=on;ct=null,Hn(e,t,n),ct=r,on=s,ct!==null&&(on?(e=ct,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(on?(e=ct,n=n.stateNode,e.nodeType===8?Ua(e.parentNode,n):e.nodeType===1&&Ua(e,n),el(e)):Ua(ct,n.stateNode));break;case 4:r=ct,s=on,ct=n.stateNode.containerInfo,on=!0,Hn(e,t,n),ct=r,on=s;break;case 0:case 11:case 14:case 15:if(!xt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Yi(n,t,a),s=s.next}while(s!==r)}Hn(e,t,n);break;case 1:if(!xt&&(Yr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){He(n,t,i)}Hn(e,t,n);break;case 21:Hn(e,t,n);break;case 22:n.mode&1?(xt=(r=xt)||n.memoizedState!==null,Hn(e,t,n),xt=r):Hn(e,t,n);break;default:Hn(e,t,n)}}function gd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Og),t.forEach(function(r){var s=Kg.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function sn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:ct=i.stateNode,on=!1;break e;case 3:ct=i.stateNode.containerInfo,on=!0;break e;case 4:ct=i.stateNode.containerInfo,on=!0;break e}i=i.return}if(ct===null)throw Error(z(160));uh(o,a,s),ct=null,on=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){He(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)dh(t,e),t=t.sibling}function dh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(sn(t,e),vn(e),r&4){try{Hs(3,e,e.return),sa(3,e)}catch(y){He(e,e.return,y)}try{Hs(5,e,e.return)}catch(y){He(e,e.return,y)}}break;case 1:sn(t,e),vn(e),r&512&&n!==null&&Yr(n,n.return);break;case 5:if(sn(t,e),vn(e),r&512&&n!==null&&Yr(n,n.return),e.flags&32){var s=e.stateNode;try{Gs(s,"")}catch(y){He(e,e.return,y)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&o.type==="radio"&&o.name!=null&&zf(s,o),wi(i,a);var d=wi(i,o);for(a=0;a<c.length;a+=2){var p=c[a],f=c[a+1];p==="style"?$f(s,f):p==="dangerouslySetInnerHTML"?If(s,f):p==="children"?Gs(s,f):hc(s,p,f,d)}switch(i){case"input":mi(s,o);break;case"textarea":Pf(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?qr(s,!!o.multiple,x,!1):h!==!!o.multiple&&(o.defaultValue!=null?qr(s,!!o.multiple,o.defaultValue,!0):qr(s,!!o.multiple,o.multiple?[]:"",!1))}s[ll]=o}catch(y){He(e,e.return,y)}}break;case 6:if(sn(t,e),vn(e),r&4){if(e.stateNode===null)throw Error(z(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(y){He(e,e.return,y)}}break;case 3:if(sn(t,e),vn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{el(t.containerInfo)}catch(y){He(e,e.return,y)}break;case 4:sn(t,e),vn(e);break;case 13:sn(t,e),vn(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Kc=Ke())),r&4&&gd(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(xt=(d=xt)||p,sn(t,e),xt=d):sn(t,e),vn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(Y=e,p=e.child;p!==null;){for(f=Y=p;Y!==null;){switch(h=Y,x=h.child,h.tag){case 0:case 11:case 14:case 15:Hs(4,h,h.return);break;case 1:Yr(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){He(r,n,y)}}break;case 5:Yr(h,h.return);break;case 22:if(h.memoizedState!==null){vd(f);continue}}x!==null?(x.return=h,Y=x):vd(f)}p=p.sibling}e:for(p=null,f=e;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(i=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=Of("display",a))}catch(y){He(e,e.return,y)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){He(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:sn(t,e),vn(e),r&4&&gd(e);break;case 21:break;default:sn(t,e),vn(e)}}function vn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ch(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Gs(s,""),r.flags&=-33);var o=md(e);qi(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=md(e);Gi(e,i,a);break;default:throw Error(z(161))}}catch(c){He(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ag(e,t,n){Y=e,fh(e)}function fh(e,t,n){for(var r=(e.mode&1)!==0;Y!==null;){var s=Y,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Wl;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||xt;i=Wl;var d=xt;if(Wl=a,(xt=c)&&!d)for(Y=s;Y!==null;)a=Y,c=a.child,a.tag===22&&a.memoizedState!==null?bd(s):c!==null?(c.return=a,Y=c):bd(s);for(;o!==null;)Y=o,fh(o),o=o.sibling;Y=s,Wl=i,xt=d}yd(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Y=o):yd(e)}}function yd(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:xt||sa(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!xt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ln(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&nd(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}nd(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&el(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}xt||t.flags&512&&Qi(t)}catch(h){He(t,t.return,h)}}if(t===e){Y=null;break}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}}function vd(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Y=n;break}Y=t.return}}function bd(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sa(4,t)}catch(c){He(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){He(t,s,c)}}var o=t.return;try{Qi(t)}catch(c){He(t,o,c)}break;case 5:var a=t.return;try{Qi(t)}catch(c){He(t,a,c)}}}catch(c){He(t,t.return,c)}if(t===e){Y=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Y=i;break}Y=t.return}}var Fg=Math.ceil,Oo=$n.ReactCurrentDispatcher,Vc=$n.ReactCurrentOwner,Gt=$n.ReactCurrentBatchConfig,je=0,ot=null,qe=null,ut=0,$t=0,Qr=ur(0),tt=0,dl=null,_r=0,la=0,Xc=0,Ws=null,Dt=null,Kc=0,us=1/0,_n=null,$o=!1,Ji=null,rr=null,Vl=!1,Gn=null,Ao=0,Vs=0,Zi=null,ho=-1,xo=0;function jt(){return je&6?Ke():ho!==-1?ho:ho=Ke()}function sr(e){return e.mode&1?je&2&&ut!==0?ut&-ut:jg.transition!==null?(xo===0&&(xo=Gf()),xo):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:rp(e.type)),e):1}function un(e,t,n,r){if(50<Vs)throw Vs=0,Zi=null,Error(z(185));gl(e,n,r),(!(je&2)||e!==ot)&&(e===ot&&(!(je&2)&&(la|=n),tt===4&&Yn(e,ut)),Lt(e,r),n===1&&je===0&&!(t.mode&1)&&(us=Ke()+500,ta&&dr()))}function Lt(e,t){var n=e.callbackNode;jm(e,t);var r=ko(e,e===ot?ut:0);if(r===0)n!==null&&Mu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Mu(n),t===1)e.tag===0?kg(wd.bind(null,e)):kp(wd.bind(null,e)),yg(function(){!(je&6)&&dr()}),n=null;else{switch(qf(r)){case 1:n=vc;break;case 4:n=Yf;break;case 16:n=wo;break;case 536870912:n=Qf;break;default:n=wo}n=bh(n,ph.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ph(e,t){if(ho=-1,xo=0,je&6)throw Error(z(327));var n=e.callbackNode;if(ns()&&e.callbackNode!==n)return null;var r=ko(e,e===ot?ut:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Fo(e,r);else{t=r;var s=je;je|=2;var o=xh();(ot!==e||ut!==t)&&(_n=null,us=Ke()+500,kr(e,t));do try{Hg();break}catch(i){hh(e,i)}while(!0);Rc(),Oo.current=o,je=s,qe!==null?t=0:(ot=null,ut=0,t=tt)}if(t!==0){if(t===2&&(s=Ci(e),s!==0&&(r=s,t=ec(e,s))),t===1)throw n=dl,kr(e,0),Yn(e,r),Lt(e,Ke()),n;if(t===6)Yn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Bg(s)&&(t=Fo(e,r),t===2&&(o=Ci(e),o!==0&&(r=o,t=ec(e,o))),t===1))throw n=dl,kr(e,0),Yn(e,r),Lt(e,Ke()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(z(345));case 2:gr(e,Dt,_n);break;case 3:if(Yn(e,r),(r&130023424)===r&&(t=Kc+500-Ke(),10<t)){if(ko(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){jt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Pi(gr.bind(null,e,Dt,_n),t);break}gr(e,Dt,_n);break;case 4:if(Yn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-cn(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Fg(r/1960))-r,10<r){e.timeoutHandle=Pi(gr.bind(null,e,Dt,_n),r);break}gr(e,Dt,_n);break;case 5:gr(e,Dt,_n);break;default:throw Error(z(329))}}}return Lt(e,Ke()),e.callbackNode===n?ph.bind(null,e):null}function ec(e,t){var n=Ws;return e.current.memoizedState.isDehydrated&&(kr(e,t).flags|=256),e=Fo(e,t),e!==2&&(t=Dt,Dt=n,t!==null&&tc(t)),e}function tc(e){Dt===null?Dt=e:Dt.push.apply(Dt,e)}function Bg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!dn(o(),s))return!1}catch(a){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yn(e,t){for(t&=~Xc,t&=~la,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-cn(t),r=1<<n;e[n]=-1,t&=~r}}function wd(e){if(je&6)throw Error(z(327));ns();var t=ko(e,0);if(!(t&1))return Lt(e,Ke()),null;var n=Fo(e,t);if(e.tag!==0&&n===2){var r=Ci(e);r!==0&&(t=r,n=ec(e,r))}if(n===1)throw n=dl,kr(e,0),Yn(e,t),Lt(e,Ke()),n;if(n===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gr(e,Dt,_n),Lt(e,Ke()),null}function Yc(e,t){var n=je;je|=1;try{return e(t)}finally{je=n,je===0&&(us=Ke()+500,ta&&dr())}}function Mr(e){Gn!==null&&Gn.tag===0&&!(je&6)&&ns();var t=je;je|=1;var n=Gt.transition,r=Ee;try{if(Gt.transition=null,Ee=1,e)return e()}finally{Ee=r,Gt.transition=n,je=t,!(je&6)&&dr()}}function Qc(){$t=Qr.current,Le(Qr)}function kr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,gg(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Mc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Eo();break;case 3:is(),Le(zt),Le(mt),$c();break;case 5:Oc(r);break;case 4:is();break;case 13:Le(Ae);break;case 19:Le(Ae);break;case 10:zc(r.type._context);break;case 22:case 23:Qc()}n=n.return}if(ot=e,qe=e=lr(e.current,null),ut=$t=t,tt=0,dl=null,Xc=la=_r=0,Dt=Ws=null,br!==null){for(t=0;t<br.length;t++)if(n=br[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}br=null}return e}function hh(e,t){do{var n=qe;try{if(Rc(),uo.current=Io,Lo){for(var r=Fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Lo=!1}if(Er=0,st=Ze=Fe=null,Us=!1,il=0,Vc.current=null,n===null||n.return===null){tt=1,dl=t,qe=null;break}e:{var o=e,a=n.return,i=n,c=t;if(t=ut,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=i,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=id(a);if(x!==null){x.flags&=-257,cd(x,a,i,o,t),x.mode&1&&ad(o,d,t),t=x,c=d;var v=t.updateQueue;if(v===null){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}else{if(!(t&1)){ad(o,d,t),Gc();break e}c=Error(z(426))}}else if(Ie&&i.mode&1){var w=id(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),cd(w,a,i,o,t),Tc(cs(c,i));break e}}o=c=cs(c,i),tt!==4&&(tt=2),Ws===null?Ws=[o]:Ws.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=qp(o,c,t);td(o,g);break e;case 1:i=c;var m=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(rr===null||!rr.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=Jp(o,i,t);td(o,S);break e}}o=o.return}while(o!==null)}gh(n)}catch(j){t=j,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function xh(){var e=Oo.current;return Oo.current=Io,e===null?Io:e}function Gc(){(tt===0||tt===3||tt===2)&&(tt=4),ot===null||!(_r&268435455)&&!(la&268435455)||Yn(ot,ut)}function Fo(e,t){var n=je;je|=2;var r=xh();(ot!==e||ut!==t)&&(_n=null,kr(e,t));do try{Ug();break}catch(s){hh(e,s)}while(!0);if(Rc(),je=n,Oo.current=r,qe!==null)throw Error(z(261));return ot=null,ut=0,tt}function Ug(){for(;qe!==null;)mh(qe)}function Hg(){for(;qe!==null&&!hm();)mh(qe)}function mh(e){var t=vh(e.alternate,e,$t);e.memoizedProps=e.pendingProps,t===null?gh(e):qe=t,Vc.current=null}function gh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ig(n,t),n!==null){n.flags&=32767,qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tt=6,qe=null;return}}else if(n=Lg(n,t,$t),n!==null){qe=n;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);tt===0&&(tt=5)}function gr(e,t,n){var r=Ee,s=Gt.transition;try{Gt.transition=null,Ee=1,Wg(e,t,n,r)}finally{Gt.transition=s,Ee=r}return null}function Wg(e,t,n,r){do ns();while(Gn!==null);if(je&6)throw Error(z(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Sm(e,o),e===ot&&(qe=ot=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vl||(Vl=!0,bh(wo,function(){return ns(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Gt.transition,Gt.transition=null;var a=Ee;Ee=1;var i=je;je|=4,Vc.current=null,$g(e,n),dh(n,e),ug(Ri),jo=!!Di,Ri=Di=null,e.current=n,Ag(n),xm(),je=i,Ee=a,Gt.transition=o}else e.current=n;if(Vl&&(Vl=!1,Gn=e,Ao=s),o=e.pendingLanes,o===0&&(rr=null),ym(n.stateNode),Lt(e,Ke()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($o)throw $o=!1,e=Ji,Ji=null,e;return Ao&1&&e.tag!==0&&ns(),o=e.pendingLanes,o&1?e===Zi?Vs++:(Vs=0,Zi=e):Vs=0,dr(),null}function ns(){if(Gn!==null){var e=qf(Ao),t=Gt.transition,n=Ee;try{if(Gt.transition=null,Ee=16>e?16:e,Gn===null)var r=!1;else{if(e=Gn,Gn=null,Ao=0,je&6)throw Error(z(331));var s=je;for(je|=4,Y=e.current;Y!==null;){var o=Y,a=o.child;if(Y.flags&16){var i=o.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(Y=d;Y!==null;){var p=Y;switch(p.tag){case 0:case 11:case 15:Hs(8,p,o)}var f=p.child;if(f!==null)f.return=p,Y=f;else for(;Y!==null;){p=Y;var h=p.sibling,x=p.return;if(ih(p),p===d){Y=null;break}if(h!==null){h.return=x,Y=h;break}Y=x}}}var v=o.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}Y=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Y=a;else e:for(;Y!==null;){if(o=Y,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Hs(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,Y=g;break e}Y=o.return}}var m=e.current;for(Y=m;Y!==null;){a=Y;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,Y=b;else e:for(a=m;Y!==null;){if(i=Y,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:sa(9,i)}}catch(j){He(i,i.return,j)}if(i===a){Y=null;break e}var S=i.sibling;if(S!==null){S.return=i.return,Y=S;break e}Y=i.return}}if(je=s,dr(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Go,e)}catch(j){}r=!0}return r}finally{Ee=n,Gt.transition=t}}return!1}function kd(e,t,n){t=cs(n,t),t=qp(e,t,1),e=nr(e,t,1),t=jt(),e!==null&&(gl(e,1,t),Lt(e,t))}function He(e,t,n){if(e.tag===3)kd(e,e,n);else for(;t!==null;){if(t.tag===3){kd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rr===null||!rr.has(r))){e=cs(n,e),e=Jp(t,e,1),t=nr(t,e,1),e=jt(),t!==null&&(gl(t,1,e),Lt(t,e));break}}t=t.return}}function Vg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=jt(),e.pingedLanes|=e.suspendedLanes&n,ot===e&&(ut&n)===n&&(tt===4||tt===3&&(ut&130023424)===ut&&500>Ke()-Kc?kr(e,0):Xc|=n),Lt(e,t)}function yh(e,t){t===0&&(e.mode&1?(t=Ll,Ll<<=1,!(Ll&130023424)&&(Ll=4194304)):t=1);var n=jt();e=Ln(e,t),e!==null&&(gl(e,t,n),Lt(e,n))}function Xg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),yh(e,n)}function Kg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(t),yh(e,n)}var vh;vh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||zt.current)Rt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Rt=!1,Pg(e,t,n);Rt=!!(e.flags&131072)}else Rt=!1,Ie&&t.flags&1048576&&jp(t,To,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;po(e,t),e=t.pendingProps;var s=ls(t,mt.current);ts(t,n),s=Fc(null,t,r,e,s,n);var o=Bc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pt(r)?(o=!0,_o(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Lc(t),s.updater=ra,t.stateNode=s,s._reactInternals=t,Bi(t,r,e,n),t=Wi(null,t,r,!0,o,n)):(t.tag=0,Ie&&o&&_c(t),kt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(po(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Qg(r),e=ln(r,e),s){case 0:t=Hi(null,t,r,e,n);break e;case 1:t=fd(null,t,r,e,n);break e;case 11:t=ud(null,t,r,e,n);break e;case 14:t=dd(null,t,r,ln(r.type,e),n);break e}throw Error(z(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ln(r,s),Hi(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ln(r,s),fd(e,t,r,s,n);case 3:e:{if(nh(t),e===null)throw Error(z(387));r=t.pendingProps,o=t.memoizedState,s=o.element,Mp(e,t),zo(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=cs(Error(z(423)),t),t=pd(e,t,r,n,s);break e}else if(r!==s){s=cs(Error(z(424)),t),t=pd(e,t,r,n,s);break e}else for(At=tr(t.stateNode.containerInfo.firstChild),Ft=t,Ie=!0,an=null,n=Ep(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(os(),r===s){t=In(e,t,n);break e}kt(e,t,r,n)}t=t.child}return t;case 5:return Tp(t),e===null&&$i(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,zi(r,s)?a=null:o!==null&&zi(r,o)&&(t.flags|=32),th(e,t),kt(e,t,a,n),t.child;case 6:return e===null&&$i(t),null;case 13:return rh(e,t,n);case 4:return Ic(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=as(t,null,r,n):kt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ln(r,s),ud(e,t,r,s,n);case 7:return kt(e,t,t.pendingProps,n),t.child;case 8:return kt(e,t,t.pendingProps.children,n),t.child;case 12:return kt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,De(Do,r._currentValue),r._currentValue=a,o!==null)if(dn(o.value,a)){if(o.children===s.children&&!zt.current){t=In(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){a=o.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Rn(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Ai(o.return,n,t),i.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(z(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),Ai(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}kt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ts(t,n),s=qt(s),r=r(s),t.flags|=1,kt(e,t,r,n),t.child;case 14:return r=t.type,s=ln(r,t.pendingProps),s=ln(r.type,s),dd(e,t,r,s,n);case 15:return Zp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ln(r,s),po(e,t),t.tag=1,Pt(r)?(e=!0,_o(t)):e=!1,ts(t,n),Gp(t,r,s),Bi(t,r,s,n),Wi(null,t,r,!0,e,n);case 19:return sh(e,t,n);case 22:return eh(e,t,n)}throw Error(z(156,t.tag))};function bh(e,t){return Kf(e,t)}function Yg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(e,t,n,r){return new Yg(e,t,n,r)}function qc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qg(e){if(typeof e=="function")return qc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mc)return 11;if(e===gc)return 14}return 2}function lr(e,t){var n=e.alternate;return n===null?(n=Qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function mo(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")qc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ar:return jr(n.children,s,o,t);case xc:a=8,s|=8;break;case di:return e=Qt(12,n,t,s|2),e.elementType=di,e.lanes=o,e;case fi:return e=Qt(13,n,t,s),e.elementType=fi,e.lanes=o,e;case pi:return e=Qt(19,n,t,s),e.elementType=pi,e.lanes=o,e;case Tf:return oa(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _f:a=10;break e;case Mf:a=9;break e;case mc:a=11;break e;case gc:a=14;break e;case Wn:a=16,r=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=Qt(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function jr(e,t,n,r){return e=Qt(7,e,r,t),e.lanes=n,e}function oa(e,t,n,r){return e=Qt(22,e,r,t),e.elementType=Tf,e.lanes=n,e.stateNode={isHidden:!1},e}function Ga(e,t,n){return e=Qt(6,e,null,t),e.lanes=n,e}function qa(e,t,n){return t=Qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gg(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Da(0),this.expirationTimes=Da(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Da(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Jc(e,t,n,r,s,o,a,i,c){return e=new Gg(e,t,n,i,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Qt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lc(o),e}function qg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$r,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function wh(e){if(!e)return ar;e=e._reactInternals;e:{if(Dr(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var n=e.type;if(Pt(n))return wp(e,n,t)}return t}function kh(e,t,n,r,s,o,a,i,c){return e=Jc(n,r,!0,e,s,o,a,i,c),e.context=wh(null),n=e.current,r=jt(),s=sr(n),o=Rn(r,s),o.callback=t!=null?t:null,nr(n,o,s),e.current.lanes=s,gl(e,s,r),Lt(e,r),e}function aa(e,t,n,r){var s=t.current,o=jt(),a=sr(s);return n=wh(n),t.context===null?t.context=n:t.pendingContext=n,t=Rn(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=nr(s,t,a),e!==null&&(un(e,s,a,o),co(e,s,a)),a}function Bo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Zc(e,t){jd(e,t),(e=e.alternate)&&jd(e,t)}function Jg(){return null}var jh=typeof reportError=="function"?reportError:function(e){console.error(e)};function eu(e){this._internalRoot=e}ia.prototype.render=eu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));aa(e,t,null,null)};ia.prototype.unmount=eu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mr(function(){aa(null,e,null,null)}),t[Pn]=null}};function ia(e){this._internalRoot=e}ia.prototype.unstable_scheduleHydration=function(e){if(e){var t=ep();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Kn.length&&t!==0&&t<Kn[n].priority;n++);Kn.splice(n,0,e),n===0&&np(e)}};function tu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ca(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Sd(){}function Zg(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var d=Bo(a);o.call(d)}}var a=kh(t,r,e,0,null,!1,!1,"",Sd);return e._reactRootContainer=a,e[Pn]=a.current,rl(e.nodeType===8?e.parentNode:e),Mr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var d=Bo(c);i.call(d)}}var c=Jc(e,0,!1,null,null,!1,!1,"",Sd);return e._reactRootContainer=c,e[Pn]=c.current,rl(e.nodeType===8?e.parentNode:e),Mr(function(){aa(t,c,n,r)}),c}function ua(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var i=s;s=function(){var c=Bo(a);i.call(c)}}aa(t,a,e,s)}else a=Zg(n,t,e,s,r);return Bo(a)}Jf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ls(t.pendingLanes);n!==0&&(bc(t,n|1),Lt(t,Ke()),!(je&6)&&(us=Ke()+500,dr()))}break;case 13:Mr(function(){var r=Ln(e,1);if(r!==null){var s=jt();un(r,e,1,s)}}),Zc(e,1)}};wc=function(e){if(e.tag===13){var t=Ln(e,134217728);if(t!==null){var n=jt();un(t,e,134217728,n)}Zc(e,134217728)}};Zf=function(e){if(e.tag===13){var t=sr(e),n=Ln(e,t);if(n!==null){var r=jt();un(n,e,t,r)}Zc(e,t)}};ep=function(){return Ee};tp=function(e,t){var n=Ee;try{return Ee=e,t()}finally{Ee=n}};ji=function(e,t,n){switch(t){case"input":if(mi(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ea(r);if(!s)throw Error(z(90));Rf(r),mi(r,s)}}}break;case"textarea":Pf(e,n);break;case"select":t=n.value,t!=null&&qr(e,!!n.multiple,t,!1)}};Bf=Yc;Uf=Mr;var ey={usingClientEntryPoint:!1,Events:[vl,Hr,ea,Af,Ff,Yc]},Ts={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ty={bundleType:Ts.bundleType,version:Ts.version,rendererPackageName:Ts.rendererPackageName,rendererConfig:Ts.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Vf(e),e===null?null:e.stateNode},findFiberByHostInstance:Ts.findFiberByHostInstance||Jg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xl.isDisabled&&Xl.supportsFiber)try{Go=Xl.inject(ty),kn=Xl}catch(e){}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ey;Ut.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tu(t))throw Error(z(200));return qg(e,t,null,n)};Ut.createRoot=function(e,t){if(!tu(e))throw Error(z(299));var n=!1,r="",s=jh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Jc(e,1,!1,null,null,n,!1,r,s),e[Pn]=t.current,rl(e.nodeType===8?e.parentNode:e),new eu(t)};Ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=Vf(t),e=e===null?null:e.stateNode,e};Ut.flushSync=function(e){return Mr(e)};Ut.hydrate=function(e,t,n){if(!ca(t))throw Error(z(200));return ua(null,e,t,!0,n)};Ut.hydrateRoot=function(e,t,n){if(!tu(e))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=jh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=kh(t,null,e,1,n!=null?n:null,s,!1,o,a),e[Pn]=t.current,rl(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new ia(t)};Ut.render=function(e,t,n){if(!ca(t))throw Error(z(200));return ua(null,e,t,!1,n)};Ut.unmountComponentAtNode=function(e){if(!ca(e))throw Error(z(40));return e._reactRootContainer?(Mr(function(){ua(null,null,e,!1,function(){e._reactRootContainer=null,e[Pn]=null})}),!0):!1};Ut.unstable_batchedUpdates=Yc;Ut.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ca(n))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return ua(e,t,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function Sh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sh)}catch(e){console.error(e)}}Sh(),Sf.exports=Ut;var Gr=Sf.exports,Nd=Gr;ci.createRoot=Nd.createRoot,ci.hydrateRoot=Nd.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fl(){return fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fl.apply(this,arguments)}var qn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(qn||(qn={}));const Cd="popstate";function ny(e){e===void 0&&(e={});function t(s,o){let{pathname:a="/",search:i="",hash:c=""}=Rr(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),nc("",{pathname:a,search:i,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let a=s.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");i=d===-1?c:c.slice(0,d)}return i+"#"+(typeof o=="string"?o:Nh(o))}function r(s,o){da(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return sy(t,n,r,e)}function nt(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function da(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function ry(){return Math.random().toString(36).substr(2,8)}function Ed(e,t){return{usr:e.state,key:e.key,idx:t}}function nc(e,t,n,r){return n===void 0&&(n=null),fl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Rr(t):t,{state:n,key:t&&t.key||r||ry()})}function Nh(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Rr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function sy(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,i=qn.Pop,c=null,d=p();d==null&&(d=0,a.replaceState(fl({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function f(){i=qn.Pop;let w=p(),g=w==null?null:w-d;d=w,c&&c({action:i,location:y.location,delta:g})}function h(w,g){i=qn.Push;let m=nc(y.location,w,g);n&&n(m,w),d=p()+1;let b=Ed(m,d),S=y.createHref(m);try{a.pushState(b,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}o&&c&&c({action:i,location:y.location,delta:1})}function x(w,g){i=qn.Replace;let m=nc(y.location,w,g);n&&n(m,w),d=p();let b=Ed(m,d),S=y.createHref(m);a.replaceState(b,"",S),o&&c&&c({action:i,location:y.location,delta:0})}function v(w){let g=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof w=="string"?w:Nh(w);return m=m.replace(/ $/,"%20"),nt(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let y={get action(){return i},get location(){return e(s,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Cd,f),c=w,()=>{s.removeEventListener(Cd,f),c=null}},createHref(w){return t(s,w)},createURL:v,encodeLocation(w){let g=v(w);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:x,go(w){return a.go(w)}};return y}var _d;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(_d||(_d={}));function ly(e,t,n){return n===void 0&&(n="/"),oy(e,t,n)}function oy(e,t,n,r){let s=typeof t=="string"?Rr(t):t,o=_h(s.pathname||"/",n);if(o==null)return null;let a=Ch(e);ay(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let d=vy(o);i=my(a[c],d)}return i}function Ch(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,i)=>{let c={relativePath:i===void 0?o.path||"":i,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(nt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Sr([r,c.relativePath]),p=n.concat(c);o.children&&o.children.length>0&&(nt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Ch(o.children,t,p,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:hy(d,o.index),routesMeta:p})};return e.forEach((o,a)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))s(o,a);else for(let c of Eh(o.path))s(o,a,c)}),t}function Eh(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=Eh(r.join("/")),i=[];return i.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function ay(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:xy(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const iy=/^:[\w-]+$/,cy=3,uy=2,dy=1,fy=10,py=-2,Md=e=>e==="*";function hy(e,t){let n=e.split("/"),r=n.length;return n.some(Md)&&(r+=py),t&&(r+=uy),n.filter(s=>!Md(s)).reduce((s,o)=>s+(iy.test(o)?cy:o===""?dy:fy),r)}function xy(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function my(e,t,n){let{routesMeta:r}=e,s={},o="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],d=i===r.length-1,p=o==="/"?t:t.slice(o.length)||"/",f=gy({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),h=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Sr([o,f.pathname]),pathnameBase:Cy(Sr([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=Sr([o,f.pathnameBase]))}return a}function gy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=yy(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((d,p,f)=>{let{paramName:h,isOptional:x}=p;if(h==="*"){let y=i[f]||"";a=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const v=i[f];return x&&!v?d[h]=void 0:d[h]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:e}}function yy(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),da(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function vy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return da(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _h(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const by=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wy=e=>by.test(e);function ky(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Rr(e):e,o;if(n)if(wy(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),da(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=Td(n.substring(1),"/"):o=Td(n,t)}else o=t;return{pathname:o,search:Ey(r),hash:_y(s)}}function Td(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ja(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jy(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Sy(e,t){let n=jy(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ny(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Rr(e):(s=fl({},e),nt(!s.pathname||!s.pathname.includes("?"),Ja("?","pathname","search",s)),nt(!s.pathname||!s.pathname.includes("#"),Ja("#","pathname","hash",s)),nt(!s.search||!s.search.includes("#"),Ja("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,i;if(a==null)i=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}i=f>=0?t[f]:"/"}let c=ky(s,i),d=a&&a!=="/"&&a.endsWith("/"),p=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const Sr=e=>e.join("/").replace(/\/\/+/g,"/"),Cy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ey=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_y=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function My(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Mh=["post","put","patch","delete"];new Set(Mh);const Ty=["get",...Mh];new Set(Ty);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pl(){return pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pl.apply(this,arguments)}const nu=u.createContext(null),Dy=u.createContext(null),fa=u.createContext(null),pa=u.createContext(null),zr=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Th=u.createContext(null);function ha(){return u.useContext(pa)!=null}function ru(){return ha()||nt(!1),u.useContext(pa).location}function Dh(e){u.useContext(fa).static||u.useLayoutEffect(e)}function It(){let{isDataRoute:e}=u.useContext(zr);return e?Wy():Ry()}function Ry(){ha()||nt(!1);let e=u.useContext(nu),{basename:t,future:n,navigator:r}=u.useContext(fa),{matches:s}=u.useContext(zr),{pathname:o}=ru(),a=JSON.stringify(Sy(s,n.v7_relativeSplatPath)),i=u.useRef(!1);return Dh(()=>{i.current=!0}),u.useCallback(function(d,p){if(p===void 0&&(p={}),!i.current)return;if(typeof d=="number"){r.go(d);return}let f=Ny(d,JSON.parse(a),o,p.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Sr([t,f.pathname])),(p.replace?r.replace:r.push)(f,p.state,p)},[t,r,a,o,e])}function Rh(){let{matches:e}=u.useContext(zr),t=e[e.length-1];return t?t.params:{}}function zy(e,t){return Py(e,t)}function Py(e,t,n,r){ha()||nt(!1);let{navigator:s}=u.useContext(fa),{matches:o}=u.useContext(zr),a=o[o.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=ru(),p;if(t){var f;let w=typeof t=="string"?Rr(t):t;c==="/"||(f=w.pathname)!=null&&f.startsWith(c)||nt(!1),p=w}else p=d;let h=p.pathname||"/",x=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=ly(e,{pathname:x}),y=Ay(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},i,w.params),pathname:Sr([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Sr([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,n,r);return t&&y?u.createElement(pa.Provider,{value:{location:pl({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:qn.Pop}},y):y}function Ly(){let e=Hy(),t=My(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:s},n):null,null)}const Iy=u.createElement(Ly,null);class Oy extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(zr.Provider,{value:this.props.routeContext},u.createElement(Th.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $y(e){let{routeContext:t,match:n,children:r}=e,s=u.useContext(nu);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(zr.Provider,{value:t},r)}function Ay(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let p=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);p>=0||nt(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let f=a[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=p),f.route.id){let{loaderData:h,errors:x}=n,v=f.route.loader&&h[f.route.id]===void 0&&(!x||x[f.route.id]===void 0);if(f.route.lazy||v){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,f,h)=>{let x,v=!1,y=null,w=null;n&&(x=i&&f.route.id?i[f.route.id]:void 0,y=f.route.errorElement||Iy,c&&(d<0&&h===0?(Vy("route-fallback"),v=!0,w=null):d===h&&(v=!0,w=f.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,h+1)),m=()=>{let b;return x?b=y:v?b=w:f.route.Component?b=u.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=p,u.createElement($y,{match:f,routeContext:{outlet:p,matches:g,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?u.createElement(Oy,{location:n.location,revalidation:n.revalidation,component:y,error:x,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var zh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(zh||{}),Ph=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ph||{});function Fy(e){let t=u.useContext(nu);return t||nt(!1),t}function By(e){let t=u.useContext(Dy);return t||nt(!1),t}function Uy(e){let t=u.useContext(zr);return t||nt(!1),t}function Lh(e){let t=Uy(),n=t.matches[t.matches.length-1];return n.route.id||nt(!1),n.route.id}function Hy(){var e;let t=u.useContext(Th),n=By(),r=Lh();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Wy(){let{router:e}=Fy(zh.UseNavigateStable),t=Lh(Ph.UseNavigateStable),n=u.useRef(!1);return Dh(()=>{n.current=!0}),u.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,pl({fromRouteId:t},o)))},[e,t])}const Dd={};function Vy(e,t,n){Dd[e]||(Dd[e]=!0)}function Xy(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function it(e){nt(!1)}function Ky(e){let{basename:t="/",children:n=null,location:r,navigationType:s=qn.Pop,navigator:o,static:a=!1,future:i}=e;ha()&&nt(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:o,static:a,future:pl({v7_relativeSplatPath:!1},i)}),[c,i,o,a]);typeof r=="string"&&(r=Rr(r));let{pathname:p="/",search:f="",hash:h="",state:x=null,key:v="default"}=r,y=u.useMemo(()=>{let w=_h(p,c);return w==null?null:{location:{pathname:w,search:f,hash:h,state:x,key:v},navigationType:s}},[c,p,f,h,x,v,s]);return y==null?null:u.createElement(fa.Provider,{value:d},u.createElement(pa.Provider,{children:n,value:y}))}function Yy(e){let{children:t,location:n}=e;return zy(rc(t),n)}new Promise(()=>{});function rc(e,t){t===void 0&&(t=[]);let n=[];return u.Children.forEach(e,(r,s)=>{if(!u.isValidElement(r))return;let o=[...t,s];if(r.type===u.Fragment){n.push.apply(n,rc(r.props.children,o));return}r.type!==it&&nt(!1),!r.props.index||!r.props.children||nt(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=rc(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Qy="6";try{window.__reactRouterVersion=Qy}catch(e){}const Gy="startTransition",Rd=Vx[Gy];function qy(e){let{basename:t,children:n,future:r,window:s}=e,o=u.useRef();o.current==null&&(o.current=ny({window:s,v5Compat:!0}));let a=o.current,[i,c]=u.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},p=u.useCallback(f=>{d&&Rd?Rd(()=>c(f)):c(f)},[c,d]);return u.useLayoutEffect(()=>a.listen(p),[a,p]),u.useEffect(()=>Xy(r),[r]),u.createElement(Ky,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}var zd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(zd||(zd={}));var Pd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Pd||(Pd={}));const su="";async function Ld(){var r,s;const e=localStorage.getItem("whisper_token");if(e)return e;const t=(s=(r=window.Telegram)==null?void 0:r.WebApp)==null?void 0:s.initData;if(t){const a=await(await fetch(`${su}/api/auth/telegram`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:t})})).json();if(a.success&&a.token)return localStorage.setItem("whisper_token",a.token),a.token}const n=new Error("need_login");throw n.code="NEED_LOGIN",n}async function O(e,t={}){let n=await Ld();const r=`${su}${e}`,s=a=>fetch(r,{...t,cache:"no-store",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`,...t.headers},body:t.body?JSON.stringify(t.body):void 0});let o=await s(n);if(o.status===401&&(localStorage.removeItem("whisper_token"),n=await Ld(),o=await s(n)),o.status===204)return null;if(!o.ok){const a=await o.json().catch(()=>({}));throw new Error(a.detail||` (${o.status})`)}return o.json()}async function Jy(e){const n=await(await fetch(`${su}/api/auth/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})})).json();if(n.success&&n.token)return localStorage.setItem("whisper_token",n.token),!0;throw new Error(n.detail||"")}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ih=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ev={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...i},c)=>u.createElement("svg",{ref:c,...ev,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Ih("lucide",s),...i},[...a.map(([d,p])=>u.createElement(d,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(e,t)=>{const n=u.forwardRef(({className:r,...s},o)=>u.createElement(tv,{ref:o,iconNode:t,className:Ih(`lucide-${Zy(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=me("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=me("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=me("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=me("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=me("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=me("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=me("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=me("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=me("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=me("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=me("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=me("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=me("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=me("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=me("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=me("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=me("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=me("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=me("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=me("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=me("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=me("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=me("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=me("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=me("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=me("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vv="WhisperMiniDB",bv=1,fs="avatars",Bh=()=>new Promise((e,t)=>{const n=indexedDB.open(vv,bv);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(fs)||r.createObjectStore(fs,{keyPath:"key"})}}),sc=async(e,t)=>{const n=await Bh();return new Promise((r,s)=>{const o=n.transaction([fs],"readwrite");o.objectStore(fs).put({key:e,base64:t}),o.oncomplete=()=>r(),o.onerror=()=>s(o.error)})},gs=async e=>{const t=await Bh();return new Promise((n,r)=>{const o=t.transaction([fs],"readonly").objectStore(fs).get(e);o.onsuccess=()=>{var a;return n(((a=o.result)==null?void 0:a.base64)||null)},o.onerror=()=>r(o.error)})},Tt={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function Ir({icon:e,label:t,desc:n,disabled:r,onClick:s,badge:o}){const[a,i]=u.useState(!1),c=()=>!r&&i(!0),d=()=>{i(!1),r||s==null||s()};return l.jsxs("button",{className:"flex flex-col items-start rounded-[18px] gap-2 text-left",style:{padding:"16px 14px",background:Tt.bg,boxShadow:a?"inset 3px 3px 8px rgba(174,176,182,0.5), inset -3px -3px 8px #ffffff":"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff",opacity:r?.4:1,transform:a?"scale(0.97)":"scale(1)",transition:"transform 0.1s, box-shadow 0.1s",cursor:r?"default":"pointer",WebkitTapHighlightColor:"transparent"},disabled:r,onTouchStart:c,onTouchEnd:d,onMouseDown:c,onMouseUp:d,onMouseLeave:()=>i(!1),children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-[12px]",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))"},children:e}),o&&l.jsx("div",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full",style:{background:"#ef4444",border:"2px solid var(--bg)"}})]}),l.jsxs("div",{className:"pl-1",children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:Tt.text},children:t}),l.jsx("div",{className:"mt-0.5 text-[10px] leading-snug",style:{color:Tt.textMuted},children:n})]})]})}function $d({children:e}){return l.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-[3px]",style:{color:Tt.textMuted},children:e})}function wv(){const e=It(),[t,n]=u.useState(()=>{try{return JSON.parse(localStorage.getItem("whisper_profile")||"null")}catch(d){return null}}),[r,s]=u.useState(null),[o,a]=u.useState(!1);u.useEffect(()=>{O("/api/user/profile").then(d=>{n(d),localStorage.setItem("whisper_profile",JSON.stringify(d))}).catch(()=>{}),gs("user-avatar").then(d=>{d&&s(d)}).catch(function(){}),O("/api/diary/unread-count").then(d=>{d.count>0&&a(!0)}).catch(()=>{})},[]);const i=(t==null?void 0:t.nickname)||"",c=(t==null?void 0:t.background_url)||"";return l.jsxs("div",{className:"flex flex-col overflow-y-auto",style:{background:Tt.bg,height:"100%",paddingBottom:16},children:[l.jsxs("div",{className:"flex flex-col px-5",style:{paddingTop:"max(12px, env(safe-area-inset-top))"},children:[l.jsx("h1",{className:"mb-4 text-center text-[17px] font-medium",style:{color:Tt.textMuted,letterSpacing:"4px"},children:"W H I S P E R"}),l.jsxs("button",{className:"mb-5 flex w-full items-center gap-4 rounded-[20px] p-5 text-left",style:{background:Tt.bg,boxShadow:"6px 6px 14px rgba(174,176,182,0.5), -6px -6px 14px #ffffff"},onClick:()=>e("/profile"),children:[l.jsx("div",{className:"shrink-0 rounded-full",style:{width:52,height:52,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Tt.bg},children:r?l.jsx("img",{src:r,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{style:{fontSize:22},children:""})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"text-[17px] font-bold truncate",style:{color:Tt.text},children:["@",i]}),l.jsxs("div",{className:"mt-0.5 text-[11px] italic",style:{color:Tt.textMuted},children:['"',c,'"']})]}),l.jsx(ds,{size:16,style:{color:Tt.textMuted,flexShrink:0}})]}),l.jsx($d,{children:""}),l.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[l.jsx(Ir,{icon:l.jsx(lu,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/world-books")}),l.jsx(Ir,{icon:l.jsx(rv,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/memories")}),l.jsx(Ir,{icon:l.jsx(Oh,{size:18,color:"white"}),label:"",desc:"Core Blocks",onClick:()=>e("/assistants")}),l.jsx(Ir,{icon:l.jsx(mv,{size:18,color:"white"}),label:"",desc:"API",onClick:()=>e("/settings")})]}),l.jsx($d,{children:""}),l.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[l.jsx(Ir,{icon:l.jsx(nv,{size:18,color:"white"}),label:"",desc:"",badge:o,onClick:()=>e("/diary")}),l.jsx(Ir,{icon:l.jsx(gv,{size:18,color:"white"}),label:"",desc:"",disabled:!0})]}),l.jsx("button",{className:"flex w-full items-center justify-center rounded-[18px] py-4",style:{background:Tt.bg,boxShadow:"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff"},onClick:()=>e("/cot"),children:l.jsx(cv,{size:32,fill:Tt.accent,style:{color:Tt.accent,animation:"heartbeat 2s ease-in-out infinite"}})})]}),l.jsx("style",{children:`
        @keyframes heartbeat {
          0%, 100% { transform: scale(1); }
          15% { transform: scale(1.15); }
          30% { transform: scale(1); }
          45% { transform: scale(1.1); }
          60% { transform: scale(1); }
        }
      `})]})}function kv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const ya=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function ys(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function ou(e){return"nodeType"in e}function Et(e){var t,n;return e?ys(e)?e:ou(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function au(e){const{Document:t}=Et(e);return e instanceof t}function Nl(e){return ys(e)?!1:e instanceof Et(e).HTMLElement}function Uh(e){return e instanceof Et(e).SVGElement}function vs(e){return e?ys(e)?e.document:ou(e)?au(e)?e:Nl(e)||Uh(e)?e.ownerDocument:document:document:document}const fn=ya?u.useLayoutEffect:u.useEffect;function va(e){const t=u.useRef(e);return fn(()=>{t.current=e}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function jv(){const e=u.useRef(null),t=u.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=u.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function hl(e,t){t===void 0&&(t=[e]);const n=u.useRef(e);return fn(()=>{n.current!==e&&(n.current=e)},t),n}function Cl(e,t){const n=u.useRef();return u.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Uo(e){const t=va(e),n=u.useRef(null),r=u.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function Ho(e){const t=u.useRef();return u.useEffect(()=>{t.current=e},[e]),t.current}let Za={};function El(e,t){return u.useMemo(()=>{if(t)return t;const n=Za[e]==null?0:Za[e]+1;return Za[e]=n,e+"-"+n},[e,t])}function Hh(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,a)=>{const i=Object.entries(a);for(const[c,d]of i){const p=o[c];p!=null&&(o[c]=p+e*d)}return o},{...t})}}const rs=Hh(1),Wo=Hh(-1);function Sv(e){return"clientX"in e&&"clientY"in e}function ba(e){if(!e)return!1;const{KeyboardEvent:t}=Et(e.target);return t&&e instanceof t}function Nv(e){if(!e)return!1;const{TouchEvent:t}=Et(e.target);return t&&e instanceof t}function Vo(e){if(Nv(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Sv(e)?{x:e.clientX,y:e.clientY}:null}const On=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[On.Translate.toString(e),On.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Ad="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Cv(e){return e.matches(Ad)?e:e.querySelector(Ad)}const Ev={display:"none"};function _v(e){let{id:t,value:n}=e;return Pe.createElement("div",{id:t,style:Ev},n)}function Mv(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Pe.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Tv(){const[e,t]=u.useState("");return{announce:u.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Wh=u.createContext(null);function Dv(e){const t=u.useContext(Wh);u.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Rv(){const[e]=u.useState(()=>new Set),t=u.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[u.useCallback(r=>{let{type:s,event:o}=r;e.forEach(a=>{var i;return(i=a[s])==null?void 0:i.call(a,o)})},[e]),t]}const zv={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Pv={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Lv(e){let{announcements:t=Pv,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=zv}=e;const{announce:o,announcement:a}=Tv(),i=El("DndLiveRegion"),[c,d]=u.useState(!1);if(u.useEffect(()=>{d(!0)},[]),Dv(u.useMemo(()=>({onDragStart(f){let{active:h}=f;o(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:x}=f;t.onDragMove&&o(t.onDragMove({active:h,over:x}))},onDragOver(f){let{active:h,over:x}=f;o(t.onDragOver({active:h,over:x}))},onDragEnd(f){let{active:h,over:x}=f;o(t.onDragEnd({active:h,over:x}))},onDragCancel(f){let{active:h,over:x}=f;o(t.onDragCancel({active:h,over:x}))}}),[o,t])),!c)return null;const p=Pe.createElement(Pe.Fragment,null,Pe.createElement(_v,{id:r,value:s.draggable}),Pe.createElement(Mv,{id:i,announcement:a}));return n?Gr.createPortal(p,n):p}var et;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(et||(et={}));function Xo(){}function Ko(e,t){return u.useMemo(()=>({sensor:e,options:t!=null?t:{}}),[e,t])}function Vh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const pn=Object.freeze({x:0,y:0});function Iv(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ov(e,t){const n=Vo(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function $v(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Av(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Fv(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Fd(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Xh=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=Fd(t,t.left,t.top),o=[];for(const a of r){const{id:i}=a,c=n.get(i);if(c){const d=Iv(Fd(c),s);o.push({id:i,data:{droppableContainer:a,value:d}})}}return o.sort($v)};function Bv(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),a=s-r,i=o-n;if(r<s&&n<o){const c=t.width*t.height,d=e.width*e.height,p=a*i,f=p/(c+d-p);return Number(f.toFixed(4))}return 0}const Uv=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const o of r){const{id:a}=o,i=n.get(a);if(i){const c=Bv(i,t);c>0&&s.push({id:a,data:{droppableContainer:o,value:c}})}}return s.sort(Av)};function Hv(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Kh(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:pn}function Wv(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((a,i)=>({...a,top:a.top+e*i.y,bottom:a.bottom+e*i.y,left:a.left+e*i.x,right:a.right+e*i.x}),{...n})}}const Vv=Wv(1);function Yh(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Xv(e,t,n){const r=Yh(t);if(!r)return e;const{scaleX:s,scaleY:o,x:a,y:i}=r,c=e.left-a-(1-s)*parseFloat(n),d=e.top-i-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),p=s?e.width/s:e.width,f=o?e.height/o:e.height;return{width:p,height:f,top:d,right:c+p,bottom:d+f,left:c}}const Kv={ignoreTransform:!1};function bs(e,t){t===void 0&&(t=Kv);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:p}=Et(e).getComputedStyle(e);d&&(n=Xv(n,d,p))}const{top:r,left:s,width:o,height:a,bottom:i,right:c}=n;return{top:r,left:s,width:o,height:a,bottom:i,right:c}}function Bd(e){return bs(e,{ignoreTransform:!0})}function Yv(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Qv(e,t){return t===void 0&&(t=Et(e).getComputedStyle(e)),t.position==="fixed"}function Gv(e,t){t===void 0&&(t=Et(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?n.test(o):!1})}function iu(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(au(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Nl(s)||Uh(s)||n.includes(s))return n;const o=Et(e).getComputedStyle(s);return s!==e&&Gv(s,o)&&n.push(s),Qv(s,o)?n:r(s.parentNode)}return e?r(e):n}function Qh(e){const[t]=iu(e,1);return t!=null?t:null}function ei(e){return!ya||!e?null:ys(e)?e:ou(e)?au(e)||e===vs(e).scrollingElement?window:Nl(e)?e:null:null}function Gh(e){return ys(e)?e.scrollX:e.scrollLeft}function qh(e){return ys(e)?e.scrollY:e.scrollTop}function lc(e){return{x:Gh(e),y:qh(e)}}var lt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(lt||(lt={}));function Jh(e){return!ya||!e?!1:e===document.scrollingElement}function Zh(e){const t={x:0,y:0},n=Jh(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:a,isRight:i,maxScroll:r,minScroll:t}}const qv={x:.2,y:.2};function Jv(e,t,n,r,s){let{top:o,left:a,right:i,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=qv);const{isTop:d,isBottom:p,isLeft:f,isRight:h}=Zh(e),x={x:0,y:0},v={x:0,y:0},y={height:t.height*s.y,width:t.width*s.x};return!d&&o<=t.top+y.height?(x.y=lt.Backward,v.y=r*Math.abs((t.top+y.height-o)/y.height)):!p&&c>=t.bottom-y.height&&(x.y=lt.Forward,v.y=r*Math.abs((t.bottom-y.height-c)/y.height)),!h&&i>=t.right-y.width?(x.x=lt.Forward,v.x=r*Math.abs((t.right-y.width-i)/y.width)):!f&&a<=t.left+y.width&&(x.x=lt.Backward,v.x=r*Math.abs((t.left+y.width-a)/y.width)),{direction:x,speed:v}}function Zv(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:a}=window;return{top:0,left:0,right:o,bottom:a,width:o,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function ex(e){return e.reduce((t,n)=>rs(t,lc(n)),pn)}function e1(e){return e.reduce((t,n)=>t+Gh(n),0)}function t1(e){return e.reduce((t,n)=>t+qh(n),0)}function tx(e,t){if(t===void 0&&(t=bs),!e)return;const{top:n,left:r,bottom:s,right:o}=t(e);Qh(e)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const n1=[["x",["left","right"],e1],["y",["top","bottom"],t1]];class cu{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=iu(n),s=ex(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,a,i]of n1)for(const c of a)Object.defineProperty(this,c,{get:()=>{const d=i(r),p=s[o]-d;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Xs{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function r1(e){const{EventTarget:t}=Et(e);return e instanceof t?e:vs(e)}function ti(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Xt;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Xt||(Xt={}));function Ud(e){e.preventDefault()}function s1(e){e.stopPropagation()}var Se;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Se||(Se={}));const nx={start:[Se.Space,Se.Enter],cancel:[Se.Esc],end:[Se.Space,Se.Enter,Se.Tab]},l1=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Se.Right:return{...n,x:n.x+25};case Se.Left:return{...n,x:n.x-25};case Se.Down:return{...n,y:n.y+25};case Se.Up:return{...n,y:n.y-25}}};class rx{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Xs(vs(n)),this.windowListeners=new Xs(Et(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Xt.Resize,this.handleCancel),this.windowListeners.add(Xt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Xt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&tx(r),n(pn)}handleKeyDown(t){if(ba(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=nx,coordinateGetter:a=l1,scrollBehavior:i="smooth"}=s,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:pn;this.referenceCoordinates||(this.referenceCoordinates=p);const f=a(t,{active:n,context:r.current,currentCoordinates:p});if(f){const h=Wo(f,p),x={x:0,y:0},{scrollableAncestors:v}=r.current;for(const y of v){const w=t.code,{isTop:g,isRight:m,isLeft:b,isBottom:S,maxScroll:j,minScroll:C}=Zh(y),k=Zv(y),E={x:Math.min(w===Se.Right?k.right-k.width/2:k.right,Math.max(w===Se.Right?k.left:k.left+k.width/2,f.x)),y:Math.min(w===Se.Down?k.bottom-k.height/2:k.bottom,Math.max(w===Se.Down?k.top:k.top+k.height/2,f.y))},M=w===Se.Right&&!m||w===Se.Left&&!b,L=w===Se.Down&&!S||w===Se.Up&&!g;if(M&&E.x!==f.x){const $=y.scrollLeft+h.x,ae=w===Se.Right&&$<=j.x||w===Se.Left&&$>=C.x;if(ae&&!h.y){y.scrollTo({left:$,behavior:i});return}ae?x.x=y.scrollLeft-$:x.x=w===Se.Right?y.scrollLeft-j.x:y.scrollLeft-C.x,x.x&&y.scrollBy({left:-x.x,behavior:i});break}else if(L&&E.y!==f.y){const $=y.scrollTop+h.y,ae=w===Se.Down&&$<=j.y||w===Se.Up&&$>=C.y;if(ae&&!h.x){y.scrollTo({top:$,behavior:i});return}ae?x.y=y.scrollTop-$:x.y=w===Se.Down?y.scrollTop-j.y:y.scrollTop-C.y,x.y&&y.scrollBy({top:-x.y,behavior:i});break}}this.handleMove(t,rs(Wo(f,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}rx.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=nx,onActivation:s}=t,{active:o}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const i=o.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function Hd(e){return!!(e&&"distance"in e)}function Wd(e){return!!(e&&"delay"in e)}class uu{constructor(t,n,r){var s;r===void 0&&(r=r1(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:a}=o;this.props=t,this.events=n,this.document=vs(a),this.documentListeners=new Xs(this.document),this.listeners=new Xs(r),this.windowListeners=new Xs(Et(a)),this.initialCoordinates=(s=Vo(o))!=null?s:pn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Xt.Resize,this.handleCancel),this.windowListeners.add(Xt.DragStart,Ud),this.windowListeners.add(Xt.VisibilityChange,this.handleCancel),this.windowListeners.add(Xt.ContextMenu,Ud),this.documentListeners.add(Xt.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Wd(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Hd(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Xt.Click,s1,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Xt.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:a,options:{activationConstraint:i}}=o;if(!s)return;const c=(n=Vo(t))!=null?n:pn,d=Wo(s,c);if(!r&&i){if(Hd(i)){if(i.tolerance!=null&&ti(d,i.tolerance))return this.handleCancel();if(ti(d,i.distance))return this.handleStart()}if(Wd(i)&&ti(d,i.tolerance))return this.handleCancel();this.handlePending(i,d);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Se.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const o1={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class wa extends uu{constructor(t){const{event:n}=t,r=vs(n.target);super(t,o1,r)}}wa.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const a1={move:{name:"mousemove"},end:{name:"mouseup"}};var oc;(function(e){e[e.RightClick=2]="RightClick"})(oc||(oc={}));class i1 extends uu{constructor(t){super(t,a1,vs(t.event.target))}}i1.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===oc.RightClick?!1:(r==null||r({event:n}),!0)}}];const ni={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class du extends uu{constructor(t){super(t,ni)}static setup(){return window.addEventListener(ni.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(ni.move.name,t)};function t(){}}}du.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Ks;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ks||(Ks={}));var Yo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Yo||(Yo={}));function c1(e){let{acceleration:t,activator:n=Ks.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:a=5,order:i=Yo.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:p,delta:f,threshold:h}=e;const x=d1({delta:f,disabled:!o}),[v,y]=jv(),w=u.useRef({x:0,y:0}),g=u.useRef({x:0,y:0}),m=u.useMemo(()=>{switch(n){case Ks.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Ks.DraggableRect:return s}},[n,s,c]),b=u.useRef(null),S=u.useCallback(()=>{const C=b.current;if(!C)return;const k=w.current.x*g.current.x,E=w.current.y*g.current.y;C.scrollBy(k,E)},[]),j=u.useMemo(()=>i===Yo.TreeOrder?[...d].reverse():d,[i,d]);u.useEffect(()=>{if(!o||!d.length||!m){y();return}for(const C of j){if((r==null?void 0:r(C))===!1)continue;const k=d.indexOf(C),E=p[k];if(!E)continue;const{direction:M,speed:L}=Jv(C,E,m,t,h);for(const $ of["x","y"])x[$][M[$]]||(L[$]=0,M[$]=0);if(L.x>0||L.y>0){y(),b.current=C,v(S,a),w.current=L,g.current=M;return}}w.current={x:0,y:0},g.current={x:0,y:0},y()},[t,S,r,y,o,a,JSON.stringify(m),JSON.stringify(x),v,d,j,p,JSON.stringify(h)])}const u1={x:{[lt.Backward]:!1,[lt.Forward]:!1},y:{[lt.Backward]:!1,[lt.Forward]:!1}};function d1(e){let{delta:t,disabled:n}=e;const r=Ho(t);return Cl(s=>{if(n||!r||!s)return u1;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[lt.Backward]:s.x[lt.Backward]||o.x===-1,[lt.Forward]:s.x[lt.Forward]||o.x===1},y:{[lt.Backward]:s.y[lt.Backward]||o.y===-1,[lt.Forward]:s.y[lt.Forward]||o.y===1}}},[n,t,r])}function f1(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Cl(s=>{var o;return t==null?null:(o=r!=null?r:s)!=null?o:null},[r,t])}function p1(e,t){return u.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...o]},[]),[e,t])}var xl;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(xl||(xl={}));var ac;(function(e){e.Optimized="optimized"})(ac||(ac={}));const Vd=new Map;function h1(e,t){let{dragging:n,dependencies:r,config:s}=t;const[o,a]=u.useState(null),{frequency:i,measure:c,strategy:d}=s,p=u.useRef(e),f=w(),h=hl(f),x=u.useCallback(function(g){g===void 0&&(g=[]),!h.current&&a(m=>m===null?g:m.concat(g.filter(b=>!m.includes(b))))},[h]),v=u.useRef(null),y=Cl(g=>{if(f&&!n)return Vd;if(!g||g===Vd||p.current!==e||o!=null){const m=new Map;for(let b of e){if(!b)continue;if(o&&o.length>0&&!o.includes(b.id)&&b.rect.current){m.set(b.id,b.rect.current);continue}const S=b.node.current,j=S?new cu(c(S),S):null;b.rect.current=j,j&&m.set(b.id,j)}return m}return g},[e,o,n,f,c]);return u.useEffect(()=>{p.current=e},[e]),u.useEffect(()=>{f||x()},[n,f]),u.useEffect(()=>{o&&o.length>0&&a(null)},[JSON.stringify(o)]),u.useEffect(()=>{f||typeof i!="number"||v.current!==null||(v.current=setTimeout(()=>{x(),v.current=null},i))},[i,f,x,...r]),{droppableRects:y,measureDroppableContainers:x,measuringScheduled:o!=null};function w(){switch(d){case xl.Always:return!1;case xl.BeforeDragging:return n;default:return!n}}}function fu(e,t){return Cl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function x1(e,t){return fu(e,t)}function m1(e){let{callback:t,disabled:n}=e;const r=va(t),s=u.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return u.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function ka(e){let{callback:t,disabled:n}=e;const r=va(t),s=u.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return u.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function g1(e){return new cu(bs(e),e)}function Xd(e,t,n){t===void 0&&(t=g1);const[r,s]=u.useState(null);function o(){s(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c!=null?c:n)!=null?d:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=m1({callback(c){if(e)for(const d of c){const{type:p,target:f}=d;if(p==="childList"&&f instanceof HTMLElement&&f.contains(e)){o();break}}}}),i=ka({callback:o});return fn(()=>{o(),e?(i==null||i.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),a==null||a.disconnect())},[e]),r}function y1(e){const t=fu(e);return Kh(e,t)}const Kd=[];function v1(e){const t=u.useRef(e),n=Cl(r=>e?r&&r!==Kd&&e&&t.current&&e.parentNode===t.current.parentNode?r:iu(e):Kd,[e]);return u.useEffect(()=>{t.current=e},[e]),n}function b1(e){const[t,n]=u.useState(null),r=u.useRef(e),s=u.useCallback(o=>{const a=ei(o.target);a&&n(i=>i?(i.set(a,lc(a)),new Map(i)):null)},[]);return u.useEffect(()=>{const o=r.current;if(e!==o){a(o);const i=e.map(c=>{const d=ei(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,lc(d)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=e}return()=>{a(e),a(o)};function a(i){i.forEach(c=>{const d=ei(c);d==null||d.removeEventListener("scroll",s)})}},[s,e]),u.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,a)=>rs(o,a),pn):ex(e):pn,[e,t])}function Yd(e,t){t===void 0&&(t=[]);const n=u.useRef(null);return u.useEffect(()=>{n.current=null},t),u.useEffect(()=>{const r=e!==pn;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Wo(e,n.current):pn}function w1(e){u.useEffect(()=>{if(!ya)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function k1(e,t){return u.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=a=>{o(a,t)},n},{}),[e,t])}function sx(e){return u.useMemo(()=>e?Yv(e):null,[e])}const Qd=[];function j1(e,t){t===void 0&&(t=bs);const[n]=e,r=sx(n?Et(n):null),[s,o]=u.useState(Qd);function a(){o(()=>e.length?e.map(c=>Jh(c)?r:new cu(t(c),c)):Qd)}const i=ka({callback:a});return fn(()=>{i==null||i.disconnect(),a(),e.forEach(c=>i==null?void 0:i.observe(c))},[e]),s}function lx(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Nl(t)?t:e}function S1(e){let{measure:t}=e;const[n,r]=u.useState(null),s=u.useCallback(d=>{for(const{target:p}of d)if(Nl(p)){r(f=>{const h=t(p);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),o=ka({callback:s}),a=u.useCallback(d=>{const p=lx(d);o==null||o.disconnect(),p&&(o==null||o.observe(p)),r(p?t(p):null)},[t,o]),[i,c]=Uo(a);return u.useMemo(()=>({nodeRef:i,rect:n,setRef:c}),[n,i,c])}const N1=[{sensor:wa,options:{}},{sensor:rx,options:{}}],C1={current:{}},go={draggable:{measure:Bd},droppable:{measure:Bd,strategy:xl.WhileDragging,frequency:ac.Optimized},dragOverlay:{measure:bs}};class Ys extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const E1={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ys,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Xo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:go,measureDroppableContainers:Xo,windowRect:null,measuringScheduled:!1},ox={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Xo,draggableNodes:new Map,over:null,measureDroppableContainers:Xo},_l=u.createContext(ox),ax=u.createContext(E1);function _1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ys}}}function M1(e,t){switch(t.type){case et.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case et.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case et.DragEnd:case et.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case et.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Ys(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case et.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const a=new Ys(e.droppable.containers);return a.set(n,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case et.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new Ys(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function T1(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=u.useContext(_l),o=Ho(r),a=Ho(n==null?void 0:n.id);return u.useEffect(()=>{if(!t&&!r&&o&&a!=null){if(!ba(o)||document.activeElement===o.target)return;const i=s.get(a);if(!i)return;const{activatorNode:c,node:d}=i;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[c.current,d.current]){if(!p)continue;const f=Cv(p);if(f){f.focus();break}}})}},[r,t,s,a,o]),null}function ix(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...r}),n):n}function D1(e){return u.useMemo(()=>({draggable:{...go.draggable,...e==null?void 0:e.draggable},droppable:{...go.droppable,...e==null?void 0:e.droppable},dragOverlay:{...go.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function R1(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const o=u.useRef(!1),{x:a,y:i}=typeof s=="boolean"?{x:s,y:s}:s;fn(()=>{if(!a&&!i||!t){o.current=!1;return}if(o.current||!r)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const p=n(d),f=Kh(p,r);if(a||(f.x=0),i||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=Qh(d);h&&h.scrollBy({top:f.y,left:f.x})}},[t,a,i,r,n])}const ja=u.createContext({...pn,scaleX:1,scaleY:1});var Xn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Xn||(Xn={}));const cx=u.memo(function(t){var n,r,s,o;let{id:a,accessibility:i,autoScroll:c=!0,children:d,sensors:p=N1,collisionDetection:f=Uv,measuring:h,modifiers:x,...v}=t;const y=u.useReducer(M1,void 0,_1),[w,g]=y,[m,b]=Rv(),[S,j]=u.useState(Xn.Uninitialized),C=S===Xn.Initialized,{draggable:{active:k,nodes:E,translate:M},droppable:{containers:L}}=w,$=k!=null?E.get(k):null,ae=u.useRef({initial:null,translated:null}),K=u.useMemo(()=>{var Qe;return k!=null?{id:k,data:(Qe=$==null?void 0:$.data)!=null?Qe:C1,rect:ae}:null},[k,$]),P=u.useRef(null),[J,be]=u.useState(null),[he,A]=u.useState(null),Q=hl(v,Object.values(v)),ee=El("DndDescribedBy",a),ge=u.useMemo(()=>L.getEnabled(),[L]),R=D1(h),{droppableRects:de,measureDroppableContainers:ie,measuringScheduled:Oe}=h1(ge,{dragging:C,dependencies:[M.x,M.y],config:R.droppable}),xe=f1(E,k),_e=u.useMemo(()=>he?Vo(he):null,[he]),We=ws(),V=x1(xe,R.draggable.measure);R1({activeNode:k!=null?E.get(k):null,config:We.layoutShiftCompensation,initialRect:V,measure:R.draggable.measure});const te=Xd(xe,R.draggable.measure,V),we=Xd(xe?xe.parentElement:null),Me=u.useRef({activatorEvent:null,active:null,activeNode:xe,collisionRect:null,collisions:null,droppableRects:de,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:L,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ye=L.getNodeFor((n=Me.current.over)==null?void 0:n.id),ce=S1({measure:R.dragOverlay.measure}),Ve=(r=ce.nodeRef.current)!=null?r:xe,Z=C?(s=ce.rect)!=null?s:te:null,B=!!(ce.nodeRef.current&&ce.rect),fe=y1(B?null:te),D=sx(Ve?Et(Ve):null),H=v1(C?Ye!=null?Ye:xe:null),G=j1(H),ne=ix(x,{transform:{x:M.x-fe.x,y:M.y-fe.y,scaleX:1,scaleY:1},activatorEvent:he,active:K,activeNodeRect:te,containerNodeRect:we,draggingNodeRect:Z,over:Me.current.over,overlayNodeRect:ce.rect,scrollableAncestors:H,scrollableAncestorRects:G,windowRect:D}),se=_e?rs(_e,M):null,pe=b1(H),Re=Yd(pe),Ot=Yd(pe,[te]),Zt=rs(ne,Re),hn=Z?Vv(Z,ne):null,en=K&&hn?f({active:K,collisionRect:hn,droppableRects:de,droppableContainers:ge,pointerCoordinates:se}):null,xn=Fv(en,"id"),[gt,tn]=u.useState(null),fr=B?ne:rs(ne,Ot),F=Hv(fr,(o=gt==null?void 0:gt.rect)!=null?o:null,te),ke=u.useRef(null),ue=u.useCallback((Qe,vt)=>{let{sensor:bt,options:mn}=vt;if(P.current==null)return;const _t=E.get(P.current);if(!_t)return;const at=Qe.nativeEvent,Mt=new bt({active:P.current,activeNode:_t,event:at,options:mn,context:Me,onAbort(Ge){if(!E.get(Ge))return;const{onDragAbort:Wt}=Q.current,nn={id:Ge};Wt==null||Wt(nn),m({type:"onDragAbort",event:nn})},onPending(Ge,gn,Wt,nn){if(!E.get(Ge))return;const{onDragPending:hr}=Q.current,Vt={id:Ge,constraint:gn,initialCoordinates:Wt,offset:nn};hr==null||hr(Vt),m({type:"onDragPending",event:Vt})},onStart(Ge){const gn=P.current;if(gn==null)return;const Wt=E.get(gn);if(!Wt)return;const{onDragStart:nn}=Q.current,pr={activatorEvent:at,active:{id:gn,data:Wt.data,rect:ae}};Gr.unstable_batchedUpdates(()=>{nn==null||nn(pr),j(Xn.Initializing),g({type:et.DragStart,initialCoordinates:Ge,active:gn}),m({type:"onDragStart",event:pr}),be(ke.current),A(at)})},onMove(Ge){g({type:et.DragMove,coordinates:Ge})},onEnd:Fn(et.DragEnd),onCancel:Fn(et.DragCancel)});ke.current=Mt;function Fn(Ge){return async function(){const{active:Wt,collisions:nn,over:pr,scrollAdjustedTranslate:hr}=Me.current;let Vt=null;if(Wt&&hr){const{cancelDrop:Nn}=Q.current;Vt={activatorEvent:at,active:Wt,collisions:nn,delta:hr,over:pr},Ge===et.DragEnd&&typeof Nn=="function"&&await Promise.resolve(Nn(Vt))&&(Ge=et.DragCancel)}P.current=null,Gr.unstable_batchedUpdates(()=>{g({type:Ge}),j(Xn.Uninitialized),tn(null),be(null),A(null),ke.current=null;const Nn=Ge===et.DragEnd?"onDragEnd":"onDragCancel";if(Vt){const ks=Q.current[Nn];ks==null||ks(Vt),m({type:Nn,event:Vt})}})}}},[E]),Te=u.useCallback((Qe,vt)=>(bt,mn)=>{const _t=bt.nativeEvent,at=E.get(mn);if(P.current!==null||!at||_t.dndKit||_t.defaultPrevented)return;const Mt={active:at};Qe(bt,vt.options,Mt)===!0&&(_t.dndKit={capturedBy:vt.sensor},P.current=mn,ue(bt,vt))},[E,ue]),yt=p1(p,Te);w1(p),fn(()=>{te&&S===Xn.Initializing&&j(Xn.Initialized)},[te,S]),u.useEffect(()=>{const{onDragMove:Qe}=Q.current,{active:vt,activatorEvent:bt,collisions:mn,over:_t}=Me.current;if(!vt||!bt)return;const at={active:vt,activatorEvent:bt,collisions:mn,delta:{x:Zt.x,y:Zt.y},over:_t};Gr.unstable_batchedUpdates(()=>{Qe==null||Qe(at),m({type:"onDragMove",event:at})})},[Zt.x,Zt.y]),u.useEffect(()=>{const{active:Qe,activatorEvent:vt,collisions:bt,droppableContainers:mn,scrollAdjustedTranslate:_t}=Me.current;if(!Qe||P.current==null||!vt||!_t)return;const{onDragOver:at}=Q.current,Mt=mn.get(xn),Fn=Mt&&Mt.rect.current?{id:Mt.id,rect:Mt.rect.current,data:Mt.data,disabled:Mt.disabled}:null,Ge={active:Qe,activatorEvent:vt,collisions:bt,delta:{x:_t.x,y:_t.y},over:Fn};Gr.unstable_batchedUpdates(()=>{tn(Fn),at==null||at(Ge),m({type:"onDragOver",event:Ge})})},[xn]),fn(()=>{Me.current={activatorEvent:he,active:K,activeNode:xe,collisionRect:hn,collisions:en,droppableRects:de,draggableNodes:E,draggingNode:Ve,draggingNodeRect:Z,droppableContainers:L,over:gt,scrollableAncestors:H,scrollAdjustedTranslate:Zt},ae.current={initial:Z,translated:hn}},[K,xe,en,hn,E,Ve,Z,de,L,gt,H,Zt]),c1({...We,delta:M,draggingRect:hn,pointerCoordinates:se,scrollableAncestors:H,scrollableAncestorRects:G});const Ue=u.useMemo(()=>({active:K,activeNode:xe,activeNodeRect:te,activatorEvent:he,collisions:en,containerNodeRect:we,dragOverlay:ce,draggableNodes:E,droppableContainers:L,droppableRects:de,over:gt,measureDroppableContainers:ie,scrollableAncestors:H,scrollableAncestorRects:G,measuringConfiguration:R,measuringScheduled:Oe,windowRect:D}),[K,xe,te,he,en,we,ce,E,L,de,gt,ie,H,G,R,Oe,D]),Ml=u.useMemo(()=>({activatorEvent:he,activators:yt,active:K,activeNodeRect:te,ariaDescribedById:{draggable:ee},dispatch:g,draggableNodes:E,over:gt,measureDroppableContainers:ie}),[he,yt,K,te,g,ee,E,gt,ie]);return Pe.createElement(Wh.Provider,{value:b},Pe.createElement(_l.Provider,{value:Ml},Pe.createElement(ax.Provider,{value:Ue},Pe.createElement(ja.Provider,{value:F},d)),Pe.createElement(T1,{disabled:(i==null?void 0:i.restoreFocus)===!1})),Pe.createElement(Lv,{...i,hiddenTextDescribedById:ee}));function ws(){const Qe=(J==null?void 0:J.autoScrollEnabled)===!1,vt=typeof c=="object"?c.enabled===!1:c===!1,bt=C&&!Qe&&!vt;return typeof c=="object"?{...c,enabled:bt}:{enabled:bt}}}),z1=u.createContext(null),Gd="button",P1="Draggable";function L1(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const o=El(P1),{activators:a,activatorEvent:i,active:c,activeNodeRect:d,ariaDescribedById:p,draggableNodes:f,over:h}=u.useContext(_l),{role:x=Gd,roleDescription:v="draggable",tabIndex:y=0}=s!=null?s:{},w=(c==null?void 0:c.id)===t,g=u.useContext(w?ja:z1),[m,b]=Uo(),[S,j]=Uo(),C=k1(a,t),k=hl(n);fn(()=>(f.set(t,{id:t,key:o,node:m,activatorNode:S,data:k}),()=>{const M=f.get(t);M&&M.key===o&&f.delete(t)}),[f,t]);const E=u.useMemo(()=>({role:x,tabIndex:y,"aria-disabled":r,"aria-pressed":w&&x===Gd?!0:void 0,"aria-roledescription":v,"aria-describedby":p.draggable}),[r,x,y,w,v,p.draggable]);return{active:c,activatorEvent:i,activeNodeRect:d,attributes:E,isDragging:w,listeners:r?void 0:C,node:m,over:h,setNodeRef:b,setActivatorNodeRef:j,transform:g}}function ux(){return u.useContext(ax)}const I1="Droppable",O1={timeout:25};function $1(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const o=El(I1),{active:a,dispatch:i,over:c,measureDroppableContainers:d}=u.useContext(_l),p=u.useRef({disabled:n}),f=u.useRef(!1),h=u.useRef(null),x=u.useRef(null),{disabled:v,updateMeasurementsFor:y,timeout:w}={...O1,...s},g=hl(y!=null?y:r),m=u.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(g.current)?g.current:[g.current]),x.current=null},w)},[w]),b=ka({callback:m,disabled:v||!a}),S=u.useCallback((E,M)=>{b&&(M&&(b.unobserve(M),f.current=!1),E&&b.observe(E))},[b]),[j,C]=Uo(S),k=hl(t);return u.useEffect(()=>{!b||!j.current||(b.disconnect(),f.current=!1,b.observe(j.current))},[j,b]),u.useEffect(()=>(i({type:et.RegisterDroppable,element:{id:r,key:o,disabled:n,node:j,rect:h,data:k}}),()=>i({type:et.UnregisterDroppable,key:o,id:r})),[r]),u.useEffect(()=>{n!==p.current.disabled&&(i({type:et.SetDroppableDisabled,id:r,key:o,disabled:n}),p.current.disabled=n)},[r,o,n,i]),{active:a,rect:h,isOver:(c==null?void 0:c.id)===r,node:j,over:c,setNodeRef:C}}function A1(e){let{animation:t,children:n}=e;const[r,s]=u.useState(null),[o,a]=u.useState(null),i=Ho(n);return!n&&!r&&i&&s(i),fn(()=>{if(!o)return;const c=r==null?void 0:r.key,d=r==null?void 0:r.props.id;if(c==null||d==null){s(null);return}Promise.resolve(t(d,o)).then(()=>{s(null)})},[t,r,o]),Pe.createElement(Pe.Fragment,null,n,r?u.cloneElement(r,{ref:a}):null)}const F1={x:0,y:0,scaleX:1,scaleY:1};function B1(e){let{children:t}=e;return Pe.createElement(_l.Provider,{value:ox},Pe.createElement(ja.Provider,{value:F1},t))}const U1={position:"fixed",touchAction:"none"},H1=e=>ba(e)?"transform 250ms ease":void 0,W1=u.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:o,className:a,rect:i,style:c,transform:d,transition:p=H1}=e;if(!i)return null;const f=s?d:{...d,scaleX:1,scaleY:1},h={...U1,width:i.width,height:i.height,top:i.top,left:i.left,transform:On.Transform.toString(f),transformOrigin:s&&r?Ov(r,i):void 0,transition:typeof p=="function"?p(r):p,...c};return Pe.createElement(n,{className:a,style:h,ref:t},o)}),V1=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:o,className:a}=e;if(o!=null&&o.active)for(const[i,c]of Object.entries(o.active))c!==void 0&&(s[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,c));if(o!=null&&o.dragOverlay)for(const[i,c]of Object.entries(o.dragOverlay))c!==void 0&&r.node.style.setProperty(i,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,d]of Object.entries(s))n.node.style.setProperty(c,d);a!=null&&a.active&&n.node.classList.remove(a.active)}},X1=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:On.Transform.toString(t)},{transform:On.Transform.toString(n)}]},K1={duration:250,easing:"ease",keyframes:X1,sideEffects:V1({styles:{active:{opacity:"0"}}})};function Y1(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return va((o,a)=>{if(t===null)return;const i=n.get(o);if(!i)return;const c=i.node.current;if(!c)return;const d=lx(a);if(!d)return;const{transform:p}=Et(a).getComputedStyle(a),f=Yh(p);if(!f)return;const h=typeof t=="function"?t:Q1(t);return tx(c,s.draggable.measure),h({active:{id:o,data:i.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function Q1(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...K1,...e};return o=>{let{active:a,dragOverlay:i,transform:c,...d}=o;if(!t)return;const p={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},f={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/i.rect.height:1},h={x:c.x-p.x,y:c.y-p.y,...f},x=s({...d,active:a,dragOverlay:i,transform:{initial:c,final:h}}),[v]=x,y=x[x.length-1];if(JSON.stringify(v)===JSON.stringify(y))return;const w=r==null?void 0:r({active:a,dragOverlay:i,...d}),g=i.node.animate(x,{duration:t,easing:n,fill:"forwards"});return new Promise(m=>{g.onfinish=()=>{w==null||w(),m()}})}}let qd=0;function G1(e){return u.useMemo(()=>{if(e!=null)return qd++,qd},[e])}const dx=Pe.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:o,modifiers:a,wrapperElement:i="div",className:c,zIndex:d=999}=e;const{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggableNodes:v,droppableContainers:y,dragOverlay:w,over:g,measuringConfiguration:m,scrollableAncestors:b,scrollableAncestorRects:S,windowRect:j}=ux(),C=u.useContext(ja),k=G1(f==null?void 0:f.id),E=ix(a,{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggingNodeRect:w.rect,over:g,overlayNodeRect:w.rect,scrollableAncestors:b,scrollableAncestorRects:S,transform:C,windowRect:j}),M=fu(h),L=Y1({config:r,draggableNodes:v,droppableContainers:y,measuringConfiguration:m}),$=M?w.setRef:void 0;return Pe.createElement(B1,null,Pe.createElement(A1,{animation:L},f&&k?Pe.createElement(W1,{key:k,id:f.id,ref:$,as:i,activatorEvent:p,adjustScale:t,className:c,transition:o,rect:M,style:{zIndex:d,...s},transform:E},n):null))});function Sa(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function q1(e,t){return e.reduce((n,r,s)=>{const o=t.get(r);return o&&(n[s]=o),n},Array(e.length))}function Kl(e){return e!==null&&e>=0}function J1(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Z1(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const fx=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const o=Sa(t,r,n),a=t[s],i=o[s];return!i||!a?null:{x:i.left-a.left,y:i.top-a.top,scaleX:i.width/a.width,scaleY:i.height/a.height}},Yl={scaleX:1,scaleY:1},px=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:a}=e;const i=(t=o[n])!=null?t:r;if(!i)return null;if(s===n){const d=o[a];return d?{x:0,y:n<a?d.top+d.height-(i.top+i.height):d.top-i.top,...Yl}:null}const c=e0(o,s,n);return s>n&&s<=a?{x:0,y:-i.height-c,...Yl}:s<n&&s>=a?{x:0,y:i.height+c,...Yl}:{x:0,y:0,...Yl}};function e0(e,t,n){const r=e[t],s=e[t-1],o=e[t+1];return r?n<t?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const hx="Sortable",xx=Pe.createContext({activeIndex:-1,containerId:hx,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:fx,disabled:{draggable:!1,droppable:!1}});function mx(e){let{children:t,id:n,items:r,strategy:s=fx,disabled:o=!1}=e;const{active:a,dragOverlay:i,droppableRects:c,over:d,measureDroppableContainers:p}=ux(),f=El(hx,n),h=i.rect!==null,x=u.useMemo(()=>r.map(C=>typeof C=="object"&&"id"in C?C.id:C),[r]),v=a!=null,y=a?x.indexOf(a.id):-1,w=d?x.indexOf(d.id):-1,g=u.useRef(x),m=!J1(x,g.current),b=w!==-1&&y===-1||m,S=Z1(o);fn(()=>{m&&v&&p(x)},[m,x,v,p]),u.useEffect(()=>{g.current=x},[x]);const j=u.useMemo(()=>({activeIndex:y,containerId:f,disabled:S,disableTransforms:b,items:x,overIndex:w,useDragOverlay:h,sortedRects:q1(x,c),strategy:s}),[y,f,S.draggable,S.droppable,b,x,w,c,h,s]);return Pe.createElement(xx.Provider,{value:j},t)}const t0=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return Sa(n,r,s).indexOf(t)},n0=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:o,newIndex:a,previousItems:i,previousContainerId:c,transition:d}=e;return!d||!r||i!==o&&s===a?!1:n?!0:a!==s&&t===c},r0={duration:200,easing:"ease"},gx="transform",s0=On.Transition.toString({property:gx,duration:0,easing:"linear"}),l0={roleDescription:"sortable"};function o0(e){let{disabled:t,index:n,node:r,rect:s}=e;const[o,a]=u.useState(null),i=u.useRef(n);return fn(()=>{if(!t&&n!==i.current&&r.current){const c=s.current;if(c){const d=bs(r.current,{ignoreTransform:!0}),p={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(p.x||p.y)&&a(p)}}n!==i.current&&(i.current=n)},[t,n,r,s]),u.useEffect(()=>{o&&a(null)},[o]),o}function yx(e){let{animateLayoutChanges:t=n0,attributes:n,disabled:r,data:s,getNewIndex:o=t0,id:a,strategy:i,resizeObserverConfig:c,transition:d=r0}=e;const{items:p,containerId:f,activeIndex:h,disabled:x,disableTransforms:v,sortedRects:y,overIndex:w,useDragOverlay:g,strategy:m}=u.useContext(xx),b=a0(r,x),S=p.indexOf(a),j=u.useMemo(()=>({sortable:{containerId:f,index:S,items:p},...s}),[f,s,S,p]),C=u.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:k,node:E,isOver:M,setNodeRef:L}=$1({id:a,data:j,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...c}}),{active:$,activatorEvent:ae,activeNodeRect:K,attributes:P,setNodeRef:J,listeners:be,isDragging:he,over:A,setActivatorNodeRef:Q,transform:ee}=L1({id:a,data:j,attributes:{...l0,...n},disabled:b.draggable}),ge=kv(L,J),R=!!$,de=R&&!v&&Kl(h)&&Kl(w),ie=!g&&he,Oe=ie&&de?ee:null,xe=i!=null?i:m,_e=de?Oe!=null?Oe:xe({rects:y,activeNodeRect:K,activeIndex:h,overIndex:w,index:S}):null,We=Kl(h)&&Kl(w)?o({id:a,items:p,activeIndex:h,overIndex:w}):S,V=$==null?void 0:$.id,te=u.useRef({activeId:V,items:p,newIndex:We,containerId:f}),we=p!==te.current.items,Me=t({active:$,containerId:f,isDragging:he,isSorting:R,id:a,index:S,items:p,newIndex:te.current.newIndex,previousItems:te.current.items,previousContainerId:te.current.containerId,transition:d,wasDragging:te.current.activeId!=null}),Ye=o0({disabled:!Me,index:S,node:E,rect:k});return u.useEffect(()=>{R&&te.current.newIndex!==We&&(te.current.newIndex=We),f!==te.current.containerId&&(te.current.containerId=f),p!==te.current.items&&(te.current.items=p)},[R,We,f,p]),u.useEffect(()=>{if(V===te.current.activeId)return;if(V!=null&&te.current.activeId==null){te.current.activeId=V;return}const Ve=setTimeout(()=>{te.current.activeId=V},50);return()=>clearTimeout(Ve)},[V]),{active:$,activeIndex:h,attributes:P,data:j,rect:k,index:S,newIndex:We,items:p,isOver:M,isSorting:R,isDragging:he,listeners:be,node:E,overIndex:w,over:A,setNodeRef:ge,setActivatorNodeRef:Q,setDroppableNodeRef:L,setDraggableNodeRef:J,transform:Ye!=null?Ye:_e,transition:ce()};function ce(){if(Ye||we&&te.current.newIndex===S)return s0;if(!(ie&&!ba(ae)||!d)&&(R||Me))return On.Transition.toString({...d,property:gx})}}function a0(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}Se.Down,Se.Right,Se.Up,Se.Left;const Ne={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Jd={always:{label:"",color:"#6b9b6e",bg:"#e0f0e1"},keyword:{label:"",color:"#9b6b6b",bg:"#f0e0e0"},mood:{label:"",color:"#9b7a3b",bg:"#f0ebd8"},message_mode:{label:"",color:"#6b7b9b",bg:"#e0e6f0"}};function vx({activation:e}){const t=Jd[e]||Jd.always;return l.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:t.color,background:t.bg},children:t.label})}const Ql=80;function i0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),o=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const v="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=v,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Ql);x.style.transition=v,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>o(0),i=p=>{if(p.target.closest(".drag-handle"))return;const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,v=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(v)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(v),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Ql,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Ql)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?o(-Ql):o(0)};return l.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:l.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[l.jsx(Pr,{size:16,color:"white"}),l.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),l.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function c0({book:e,onTap:t,onDelete:n}){var p;const{attributes:r,listeners:s,setNodeRef:o,transform:a,transition:i,isDragging:c}=yx({id:String(e.id)}),d={transform:On.Transform.toString(a),transition:i,opacity:c?0:1};return l.jsx("div",{ref:o,style:d,className:"mb-3",children:l.jsx(i0,{onDelete:()=>n(e),children:l.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Ne.bg,userSelect:"none"},children:[l.jsx("div",{...r,...s,className:"drag-handle shrink-0 cursor-grab touch-none px-1",style:{cursor:c?"grabbing":"grab"},children:l.jsx(wl,{size:18,style:{color:Ne.textMuted}})}),l.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>t(e),children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:Ne.text},children:e.name}),l.jsx(vx,{activation:e.activation})]}),e.folder&&l.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:Ne.textMuted},children:e.folder}),e.activation==="keyword"&&((p=e.keywords)==null?void 0:p.length)>0&&l.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[e.keywords.slice(0,3).map((f,h)=>l.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(232,160,191,0.15)",color:Ne.accentDark},children:f},h)),e.keywords.length>3&&l.jsxs("span",{className:"text-[10px]",style:{color:Ne.textMuted},children:["+",e.keywords.length-3]})]})]}),l.jsx(ds,{size:16,style:{color:Ne.textMuted,flexShrink:0},onClick:()=>t(e)})]})})})}function u0({folder:e,books:t,onDelete:n,onTap:r,onReorder:s}){const[o,a]=u.useState(!0),[i,c]=u.useState(null),d=Vh(Ko(wa,{activationConstraint:{distance:5}}),Ko(du,{activationConstraint:{delay:200,tolerance:5}})),p=({active:h,over:x})=>{if(c(null),!x||h.id===x.id)return;const v=t.findIndex(g=>String(g.id)===String(h.id)),y=t.findIndex(g=>String(g.id)===String(x.id));if(v<0||y<0)return;const w=Sa(t,v,y);s(e,w)},f=i?t.find(h=>String(h.id)===String(i)):null;return l.jsxs("div",{className:"mb-4",children:[l.jsxs("button",{className:"mb-2 flex w-full items-center gap-2 px-1",onClick:()=>a(!o),children:[o?l.jsx(An,{size:14,style:{color:Ne.textMuted}}):l.jsx(ds,{size:14,style:{color:Ne.textMuted}}),l.jsx("span",{className:"text-[12px] font-bold tracking-wide",style:{color:Ne.textMuted},children:e||""}),l.jsx("span",{className:"ml-1 rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.12)",color:Ne.textMuted},children:t.length})]}),o&&l.jsxs(cx,{sensors:d,collisionDetection:Xh,onDragStart:({active:h})=>c(h.id),onDragEnd:p,children:[l.jsx(mx,{items:t.map(h=>String(h.id)),strategy:px,children:t.map(h=>l.jsx(c0,{book:h,onTap:r,onDelete:n},h.id))}),l.jsx(dx,{children:f&&l.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Ne.bg,boxShadow:"var(--card-shadow)"},children:[l.jsx("div",{className:"shrink-0 px-1",children:l.jsx(wl,{size:18,style:{color:Ne.textMuted}})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:Ne.text},children:f.name}),l.jsx(vx,{activation:f.activation})]}),f.folder&&l.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:Ne.textMuted},children:f.folder})]}),l.jsx(ds,{size:16,style:{color:Ne.textMuted,flexShrink:0}})]})})]})]})}function d0(){const e=It(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[o,a]=u.useState(null),[i,c]=u.useState(null),d=y=>{c(y),setTimeout(()=>c(null),2e3)},p=()=>{s(!0),O("/api/world-books").then(y=>n(y.world_books||[])).catch(()=>d("")).finally(()=>s(!1))};u.useEffect(()=>{p()},[]);const f=async y=>{a(null);try{await O(`/api/world-books/${y.id}`,{method:"DELETE"}),n(w=>w.filter(g=>g.id!==y.id)),d("")}catch(w){d("")}},h=(y,w)=>{const g=y||"";n(m=>[...m.filter(S=>(S.folder||"")!==g),...w]),O("/api/world-books/reorder",{method:"PUT",body:{ordered_ids:w.map(m=>m.id)}}).catch(()=>d(""))},x={};for(const y of t){const w=y.folder||"";x[w]||(x[w]=[]),x[w].push(y)}const v=Object.keys(x).sort((y,w)=>y===""?1:w===""?-1:y.localeCompare(w));return l.jsxs("div",{className:"flex h-full flex-col",style:{background:Ne.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full nm-active",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(Ct,{size:22,style:{color:Ne.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ne.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books/new"),children:l.jsx(ms,{size:20,style:{color:Ne.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?l.jsx("div",{className:"flex items-center justify-center py-20",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-t-transparent",style:{borderColor:Ne.accent,borderTopColor:"transparent"}})}):t.length===0?l.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[l.jsx(wl,{size:36,style:{color:Ne.textMuted,opacity:.5}}),l.jsx("p",{className:"text-[14px]",style:{color:Ne.textMuted},children:" + "})]}):v.map(y=>l.jsx(u0,{folder:y,books:x[y],onDelete:w=>a(w),onTap:w=>e(`/world-books/${w.id}`),onReorder:h},y))}),o&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>a(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Ne.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:y=>y.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Ne.text},children:""}),l.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Ne.textMuted},children:["",o.name,""]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)",color:Ne.text},onClick:()=>a(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>f(o),children:""})]})]})}),i&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const re={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function f0({label:e,value:t,onChange:n,placeholder:r}){return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:re.textMuted},children:e}),l.jsx("input",{type:"text",value:t,onChange:s=>n(s.target.value),placeholder:r,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:re.bg,color:re.text}})]})}function p0({value:e,onChange:t,folders:n}){const[r,s]=u.useState(!1),o=n.filter(a=>a!==e&&a.toLowerCase().includes(e.toLowerCase()));return l.jsxs("div",{className:"relative mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:re.textMuted},children:""}),l.jsx("input",{type:"text",value:e,onChange:a=>{t(a.target.value),s(!0)},onFocus:()=>s(!0),onBlur:()=>setTimeout(()=>s(!1),150),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:re.bg,color:re.text}}),r&&o.length>0&&l.jsx("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[160px] overflow-y-auto rounded-[14px]",style:{background:re.bg,boxShadow:"var(--card-shadow)"},children:o.map(a=>l.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:re.text},onMouseDown:()=>{t(a),s(!1)},children:a},a))})]})}function h0({value:e,onChange:t}){const n=[{value:"always",label:""},{value:"keyword",label:""},{value:"mood",label:""},{value:"message_mode",label:""}];return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:re.textMuted},children:""}),l.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:re.bg},children:n.map(r=>l.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:e===r.value?re.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?re.accentDark:re.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})]})}function x0({selected:e,onChange:t}){const n=[{value:"long",label:""},{value:"short",label:""}];return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:re.textMuted},children:""}),l.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:re.bg,minHeight:48},children:n.map(r=>{const s=e===r.value;return l.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?re.accentDark:re.bg,color:s?"white":re.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>t(r.value),children:r.label},r.value)})})]})}const m0=[{value:"happy",label:""},{value:"sad",label:""},{value:"angry",label:""},{value:"anxious",label:""},{value:"tired",label:""},{value:"emo",label:""},{value:"flirty",label:""},{value:"proud",label:""},{value:"calm",label:""}];function g0({selected:e,onChange:t}){const n=r=>{e.includes(r)?t(e.filter(s=>s!==r)):t([...e,r])};return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:re.textMuted},children:""}),l.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:re.bg,minHeight:48},children:m0.map(r=>{const s=e.includes(r.value);return l.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?re.accentDark:re.bg,color:s?"white":re.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>n(r.value),children:r.label},r.value)})})]})}function y0({keywords:e,onChange:t}){const[n,r]=u.useState(""),s=()=>{const o=n.trim();if(!o||e.includes(o)){r("");return}t([...e,o]),r("")};return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:re.textMuted},children:""}),l.jsxs("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:re.bg,minHeight:48},children:[e.map(o=>l.jsxs("span",{className:"flex items-center gap-1 rounded-full px-2.5 py-1 text-[12px] font-medium",style:{background:"rgba(232,160,191,0.2)",color:re.accentDark},children:[o,l.jsx("button",{onClick:()=>t(e.filter(a=>a!==o)),children:l.jsx(Sl,{size:10})})]},o)),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"text",value:n,onChange:o=>r(o.target.value),onKeyDown:o=>{(o.key==="Enter"||o.key===",")&&(o.preventDefault(),s())},placeholder:"...",className:"w-24 bg-transparent text-[12px] outline-none",style:{color:re.text}}),n.trim()&&l.jsx("button",{className:"flex h-5 w-5 items-center justify-center rounded-full",style:{background:re.accentDark},onClick:s,children:l.jsx(ms,{size:10,color:"white"})})]})]}),l.jsx("p",{className:"mt-1 text-[10px]",style:{color:re.textMuted},children:" Enter "})]})}function v0({value:e,onChange:t,onClose:n}){return l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:re.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:re.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:re.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:l.jsx(ir,{size:18,style:{color:re.accentDark}})})]}),l.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:re.bg,color:re.text},placeholder:"..."})]})}function Zd(){const e=It(),{id:t}=Rh(),n=!t,[r,s]=u.useState(""),[o,a]=u.useState(""),[i,c]=u.useState("always"),[d,p]=u.useState([]),[f,h]=u.useState("long"),[x,v]=u.useState(""),[y,w]=u.useState(!1),[g,m]=u.useState(!n),[b,S]=u.useState(null),[j,C]=u.useState([]),[k,E]=u.useState(!1),M=u.useRef(null),L=K=>{var be;const P=(be=K.target.files)==null?void 0:be[0];if(!P)return;const J=new FileReader;J.onload=he=>v(he.target.result||""),J.readAsText(P),K.target.value=""},$=K=>{S(K),setTimeout(()=>S(null),2e3)};u.useEffect(()=>{O("/api/world-books").then(K=>{const P=K.world_books||[];if(C([...new Set(P.map(J=>J.folder).filter(Boolean))]),!n){const J=P.find(be=>String(be.id)===String(t));J&&(s(J.name),a(J.folder||""),c(J.activation),p(J.keywords||[]),h(J.message_mode||"long"),v(J.content))}}).catch(()=>$("")).finally(()=>m(!1))},[t,n]);const ae=async()=>{if(!r.trim()){$("");return}w(!0);try{const K={name:r.trim(),folder:o.trim()||null,activation:i,keywords:i==="keyword"||i==="mood"?d:[],message_mode:i==="message_mode"?f:null,content:x};n?(await O("/api/world-books",{method:"POST",body:K}),$("")):(await O(`/api/world-books/${t}`,{method:"PUT",body:K}),$(""))}catch(K){$(": "+K.message)}finally{w(!1)}};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:re.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:re.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books",{replace:!0}),children:l.jsx(Ct,{size:22,style:{color:re.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:re.text},children:n?"":""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:re.bg,boxShadow:y?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:ae,disabled:y,children:l.jsx(jl,{size:18,style:{color:re.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:g?l.jsx("div",{className:"flex h-40 items-center justify-center",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:re.accent,borderTopColor:"transparent"}})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"rounded-[20px] p-5 mb-4",style:{background:re.bg,boxShadow:"var(--card-shadow)"},children:[l.jsx(f0,{label:"",value:r,onChange:s,placeholder:""}),l.jsx(p0,{value:o,onChange:a,folders:j}),l.jsx(h0,{value:i,onChange:c}),i==="keyword"&&l.jsx(y0,{keywords:d,onChange:p}),i==="mood"&&l.jsx(g0,{selected:d,onChange:p}),i==="message_mode"&&l.jsx(x0,{selected:f,onChange:h})]}),l.jsxs("div",{className:"rounded-[20px] p-5",style:{background:re.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[l.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:re.textMuted},children:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:re.bg},onClick:()=>{var K;return(K=M.current)==null?void 0:K.click()},title:"",children:l.jsx(xa,{size:13,style:{color:re.textMuted}})}),l.jsx("input",{ref:M,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:L}),l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:re.bg},onClick:()=>E(!0),title:"",children:l.jsx(kl,{size:13,style:{color:re.accentDark}})})]})]}),l.jsx("textarea",{value:x,onChange:K=>v(K.target.value),placeholder:"...",rows:10,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:re.bg,color:re.text}})]})]})}),k&&l.jsx(v0,{value:x,onChange:v,onClose:()=>E(!1)}),b&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:b})})]})}const Xe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Gl=80;function b0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),o=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const v="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=v,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Gl);x.style.transition=v,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>o(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,v=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(v)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(v),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Gl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Gl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?o(-Gl):o(0)};return l.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Xe.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:l.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[l.jsx(Pr,{size:16,color:"white"}),l.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),l.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function w0({assistant:e,localAvatar:t,onTap:n}){var s;const r=t||null;return l.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Xe.bg,userSelect:"none"},onClick:()=>n(e),children:[l.jsx("div",{className:"shrink-0 rounded-full",style:{width:48,height:48,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Xe.bg},children:r?l.jsx("img",{src:r,alt:"",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{className:"text-[20px]",style:{color:Xe.accentDark},children:((s=e.name)==null?void 0:s[0])||"?"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"truncate text-[15px] font-bold",style:{color:Xe.text},children:e.name}),e.created_at&&l.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:Xe.textMuted},children:e.created_at.slice(0,10)})]}),l.jsx(ds,{size:16,style:{color:Xe.textMuted,flexShrink:0}})]})}function k0(){const e=It(),[t,n]=u.useState([]),[r,s]=u.useState({}),[o,a]=u.useState(!0),[i,c]=u.useState(null),[d,p]=u.useState(null),f=v=>{p(v),setTimeout(()=>p(null),2e3)},h=()=>{a(!0),O("/api/assistants").then(async v=>{const y=v.assistants||[];n(y);const w={};await Promise.all(y.map(async g=>{const m=await gs(`assistant-avatar-${g.id}`).catch(()=>null);m&&(w[g.id]=m)})),s(w)}).catch(()=>f("")).finally(()=>a(!1))};u.useEffect(()=>{h()},[]);const x=async v=>{c(null);try{await O(`/api/assistants/${v.id}`,{method:"DELETE"}),n(y=>y.filter(w=>w.id!==v.id)),f("")}catch(y){f("")}};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:Xe.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Xe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(Ct,{size:22,style:{color:Xe.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:Xe.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Xe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants/new"),children:l.jsx(ms,{size:20,style:{color:Xe.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8 pt-5",children:o?l.jsx("div",{className:"flex items-center justify-center py-20",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Xe.accent,borderTopColor:"transparent"}})}):t.length===0?l.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[l.jsx(Oh,{size:36,style:{color:Xe.textMuted,opacity:.5}}),l.jsx("p",{className:"text-[14px]",style:{color:Xe.textMuted},children:" + "})]}):t.map(v=>l.jsx(b0,{onDelete:()=>c(v),children:l.jsx(w0,{assistant:v,localAvatar:r[v.id],onTap:y=>e(`/assistants/${y.id}`)})},v.id))}),i&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>c(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Xe.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:v=>v.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Xe.text},children:""}),l.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Xe.textMuted},children:["",i.name,""]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Xe.bg,boxShadow:"var(--card-shadow-sm)",color:Xe.text},onClick:()=>c(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>x(i),children:""})]})]})}),d&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:d})})]})}const T={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function ef({label:e,value:t,onChange:n,placeholder:r,rows:s,onExpand:o,onHistory:a}){const i=u.useRef(null),c=d=>{var h;const p=(h=d.target.files)==null?void 0:h[0];if(!p)return;const f=new FileReader;f.onload=x=>n(x.target.result||""),f.readAsText(p),d.target.value=""};return l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[l.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:T.textMuted},children:e}),l.jsxs("div",{className:"flex items-center gap-2",children:[a&&l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:T.bg},onClick:a,children:l.jsx(Fh,{size:13,style:{color:T.textMuted}})}),l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:T.bg},onClick:()=>{var d;return(d=i.current)==null?void 0:d.click()},children:l.jsx(xa,{size:13,style:{color:T.textMuted}})}),l.jsx("input",{ref:i,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:c}),l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:T.bg},onClick:o,children:l.jsx(kl,{size:13,style:{color:T.accentDark}})})]})]}),l.jsx("textarea",{value:t,onChange:d=>n(d.target.value),placeholder:r,rows:s||6,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:T.bg,color:T.text}})]})}function ri({label:e,value:t,onChange:n,presets:r}){const[s,o]=u.useState(!1),a=r.find(i=>i.id===t);return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:T.textMuted},children:e}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:T.bg,color:T.text},onClick:()=>o(!s),children:[l.jsx("span",{style:{color:a?T.text:T.textMuted},children:a?a.name:""}),l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:T.textMuted,transform:s?"rotate(180deg)":"none",transition:"transform 0.2s"},children:l.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&l.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:T.bg,boxShadow:"var(--card-shadow)",zIndex:40},children:[l.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:T.textMuted},onClick:()=>{n(null),o(!1)},children:""}),r.map(i=>l.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[14px]",style:{color:T.text},onClick:()=>{n(i.id),o(!1)},children:[l.jsx("span",{children:i.name}),i.id===t&&l.jsx(Sn,{size:14,style:{color:T.accentDark}})]},i.id))]})]})]})}function si({value:e,onChange:t,onClose:n,title:r,placeholder:s}){return l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:T.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:T.text},children:r||""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:l.jsx(ir,{size:18,style:{color:T.accentDark}})})]}),l.jsx("textarea",{autoFocus:!0,value:e,onChange:o=>t(o.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:T.bg,color:T.text},placeholder:s||""})]})}const ql=80;function j0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),o=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const v="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=v,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/ql);x.style.transition=v,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>o(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,v=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(v)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(v),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-ql,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/ql)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?o(-ql):o(0)};return l.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:l.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[l.jsx(Pr,{size:16,color:"white"}),l.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),l.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function S0({title:e,message:t,onConfirm:n,onCancel:r}){return l.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:r,children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:T.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:s=>s.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:T.text},children:e||""}),l.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:T.textMuted},children:t}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)",color:T.text},onClick:r,children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:n,children:""})]})]})})}function N0({items:e,currentContent:t,onApply:n,onClose:r,onDelete:s}){const[o,a]=u.useState("current"),[i,c]=u.useState(null),[d,p]=u.useState(null),f=x=>x?new Date(x).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",h=async()=>{if(o==="current"){r();return}const x=e.find(v=>v.id===o);x&&await n(x.content),r()};return i?l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:T.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsxs("span",{className:"text-[15px] font-bold",style:{color:T.text},children:[" ",i.version]}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>c(null),children:l.jsx(ir,{size:18,style:{color:T.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:l.jsx("div",{className:"rounded-[14px] p-4",style:{boxShadow:"var(--inset-shadow)",background:T.bg},children:l.jsx("p",{className:"whitespace-pre-wrap text-[13px] leading-relaxed",style:{color:T.text},children:i.content})})})]}):l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:T.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:T.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},onClick:r,children:l.jsx(ir,{size:18,style:{color:T.accentDark}})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[l.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:o==="current"?"var(--inset-shadow)":"var(--card-shadow-sm)",background:T.bg},children:[l.jsx("button",{onClick:()=>a("current"),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:o==="current"?T.accentDark:T.bg,boxShadow:o==="current"?"none":"var(--icon-inset)"},children:o==="current"&&l.jsx(Sn,{size:12,color:"white"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[13px] font-semibold",style:{color:T.text},children:""}),l.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#2a9d5c",background:"rgba(42,157,92,0.12)"},children:""})]}),l.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:T.textMuted},children:t})]})]}),e.length===0&&l.jsx("p",{className:"py-8 text-center text-[13px]",style:{color:T.textMuted},children:""}),e.map(x=>l.jsx("div",{className:"mb-2",children:l.jsx(j0,{onDelete:()=>p(x.id),children:l.jsxs("div",{className:"flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:o===x.id?"var(--inset-shadow)":"var(--card-shadow-sm)",background:T.bg},children:[l.jsx("button",{onClick:()=>a(x.id),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:o===x.id?T.accentDark:T.bg,boxShadow:o===x.id?"none":"var(--icon-inset)"},children:o===x.id&&l.jsx(Sn,{size:12,color:"white"})}),l.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>c(x),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("span",{className:"text-[13px] font-semibold",style:{color:T.text},children:[" ",x.version]}),l.jsx("span",{className:"text-[10px]",style:{color:T.textMuted},children:f(x.created_at)})]}),l.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:T.textMuted},children:x.content})]})]})})},x.id))]}),l.jsx("div",{className:"shrink-0 p-5",children:l.jsx("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:h,children:""})}),d&&l.jsx(S0,{message:"",onCancel:()=>p(null),onConfirm:()=>{s(d),p(null)}})]})}function bx(e){return e==="always"?"":e==="keyword"?"":e==="message_mode"?"":""}function wx(e){return!e||!Array.isArray(e)?[]:e.map((t,n)=>typeof t=="object"&&t!==null?t:{id:t,position:"after",sort_order:n})}function C0({item:e,book:t,position:n,sectionList:r,onRemove:s,onChangePosition:o}){const{attributes:a,listeners:i,setNodeRef:c,transform:d,transition:p,isDragging:f}=yx({id:String(e.id)}),h={transform:On.Transform.toString(d),transition:p,opacity:f?0:1};return t?l.jsxs("div",{ref:c,style:h,className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",children:[l.jsx("div",{...a,...i,className:"cursor-grab touch-none p-1",style:{cursor:f?"grabbing":"grab"},children:l.jsx(wl,{size:14,style:{color:T.textMuted}})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:T.text},children:t.name}),l.jsxs("div",{className:"text-[10px]",style:{color:T.textMuted},children:[bx(t.activation),t.folder?`  ${t.folder}`:""]})]}),l.jsx("button",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(136,136,160,0.1)",color:T.textMuted},onClick:()=>o(e.id,n==="before"?"after":"before"),children:n==="before"?"":""}),l.jsx("button",{onClick:()=>s(e.id),children:l.jsx(Sl,{size:14,style:{color:T.textMuted}})})]}):null}function E0({allBooks:e,mountedIds:t,onClose:n,onConfirm:r}){const[s,o]=u.useState(new Set(t)),a={};e.forEach(d=>{const p=d.folder||"";a[p]||(a[p]=[]),a[p].push(d)});const i=d=>{o(p=>{const f=new Set(p);return f.has(d)?f.delete(d):f.add(d),f})},c=d=>{const p=d.every(f=>s.has(f.id));o(f=>{const h=new Set(f);return p?d.forEach(x=>h.delete(x.id)):d.forEach(x=>h.add(x.id)),h})};return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-end",style:{background:"rgba(0,0,0,0.4)"},children:l.jsxs("div",{className:"flex w-full flex-col rounded-t-[24px]",style:{background:T.bg,maxHeight:"82vh"},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between p-5 pb-3",children:[l.jsx("h3",{className:"text-[16px] font-bold",style:{color:T.text},children:""}),l.jsx("button",{onClick:n,children:l.jsx(Sl,{size:20,style:{color:T.textMuted}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5",children:Object.entries(a).map(([d,p])=>{const f=p.every(h=>s.has(h.id));return l.jsxs("div",{className:"mb-5",children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[l.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:T.textMuted},children:d}),l.jsx("button",{className:"rounded-full px-2.5 py-1 text-[11px] font-semibold",style:{background:f?"rgba(201,98,138,0.15)":"rgba(136,136,160,0.1)",color:f?T.accentDark:T.textMuted},onClick:()=>c(p),children:f?"":""})]}),l.jsx("div",{className:"space-y-2",children:p.map(h=>{const x=s.has(h.id);return l.jsxs("button",{className:"flex w-full items-center gap-3 rounded-[14px] p-3",style:{background:T.bg,boxShadow:x?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>i(h.id),children:[l.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:x?T.accentDark:T.bg,boxShadow:x?"none":"var(--icon-inset)"},children:x&&l.jsx(Sn,{size:12,color:"white"})}),l.jsx("div",{className:"flex-1 min-w-0 text-left",children:l.jsx("div",{className:"truncate text-[13px] font-medium",style:{color:x?T.accentDark:T.text},children:h.name})}),l.jsx("span",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.1)",color:T.textMuted},children:bx(h.activation)})]},h.id)})})]},d)})}),l.jsx("div",{className:"shrink-0 p-5",children:l.jsxs("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>r([...s]),children:[" ",s.size,""]})})]})})}function _0({ruleSetIds:e,onChange:t,allBooks:n}){const[r,s]=u.useState(!1),[o,a]=u.useState(null),i=wx(e),c=i.filter(j=>j.position==="before").sort((j,C)=>j.sort_order-C.sort_order),d=i.filter(j=>j.position==="after").sort((j,C)=>j.sort_order-C.sort_order),p=j=>n.find(C=>C.id===j||C.id===Number(j)),f=Vh(Ko(wa,{activationConstraint:{distance:5}}),Ko(du,{activationConstraint:{delay:150,tolerance:5}})),h=({active:j})=>a(j.id),x=({active:j,over:C})=>{if(!C)return;const k=i.find(M=>String(M.id)===String(j.id)),E=i.find(M=>String(M.id)===String(C.id));if(!(!k||!E)&&k.position!==E.position){const M=i.map(L=>String(L.id)===String(k.id)?{...L,position:E.position}:L);t(M)}},v=({active:j,over:C})=>{if(a(null),!C||j.id===C.id)return;const k=i.find(P=>String(P.id)===String(j.id)),E=i.find(P=>String(P.id)===String(C.id));if(!k||!E||k.position!==E.position)return;const M=k.position==="before"?[...c]:[...d],L=M.findIndex(P=>String(P.id)===String(j.id)),$=M.findIndex(P=>String(P.id)===String(C.id)),ae=Sa(M,L,$).map((P,J)=>({...P,sort_order:J})),K=i.filter(P=>P.position!==k.position);t([...K,...ae])},y=j=>t(i.filter(C=>C.id!==j)),w=(j,C)=>{const E=(C==="before"?c:d).length;t(i.map(M=>M.id===j?{...M,position:C,sort_order:E}:M))},g=j=>{const C=i.map($=>$.id),E=j.filter($=>!C.includes($)).map(($,ae)=>({id:$,position:"after",sort_order:d.length+ae})),M=new Set(C.filter($=>!j.includes($))),L=i.filter($=>!M.has($.id));t([...L,...E])},m=(j,C)=>j.length===0?l.jsx("div",{className:"py-3 text-center text-[12px]",style:{color:T.textMuted},children:""}):l.jsx(mx,{items:j.map(k=>String(k.id)),strategy:px,children:l.jsx("div",{className:"rounded-[14px] px-2 pt-1",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},children:j.map((k,E)=>l.jsxs("div",{children:[E>0&&l.jsx("div",{className:"mx-2",style:{height:1,background:"rgba(0,0,0,0.06)"}}),l.jsx(C0,{item:k,book:p(k.id),position:C,sectionList:j,onRemove:y,onChangePosition:w})]},k.id))})}),b=o?i.find(j=>String(j.id)===String(o)):null,S=b?p(b.id):null;return l.jsxs(cx,{sensors:f,collisionDetection:Xh,onDragStart:h,onDragOver:x,onDragEnd:v,children:[l.jsxs("div",{className:"mb-1",children:[l.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:T.textMuted},children:"System Prompt "}),m(c,"before")]}),l.jsxs("div",{className:"my-4 flex items-center gap-2",children:[l.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}}),l.jsx("span",{className:"rounded-full px-3 py-1 text-[11px] font-bold",style:{background:"rgba(232,160,191,0.15)",color:T.accentDark},children:"System Prompt"}),l.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:T.textMuted},children:"System Prompt "}),m(d,"after")]}),l.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-3 text-[14px] font-semibold",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)",color:T.accentDark},onClick:()=>s(!0),children:[l.jsx(ms,{size:16})," "]}),l.jsx(dx,{children:S&&l.jsxs("div",{className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",style:{background:T.bg,boxShadow:"var(--card-shadow)",opacity:.9},children:[l.jsx(wl,{size:14,style:{color:T.textMuted}}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:T.accentDark},children:S.name})})]})}),r&&l.jsx(E0,{allBooks:n,mountedIds:i.map(j=>j.id),onClose:()=>s(!1),onConfirm:j=>{g(j),s(!1)}})]})}function tf(){const e=It(),{id:t}=Rh(),n=!t,[r,s]=u.useState("basic"),[o,a]=u.useState(""),[i,c]=u.useState(""),[d,p]=u.useState(""),[f,h]=u.useState(null),[x,v]=u.useState(null),[y,w]=u.useState(null),[g,m]=u.useState(""),[b,S]=u.useState(""),[j,C]=u.useState(null),[k,E]=u.useState(null),[M,L]=u.useState([]),[$,ae]=u.useState([]),[K,P]=u.useState([]),[J,be]=u.useState(!1),[he,A]=u.useState(!n),[Q,ee]=u.useState(null),[ge,R]=u.useState(!1),[de,ie]=u.useState(!1),[Oe,xe]=u.useState(!1),[_e,We]=u.useState(null),[V,te]=u.useState([]),we=u.useRef(null),Me=u.useRef(null),Ye=D=>{var ne;const H=(ne=D.target.files)==null?void 0:ne[0];if(!H)return;const G=new FileReader;G.onload=se=>p(se.target.result||""),G.readAsText(H),D.target.value=""},ce=D=>{ee(D),setTimeout(()=>ee(null),2500)},Ve=async D=>{const H=D==="human"?j:k;if(!H){ce("");return}try{const G=await O(`/api/core-blocks/${H}/history`);te(G.history||[]),We(D)}catch(G){ce("")}};u.useEffect(()=>{(async()=>{const[H,G]=await Promise.all([O("/api/presets").catch(()=>({presets:[]})),O("/api/world-books").catch(()=>({world_books:[]}))]);if(ae(H.presets||[]),P(G.world_books||[]),n)A(!1);else try{const[ne,se]=await Promise.all([O(`/api/assistants/${t}`),O(`/api/core-blocks?assistant_id=${t}`).catch(()=>({blocks:[]}))]);a(ne.name||""),gs(`assistant-avatar-${t}`).then(pe=>{pe&&c(pe)}).catch(function(){}),p(ne.system_prompt||""),h(ne.model_preset_id||null),v(ne.summary_model_preset_id||null),w(ne.summary_fallback_preset_id||null),L(ne.rule_set_ids||[]);for(const pe of se.blocks||[])pe.block_type==="human"?(m(pe.content||""),C(pe.id)):pe.block_type==="persona"&&(S(pe.content||""),E(pe.id))}catch(ne){ce(": "+ne.message)}finally{A(!1)}})()},[t,n]);const Z=D=>{var ne;const H=(ne=D.target.files)==null?void 0:ne[0];if(!H)return;const G=new FileReader;G.onload=async se=>{const pe=se.target.result,Re=`assistant-avatar-${t||"new"}`;try{await sc(Re,pe),c(pe)}catch(Ot){ce("")}},G.readAsDataURL(H),D.target.value=""},B=async()=>{if(!o.trim()){ce("");return}be(!0);try{const D={name:o.trim(),avatar_url:i?`assistant-avatar-${t||"new"}`:null,system_prompt:d,model_preset_id:f,summary_model_preset_id:x,summary_fallback_preset_id:y,rule_set_ids:wx(M)};let H=t;if(n?(H=(await O("/api/assistants",{method:"POST",body:{name:o.trim()}})).id,i&&(await sc(`assistant-avatar-${H}`,i),D.avatar_url=`assistant-avatar-${H}`),await O(`/api/assistants/${H}`,{method:"PUT",body:D})):await O(`/api/assistants/${t}`,{method:"PUT",body:D}),j)await O(`/api/core-blocks/${j}`,{method:"PUT",body:{content:g}});else if(g.trim()){const G=await O("/api/core-blocks",{method:"POST",body:{block_type:"human",assistant_id:Number(H),content:g}});C(G.id)}if(k)await O(`/api/core-blocks/${k}`,{method:"PUT",body:{content:b}});else if(b.trim()){const G=await O("/api/core-blocks",{method:"POST",body:{block_type:"persona",assistant_id:Number(H),content:b}});E(G.id)}ce("")}catch(D){ce(": "+D.message)}finally{be(!1)}},fe=[{key:"basic",label:""},{key:"about",label:"Core Blocks"},{key:"books",label:""}];return l.jsxs("div",{className:"flex h-full flex-col",style:{background:T.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants",{replace:!0}),children:l.jsx(Ct,{size:22,style:{color:T.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:T.text},children:n?"":""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:T.bg,boxShadow:J?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:B,disabled:J,children:l.jsx(jl,{size:18,style:{color:T.accentDark}})})]}),l.jsx("div",{className:"flex shrink-0 gap-1 px-5 pb-3",children:fe.map(D=>l.jsx("button",{className:"flex-1 rounded-[12px] py-2.5 text-[13px] font-semibold transition-all",style:{background:r===D.key?T.bg:"transparent",boxShadow:r===D.key?"var(--card-shadow-sm)":"none",color:r===D.key?T.accentDark:T.textMuted},onClick:()=>s(D.key),children:D.label},D.key))}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:he?l.jsx("div",{className:"flex h-40 items-center justify-center",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:T.accent,borderTopColor:"transparent"}})}):l.jsxs(l.Fragment,{children:[r==="basic"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-4 flex items-center gap-4 rounded-[20px] p-4",style:{background:T.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var D;return(D=we.current)==null?void 0:D.click()},children:[l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:T.bg},children:i?l.jsx("img",{src:i,alt:"",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{className:"text-[24px]",style:{color:T.accentDark},children:(o==null?void 0:o[0])||"?"})})}),l.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:T.accentDark},children:l.jsx($h,{size:9,color:"white"})})]}),l.jsx("input",{ref:we,type:"file",accept:"image/*",className:"hidden",onChange:Z}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:T.textMuted},children:""}),l.jsx("input",{type:"text",value:o,onChange:D=>a(D.target.value),placeholder:"",className:"w-full rounded-[12px] px-4 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:T.bg,color:T.text}})]})]}),l.jsxs("div",{className:"mb-4 rounded-[20px] p-4",style:{background:T.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[l.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:T.textMuted},children:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:T.bg},onClick:()=>{var D;return(D=Me.current)==null?void 0:D.click()},title:"",children:l.jsx(xa,{size:13,style:{color:T.textMuted}})}),l.jsx("input",{ref:Me,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:Ye}),l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:T.bg},onClick:()=>R(!0),title:"",children:l.jsx(kl,{size:13,style:{color:T.accentDark}})})]})]}),l.jsx("textarea",{value:d,onChange:D=>p(D.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:T.bg,color:T.text}})]}),l.jsxs("div",{className:"rounded-[20px] p-4",style:{background:T.bg,boxShadow:"var(--card-shadow)"},children:[l.jsx(ri,{label:"",value:f,onChange:h,presets:$}),l.jsx(ri,{label:"",value:x,onChange:v,presets:$}),l.jsx(ri,{label:"",value:y,onChange:w,presets:$})]})]}),r==="about"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-4 rounded-[20px] p-4",style:{background:T.bg,boxShadow:"var(--card-shadow)"},children:l.jsx(ef,{label:"human block",value:g,onChange:m,placeholder:" AI ...",rows:7,onExpand:()=>ie(!0),onHistory:()=>Ve("human")})}),l.jsx("div",{className:"rounded-[20px] p-4",style:{background:T.bg,boxShadow:"var(--card-shadow)"},children:l.jsx(ef,{label:"persona block",value:b,onChange:S,placeholder:"AI ...",rows:7,onExpand:()=>xe(!0),onHistory:()=>Ve("persona")})})]}),r==="books"&&l.jsx("div",{className:"rounded-[20px] p-4",style:{background:T.bg,boxShadow:"var(--card-shadow)"},children:l.jsx(_0,{ruleSetIds:M,onChange:L,allBooks:K})})]})}),ge&&l.jsx(si,{value:d,onChange:p,onClose:()=>R(!1),title:"",placeholder:"..."}),de&&l.jsx(si,{value:g,onChange:m,onClose:()=>ie(!1),title:"human block",placeholder:" AI ..."}),Oe&&l.jsx(si,{value:b,onChange:S,onClose:()=>xe(!1),title:"persona block",placeholder:"AI ..."}),_e&&l.jsx(N0,{items:V,currentContent:_e==="human"?g:b,onApply:async D=>{const H=_e==="human"?j:k;try{await O(`/api/core-blocks/${H}`,{method:"PUT",body:{content:D}}),_e==="human"?m(D):S(D),ce("")}catch(G){ce("")}},onDelete:async D=>{try{await O(`/api/core-blocks/history/${D}`,{method:"DELETE"}),te(H=>H.filter(G=>G.id!==D)),ce("")}catch(H){ce("")}},onClose:()=>We(null)}),Q&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:Q})})]})}const oe={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function li({icon:e,label:t,hint:n,onClick:r}){return l.jsxs("button",{className:"flex w-full items-center gap-4 px-4 py-4",onClick:r,children:[l.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:oe.bg},children:e}),l.jsxs("div",{className:"flex-1 text-left",children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:oe.text},children:t}),n&&l.jsx("div",{className:"text-[11px]",style:{color:oe.textMuted},children:n})]}),l.jsx(ds,{size:16,style:{color:oe.textMuted}})]})}function nf(){return l.jsx("div",{className:"mx-4 h-px",style:{background:"rgba(136,136,160,0.15)"}})}function xr({value:e,onChange:t,min:n,max:r}){const[s,o]=u.useState(String(e));u.useEffect(()=>o(String(e)),[e]);const a=()=>{let i=parseInt(s);isNaN(i)&&(i=n),i=Math.max(n,Math.min(r,i)),o(String(i)),t(i)};return l.jsx("input",{type:"number",value:s,onChange:i=>o(i.target.value),onBlur:a,onKeyDown:i=>i.key==="Enter"&&a(),className:"w-20 rounded-[10px] py-2 text-center text-[14px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:oe.bg,color:oe.text},min:n,max:r})}function M0(){const e=It(),[t,n]=u.useState(()=>parseInt(localStorage.getItem("telegram_buffer_seconds")||"15")),[r,s]=u.useState(8),[o,a]=u.useState(8e3),[i,c]=u.useState(16e3),[d,p]=u.useState(800),[f,h]=u.useState(800),[x,v]=u.useState(2e3),[y,w]=u.useState(!1),[g,m]=u.useState(!1),[b,S]=u.useState(null),j=k=>{S(k),setTimeout(()=>S(null),2e3)};u.useEffect(()=>{O("/api/settings/context-budget").then(k=>{a(k.retain_budget),c(k.trigger_threshold),p(k.summary_budget_longterm),h(k.summary_budget_daily),v(k.summary_budget_recent),w(!0)}).catch(()=>w(!0))},[]),u.useEffect(()=>{localStorage.setItem("telegram_buffer_seconds",String(t)),O("/api/settings/buffer-seconds",{method:"PUT",body:{seconds:t}}).catch(()=>{})},[t]),u.useEffect(()=>{O("/api/settings/short-msg-max").then(k=>s(k.max_count||8)).catch(()=>{})},[]),u.useEffect(()=>{O("/api/settings/short-msg-max",{method:"PUT",body:{max_count:r}}).catch(()=>{})},[r]);const C=async()=>{m(!0);try{await O("/api/settings/context-budget",{method:"PUT",body:{retain_budget:o,trigger_threshold:i,summary_budget_longterm:d,summary_budget_daily:f,summary_budget_recent:x}}),j("")}catch(k){j("")}finally{m(!1)}};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:oe.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:oe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(Ct,{size:22,style:{color:oe.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:oe.text},children:""}),l.jsx("div",{className:"w-10"})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5 space-y-4",children:[l.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:oe.bg,boxShadow:"var(--card-shadow)"},children:[l.jsx(li,{icon:l.jsx(xv,{size:18,style:{color:oe.text}}),label:"API ",hint:"  ",onClick:()=>e("/settings/api")}),l.jsx(nf,{}),l.jsx(li,{icon:l.jsx(pv,{size:18,style:{color:oe.textMuted}}),label:"",hint:"",onClick:()=>j("")})]}),l.jsx("div",{className:"rounded-[20px] overflow-hidden",style:{background:oe.bg,boxShadow:"var(--card-shadow)"},children:l.jsx(li,{icon:l.jsx(fv,{size:18,style:{color:oe.text}}),label:"",hint:" AI ",onClick:()=>e("/settings/proactive")})}),l.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:oe.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[l.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:oe.bg},children:l.jsx(yv,{size:18,style:{color:oe.text}})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:oe.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:oe.textMuted},children:" ()"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(xr,{value:t,onChange:n,min:1,max:120}),l.jsx("span",{className:"text-[12px]",style:{color:oe.textMuted},children:""})]})]}),l.jsx(nf,{}),l.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[l.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:oe.bg},children:l.jsx(iv,{size:18,style:{color:oe.text}})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:oe.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:oe.textMuted},children:""})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(xr,{value:r,onChange:s,min:2,max:20}),l.jsx("span",{className:"text-[12px]",style:{color:oe.textMuted},children:""})]})]})]}),l.jsxs("div",{className:"rounded-[20px] p-4",style:{background:oe.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:oe.bg},children:l.jsx(lv,{size:18,style:{color:oe.text}})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:oe.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:oe.textMuted},children:""})]})]}),y?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:oe.text},children:" (tokens)"}),l.jsx("div",{className:"text-[10px]",style:{color:oe.textMuted},children:" token "})]}),l.jsx(xr,{value:o,onChange:a,min:1e3,max:1e5})]}),l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:oe.text},children:" (tokens)"}),l.jsx("div",{className:"text-[10px]",style:{color:oe.textMuted},children:""})]}),l.jsx(xr,{value:i,onChange:c,min:1e3,max:2e5})]}),l.jsx("div",{className:"h-px mb-4",style:{background:"rgba(136,136,160,0.15)"}}),l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:oe.bg},children:l.jsx(lu,{size:18,style:{color:oe.text}})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:oe.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:oe.textMuted},children:""})]})]}),l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:oe.text},children:" (tokens)"}),l.jsx("div",{className:"text-[10px]",style:{color:oe.textMuted},children:""})]}),l.jsx(xr,{value:d,onChange:p,min:200,max:5e3})]}),l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:oe.text},children:" (tokens)"}),l.jsx("div",{className:"text-[10px]",style:{color:oe.textMuted},children:""})]}),l.jsx(xr,{value:f,onChange:h,min:200,max:5e3})]}),l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:oe.text},children:" (tokens)"}),l.jsx("div",{className:"text-[10px]",style:{color:oe.textMuted},children:""})]}),l.jsx(xr,{value:x,onChange:v,min:500,max:2e4})]}),l.jsx("button",{className:"w-full rounded-[14px] py-3 text-[14px] font-bold text-white",style:{background:g?"rgba(201,98,138,0.5)":"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"3px 3px 8px rgba(201,98,138,0.3)"},onClick:C,disabled:g,children:g?"...":""})]}):l.jsx("div",{className:"flex justify-center py-4",children:l.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2",style:{borderColor:oe.accent,borderTopColor:"transparent"}})})]})]}),b&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:b})})]})}const U={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},T0=["claude-opus-4-6","claude-opus-4-5-20251101","claude-sonnet-4-6","claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001"];function D0(e){try{return new URL(e).hostname}catch(t){return e}}function rf({label:e,value:t,onChange:n,placeholder:r,password:s,disabled:o}){const[a,i]=u.useState(!1);return l.jsxs("div",{className:"mb-4",children:[e&&l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:U.textMuted},children:e}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:s&&!a?"password":"text",value:t,onChange:c=>n(c.target.value),placeholder:r,disabled:o,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none pr-12",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:o?U.textMuted:U.text,opacity:o?.5:1}}),s&&l.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>i(!a),children:a?l.jsx(av,{size:16,style:{color:U.textMuted}}):l.jsx(ov,{size:16,style:{color:U.textMuted}})})]})]})}function R0({value:e,onChange:t,options:n}){return l.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:U.bg},children:n.map(r=>l.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[12px] font-semibold transition-all",style:{background:e===r.value?U.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?U.accentDark:U.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})}function z0({value:e,onChange:t,options:n,placeholder:r}){const[s,o]=u.useState(!1),a=u.useRef(null);return u.useEffect(()=>{if(!s)return;const i=c=>{a.current&&!a.current.contains(c.target)&&o(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[s]),l.jsxs("div",{className:"relative",ref:a,children:[l.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:e?U.text:U.textMuted},onClick:()=>o(!s),children:[l.jsx("span",{className:"truncate",children:e||r||""}),l.jsx(An,{size:16,style:{color:U.textMuted,flexShrink:0,transform:s?"rotate(180deg)":"none"}})]}),s&&l.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:U.bg,boxShadow:"var(--card-shadow)"},children:n.map(i=>l.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[13px]",style:{color:U.text},onClick:()=>{t(i),o(!1)},children:[l.jsx("span",{className:"truncate",children:i}),i===e&&l.jsx(Sn,{size:12,style:{color:U.accentDark,flexShrink:0}})]},i))})]})}function P0({value:e,onChange:t}){const[n,r]=u.useState(!1),s=u.useRef(null);return u.useEffect(()=>{if(!n)return;const o=a=>{s.current&&!s.current.contains(a.target)&&r(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[n]),l.jsxs("div",{className:"relative",ref:s,children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",placeholder:"",value:e,onChange:o=>t(o.target.value),className:"w-full rounded-[14px] px-4 py-3 pr-10 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text}}),l.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>r(!n),children:l.jsx(An,{size:16,style:{color:U.textMuted}})})]}),n&&l.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:U.bg,boxShadow:"var(--card-shadow)"},children:T0.map(o=>l.jsx("button",{className:"flex w-full px-4 py-3 text-left text-[13px]",style:{color:U.text},onClick:()=>{t(o),r(!1)},children:o},o))})]})}function oi({value:e,onChange:t,min:n,max:r,step:s}){const[o,a]=u.useState(String(e));u.useEffect(()=>a(String(e)),[e]);const i=()=>{let c=parseFloat(o);isNaN(c)&&(c=n),c=Math.max(n,Math.min(r,c)),c=Math.round(c/s)*s,c=parseFloat(c.toFixed(4)),a(String(c)),t(c)};return l.jsx("input",{type:"number",value:o,onChange:c=>a(c.target.value),onBlur:i,onKeyDown:c=>c.key==="Enter"&&i(),step:s,min:n,max:r,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text}})}function sf({on:e,onToggle:t}){return l.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":U.bg,transition:"background 0.2s"},children:l.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function ai({children:e,className:t=""}){return l.jsx("div",{className:`rounded-[20px] p-5 mb-4 space-y-4 ${t}`,style:{background:U.bg,boxShadow:"var(--card-shadow)"},children:e})}function L0(){const e=It(),[t,n]=u.useState([]),[r,s]=u.useState([]),[o,a]=u.useState(!0),[i,c]=u.useState(""),[d,p]=u.useState(""),[f,h]=u.useState("api_key"),[x,v]=u.useState(""),[y,w]=u.useState([]),[g,m]=u.useState(!1),[b,S]=u.useState(1),[j,C]=u.useState(!1),[k,E]=u.useState(1),[M,L]=u.useState(!1),[$,ae]=u.useState(4096),[K,P]=u.useState(null),[J,be]=u.useState(0),[he,A]=u.useState(null),[Q,ee]=u.useState(!1),[ge,R]=u.useState(!1),[de,ie]=u.useState(""),[Oe,xe]=u.useState(!1),[_e,We]=u.useState(!1),[V,te]=u.useState(null),[we,Me]=u.useState(null),[Ye,ce]=u.useState(""),Ve=u.useRef(null),Z=u.useRef(!1),B=u.useRef(null),fe=u.useRef({});fe.current={baseUrl:i,apiKey:d,authType:f,modelName:x,temperature:b,tempEnabled:j,topP:k,topPEnabled:M,maxTokens:$,thinkingBudget:J,editingPreset:K,providers:t};const D=u.useCallback(F=>{A(F),setTimeout(()=>A(null),2500)},[]),H=u.useCallback(async()=>{try{const[F,ke]=await Promise.all([O("/api/providers"),O("/api/presets")]);n(F.providers||[]),s(ke.presets||[])}catch(F){D(": "+F.message)}finally{a(!1)}},[D]);u.useEffect(()=>{H()},[H]);const G=F=>{var ue,Te;P(F),v(F.model_name),C(F.temperature!=null),S((ue=F.temperature)!=null?ue:1),L(F.top_p!=null),E((Te=F.top_p)!=null?Te:1),ae(F.max_tokens),be(F.thinking_budget||0);const ke=t.find(yt=>yt.id===F.api_provider_id);ke&&(c(ke.base_url),p(ke.api_key),h(ke.auth_type||"api_key"))},ne=()=>{P(null),c(""),p(""),h("api_key"),v(""),S(1),C(!1),E(1),L(!1),ae(4096),be(0),w([])},se=async()=>{if(!i.trim()||!d.trim()){D(" API  Key");return}m(!0);try{const F=await fetch(`${i.trim().replace(/\/+$/,"")}/models`,{headers:{Authorization:`Bearer ${d.trim()}`}});if(!F.ok)throw new Error(`HTTP ${F.status}`);const ue=((await F.json()).data||[]).map(Te=>Te.id).sort();w(ue),D(ue.length?` ${ue.length} `:"")}catch(F){D(": "+F.message)}finally{m(!1)}},pe=async()=>{var F;if(!i.trim()||!d.trim()||!x.trim()){D(" API Key ");return}ee(!0);try{const ke=i.trim().replace(/\/+$/,""),ue={"Content-Type":"application/json",Authorization:`Bearer ${d.trim()}`};f==="oauth_token"&&(ue["anthropic-beta"]="claude-code-20250219,oauth-2025-04-20,fine-grained-tool-streaming-2025-05-14",ue["anthropic-dangerous-direct-browser-access"]="true",ue["x-app"]="cli");const Te=await fetch(`${ke}/chat/completions`,{method:"POST",headers:ue,body:JSON.stringify({model:x.trim(),max_tokens:10,messages:[{role:"user",content:"Hi"}]})});if(!Te.ok){const yt=await Te.json().catch(()=>({}));throw new Error(((F=yt.error)==null?void 0:F.message)||`HTTP ${Te.status}`)}D(" ")}catch(ke){D(": "+ke.message)}finally{ee(!1)}},Re=async F=>{const ke=fe.current,ue=ke.baseUrl.trim(),Te=ke.apiKey.trim(),yt=ke.authType,Ue=F.find(ws=>ws.base_url===ue);return Ue?((Ue.api_key!==Te||Ue.auth_type!==yt)&&await O(`/api/providers/${Ue.id}`,{method:"PUT",body:{api_key:Te,auth_type:yt}}),Ue.id):(await O("/api/providers",{method:"POST",body:{name:D0(ue),base_url:ue,api_key:Te,auth_type:yt}})).id},Ot=async(F,ke)=>{const ue=fe.current;if(!ue.baseUrl.trim()||!ue.apiKey.trim()||!ue.modelName.trim()){D("");return}We(!0);try{const Te=await Re(ue.providers),yt={name:F,model_name:ue.modelName.trim(),temperature:ue.tempEnabled?ue.temperature:null,top_p:ue.topPEnabled?ue.topP:null,max_tokens:Number(ue.maxTokens)||4096,thinking_budget:Number(ue.thinkingBudget)||0,api_provider_id:Te};ue.editingPreset&&!ke?(await O(`/api/presets/${ue.editingPreset.id}`,{method:"PUT",body:yt}),D("")):(await O("/api/presets",{method:"POST",body:yt}),D("")),await H()}catch(Te){D(": "+Te.message)}finally{We(!1)}},Zt=()=>{const F=de.trim();F&&(R(!1),Ot(F,Oe))},hn=()=>{K&&Ot(K.name,!1)},en=async()=>{if(V){try{await O(`/api/presets/${V.id}`,{method:"DELETE"}),D(""),(K==null?void 0:K.id)===V.id&&ne(),H()}catch(F){D(": "+F.message)}te(null)}},xn=async()=>{const F=Ye.trim();if(!(!F||!we)){try{await O(`/api/presets/${we.id}`,{method:"PUT",body:{name:F}}),D(""),H()}catch(ke){D("")}Me(null)}},gt=(F,ke)=>{Z.current=!1;const ue=F.touches?F.touches[0]:F;B.current={x:ue.clientX,y:ue.clientY},Ve.current=setTimeout(()=>{Z.current=!0,te(ke)},600)},tn=F=>{if(!B.current||!Ve.current)return;const ke=F.touches?F.touches[0]:F,ue=ke.clientX-B.current.x,Te=ke.clientY-B.current.y;ue*ue+Te*Te>100&&(clearTimeout(Ve.current),Ve.current=null)},fr=()=>clearTimeout(Ve.current);return l.jsxs("div",{className:"flex h-full flex-col",style:{background:U.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:l.jsx(Ct,{size:22,style:{color:U.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:U.text},children:"API "}),l.jsx("div",{className:"w-10"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:o?l.jsx("div",{className:"flex justify-center py-20",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:U.accent,borderTopColor:"transparent"}})}):l.jsxs(l.Fragment,{children:[l.jsxs(ai,{children:[l.jsx(rf,{label:"API ",value:i,onChange:c,placeholder:"https://api.openai.com/v1",disabled:f==="oauth_token"}),l.jsx(rf,{label:"API Key",value:d,onChange:p,placeholder:f==="oauth_token"?"sk-ant-oat01-...":"sk-...",password:!0}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:U.textMuted},children:""}),l.jsx(R0,{value:f,onChange:F=>{h(F),F==="oauth_token"&&c("https://api.anthropic.com/v1")},options:[{value:"api_key",label:" API Key"},{value:"oauth_token",label:"Setup Token"}]})]})]}),l.jsxs(ai,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:U.textMuted},children:""}),f==="oauth_token"?l.jsx(P0,{value:x,onChange:v}):l.jsx(z0,{value:x,onChange:v,options:y})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:pe,disabled:Q,children:[Q?l.jsx(Od,{size:14,className:"animate-spin"}):null,""]}),l.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text,opacity:f==="oauth_token"?.4:1},onClick:se,disabled:g||f==="oauth_token",children:[g?l.jsx(Od,{size:14,className:"animate-spin"}):l.jsx(ga,{size:14}),""]})]})]}),l.jsxs(ai,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:U.text},children:" (0-2)"}),l.jsx("div",{className:"text-[11px]",style:{color:U.textMuted},children:""})]}),l.jsx(sf,{on:j,onToggle:()=>C(!j)})]}),j&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[12px]",style:{color:U.textMuted},children:""}),l.jsx(oi,{value:b,onChange:S,min:0,max:2,step:.1})]}),l.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[14px] font-semibold",style:{color:U.text},children:"Top P (0-1)"}),l.jsx(sf,{on:M,onToggle:()=>L(!M)})]}),M&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[12px]",style:{color:U.textMuted},children:""}),l.jsx(oi,{value:k,onChange:E,min:0,max:1,step:.05})]}),l.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[14px] font-semibold",style:{color:U.text},children:"Max Tokens"}),l.jsx(oi,{value:$,onChange:ae,min:128,max:2e5,step:1})]}),l.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:U.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:U.textMuted},children:"Extended Thinking tokens"})]}),l.jsxs("select",{className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none appearance-none",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text,WebkitAppearance:"none",textAlignLast:"center"},value:J,onChange:F=>be(Number(F.target.value)),children:[l.jsx("option",{value:0,children:""}),l.jsx("option",{value:1024,children:"1024"}),l.jsx("option",{value:2048,children:"2048"}),l.jsx("option",{value:4096,children:"4096"}),l.jsx("option",{value:8192,children:"8192"}),l.jsx("option",{value:16384,children:"16384"})]})]})]}),l.jsxs("div",{className:"mb-4 space-y-3",children:[K?l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:hn,disabled:_e,children:[l.jsx(jl,{size:14}),_e?"...":""]}),l.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:()=>{xe(!0),ie(""),R(!0)},disabled:_e,children:[l.jsx(sv,{size:14}),""]})]}):l.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>{xe(!0),ie(""),R(!0)},disabled:_e,children:[l.jsx(ms,{size:14}),""]}),K&&l.jsx("button",{className:"w-full py-1 text-center text-[12px]",style:{color:U.textMuted},onClick:ne,children:""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"mb-3 text-[12px] font-bold uppercase tracking-wide",style:{color:U.textMuted},children:""}),r.length===0?l.jsx("div",{className:"rounded-[20px] py-8 text-center text-[13px]",style:{background:U.bg,boxShadow:"var(--card-shadow)",color:U.textMuted},children:""}):l.jsx("div",{className:"space-y-3",children:r.map(F=>{var ke,ue;return l.jsxs("div",{className:"rounded-[18px] p-4",style:{background:U.bg,boxShadow:(K==null?void 0:K.id)===F.id?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{Z.current||G(F)},onTouchStart:Te=>gt(Te,F),onTouchMove:tn,onTouchEnd:fr,onMouseDown:Te=>gt(Te,F),onMouseMove:tn,onMouseUp:fr,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-[14px] font-bold truncate",style:{color:(K==null?void 0:K.id)===F.id?U.accentDark:U.text},children:F.name}),l.jsx(ma,{size:12,style:{color:U.textMuted,flexShrink:0,marginLeft:8}})]}),l.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:U.textMuted},children:F.model_name}),l.jsxs("div",{className:"mt-1 text-[10px] font-mono",style:{color:U.textMuted},children:["T: ",(ke=F.temperature)!=null?ke:""," | Top-P: ",(ue=F.top_p)!=null?ue:""," | Max: ",F.max_tokens,F.thinking_budget?` | Think: ${F.thinking_budget}`:""]})]},F.id)})})]})]})}),ge&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>R(!1),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:U.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:F=>F.stopPropagation(),children:[l.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:U.text},children:""}),l.jsx("input",{type:"text",value:de,onChange:F=>ie(F.target.value),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text},autoFocus:!0,onKeyDown:F=>F.key==="Enter"&&Zt()}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:()=>R(!1),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:de.trim()?"linear-gradient(135deg, var(--accent), var(--accent-dark))":"rgba(201,98,138,0.3)"},onClick:Zt,disabled:!de.trim(),children:""})]})]})}),V&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>te(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:U.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:F=>F.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:U.text},children:""}),l.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:U.textMuted},children:["",V.name,""]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:()=>te(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:en,children:""})]})]})}),we&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>Me(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:U.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:F=>F.stopPropagation(),children:[l.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:U.text},children:""}),l.jsx("input",{autoFocus:!0,type:"text",value:Ye,onChange:F=>ce(F.target.value),className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text},onKeyDown:F=>F.key==="Enter"&&xn()}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:()=>Me(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))"},onClick:xn,children:""})]})]})}),he&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:he})})]})}const Je={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Jl({on:e,onToggle:t,disabled:n}){return l.jsx("button",{onClick:()=>!n&&t(),className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":Je.bg,transition:"background 0.2s",opacity:n?.4:1,cursor:n?"not-allowed":"pointer"},children:l.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function Ds({label:e,hint:t,value:n,onChange:r,min:s,max:o,step:a=1,disabled:i}){const[c,d]=u.useState(String(n));u.useEffect(()=>d(String(n)),[n]);const p=()=>{let f=parseFloat(c);isNaN(f)&&(f=s),f=Math.max(s,Math.min(o,f)),f=Math.round(f/a)*a,f=parseFloat(f.toFixed(a<1?1:0)),d(String(f)),r(f)};return l.jsxs("div",{className:"flex items-center justify-between",style:{opacity:i?.4:1,pointerEvents:i?"none":"auto"},children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:Je.text},children:e}),t&&l.jsx("div",{className:"text-[11px]",style:{color:Je.textMuted},children:t})]}),l.jsx("input",{type:"number",value:c,onChange:f=>d(f.target.value),onBlur:p,onKeyDown:f=>f.key==="Enter"&&p(),step:a,min:s,max:o,disabled:i,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:Je.bg,color:Je.text}})]})}function Zl({children:e}){return l.jsx("div",{className:"rounded-[20px] p-5 mb-4 space-y-4",style:{background:Je.bg,boxShadow:"var(--card-shadow)"},children:e})}function eo(){return l.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}})}function I0(){const e=It(),[t,n]=u.useState(!0),[r,s]=u.useState(!1),[o,a]=u.useState({enabled:!1,random_mode:!1,interval:30,min_gap:30,retry_enabled:!0,retry_gap:1.5,max_retries:8,voice_enabled:!1,voice_chance:30}),[i,c]=u.useState(null),d=u.useCallback(v=>{c(v),setTimeout(()=>c(null),2e3)},[]);u.useEffect(()=>{(async()=>{try{const v=await O("/api/settings/proactive");a(v)}catch(v){d(": "+v.message)}finally{n(!1)}})()},[d]);const p=async()=>{s(!0);try{await O("/api/settings/proactive",{method:"PUT",body:o}),d("")}catch(v){d(": "+v.message)}finally{s(!1)}},f=v=>a(y=>({...y,...v})),h=!o.enabled,x=o.random_mode&&o.enabled;return l.jsxs("div",{className:"flex h-full flex-col",style:{background:Je.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Je.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:l.jsx(Ct,{size:22,style:{color:Je.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:Je.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Je.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:p,disabled:r,children:l.jsx(jl,{size:18,style:{color:Je.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:t?l.jsx("div",{className:"flex justify-center py-20",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Je.accent,borderTopColor:"transparent"}})}):l.jsxs(l.Fragment,{children:[l.jsxs(Zl,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:Je.text},children:""}),l.jsx(Jl,{on:o.enabled,onToggle:()=>f({enabled:!o.enabled})})]}),o.enabled&&l.jsxs(l.Fragment,{children:[l.jsx(eo,{}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:Je.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:Je.textMuted},children:""})]}),l.jsx(Jl,{on:o.random_mode,onToggle:()=>f({random_mode:!o.random_mode})})]})]})]}),l.jsxs(Zl,{children:[l.jsx(Ds,{label:" ()",hint:" (10-60)",value:x?10:o.interval,onChange:v=>f({interval:v}),min:10,max:60,disabled:h||x}),l.jsx(eo,{}),l.jsx(Ds,{label:" ()",hint:" (15-120)",value:o.min_gap,onChange:v=>f({min_gap:v}),min:15,max:120,disabled:h||x})]}),l.jsxs(Zl,{children:[l.jsxs("div",{className:"flex items-center justify-between",style:{opacity:h?.4:1,pointerEvents:h?"none":"auto"},children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:Je.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:Je.textMuted},children:" = "})]}),l.jsx(Jl,{on:o.retry_enabled,onToggle:()=>f({retry_enabled:!o.retry_enabled}),disabled:h})]}),o.retry_enabled&&!h&&l.jsxs(l.Fragment,{children:[l.jsx(eo,{}),l.jsx(Ds,{label:" ()",hint:"0.5-4.0",value:o.retry_gap,onChange:v=>f({retry_gap:v}),min:.5,max:4,step:.1,disabled:x}),l.jsx(Ds,{label:"",hint:"1-15",value:o.max_retries,onChange:v=>f({max_retries:v}),min:1,max:15})]})]}),l.jsxs(Zl,{children:[l.jsxs("div",{className:"flex items-center justify-between",style:{opacity:h?.4:1,pointerEvents:h?"none":"auto"},children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:Je.text},children:""}),l.jsx(Jl,{on:o.voice_enabled,onToggle:()=>f({voice_enabled:!o.voice_enabled}),disabled:h})]}),o.voice_enabled&&!h&&l.jsxs(l.Fragment,{children:[l.jsx(eo,{}),l.jsx(Ds,{label:" (%)",hint:"0-100",value:o.voice_chance,onChange:v=>f({voice_chance:v}),min:0,max:100})]})]})]})}),i&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const ye={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Na={thinking:{bg:"rgba(168,130,200,0.12)",color:"#8860c8",label:""},tool_use:{bg:"rgba(232,160,60,0.12)",color:"#b8820a",label:""},tool_result:{bg:"rgba(80,160,200,0.12)",color:"#1a7ab0",label:""},injected_memories:{bg:"rgba(80,180,120,0.12)",color:"#3a8a5f",label:""},text:{bg:"rgba(232,160,191,0.08)",color:"#c9628a",label:""}},lf=[{key:"short",label:""},{key:"long",label:""}],O0=[{key:"happy",label:""},{key:"sad",label:""},{key:"angry",label:""},{key:"anxious",label:""},{key:"tired",label:""},{key:"emo",label:""},{key:"flirty",label:""},{key:"proud",label:""},{key:"calm",label:""}],of=300;function pu({block_type:e}){const t=Na[e]||{bg:"rgba(136,136,160,0.1)",color:ye.textMuted,label:e};return l.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:t.bg,color:t.color},children:t.label})}function kx({content:e}){const[t,n]=u.useState(!1),r=e.length>of;return l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:ye.text},children:r&&!t?e.slice(0,of)+"...":e}),r&&l.jsx("div",{className:"mt-1.5 flex justify-center",children:l.jsx("button",{className:"rounded-full px-3 py-0.5 text-[11px]",style:{color:ye.accentDark,background:"rgba(232,160,191,0.12)"},onClick:s=>{s.stopPropagation(),n(!t)},children:t?"":""})})]})}function $0({block:e,cacheKey:t,translateCache:n,collapsed:r}){const s=n.current.get(t),[o,a]=u.useState(s||null),[i,c]=u.useState(!!s),[d,p]=u.useState(!1),f=Na.thinking,h=async x=>{if(x.stopPropagation(),o){c(!i);return}p(!0);try{const v=await O("/api/cot/translate",{method:"POST",body:{text:e.content}});a(v.translated),c(!0),n.current.set(t,v.translated)}catch(v){console.error("Translation failed:",v),alert("")}finally{p(!1)}};return l.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:f.bg},children:[l.jsxs("div",{className:r?"flex items-center gap-2 min-w-0":"mb-1 flex items-center gap-2",children:[l.jsx(pu,{block_type:"thinking"}),r&&e.content&&l.jsx("span",{className:"truncate text-[10px] opacity-60",style:{color:"#8860c8"},children:e.content.slice(0,40)}),!r&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"flex-1"}),l.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#1a7ab0",background:"rgba(80,160,200,0.15)"},onClick:h,disabled:d,children:d?"...":i?"":""})]})]}),!r&&l.jsx(kx,{content:i&&o?o:e.content})]})}function A0({avatarUrl:e}){return l.jsx("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full overflow-hidden",style:{boxShadow:"var(--icon-inset)",background:ye.bg},children:e?l.jsx("img",{src:e,alt:"",className:"h-full w-full object-cover"}):l.jsx("span",{style:{fontSize:16},children:""})})}function ii(e){return e?e>=1e3?`${(e/1e3).toFixed(1)}k`:String(e):"0"}function F0(e){if(!e)return null;const t=e/1e3;return t>=100?`${Math.round(t)}s`:`${t.toFixed(1)}s`}function B0({prompt:e,completion:t,elapsedMs:n,hasToolCalls:r,cacheHit:s,totalInput:o}){if(!(e||t||n)&&!r)return null;const i=s?"rgba(220,120,160,0.12)":"rgba(80,160,120,0.12)",c=s?"#d478a0":"#3a8a5f";return l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:i,color:c},children:["",ii(e),o>0&&o!==e?`/${ii(o)}`:""]}),l.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(160,100,220,0.12)",color:"#8a5abf"},children:["",ii(t)]}),n?l.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(200,140,60,0.12)",color:"#b8820a"},children:F0(n)}):null]})}function U0(e){const t=[],n=[],r=[];for(const o of e)o.block_type==="tool_use"?n.push(o):o.block_type==="tool_result"?r.push(o):t.push(o);const s=[];for(let o=0;o<n.length;o++)s.push(n[o]),o<r.length&&s.push(r[o]);for(let o=n.length;o<r.length;o++)s.push(r[o]);return[...t,...s]}function H0({memories:e}){const[t,n]=u.useState(!1);if(!e||e.length===0)return null;const r=Na.injected_memories;return l.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:r.bg},children:[l.jsxs("button",{className:"flex w-full items-center gap-2",onClick:()=>n(!t),children:[l.jsx(pu,{block_type:"injected_memories"}),l.jsxs("span",{className:"text-[10px] font-semibold",style:{color:r.color},children:["(",e.length,")"]}),t?l.jsx(Ah,{size:12,style:{color:r.color}}):l.jsx(An,{size:12,style:{color:r.color}})]}),t&&l.jsx("div",{className:"mt-2 space-y-1",children:e.map(s=>l.jsxs("p",{className:"text-[11px] leading-relaxed",style:{color:ye.text},children:[l.jsxs("span",{style:{color:r.color,fontWeight:600},children:["#",s.id]})," ",s.content]},s.id))})]})}function W0({item:e,expanded:t,onToggle:n,live:r,avatarUrl:s,translateCache:o}){const[a,i]=u.useState(new Set),c=u.useRef(null),d=e.rounds.map(v=>({...v,blocks:U0(v.blocks.filter(y=>y.block_type!=="usage"))})).filter(v=>v.blocks.length>0),p=u.useMemo(()=>{if(!r||d.length===0)return null;const v=d[d.length-1];for(let y=v.blocks.length-1;y>=0;y--)if(v.blocks[y].block_type==="thinking"||v.blocks[y].block_type==="text")return`${v.round_index}:${y}`;return null},[r,d]);u.useEffect(()=>{r||i(new Set)},[r]);const f=d.length>0||e.injectedMemories&&e.injectedMemories.length>0,h=v=>{c.current={x:v.clientX,y:v.clientY}},x=(v,y)=>{if(!c.current)return;if(v.target.closest("button")){c.current=null;return}const w=Math.abs(v.clientX-c.current.x),g=Math.abs(v.clientY-c.current.y);c.current=null,w<10&&g<10&&i(m=>{const b=new Set(m);return b.has(y)?b.delete(y):b.add(y),b})};return l.jsxs("div",{className:"rounded-[18px] overflow-hidden",style:{background:ye.bg},children:[l.jsxs("button",{className:"flex w-full items-center gap-3 p-4",onClick:n,children:[l.jsx(A0,{avatarUrl:s}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r&&l.jsx("span",{className:"inline-block h-3 w-3 animate-spin rounded-full border-[1.5px]",style:{borderColor:ye.accentDark,borderTopColor:"transparent"}}),e.has_tool_calls&&l.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold",style:{background:"rgba(232,160,60,0.15)",color:"#b8820a"},children:""}),l.jsx(B0,{prompt:e.prompt_tokens||0,completion:e.completion_tokens||0,elapsedMs:e.elapsed_ms||0,hasToolCalls:e.has_tool_calls,cacheHit:e.cache_hit,totalInput:e.total_input||0}),l.jsx("span",{className:"text-[10px]",style:{color:ye.textMuted},children:e.created_at||""})]}),l.jsx("p",{className:"mt-0.5 truncate text-[13px]",style:{color:ye.text},children:e.preview||"()"})]}),t?l.jsx(Ah,{size:16,style:{color:ye.textMuted,flexShrink:0}}):l.jsx(An,{size:16,style:{color:ye.textMuted,flexShrink:0}})]}),t&&f&&l.jsxs("div",{className:"px-4 pb-4",children:[l.jsx(H0,{memories:e.injectedMemories}),d.map(v=>l.jsxs("div",{className:"mb-3",children:[d.length>1&&l.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[l.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}}),l.jsxs("span",{className:"text-[10px] font-semibold",style:{color:ye.textMuted},children:[" ",v.round_index+1]}),l.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}})]}),v.blocks.map((y,w)=>{const g=`${v.round_index}:${w}`,m=a.has(g)||g===p;if(y.block_type==="thinking")return l.jsx("div",{onPointerDown:h,onPointerUp:j=>x(j,g),children:l.jsx($0,{block:y,cacheKey:`${e.request_id}:${v.round_index}:${w}`,translateCache:o,collapsed:!m})},w);let b=y.content;if(y.block_type==="tool_use"&&y.tool_name==="write_diary")try{const j=JSON.parse(y.content);b=` ${j.title||""}${j.unlock_at?`
 ${j.unlock_at}`:""}`}catch(j){}const S=Na[y.block_type]||{bg:"rgba(136,136,160,0.08)",color:ye.textMuted,label:y.block_type};return l.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:S.bg},onPointerDown:h,onPointerUp:j=>x(j,g),children:[l.jsxs("div",{className:m?"mb-1 flex items-center gap-2":"flex items-center gap-2 min-w-0",children:[l.jsx(pu,{block_type:y.block_type}),y.tool_name&&l.jsx("span",{className:"text-[10px] font-mono shrink-0",style:{color:S.color},children:y.tool_name}),!m&&b&&l.jsx("span",{className:"truncate text-[10px] opacity-60",style:{color:S.color},children:b.slice(0,40)})]}),m&&l.jsx(kx,{content:b})]},w)})]},v.round_index))]})]})}function V0(){var ge;const e=It(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[o,a]=u.useState(new Set),[i,c]=u.useState(()=>localStorage.getItem("chat_mode")||"long"),[d,p]=u.useState(null),[f,h]=u.useState(!1),[x,v]=u.useState(new Set),[y,w]=u.useState(null),[g,m]=u.useState(null),b=u.useRef(null),S=u.useRef(new Map),[j,C]=u.useState(null),[k,E]=u.useState(!1),M=u.useRef(null),[L,$]=u.useState(0),ae=u.useRef(new Set),K=u.useRef(!1),P=u.useRef([]),[J,be]=u.useState(()=>localStorage.getItem("whisper_token")),he=u.useRef(null),A=()=>{s(!0),w(null),K.current=!1,O("/api/cot?limit=100").then(R=>{n(Array.isArray(R)?R:[]),K.current=!0;const de=P.current;if(P.current=[],de.length>0&&he.current)for(const ie of de)he.current(ie)}).catch(R=>{console.error("COT load error:",R),w(R.message||""),K.current=!0}).finally(()=>{s(!1);const R=localStorage.getItem("whisper_token");R&&R!==J&&be(R)})};u.useEffect(()=>{A()},[]),u.useEffect(()=>{O("/api/sessions?limit=1").then(R=>{var ie;const de=(ie=R.sessions)==null?void 0:ie[0];de!=null&&de.assistant_id&&gs(`assistant-avatar-${de.assistant_id}`).then(Oe=>{Oe&&m(Oe)}).catch(()=>{})}).catch(()=>{})},[]),u.useEffect(()=>{O("/api/settings/mood").then(R=>C(R.mood||"calm")).catch(()=>C("calm")),O("/api/pending-memories/count").then(R=>$(R.count||0)).catch(()=>{})},[]),u.useEffect(()=>{if(!k)return;const R=de=>{M.current&&!M.current.contains(de.target)&&E(!1)};return document.addEventListener("pointerdown",R),()=>document.removeEventListener("pointerdown",R)},[k]),u.useEffect(()=>{if(!J){console.log("[COT WS] No token yet, waiting...");return}const de=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/cot?token=${encodeURIComponent(J)}`;console.log("[COT WS] Connecting to",de);let ie,Oe,xe=!1;const _e=()=>{if(xe)return;ie=new WebSocket(de),b.current=ie,ie.onopen=()=>{console.log("[COT WS] Connected"),h(!0)};const We=V=>{var Ve;const{type:te,request_id:we}=V,Me=Z=>{const B=Z.findIndex(G=>G.request_id===we);return B>=0?[Z,B]:[[{request_id:we,created_at:new Date().toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),preview:"...",has_tool_calls:!1,rounds:[],injectedMemories:[]},...Z],0]},Ye=(Z,B)=>{const fe=Z.findIndex(H=>H.round_index===B);if(fe>=0)return[Z,fe];const D=[...Z,{round_index:B,blocks:[]}];return D.sort((H,G)=>H.round_index-G.round_index),[D,D.findIndex(H=>H.round_index===B)]},ce=Z=>{ae.current.has(Z)||a(B=>{if(B.has(Z))return B;const fe=new Set(B);return fe.add(Z),fe})};if(te==="tokens_update"){n(Z=>Z.map(B=>B.request_id===we?{...B,prompt_tokens:V.prompt_tokens||0,completion_tokens:V.completion_tokens||0,cache_hit:V.cache_hit||!1,total_input:V.total_input||0}:B));return}if(te==="replay_snapshot"){console.log("[COT] replay_snapshot",we,"thinking_rounds:",(Ve=V.rounds)==null?void 0:Ve.length,"text_len:",(V.text_preview||"").length),n(Z=>{let[B,fe]=Me(Z);B=[...B];const D={...B[fe]};if(V.rounds)for(const H of V.rounds){if(!H.thinking)continue;let[G,ne]=Ye([...D.rounds],H.round_index);const se={...G[ne],blocks:[...G[ne].blocks]},pe=se.blocks.findIndex(Re=>Re.block_type==="thinking");pe>=0?H.thinking.length>se.blocks[pe].content.length&&(se.blocks[pe]={...se.blocks[pe],content:H.thinking}):se.blocks.push({block_type:"thinking",content:H.thinking,tool_name:null}),G[ne]=se,D.rounds=G}if(V.text_preview){const H=D.rounds.length>0?D.rounds[D.rounds.length-1].round_index:0;let[G,ne]=Ye([...D.rounds],H);const se={...G[ne],blocks:[...G[ne].blocks]},pe=se.blocks.findIndex(Re=>Re.block_type==="text");pe>=0?V.text_preview.length>se.blocks[pe].content.length&&(se.blocks[pe]={...se.blocks[pe],content:V.text_preview}):se.blocks.push({block_type:"text",content:V.text_preview,tool_name:null}),G[ne]=se,D.rounds=G,(!D.preview||D.preview==="...")&&(D.preview=V.text_preview.slice(0,80))}return V.injected_memories&&(D.injectedMemories=V.injected_memories),V.prompt_tokens&&(D.prompt_tokens=V.prompt_tokens),V.completion_tokens&&(D.completion_tokens=V.completion_tokens),V.cache_hit&&(D.cache_hit=V.cache_hit),V.total_input&&(D.total_input=V.total_input),B[fe]=D,B}),v(Z=>new Set(Z).add(we)),ce(we);return}if(te==="done"){v(Z=>{const B=new Set(Z);return B.delete(we),B}),ae.current.delete(we),n(Z=>Z.map(B=>B.request_id===we?{...B,prompt_tokens:V.prompt_tokens||0,completion_tokens:V.completion_tokens||0,elapsed_ms:V.elapsed_ms||0,cache_hit:V.cache_hit||!1,total_input:V.total_input||0}:B));return}if(te==="injected_memories"){n(Z=>{let[B,fe]=Me(Z);return B=[...B],B[fe]={...B[fe],injectedMemories:V.memories||[]},B}),v(Z=>new Set(Z).add(we)),ce(we);return}if(te==="thinking_delta"){n(Z=>{let[B,fe]=Me(Z);B=[...B];const D={...B[fe]};let[H,G]=Ye([...D.rounds],V.round_index);const ne={...H[G],blocks:[...H[G].blocks]};let se=-1;for(let pe=ne.blocks.length-1;pe>=0;pe--)if(ne.blocks[pe].block_type==="thinking"){se=pe;break}return se>=0?ne.blocks[se]={...ne.blocks[se],content:ne.blocks[se].content+V.content}:ne.blocks.push({block_type:"thinking",content:V.content,tool_name:null}),H[G]=ne,D.rounds=H,B[fe]=D,B}),v(Z=>new Set(Z).add(we)),ce(we);return}if(te==="text_delta"){n(Z=>{let[B,fe]=Me(Z);B=[...B];const D={...B[fe]};let[H,G]=Ye([...D.rounds],V.round_index);const ne={...H[G],blocks:[...H[G].blocks]};let se=-1;for(let Re=ne.blocks.length-1;Re>=0;Re--)if(ne.blocks[Re].block_type==="text"){se=Re;break}se>=0?ne.blocks[se]={...ne.blocks[se],content:ne.blocks[se].content+V.content}:ne.blocks.push({block_type:"text",content:V.content,tool_name:null}),H[G]=ne,D.rounds=H;const pe=H.flatMap(Re=>Re.blocks.filter(Ot=>Ot.block_type==="text")).map(Re=>Re.content).join("");return(!D.preview||D.preview==="...")&&(D.preview=pe.slice(0,80)),B[fe]=D,B}),v(Z=>new Set(Z).add(we)),ce(we);return}if(te==="tool_use"||te==="tool_result"){n(Z=>{let[B,fe]=Me(Z);B=[...B];const D={...B[fe]};let[H,G]=Ye([...D.rounds],V.round_index);return H[G]={...H[G],blocks:[...H[G].blocks,{block_type:te,content:V.content,tool_name:V.tool_name}]},D.rounds=H,te==="tool_use"&&(D.has_tool_calls=!0),B[fe]=D,B}),v(Z=>new Set(Z).add(we)),ce(we);return}if(V.block_type){const{round_index:Z,block_type:B,content:fe,tool_name:D}=V;n(H=>{let[G,ne]=Me(H);G=[...G];const se={...G[ne]};let[pe,Re]=Ye([...se.rounds],Z);return pe[Re]={...pe[Re],blocks:[...pe[Re].blocks,{block_type:B,content:fe,tool_name:D}]},se.rounds=pe,B==="tool_use"&&(se.has_tool_calls=!0),B==="text"&&(!se.preview||se.preview==="...")&&(se.preview=fe.slice(0,80)),G[ne]=se,G}),v(H=>new Set(H).add(we)),ce(we)}};he.current=We,ie.onmessage=V=>{try{const te=JSON.parse(V.data);if(!K.current){P.current.push(te);return}We(te)}catch(te){}},ie.onclose=V=>{console.log("[COT WS] Disconnected, code:",V.code,"reason:",V.reason),h(!1),b.current=null,xe||(Oe=setTimeout(_e,3e3))},ie.onerror=V=>{console.error("[COT WS] Error:",V),ie.close()}};return _e(),()=>{xe=!0,clearTimeout(Oe),b.current&&(b.current.onclose=null,b.current.close())}},[J]);const Q=u.useRef(!0);u.useEffect(()=>{if(Q.current){Q.current=!1;return}localStorage.setItem("chat_mode",i);const R=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({...R,shortMode:i==="short"})),O("/api/settings/chat-mode",{method:"PUT",body:{mode:i}}).catch(()=>{})},[i]);const ee=R=>{C(R),E(!1),O("/api/settings/mood",{method:"PUT",body:{mood:R}}).catch(()=>{})};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:ye.bg},children:[l.jsxs("div",{className:"relative flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ye.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(Ct,{size:22,style:{color:ye.text}})}),l.jsx("h1",{className:"absolute inset-x-0 text-center text-[17px] font-bold pointer-events-none",style:{color:ye.text},children:"COT "}),l.jsxs("div",{className:"flex items-center gap-2",children:[f&&l.jsx("div",{className:"h-2 w-2 rounded-full",style:{background:"#2a9d5c"},title:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ye.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:A,disabled:r,children:l.jsx(ga,{size:16,style:{color:ye.accentDark},className:r?"animate-spin":""})})]})]}),l.jsx("div",{className:"shrink-0 pb-3",style:{paddingLeft:20,paddingRight:20},children:l.jsxs("div",{className:"flex items-stretch gap-4 justify-center",children:[l.jsxs("div",{className:"relative flex",ref:M,children:[l.jsx("button",{className:"flex w-[42px] shrink-0 items-center justify-center rounded-[14px]",style:{background:ye.bg,boxShadow:"var(--inset-shadow)"},onClick:()=>j&&E(!k),children:j?l.jsx("img",{src:`/miniapp/assets/mood/${j}.png`,alt:j,className:"h-6 w-6",style:{imageRendering:"pixelated"}}):l.jsx("div",{className:"h-6 w-6"})}),k&&l.jsx("div",{className:"absolute left-0 top-12 z-50 rounded-[16px] overflow-hidden",style:{background:ye.bg,boxShadow:"var(--card-shadow-sm)",width:174},children:O0.map((R,de)=>{const ie=Math.floor(de/3),Oe=de%3,xe=j===R.key;return l.jsxs("button",{className:"inline-flex flex-col items-center justify-center",style:{width:"calc(100% / 3)",padding:"8px 0 6px",background:xe?"rgba(232,160,191,0.18)":"transparent",boxShadow:[Oe<2?"inset -1px 0 0 rgba(136,136,160,0.12)":"",ie<2?"inset 0 -1px 0 rgba(136,136,160,0.12)":""].filter(Boolean).join(", ")||"none"},onClick:()=>ee(R.key),children:[l.jsx("img",{src:`/miniapp/assets/mood/${R.key}.png`,alt:R.label,className:"h-7 w-7",style:{imageRendering:"pixelated",filter:xe?"drop-shadow(0 0 3px #e8a0bf)":"none"}}),l.jsx("span",{className:"text-[10px] mt-0.5",style:{color:xe?"#d48aab":ye.textMuted},children:R.label})]},R.key)})})]}),l.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:ye.bg,width:160},children:lf.map(R=>l.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:i===R.key?ye.bg:"transparent",boxShadow:i===R.key?"var(--card-shadow-sm)":"none",color:i===R.key?ye.accentDark:ye.textMuted},onClick:()=>{R.key!==i&&p(R.key)},children:R.label},R.key))}),l.jsxs("div",{className:"relative flex",children:[l.jsx("button",{className:"flex w-[42px] shrink-0 items-center justify-center rounded-[14px]",style:{background:ye.bg,boxShadow:"var(--inset-shadow)"},onClick:()=>e("/pending-memories"),children:l.jsx("img",{src:"/miniapp/assets/decorations/.png",alt:"",className:"h-6",style:{imageRendering:"pixelated",objectFit:"contain"}})}),L>0&&l.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 min-w-[16px] items-center justify-center rounded-full px-1 text-[9px] font-bold text-white",style:{background:"#ef4444"},children:L>99?"99+":L})]})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8 pt-5",children:r?l.jsx("div",{className:"flex justify-center py-16",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:ye.accent,borderTopColor:"transparent"}})}):y?l.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[l.jsx(Id,{size:36,style:{color:"#ef4444",opacity:.5}}),l.jsx("p",{className:"text-[14px]",style:{color:"#ef4444"},children:y})]}):t.length===0?l.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[l.jsx(Id,{size:36,style:{color:ye.textMuted,opacity:.5}}),l.jsx("p",{className:"text-[14px]",style:{color:ye.textMuted},children:" COT "})]}):t.map(R=>l.jsx("div",{className:"mb-3 rounded-[18px]",style:{background:ye.bg,boxShadow:"var(--card-shadow-sm)"},children:l.jsx(W0,{item:R,expanded:o.has(R.request_id),onToggle:()=>{a(de=>{const ie=new Set(de);return ie.has(R.request_id)?(ie.delete(R.request_id),ae.current.add(R.request_id)):(ie.add(R.request_id),ae.current.delete(R.request_id)),ie})},live:x.has(R.request_id),avatarUrl:g,translateCache:S})},R.request_id))}),d&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>p(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:ye.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:R=>R.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:ye.text},children:""}),l.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:ye.textMuted},children:["",((ge=lf.find(R=>R.key===d))==null?void 0:ge.label)||d,""]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:ye.bg,boxShadow:"var(--card-shadow-sm)",color:ye.text},onClick:()=>p(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:ye.accentDark,boxShadow:"4px 4px 10px rgba(201,98,138,0.4)"},onClick:()=>{c(d),p(null)},children:""})]})]})})]})}const rt={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},to=80;function X0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),o=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const v="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=v,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/to);x.style.transition=v,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>o(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,v=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(v)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(v),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-to,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/to)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?o(-to):o(0)};return l.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:rt.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:l.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[l.jsx(Pr,{size:16,color:"white"}),l.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),l.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function K0({msg:e,roleLabel:t,roleColor:n,fmtTime:r,onDelete:s}){const[o,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);return u.useLayoutEffect(()=>{const p=d.current;p&&!o&&c(p.scrollHeight>p.clientHeight+1)},[e.content,o]),l.jsx(X0,{onDelete:s,children:l.jsxs("div",{className:"rounded-[18px] p-3",style:{background:rt.bg},children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:"text-[11px] font-semibold",style:{color:n(e.role)},children:t(e.role)}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[e.summarized&&l.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px] font-semibold",style:{background:"rgba(58,138,95,0.15)",color:"#2d7a4a"},children:""}),l.jsx("span",{className:"text-[10px]",style:{color:rt.textMuted},children:r(e.created_at)})]})]}),l.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:o?{color:rt.text}:{color:rt.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!o),children:e.content}),(i||o)&&l.jsx("div",{className:"mt-1 flex justify-center",children:l.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:"#d48aab",background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!o)},children:o?"":""})})]})})}function Y0(){const e=It(),[t,n]=u.useState([]),[r,s]=u.useState(null),[o,a]=u.useState(!0),[i,c]=u.useState(!1),d=async()=>{var y;a(!0);try{const g=(y=(await O("/api/sessions?limit=1")).sessions)==null?void 0:y[0];if(!g){a(!1);return}s(g.id);const m=await O(`/api/sessions/${g.id}/messages?limit=50`);n((m.messages||[]).reverse()),c(m.has_more||!1)}catch(w){console.error(w)}a(!1)};u.useEffect(()=>{d()},[]);const p=async y=>{if(r)try{await O(`/api/sessions/${r}/messages/${y}`,{method:"DELETE"}),n(w=>w.filter(g=>g.id!==y))}catch(w){console.error("Delete failed",w)}},f=async()=>{if(!r||!i||o)return;const y=t[t.length-1];if(y){a(!0);try{const w=await O(`/api/sessions/${r}/messages?limit=50&before_id=${y.id}`),g=(w.messages||[]).reverse();n(m=>[...m,...g]),c(w.has_more||!1)}catch(w){console.error(w)}a(!1)}},h=y=>{if(!y)return"";const w=new Date(y),g=new Date;return w.toDateString()===g.toDateString()?w.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):w.toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})},x=y=>y==="user"?"":y==="assistant"?"AI":"",v=y=>y==="user"?rt.accentDark:y==="assistant"?"#3a9b5c":rt.textMuted;return l.jsxs("div",{className:"flex h-full flex-col",style:{background:rt.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:rt.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(Ct,{size:22,style:{color:rt.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:rt.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:rt.bg,boxShadow:o?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:d,disabled:o,children:l.jsx(ga,{size:16,style:{color:rt.accentDark},className:o?"animate-spin":""})})]}),l.jsx("div",{className:"shrink-0 px-5 pb-2",children:l.jsx("p",{className:"text-[11px]",style:{color:rt.textMuted},children:""})}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:o&&t.length===0?l.jsx("div",{className:"flex justify-center py-16",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:rt.accent,borderTopColor:"transparent"}})}):t.length===0?l.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:rt.textMuted},children:""}):l.jsxs(l.Fragment,{children:[t.map(y=>l.jsx(K0,{msg:y,roleLabel:x,roleColor:v,fmtTime:h,onDelete:()=>p(y.id)},y.id)),i&&l.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:rt.bg,boxShadow:"var(--card-shadow-sm)",color:rt.accentDark},onClick:f,disabled:o,children:o?"...":""})]})})]})}const _={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Q0=[{key:"memories",label:""},{key:"summaries",label:""},{key:"messages",label:""}],af={identity:{color:"#7b5ea7",bg:"#ede4f7"},relationship:{color:"#c26a8a",bg:"#f7e0ea"},bond:{color:"#d48aab",bg:"#fce8f0"},conflict:{color:"#b5454a",bg:"#f5dede"},fact:{color:"#4a8ab5",bg:"#deedf5"},preference:{color:"#9b7a3b",bg:"#f0ebd8"},health:{color:"#4a9b6e",bg:"#ddf0e5"},task:{color:"#6b7b9b",bg:"#e0e6f0"},ephemeral:{color:"#9b9b9b",bg:"#ececec"},other:{color:"#8a7a6a",bg:"#efe8df"}},jx=[{value:"",label:""},{value:"identity",label:"identity"},{value:"relationship",label:"relationship"},{value:"bond",label:"bond"},{value:"conflict",label:"conflict"},{value:"fact",label:"fact"},{value:"preference",label:"preference"},{value:"health",label:"health"},{value:"task",label:"task"},{value:"ephemeral",label:"ephemeral"},{value:"other",label:"other"}],G0=[{value:"",label:""},{value:"sad",label:"sad"},{value:"angry",label:"angry"},{value:"anxious",label:"anxious"},{value:"tired",label:"tired"},{value:"emo",label:"emo"},{value:"happy",label:"happy"},{value:"flirty",label:"flirty"},{value:"proud",label:"proud"},{value:"calm",label:"calm"}],q0=[{value:"",label:""},{value:"user",label:""},{value:"assistant",label:""},{value:"system",label:""}];function yr(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),o=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?o:`${t.getMonth()+1}/${t.getDate()} ${o}`}function hu({text:e,keyword:t}){if(!t||!e)return l.jsx(l.Fragment,{children:e});const n=e.toLowerCase(),r=t.toLowerCase(),s=[];let o=0,a=n.indexOf(r,o);for(;a!==-1;)a>o&&s.push(l.jsx("span",{children:e.slice(o,a)},o)),s.push(l.jsx("span",{style:{color:_.accentDark,fontWeight:600},children:e.slice(a,a+r.length)},`h${a}`)),o=a+r.length,a=n.indexOf(r,o);return o<e.length&&s.push(l.jsx("span",{children:e.slice(o)},o)),l.jsx(l.Fragment,{children:s})}function Sx({selected:e}){return l.jsx("div",{className:"flex h-5 w-5 shrink-0 items-center justify-center rounded-full",style:e?{background:_.accentDark,boxShadow:"0 2px 6px rgba(201,98,138,0.3)"}:{background:_.bg,boxShadow:"var(--inset-shadow)"},children:e&&l.jsx(Sn,{size:12,color:"white",strokeWidth:3})})}function Nx({title:e="",message:t,confirmLabel:n="",confirmColor:r="#ff4d6d",onConfirm:s,onCancel:o}){return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:o,children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:_.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:a=>a.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:_.text},children:e}),l.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:_.textMuted},children:t}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.text},onClick:o,children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:r,boxShadow:`4px 4px 10px ${r}66`},onClick:s,children:n})]})]})})}function J0({label:e,rawIds:t,dailyGroups:n}){const[r,s]=u.useState(!1),o=u.useRef(null);return u.useEffect(()=>{if(!r)return;const a=i=>{o.current&&!o.current.contains(i.target)&&s(!1)};return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}},[r]),l.jsxs("span",{className:"relative inline-flex items-center",ref:o,children:[l.jsx("span",{className:"inline-block rounded-full px-1.5 py-0.5 text-[9px] font-medium cursor-pointer",style:{background:"rgba(232,160,100,0.15)",color:"#c47a30"},onClick:a=>{a.stopPropagation(),s(!r)},children:e}),r&&l.jsxs("div",{className:"absolute left-0 top-full mt-1 z-30 rounded-[10px] p-2.5 min-w-[140px] max-w-[220px]",style:{background:_.bg,boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},onClick:a=>a.stopPropagation(),children:[t.length>0&&l.jsxs("div",{className:"mb-1.5",children:[l.jsx("p",{className:"text-[10px] font-semibold mb-0.5",style:{color:_.text},children:""}),l.jsx("p",{className:"text-[9px] leading-relaxed",style:{color:_.textMuted},children:t.map(a=>`#${a}`).join(", ")})]}),n.map((a,i)=>l.jsxs("div",{className:i>0||t.length>0?"mt-1.5":"",children:[l.jsxs("p",{className:"text-[10px] font-semibold mb-0.5",style:{color:_.text},children:[" daily v",a.version]}),l.jsx("p",{className:"text-[9px] leading-relaxed",style:{color:_.textMuted},children:a.ids.map(c=>`#${c}`).join(", ")})]},i))]})]})}function Z0({items:e,onApply:t,onClose:n,onDelete:r}){var h;const[s,o]=u.useState(null),[a,i]=u.useState(null),[c,d]=u.useState(null),p=x=>x?new Date(x).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",f=async()=>{if(!s)return;const x=e.find(v=>v.id===s);x&&await t(x),n()};return a?l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:_.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsxs("span",{className:"text-[15px] font-bold",style:{color:_.text},children:["v",a.version]}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>i(null),children:l.jsx(ir,{size:18,style:{color:_.accentDark}})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:[((h=a.merged_summary_ids)==null?void 0:h.length)>0&&l.jsxs("p",{className:"mb-2 text-[11px]",style:{color:_.textMuted},children:[": ",a.merged_summary_ids.map(x=>`#${x}`).join(", ")]}),l.jsx("div",{className:"rounded-[14px] p-4",style:{boxShadow:"var(--inset-shadow)",background:_.bg},children:l.jsx("p",{className:"whitespace-pre-wrap text-[13px] leading-relaxed",style:{color:_.text},children:a.content})})]})]}):l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:_.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:_.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:l.jsx(ir,{size:18,style:{color:_.accentDark}})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[e.length===0&&l.jsx("p",{className:"py-8 text-center text-[13px]",style:{color:_.textMuted},children:""}),e.map(x=>{var v;return l.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:s===x.id?"var(--inset-shadow)":"var(--card-shadow-sm)",background:_.bg},children:[x.is_current?l.jsx("span",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:_.accentDark},children:l.jsx(Sn,{size:12,color:"white"})}):l.jsx("button",{onClick:()=>o(x.id),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:s===x.id?_.accentDark:_.bg,boxShadow:s===x.id?"none":"var(--icon-inset)"},children:s===x.id&&l.jsx(Sn,{size:12,color:"white"})}),l.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>i(x),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsxs("span",{className:"text-[13px] font-semibold",style:{color:_.text},children:["v",x.version]}),x.is_current&&l.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-medium",style:{background:"rgba(155,120,200,0.12)",color:"#8b6abf"},children:""})]}),l.jsx("span",{className:"text-[10px]",style:{color:_.textMuted},children:p(x.created_at)})]}),l.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:_.textMuted},children:x.content}),((v=x.merged_summary_ids)==null?void 0:v.length)>0&&l.jsxs("p",{className:"mt-0.5 text-[10px]",style:{color:_.accent},children:[": ",x.merged_summary_ids.map(y=>`#${y}`).join(", ")]})]}),!x.is_current&&l.jsx("button",{onClick:()=>d(x.id),className:"flex h-5 w-5 shrink-0 items-center justify-center rounded-full",style:{color:"#ccc"},children:l.jsx(Pr,{size:11})})]},x.id)})]}),l.jsx("div",{className:"shrink-0 p-5",children:l.jsx("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:s?"linear-gradient(135deg, var(--accent), var(--accent-dark))":"#ccc",boxShadow:s?"4px 4px 10px rgba(201,98,138,0.35)":"none"},onClick:f,disabled:!s,children:""})}),c&&l.jsx(Nx,{message:"",onCancel:()=>d(null),onConfirm:()=>{r(c),d(null)}})]})}function cf({initialText:e,onSave:t,onCancel:n,memoryData:r}){var h;const[s,o]=u.useState(e),[a,i]=u.useState((r==null?void 0:r.klass)||"other"),[c,d]=u.useState((((h=r==null?void 0:r.tags)==null?void 0:h.topic)||[]).join(", ")),p=!!r,f=jx.filter(x=>x.value);return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:l.jsxs("div",{className:"mx-5 w-full max-w-[340px] rounded-[18px] p-4",style:{background:_.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:x=>x.stopPropagation(),children:[l.jsx("textarea",{className:"w-full rounded-[12px] p-3 text-[12px] leading-relaxed resize-none outline-none overflow-y-auto thin-scrollbar",style:{background:_.bg,boxShadow:"var(--inset-shadow)",color:_.text,minHeight:p?100:140,maxHeight:280},value:s,onChange:x=>o(x.target.value),autoFocus:!0}),p&&l.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:_.textMuted},children:""}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("select",{className:"w-full appearance-none rounded-[10px] px-3 py-1.5 text-[11px] font-medium outline-none",style:{background:_.bg,boxShadow:"var(--inset-shadow)",color:_.text,WebkitAppearance:"none"},value:a,onChange:x=>i(x.target.value),children:f.map(x=>l.jsx("option",{value:x.value,children:x.label},x.value))}),l.jsx(An,{size:10,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2",style:{color:_.textMuted}})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:_.textMuted},children:""}),l.jsx("input",{className:"flex-1 rounded-[10px] px-3 py-1.5 text-[11px] outline-none",style:{background:_.bg,boxShadow:"var(--inset-shadow)",color:_.text},placeholder:", ",value:c,onChange:x=>d(x.target.value)})]})]}),l.jsxs("div",{className:"mt-3 flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.textMuted},onClick:n,children:""}),l.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.accentDark},onClick:()=>{if(p){const x=c.split(/[,]/).map(v=>v.trim()).filter(Boolean);t(s,a,{topic:x})}else t(s)},disabled:!s.trim(),children:""})]})]})})}function uf({value:e,rawValue:t,onChange:n,options:r,width:s,active:o}){var p;const[a,i]=u.useState(!1),c=u.useRef(null);u.useEffect(()=>{if(!a)return;const f=h=>{c.current&&!c.current.contains(h.target)&&i(!1)};return document.addEventListener("mousedown",f),document.addEventListener("touchstart",f),()=>{document.removeEventListener("mousedown",f),document.removeEventListener("touchstart",f)}},[a]);const d=((p=r.find(f=>f.value===String(t)))==null?void 0:p.label)||e||"";return l.jsxs("div",{className:"relative",style:{width:s},ref:c,children:[l.jsxs("button",{className:"flex w-full items-center justify-between rounded-[12px] px-2.5 py-2 text-[11px] font-medium text-left",style:{boxShadow:"var(--card-shadow-sm)",background:_.bg,color:o?_.accentDark:_.text},onClick:()=>i(!a),children:[l.jsx("span",{className:"truncate flex-1",children:d}),l.jsx(An,{size:10,style:{color:_.textMuted,flexShrink:0,marginLeft:2,transform:a?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),a&&l.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[12px]",style:{background:_.bg,boxShadow:"var(--card-shadow)"},children:r.map(f=>l.jsxs("button",{className:"flex w-full items-center justify-between px-3 py-2 text-[11px]",style:{color:_.text},onClick:()=>{n(f.value),i(!1)},children:[l.jsx("span",{className:"truncate",children:f.label}),String(t)===f.value&&l.jsx(Sn,{size:10,style:{color:_.accentDark,flexShrink:0}})]},f.value))})]})}function df({children:e,time:t,badge:n,keyword:r,onEdit:s,selectMode:o,selected:a,onToggle:i,onLongPress:c}){const[d,p]=u.useState(!1),[f,h]=u.useState(!1),x=u.useRef(null),v=typeof e=="string"?e:"",y=u.useRef(null),w=u.useRef(!1),g=u.useRef(null);u.useLayoutEffect(()=>{const C=x.current;C&&!d&&h(C.scrollHeight>C.clientHeight+1)},[v,d]);const m=C=>{if(o)return;const k=C.touches[0];g.current={x:k.clientX,y:k.clientY},w.current=!1,y.current=setTimeout(()=>{w.current=!0,c==null||c()},600)},b=C=>{if(!g.current||!y.current)return;const k=C.touches[0],E=k.clientX-g.current.x,M=k.clientY-g.current.y;E*E+M*M>100&&(clearTimeout(y.current),y.current=null)},S=()=>{clearTimeout(y.current)},j=()=>{if(!w.current&&o){i==null||i();return}};return l.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:m,onTouchMove:b,onTouchEnd:S,onTouchCancel:S,onClick:j,children:[o&&l.jsx("div",{className:"mt-1",children:l.jsx(Sx,{selected:a})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-start justify-between gap-1",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[n,l.jsx("div",{ref:x,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:d?{color:_.text}:{color:_.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:C=>{o||(C.stopPropagation(),p(!d))},children:l.jsx(hu,{text:v,keyword:r})})]}),!o&&s&&l.jsx("button",{className:"mt-0.5 flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:C=>{C.stopPropagation(),s()},children:l.jsx(ma,{size:11,style:{color:_.accentDark}})})]}),l.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[l.jsx("span",{className:"text-[10px]",style:{color:_.textMuted},children:t||""}),!o&&(f||d)&&l.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:_.accentDark,background:"rgba(232,160,191,0.1)"},onClick:C=>{C.stopPropagation(),p(!d)},children:d?"":""})]})]})]})}function eb({content:e,deletedAt:t,keyword:n,onRestore:r,onPermanentDelete:s}){const[o,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);return u.useLayoutEffect(()=>{const p=d.current;p&&!o&&c(p.scrollHeight>p.clientHeight+1)},[e,o]),l.jsxs("div",{className:"mb-2 rounded-[14px] p-3",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",opacity:.75},children:[l.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:o?{color:_.text}:{color:_.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!o),children:l.jsx(hu,{text:e,keyword:n})}),(i||o)&&l.jsx("div",{className:"mt-1 flex justify-center",children:l.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:_.accentDark,background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!o)},children:o?"":""})}),l.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[l.jsx("span",{className:"text-[10px]",style:{color:_.textMuted},children:t?(()=>{const p=Math.max(0,30-Math.floor((Date.now()-new Date(t).getTime())/864e5));return` ${yr(t)}  ${p}`})():""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(59,130,246,0.1)",color:"#3b82f6"},onClick:r,children:""}),l.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(239,68,68,0.1)",color:"#ef4444"},onClick:s,children:""})]})]})]})}function tb({msg:e,keyword:t,roleLabel:n,roleColor:r,selectMode:s,selected:o,onToggle:a,onLongPress:i}){const[c,d]=u.useState(!1),[p,f]=u.useState(!1),h=u.useRef(null),x=u.useRef(null),v=u.useRef(!1),y=u.useRef(null);u.useLayoutEffect(()=>{const S=h.current;S&&!c&&f(S.scrollHeight>S.clientHeight+1)},[e.content,c]);const w=S=>{if(s)return;const j=S.touches[0];y.current={x:j.clientX,y:j.clientY},v.current=!1,x.current=setTimeout(()=>{v.current=!0,i==null||i()},600)},g=S=>{if(!y.current||!x.current)return;const j=S.touches[0],C=j.clientX-y.current.x,k=j.clientY-y.current.y;C*C+k*k>100&&(clearTimeout(x.current),x.current=null)},m=()=>{clearTimeout(x.current)},b=()=>{if(!v.current&&s){a==null||a();return}};return l.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:w,onTouchMove:g,onTouchEnd:m,onTouchCancel:m,onClick:b,children:[s&&l.jsx("div",{className:"mt-1",children:l.jsx(Sx,{selected:o})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-[11px] font-semibold",style:{color:r(e.role)},children:n(e.role)}),e.summary_group_id&&l.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-medium",style:{background:"rgba(74,138,181,0.1)",color:"#4a8ab5"},children:["",e.summary_group_id]})]}),l.jsx("span",{className:"text-[10px]",style:{color:_.textMuted},children:yr(e.created_at)})]}),l.jsx("div",{ref:h,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:c?{color:_.text}:{color:_.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:S=>{s||(S.stopPropagation(),d(!c))},children:l.jsx(hu,{text:e.content,keyword:t})}),!s&&(p||c)&&l.jsx("div",{className:"mt-1 flex justify-center",children:l.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:_.accentDark,background:"rgba(232,160,191,0.1)"},onClick:S=>{S.stopPropagation(),d(!c)},children:c?"":""})})]})]})}function nb(){var xu;const e=It(),[t,n]=u.useState("memories"),[r,s]=u.useState(!1),[o,a]=u.useState(!1),[i,c]=u.useState(null),[d,p]=u.useState([]),[f,h]=u.useState(null),[x,v]=u.useState(""),[y,w]=u.useState(null),[g,m]=u.useState(null),[b,S]=u.useState(""),[j,C]=u.useState(""),[k,E]=u.useState(""),[M,L]=u.useState(!1),[$,ae]=u.useState(new Set),[K,P]=u.useState([]),[J,be]=u.useState([]),[he,A]=u.useState([]),[Q,ee]=u.useState([]),[ge,R]=u.useState([]),[de,ie]=u.useState({longterm:null,daily:null}),[Oe,xe]=u.useState(!1),[_e,We]=u.useState(null),[V,te]=u.useState(null),[we,Me]=u.useState(!1),[Ye,ce]=u.useState(null),[Ve,Z]=u.useState(null),[B,fe]=u.useState(!0),[D,H]=u.useState(!1),[G,ne]=u.useState(!1),[se,pe]=u.useState(!1),Re=u.useRef(null);u.useEffect(()=>{var N;L(!1),ae(new Set),(N=Re.current)==null||N.scrollTo(0,0)},[t,r,o]);const Ot=()=>{xe(!0),O("/api/settings/summary-layers").then(N=>ie({longterm:N.longterm,daily:N.daily})).catch(N=>console.error(N)).finally(()=>xe(!1))};u.useEffect(()=>{t!=="messages"||!r||Ot()},[t,r]);const Zt=async N=>{try{const I=await O(`/api/settings/summary-layers/${N}/history`),W=de[N],X=I.history||[];W&&X.unshift({id:"__current__",version:W.version||1,content:W.content||"",merged_summary_ids:null,created_at:W.updated_at||null,is_current:!0}),te({type:N,items:X})}catch(I){}},hn=async()=>{try{const N=await O("/api/settings/summary-layers/flush-status");Z({...N,grayClicks:0})}catch(N){ce(""),setTimeout(()=>ce(null),3e3)}},en=async(N=!1)=>{var W,X;Z(null),Me(!0),ce(null);let I=!1;try{const $e="/api/settings/summary-layers/flush"+(N?"?force=true":""),ft=await O($e,{method:"POST"}),Cn=[];if(ft.flushed&&Cn.push(` ${ft.flushed} `),(W=ft.merge_triggered)!=null&&W.length){I=!0,ce("...");for(let En=0;En<40;En++){await new Promise(wt=>setTimeout(wt,3e3));try{if(!((X=(await O("/api/settings/summary-layers/flush-status")).pending_merge)!=null&&X.length)){ce(""),Ot(),setTimeout(()=>ce(null),3e3);return}}catch(wt){}}ce(""),setTimeout(()=>ce(null),3e3);return}ce(Cn.length?Cn.join(""):""),ft.flushed&&setTimeout(Ot,2e3),setTimeout(()=>ce(null),4e3)}catch($e){ce(""),setTimeout(()=>ce(null),4e3)}finally{Me(!1)}};u.useEffect(()=>{O("/api/sessions?limit=50").then(N=>{const I=N.sessions||[];p(I),I.length>0&&!i&&c(I[0].id)}).catch(()=>{})},[]),u.useEffect(()=>{i&&O(`/api/sessions/${i}/info`).then(N=>h(N.assistant_name||null)).catch(()=>h(null))},[i]);const xn=50,gt=u.useRef(""),tn=u.useRef(null),fr=u.useRef({klass:"",mood:"",role:""});fr.current={klass:b,mood:j,role:k},u.useEffect(()=>{i&&ke()},[i,o]),u.useEffect(()=>{i&&!o&&ke()},[t]),u.useEffect(()=>{i&&!o&&ke()},[b,j,k]),u.useEffect(()=>(tn.current&&clearTimeout(tn.current),tn.current=setTimeout(()=>{const N=x.trim();N!==gt.current&&(gt.current=N,i&&ke(N))},400),()=>{tn.current&&clearTimeout(tn.current)}),[x]);const F=N=>{const I=[],W=(N!=null?N:gt.current||"").trim();W&&I.push(`search=${encodeURIComponent(W)}`);const X=fr.current;return t==="memories"&&X.klass&&I.push(`klass=${encodeURIComponent(X.klass)}`),t==="summaries"&&X.mood&&I.push(`mood_tag=${encodeURIComponent(X.mood)}`),t==="messages"&&X.role&&I.push(`role=${encodeURIComponent(X.role)}`),I.length?`&${I.join("&")}`:""},ke=async N=>{if(!i)return;fe(!0);const I=F(N);try{if(o){const[W,X]=await Promise.all([O("/api/memories/trash?limit=100"),O(`/api/sessions/${i}/summaries/trash`)]);ee(W.memories||[]),R(X.summaries||[])}else if(t==="memories"){const W=await O(`/api/memories?limit=${xn}&offset=0${I}`);P(W.memories||[]),H((W.total||0)>(W.memories||[]).length)}else if(t==="summaries"){const W=await O(`/api/sessions/${i}/summaries?limit=${xn}&offset=0${I}`);be(W.summaries||[]),ne((W.total||0)>(W.summaries||[]).length)}else{const W=await O(`/api/sessions/${i}/messages?limit=50${I}`);A((W.messages||[]).reverse()),pe(W.has_more||!1)}}catch(W){console.error(W)}fe(!1)},ue=async()=>{if(!D||B)return;fe(!0);const N=F();try{const I=await O(`/api/memories?limit=${xn}&offset=${K.length}${N}`),W=I.memories||[];P(X=>[...X,...W]),H((I.total||0)>K.length+W.length)}catch(I){console.error(I)}fe(!1)},Te=async()=>{if(!i||!G||B)return;fe(!0);const N=F();try{const I=await O(`/api/sessions/${i}/summaries?limit=${xn}&offset=${J.length}${N}`),W=I.summaries||[];be(X=>[...X,...W]),ne((I.total||0)>J.length+W.length)}catch(I){console.error(I)}fe(!1)},yt=async()=>{if(!i||!se||B)return;const N=he[he.length-1];if(!N)return;fe(!0);const I=F();try{const W=await O(`/api/sessions/${i}/messages?limit=50&before_id=${N.id}${I}`);A(X=>[...X,...(W.messages||[]).reverse()]),pe(W.has_more||!1)}catch(W){console.error(W)}fe(!1)},Ue=x.trim(),Ml=u.useMemo(()=>Ue?Q.filter(N=>N.content.toLowerCase().includes(Ue.toLowerCase())):Q,[Q,Ue]),ws=u.useMemo(()=>Ue?ge.filter(N=>(N.summary_content||"").toLowerCase().includes(Ue.toLowerCase())):ge,[ge,Ue]),Qe=(N,I)=>w({message:N,action:I}),vt=async N=>{await O(`/api/memories/${N}/restore`,{method:"POST"}),ee(I=>I.filter(W=>W.id!==N))},bt=N=>Qe("",async()=>{await O(`/api/memories/${N}/permanent`,{method:"DELETE"}),ee(I=>I.filter(W=>W.id!==N))}),mn=async N=>{await O(`/api/sessions/${i}/summaries/${N}/restore`,{method:"POST"}),R(I=>I.filter(W=>W.id!==N))},_t=N=>Qe("",async()=>{await O(`/api/sessions/${i}/summaries/${N}/permanent`,{method:"DELETE"}),R(I=>I.filter(W=>W.id!==N))}),at=N=>{ae(I=>{const W=new Set(I);return W.has(N)?W.delete(N):W.add(N),W})},Mt=N=>{L(!0),ae(new Set([N]))},Fn=()=>{let N=[];t==="memories"?N=K.map(I=>I.id):t==="summaries"?N=J.map(I=>I.id):N=he.map(I=>I.id),ae(new Set(N))},Ge=()=>{L(!1),ae(new Set)},gn=()=>{if($.size===0)return;const N=$.size,I=t==="messages"?` ${N} `:` ${N} ${t==="memories"?"":""}`;Qe(I,async()=>{const W=[...$];t==="memories"?(await O("/api/memories/batch",{method:"DELETE",body:{ids:W}}),P(X=>X.filter($e=>!$.has($e.id)))):t==="summaries"?(await O(`/api/sessions/${i}/summaries/batch`,{method:"DELETE",body:{ids:W}}),be(X=>X.filter($e=>!$.has($e.id)))):(await O(`/api/sessions/${i}/messages/batch`,{method:"DELETE",body:{ids:W}}),A(X=>X.filter($e=>!$.has($e.id)))),Ge()})},Wt=async(N,I,W)=>{if(g){try{if(g.type==="memory"){const X={content:N};I!==void 0&&(X.klass=I),W!==void 0&&(X.tags=W),await O(`/api/memories/${g.id}`,{method:"PUT",body:X}),P($e=>$e.map(ft=>ft.id===g.id?{...ft,content:N,...I!==void 0?{klass:I}:{},...W!==void 0?{tags:W}:{}}:ft))}else await O(`/api/sessions/${i}/summaries/${g.id}`,{method:"PATCH",body:{summary_content:N}}),be(X=>X.map($e=>$e.id===g.id?{...$e,summary_content:N}:$e))}catch(X){console.error(X)}m(null)}},nn=N=>{if(!_e)return;const I=_e.type;We(null),w({title:"",message:"",confirmLabel:"",confirmColor:_.accentDark,action:async()=>{await O(`/api/settings/summary-layers/${I}`,{method:"PUT",body:{content:N}}),Ot()}})},pr=N=>N==="user"?"":N==="assistant"?f||"":"",hr=N=>N==="user"?_.accentDark:N==="assistant"?"#8d68c4":_.textMuted,Vt=t==="memories"?jx:t==="summaries"?G0:q0,Nn=t==="memories"?b:t==="summaries"?j:k,ks=N=>{t==="memories"?S(N):t==="summaries"?C(N):E(N)},Ex=o?(()=>{if(B)return l.jsx(Rs,{});const N=t==="memories"?Ml:ws;return N.length===0?l.jsx(no,{text:Ue?"":""}):N.map(I=>l.jsx(eb,{content:I.content||I.summary_content||"()",deletedAt:I.deleted_at,keyword:Ue,onRestore:()=>t==="memories"?vt(I.id):mn(I.id),onPermanentDelete:()=>t==="memories"?bt(I.id):_t(I.id)},I.id))})():t==="memories"?B&&K.length===0?l.jsx(Rs,{}):K.length===0?l.jsx(no,{text:Ue?"":""}):l.jsxs(l.Fragment,{children:[!M&&l.jsx("p",{className:"mb-2 text-[11px]",style:{color:_.textMuted},children:""}),K.map(N=>l.jsx(df,{time:N.updated_at?`${yr(N.created_at)}   ${yr(N.updated_at)}`:yr(N.created_at),keyword:Ue,onEdit:()=>m({type:"memory",id:N.id,text:N.content,klass:N.klass,tags:N.tags}),selectMode:M,selected:$.has(N.id),onToggle:()=>at(N.id),onLongPress:()=>Mt(N.id),badge:(()=>{var X;const I=af[N.klass]||af.other,W=((X=N.tags)==null?void 0:X.topic)||[];return l.jsxs("div",{className:"flex flex-wrap items-center gap-1 mb-1",children:[l.jsx("span",{className:"inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:I.bg,color:I.color},children:N.klass}),l.jsxs("span",{className:"inline-block text-[10px]",style:{color:_.textMuted},children:["#",N.id]}),W.map(($e,ft)=>l.jsx("span",{className:"inline-block rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(136,136,160,0.1)",color:_.textMuted},children:$e},ft))]})})(),children:N.content},N.id)),D&&l.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.accentDark},onClick:ue,disabled:B,children:B?"...":""})]}):t==="summaries"?B&&J.length===0?l.jsx(Rs,{}):J.length===0?l.jsx(no,{text:Ue?"":""}):l.jsxs(l.Fragment,{children:[!M&&l.jsx("p",{className:"mb-2 text-[11px]",style:{color:_.textMuted},children:""}),J.map(N=>l.jsx(df,{time:yr(N.created_at),keyword:Ue,onEdit:()=>m({type:"summary",id:N.id,text:N.summary_content}),selectMode:M,selected:$.has(N.id),onToggle:()=>at(N.id),onLongPress:()=>Mt(N.id),badge:l.jsxs(l.Fragment,{children:[N.mood_tag&&l.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:"rgba(232,160,191,0.15)",color:_.accentDark},children:N.mood_tag}),N.merged_into&&l.jsxs("span",{className:"mb-1 ml-1 inline-block rounded-full px-1.5 py-0.5 text-[9px] font-medium",style:{background:"rgba(155,120,200,0.12)",color:"#8b6abf"},children:["",N.merged_into==="daily"?"":""]}),l.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:_.textMuted},children:["#",N.id]})]}),children:N.summary_content||"()"},N.id)),G&&l.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.accentDark},onClick:Te,disabled:B,children:B?"...":""})]}):r?Oe?l.jsx(Rs,{}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-2.5 text-[13px] font-medium text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:hn,disabled:we,children:[l.jsx(ga,{size:13,className:we?"animate-spin":""}),Ye||(we?"...":"")]}),[{type:"daily",label:"",hint:""},{type:"longterm",label:"",hint:""}].map(({type:N,label:I,hint:W})=>{var ft,Cn;const X=de[N],$e=(ft=X==null?void 0:X.content)==null?void 0:ft.trim();return l.jsxs("div",{className:"rounded-[18px] p-4",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-[15px] font-semibold",style:{color:_.text},children:I}),(()=>{var rn;const En=((rn=X==null?void 0:X.pending_ids)==null?void 0:rn.length)||0,wt=((X==null?void 0:X.pending_daily)||[]).reduce((Bn,Un)=>Bn+Un.ids.length,0);if(!En&&!wt)return null;const yn=[];return En&&yn.push(`${En}`),wt&&yn.push(`${wt}daily`),l.jsx(J0,{label:yn.join("  "),rawIds:(X==null?void 0:X.pending_ids)||[],dailyGroups:(X==null?void 0:X.pending_daily)||[]})})()]}),l.jsx("div",{className:"text-[11px]",style:{color:_.textMuted},children:W})]}),l.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[l.jsx("button",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>Zt(N),children:l.jsx(Fh,{size:11,style:{color:_.textMuted}})}),l.jsx("button",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>We({type:N,content:(X==null?void 0:X.content)||""}),children:l.jsx(ma,{size:11,style:{color:_.accentDark}})})]})]}),l.jsx("div",{className:"text-[12px] leading-relaxed whitespace-pre-wrap break-words",style:{color:$e?_.text:_.textMuted},children:$e?X.content:""}),l.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[l.jsx("span",{className:"text-[10px]",style:{color:_.textMuted},children:X!=null&&X.updated_at?` ${yr(X.updated_at)}`:""}),l.jsxs("span",{className:"text-[10px]",style:{color:_.textMuted},children:["v",(X==null?void 0:X.version)||1,"  ",((Cn=X==null?void 0:X.content)==null?void 0:Cn.length)||0," "]})]})]},N)})]}):B&&he.length===0?l.jsx(Rs,{}):he.length===0?l.jsx(no,{text:Ue?"":""}):l.jsxs(l.Fragment,{children:[!M&&l.jsx("p",{className:"mb-2 text-[11px]",style:{color:_.textMuted},children:""}),he.map(N=>l.jsx(tb,{msg:N,keyword:Ue,roleLabel:pr,roleColor:hr,selectMode:M,selected:$.has(N.id),onToggle:()=>at(N.id),onLongPress:()=>Mt(N.id)},N.id)),se&&l.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.accentDark},onClick:yt,disabled:B,children:B?"...":""})]});return l.jsxs("div",{className:"flex h-full flex-col",style:{background:_.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(Ct,{size:22,style:{color:_.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:_.text},children:o?"":""}),t==="messages"?l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>s(!r),children:l.jsx(lu,{size:16,style:{color:r?_.accentDark:_.textMuted}})}):l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:o?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>a(!o),children:l.jsx(Pr,{size:16,style:{color:o?"#ef4444":_.accentDark}})})]}),M&&l.jsx("div",{className:"shrink-0 px-5 pb-2",children:l.jsxs("div",{className:"flex items-center justify-between rounded-[14px] px-4 py-2.5",style:{background:_.bg,boxShadow:"var(--inset-shadow)"},children:[l.jsxs("span",{className:"text-[12px] font-semibold",style:{color:_.accentDark},children:[" ",$.size," "]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:"rgba(59,130,246,0.15)",color:"#3b82f6"},onClick:Fn,children:""}),l.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.textMuted},onClick:Ge,children:""}),l.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold text-white",style:{background:$.size>0?"#ff4d6d":"rgba(255,77,109,0.3)"},onClick:gn,disabled:$.size===0,children:""})]})]})}),!M&&l.jsx("div",{className:"shrink-0 px-5 pb-2",children:l.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:_.bg,boxShadow:"var(--inset-shadow)"},children:Q0.map(N=>{const I=o&&N.key==="messages",W=t===N.key,X=N.key==="messages"&&r?"":N.label;return l.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:I?{color:_.textMuted,opacity:.35,cursor:"default"}:W?{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.accentDark}:{color:_.textMuted},disabled:I,onClick:()=>!I&&n(N.key),children:X},N.key)})})}),!M&&!(t==="messages"&&r)&&l.jsx("div",{className:"shrink-0 px-5 pb-3",children:l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(uf,{value:i?`#${i}`:"",rawValue:i!=null?i:"",onChange:N=>c(Number(N)),options:d.map(N=>({value:String(N.id),label:`#${N.id} ${N.title||""}`})),width:"22%"}),l.jsx(uf,{value:((xu=Vt.find(N=>N.value===Nn))==null?void 0:xu.label)||Vt[0].label,rawValue:Nn,onChange:ks,options:Vt.map(N=>({value:N.value,label:N.label})),width:"22%",active:!!Nn}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx(hv,{size:13,className:"absolute left-2.5 top-1/2 -translate-y-1/2",style:{color:_.textMuted}}),l.jsx("input",{className:"w-full rounded-[12px] py-2 pl-8 pr-7 text-[11px] outline-none",style:{background:_.bg,boxShadow:"var(--inset-shadow)",color:_.text},placeholder:"...",value:x,onChange:N=>v(N.target.value)}),x&&l.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>v(""),children:l.jsx(Sl,{size:13,style:{color:_.textMuted}})})]})]})}),l.jsx("div",{ref:Re,className:`flex-1 overflow-y-auto px-5 pb-8${t==="messages"&&r?" pt-5":""}`,children:Ex}),y&&l.jsx(Nx,{title:y.title,message:y.message,confirmLabel:y.confirmLabel,confirmColor:y.confirmColor,onConfirm:async()=>{try{await y.action()}catch(N){console.error(N)}w(null)},onCancel:()=>w(null)}),g&&l.jsx(cf,{initialText:g.text,onSave:Wt,onCancel:()=>m(null),memoryData:g.type==="memory"?{klass:g.klass,tags:g.tags}:null}),_e&&l.jsx(cf,{initialText:_e.content,onSave:nn,onCancel:()=>We(null)}),V&&l.jsx(Z0,{items:V.items,onApply:async N=>{try{const I=await O(`/api/settings/summary-layers/${V.type}/rollback`,{method:"POST",body:{history_id:N.id}});ie(W=>({...W,[V.type]:{...W[V.type],content:I.content,version:I.version}})),Ot()}catch(I){}},onDelete:async N=>{try{await O(`/api/settings/summary-layers/history/${N}`,{method:"DELETE"}),te(I=>I?{...I,items:I.items.filter(W=>W.id!==N)}:null)}catch(I){}},onClose:()=>te(null)}),Ve&&(()=>{const{pending_flush:N,pending_merge:I,already_merged:W,grayClicks:X}=Ve,$e=X>=2,ft=N>0,Cn=(I==null?void 0:I.length)>0,En=(W==null?void 0:W.length)>0,wt=[];$e?wt.push(` ${W.join("")} `):(ft&&wt.push(`${N} `),Cn&&wt.push(`${I.join("")} `),En&&wt.push(`${W.join("")} `),wt.length||wt.push(""));let yn,rn,Bn;return $e?(yn="",rn=!1,Bn=()=>en(!0)):ft?(yn="",rn=!1,Bn=en):Cn?(yn="",rn=!1,Bn=en):En?(yn="",rn=!0,Bn=()=>Z(Un=>({...Un,grayClicks:(Un.grayClicks||0)+1}))):(yn="",rn=!0,Bn=()=>{}),l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>Z(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:_.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:Un=>Un.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:_.text},children:$e?"":""}),l.jsx("p",{className:"mb-5 text-center text-[13px] leading-relaxed",style:{color:_.textMuted},children:wt.map((Un,mu)=>l.jsxs("span",{children:[mu>0&&l.jsx("br",{}),Un]},mu))}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.text},onClick:()=>Z(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:rn?"#bbb":_.accentDark,boxShadow:rn?"none":"4px 4px 10px rgba(201,98,138,0.4)",opacity:rn?.5:1},onClick:Bn,children:yn})]})]})})})()]})}function Rs(){return l.jsx("div",{className:"flex justify-center py-16",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:_.accent,borderTopColor:"transparent"}})})}function no({text:e}){return l.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:_.textMuted},children:e})}const q={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},rb=[{key:"theirs",label:""},{key:"mine",label:""}],ro=80;function Cx(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),o=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?o:`${t.getMonth()+1}/${t.getDate()} ${o}`}function sb({message:e,onConfirm:t,onCancel:n}){return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:q.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:q.text},children:""}),l.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:q.textMuted},children:e}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)",color:q.text},onClick:n,children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function lb({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),o=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const v="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=v,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/ro);x.style.transition=v,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>o(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,v=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(v)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(v),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-ro,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/ro)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?o(-ro):o(0)};return l.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:l.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[l.jsx(Pr,{size:16,color:"white"}),l.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),l.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function ob({unlockAt:e}){const[t,n]=u.useState(Date.now());u.useEffect(()=>{const d=setInterval(()=>n(Date.now()),1e3);return()=>clearInterval(d)},[]);const r=new Date(e).getTime()-t;if(r<=0)return null;const s=Math.floor(r/864e5),o=Math.floor(r%864e5/36e5),a=Math.floor(r%36e5/6e4),i=Math.floor(r%6e4/1e3);let c="";return s>0&&(c+=`${s}`),(o>0||s>0)&&(c+=`${o}`),c+=`${a}${i}`,l.jsxs("div",{className:"flex items-center gap-1.5 text-[12px]",style:{color:q.accentDark},children:[l.jsx(dv,{size:12}),l.jsx("span",{children:c})]})}function ab({assistants:e,avatarMap:t,currentId:n,onSelect:r,onClose:s}){return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:s,children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-5",style:{background:q.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:o=>o.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:q.text},children:""}),l.jsx("button",{onClick:s,children:l.jsx(Sl,{size:18,style:{color:q.textMuted}})})]}),l.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:e.map(o=>{var i;const a=t[o.id]||o.avatar_url;return l.jsxs("button",{className:"mb-2 flex w-full items-center gap-3 rounded-[14px] p-3 text-left",style:{background:q.bg,boxShadow:o.id===n?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{r(o.id),s()},children:[l.jsx("div",{className:"shrink-0 rounded-full",style:{width:36,height:36,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:2},children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:q.bg},children:a?l.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{className:"text-[14px]",style:{color:q.accentDark},children:((i=o.name)==null?void 0:i[0])||"?"})})}),l.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:q.text},children:o.name})]},o.id)})})]})})}function ib({diary:e,onBack:t,onMarkRead:n}){return u.useEffect(()=>{e&&!e.is_read&&e.author==="assistant"&&(!e.unlock_at||new Date(e.unlock_at)<=new Date)&&n(e.id)},[e]),l.jsxs("div",{className:"flex h-full flex-col",style:{background:q.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:t,children:l.jsx(Ct,{size:22,style:{color:q.text}})}),l.jsx("h1",{className:"text-[15px] font-bold truncate max-w-[60%]",style:{color:q.text},children:e.title||""}),l.jsx("div",{className:"w-10"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l.jsxs("div",{className:"rounded-[18px] p-5",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{className:"mb-3 text-[10px]",style:{color:q.textMuted},children:Cx(e.created_at)}),l.jsx("div",{className:"text-[13px] leading-[28px]",style:{color:q.text},children:e.content.split(`
`).map((r,s)=>l.jsx("div",{style:{borderBottom:"1px solid rgba(0,0,0,0.06)",minHeight:28},children:r||""},s))})]})})]})}function cb({assistantId:e,onSave:t,onCancel:n}){const[r,s]=u.useState(""),[o,a]=u.useState(""),[i,c]=u.useState(!1),[d,p]=u.useState(""),[f,h]=u.useState(!1),[x,v]=u.useState(!1),y=async()=>{if(!(!o.trim()||f)){h(!0);try{const w={assistant_id:e,author:"user",title:r.trim(),content:o.trim()};i&&d&&(w.unlock_at=new Date(d).toISOString()),await t(w)}finally{h(!1)}}};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:q.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:l.jsx(Ct,{size:22,style:{color:q.text}})}),l.jsx("h1",{className:"text-[15px] font-bold",style:{color:q.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:o.trim()?"var(--card-shadow-sm)":"var(--inset-shadow)"},onClick:y,disabled:!o.trim()||f,children:l.jsx("span",{className:"text-[12px] font-bold",style:{color:o.trim()?q.accentDark:q.textMuted},children:""})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[!x&&l.jsx("input",{className:"mb-3 w-full rounded-[12px] px-3 py-2.5 text-[13px] font-medium outline-none",style:{background:q.bg,boxShadow:"var(--inset-shadow)",color:q.text},placeholder:"",value:r,onChange:w=>s(w.target.value)}),l.jsxs("div",{className:"relative mb-3",children:[l.jsx("textarea",{className:"w-full rounded-[14px] p-3 text-[13px] leading-[28px] resize-none outline-none",style:{background:q.bg,boxShadow:"var(--inset-shadow)",color:q.text,minHeight:x?"calc(100vh - 120px)":200,backgroundImage:"repeating-linear-gradient(transparent, transparent 27px, rgba(0,0,0,0.05) 27px, rgba(0,0,0,0.05) 28px)",backgroundPositionY:9},placeholder:"...",value:o,onChange:w=>a(w.target.value),autoFocus:!0}),l.jsx("button",{className:"absolute top-2 right-2 flex h-7 w-7 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>v(!x),children:x?l.jsx(ir,{size:13,style:{color:q.accentDark}}):l.jsx(kl,{size:13,style:{color:q.accentDark}})})]}),!x&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-[14px] px-4 py-3",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-[13px] font-medium",style:{color:q.text},children:""}),l.jsx("p",{className:"text-[10px]",style:{color:q.textMuted},children:""})]}),l.jsx("button",{className:"relative h-7 w-12 rounded-full transition-colors",style:{background:i?q.accent:"rgba(0,0,0,0.1)"},onClick:()=>{if(!i&&!d){const w=new Date;w.setDate(w.getDate()+1),w.setHours(9,0,0,0);const g=m=>String(m).padStart(2,"0");p(`${w.getFullYear()}-${g(w.getMonth()+1)}-${g(w.getDate())}T${g(w.getHours())}:${g(w.getMinutes())}`)}c(!i)},children:l.jsx("div",{className:"absolute top-0.5 h-6 w-6 rounded-full transition-transform",style:{background:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",transform:i?"translateX(22px)":"translateX(2px)"}})})]}),i&&l.jsxs("div",{className:"rounded-[14px] px-4 py-3",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("p",{className:"mb-2 text-[12px] font-medium",style:{color:q.text},children:""}),l.jsx("input",{type:"datetime-local",className:"w-full rounded-[10px] px-3 py-2 text-[13px] outline-none",style:{background:q.bg,boxShadow:"var(--inset-shadow)",color:q.text},value:d,onChange:w=>p(w.target.value)})]})]})]})]})}function ub(){var K;const e=It(),[t,n]=u.useState("theirs"),[r,s]=u.useState([]),[o,a]=u.useState({}),[i,c]=u.useState(()=>{const P=localStorage.getItem("diary_assistant_id");return P?Number(P):null}),d=P=>{c(P),P!=null&&localStorage.setItem("diary_assistant_id",String(P))},[p,f]=u.useState(!1),[h,x]=u.useState([]),[v,y]=u.useState(!0),[w,g]=u.useState(null),[m,b]=u.useState(null),[S,j]=u.useState(!1);u.useEffect(()=>{O("/api/assistants").then(async P=>{const J=P.assistants||[];s(J),J.length>0&&(i&&J.some(A=>A.id===i)||d(J[0].id));const be={};await Promise.all(J.map(async he=>{const A=await gs(`assistant-avatar-${he.id}`).catch(()=>null);A&&(be[he.id]=A)})),a(be)}).catch(()=>{})},[]);const C=r.find(P=>P.id===i),k=i&&o[i]||(C==null?void 0:C.avatar_url);u.useEffect(()=>{i!=null&&E()},[i,t]);const E=async()=>{y(!0);try{const J=await O(`/api/diary?assistant_id=${i}&author=${t==="theirs"?"assistant":"user"}&limit=100`);x(J.diary||[])}catch(P){console.error(P)}y(!1)},M=P=>{g({message:"",action:async()=>{await O(`/api/diary/${P}`,{method:"DELETE"}),x(J=>J.filter(be=>be.id!==P))}})},L=async P=>{try{await O(`/api/diary/${P}/read`,{method:"POST"}),x(J=>J.map(be=>be.id===P?{...be,is_read:!0}:be))}catch(J){console.error(J)}},$=async P=>{await O("/api/diary",{method:"POST",body:P}),j(!1),E()},ae=P=>{P.unlock_at&&new Date(P.unlock_at)>new Date||b(P)};return m?l.jsx(ib,{diary:m,onBack:()=>{b(null),E()},onMarkRead:L}):S?l.jsx(cb,{assistantId:i,onSave:$,onCancel:()=>j(!1)}):l.jsxs("div",{className:"flex h-full flex-col",style:{background:q.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(Ct,{size:22,style:{color:q.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:q.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{border:"2px solid #e8a0bf",padding:2},onClick:()=>f(!0),children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:q.bg},children:k?l.jsx("img",{src:k,alt:"",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{className:"text-[14px]",style:{color:q.accentDark},children:((K=C==null?void 0:C.name)==null?void 0:K[0])||"?"})})})]}),l.jsx("div",{className:"shrink-0 px-5 pb-3",children:l.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:q.bg,boxShadow:"var(--inset-shadow)"},children:rb.map(P=>l.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:t===P.key?{background:q.bg,boxShadow:"var(--card-shadow-sm)",color:q.accentDark}:{color:q.textMuted},onClick:()=>n(P.key),children:P.label},P.key))})}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24 pt-5",children:v?l.jsx("div",{className:"flex justify-center py-16",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:q.accent,borderTopColor:"transparent"}})}):h.length===0?l.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:q.textMuted},children:t==="theirs"?"":""}):h.map(P=>{const J=P.unlock_at&&new Date(P.unlock_at)>new Date;return l.jsx(lb,{onDelete:()=>M(P.id),children:l.jsxs("div",{className:"p-4 rounded-[18px]",style:{background:q.bg,userSelect:"none"},onClick:()=>ae(P),children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[!P.is_read&&P.author==="assistant"&&!J&&l.jsx("div",{className:"h-2 w-2 shrink-0 rounded-full",style:{background:"#ef4444"}}),l.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:q.text},children:P.title||""})]}),l.jsx("span",{className:"text-[10px] shrink-0 ml-2",style:{color:q.textMuted},children:Cx(P.created_at)})]}),J?l.jsx(ob,{unlockAt:P.unlock_at}):l.jsx("p",{className:"text-[12px] leading-relaxed break-words",style:{color:q.textMuted,maxHeight:40,overflow:"hidden"},children:P.content.length>60?P.content.slice(0,60)+"...":P.content})]})},P.id)})}),t==="mine"&&l.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center",style:{zIndex:30},children:l.jsx("button",{className:"flex h-12 w-12 items-center justify-center rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",boxShadow:"0 4px 14px rgba(232,160,191,0.4)"},onClick:()=>j(!0),children:l.jsx(ms,{size:22,color:"white"})})}),p&&l.jsx(ab,{assistants:r,avatarMap:o,currentId:i,onSelect:d,onClose:()=>f(!1)}),w&&l.jsx(sb,{message:w.message,onConfirm:async()=>{try{await w.action()}catch(P){console.error(P)}g(null)},onCancel:()=>g(null)})]})}const le={bg:"var(--bg)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},ff={identity:{color:"#7b5ea7",bg:"#ede4f7"},relationship:{color:"#c26a8a",bg:"#f7e0ea"},bond:{color:"#d48aab",bg:"#fce8f0"},conflict:{color:"#b5454a",bg:"#f5dede"},fact:{color:"#4a8ab5",bg:"#deedf5"},preference:{color:"#9b7a3b",bg:"#f0ebd8"},health:{color:"#4a9b6e",bg:"#ddf0e5"},task:{color:"#6b7b9b",bg:"#e0e6f0"},ephemeral:{color:"#9b9b9b",bg:"#ececec"},other:{color:"#8a7a6a",bg:"#efe8df"}},db=[{value:"identity",label:"identity"},{value:"relationship",label:"relationship"},{value:"bond",label:"bond"},{value:"conflict",label:"conflict"},{value:"fact",label:"fact"},{value:"preference",label:"preference"},{value:"health",label:"health"},{value:"task",label:"task"},{value:"other",label:"other"}];function fb(e){if(!e)return"";const t=new Date(e),n=t.getHours().toString().padStart(2,"0"),r=t.getMinutes().toString().padStart(2,"0");return`${t.getMonth()+1}/${t.getDate()} ${n}:${r}`}function pb({selected:e}){return l.jsx("div",{className:"flex h-5 w-5 shrink-0 items-center justify-center rounded-full",style:e?{background:le.accentDark,boxShadow:"0 2px 6px rgba(201,98,138,0.3)"}:{background:le.bg,boxShadow:"var(--inset-shadow)"},children:e&&l.jsx(Sn,{size:12,color:"white",strokeWidth:3})})}function hb({title:e,message:t,confirmLabel:n="",confirmColor:r="#c9628a",onConfirm:s,onCancel:o}){return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:o,children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:le.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:a=>a.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:le.text},children:e}),l.jsx("p",{className:"mb-5 text-center text-[13px] whitespace-pre-line",style:{color:le.textMuted},children:t}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:le.bg,boxShadow:"var(--card-shadow-sm)",color:le.text},onClick:o,children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:r,boxShadow:`4px 4px 10px ${r}66`},onClick:s,children:n})]})]})})}function xb({item:e,onSave:t,onCancel:n}){var d;const[r,s]=u.useState(e.content),[o,a]=u.useState(e.klass||"other"),[i,c]=u.useState((((d=e.tags)==null?void 0:d.topic)||[]).join(", "));return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:l.jsxs("div",{className:"mx-5 w-full max-w-[340px] rounded-[18px] p-4",style:{background:le.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:p=>p.stopPropagation(),children:[l.jsx("textarea",{className:"w-full rounded-[12px] p-3 text-[12px] leading-relaxed resize-none outline-none overflow-y-auto thin-scrollbar",style:{background:le.bg,boxShadow:"var(--inset-shadow)",color:le.text,minHeight:100,maxHeight:280},value:r,onChange:p=>s(p.target.value),autoFocus:!0}),l.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:le.textMuted},children:""}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("select",{className:"w-full appearance-none rounded-[10px] px-3 py-1.5 text-[11px] font-medium outline-none",style:{background:le.bg,boxShadow:"var(--inset-shadow)",color:le.text,WebkitAppearance:"none"},value:o,onChange:p=>a(p.target.value),children:db.map(p=>l.jsx("option",{value:p.value,children:p.label},p.value))}),l.jsx(An,{size:10,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2",style:{color:le.textMuted}})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:le.textMuted},children:""}),l.jsx("input",{className:"flex-1 rounded-[10px] px-3 py-1.5 text-[11px] outline-none",style:{background:le.bg,boxShadow:"var(--inset-shadow)",color:le.text},placeholder:"",value:i,onChange:p=>c(p.target.value)})]})]}),l.jsxs("div",{className:"mt-3 flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:le.bg,boxShadow:"var(--card-shadow-sm)",color:le.textMuted},onClick:n,children:""}),l.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:le.bg,boxShadow:"var(--card-shadow-sm)",color:le.accentDark},onClick:()=>{const p=i.split(/[,]/).map(f=>f.trim()).filter(Boolean);t(r.trim(),o,{topic:p})},disabled:!r.trim(),children:""})]})]})})}function mb({relatedId:e,relatedContent:t,similarity:n,onOverwrite:r}){const[s,o]=u.useState(!1);if(!e||!t)return null;const a=n?Math.round(n*100):null;return l.jsxs("div",{className:"mt-1.5",children:[l.jsxs("button",{className:"flex items-center gap-1 text-[10px]",style:{color:"#c47a30"},onClick:i=>{i.stopPropagation(),o(!s)},children:[l.jsx(uv,{size:10}),l.jsxs("span",{children:[" #",e,a?` (${a}%)`:""]}),l.jsx(An,{size:10,style:{transform:s?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),s&&l.jsxs("div",{className:"mt-1 rounded-[10px] p-2.5",style:{boxShadow:"var(--inset-shadow)",background:le.bg},children:[l.jsx("p",{className:"text-[11px] leading-relaxed whitespace-pre-wrap",style:{color:le.text},children:t}),l.jsx("div",{className:"mt-2 flex justify-end",children:l.jsx("button",{className:"rounded-[8px] px-3 py-1 text-[10px] font-medium",style:{background:"rgba(196,122,48,0.12)",color:"#c47a30"},onClick:i=>{i.stopPropagation(),r()},children:""})})]})]})}function gb({item:e,selected:t,onToggle:n,onEdit:r,onOverwrite:s}){var h;const[o,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);u.useLayoutEffect(()=>{const x=d.current;x&&!o&&c(x.scrollHeight>x.clientHeight+1)},[e.content,o]);const p=ff[e.klass]||ff.other,f=((h=e.tags)==null?void 0:h.topic)||[];return l.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:le.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:[l.jsx("div",{className:"mt-1",children:l.jsx(pb,{selected:t})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-start justify-between gap-1",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-1 mb-1",children:[l.jsx("span",{className:"inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:p.bg,color:p.color},children:e.klass}),l.jsxs("span",{className:"inline-block text-[10px]",style:{color:le.textMuted},children:["#",e.id]}),f.map((x,v)=>l.jsx("span",{className:"inline-block rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(136,136,160,0.1)",color:le.textMuted},children:x},v))]}),l.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:o?{color:le.text}:{color:le.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:x=>{x.stopPropagation(),a(!o)},children:e.content}),(i||o)&&l.jsx("div",{className:"mt-0.5 flex justify-end",children:l.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:le.accentDark,background:"rgba(232,160,191,0.1)"},onClick:x=>{x.stopPropagation(),a(!o)},children:o?"":""})}),l.jsx(mb,{relatedId:e.related_memory_id,relatedContent:e.related_memory_content,similarity:e.similarity,onOverwrite:s})]}),l.jsx("button",{className:"mt-0.5 flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:le.bg,boxShadow:"var(--card-shadow-sm)"},onClick:x=>{x.stopPropagation(),r()},children:l.jsx(ma,{size:11,style:{color:le.accentDark}})})]}),l.jsx("div",{className:"mt-1",children:l.jsx("span",{className:"text-[10px]",style:{color:le.textMuted},children:fb(e.created_at)})})]})]})}function yb({summaryId:e}){return l.jsxs("div",{className:"flex items-center gap-2 my-3 px-1",children:[l.jsx("div",{className:"flex-1 h-px",style:{background:"rgba(136,136,160,0.2)"}}),l.jsxs("span",{className:"text-[10px] font-medium shrink-0",style:{color:le.textMuted},children:[" #",e]}),l.jsx("div",{className:"flex-1 h-px",style:{background:"rgba(136,136,160,0.2)"}})]})}function vb(){const e=It(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[o,a]=u.useState(new Set),[i,c]=u.useState(null),[d,p]=u.useState(null),[f,h]=u.useState(!1),x=()=>{s(!0),O("/api/pending-memories").then(k=>{n(k.items||[]),a(E=>{const M=new Set((k.items||[]).map($=>$.id));return new Set([...E].filter($=>M.has($)))})}).catch(()=>{}).finally(()=>s(!1))};u.useEffect(()=>{x()},[]);const v=k=>{a(E=>{const M=new Set(E);return M.has(k)?M.delete(k):M.add(k),M})},y=()=>{o.size===t.length?a(new Set):a(new Set(t.map(k=>k.id)))},w=async()=>{if(!f){h(!0);try{await O("/api/pending-memories/confirm",{method:"POST",body:{ids:[...o]}}),a(new Set),x()}catch(k){}h(!1),p(null)}},g=async()=>{if(!f){h(!0);try{await O("/api/pending-memories/dismiss",{method:"POST",body:{ids:[...o]}}),a(new Set),x()}catch(k){}h(!1),p(null)}},m=async(k,E)=>{if(!f){h(!0);try{await O("/api/pending-memories/update-existing",{method:"POST",body:{pending_id:k,target_memory_id:E}}),x()}catch(M){}h(!1),p(null)}},b=async(k,E,M)=>{if(i){try{await O(`/api/pending-memories/${i.id}`,{method:"PATCH",body:{content:k,klass:E,tags:M}}),x()}catch(L){}c(null)}},S=[];let j=Symbol();for(const k of t)k.summary_id!==j&&(j=k.summary_id,S.push({summaryId:j,items:[]})),S[S.length-1].items.push(k);const C=t.length>0&&o.size===t.length;return l.jsxs("div",{className:"flex h-full flex-col",style:{background:le.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:le.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e(-1),children:l.jsx(Ct,{size:22,style:{color:le.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:le.text},children:""}),l.jsx("div",{className:"w-10"})," "]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-6 pt-3",children:r?l.jsx("div",{className:"flex justify-center py-16",children:l.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-t-transparent",style:{borderColor:`${le.accentDark} transparent ${le.accentDark} ${le.accentDark}`}})}):t.length===0?l.jsx("p",{className:"py-16 text-center text-[13px]",style:{color:le.textMuted},children:""}):S.map((k,E)=>l.jsxs("div",{children:[k.summaryId&&l.jsx(yb,{summaryId:k.summaryId}),k.items.map(M=>l.jsx(gb,{item:M,selected:o.has(M.id),onToggle:()=>v(M.id),onEdit:()=>c(M),onOverwrite:()=>{p({type:"overwrite",title:"",message:` #${M.related_memory_id} `,onConfirm:()=>m(M.id,M.related_memory_id)})}},M.id))]},E))}),l.jsxs("div",{className:"flex shrink-0 gap-2 px-5 pb-5 pt-3",style:{background:le.bg,paddingBottom:"max(1.25rem, env(safe-area-inset-bottom))"},children:[l.jsx("button",{className:"rounded-[14px] py-3 text-[13px] font-semibold",style:{flex:1,background:le.bg,boxShadow:C?"var(--inset-shadow)":"var(--card-shadow-sm)",color:C?le.accentDark:le.text},onClick:y,children:C?"":""}),l.jsxs("button",{className:"rounded-[14px] py-3 text-[13px] font-semibold",style:{flex:2,background:le.bg,boxShadow:o.size>0?"var(--card-shadow-sm)":"var(--inset-shadow)",color:o.size>0?"#ef4444":le.textMuted},disabled:o.size===0,onClick:()=>{p({type:"dismiss",title:"",message:` ${o.size} 
`,confirmLabel:"",confirmColor:"#ef4444",onConfirm:g})},children:["",o.size>0?` (${o.size})`:""]}),l.jsxs("button",{className:"rounded-[14px] py-3 text-[13px] font-semibold text-white",style:{flex:2,background:o.size>0?"linear-gradient(135deg, var(--accent), var(--accent-dark))":"#ccc",boxShadow:o.size>0?"4px 4px 10px rgba(201,98,138,0.35)":"none"},disabled:o.size===0,onClick:()=>{p({type:"confirm",title:"",message:` ${o.size} `,confirmLabel:"",onConfirm:w})},children:["",o.size>0?` (${o.size})`:""]})]}),i&&l.jsx(xb,{item:i,onSave:b,onCancel:()=>c(null)}),d&&l.jsx(hb,{title:d.title,message:d.message,confirmLabel:d.confirmLabel||"",confirmColor:d.confirmColor||"#c9628a",onConfirm:d.onConfirm,onCancel:()=>p(null)})]})}const Ce={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function bb({value:e,onChange:t,onClose:n}){return l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:Ce.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:Ce.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ce.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:l.jsx(ir,{size:18,style:{color:Ce.accentDark}})})]}),l.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:Ce.bg,color:Ce.text},placeholder:"..."})]})}function wb(){const e=It(),[t,n]=u.useState(""),[r,s]=u.useState(""),[o,a]=u.useState(""),[i,c]=u.useState(""),[d,p]=u.useState(!1),[f,h]=u.useState(!0),[x,v]=u.useState(null),[y,w]=u.useState(!1),g=u.useRef(null),m=u.useRef(null),b=k=>{v(k),setTimeout(()=>v(null),2e3)};u.useEffect(()=>{O("/api/user/profile").then(k=>{n(k.nickname||""),s(k.background_url||""),a(k.basic_info||"")}).catch(()=>{}).finally(()=>h(!1)),gs("user-avatar").then(k=>{k&&c(k)}).catch(function(){})},[]);const S=k=>{var L;const E=(L=k.target.files)==null?void 0:L[0];if(!E)return;const M=new FileReader;M.onload=async $=>{const ae=$.target.result;try{await sc("user-avatar",ae),c(ae)}catch(K){b("")}},M.readAsDataURL(E),k.target.value=""},j=k=>{var L;const E=(L=k.target.files)==null?void 0:L[0];if(!E)return;const M=new FileReader;M.onload=$=>a($.target.result||""),M.readAsText(E),k.target.value=""},C=async()=>{p(!0);try{const k={nickname:t.trim()||null,background_url:r||null,basic_info:o||null,avatar_url:i?"user-avatar":null};await O("/api/user/profile",{method:"PUT",body:k});try{const E=JSON.parse(localStorage.getItem("whisper_profile")||"{}");localStorage.setItem("whisper_profile",JSON.stringify({...E,...k}))}catch(E){}b("")}catch(k){b("")}finally{p(!1)}};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:Ce.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ce.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(Ct,{size:22,style:{color:Ce.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ce.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ce.bg,boxShadow:d?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:C,disabled:d,children:l.jsx(jl,{size:18,style:{color:Ce.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5 space-y-4",children:f?l.jsx("div",{className:"flex h-40 items-center justify-center",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ce.accent,borderTopColor:"transparent"}})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"rounded-[20px] p-5",style:{background:Ce.bg,boxShadow:"var(--card-shadow)"},children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var k;return(k=g.current)==null?void 0:k.click()},children:[l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Ce.bg},children:i?l.jsx("img",{src:i,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{style:{fontSize:24},children:""})})}),l.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:Ce.accentDark},children:l.jsx($h,{size:9,color:"white"})})]}),l.jsx("input",{ref:g,type:"file",accept:"image/*",className:"hidden",onChange:S}),l.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Ce.textMuted},children:""}),l.jsx("input",{type:"text",value:t,onChange:k=>n(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ce.bg,color:Ce.text}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Ce.textMuted},children:""}),l.jsx("input",{type:"text",value:r,onChange:k=>s(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2 text-[13px] italic outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ce.bg,color:Ce.text}})]})]})]})}),l.jsxs("div",{className:"rounded-[20px] p-5",style:{background:Ce.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[l.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:Ce.textMuted},children:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Ce.bg},onClick:()=>{var k;return(k=m.current)==null?void 0:k.click()},title:"",children:l.jsx(xa,{size:13,style:{color:Ce.textMuted}})}),l.jsx("input",{ref:m,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:j}),l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Ce.bg},onClick:()=>w(!0),title:"",children:l.jsx(kl,{size:13,style:{color:Ce.accentDark}})})]})]}),l.jsx("textarea",{value:o,onChange:k=>a(k.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ce.bg,color:Ce.text}})]})]})}),y&&l.jsx(bb,{value:o,onChange:a,onClose:()=>w(!1)}),x&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:x})})]})}function Or(){var n;const e=(n=window.Telegram)==null?void 0:n.WebApp,t=Math.max((e==null?void 0:e.viewportHeight)||0,window.innerHeight);document.documentElement.style.setProperty("--tg-viewport-height",t+"px")}function kb({onSuccess:e}){const[t,n]=u.useState(""),[r,s]=u.useState(""),[o,a]=u.useState(!1),i=async c=>{if(c.preventDefault(),!!t.trim()){a(!0),s("");try{await Jy(t),e()}catch(d){s(d.message||"")}finally{a(!1)}}};return l.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--bg)",padding:"2rem"},children:l.jsxs("div",{style:{width:"100%",maxWidth:320,borderRadius:24,padding:"2rem 1.5rem",background:"var(--bg)",boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[l.jsx("div",{style:{fontSize:36,marginBottom:8},children:""}),l.jsx("h1",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--text)",margin:0},children:"WHISPER"}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:4},children:""})]}),l.jsxs("form",{onSubmit:i,children:[l.jsx("input",{type:"password",value:t,onChange:c=>n(c.target.value),placeholder:"",autoFocus:!0,style:{width:"100%",padding:"12px 16px",borderRadius:14,border:"none",outline:"none",fontSize:14,color:"var(--text)",background:"var(--bg)",boxShadow:"var(--inset-shadow)",boxSizing:"border-box"}}),r&&l.jsx("p",{style:{color:"#ef4444",fontSize:"0.75rem",textAlign:"center",marginTop:8,marginBottom:0},children:r}),l.jsx("button",{type:"submit",disabled:o||!t.trim(),style:{width:"100%",marginTop:16,padding:"12px 0",borderRadius:14,border:"none",fontSize:14,fontWeight:600,color:"#fff",background:o||!t.trim()?"var(--text-muted)":"linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%)",cursor:o||!t.trim()?"not-allowed":"pointer",boxShadow:"var(--card-shadow-sm)"},children:o?"...":""})]})]})})}function jb(){const e=ru();return u.useEffect(()=>{var n;const t=(n=window.Telegram)==null?void 0:n.WebApp;t&&!e.pathname.startsWith("/cot")&&!e.pathname.startsWith("/pending-memories")&&t.expand(),Or()},[e.pathname]),l.jsxs(Yy,{children:[l.jsx(it,{path:"/",element:l.jsx(wv,{})}),l.jsx(it,{path:"/profile",element:l.jsx(wb,{})}),l.jsx(it,{path:"/world-books",element:l.jsx(d0,{})}),l.jsx(it,{path:"/world-books/new",element:l.jsx(Zd,{})}),l.jsx(it,{path:"/world-books/:id",element:l.jsx(Zd,{})}),l.jsx(it,{path:"/assistants",element:l.jsx(k0,{})}),l.jsx(it,{path:"/assistants/new",element:l.jsx(tf,{})}),l.jsx(it,{path:"/assistants/:id",element:l.jsx(tf,{})}),l.jsx(it,{path:"/settings",element:l.jsx(M0,{})}),l.jsx(it,{path:"/settings/api",element:l.jsx(L0,{})}),l.jsx(it,{path:"/settings/proactive",element:l.jsx(I0,{})}),l.jsx(it,{path:"/cot",element:l.jsx(V0,{})}),l.jsx(it,{path:"/memories",element:l.jsx(nb,{})}),l.jsx(it,{path:"/pending-memories",element:l.jsx(vb,{})}),l.jsx(it,{path:"/diary",element:l.jsx(ub,{})}),l.jsx(it,{path:"/messages",element:l.jsx(Y0,{})})]})}function Sb(){const[e,t]=u.useState(null);return u.useEffect(()=>{var r;const n=(r=window.Telegram)==null?void 0:r.WebApp;return localStorage.getItem("whisper_token")||n&&n.initData&&n.initData.length>0?t("ok"):t("login"),n&&(n.ready(),window.location.hash.startsWith("#/cot")||n.expand()),Or(),n&&n.onEvent("viewportChanged",Or),window.addEventListener("resize",Or),()=>{n&&n.offEvent("viewportChanged",Or),window.removeEventListener("resize",Or)}},[]),e===null?null:e==="login"?l.jsx(kb,{onSuccess:()=>t("ok")}):l.jsx(qy,{children:l.jsx(jb,{})})}window.location.hash&&!window.location.hash.startsWith("#/")&&history.replaceState(null,"",window.location.pathname+"#/cot");ci.createRoot(document.getElementById("root")).render(l.jsx(Pe.StrictMode,{children:l.jsx(Sb,{})}));
