function qh(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function Zh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Od={exports:{}},ko={},Ld={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ks=Symbol.for("react.element"),em=Symbol.for("react.portal"),tm=Symbol.for("react.fragment"),nm=Symbol.for("react.strict_mode"),rm=Symbol.for("react.profiler"),sm=Symbol.for("react.provider"),lm=Symbol.for("react.context"),om=Symbol.for("react.forward_ref"),am=Symbol.for("react.suspense"),im=Symbol.for("react.memo"),cm=Symbol.for("react.lazy"),Hc=Symbol.iterator;function um(e){return e===null||typeof e!="object"?null:(e=Hc&&e[Hc]||e["@@iterator"],typeof e=="function"?e:null)}var Ad={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$d=Object.assign,Fd={};function Ur(e,t,n){this.props=e,this.context=t,this.refs=Fd,this.updater=n||Ad}Ur.prototype.isReactComponent={};Ur.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ur.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Bd(){}Bd.prototype=Ur.prototype;function Ii(e,t,n){this.props=e,this.context=t,this.refs=Fd,this.updater=n||Ad}var Oi=Ii.prototype=new Bd;Oi.constructor=Ii;$d(Oi,Ur.prototype);Oi.isPureReactComponent=!0;var Wc=Array.isArray,Ud=Object.prototype.hasOwnProperty,Li={current:null},Hd={key:!0,ref:!0,__self:!0,__source:!0};function Wd(e,t,n){var r,s={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)Ud.call(t,r)&&!Hd.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:Ks,type:e,key:l,ref:a,props:s,_owner:Li.current}}function dm(e,t){return{$$typeof:Ks,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ai(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ks}function fm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Vc=/\/+/g;function ta(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fm(""+e.key):t.toString(36)}function Dl(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ks:case em:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+ta(a,0):r,Wc(s)?(n="",e!=null&&(n=e.replace(Vc,"$&/")+"/"),Dl(s,t,n,"",function(u){return u})):s!=null&&(Ai(s)&&(s=dm(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Vc,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Wc(e))for(var i=0;i<e.length;i++){l=e[i];var c=r+ta(l,i);a+=Dl(l,t,n,c,s)}else if(c=um(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=r+ta(l,i++),a+=Dl(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ll(e,t,n){if(e==null)return e;var r=[],s=0;return Dl(e,r,"","",function(l){return t.call(n,l,s++)}),r}function pm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ct={current:null},Rl={transition:null},hm={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:Rl,ReactCurrentOwner:Li};function Vd(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:ll,forEach:function(e,t,n){ll(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ll(e,function(){t++}),t},toArray:function(e){return ll(e,function(t){return t})||[]},only:function(e){if(!Ai(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};le.Component=Ur;le.Fragment=tm;le.Profiler=rm;le.PureComponent=Ii;le.StrictMode=nm;le.Suspense=am;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hm;le.act=Vd;le.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=$d({},e.props),s=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=Li.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Ud.call(t,c)&&!Hd.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var u=0;u<c;u++)i[u]=arguments[u+2];r.children=i}return{$$typeof:Ks,type:e.type,key:s,ref:l,props:r,_owner:a}};le.createContext=function(e){return e={$$typeof:lm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sm,_context:e},e.Consumer=e};le.createElement=Wd;le.createFactory=function(e){var t=Wd.bind(null,e);return t.type=e,t};le.createRef=function(){return{current:null}};le.forwardRef=function(e){return{$$typeof:om,render:e}};le.isValidElement=Ai;le.lazy=function(e){return{$$typeof:cm,_payload:{_status:-1,_result:e},_init:pm}};le.memo=function(e,t){return{$$typeof:im,type:e,compare:t===void 0?null:t}};le.startTransition=function(e){var t=Rl.transition;Rl.transition={};try{e()}finally{Rl.transition=t}};le.unstable_act=Vd;le.useCallback=function(e,t){return ct.current.useCallback(e,t)};le.useContext=function(e){return ct.current.useContext(e)};le.useDebugValue=function(){};le.useDeferredValue=function(e){return ct.current.useDeferredValue(e)};le.useEffect=function(e,t){return ct.current.useEffect(e,t)};le.useId=function(){return ct.current.useId()};le.useImperativeHandle=function(e,t,n){return ct.current.useImperativeHandle(e,t,n)};le.useInsertionEffect=function(e,t){return ct.current.useInsertionEffect(e,t)};le.useLayoutEffect=function(e,t){return ct.current.useLayoutEffect(e,t)};le.useMemo=function(e,t){return ct.current.useMemo(e,t)};le.useReducer=function(e,t,n){return ct.current.useReducer(e,t,n)};le.useRef=function(e){return ct.current.useRef(e)};le.useState=function(e){return ct.current.useState(e)};le.useSyncExternalStore=function(e,t,n){return ct.current.useSyncExternalStore(e,t,n)};le.useTransition=function(){return ct.current.useTransition()};le.version="18.3.1";Ld.exports=le;var d=Ld.exports;const Ce=Zh(d),mm=qh({__proto__:null,default:Ce},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xm=d,gm=Symbol.for("react.element"),ym=Symbol.for("react.fragment"),vm=Object.prototype.hasOwnProperty,wm=xm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bm={key:!0,ref:!0,__self:!0,__source:!0};function Xd(e,t,n){var r,s={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)vm.call(t,r)&&!bm.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:gm,type:e,key:l,ref:a,props:s,_owner:wm.current}}ko.Fragment=ym;ko.jsx=Xd;ko.jsxs=Xd;Od.exports=ko;var o=Od.exports,Oa={},Kd={exports:{}},Nt={},Yd={exports:{}},Qd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,O){var U=I.length;I.push(O);e:for(;0<U;){var Q=U-1>>>1,J=I[Q];if(0<s(J,O))I[Q]=O,I[U]=J,U=Q;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var O=I[0],U=I.pop();if(U!==O){I[0]=U;e:for(var Q=0,J=I.length,ke=J>>>1;Q<ke;){var G=2*(Q+1)-1,V=I[G],te=G+1,X=I[te];if(0>s(V,U))te<J&&0>s(X,V)?(I[Q]=X,I[te]=U,Q=te):(I[Q]=V,I[G]=U,Q=G);else if(te<J&&0>s(X,U))I[Q]=X,I[te]=U,Q=te;else break e}}return O}function s(I,O){var U=I.sortIndex-O.sortIndex;return U!==0?U:I.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],u=[],f=1,p=null,h=3,y=!1,b=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(I){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=I)r(u),O.sortIndex=O.expirationTime,t(c,O);else break;O=n(u)}}function S(I){if(v=!1,g(I),!b)if(n(c)!==null)b=!0,ce(j);else{var O=n(u);O!==null&&ue(S,O.startTime-I)}}function j(I,O){b=!1,v&&(v=!1,x(C),C=-1),y=!0;var U=h;try{for(g(O),p=n(c);p!==null&&(!(p.expirationTime>O)||I&&!P());){var Q=p.callback;if(typeof Q=="function"){p.callback=null,h=p.priorityLevel;var J=Q(p.expirationTime<=O);O=e.unstable_now(),typeof J=="function"?p.callback=J:p===n(c)&&r(c),g(O)}else r(c);p=n(c)}if(p!==null)var ke=!0;else{var G=n(u);G!==null&&ue(S,G.startTime-O),ke=!1}return ke}finally{p=null,h=U,y=!1}}var N=!1,k=null,C=-1,z=5,D=-1;function P(){return!(e.unstable_now()-D<z)}function R(){if(k!==null){var I=e.unstable_now();D=I;var O=!0;try{O=k(!0,I)}finally{O?E():(N=!1,k=null)}}else N=!1}var E;if(typeof m=="function")E=function(){m(R)};else if(typeof MessageChannel!="undefined"){var B=new MessageChannel,ee=B.port2;B.port1.onmessage=R,E=function(){ee.postMessage(null)}}else E=function(){w(R,0)};function ce(I){k=I,N||(N=!0,E())}function ue(I,O){C=w(function(){I(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){b||y||(b=!0,ce(j))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(I){switch(h){case 1:case 2:case 3:var O=3;break;default:O=h}var U=h;h=O;try{return I()}finally{h=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,O){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var U=h;h=I;try{return O()}finally{h=U}},e.unstable_scheduleCallback=function(I,O,U){var Q=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?Q+U:Q):U=Q,I){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=U+J,I={id:f++,callback:O,priorityLevel:I,startTime:U,expirationTime:J,sortIndex:-1},U>Q?(I.sortIndex=U,t(u,I),n(c)===null&&I===n(u)&&(v?(x(C),C=-1):v=!0,ue(S,U-Q))):(I.sortIndex=J,t(c,I),b||y||(b=!0,ce(j))),I},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(I){var O=h;return function(){var U=h;h=O;try{return I.apply(this,arguments)}finally{h=U}}}})(Qd);Yd.exports=Qd;var km=Yd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jm=d,St=km;function T(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gd=new Set,Ns={};function nr(e,t){Rr(e,t),Rr(e+"Capture",t)}function Rr(e,t){for(Ns[e]=t,e=0;e<t.length;e++)Gd.add(t[e])}var un=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),La=Object.prototype.hasOwnProperty,Sm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xc={},Kc={};function Nm(e){return La.call(Kc,e)?!0:La.call(Xc,e)?!1:Sm.test(e)?Kc[e]=!0:(Xc[e]=!0,!1)}function Cm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Em(e,t,n,r){if(t===null||typeof t=="undefined"||Cm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ut(e,t,n,r,s,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qe[e]=new ut(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qe[t]=new ut(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qe[e]=new ut(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qe[e]=new ut(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qe[e]=new ut(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qe[e]=new ut(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qe[e]=new ut(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qe[e]=new ut(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qe[e]=new ut(e,5,!1,e.toLowerCase(),null,!1,!1)});var $i=/[\-:]([a-z])/g;function Fi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($i,Fi);qe[t]=new ut(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($i,Fi);qe[t]=new ut(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($i,Fi);qe[t]=new ut(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qe[e]=new ut(e,1,!1,e.toLowerCase(),null,!1,!1)});qe.xlinkHref=new ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qe[e]=new ut(e,1,!1,e.toLowerCase(),null,!0,!0)});function Bi(e,t,n,r){var s=qe.hasOwnProperty(t)?qe[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Em(t,n,s,r)&&(n=null),r||s===null?Nm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var mn=jm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ol=Symbol.for("react.element"),dr=Symbol.for("react.portal"),fr=Symbol.for("react.fragment"),Ui=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Jd=Symbol.for("react.provider"),qd=Symbol.for("react.context"),Hi=Symbol.for("react.forward_ref"),$a=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Wi=Symbol.for("react.memo"),bn=Symbol.for("react.lazy"),Zd=Symbol.for("react.offscreen"),Yc=Symbol.iterator;function ts(e){return e===null||typeof e!="object"?null:(e=Yc&&e[Yc]||e["@@iterator"],typeof e=="function"?e:null)}var Re=Object.assign,na;function cs(e){if(na===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);na=t&&t[1]||""}return`
`+na+e}var ra=!1;function sa(e,t){if(!e||ra)return"";ra=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),l=r.stack.split(`
`),a=s.length-1,i=l.length-1;1<=a&&0<=i&&s[a]!==l[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==l[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==l[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{ra=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?cs(e):""}function Mm(e){switch(e.tag){case 5:return cs(e.type);case 16:return cs("Lazy");case 13:return cs("Suspense");case 19:return cs("SuspenseList");case 0:case 2:case 15:return e=sa(e.type,!1),e;case 11:return e=sa(e.type.render,!1),e;case 1:return e=sa(e.type,!0),e;default:return""}}function Ba(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fr:return"Fragment";case dr:return"Portal";case Aa:return"Profiler";case Ui:return"StrictMode";case $a:return"Suspense";case Fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qd:return(e.displayName||"Context")+".Consumer";case Jd:return(e._context.displayName||"Context")+".Provider";case Hi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wi:return t=e.displayName||null,t!==null?t:Ba(e.type)||"Memo";case bn:t=e._payload,e=e._init;try{return Ba(e(t))}catch(n){}}return null}function _m(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ba(t);case 8:return t===Ui?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ln(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ef(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Tm(e){var t=ef(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function al(e){e._valueTracker||(e._valueTracker=Tm(e))}function tf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ef(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Wl(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ua(e,t){var n=t.checked;return Re({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function Qc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ln(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function nf(e,t){t=t.checked,t!=null&&Bi(e,"checked",t,!1)}function Ha(e,t){nf(e,t);var n=Ln(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Wa(e,t.type,Ln(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Gc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Wa(e,t,n){(t!=="number"||Wl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var us=Array.isArray;function Nr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ln(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Va(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(T(91));return Re({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(T(92));if(us(n)){if(1<n.length)throw Error(T(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ln(n)}}function rf(e,t){var n=Ln(t.value),r=Ln(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function qc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var il,lf=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(il=il||document.createElement("div"),il.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=il.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dm=["Webkit","ms","Moz","O"];Object.keys(ps).forEach(function(e){Dm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ps[t]=ps[e]})});function of(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ps.hasOwnProperty(e)&&ps[e]?(""+t).trim():t+"px"}function af(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=of(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Rm=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ka(e,t){if(t){if(Rm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(T(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(T(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(T(61))}if(t.style!=null&&typeof t.style!="object")throw Error(T(62))}}function Ya(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qa=null;function Vi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ga=null,Cr=null,Er=null;function Zc(e){if(e=Gs(e)){if(typeof Ga!="function")throw Error(T(280));var t=e.stateNode;t&&(t=Eo(t),Ga(e.stateNode,e.type,t))}}function cf(e){Cr?Er?Er.push(e):Er=[e]:Cr=e}function uf(){if(Cr){var e=Cr,t=Er;if(Er=Cr=null,Zc(e),t)for(e=0;e<t.length;e++)Zc(t[e])}}function df(e,t){return e(t)}function ff(){}var la=!1;function pf(e,t,n){if(la)return e(t,n);la=!0;try{return df(e,t,n)}finally{la=!1,(Cr!==null||Er!==null)&&(ff(),uf())}}function Es(e,t){var n=e.stateNode;if(n===null)return null;var r=Eo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(T(231,t,typeof n));return n}var Ja=!1;if(un)try{var ns={};Object.defineProperty(ns,"passive",{get:function(){Ja=!0}}),window.addEventListener("test",ns,ns),window.removeEventListener("test",ns,ns)}catch(e){Ja=!1}function zm(e,t,n,r,s,l,a,i,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var hs=!1,Vl=null,Xl=!1,qa=null,Pm={onError:function(e){hs=!0,Vl=e}};function Im(e,t,n,r,s,l,a,i,c){hs=!1,Vl=null,zm.apply(Pm,arguments)}function Om(e,t,n,r,s,l,a,i,c){if(Im.apply(this,arguments),hs){if(hs){var u=Vl;hs=!1,Vl=null}else throw Error(T(198));Xl||(Xl=!0,qa=u)}}function rr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function hf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function eu(e){if(rr(e)!==e)throw Error(T(188))}function Lm(e){var t=e.alternate;if(!t){if(t=rr(e),t===null)throw Error(T(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return eu(s),e;if(l===r)return eu(s),t;l=l.sibling}throw Error(T(188))}if(n.return!==r.return)n=s,r=l;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=l;break}if(i===r){a=!0,r=s,n=l;break}i=i.sibling}if(!a){for(i=l.child;i;){if(i===n){a=!0,n=l,r=s;break}if(i===r){a=!0,r=l,n=s;break}i=i.sibling}if(!a)throw Error(T(189))}}if(n.alternate!==r)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?e:t}function mf(e){return e=Lm(e),e!==null?xf(e):null}function xf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xf(e);if(t!==null)return t;e=e.sibling}return null}var gf=St.unstable_scheduleCallback,tu=St.unstable_cancelCallback,Am=St.unstable_shouldYield,$m=St.unstable_requestPaint,Le=St.unstable_now,Fm=St.unstable_getCurrentPriorityLevel,Xi=St.unstable_ImmediatePriority,yf=St.unstable_UserBlockingPriority,Kl=St.unstable_NormalPriority,Bm=St.unstable_LowPriority,vf=St.unstable_IdlePriority,jo=null,en=null;function Um(e){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(jo,e,void 0,(e.current.flags&128)===128)}catch(t){}}var Wt=Math.clz32?Math.clz32:Vm,Hm=Math.log,Wm=Math.LN2;function Vm(e){return e>>>=0,e===0?32:31-(Hm(e)/Wm|0)|0}var cl=64,ul=4194304;function ds(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=ds(i):(l&=a,l!==0&&(r=ds(l)))}else a=n&~s,a!==0?r=ds(a):l!==0&&(r=ds(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Wt(t),s=1<<n,r|=e[n],t&=~s;return r}function Xm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Km(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-Wt(l),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=Xm(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function Za(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wf(){var e=cl;return cl<<=1,!(cl&4194240)&&(cl=64),e}function oa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ys(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wt(t),e[t]=n}function Ym(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Wt(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function Ki(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Wt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ye=0;function bf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var kf,Yi,jf,Sf,Nf,ei=!1,dl=[],_n=null,Tn=null,Dn=null,Ms=new Map,_s=new Map,Sn=[],Qm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nu(e,t){switch(e){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":Ms.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_s.delete(t.pointerId)}}function rs(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Gs(t),t!==null&&Yi(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Gm(e,t,n,r,s){switch(t){case"focusin":return _n=rs(_n,e,t,n,r,s),!0;case"dragenter":return Tn=rs(Tn,e,t,n,r,s),!0;case"mouseover":return Dn=rs(Dn,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return Ms.set(l,rs(Ms.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,_s.set(l,rs(_s.get(l)||null,e,t,n,r,s)),!0}return!1}function Cf(e){var t=Vn(e.target);if(t!==null){var n=rr(t);if(n!==null){if(t=n.tag,t===13){if(t=hf(n),t!==null){e.blockedOn=t,Nf(e.priority,function(){jf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ti(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Qa=r,n.target.dispatchEvent(r),Qa=null}else return t=Gs(n),t!==null&&Yi(t),e.blockedOn=n,!1;t.shift()}return!0}function ru(e,t,n){zl(e)&&n.delete(t)}function Jm(){ei=!1,_n!==null&&zl(_n)&&(_n=null),Tn!==null&&zl(Tn)&&(Tn=null),Dn!==null&&zl(Dn)&&(Dn=null),Ms.forEach(ru),_s.forEach(ru)}function ss(e,t){e.blockedOn===t&&(e.blockedOn=null,ei||(ei=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,Jm)))}function Ts(e){function t(s){return ss(s,e)}if(0<dl.length){ss(dl[0],e);for(var n=1;n<dl.length;n++){var r=dl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_n!==null&&ss(_n,e),Tn!==null&&ss(Tn,e),Dn!==null&&ss(Dn,e),Ms.forEach(t),_s.forEach(t),n=0;n<Sn.length;n++)r=Sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Sn.length&&(n=Sn[0],n.blockedOn===null);)Cf(n),n.blockedOn===null&&Sn.shift()}var Mr=mn.ReactCurrentBatchConfig,Ql=!0;function qm(e,t,n,r){var s=ye,l=Mr.transition;Mr.transition=null;try{ye=1,Qi(e,t,n,r)}finally{ye=s,Mr.transition=l}}function Zm(e,t,n,r){var s=ye,l=Mr.transition;Mr.transition=null;try{ye=4,Qi(e,t,n,r)}finally{ye=s,Mr.transition=l}}function Qi(e,t,n,r){if(Ql){var s=ti(e,t,n,r);if(s===null)xa(e,t,r,Gl,n),nu(e,r);else if(Gm(s,e,t,n,r))r.stopPropagation();else if(nu(e,r),t&4&&-1<Qm.indexOf(e)){for(;s!==null;){var l=Gs(s);if(l!==null&&kf(l),l=ti(e,t,n,r),l===null&&xa(e,t,r,Gl,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else xa(e,t,r,null,n)}}var Gl=null;function ti(e,t,n,r){if(Gl=null,e=Vi(r),e=Vn(e),e!==null)if(t=rr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=hf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gl=e,null}function Ef(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fm()){case Xi:return 1;case yf:return 4;case Kl:case Bm:return 16;case vf:return 536870912;default:return 16}default:return 16}}var Cn=null,Gi=null,Pl=null;function Mf(){if(Pl)return Pl;var e,t=Gi,n=t.length,r,s="value"in Cn?Cn.value:Cn.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[l-r];r++);return Pl=s.slice(e,1<r?1-r:void 0)}function Il(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fl(){return!0}function su(){return!1}function Ct(e){function t(n,r,s,l,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?fl:su,this.isPropagationStopped=su,this}return Re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fl)},persist:function(){},isPersistent:fl}),t}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ji=Ct(Hr),Qs=Re({},Hr,{view:0,detail:0}),ex=Ct(Qs),aa,ia,ls,So=Re({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ls&&(ls&&e.type==="mousemove"?(aa=e.screenX-ls.screenX,ia=e.screenY-ls.screenY):ia=aa=0,ls=e),aa)},movementY:function(e){return"movementY"in e?e.movementY:ia}}),lu=Ct(So),tx=Re({},So,{dataTransfer:0}),nx=Ct(tx),rx=Re({},Qs,{relatedTarget:0}),ca=Ct(rx),sx=Re({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),lx=Ct(sx),ox=Re({},Hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ax=Ct(ox),ix=Re({},Hr,{data:0}),ou=Ct(ix),cx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ux={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dx[e])?!!t[e]:!1}function qi(){return fx}var px=Re({},Qs,{key:function(e){if(e.key){var t=cx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Il(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ux[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qi,charCode:function(e){return e.type==="keypress"?Il(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Il(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hx=Ct(px),mx=Re({},So,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),au=Ct(mx),xx=Re({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qi}),gx=Ct(xx),yx=Re({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),vx=Ct(yx),wx=Re({},So,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bx=Ct(wx),kx=[9,13,27,32],Zi=un&&"CompositionEvent"in window,ms=null;un&&"documentMode"in document&&(ms=document.documentMode);var jx=un&&"TextEvent"in window&&!ms,_f=un&&(!Zi||ms&&8<ms&&11>=ms),iu=" ",cu=!1;function Tf(e,t){switch(e){case"keyup":return kx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Df(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pr=!1;function Sx(e,t){switch(e){case"compositionend":return Df(t);case"keypress":return t.which!==32?null:(cu=!0,iu);case"textInput":return e=t.data,e===iu&&cu?null:e;default:return null}}function Nx(e,t){if(pr)return e==="compositionend"||!Zi&&Tf(e,t)?(e=Mf(),Pl=Gi=Cn=null,pr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _f&&t.locale!=="ko"?null:t.data;default:return null}}var Cx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Cx[e.type]:t==="textarea"}function Rf(e,t,n,r){cf(r),t=Jl(t,"onChange"),0<t.length&&(n=new Ji("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var xs=null,Ds=null;function Ex(e){Hf(e,0)}function No(e){var t=xr(e);if(tf(t))return e}function Mx(e,t){if(e==="change")return t}var zf=!1;if(un){var ua;if(un){var da="oninput"in document;if(!da){var du=document.createElement("div");du.setAttribute("oninput","return;"),da=typeof du.oninput=="function"}ua=da}else ua=!1;zf=ua&&(!document.documentMode||9<document.documentMode)}function fu(){xs&&(xs.detachEvent("onpropertychange",Pf),Ds=xs=null)}function Pf(e){if(e.propertyName==="value"&&No(Ds)){var t=[];Rf(t,Ds,e,Vi(e)),pf(Ex,t)}}function _x(e,t,n){e==="focusin"?(fu(),xs=t,Ds=n,xs.attachEvent("onpropertychange",Pf)):e==="focusout"&&fu()}function Tx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return No(Ds)}function Dx(e,t){if(e==="click")return No(t)}function Rx(e,t){if(e==="input"||e==="change")return No(t)}function zx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xt=typeof Object.is=="function"?Object.is:zx;function Rs(e,t){if(Xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!La.call(t,s)||!Xt(e[s],t[s]))return!1}return!0}function pu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hu(e,t){var n=pu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pu(n)}}function If(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?If(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Of(){for(var e=window,t=Wl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=Wl(e.document)}return t}function ec(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Px(e){var t=Of(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&If(n.ownerDocument.documentElement,n)){if(r!==null&&ec(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=hu(n,l);var a=hu(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ix=un&&"documentMode"in document&&11>=document.documentMode,hr=null,ni=null,gs=null,ri=!1;function mu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ri||hr==null||hr!==Wl(r)||(r=hr,"selectionStart"in r&&ec(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gs&&Rs(gs,r)||(gs=r,r=Jl(ni,"onSelect"),0<r.length&&(t=new Ji("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=hr)))}function pl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var mr={animationend:pl("Animation","AnimationEnd"),animationiteration:pl("Animation","AnimationIteration"),animationstart:pl("Animation","AnimationStart"),transitionend:pl("Transition","TransitionEnd")},fa={},Lf={};un&&(Lf=document.createElement("div").style,"AnimationEvent"in window||(delete mr.animationend.animation,delete mr.animationiteration.animation,delete mr.animationstart.animation),"TransitionEvent"in window||delete mr.transitionend.transition);function Co(e){if(fa[e])return fa[e];if(!mr[e])return e;var t=mr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Lf)return fa[e]=t[n];return e}var Af=Co("animationend"),$f=Co("animationiteration"),Ff=Co("animationstart"),Bf=Co("transitionend"),Uf=new Map,xu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $n(e,t){Uf.set(e,t),nr(t,[e])}for(var pa=0;pa<xu.length;pa++){var ha=xu[pa],Ox=ha.toLowerCase(),Lx=ha[0].toUpperCase()+ha.slice(1);$n(Ox,"on"+Lx)}$n(Af,"onAnimationEnd");$n($f,"onAnimationIteration");$n(Ff,"onAnimationStart");$n("dblclick","onDoubleClick");$n("focusin","onFocus");$n("focusout","onBlur");$n(Bf,"onTransitionEnd");Rr("onMouseEnter",["mouseout","mouseover"]);Rr("onMouseLeave",["mouseout","mouseover"]);Rr("onPointerEnter",["pointerout","pointerover"]);Rr("onPointerLeave",["pointerout","pointerover"]);nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nr("onBeforeInput",["compositionend","keypress","textInput","paste"]);nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ax=new Set("cancel close invalid load scroll toggle".split(" ").concat(fs));function gu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Om(r,t,void 0,e),e.currentTarget=null}function Hf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,u=i.currentTarget;if(i=i.listener,c!==l&&s.isPropagationStopped())break e;gu(s,i,u),l=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,u=i.currentTarget,i=i.listener,c!==l&&s.isPropagationStopped())break e;gu(s,i,u),l=c}}}if(Xl)throw e=qa,Xl=!1,qa=null,e}function Ne(e,t){var n=t[ii];n===void 0&&(n=t[ii]=new Set);var r=e+"__bubble";n.has(r)||(Wf(t,e,2,!1),n.add(r))}function ma(e,t,n){var r=0;t&&(r|=4),Wf(n,e,r,t)}var hl="_reactListening"+Math.random().toString(36).slice(2);function zs(e){if(!e[hl]){e[hl]=!0,Gd.forEach(function(n){n!=="selectionchange"&&(Ax.has(n)||ma(n,!1,e),ma(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hl]||(t[hl]=!0,ma("selectionchange",!1,t))}}function Wf(e,t,n,r){switch(Ef(t)){case 1:var s=qm;break;case 4:s=Zm;break;default:s=Qi}n=s.bind(null,t,n,e),s=void 0,!Ja||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function xa(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=Vn(i),a===null)return;if(c=a.tag,c===5||c===6){r=l=a;continue e}i=i.parentNode}}r=r.return}pf(function(){var u=l,f=Vi(n),p=[];e:{var h=Uf.get(e);if(h!==void 0){var y=Ji,b=e;switch(e){case"keypress":if(Il(n)===0)break e;case"keydown":case"keyup":y=hx;break;case"focusin":b="focus",y=ca;break;case"focusout":b="blur",y=ca;break;case"beforeblur":case"afterblur":y=ca;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=lu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=nx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=gx;break;case Af:case $f:case Ff:y=lx;break;case Bf:y=vx;break;case"scroll":y=ex;break;case"wheel":y=bx;break;case"copy":case"cut":case"paste":y=ax;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=au}var v=(t&4)!==0,w=!v&&e==="scroll",x=v?h!==null?h+"Capture":null:h;v=[];for(var m=u,g;m!==null;){g=m;var S=g.stateNode;if(g.tag===5&&S!==null&&(g=S,x!==null&&(S=Es(m,x),S!=null&&v.push(Ps(m,S,g)))),w)break;m=m.return}0<v.length&&(h=new y(h,b,null,n,f),p.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",h&&n!==Qa&&(b=n.relatedTarget||n.fromElement)&&(Vn(b)||b[dn]))break e;if((y||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,y?(b=n.relatedTarget||n.toElement,y=u,b=b?Vn(b):null,b!==null&&(w=rr(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=u),y!==b)){if(v=lu,S="onMouseLeave",x="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(v=au,S="onPointerLeave",x="onPointerEnter",m="pointer"),w=y==null?h:xr(y),g=b==null?h:xr(b),h=new v(S,m+"leave",y,n,f),h.target=w,h.relatedTarget=g,S=null,Vn(f)===u&&(v=new v(x,m+"enter",b,n,f),v.target=g,v.relatedTarget=w,S=v),w=S,y&&b)t:{for(v=y,x=b,m=0,g=v;g;g=ar(g))m++;for(g=0,S=x;S;S=ar(S))g++;for(;0<m-g;)v=ar(v),m--;for(;0<g-m;)x=ar(x),g--;for(;m--;){if(v===x||x!==null&&v===x.alternate)break t;v=ar(v),x=ar(x)}v=null}else v=null;y!==null&&yu(p,h,y,v,!1),b!==null&&w!==null&&yu(p,w,b,v,!0)}}e:{if(h=u?xr(u):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var j=Mx;else if(uu(h))if(zf)j=Rx;else{j=Tx;var N=_x}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=Dx);if(j&&(j=j(e,u))){Rf(p,j,n,f);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&Wa(h,"number",h.value)}switch(N=u?xr(u):window,e){case"focusin":(uu(N)||N.contentEditable==="true")&&(hr=N,ni=u,gs=null);break;case"focusout":gs=ni=hr=null;break;case"mousedown":ri=!0;break;case"contextmenu":case"mouseup":case"dragend":ri=!1,mu(p,n,f);break;case"selectionchange":if(Ix)break;case"keydown":case"keyup":mu(p,n,f)}var k;if(Zi)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else pr?Tf(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(_f&&n.locale!=="ko"&&(pr||C!=="onCompositionStart"?C==="onCompositionEnd"&&pr&&(k=Mf()):(Cn=f,Gi="value"in Cn?Cn.value:Cn.textContent,pr=!0)),N=Jl(u,C),0<N.length&&(C=new ou(C,e,null,n,f),p.push({event:C,listeners:N}),k?C.data=k:(k=Df(n),k!==null&&(C.data=k)))),(k=jx?Sx(e,n):Nx(e,n))&&(u=Jl(u,"onBeforeInput"),0<u.length&&(f=new ou("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:u}),f.data=k))}Hf(p,t)})}function Ps(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Jl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=Es(e,n),l!=null&&r.unshift(Ps(e,l,s)),l=Es(e,t),l!=null&&r.push(Ps(e,l,s))),e=e.return}return r}function ar(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function yu(e,t,n,r,s){for(var l=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,u=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&u!==null&&(i=u,s?(c=Es(n,l),c!=null&&a.unshift(Ps(n,c,i))):s||(c=Es(n,l),c!=null&&a.push(Ps(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var $x=/\r\n?/g,Fx=/\u0000|\uFFFD/g;function vu(e){return(typeof e=="string"?e:""+e).replace($x,`
`).replace(Fx,"")}function ml(e,t,n){if(t=vu(t),vu(e)!==t&&n)throw Error(T(425))}function ql(){}var si=null,li=null;function oi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ai=typeof setTimeout=="function"?setTimeout:void 0,Bx=typeof clearTimeout=="function"?clearTimeout:void 0,wu=typeof Promise=="function"?Promise:void 0,Ux=typeof queueMicrotask=="function"?queueMicrotask:typeof wu!="undefined"?function(e){return wu.resolve(null).then(e).catch(Hx)}:ai;function Hx(e){setTimeout(function(){throw e})}function ga(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ts(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ts(t)}function Rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Wr=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Wr,Is="__reactProps$"+Wr,dn="__reactContainer$"+Wr,ii="__reactEvents$"+Wr,Wx="__reactListeners$"+Wr,Vx="__reactHandles$"+Wr;function Vn(e){var t=e[Zt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dn]||n[Zt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=bu(e);e!==null;){if(n=e[Zt])return n;e=bu(e)}return t}e=n,n=e.parentNode}return null}function Gs(e){return e=e[Zt]||e[dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(T(33))}function Eo(e){return e[Is]||null}var ci=[],gr=-1;function Fn(e){return{current:e}}function Ee(e){0>gr||(e.current=ci[gr],ci[gr]=null,gr--)}function je(e,t){gr++,ci[gr]=e.current,e.current=t}var An={},st=Fn(An),mt=Fn(!1),Jn=An;function zr(e,t){var n=e.type.contextTypes;if(!n)return An;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function xt(e){return e=e.childContextTypes,e!=null}function Zl(){Ee(mt),Ee(st)}function ku(e,t,n){if(st.current!==An)throw Error(T(168));je(st,t),je(mt,n)}function Vf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(T(108,_m(e)||"Unknown",s));return Re({},n,r)}function eo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||An,Jn=st.current,je(st,e),je(mt,mt.current),!0}function ju(e,t,n){var r=e.stateNode;if(!r)throw Error(T(169));n?(e=Vf(e,t,Jn),r.__reactInternalMemoizedMergedChildContext=e,Ee(mt),Ee(st),je(st,e)):Ee(mt),je(mt,n)}var ln=null,Mo=!1,ya=!1;function Xf(e){ln===null?ln=[e]:ln.push(e)}function Xx(e){Mo=!0,Xf(e)}function Bn(){if(!ya&&ln!==null){ya=!0;var e=0,t=ye;try{var n=ln;for(ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ln=null,Mo=!1}catch(s){throw ln!==null&&(ln=ln.slice(e+1)),gf(Xi,Bn),s}finally{ye=t,ya=!1}}return null}var yr=[],vr=0,to=null,no=0,zt=[],Pt=0,qn=null,on=1,an="";function Hn(e,t){yr[vr++]=no,yr[vr++]=to,to=e,no=t}function Kf(e,t,n){zt[Pt++]=on,zt[Pt++]=an,zt[Pt++]=qn,qn=e;var r=on;e=an;var s=32-Wt(r)-1;r&=~(1<<s),n+=1;var l=32-Wt(t)+s;if(30<l){var a=s-s%5;l=(r&(1<<a)-1).toString(32),r>>=a,s-=a,on=1<<32-Wt(t)+s|n<<s|r,an=l+e}else on=1<<l|n<<s|r,an=e}function tc(e){e.return!==null&&(Hn(e,1),Kf(e,1,0))}function nc(e){for(;e===to;)to=yr[--vr],yr[vr]=null,no=yr[--vr],yr[vr]=null;for(;e===qn;)qn=zt[--Pt],zt[Pt]=null,an=zt[--Pt],zt[Pt]=null,on=zt[--Pt],zt[Pt]=null}var jt=null,kt=null,_e=!1,Ht=null;function Yf(e,t){var n=It(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Su(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jt=e,kt=Rn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jt=e,kt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=qn!==null?{id:on,overflow:an}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=It(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,jt=e,kt=null,!0):!1;default:return!1}}function ui(e){return(e.mode&1)!==0&&(e.flags&128)===0}function di(e){if(_e){var t=kt;if(t){var n=t;if(!Su(e,t)){if(ui(e))throw Error(T(418));t=Rn(n.nextSibling);var r=jt;t&&Su(e,t)?Yf(r,n):(e.flags=e.flags&-4097|2,_e=!1,jt=e)}}else{if(ui(e))throw Error(T(418));e.flags=e.flags&-4097|2,_e=!1,jt=e}}}function Nu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jt=e}function xl(e){if(e!==jt)return!1;if(!_e)return Nu(e),_e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!oi(e.type,e.memoizedProps)),t&&(t=kt)){if(ui(e))throw Qf(),Error(T(418));for(;t;)Yf(e,t),t=Rn(t.nextSibling)}if(Nu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(T(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){kt=Rn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}kt=null}}else kt=jt?Rn(e.stateNode.nextSibling):null;return!0}function Qf(){for(var e=kt;e;)e=Rn(e.nextSibling)}function Pr(){kt=jt=null,_e=!1}function rc(e){Ht===null?Ht=[e]:Ht.push(e)}var Kx=mn.ReactCurrentBatchConfig;function os(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var r=n.stateNode}if(!r)throw Error(T(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var i=s.refs;a===null?delete i[l]:i[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,e))}return e}function gl(e,t){throw e=Object.prototype.toString.call(t),Error(T(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cu(e){var t=e._init;return t(e._payload)}function Gf(e){function t(x,m){if(e){var g=x.deletions;g===null?(x.deletions=[m],x.flags|=16):g.push(m)}}function n(x,m){if(!e)return null;for(;m!==null;)t(x,m),m=m.sibling;return null}function r(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function s(x,m){return x=On(x,m),x.index=0,x.sibling=null,x}function l(x,m,g){return x.index=g,e?(g=x.alternate,g!==null?(g=g.index,g<m?(x.flags|=2,m):g):(x.flags|=2,m)):(x.flags|=1048576,m)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function i(x,m,g,S){return m===null||m.tag!==6?(m=Na(g,x.mode,S),m.return=x,m):(m=s(m,g),m.return=x,m)}function c(x,m,g,S){var j=g.type;return j===fr?f(x,m,g.props.children,S,g.key):m!==null&&(m.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===bn&&Cu(j)===m.type)?(S=s(m,g.props),S.ref=os(x,m,g),S.return=x,S):(S=Ul(g.type,g.key,g.props,null,x.mode,S),S.ref=os(x,m,g),S.return=x,S)}function u(x,m,g,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=Ca(g,x.mode,S),m.return=x,m):(m=s(m,g.children||[]),m.return=x,m)}function f(x,m,g,S,j){return m===null||m.tag!==7?(m=Qn(g,x.mode,S,j),m.return=x,m):(m=s(m,g),m.return=x,m)}function p(x,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Na(""+m,x.mode,g),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ol:return g=Ul(m.type,m.key,m.props,null,x.mode,g),g.ref=os(x,null,m),g.return=x,g;case dr:return m=Ca(m,x.mode,g),m.return=x,m;case bn:var S=m._init;return p(x,S(m._payload),g)}if(us(m)||ts(m))return m=Qn(m,x.mode,g,null),m.return=x,m;gl(x,m)}return null}function h(x,m,g,S){var j=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return j!==null?null:i(x,m,""+g,S);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ol:return g.key===j?c(x,m,g,S):null;case dr:return g.key===j?u(x,m,g,S):null;case bn:return j=g._init,h(x,m,j(g._payload),S)}if(us(g)||ts(g))return j!==null?null:f(x,m,g,S,null);gl(x,g)}return null}function y(x,m,g,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(g)||null,i(m,x,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ol:return x=x.get(S.key===null?g:S.key)||null,c(m,x,S,j);case dr:return x=x.get(S.key===null?g:S.key)||null,u(m,x,S,j);case bn:var N=S._init;return y(x,m,g,N(S._payload),j)}if(us(S)||ts(S))return x=x.get(g)||null,f(m,x,S,j,null);gl(m,S)}return null}function b(x,m,g,S){for(var j=null,N=null,k=m,C=m=0,z=null;k!==null&&C<g.length;C++){k.index>C?(z=k,k=null):z=k.sibling;var D=h(x,k,g[C],S);if(D===null){k===null&&(k=z);break}e&&k&&D.alternate===null&&t(x,k),m=l(D,m,C),N===null?j=D:N.sibling=D,N=D,k=z}if(C===g.length)return n(x,k),_e&&Hn(x,C),j;if(k===null){for(;C<g.length;C++)k=p(x,g[C],S),k!==null&&(m=l(k,m,C),N===null?j=k:N.sibling=k,N=k);return _e&&Hn(x,C),j}for(k=r(x,k);C<g.length;C++)z=y(k,x,C,g[C],S),z!==null&&(e&&z.alternate!==null&&k.delete(z.key===null?C:z.key),m=l(z,m,C),N===null?j=z:N.sibling=z,N=z);return e&&k.forEach(function(P){return t(x,P)}),_e&&Hn(x,C),j}function v(x,m,g,S){var j=ts(g);if(typeof j!="function")throw Error(T(150));if(g=j.call(g),g==null)throw Error(T(151));for(var N=j=null,k=m,C=m=0,z=null,D=g.next();k!==null&&!D.done;C++,D=g.next()){k.index>C?(z=k,k=null):z=k.sibling;var P=h(x,k,D.value,S);if(P===null){k===null&&(k=z);break}e&&k&&P.alternate===null&&t(x,k),m=l(P,m,C),N===null?j=P:N.sibling=P,N=P,k=z}if(D.done)return n(x,k),_e&&Hn(x,C),j;if(k===null){for(;!D.done;C++,D=g.next())D=p(x,D.value,S),D!==null&&(m=l(D,m,C),N===null?j=D:N.sibling=D,N=D);return _e&&Hn(x,C),j}for(k=r(x,k);!D.done;C++,D=g.next())D=y(k,x,C,D.value,S),D!==null&&(e&&D.alternate!==null&&k.delete(D.key===null?C:D.key),m=l(D,m,C),N===null?j=D:N.sibling=D,N=D);return e&&k.forEach(function(R){return t(x,R)}),_e&&Hn(x,C),j}function w(x,m,g,S){if(typeof g=="object"&&g!==null&&g.type===fr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case ol:e:{for(var j=g.key,N=m;N!==null;){if(N.key===j){if(j=g.type,j===fr){if(N.tag===7){n(x,N.sibling),m=s(N,g.props.children),m.return=x,x=m;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===bn&&Cu(j)===N.type){n(x,N.sibling),m=s(N,g.props),m.ref=os(x,N,g),m.return=x,x=m;break e}n(x,N);break}else t(x,N);N=N.sibling}g.type===fr?(m=Qn(g.props.children,x.mode,S,g.key),m.return=x,x=m):(S=Ul(g.type,g.key,g.props,null,x.mode,S),S.ref=os(x,m,g),S.return=x,x=S)}return a(x);case dr:e:{for(N=g.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(x,m.sibling),m=s(m,g.children||[]),m.return=x,x=m;break e}else{n(x,m);break}else t(x,m);m=m.sibling}m=Ca(g,x.mode,S),m.return=x,x=m}return a(x);case bn:return N=g._init,w(x,m,N(g._payload),S)}if(us(g))return b(x,m,g,S);if(ts(g))return v(x,m,g,S);gl(x,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(x,m.sibling),m=s(m,g),m.return=x,x=m):(n(x,m),m=Na(g,x.mode,S),m.return=x,x=m),a(x)):n(x,m)}return w}var Ir=Gf(!0),Jf=Gf(!1),ro=Fn(null),so=null,wr=null,sc=null;function lc(){sc=wr=so=null}function oc(e){var t=ro.current;Ee(ro),e._currentValue=t}function fi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _r(e,t){so=e,sc=wr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ht=!0),e.firstContext=null)}function Lt(e){var t=e._currentValue;if(sc!==e)if(e={context:e,memoizedValue:t,next:null},wr===null){if(so===null)throw Error(T(308));wr=e,so.dependencies={lanes:0,firstContext:e}}else wr=wr.next=e;return t}var Xn=null;function ac(e){Xn===null?Xn=[e]:Xn.push(e)}function qf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ac(t)):(n.next=s.next,s.next=n),t.interleaved=n,fn(e,r)}function fn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var kn=!1;function ic(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,fn(e,n)}return s=r.interleaved,s===null?(t.next=t,ac(r)):(t.next=s.next,s.next=t),r.interleaved=t,fn(e,n)}function Ol(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ki(e,n)}}function Eu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function lo(e,t,n,r){var s=e.updateQueue;kn=!1;var l=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,u=c.next;c.next=null,a===null?l=u:a.next=u,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,i=f.lastBaseUpdate,i!==a&&(i===null?f.firstBaseUpdate=u:i.next=u,f.lastBaseUpdate=c))}if(l!==null){var p=s.baseState;a=0,f=u=c=null,i=l;do{var h=i.lane,y=i.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:y,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var b=e,v=i;switch(h=t,y=n,v.tag){case 1:if(b=v.payload,typeof b=="function"){p=b.call(y,p,h);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,h=typeof b=="function"?b.call(y,p,h):b,h==null)break e;p=Re({},p,h);break e;case 2:kn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[i]:h.push(i))}else y={eventTime:y,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},f===null?(u=f=y,c=p):f=f.next=y,a|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;h=i,i=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(f===null&&(c=p),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);er|=a,e.lanes=a,e.memoizedState=p}}function Mu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(T(191,s));s.call(r)}}}var Js={},tn=Fn(Js),Os=Fn(Js),Ls=Fn(Js);function Kn(e){if(e===Js)throw Error(T(174));return e}function cc(e,t){switch(je(Ls,t),je(Os,e),je(tn,Js),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xa(t,e)}Ee(tn),je(tn,t)}function Or(){Ee(tn),Ee(Os),Ee(Ls)}function ep(e){Kn(Ls.current);var t=Kn(tn.current),n=Xa(t,e.type);t!==n&&(je(Os,e),je(tn,n))}function uc(e){Os.current===e&&(Ee(tn),Ee(Os))}var Te=Fn(0);function oo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var va=[];function dc(){for(var e=0;e<va.length;e++)va[e]._workInProgressVersionPrimary=null;va.length=0}var Ll=mn.ReactCurrentDispatcher,wa=mn.ReactCurrentBatchConfig,Zn=0,De=null,Fe=null,Ve=null,ao=!1,ys=!1,As=0,Yx=0;function tt(){throw Error(T(321))}function fc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xt(e[n],t[n]))return!1;return!0}function pc(e,t,n,r,s,l){if(Zn=l,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ll.current=e===null||e.memoizedState===null?qx:Zx,e=n(r,s),ys){l=0;do{if(ys=!1,As=0,25<=l)throw Error(T(301));l+=1,Ve=Fe=null,t.updateQueue=null,Ll.current=eg,e=n(r,s)}while(ys)}if(Ll.current=io,t=Fe!==null&&Fe.next!==null,Zn=0,Ve=Fe=De=null,ao=!1,t)throw Error(T(300));return e}function hc(){var e=As!==0;return As=0,e}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?De.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function At(){if(Fe===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var t=Ve===null?De.memoizedState:Ve.next;if(t!==null)Ve=t,Fe=e;else{if(e===null)throw Error(T(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Ve===null?De.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function $s(e,t){return typeof t=="function"?t(e):t}function ba(e){var t=At(),n=t.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=e;var r=Fe,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var a=s.next;s.next=l.next,l.next=a}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var i=a=null,c=null,u=l;do{var f=u.lane;if((Zn&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(i=c=p,a=r):c=c.next=p,De.lanes|=f,er|=f}u=u.next}while(u!==null&&u!==l);c===null?a=r:c.next=i,Xt(r,t.memoizedState)||(ht=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,De.lanes|=l,er|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ka(e){var t=At(),n=t.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do l=e(l,a.action),a=a.next;while(a!==s);Xt(l,t.memoizedState)||(ht=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function tp(){}function np(e,t){var n=De,r=At(),s=t(),l=!Xt(r.memoizedState,s);if(l&&(r.memoizedState=s,ht=!0),r=r.queue,mc(lp.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||Ve!==null&&Ve.memoizedState.tag&1){if(n.flags|=2048,Fs(9,sp.bind(null,n,r,s,t),void 0,null),Ke===null)throw Error(T(349));Zn&30||rp(n,t,s)}return s}function rp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function sp(e,t,n,r){t.value=n,t.getSnapshot=r,op(t)&&ap(e)}function lp(e,t,n){return n(function(){op(t)&&ap(e)})}function op(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xt(e,n)}catch(r){return!0}}function ap(e){var t=fn(e,1);t!==null&&Vt(t,e,1,-1)}function _u(e){var t=qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:e},t.queue=e,e=e.dispatch=Jx.bind(null,De,e),[t.memoizedState,e]}function Fs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ip(){return At().memoizedState}function Al(e,t,n,r){var s=qt();De.flags|=e,s.memoizedState=Fs(1|t,n,void 0,r===void 0?null:r)}function _o(e,t,n,r){var s=At();r=r===void 0?null:r;var l=void 0;if(Fe!==null){var a=Fe.memoizedState;if(l=a.destroy,r!==null&&fc(r,a.deps)){s.memoizedState=Fs(t,n,l,r);return}}De.flags|=e,s.memoizedState=Fs(1|t,n,l,r)}function Tu(e,t){return Al(8390656,8,e,t)}function mc(e,t){return _o(2048,8,e,t)}function cp(e,t){return _o(4,2,e,t)}function up(e,t){return _o(4,4,e,t)}function dp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fp(e,t,n){return n=n!=null?n.concat([e]):null,_o(4,4,dp.bind(null,t,e),n)}function xc(){}function pp(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&fc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function hp(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&fc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function mp(e,t,n){return Zn&21?(Xt(n,t)||(n=wf(),De.lanes|=n,er|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=n)}function Qx(e,t){var n=ye;ye=n!==0&&4>n?n:4,e(!0);var r=wa.transition;wa.transition={};try{e(!1),t()}finally{ye=n,wa.transition=r}}function xp(){return At().memoizedState}function Gx(e,t,n){var r=In(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gp(e))yp(t,n);else if(n=qf(e,t,n,r),n!==null){var s=it();Vt(n,e,r,s),vp(n,t,r)}}function Jx(e,t,n){var r=In(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gp(e))yp(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,i=l(a,n);if(s.hasEagerState=!0,s.eagerState=i,Xt(i,a)){var c=t.interleaved;c===null?(s.next=s,ac(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch(u){}finally{}n=qf(e,t,s,r),n!==null&&(s=it(),Vt(n,e,r,s),vp(n,t,r))}}function gp(e){var t=e.alternate;return e===De||t!==null&&t===De}function yp(e,t){ys=ao=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function vp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ki(e,n)}}var io={readContext:Lt,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},qx={readContext:Lt,useCallback:function(e,t){return qt().memoizedState=[e,t===void 0?null:t],e},useContext:Lt,useEffect:Tu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Al(4194308,4,dp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Al(4194308,4,e,t)},useInsertionEffect:function(e,t){return Al(4,2,e,t)},useMemo:function(e,t){var n=qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=qt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gx.bind(null,De,e),[r.memoizedState,e]},useRef:function(e){var t=qt();return e={current:e},t.memoizedState=e},useState:_u,useDebugValue:xc,useDeferredValue:function(e){return qt().memoizedState=e},useTransition:function(){var e=_u(!1),t=e[0];return e=Qx.bind(null,e[1]),qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=De,s=qt();if(_e){if(n===void 0)throw Error(T(407));n=n()}else{if(n=t(),Ke===null)throw Error(T(349));Zn&30||rp(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,Tu(lp.bind(null,r,l,e),[e]),r.flags|=2048,Fs(9,sp.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=qt(),t=Ke.identifierPrefix;if(_e){var n=an,r=on;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=As++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Yx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zx={readContext:Lt,useCallback:pp,useContext:Lt,useEffect:mc,useImperativeHandle:fp,useInsertionEffect:cp,useLayoutEffect:up,useMemo:hp,useReducer:ba,useRef:ip,useState:function(){return ba($s)},useDebugValue:xc,useDeferredValue:function(e){var t=At();return mp(t,Fe.memoizedState,e)},useTransition:function(){var e=ba($s)[0],t=At().memoizedState;return[e,t]},useMutableSource:tp,useSyncExternalStore:np,useId:xp,unstable_isNewReconciler:!1},eg={readContext:Lt,useCallback:pp,useContext:Lt,useEffect:mc,useImperativeHandle:fp,useInsertionEffect:cp,useLayoutEffect:up,useMemo:hp,useReducer:ka,useRef:ip,useState:function(){return ka($s)},useDebugValue:xc,useDeferredValue:function(e){var t=At();return Fe===null?t.memoizedState=e:mp(t,Fe.memoizedState,e)},useTransition:function(){var e=ka($s)[0],t=At().memoizedState;return[e,t]},useMutableSource:tp,useSyncExternalStore:np,useId:xp,unstable_isNewReconciler:!1};function Bt(e,t){if(e&&e.defaultProps){t=Re({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function pi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Re({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var To={isMounted:function(e){return(e=e._reactInternals)?rr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=it(),s=In(e),l=cn(r,s);l.payload=t,n!=null&&(l.callback=n),t=zn(e,l,s),t!==null&&(Vt(t,e,s,r),Ol(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=it(),s=In(e),l=cn(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=zn(e,l,s),t!==null&&(Vt(t,e,s,r),Ol(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=it(),r=In(e),s=cn(n,r);s.tag=2,t!=null&&(s.callback=t),t=zn(e,s,r),t!==null&&(Vt(t,e,r,n),Ol(t,e,r))}};function Du(e,t,n,r,s,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!Rs(n,r)||!Rs(s,l):!0}function wp(e,t,n){var r=!1,s=An,l=t.contextType;return typeof l=="object"&&l!==null?l=Lt(l):(s=xt(t)?Jn:st.current,r=t.contextTypes,l=(r=r!=null)?zr(e,s):An),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=To,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function Ru(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&To.enqueueReplaceState(t,t.state,null)}function hi(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ic(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Lt(l):(l=xt(t)?Jn:st.current,s.context=zr(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(pi(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&To.enqueueReplaceState(s,s.state,null),lo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Lr(e,t){try{var n="",r=t;do n+=Mm(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function ja(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function mi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var tg=typeof WeakMap=="function"?WeakMap:Map;function bp(e,t,n){n=cn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){uo||(uo=!0,Ni=r),mi(e,t)},n}function kp(e,t,n){n=cn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){mi(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){mi(e,t),typeof r!="function"&&(Pn===null?Pn=new Set([this]):Pn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function zu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new tg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=mg.bind(null,e,t,n),t.then(e,e))}function Pu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Iu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=cn(-1,1),t.tag=2,zn(n,t,1))),n.lanes|=1),e)}var ng=mn.ReactCurrentOwner,ht=!1;function at(e,t,n,r){t.child=e===null?Jf(t,null,n,r):Ir(t,e.child,n,r)}function Ou(e,t,n,r,s){n=n.render;var l=t.ref;return _r(t,s),r=pc(e,t,n,r,l,s),n=hc(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pn(e,t,s)):(_e&&n&&tc(t),t.flags|=1,at(e,t,r,s),t.child)}function Lu(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!Sc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,jp(e,t,l,r,s)):(e=Ul(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:Rs,n(a,r)&&e.ref===t.ref)return pn(e,t,s)}return t.flags|=1,e=On(l,r),e.ref=t.ref,e.return=t,t.child=e}function jp(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(Rs(l,r)&&e.ref===t.ref)if(ht=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(ht=!0);else return t.lanes=e.lanes,pn(e,t,s)}return xi(e,t,n,r,s)}function Sp(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(kr,bt),bt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,je(kr,bt),bt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,je(kr,bt),bt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,je(kr,bt),bt|=r;return at(e,t,s,n),t.child}function Np(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xi(e,t,n,r,s){var l=xt(n)?Jn:st.current;return l=zr(t,l),_r(t,s),n=pc(e,t,n,r,l,s),r=hc(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pn(e,t,s)):(_e&&r&&tc(t),t.flags|=1,at(e,t,n,s),t.child)}function Au(e,t,n,r,s){if(xt(n)){var l=!0;eo(t)}else l=!1;if(_r(t,s),t.stateNode===null)$l(e,t),wp(t,n,r),hi(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Lt(u):(u=xt(n)?Jn:st.current,u=zr(t,u));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==u)&&Ru(t,a,r,u),kn=!1;var h=t.memoizedState;a.state=h,lo(t,r,a,s),c=t.memoizedState,i!==r||h!==c||mt.current||kn?(typeof f=="function"&&(pi(t,n,f,r),c=t.memoizedState),(i=kn||Du(t,n,i,r,h,c,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Zf(e,t),i=t.memoizedProps,u=t.type===t.elementType?i:Bt(t.type,i),a.props=u,p=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Lt(c):(c=xt(n)?Jn:st.current,c=zr(t,c));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==p||h!==c)&&Ru(t,a,r,c),kn=!1,h=t.memoizedState,a.state=h,lo(t,r,a,s);var b=t.memoizedState;i!==p||h!==b||mt.current||kn?(typeof y=="function"&&(pi(t,n,y,r),b=t.memoizedState),(u=kn||Du(t,n,u,r,h,b,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),a.props=r,a.state=b,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return gi(e,t,n,r,l,s)}function gi(e,t,n,r,s,l){Np(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&ju(t,n,!1),pn(e,t,l);r=t.stateNode,ng.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Ir(t,e.child,null,l),t.child=Ir(t,null,i,l)):at(e,t,i,l),t.memoizedState=r.state,s&&ju(t,n,!0),t.child}function Cp(e){var t=e.stateNode;t.pendingContext?ku(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ku(e,t.context,!1),cc(e,t.containerInfo)}function $u(e,t,n,r,s){return Pr(),rc(s),t.flags|=256,at(e,t,n,r),t.child}var yi={dehydrated:null,treeContext:null,retryLane:0};function vi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ep(e,t,n){var r=t.pendingProps,s=Te.current,l=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),je(Te,s&1),e===null)return di(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=zo(a,r,0,null),e=Qn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=vi(n),t.memoizedState=yi,e):gc(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return rg(e,t,a,r,i,s,n);if(l){l=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=On(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?l=On(i,l):(l=Qn(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?vi(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=yi,r}return l=e.child,e=l.sibling,r=On(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function gc(e,t){return t=zo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function yl(e,t,n,r){return r!==null&&rc(r),Ir(t,e.child,null,n),e=gc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rg(e,t,n,r,s,l,a){if(n)return t.flags&256?(t.flags&=-257,r=ja(Error(T(422))),yl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=zo({mode:"visible",children:r.children},s,0,null),l=Qn(l,s,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Ir(t,e.child,null,a),t.child.memoizedState=vi(a),t.memoizedState=yi,l);if(!(t.mode&1))return yl(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(T(419)),r=ja(l,r,void 0),yl(e,t,a,r)}if(i=(a&e.childLanes)!==0,ht||i){if(r=Ke,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,fn(e,s),Vt(r,e,s,-1))}return jc(),r=ja(Error(T(421))),yl(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=xg.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,kt=Rn(s.nextSibling),jt=t,_e=!0,Ht=null,e!==null&&(zt[Pt++]=on,zt[Pt++]=an,zt[Pt++]=qn,on=e.id,an=e.overflow,qn=t),t=gc(t,r.children),t.flags|=4096,t)}function Fu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),fi(e.return,t,n)}function Sa(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function Mp(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(at(e,t,r.children,n),r=Te.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fu(e,n,t);else if(e.tag===19)Fu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(je(Te,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&oo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Sa(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&oo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Sa(t,!0,n,null,l);break;case"together":Sa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $l(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),er|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(T(153));if(t.child!==null){for(e=t.child,n=On(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=On(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sg(e,t,n){switch(t.tag){case 3:Cp(t),Pr();break;case 5:ep(t);break;case 1:xt(t.type)&&eo(t);break;case 4:cc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;je(ro,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(je(Te,Te.current&1),t.flags|=128,null):n&t.child.childLanes?Ep(e,t,n):(je(Te,Te.current&1),e=pn(e,t,n),e!==null?e.sibling:null);je(Te,Te.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Mp(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),je(Te,Te.current),r)break;return null;case 22:case 23:return t.lanes=0,Sp(e,t,n)}return pn(e,t,n)}var _p,wi,Tp,Dp;_p=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wi=function(){};Tp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Kn(tn.current);var l=null;switch(n){case"input":s=Ua(e,s),r=Ua(e,r),l=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),l=[];break;case"textarea":s=Va(e,s),r=Va(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ql)}Ka(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var i=s[u];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ns.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in r){var c=r[u];if(i=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==i&&(c!=null||i!=null))if(u==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(l||(l=[]),l.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ns.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ne("scroll",e),l||i===c||(l=[])):(l=l||[]).push(u,c))}n&&(l=l||[]).push("style",n);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};Dp=function(e,t,n,r){n!==r&&(t.flags|=4)};function as(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function lg(e,t,n){var r=t.pendingProps;switch(nc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return xt(t.type)&&Zl(),nt(t),null;case 3:return r=t.stateNode,Or(),Ee(mt),Ee(st),dc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(xl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ht!==null&&(Mi(Ht),Ht=null))),wi(e,t),nt(t),null;case 5:uc(t);var s=Kn(Ls.current);if(n=t.type,e!==null&&t.stateNode!=null)Tp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(T(166));return nt(t),null}if(e=Kn(tn.current),xl(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Zt]=t,r[Is]=l,e=(t.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<fs.length;s++)Ne(fs[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Qc(r,l),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ne("invalid",r);break;case"textarea":Jc(r,l),Ne("invalid",r)}Ka(n,l),s=null;for(var a in l)if(l.hasOwnProperty(a)){var i=l[a];a==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&ml(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&ml(r.textContent,i,e),s=["children",""+i]):Ns.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Ne("scroll",r)}switch(n){case"input":al(r),Gc(r,l,!0);break;case"textarea":al(r),qc(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=ql)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Zt]=t,e[Is]=r,_p(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ya(n,r),n){case"dialog":Ne("cancel",e),Ne("close",e),s=r;break;case"iframe":case"object":case"embed":Ne("load",e),s=r;break;case"video":case"audio":for(s=0;s<fs.length;s++)Ne(fs[s],e);s=r;break;case"source":Ne("error",e),s=r;break;case"img":case"image":case"link":Ne("error",e),Ne("load",e),s=r;break;case"details":Ne("toggle",e),s=r;break;case"input":Qc(e,r),s=Ua(e,r),Ne("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),Ne("invalid",e);break;case"textarea":Jc(e,r),s=Va(e,r),Ne("invalid",e);break;default:s=r}Ka(n,s),i=s;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?af(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&lf(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Cs(e,c):typeof c=="number"&&Cs(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ns.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Ne("scroll",e):c!=null&&Bi(e,l,c,a))}switch(n){case"input":al(e),Gc(e,r,!1);break;case"textarea":al(e),qc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ln(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Nr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Nr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ql)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return nt(t),null;case 6:if(e&&t.stateNode!=null)Dp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(T(166));if(n=Kn(Ls.current),Kn(tn.current),xl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Zt]=t,(l=r.nodeValue!==n)&&(e=jt,e!==null))switch(e.tag){case 3:ml(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ml(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zt]=t,t.stateNode=r}return nt(t),null;case 13:if(Ee(Te),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_e&&kt!==null&&t.mode&1&&!(t.flags&128))Qf(),Pr(),t.flags|=98560,l=!1;else if(l=xl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(T(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(T(317));l[Zt]=t}else Pr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;nt(t),l=!1}else Ht!==null&&(Mi(Ht),Ht=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Te.current&1?Ue===0&&(Ue=3):jc())),t.updateQueue!==null&&(t.flags|=4),nt(t),null);case 4:return Or(),wi(e,t),e===null&&zs(t.stateNode.containerInfo),nt(t),null;case 10:return oc(t.type._context),nt(t),null;case 17:return xt(t.type)&&Zl(),nt(t),null;case 19:if(Ee(Te),l=t.memoizedState,l===null)return nt(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)as(l,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=oo(e),a!==null){for(t.flags|=128,as(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return je(Te,Te.current&1|2),t.child}e=e.sibling}l.tail!==null&&Le()>Ar&&(t.flags|=128,r=!0,as(l,!1),t.lanes=4194304)}else{if(!r)if(e=oo(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),as(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!_e)return nt(t),null}else 2*Le()-l.renderingStartTime>Ar&&n!==1073741824&&(t.flags|=128,r=!0,as(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Le(),t.sibling=null,n=Te.current,je(Te,r?n&1|2:n&1),t):(nt(t),null);case 22:case 23:return kc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?bt&1073741824&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),null;case 24:return null;case 25:return null}throw Error(T(156,t.tag))}function og(e,t){switch(nc(t),t.tag){case 1:return xt(t.type)&&Zl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Or(),Ee(mt),Ee(st),dc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return uc(t),null;case 13:if(Ee(Te),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(T(340));Pr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ee(Te),null;case 4:return Or(),null;case 10:return oc(t.type._context),null;case 22:case 23:return kc(),null;case 24:return null;default:return null}}var vl=!1,rt=!1,ag=typeof WeakSet=="function"?WeakSet:Set,H=null;function br(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ie(e,t,r)}else n.current=null}function bi(e,t,n){try{n()}catch(r){Ie(e,t,r)}}var Bu=!1;function ig(e,t){if(si=Ql,e=Of(),ec(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch(S){n=null;break e}var a=0,i=-1,c=-1,u=0,f=0,p=e,h=null;t:for(;;){for(var y;p!==n||s!==0&&p.nodeType!==3||(i=a+s),p!==l||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(y=p.firstChild)!==null;)h=p,p=y;for(;;){if(p===e)break t;if(h===n&&++u===s&&(i=a),h===l&&++f===r&&(c=a),(y=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=y}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(li={focusedElem:e,selectionRange:n},Ql=!1,H=t;H!==null;)if(t=H,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,H=e;else for(;H!==null;){t=H;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,w=b.memoizedState,x=t.stateNode,m=x.getSnapshotBeforeUpdate(t.elementType===t.type?v:Bt(t.type,v),w);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(S){Ie(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,H=e;break}H=t.return}return b=Bu,Bu=!1,b}function vs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&bi(t,n,l)}s=s.next}while(s!==r)}}function Do(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ki(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Rp(e){var t=e.alternate;t!==null&&(e.alternate=null,Rp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Zt],delete t[Is],delete t[ii],delete t[Wx],delete t[Vx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zp(e){return e.tag===5||e.tag===3||e.tag===4}function Uu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ji(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ql));else if(r!==4&&(e=e.child,e!==null))for(ji(e,t,n),e=e.sibling;e!==null;)ji(e,t,n),e=e.sibling}function Si(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Si(e,t,n),e=e.sibling;e!==null;)Si(e,t,n),e=e.sibling}var Ge=null,Ut=!1;function wn(e,t,n){for(n=n.child;n!==null;)Pp(e,t,n),n=n.sibling}function Pp(e,t,n){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(jo,n)}catch(i){}switch(n.tag){case 5:rt||br(n,t);case 6:var r=Ge,s=Ut;Ge=null,wn(e,t,n),Ge=r,Ut=s,Ge!==null&&(Ut?(e=Ge,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(Ut?(e=Ge,n=n.stateNode,e.nodeType===8?ga(e.parentNode,n):e.nodeType===1&&ga(e,n),Ts(e)):ga(Ge,n.stateNode));break;case 4:r=Ge,s=Ut,Ge=n.stateNode.containerInfo,Ut=!0,wn(e,t,n),Ge=r,Ut=s;break;case 0:case 11:case 14:case 15:if(!rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&bi(n,t,a),s=s.next}while(s!==r)}wn(e,t,n);break;case 1:if(!rt&&(br(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Ie(n,t,i)}wn(e,t,n);break;case 21:wn(e,t,n);break;case 22:n.mode&1?(rt=(r=rt)||n.memoizedState!==null,wn(e,t,n),rt=r):wn(e,t,n);break;default:wn(e,t,n)}}function Hu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ag),t.forEach(function(r){var s=gg.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ft(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:Ge=i.stateNode,Ut=!1;break e;case 3:Ge=i.stateNode.containerInfo,Ut=!0;break e;case 4:Ge=i.stateNode.containerInfo,Ut=!0;break e}i=i.return}if(Ge===null)throw Error(T(160));Pp(l,a,s),Ge=null,Ut=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ie(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ip(t,e),t=t.sibling}function Ip(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ft(t,e),Jt(e),r&4){try{vs(3,e,e.return),Do(3,e)}catch(v){Ie(e,e.return,v)}try{vs(5,e,e.return)}catch(v){Ie(e,e.return,v)}}break;case 1:Ft(t,e),Jt(e),r&512&&n!==null&&br(n,n.return);break;case 5:if(Ft(t,e),Jt(e),r&512&&n!==null&&br(n,n.return),e.flags&32){var s=e.stateNode;try{Cs(s,"")}catch(v){Ie(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&nf(s,l),Ya(i,a);var u=Ya(i,l);for(a=0;a<c.length;a+=2){var f=c[a],p=c[a+1];f==="style"?af(s,p):f==="dangerouslySetInnerHTML"?lf(s,p):f==="children"?Cs(s,p):Bi(s,f,p,u)}switch(i){case"input":Ha(s,l);break;case"textarea":rf(s,l);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var y=l.value;y!=null?Nr(s,!!l.multiple,y,!1):h!==!!l.multiple&&(l.defaultValue!=null?Nr(s,!!l.multiple,l.defaultValue,!0):Nr(s,!!l.multiple,l.multiple?[]:"",!1))}s[Is]=l}catch(v){Ie(e,e.return,v)}}break;case 6:if(Ft(t,e),Jt(e),r&4){if(e.stateNode===null)throw Error(T(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(v){Ie(e,e.return,v)}}break;case 3:if(Ft(t,e),Jt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ts(t.containerInfo)}catch(v){Ie(e,e.return,v)}break;case 4:Ft(t,e),Jt(e);break;case 13:Ft(t,e),Jt(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(wc=Le())),r&4&&Hu(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(rt=(u=rt)||f,Ft(t,e),rt=u):Ft(t,e),Jt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(H=e,f=e.child;f!==null;){for(p=H=f;H!==null;){switch(h=H,y=h.child,h.tag){case 0:case 11:case 14:case 15:vs(4,h,h.return);break;case 1:br(h,h.return);var b=h.stateNode;if(typeof b.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(v){Ie(r,n,v)}}break;case 5:br(h,h.return);break;case 22:if(h.memoizedState!==null){Vu(p);continue}}y!==null?(y.return=h,H=y):Vu(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,u?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=of("display",a))}catch(v){Ie(e,e.return,v)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(v){Ie(e,e.return,v)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ft(t,e),Jt(e),r&4&&Hu(e);break;case 21:break;default:Ft(t,e),Jt(e)}}function Jt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(zp(n)){var r=n;break e}n=n.return}throw Error(T(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Cs(s,""),r.flags&=-33);var l=Uu(e);Si(e,l,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=Uu(e);ji(e,i,a);break;default:throw Error(T(161))}}catch(c){Ie(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cg(e,t,n){H=e,Op(e)}function Op(e,t,n){for(var r=(e.mode&1)!==0;H!==null;){var s=H,l=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||vl;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||rt;i=vl;var u=rt;if(vl=a,(rt=c)&&!u)for(H=s;H!==null;)a=H,c=a.child,a.tag===22&&a.memoizedState!==null?Xu(s):c!==null?(c.return=a,H=c):Xu(s);for(;l!==null;)H=l,Op(l),l=l.sibling;H=s,vl=i,rt=u}Wu(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,H=l):Wu(e)}}function Wu(e){for(;H!==null;){var t=H;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rt||Do(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!rt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Bt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Mu(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Mu(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Ts(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}rt||t.flags&512&&ki(t)}catch(h){Ie(t,t.return,h)}}if(t===e){H=null;break}if(n=t.sibling,n!==null){n.return=t.return,H=n;break}H=t.return}}function Vu(e){for(;H!==null;){var t=H;if(t===e){H=null;break}var n=t.sibling;if(n!==null){n.return=t.return,H=n;break}H=t.return}}function Xu(e){for(;H!==null;){var t=H;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Do(4,t)}catch(c){Ie(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ie(t,s,c)}}var l=t.return;try{ki(t)}catch(c){Ie(t,l,c)}break;case 5:var a=t.return;try{ki(t)}catch(c){Ie(t,a,c)}}}catch(c){Ie(t,t.return,c)}if(t===e){H=null;break}var i=t.sibling;if(i!==null){i.return=t.return,H=i;break}H=t.return}}var ug=Math.ceil,co=mn.ReactCurrentDispatcher,yc=mn.ReactCurrentOwner,Ot=mn.ReactCurrentBatchConfig,de=0,Ke=null,Ae=null,Je=0,bt=0,kr=Fn(0),Ue=0,Bs=null,er=0,Ro=0,vc=0,ws=null,pt=null,wc=0,Ar=1/0,sn=null,uo=!1,Ni=null,Pn=null,wl=!1,En=null,fo=0,bs=0,Ci=null,Fl=-1,Bl=0;function it(){return de&6?Le():Fl!==-1?Fl:Fl=Le()}function In(e){return e.mode&1?de&2&&Je!==0?Je&-Je:Kx.transition!==null?(Bl===0&&(Bl=wf()),Bl):(e=ye,e!==0||(e=window.event,e=e===void 0?16:Ef(e.type)),e):1}function Vt(e,t,n,r){if(50<bs)throw bs=0,Ci=null,Error(T(185));Ys(e,n,r),(!(de&2)||e!==Ke)&&(e===Ke&&(!(de&2)&&(Ro|=n),Ue===4&&Nn(e,Je)),gt(e,r),n===1&&de===0&&!(t.mode&1)&&(Ar=Le()+500,Mo&&Bn()))}function gt(e,t){var n=e.callbackNode;Km(e,t);var r=Yl(e,e===Ke?Je:0);if(r===0)n!==null&&tu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&tu(n),t===1)e.tag===0?Xx(Ku.bind(null,e)):Xf(Ku.bind(null,e)),Ux(function(){!(de&6)&&Bn()}),n=null;else{switch(bf(r)){case 1:n=Xi;break;case 4:n=yf;break;case 16:n=Kl;break;case 536870912:n=vf;break;default:n=Kl}n=Wp(n,Lp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Lp(e,t){if(Fl=-1,Bl=0,de&6)throw Error(T(327));var n=e.callbackNode;if(Tr()&&e.callbackNode!==n)return null;var r=Yl(e,e===Ke?Je:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=po(e,r);else{t=r;var s=de;de|=2;var l=$p();(Ke!==e||Je!==t)&&(sn=null,Ar=Le()+500,Yn(e,t));do try{pg();break}catch(i){Ap(e,i)}while(!0);lc(),co.current=l,de=s,Ae!==null?t=0:(Ke=null,Je=0,t=Ue)}if(t!==0){if(t===2&&(s=Za(e),s!==0&&(r=s,t=Ei(e,s))),t===1)throw n=Bs,Yn(e,0),Nn(e,r),gt(e,Le()),n;if(t===6)Nn(e,r);else{if(s=e.current.alternate,!(r&30)&&!dg(s)&&(t=po(e,r),t===2&&(l=Za(e),l!==0&&(r=l,t=Ei(e,l))),t===1))throw n=Bs,Yn(e,0),Nn(e,r),gt(e,Le()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(T(345));case 2:Wn(e,pt,sn);break;case 3:if(Nn(e,r),(r&130023424)===r&&(t=wc+500-Le(),10<t)){if(Yl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){it(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ai(Wn.bind(null,e,pt,sn),t);break}Wn(e,pt,sn);break;case 4:if(Nn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Wt(r);l=1<<a,a=t[a],a>s&&(s=a),r&=~l}if(r=s,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ug(r/1960))-r,10<r){e.timeoutHandle=ai(Wn.bind(null,e,pt,sn),r);break}Wn(e,pt,sn);break;case 5:Wn(e,pt,sn);break;default:throw Error(T(329))}}}return gt(e,Le()),e.callbackNode===n?Lp.bind(null,e):null}function Ei(e,t){var n=ws;return e.current.memoizedState.isDehydrated&&(Yn(e,t).flags|=256),e=po(e,t),e!==2&&(t=pt,pt=n,t!==null&&Mi(t)),e}function Mi(e){pt===null?pt=e:pt.push.apply(pt,e)}function dg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!Xt(l(),s))return!1}catch(a){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nn(e,t){for(t&=~vc,t&=~Ro,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function Ku(e){if(de&6)throw Error(T(327));Tr();var t=Yl(e,0);if(!(t&1))return gt(e,Le()),null;var n=po(e,t);if(e.tag!==0&&n===2){var r=Za(e);r!==0&&(t=r,n=Ei(e,r))}if(n===1)throw n=Bs,Yn(e,0),Nn(e,t),gt(e,Le()),n;if(n===6)throw Error(T(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wn(e,pt,sn),gt(e,Le()),null}function bc(e,t){var n=de;de|=1;try{return e(t)}finally{de=n,de===0&&(Ar=Le()+500,Mo&&Bn())}}function tr(e){En!==null&&En.tag===0&&!(de&6)&&Tr();var t=de;de|=1;var n=Ot.transition,r=ye;try{if(Ot.transition=null,ye=1,e)return e()}finally{ye=r,Ot.transition=n,de=t,!(de&6)&&Bn()}}function kc(){bt=kr.current,Ee(kr)}function Yn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Bx(n)),Ae!==null)for(n=Ae.return;n!==null;){var r=n;switch(nc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zl();break;case 3:Or(),Ee(mt),Ee(st),dc();break;case 5:uc(r);break;case 4:Or();break;case 13:Ee(Te);break;case 19:Ee(Te);break;case 10:oc(r.type._context);break;case 22:case 23:kc()}n=n.return}if(Ke=e,Ae=e=On(e.current,null),Je=bt=t,Ue=0,Bs=null,vc=Ro=er=0,pt=ws=null,Xn!==null){for(t=0;t<Xn.length;t++)if(n=Xn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=s,r.next=a}n.pending=r}Xn=null}return e}function Ap(e,t){do{var n=Ae;try{if(lc(),Ll.current=io,ao){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ao=!1}if(Zn=0,Ve=Fe=De=null,ys=!1,As=0,yc.current=null,n===null||n.return===null){Ue=1,Bs=t,Ae=null;break}e:{var l=e,a=n.return,i=n,c=t;if(t=Je,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=i,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=Pu(a);if(y!==null){y.flags&=-257,Iu(y,a,i,l,t),y.mode&1&&zu(l,u,t),t=y,c=u;var b=t.updateQueue;if(b===null){var v=new Set;v.add(c),t.updateQueue=v}else b.add(c);break e}else{if(!(t&1)){zu(l,u,t),jc();break e}c=Error(T(426))}}else if(_e&&i.mode&1){var w=Pu(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Iu(w,a,i,l,t),rc(Lr(c,i));break e}}l=c=Lr(c,i),Ue!==4&&(Ue=2),ws===null?ws=[l]:ws.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var x=bp(l,c,t);Eu(l,x);break e;case 1:i=c;var m=l.type,g=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Pn===null||!Pn.has(g)))){l.flags|=65536,t&=-t,l.lanes|=t;var S=kp(l,i,t);Eu(l,S);break e}}l=l.return}while(l!==null)}Bp(n)}catch(j){t=j,Ae===n&&n!==null&&(Ae=n=n.return);continue}break}while(!0)}function $p(){var e=co.current;return co.current=io,e===null?io:e}function jc(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),Ke===null||!(er&268435455)&&!(Ro&268435455)||Nn(Ke,Je)}function po(e,t){var n=de;de|=2;var r=$p();(Ke!==e||Je!==t)&&(sn=null,Yn(e,t));do try{fg();break}catch(s){Ap(e,s)}while(!0);if(lc(),de=n,co.current=r,Ae!==null)throw Error(T(261));return Ke=null,Je=0,Ue}function fg(){for(;Ae!==null;)Fp(Ae)}function pg(){for(;Ae!==null&&!Am();)Fp(Ae)}function Fp(e){var t=Hp(e.alternate,e,bt);e.memoizedProps=e.pendingProps,t===null?Bp(e):Ae=t,yc.current=null}function Bp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=og(n,t),n!==null){n.flags&=32767,Ae=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ue=6,Ae=null;return}}else if(n=lg(n,t,bt),n!==null){Ae=n;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);Ue===0&&(Ue=5)}function Wn(e,t,n){var r=ye,s=Ot.transition;try{Ot.transition=null,ye=1,hg(e,t,n,r)}finally{Ot.transition=s,ye=r}return null}function hg(e,t,n,r){do Tr();while(En!==null);if(de&6)throw Error(T(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(T(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Ym(e,l),e===Ke&&(Ae=Ke=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wl||(wl=!0,Wp(Kl,function(){return Tr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Ot.transition,Ot.transition=null;var a=ye;ye=1;var i=de;de|=4,yc.current=null,ig(e,n),Ip(n,e),Px(li),Ql=!!si,li=si=null,e.current=n,cg(n),$m(),de=i,ye=a,Ot.transition=l}else e.current=n;if(wl&&(wl=!1,En=e,fo=s),l=e.pendingLanes,l===0&&(Pn=null),Um(n.stateNode),gt(e,Le()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(uo)throw uo=!1,e=Ni,Ni=null,e;return fo&1&&e.tag!==0&&Tr(),l=e.pendingLanes,l&1?e===Ci?bs++:(bs=0,Ci=e):bs=0,Bn(),null}function Tr(){if(En!==null){var e=bf(fo),t=Ot.transition,n=ye;try{if(Ot.transition=null,ye=16>e?16:e,En===null)var r=!1;else{if(e=En,En=null,fo=0,de&6)throw Error(T(331));var s=de;for(de|=4,H=e.current;H!==null;){var l=H,a=l.child;if(H.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var u=i[c];for(H=u;H!==null;){var f=H;switch(f.tag){case 0:case 11:case 15:vs(8,f,l)}var p=f.child;if(p!==null)p.return=f,H=p;else for(;H!==null;){f=H;var h=f.sibling,y=f.return;if(Rp(f),f===u){H=null;break}if(h!==null){h.return=y,H=h;break}H=y}}}var b=l.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}H=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,H=a;else e:for(;H!==null;){if(l=H,l.flags&2048)switch(l.tag){case 0:case 11:case 15:vs(9,l,l.return)}var x=l.sibling;if(x!==null){x.return=l.return,H=x;break e}H=l.return}}var m=e.current;for(H=m;H!==null;){a=H;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,H=g;else e:for(a=m;H!==null;){if(i=H,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Do(9,i)}}catch(j){Ie(i,i.return,j)}if(i===a){H=null;break e}var S=i.sibling;if(S!==null){S.return=i.return,H=S;break e}H=i.return}}if(de=s,Bn(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(jo,e)}catch(j){}r=!0}return r}finally{ye=n,Ot.transition=t}}return!1}function Yu(e,t,n){t=Lr(n,t),t=bp(e,t,1),e=zn(e,t,1),t=it(),e!==null&&(Ys(e,1,t),gt(e,t))}function Ie(e,t,n){if(e.tag===3)Yu(e,e,n);else for(;t!==null;){if(t.tag===3){Yu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pn===null||!Pn.has(r))){e=Lr(n,e),e=kp(t,e,1),t=zn(t,e,1),e=it(),t!==null&&(Ys(t,1,e),gt(t,e));break}}t=t.return}}function mg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&n,Ke===e&&(Je&n)===n&&(Ue===4||Ue===3&&(Je&130023424)===Je&&500>Le()-wc?Yn(e,0):vc|=n),gt(e,t)}function Up(e,t){t===0&&(e.mode&1?(t=ul,ul<<=1,!(ul&130023424)&&(ul=4194304)):t=1);var n=it();e=fn(e,t),e!==null&&(Ys(e,t,n),gt(e,n))}function xg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Up(e,n)}function gg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(T(314))}r!==null&&r.delete(t),Up(e,n)}var Hp;Hp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)ht=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ht=!1,sg(e,t,n);ht=!!(e.flags&131072)}else ht=!1,_e&&t.flags&1048576&&Kf(t,no,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$l(e,t),e=t.pendingProps;var s=zr(t,st.current);_r(t,n),s=pc(null,t,r,e,s,n);var l=hc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xt(r)?(l=!0,eo(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ic(t),s.updater=To,t.stateNode=s,s._reactInternals=t,hi(t,r,e,n),t=gi(null,t,r,!0,l,n)):(t.tag=0,_e&&l&&tc(t),at(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch($l(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=vg(r),e=Bt(r,e),s){case 0:t=xi(null,t,r,e,n);break e;case 1:t=Au(null,t,r,e,n);break e;case 11:t=Ou(null,t,r,e,n);break e;case 14:t=Lu(null,t,r,Bt(r.type,e),n);break e}throw Error(T(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),xi(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),Au(e,t,r,s,n);case 3:e:{if(Cp(t),e===null)throw Error(T(387));r=t.pendingProps,l=t.memoizedState,s=l.element,Zf(e,t),lo(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Lr(Error(T(423)),t),t=$u(e,t,r,n,s);break e}else if(r!==s){s=Lr(Error(T(424)),t),t=$u(e,t,r,n,s);break e}else for(kt=Rn(t.stateNode.containerInfo.firstChild),jt=t,_e=!0,Ht=null,n=Jf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pr(),r===s){t=pn(e,t,n);break e}at(e,t,r,n)}t=t.child}return t;case 5:return ep(t),e===null&&di(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,a=s.children,oi(r,s)?a=null:l!==null&&oi(r,l)&&(t.flags|=32),Np(e,t),at(e,t,a,n),t.child;case 6:return e===null&&di(t),null;case 13:return Ep(e,t,n);case 4:return cc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ir(t,null,r,n):at(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),Ou(e,t,r,s,n);case 7:return at(e,t,t.pendingProps,n),t.child;case 8:return at(e,t,t.pendingProps.children,n),t.child;case 12:return at(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,a=s.value,je(ro,r._currentValue),r._currentValue=a,l!==null)if(Xt(l.value,a)){if(l.children===s.children&&!mt.current){t=pn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){a=l.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=cn(-1,n&-n),c.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),fi(l.return,n,t),i.lanes|=n;break}c=c.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(T(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),fi(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}at(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,_r(t,n),s=Lt(s),r=r(s),t.flags|=1,at(e,t,r,n),t.child;case 14:return r=t.type,s=Bt(r,t.pendingProps),s=Bt(r.type,s),Lu(e,t,r,s,n);case 15:return jp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),$l(e,t),t.tag=1,xt(r)?(e=!0,eo(t)):e=!1,_r(t,n),wp(t,r,s),hi(t,r,s,n),gi(null,t,r,!0,e,n);case 19:return Mp(e,t,n);case 22:return Sp(e,t,n)}throw Error(T(156,t.tag))};function Wp(e,t){return gf(e,t)}function yg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,t,n,r){return new yg(e,t,n,r)}function Sc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vg(e){if(typeof e=="function")return Sc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Hi)return 11;if(e===Wi)return 14}return 2}function On(e,t){var n=e.alternate;return n===null?(n=It(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ul(e,t,n,r,s,l){var a=2;if(r=e,typeof e=="function")Sc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case fr:return Qn(n.children,s,l,t);case Ui:a=8,s|=8;break;case Aa:return e=It(12,n,t,s|2),e.elementType=Aa,e.lanes=l,e;case $a:return e=It(13,n,t,s),e.elementType=$a,e.lanes=l,e;case Fa:return e=It(19,n,t,s),e.elementType=Fa,e.lanes=l,e;case Zd:return zo(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Jd:a=10;break e;case qd:a=9;break e;case Hi:a=11;break e;case Wi:a=14;break e;case bn:a=16,r=null;break e}throw Error(T(130,e==null?e:typeof e,""))}return t=It(a,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function Qn(e,t,n,r){return e=It(7,e,r,t),e.lanes=n,e}function zo(e,t,n,r){return e=It(22,e,r,t),e.elementType=Zd,e.lanes=n,e.stateNode={isHidden:!1},e}function Na(e,t,n){return e=It(6,e,null,t),e.lanes=n,e}function Ca(e,t,n){return t=It(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wg(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oa(0),this.expirationTimes=oa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oa(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Nc(e,t,n,r,s,l,a,i,c){return e=new wg(e,t,n,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=It(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ic(l),e}function bg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Vp(e){if(!e)return An;e=e._reactInternals;e:{if(rr(e)!==e||e.tag!==1)throw Error(T(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(T(171))}if(e.tag===1){var n=e.type;if(xt(n))return Vf(e,n,t)}return t}function Xp(e,t,n,r,s,l,a,i,c){return e=Nc(n,r,!0,e,s,l,a,i,c),e.context=Vp(null),n=e.current,r=it(),s=In(n),l=cn(r,s),l.callback=t!=null?t:null,zn(n,l,s),e.current.lanes=s,Ys(e,s,r),gt(e,r),e}function Po(e,t,n,r){var s=t.current,l=it(),a=In(s);return n=Vp(n),t.context===null?t.context=n:t.pendingContext=n,t=cn(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=zn(s,t,a),e!==null&&(Vt(e,s,a,l),Ol(e,s,a)),a}function ho(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Qu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Cc(e,t){Qu(e,t),(e=e.alternate)&&Qu(e,t)}function kg(){return null}var Kp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ec(e){this._internalRoot=e}Io.prototype.render=Ec.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(T(409));Po(e,t,null,null)};Io.prototype.unmount=Ec.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tr(function(){Po(null,e,null,null)}),t[dn]=null}};function Io(e){this._internalRoot=e}Io.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sn.length&&t!==0&&t<Sn[n].priority;n++);Sn.splice(n,0,e),n===0&&Cf(e)}};function Mc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Oo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gu(){}function jg(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var u=ho(a);l.call(u)}}var a=Xp(t,r,e,0,null,!1,!1,"",Gu);return e._reactRootContainer=a,e[dn]=a.current,zs(e.nodeType===8?e.parentNode:e),tr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var u=ho(c);i.call(u)}}var c=Nc(e,0,!1,null,null,!1,!1,"",Gu);return e._reactRootContainer=c,e[dn]=c.current,zs(e.nodeType===8?e.parentNode:e),tr(function(){Po(t,c,n,r)}),c}function Lo(e,t,n,r,s){var l=n._reactRootContainer;if(l){var a=l;if(typeof s=="function"){var i=s;s=function(){var c=ho(a);i.call(c)}}Po(t,a,e,s)}else a=jg(n,t,e,s,r);return ho(a)}kf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ds(t.pendingLanes);n!==0&&(Ki(t,n|1),gt(t,Le()),!(de&6)&&(Ar=Le()+500,Bn()))}break;case 13:tr(function(){var r=fn(e,1);if(r!==null){var s=it();Vt(r,e,1,s)}}),Cc(e,1)}};Yi=function(e){if(e.tag===13){var t=fn(e,134217728);if(t!==null){var n=it();Vt(t,e,134217728,n)}Cc(e,134217728)}};jf=function(e){if(e.tag===13){var t=In(e),n=fn(e,t);if(n!==null){var r=it();Vt(n,e,t,r)}Cc(e,t)}};Sf=function(){return ye};Nf=function(e,t){var n=ye;try{return ye=e,t()}finally{ye=n}};Ga=function(e,t,n){switch(t){case"input":if(Ha(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Eo(r);if(!s)throw Error(T(90));tf(r),Ha(r,s)}}}break;case"textarea":rf(e,n);break;case"select":t=n.value,t!=null&&Nr(e,!!n.multiple,t,!1)}};df=bc;ff=tr;var Sg={usingClientEntryPoint:!1,Events:[Gs,xr,Eo,cf,uf,bc]},is={findFiberByHostInstance:Vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ng={bundleType:is.bundleType,version:is.version,rendererPackageName:is.rendererPackageName,rendererConfig:is.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=mf(e),e===null?null:e.stateNode},findFiberByHostInstance:is.findFiberByHostInstance||kg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bl.isDisabled&&bl.supportsFiber)try{jo=bl.inject(Ng),en=bl}catch(e){}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sg;Nt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mc(t))throw Error(T(200));return bg(e,t,null,n)};Nt.createRoot=function(e,t){if(!Mc(e))throw Error(T(299));var n=!1,r="",s=Kp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Nc(e,1,!1,null,null,n,!1,r,s),e[dn]=t.current,zs(e.nodeType===8?e.parentNode:e),new Ec(t)};Nt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(T(188)):(e=Object.keys(e).join(","),Error(T(268,e)));return e=mf(t),e=e===null?null:e.stateNode,e};Nt.flushSync=function(e){return tr(e)};Nt.hydrate=function(e,t,n){if(!Oo(t))throw Error(T(200));return Lo(null,e,t,!0,n)};Nt.hydrateRoot=function(e,t,n){if(!Mc(e))throw Error(T(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",a=Kp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Xp(t,null,e,1,n!=null?n:null,s,!1,l,a),e[dn]=t.current,zs(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Io(t)};Nt.render=function(e,t,n){if(!Oo(t))throw Error(T(200));return Lo(null,e,t,!1,n)};Nt.unmountComponentAtNode=function(e){if(!Oo(e))throw Error(T(40));return e._reactRootContainer?(tr(function(){Lo(null,null,e,!1,function(){e._reactRootContainer=null,e[dn]=null})}),!0):!1};Nt.unstable_batchedUpdates=bc;Nt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Oo(n))throw Error(T(200));if(e==null||e._reactInternals===void 0)throw Error(T(38));return Lo(e,t,n,!1,r)};Nt.version="18.3.1-next-f1338f8080-20240426";function Yp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yp)}catch(e){console.error(e)}}Yp(),Kd.exports=Nt;var jr=Kd.exports,Ju=jr;Oa.createRoot=Ju.createRoot,Oa.hydrateRoot=Ju.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Us(){return Us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Us.apply(this,arguments)}var Mn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Mn||(Mn={}));const qu="popstate";function Cg(e){e===void 0&&(e={});function t(s,l){let{pathname:a="/",search:i="",hash:c=""}=sr(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),_i("",{pathname:a,search:i,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(s,l){let a=s.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");i=u===-1?c:c.slice(0,u)}return i+"#"+(typeof l=="string"?l:Qp(l))}function r(s,l){Ao(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return Mg(t,n,r,e)}function He(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function Ao(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Eg(){return Math.random().toString(36).substr(2,8)}function Zu(e,t){return{usr:e.state,key:e.key,idx:t}}function _i(e,t,n,r){return n===void 0&&(n=null),Us({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?sr(t):t,{state:n,key:t&&t.key||r||Eg()})}function Qp(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function sr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Mg(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,a=s.history,i=Mn.Pop,c=null,u=f();u==null&&(u=0,a.replaceState(Us({},a.state,{idx:u}),""));function f(){return(a.state||{idx:null}).idx}function p(){i=Mn.Pop;let w=f(),x=w==null?null:w-u;u=w,c&&c({action:i,location:v.location,delta:x})}function h(w,x){i=Mn.Push;let m=_i(v.location,w,x);n&&n(m,w),u=f()+1;let g=Zu(m,u),S=v.createHref(m);try{a.pushState(g,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}l&&c&&c({action:i,location:v.location,delta:1})}function y(w,x){i=Mn.Replace;let m=_i(v.location,w,x);n&&n(m,w),u=f();let g=Zu(m,u),S=v.createHref(m);a.replaceState(g,"",S),l&&c&&c({action:i,location:v.location,delta:0})}function b(w){let x=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof w=="string"?w:Qp(w);return m=m.replace(/ $/,"%20"),He(x,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,x)}let v={get action(){return i},get location(){return e(s,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(qu,p),c=w,()=>{s.removeEventListener(qu,p),c=null}},createHref(w){return t(s,w)},createURL:b,encodeLocation(w){let x=b(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:y,go(w){return a.go(w)}};return v}var ed;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ed||(ed={}));function _g(e,t,n){return n===void 0&&(n="/"),Tg(e,t,n)}function Tg(e,t,n,r){let s=typeof t=="string"?sr(t):t,l=qp(s.pathname||"/",n);if(l==null)return null;let a=Gp(e);Dg(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let u=Hg(l);i=Fg(a[c],u)}return i}function Gp(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,a,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:a,route:l};c.relativePath.startsWith("/")&&(He(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Gn([r,c.relativePath]),f=n.concat(c);l.children&&l.children.length>0&&(He(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Gp(l.children,t,f,u)),!(l.path==null&&!l.index)&&t.push({path:u,score:Ag(u,l.index),routesMeta:f})};return e.forEach((l,a)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))s(l,a);else for(let c of Jp(l.path))s(l,a,c)}),t}function Jp(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let a=Jp(r.join("/")),i=[];return i.push(...a.map(c=>c===""?l:[l,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Dg(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:$g(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Rg=/^:[\w-]+$/,zg=3,Pg=2,Ig=1,Og=10,Lg=-2,td=e=>e==="*";function Ag(e,t){let n=e.split("/"),r=n.length;return n.some(td)&&(r+=Lg),t&&(r+=Pg),n.filter(s=>!td(s)).reduce((s,l)=>s+(Rg.test(l)?zg:l===""?Ig:Og),r)}function $g(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Fg(e,t,n){let{routesMeta:r}=e,s={},l="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],u=i===r.length-1,f=l==="/"?t:t.slice(l.length)||"/",p=Bg({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),h=c.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:Gn([l,p.pathname]),pathnameBase:Gg(Gn([l,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(l=Gn([l,p.pathnameBase]))}return a}function Bg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Ug(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],a=l.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((u,f,p)=>{let{paramName:h,isOptional:y}=f;if(h==="*"){let v=i[p]||"";a=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const b=i[p];return y&&!b?u[h]=void 0:u[h]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:a,pattern:e}}function Ug(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ao(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Hg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ao(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function qp(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const Wg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vg=e=>Wg.test(e);function Xg(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?sr(e):e,l;if(n)if(Vg(n))l=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Ao(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?l=nd(n.substring(1),"/"):l=nd(n,t)}else l=t;return{pathname:l,search:Jg(r),hash:qg(s)}}function nd(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ea(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Kg(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Yg(e,t){let n=Kg(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Qg(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=sr(e):(s=Us({},e),He(!s.pathname||!s.pathname.includes("?"),Ea("?","pathname","search",s)),He(!s.pathname||!s.pathname.includes("#"),Ea("#","pathname","hash",s)),He(!s.search||!s.search.includes("#"),Ea("#","search","hash",s)));let l=e===""||s.pathname==="",a=l?"/":s.pathname,i;if(a==null)i=n;else{let p=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),p-=1;s.pathname=h.join("/")}i=p>=0?t[p]:"/"}let c=Xg(s,i),u=a&&a!=="/"&&a.endsWith("/"),f=(l||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const Gn=e=>e.join("/").replace(/\/\/+/g,"/"),Gg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Jg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,qg=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Zg(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Zp=["post","put","patch","delete"];new Set(Zp);const ey=["get",...Zp];new Set(ey);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hs(){return Hs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hs.apply(this,arguments)}const _c=d.createContext(null),ty=d.createContext(null),$o=d.createContext(null),Fo=d.createContext(null),lr=d.createContext({outlet:null,matches:[],isDataRoute:!1}),eh=d.createContext(null);function Bo(){return d.useContext(Fo)!=null}function Tc(){return Bo()||He(!1),d.useContext(Fo).location}function th(e){d.useContext($o).static||d.useLayoutEffect(e)}function $t(){let{isDataRoute:e}=d.useContext(lr);return e?hy():ny()}function ny(){Bo()||He(!1);let e=d.useContext(_c),{basename:t,future:n,navigator:r}=d.useContext($o),{matches:s}=d.useContext(lr),{pathname:l}=Tc(),a=JSON.stringify(Yg(s,n.v7_relativeSplatPath)),i=d.useRef(!1);return th(()=>{i.current=!0}),d.useCallback(function(u,f){if(f===void 0&&(f={}),!i.current)return;if(typeof u=="number"){r.go(u);return}let p=Qg(u,JSON.parse(a),l,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Gn([t,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[t,r,a,l,e])}function nh(){let{matches:e}=d.useContext(lr),t=e[e.length-1];return t?t.params:{}}function ry(e,t){return sy(e,t)}function sy(e,t,n,r){Bo()||He(!1);let{navigator:s}=d.useContext($o),{matches:l}=d.useContext(lr),a=l[l.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Tc(),f;if(t){var p;let w=typeof t=="string"?sr(t):t;c==="/"||(p=w.pathname)!=null&&p.startsWith(c)||He(!1),f=w}else f=u;let h=f.pathname||"/",y=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");y="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=_g(e,{pathname:y}),v=cy(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},i,w.params),pathname:Gn([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Gn([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),l,n,r);return t&&v?d.createElement(Fo.Provider,{value:{location:Hs({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Mn.Pop}},v):v}function ly(){let e=py(),t=Zg(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},t),n?d.createElement("pre",{style:s},n):null,null)}const oy=d.createElement(ly,null);class ay extends d.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?d.createElement(lr.Provider,{value:this.props.routeContext},d.createElement(eh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iy(e){let{routeContext:t,match:n,children:r}=e,s=d.useContext(_c);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),d.createElement(lr.Provider,{value:t},r)}function cy(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let f=a.findIndex(p=>p.route.id&&(i==null?void 0:i[p.route.id])!==void 0);f>=0||He(!1),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=f),p.route.id){let{loaderData:h,errors:y}=n,b=p.route.loader&&h[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||b){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((f,p,h)=>{let y,b=!1,v=null,w=null;n&&(y=i&&p.route.id?i[p.route.id]:void 0,v=p.route.errorElement||oy,c&&(u<0&&h===0?(my("route-fallback"),b=!0,w=null):u===h&&(b=!0,w=p.route.hydrateFallbackElement||null)));let x=t.concat(a.slice(0,h+1)),m=()=>{let g;return y?g=v:b?g=w:p.route.Component?g=d.createElement(p.route.Component,null):p.route.element?g=p.route.element:g=f,d.createElement(iy,{match:p,routeContext:{outlet:f,matches:x,isDataRoute:n!=null},children:g})};return n&&(p.route.ErrorBoundary||p.route.errorElement||h===0)?d.createElement(ay,{location:n.location,revalidation:n.revalidation,component:v,error:y,children:m(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):m()},null)}var rh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(rh||{}),sh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(sh||{});function uy(e){let t=d.useContext(_c);return t||He(!1),t}function dy(e){let t=d.useContext(ty);return t||He(!1),t}function fy(e){let t=d.useContext(lr);return t||He(!1),t}function lh(e){let t=fy(),n=t.matches[t.matches.length-1];return n.route.id||He(!1),n.route.id}function py(){var e;let t=d.useContext(eh),n=dy(),r=lh();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function hy(){let{router:e}=uy(rh.UseNavigateStable),t=lh(sh.UseNavigateStable),n=d.useRef(!1);return th(()=>{n.current=!0}),d.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Hs({fromRouteId:t},l)))},[e,t])}const rd={};function my(e,t,n){rd[e]||(rd[e]=!0)}function xy(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ot(e){He(!1)}function gy(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Mn.Pop,navigator:l,static:a=!1,future:i}=e;Bo()&&He(!1);let c=t.replace(/^\/*/,"/"),u=d.useMemo(()=>({basename:c,navigator:l,static:a,future:Hs({v7_relativeSplatPath:!1},i)}),[c,i,l,a]);typeof r=="string"&&(r=sr(r));let{pathname:f="/",search:p="",hash:h="",state:y=null,key:b="default"}=r,v=d.useMemo(()=>{let w=qp(f,c);return w==null?null:{location:{pathname:w,search:p,hash:h,state:y,key:b},navigationType:s}},[c,f,p,h,y,b,s]);return v==null?null:d.createElement($o.Provider,{value:u},d.createElement(Fo.Provider,{children:n,value:v}))}function yy(e){let{children:t,location:n}=e;return ry(Ti(t),n)}new Promise(()=>{});function Ti(e,t){t===void 0&&(t=[]);let n=[];return d.Children.forEach(e,(r,s)=>{if(!d.isValidElement(r))return;let l=[...t,s];if(r.type===d.Fragment){n.push.apply(n,Ti(r.props.children,l));return}r.type!==ot&&He(!1),!r.props.index||!r.props.children||He(!1);let a={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Ti(r.props.children,l)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const vy="6";try{window.__reactRouterVersion=vy}catch(e){}const wy="startTransition",sd=mm[wy];function by(e){let{basename:t,children:n,future:r,window:s}=e,l=d.useRef();l.current==null&&(l.current=Cg({window:s,v5Compat:!0}));let a=l.current,[i,c]=d.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},f=d.useCallback(p=>{u&&sd?sd(()=>c(p)):c(p)},[c,u]);return d.useLayoutEffect(()=>a.listen(f),[a,f]),d.useEffect(()=>xy(r),[r]),d.createElement(gy,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}var ld;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ld||(ld={}));var od;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(od||(od={}));const Dc="";async function ad(){var r,s;const e=localStorage.getItem("whisper_token");if(e)return e;const t=(s=(r=window.Telegram)==null?void 0:r.WebApp)==null?void 0:s.initData;if(t){const a=await(await fetch(`${Dc}/api/auth/telegram`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:t})})).json();if(a.success&&a.token)return localStorage.setItem("whisper_token",a.token),a.token}const n=new Error("need_login");throw n.code="NEED_LOGIN",n}async function $(e,t={}){let n=await ad();const r=`${Dc}${e}`,s=a=>fetch(r,{...t,cache:"no-store",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`,...t.headers},body:t.body?JSON.stringify(t.body):void 0});let l=await s(n);if(l.status===401&&(localStorage.removeItem("whisper_token"),n=await ad(),l=await s(n)),l.status===204)return null;if(!l.ok){const a=await l.json().catch(()=>({}));throw new Error(a.detail||` (${l.status})`)}return l.json()}async function ky(e){const n=await(await fetch(`${Dc}/api/auth/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})})).json();if(n.success&&n.token)return localStorage.setItem("whisper_token",n.token),!0;throw new Error(n.detail||"")}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oh=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:a,...i},c)=>d.createElement("svg",{ref:c,...Sy,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:oh("lucide",s),...i},[...a.map(([u,f])=>d.createElement(u,f)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=(e,t)=>{const n=d.forwardRef(({className:r,...s},l)=>d.createElement(Ny,{ref:l,iconNode:t,className:oh(`lucide-${jy(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=oe("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=oe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=oe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=oe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=oe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=oe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=oe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=oe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=oe("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=oe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=oe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=oe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=oe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=oe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=oe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=oe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=oe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=oe("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=oe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=oe("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=oe("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=oe("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=oe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=oe("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=oe("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=oe("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Wy="WhisperMiniDB",Vy=1,Br="avatars",dh=()=>new Promise((e,t)=>{const n=indexedDB.open(Wy,Vy);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(Br)||r.createObjectStore(Br,{keyPath:"key"})}}),Di=async(e,t)=>{const n=await dh();return new Promise((r,s)=>{const l=n.transaction([Br],"readwrite");l.objectStore(Br).put({key:e,base64:t}),l.oncomplete=()=>r(),l.onerror=()=>s(l.error)})},Yr=async e=>{const t=await dh();return new Promise((n,r)=>{const l=t.transaction([Br],"readonly").objectStore(Br).get(e);l.onsuccess=()=>{var a;return n(((a=l.result)==null?void 0:a.base64)||null)},l.onerror=()=>r(l.error)})},ft={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function ir({icon:e,label:t,desc:n,disabled:r,onClick:s,badge:l}){const[a,i]=d.useState(!1),c=()=>!r&&i(!0),u=()=>{i(!1),r||s==null||s()};return o.jsxs("button",{className:"flex flex-col items-start rounded-[18px] gap-2 text-left",style:{padding:"16px 14px",background:ft.bg,boxShadow:a?"inset 3px 3px 8px rgba(174,176,182,0.5), inset -3px -3px 8px #ffffff":"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff",opacity:r?.4:1,transform:a?"scale(0.97)":"scale(1)",transition:"transform 0.1s, box-shadow 0.1s",cursor:r?"default":"pointer",WebkitTapHighlightColor:"transparent"},disabled:r,onTouchStart:c,onTouchEnd:u,onMouseDown:c,onMouseUp:u,onMouseLeave:()=>i(!1),children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-[12px]",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))"},children:e}),l&&o.jsx("div",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full",style:{background:"#ef4444",border:"2px solid var(--bg)"}})]}),o.jsxs("div",{className:"pl-1",children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:ft.text},children:t}),o.jsx("div",{className:"mt-0.5 text-[10px] leading-snug",style:{color:ft.textMuted},children:n})]})]})}function ud({children:e}){return o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-[3px]",style:{color:ft.textMuted},children:e})}function Xy(){const e=$t(),[t,n]=d.useState(()=>{try{return JSON.parse(localStorage.getItem("whisper_profile")||"null")}catch(u){return null}}),[r,s]=d.useState(null),[l,a]=d.useState(!1);d.useEffect(()=>{$("/api/user/profile").then(u=>{n(u),localStorage.setItem("whisper_profile",JSON.stringify(u))}).catch(()=>{}),Yr("user-avatar").then(u=>{u&&s(u)}).catch(function(){}),$("/api/diary/unread-count").then(u=>{u.count>0&&a(!0)}).catch(()=>{})},[]);const i=(t==null?void 0:t.nickname)||"",c=(t==null?void 0:t.background_url)||"";return o.jsxs("div",{className:"flex flex-col overflow-y-auto",style:{background:ft.bg,height:"100%",paddingBottom:16},children:[o.jsxs("div",{className:"flex flex-col px-5",style:{paddingTop:"max(12px, env(safe-area-inset-top))"},children:[o.jsx("h1",{className:"mb-4 text-center text-[17px] font-medium",style:{color:ft.textMuted,letterSpacing:"4px"},children:"W H I S P E R"}),o.jsxs("button",{className:"mb-5 flex w-full items-center gap-4 rounded-[20px] p-5 text-left",style:{background:ft.bg,boxShadow:"6px 6px 14px rgba(174,176,182,0.5), -6px -6px 14px #ffffff"},onClick:()=>e("/profile"),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:52,height:52,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:ft.bg},children:r?o.jsx("img",{src:r,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:22},children:""})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"text-[17px] font-bold truncate",style:{color:ft.text},children:["@",i]}),o.jsxs("div",{className:"mt-0.5 text-[11px] italic",style:{color:ft.textMuted},children:['"',c,'"']})]}),o.jsx($r,{size:16,style:{color:ft.textMuted,flexShrink:0}})]}),o.jsx(ud,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(ir,{icon:o.jsx(Ey,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/world-books")}),o.jsx(ir,{icon:o.jsx(My,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/memories")}),o.jsx(ir,{icon:o.jsx(ah,{size:18,color:"white"}),label:"",desc:"Core Blocks",onClick:()=>e("/assistants")}),o.jsx(ir,{icon:o.jsx(By,{size:18,color:"white"}),label:"",desc:"API",onClick:()=>e("/settings")})]}),o.jsx(ud,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(ir,{icon:o.jsx(Cy,{size:18,color:"white"}),label:"",desc:"",badge:l,onClick:()=>e("/diary")}),o.jsx(ir,{icon:o.jsx(Uy,{size:18,color:"white"}),label:"",desc:"",disabled:!0})]}),o.jsx("button",{className:"flex w-full items-center justify-center rounded-[18px] py-4",style:{background:ft.bg,boxShadow:"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff"},onClick:()=>e("/cot"),children:o.jsx(Py,{size:32,fill:ft.accent,style:{color:ft.accent,animation:"heartbeat 2s ease-in-out infinite"}})})]}),o.jsx("style",{children:`
        @keyframes heartbeat {
          0%, 100% { transform: scale(1); }
          15% { transform: scale(1.15); }
          30% { transform: scale(1); }
          45% { transform: scale(1.1); }
          60% { transform: scale(1); }
        }
      `})]})}function Ky(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const Wo=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function Qr(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function zc(e){return"nodeType"in e}function dt(e){var t,n;return e?Qr(e)?e:zc(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Pc(e){const{Document:t}=dt(e);return e instanceof t}function tl(e){return Qr(e)?!1:e instanceof dt(e).HTMLElement}function fh(e){return e instanceof dt(e).SVGElement}function Gr(e){return e?Qr(e)?e.document:zc(e)?Pc(e)?e:tl(e)||fh(e)?e.ownerDocument:document:document:document}const Kt=Wo?d.useLayoutEffect:d.useEffect;function Vo(e){const t=d.useRef(e);return Kt(()=>{t.current=e}),d.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function Yy(){const e=d.useRef(null),t=d.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=d.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Vs(e,t){t===void 0&&(t=[e]);const n=d.useRef(e);return Kt(()=>{n.current!==e&&(n.current=e)},t),n}function nl(e,t){const n=d.useRef();return d.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function mo(e){const t=Vo(e),n=d.useRef(null),r=d.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function xo(e){const t=d.useRef();return d.useEffect(()=>{t.current=e},[e]),t.current}let Ma={};function rl(e,t){return d.useMemo(()=>{if(t)return t;const n=Ma[e]==null?0:Ma[e]+1;return Ma[e]=n,e+"-"+n},[e,t])}function ph(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const i=Object.entries(a);for(const[c,u]of i){const f=l[c];f!=null&&(l[c]=f+e*u)}return l},{...t})}}const Dr=ph(1),go=ph(-1);function Qy(e){return"clientX"in e&&"clientY"in e}function Xo(e){if(!e)return!1;const{KeyboardEvent:t}=dt(e.target);return t&&e instanceof t}function Gy(e){if(!e)return!1;const{TouchEvent:t}=dt(e.target);return t&&e instanceof t}function yo(e){if(Gy(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Qy(e)?{x:e.clientX,y:e.clientY}:null}const hn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[hn.Translate.toString(e),hn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),dd="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Jy(e){return e.matches(dd)?e:e.querySelector(dd)}const qy={display:"none"};function Zy(e){let{id:t,value:n}=e;return Ce.createElement("div",{id:t,style:qy},n)}function ev(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ce.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function tv(){const[e,t]=d.useState("");return{announce:d.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const hh=d.createContext(null);function nv(e){const t=d.useContext(hh);d.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function rv(){const[e]=d.useState(()=>new Set),t=d.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[d.useCallback(r=>{let{type:s,event:l}=r;e.forEach(a=>{var i;return(i=a[s])==null?void 0:i.call(a,l)})},[e]),t]}const sv={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},lv={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ov(e){let{announcements:t=lv,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=sv}=e;const{announce:l,announcement:a}=tv(),i=rl("DndLiveRegion"),[c,u]=d.useState(!1);if(d.useEffect(()=>{u(!0)},[]),nv(d.useMemo(()=>({onDragStart(p){let{active:h}=p;l(t.onDragStart({active:h}))},onDragMove(p){let{active:h,over:y}=p;t.onDragMove&&l(t.onDragMove({active:h,over:y}))},onDragOver(p){let{active:h,over:y}=p;l(t.onDragOver({active:h,over:y}))},onDragEnd(p){let{active:h,over:y}=p;l(t.onDragEnd({active:h,over:y}))},onDragCancel(p){let{active:h,over:y}=p;l(t.onDragCancel({active:h,over:y}))}}),[l,t])),!c)return null;const f=Ce.createElement(Ce.Fragment,null,Ce.createElement(Zy,{id:r,value:s.draggable}),Ce.createElement(ev,{id:i,announcement:a}));return n?jr.createPortal(f,n):f}var Be;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Be||(Be={}));function vo(){}function wo(e,t){return d.useMemo(()=>({sensor:e,options:t!=null?t:{}}),[e,t])}function mh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Yt=Object.freeze({x:0,y:0});function av(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function iv(e,t){const n=yo(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function cv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function uv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function dv(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function fd(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const xh=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=fd(t,t.left,t.top),l=[];for(const a of r){const{id:i}=a,c=n.get(i);if(c){const u=av(fd(c),s);l.push({id:i,data:{droppableContainer:a,value:u}})}}return l.sort(cv)};function fv(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height),a=s-r,i=l-n;if(r<s&&n<l){const c=t.width*t.height,u=e.width*e.height,f=a*i,p=f/(c+u-f);return Number(p.toFixed(4))}return 0}const pv=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const l of r){const{id:a}=l,i=n.get(a);if(i){const c=fv(i,t);c>0&&s.push({id:a,data:{droppableContainer:l,value:c}})}}return s.sort(uv)};function hv(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function gh(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Yt}function mv(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,i)=>({...a,top:a.top+e*i.y,bottom:a.bottom+e*i.y,left:a.left+e*i.x,right:a.right+e*i.x}),{...n})}}const xv=mv(1);function yh(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function gv(e,t,n){const r=yh(t);if(!r)return e;const{scaleX:s,scaleY:l,x:a,y:i}=r,c=e.left-a-(1-s)*parseFloat(n),u=e.top-i-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),f=s?e.width/s:e.width,p=l?e.height/l:e.height;return{width:f,height:p,top:u,right:c+f,bottom:u+p,left:c}}const yv={ignoreTransform:!1};function Jr(e,t){t===void 0&&(t=yv);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:f}=dt(e).getComputedStyle(e);u&&(n=gv(n,u,f))}const{top:r,left:s,width:l,height:a,bottom:i,right:c}=n;return{top:r,left:s,width:l,height:a,bottom:i,right:c}}function pd(e){return Jr(e,{ignoreTransform:!0})}function vv(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function wv(e,t){return t===void 0&&(t=dt(e).getComputedStyle(e)),t.position==="fixed"}function bv(e,t){t===void 0&&(t=dt(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=t[s];return typeof l=="string"?n.test(l):!1})}function Ic(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Pc(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!tl(s)||fh(s)||n.includes(s))return n;const l=dt(e).getComputedStyle(s);return s!==e&&bv(s,l)&&n.push(s),wv(s,l)?n:r(s.parentNode)}return e?r(e):n}function vh(e){const[t]=Ic(e,1);return t!=null?t:null}function _a(e){return!Wo||!e?null:Qr(e)?e:zc(e)?Pc(e)||e===Gr(e).scrollingElement?window:tl(e)?e:null:null}function wh(e){return Qr(e)?e.scrollX:e.scrollLeft}function bh(e){return Qr(e)?e.scrollY:e.scrollTop}function Ri(e){return{x:wh(e),y:bh(e)}}var Xe;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Xe||(Xe={}));function kh(e){return!Wo||!e?!1:e===document.scrollingElement}function jh(e){const t={x:0,y:0},n=kh(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,l=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:i,maxScroll:r,minScroll:t}}const kv={x:.2,y:.2};function jv(e,t,n,r,s){let{top:l,left:a,right:i,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=kv);const{isTop:u,isBottom:f,isLeft:p,isRight:h}=jh(e),y={x:0,y:0},b={x:0,y:0},v={height:t.height*s.y,width:t.width*s.x};return!u&&l<=t.top+v.height?(y.y=Xe.Backward,b.y=r*Math.abs((t.top+v.height-l)/v.height)):!f&&c>=t.bottom-v.height&&(y.y=Xe.Forward,b.y=r*Math.abs((t.bottom-v.height-c)/v.height)),!h&&i>=t.right-v.width?(y.x=Xe.Forward,b.x=r*Math.abs((t.right-v.width-i)/v.width)):!p&&a<=t.left+v.width&&(y.x=Xe.Backward,b.x=r*Math.abs((t.left+v.width-a)/v.width)),{direction:y,speed:b}}function Sv(e){if(e===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function Sh(e){return e.reduce((t,n)=>Dr(t,Ri(n)),Yt)}function Nv(e){return e.reduce((t,n)=>t+wh(n),0)}function Cv(e){return e.reduce((t,n)=>t+bh(n),0)}function Nh(e,t){if(t===void 0&&(t=Jr),!e)return;const{top:n,left:r,bottom:s,right:l}=t(e);vh(e)&&(s<=0||l<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Ev=[["x",["left","right"],Nv],["y",["top","bottom"],Cv]];class Oc{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ic(n),s=Sh(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[l,a,i]of Ev)for(const c of a)Object.defineProperty(this,c,{get:()=>{const u=i(r),f=s[l]-u;return this.rect[c]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ks{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Mv(e){const{EventTarget:t}=dt(e);return e instanceof t?e:Gr(e)}function Ta(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Rt;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Rt||(Rt={}));function hd(e){e.preventDefault()}function _v(e){e.stopPropagation()}var me;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(me||(me={}));const Ch={start:[me.Space,me.Enter],cancel:[me.Esc],end:[me.Space,me.Enter,me.Tab]},Tv=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case me.Right:return{...n,x:n.x+25};case me.Left:return{...n,x:n.x-25};case me.Down:return{...n,y:n.y+25};case me.Up:return{...n,y:n.y-25}}};class Eh{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new ks(Gr(n)),this.windowListeners=new ks(dt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Rt.Resize,this.handleCancel),this.windowListeners.add(Rt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Rt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Nh(r),n(Yt)}handleKeyDown(t){if(Xo(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:l=Ch,coordinateGetter:a=Tv,scrollBehavior:i="smooth"}=s,{code:c}=t;if(l.end.includes(c)){this.handleEnd(t);return}if(l.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=r.current,f=u?{x:u.left,y:u.top}:Yt;this.referenceCoordinates||(this.referenceCoordinates=f);const p=a(t,{active:n,context:r.current,currentCoordinates:f});if(p){const h=go(p,f),y={x:0,y:0},{scrollableAncestors:b}=r.current;for(const v of b){const w=t.code,{isTop:x,isRight:m,isLeft:g,isBottom:S,maxScroll:j,minScroll:N}=jh(v),k=Sv(v),C={x:Math.min(w===me.Right?k.right-k.width/2:k.right,Math.max(w===me.Right?k.left:k.left+k.width/2,p.x)),y:Math.min(w===me.Down?k.bottom-k.height/2:k.bottom,Math.max(w===me.Down?k.top:k.top+k.height/2,p.y))},z=w===me.Right&&!m||w===me.Left&&!g,D=w===me.Down&&!S||w===me.Up&&!x;if(z&&C.x!==p.x){const P=v.scrollLeft+h.x,R=w===me.Right&&P<=j.x||w===me.Left&&P>=N.x;if(R&&!h.y){v.scrollTo({left:P,behavior:i});return}R?y.x=v.scrollLeft-P:y.x=w===me.Right?v.scrollLeft-j.x:v.scrollLeft-N.x,y.x&&v.scrollBy({left:-y.x,behavior:i});break}else if(D&&C.y!==p.y){const P=v.scrollTop+h.y,R=w===me.Down&&P<=j.y||w===me.Up&&P>=N.y;if(R&&!h.x){v.scrollTo({top:P,behavior:i});return}R?y.y=v.scrollTop-P:y.y=w===me.Down?v.scrollTop-j.y:v.scrollTop-N.y,y.y&&v.scrollBy({top:-y.y,behavior:i});break}}this.handleMove(t,Dr(go(p,this.referenceCoordinates),y))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Eh.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Ch,onActivation:s}=t,{active:l}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const i=l.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function md(e){return!!(e&&"distance"in e)}function xd(e){return!!(e&&"delay"in e)}class Lc{constructor(t,n,r){var s;r===void 0&&(r=Mv(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:l}=t,{target:a}=l;this.props=t,this.events=n,this.document=Gr(a),this.documentListeners=new ks(this.document),this.listeners=new ks(r),this.windowListeners=new ks(dt(a)),this.initialCoordinates=(s=yo(l))!=null?s:Yt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Rt.Resize,this.handleCancel),this.windowListeners.add(Rt.DragStart,hd),this.windowListeners.add(Rt.VisibilityChange,this.handleCancel),this.windowListeners.add(Rt.ContextMenu,hd),this.documentListeners.add(Rt.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(xd(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(md(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Rt.Click,_v,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Rt.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:i}}=l;if(!s)return;const c=(n=yo(t))!=null?n:Yt,u=go(s,c);if(!r&&i){if(md(i)){if(i.tolerance!=null&&Ta(u,i.tolerance))return this.handleCancel();if(Ta(u,i.distance))return this.handleStart()}if(xd(i)&&Ta(u,i.tolerance))return this.handleCancel();this.handlePending(i,u);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===me.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Dv={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ko extends Lc{constructor(t){const{event:n}=t,r=Gr(n.target);super(t,Dv,r)}}Ko.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Rv={move:{name:"mousemove"},end:{name:"mouseup"}};var zi;(function(e){e[e.RightClick=2]="RightClick"})(zi||(zi={}));class zv extends Lc{constructor(t){super(t,Rv,Gr(t.event.target))}}zv.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===zi.RightClick?!1:(r==null||r({event:n}),!0)}}];const Da={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ac extends Lc{constructor(t){super(t,Da)}static setup(){return window.addEventListener(Da.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Da.move.name,t)};function t(){}}}Ac.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var js;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(js||(js={}));var bo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(bo||(bo={}));function Pv(e){let{acceleration:t,activator:n=js.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:i=bo.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:f,delta:p,threshold:h}=e;const y=Ov({delta:p,disabled:!l}),[b,v]=Yy(),w=d.useRef({x:0,y:0}),x=d.useRef({x:0,y:0}),m=d.useMemo(()=>{switch(n){case js.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case js.DraggableRect:return s}},[n,s,c]),g=d.useRef(null),S=d.useCallback(()=>{const N=g.current;if(!N)return;const k=w.current.x*x.current.x,C=w.current.y*x.current.y;N.scrollBy(k,C)},[]),j=d.useMemo(()=>i===bo.TreeOrder?[...u].reverse():u,[i,u]);d.useEffect(()=>{if(!l||!u.length||!m){v();return}for(const N of j){if((r==null?void 0:r(N))===!1)continue;const k=u.indexOf(N),C=f[k];if(!C)continue;const{direction:z,speed:D}=jv(N,C,m,t,h);for(const P of["x","y"])y[P][z[P]]||(D[P]=0,z[P]=0);if(D.x>0||D.y>0){v(),g.current=N,b(S,a),w.current=D,x.current=z;return}}w.current={x:0,y:0},x.current={x:0,y:0},v()},[t,S,r,v,l,a,JSON.stringify(m),JSON.stringify(y),b,u,j,f,JSON.stringify(h)])}const Iv={x:{[Xe.Backward]:!1,[Xe.Forward]:!1},y:{[Xe.Backward]:!1,[Xe.Forward]:!1}};function Ov(e){let{delta:t,disabled:n}=e;const r=xo(t);return nl(s=>{if(n||!r||!s)return Iv;const l={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Xe.Backward]:s.x[Xe.Backward]||l.x===-1,[Xe.Forward]:s.x[Xe.Forward]||l.x===1},y:{[Xe.Backward]:s.y[Xe.Backward]||l.y===-1,[Xe.Forward]:s.y[Xe.Forward]||l.y===1}}},[n,t,r])}function Lv(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return nl(s=>{var l;return t==null?null:(l=r!=null?r:s)!=null?l:null},[r,t])}function Av(e,t){return d.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...l]},[]),[e,t])}var Xs;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Xs||(Xs={}));var Pi;(function(e){e.Optimized="optimized"})(Pi||(Pi={}));const gd=new Map;function $v(e,t){let{dragging:n,dependencies:r,config:s}=t;const[l,a]=d.useState(null),{frequency:i,measure:c,strategy:u}=s,f=d.useRef(e),p=w(),h=Vs(p),y=d.useCallback(function(x){x===void 0&&(x=[]),!h.current&&a(m=>m===null?x:m.concat(x.filter(g=>!m.includes(g))))},[h]),b=d.useRef(null),v=nl(x=>{if(p&&!n)return gd;if(!x||x===gd||f.current!==e||l!=null){const m=new Map;for(let g of e){if(!g)continue;if(l&&l.length>0&&!l.includes(g.id)&&g.rect.current){m.set(g.id,g.rect.current);continue}const S=g.node.current,j=S?new Oc(c(S),S):null;g.rect.current=j,j&&m.set(g.id,j)}return m}return x},[e,l,n,p,c]);return d.useEffect(()=>{f.current=e},[e]),d.useEffect(()=>{p||y()},[n,p]),d.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),d.useEffect(()=>{p||typeof i!="number"||b.current!==null||(b.current=setTimeout(()=>{y(),b.current=null},i))},[i,p,y,...r]),{droppableRects:v,measureDroppableContainers:y,measuringScheduled:l!=null};function w(){switch(u){case Xs.Always:return!1;case Xs.BeforeDragging:return n;default:return!n}}}function $c(e,t){return nl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Fv(e,t){return $c(e,t)}function Bv(e){let{callback:t,disabled:n}=e;const r=Vo(t),s=d.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:l}=window;return new l(r)},[r,n]);return d.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Yo(e){let{callback:t,disabled:n}=e;const r=Vo(t),s=d.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:l}=window;return new l(r)},[n]);return d.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Uv(e){return new Oc(Jr(e),e)}function yd(e,t,n){t===void 0&&(t=Uv);const[r,s]=d.useState(null);function l(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c!=null?c:n)!=null?u:null}const f=t(e);return JSON.stringify(c)===JSON.stringify(f)?c:f})}const a=Bv({callback(c){if(e)for(const u of c){const{type:f,target:p}=u;if(f==="childList"&&p instanceof HTMLElement&&p.contains(e)){l();break}}}}),i=Yo({callback:l});return Kt(()=>{l(),e?(i==null||i.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),a==null||a.disconnect())},[e]),r}function Hv(e){const t=$c(e);return gh(e,t)}const vd=[];function Wv(e){const t=d.useRef(e),n=nl(r=>e?r&&r!==vd&&e&&t.current&&e.parentNode===t.current.parentNode?r:Ic(e):vd,[e]);return d.useEffect(()=>{t.current=e},[e]),n}function Vv(e){const[t,n]=d.useState(null),r=d.useRef(e),s=d.useCallback(l=>{const a=_a(l.target);a&&n(i=>i?(i.set(a,Ri(a)),new Map(i)):null)},[]);return d.useEffect(()=>{const l=r.current;if(e!==l){a(l);const i=e.map(c=>{const u=_a(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Ri(u)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=e}return()=>{a(e),a(l)};function a(i){i.forEach(c=>{const u=_a(c);u==null||u.removeEventListener("scroll",s)})}},[s,e]),d.useMemo(()=>e.length?t?Array.from(t.values()).reduce((l,a)=>Dr(l,a),Yt):Sh(e):Yt,[e,t])}function wd(e,t){t===void 0&&(t=[]);const n=d.useRef(null);return d.useEffect(()=>{n.current=null},t),d.useEffect(()=>{const r=e!==Yt;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?go(e,n.current):Yt}function Xv(e){d.useEffect(()=>{if(!Wo)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Kv(e,t){return d.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:l}=r;return n[s]=a=>{l(a,t)},n},{}),[e,t])}function Mh(e){return d.useMemo(()=>e?vv(e):null,[e])}const bd=[];function Yv(e,t){t===void 0&&(t=Jr);const[n]=e,r=Mh(n?dt(n):null),[s,l]=d.useState(bd);function a(){l(()=>e.length?e.map(c=>kh(c)?r:new Oc(t(c),c)):bd)}const i=Yo({callback:a});return Kt(()=>{i==null||i.disconnect(),a(),e.forEach(c=>i==null?void 0:i.observe(c))},[e]),s}function _h(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return tl(t)?t:e}function Qv(e){let{measure:t}=e;const[n,r]=d.useState(null),s=d.useCallback(u=>{for(const{target:f}of u)if(tl(f)){r(p=>{const h=t(f);return p?{...p,width:h.width,height:h.height}:h});break}},[t]),l=Yo({callback:s}),a=d.useCallback(u=>{const f=_h(u);l==null||l.disconnect(),f&&(l==null||l.observe(f)),r(f?t(f):null)},[t,l]),[i,c]=mo(a);return d.useMemo(()=>({nodeRef:i,rect:n,setRef:c}),[n,i,c])}const Gv=[{sensor:Ko,options:{}},{sensor:Eh,options:{}}],Jv={current:{}},Hl={draggable:{measure:pd},droppable:{measure:pd,strategy:Xs.WhileDragging,frequency:Pi.Optimized},dragOverlay:{measure:Jr}};class Ss extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const qv={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ss,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:vo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Hl,measureDroppableContainers:vo,windowRect:null,measuringScheduled:!1},Th={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:vo,draggableNodes:new Map,over:null,measureDroppableContainers:vo},sl=d.createContext(Th),Dh=d.createContext(qv);function Zv(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ss}}}function e1(e,t){switch(t.type){case Be.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Be.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Be.DragEnd:case Be.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Be.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Ss(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Be.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,l=e.droppable.containers.get(n);if(!l||r!==l.key)return e;const a=new Ss(e.droppable.containers);return a.set(n,{...l,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case Be.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const l=new Ss(e.droppable.containers);return l.delete(n),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function t1(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=d.useContext(sl),l=xo(r),a=xo(n==null?void 0:n.id);return d.useEffect(()=>{if(!t&&!r&&l&&a!=null){if(!Xo(l)||document.activeElement===l.target)return;const i=s.get(a);if(!i)return;const{activatorNode:c,node:u}=i;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[c.current,u.current]){if(!f)continue;const p=Jy(f);if(p){p.focus();break}}})}},[r,t,s,a,l]),null}function Rh(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,l)=>l({transform:s,...r}),n):n}function n1(e){return d.useMemo(()=>({draggable:{...Hl.draggable,...e==null?void 0:e.draggable},droppable:{...Hl.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Hl.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function r1(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const l=d.useRef(!1),{x:a,y:i}=typeof s=="boolean"?{x:s,y:s}:s;Kt(()=>{if(!a&&!i||!t){l.current=!1;return}if(l.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const f=n(u),p=gh(f,r);if(a||(p.x=0),i||(p.y=0),l.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const h=vh(u);h&&h.scrollBy({top:p.y,left:p.x})}},[t,a,i,r,n])}const Qo=d.createContext({...Yt,scaleX:1,scaleY:1});var jn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(jn||(jn={}));const zh=d.memo(function(t){var n,r,s,l;let{id:a,accessibility:i,autoScroll:c=!0,children:u,sensors:f=Gv,collisionDetection:p=pv,measuring:h,modifiers:y,...b}=t;const v=d.useReducer(e1,void 0,Zv),[w,x]=v,[m,g]=rv(),[S,j]=d.useState(jn.Uninitialized),N=S===jn.Initialized,{draggable:{active:k,nodes:C,translate:z},droppable:{containers:D}}=w,P=k!=null?C.get(k):null,R=d.useRef({initial:null,translated:null}),E=d.useMemo(()=>{var et;return k!=null?{id:k,data:(et=P==null?void 0:P.data)!=null?et:Jv,rect:R}:null},[k,P]),B=d.useRef(null),[ee,ce]=d.useState(null),[ue,I]=d.useState(null),O=Vs(b,Object.values(b)),U=rl("DndDescribedBy",a),Q=d.useMemo(()=>D.getEnabled(),[D]),J=n1(h),{droppableRects:ke,measureDroppableContainers:G,measuringScheduled:V}=$v(Q,{dragging:N,dependencies:[z.x,z.y],config:J.droppable}),te=Lv(C,k),X=d.useMemo(()=>ue?yo(ue):null,[ue]),se=Jh(),ae=Fv(te,J.draggable.measure);r1({activeNode:k!=null?C.get(k):null,config:se.layoutShiftCompensation,initialRect:ae,measure:J.draggable.measure});const q=yd(te,J.draggable.measure,ae),ve=yd(te?te.parentElement:null),we=d.useRef({activatorEvent:null,active:null,activeNode:te,collisionRect:null,collisions:null,droppableRects:ke,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:D,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ye=D.getNodeFor((n=we.current.over)==null?void 0:n.id),Se=Qv({measure:J.dragOverlay.measure}),lt=(r=Se.nodeRef.current)!=null?r:te,be=N?(s=Se.rect)!=null?s:q:null,Mt=!!(Se.nodeRef.current&&Se.rect),xn=Hv(Mt?null:q),ne=Mh(lt?dt(lt):null),fe=Wv(N?Ye!=null?Ye:te:null),Me=Yv(fe),ze=Rh(y,{transform:{x:z.x-xn.x,y:z.y-xn.y,scaleX:1,scaleY:1},activatorEvent:ue,active:E,activeNodeRect:q,containerNodeRect:ve,draggingNodeRect:be,over:we.current.over,overlayNodeRect:Se.rect,scrollableAncestors:fe,scrollableAncestorRects:Me,windowRect:ne}),_t=X?Dr(X,z):null,$e=Vv(fe),Un=wd($e),M=wd($e,[q]),F=Dr(ze,Un),K=be?xv(be,ze):null,Ze=E&&K?p({active:E,collisionRect:K,droppableRects:ke,droppableContainers:Q,pointerCoordinates:_t}):null,L=dv(Ze,"id"),[pe,ie]=d.useState(null),Pe=Mt?ze:Dr(ze,M),Tt=hv(Pe,(l=pe==null?void 0:pe.rect)!=null?l:null,q),nn=d.useRef(null),qo=d.useCallback((et,yt)=>{let{sensor:vt,options:gn}=yt;if(B.current==null)return;const Dt=C.get(B.current);if(!Dt)return;const wt=et.nativeEvent,Qt=new vt({active:B.current,activeNode:Dt,event:wt,options:gn,context:we,onAbort(Qe){if(!C.get(Qe))return;const{onDragAbort:Gt}=O.current,rn={id:Qe};Gt==null||Gt(rn),m({type:"onDragAbort",event:rn})},onPending(Qe,yn,Gt,rn){if(!C.get(Qe))return;const{onDragPending:Zr}=O.current,vn={id:Qe,constraint:yn,initialCoordinates:Gt,offset:rn};Zr==null||Zr(vn),m({type:"onDragPending",event:vn})},onStart(Qe){const yn=B.current;if(yn==null)return;const Gt=C.get(yn);if(!Gt)return;const{onDragStart:rn}=O.current,qr={activatorEvent:wt,active:{id:yn,data:Gt.data,rect:R}};jr.unstable_batchedUpdates(()=>{rn==null||rn(qr),j(jn.Initializing),x({type:Be.DragStart,initialCoordinates:Qe,active:yn}),m({type:"onDragStart",event:qr}),ce(nn.current),I(wt)})},onMove(Qe){x({type:Be.DragMove,coordinates:Qe})},onEnd:or(Be.DragEnd),onCancel:or(Be.DragCancel)});nn.current=Qt;function or(Qe){return async function(){const{active:Gt,collisions:rn,over:qr,scrollAdjustedTranslate:Zr}=we.current;let vn=null;if(Gt&&Zr){const{cancelDrop:es}=O.current;vn={activatorEvent:wt,active:Gt,collisions:rn,delta:Zr,over:qr},Qe===Be.DragEnd&&typeof es=="function"&&await Promise.resolve(es(vn))&&(Qe=Be.DragCancel)}B.current=null,jr.unstable_batchedUpdates(()=>{x({type:Qe}),j(jn.Uninitialized),ie(null),ce(null),I(null),nn.current=null;const es=Qe===Be.DragEnd?"onDragEnd":"onDragCancel";if(vn){const ea=O.current[es];ea==null||ea(vn),m({type:es,event:vn})}})}}},[C]),Zo=d.useCallback((et,yt)=>(vt,gn)=>{const Dt=vt.nativeEvent,wt=C.get(gn);if(B.current!==null||!wt||Dt.dndKit||Dt.defaultPrevented)return;const Qt={active:wt};et(vt,yt.options,Qt)===!0&&(Dt.dndKit={capturedBy:yt.sensor},B.current=gn,qo(vt,yt))},[C,qo]),Uc=Av(f,Zo);Xv(f),Kt(()=>{q&&S===jn.Initializing&&j(jn.Initialized)},[q,S]),d.useEffect(()=>{const{onDragMove:et}=O.current,{active:yt,activatorEvent:vt,collisions:gn,over:Dt}=we.current;if(!yt||!vt)return;const wt={active:yt,activatorEvent:vt,collisions:gn,delta:{x:F.x,y:F.y},over:Dt};jr.unstable_batchedUpdates(()=>{et==null||et(wt),m({type:"onDragMove",event:wt})})},[F.x,F.y]),d.useEffect(()=>{const{active:et,activatorEvent:yt,collisions:vt,droppableContainers:gn,scrollAdjustedTranslate:Dt}=we.current;if(!et||B.current==null||!yt||!Dt)return;const{onDragOver:wt}=O.current,Qt=gn.get(L),or=Qt&&Qt.rect.current?{id:Qt.id,rect:Qt.rect.current,data:Qt.data,disabled:Qt.disabled}:null,Qe={active:et,activatorEvent:yt,collisions:vt,delta:{x:Dt.x,y:Dt.y},over:or};jr.unstable_batchedUpdates(()=>{ie(or),wt==null||wt(Qe),m({type:"onDragOver",event:Qe})})},[L]),Kt(()=>{we.current={activatorEvent:ue,active:E,activeNode:te,collisionRect:K,collisions:Ze,droppableRects:ke,draggableNodes:C,draggingNode:lt,draggingNodeRect:be,droppableContainers:D,over:pe,scrollableAncestors:fe,scrollAdjustedTranslate:F},R.current={initial:be,translated:K}},[E,te,Ze,K,C,lt,be,ke,D,pe,fe,F]),Pv({...se,delta:z,draggingRect:K,pointerCoordinates:_t,scrollableAncestors:fe,scrollableAncestorRects:Me});const Qh=d.useMemo(()=>({active:E,activeNode:te,activeNodeRect:q,activatorEvent:ue,collisions:Ze,containerNodeRect:ve,dragOverlay:Se,draggableNodes:C,droppableContainers:D,droppableRects:ke,over:pe,measureDroppableContainers:G,scrollableAncestors:fe,scrollableAncestorRects:Me,measuringConfiguration:J,measuringScheduled:V,windowRect:ne}),[E,te,q,ue,Ze,ve,Se,C,D,ke,pe,G,fe,Me,J,V,ne]),Gh=d.useMemo(()=>({activatorEvent:ue,activators:Uc,active:E,activeNodeRect:q,ariaDescribedById:{draggable:U},dispatch:x,draggableNodes:C,over:pe,measureDroppableContainers:G}),[ue,Uc,E,q,x,U,C,pe,G]);return Ce.createElement(hh.Provider,{value:g},Ce.createElement(sl.Provider,{value:Gh},Ce.createElement(Dh.Provider,{value:Qh},Ce.createElement(Qo.Provider,{value:Tt},u)),Ce.createElement(t1,{disabled:(i==null?void 0:i.restoreFocus)===!1})),Ce.createElement(ov,{...i,hiddenTextDescribedById:U}));function Jh(){const et=(ee==null?void 0:ee.autoScrollEnabled)===!1,yt=typeof c=="object"?c.enabled===!1:c===!1,vt=N&&!et&&!yt;return typeof c=="object"?{...c,enabled:vt}:{enabled:vt}}}),s1=d.createContext(null),kd="button",l1="Draggable";function o1(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const l=rl(l1),{activators:a,activatorEvent:i,active:c,activeNodeRect:u,ariaDescribedById:f,draggableNodes:p,over:h}=d.useContext(sl),{role:y=kd,roleDescription:b="draggable",tabIndex:v=0}=s!=null?s:{},w=(c==null?void 0:c.id)===t,x=d.useContext(w?Qo:s1),[m,g]=mo(),[S,j]=mo(),N=Kv(a,t),k=Vs(n);Kt(()=>(p.set(t,{id:t,key:l,node:m,activatorNode:S,data:k}),()=>{const z=p.get(t);z&&z.key===l&&p.delete(t)}),[p,t]);const C=d.useMemo(()=>({role:y,tabIndex:v,"aria-disabled":r,"aria-pressed":w&&y===kd?!0:void 0,"aria-roledescription":b,"aria-describedby":f.draggable}),[r,y,v,w,b,f.draggable]);return{active:c,activatorEvent:i,activeNodeRect:u,attributes:C,isDragging:w,listeners:r?void 0:N,node:m,over:h,setNodeRef:g,setActivatorNodeRef:j,transform:x}}function Ph(){return d.useContext(Dh)}const a1="Droppable",i1={timeout:25};function c1(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const l=rl(a1),{active:a,dispatch:i,over:c,measureDroppableContainers:u}=d.useContext(sl),f=d.useRef({disabled:n}),p=d.useRef(!1),h=d.useRef(null),y=d.useRef(null),{disabled:b,updateMeasurementsFor:v,timeout:w}={...i1,...s},x=Vs(v!=null?v:r),m=d.useCallback(()=>{if(!p.current){p.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),y.current=null},w)},[w]),g=Yo({callback:m,disabled:b||!a}),S=d.useCallback((C,z)=>{g&&(z&&(g.unobserve(z),p.current=!1),C&&g.observe(C))},[g]),[j,N]=mo(S),k=Vs(t);return d.useEffect(()=>{!g||!j.current||(g.disconnect(),p.current=!1,g.observe(j.current))},[j,g]),d.useEffect(()=>(i({type:Be.RegisterDroppable,element:{id:r,key:l,disabled:n,node:j,rect:h,data:k}}),()=>i({type:Be.UnregisterDroppable,key:l,id:r})),[r]),d.useEffect(()=>{n!==f.current.disabled&&(i({type:Be.SetDroppableDisabled,id:r,key:l,disabled:n}),f.current.disabled=n)},[r,l,n,i]),{active:a,rect:h,isOver:(c==null?void 0:c.id)===r,node:j,over:c,setNodeRef:N}}function u1(e){let{animation:t,children:n}=e;const[r,s]=d.useState(null),[l,a]=d.useState(null),i=xo(n);return!n&&!r&&i&&s(i),Kt(()=>{if(!l)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(t(u,l)).then(()=>{s(null)})},[t,r,l]),Ce.createElement(Ce.Fragment,null,n,r?d.cloneElement(r,{ref:a}):null)}const d1={x:0,y:0,scaleX:1,scaleY:1};function f1(e){let{children:t}=e;return Ce.createElement(sl.Provider,{value:Th},Ce.createElement(Qo.Provider,{value:d1},t))}const p1={position:"fixed",touchAction:"none"},h1=e=>Xo(e)?"transform 250ms ease":void 0,m1=d.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:l,className:a,rect:i,style:c,transform:u,transition:f=h1}=e;if(!i)return null;const p=s?u:{...u,scaleX:1,scaleY:1},h={...p1,width:i.width,height:i.height,top:i.top,left:i.left,transform:hn.Transform.toString(p),transformOrigin:s&&r?iv(r,i):void 0,transition:typeof f=="function"?f(r):f,...c};return Ce.createElement(n,{className:a,style:h,ref:t},l)}),x1=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:l,className:a}=e;if(l!=null&&l.active)for(const[i,c]of Object.entries(l.active))c!==void 0&&(s[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,c));if(l!=null&&l.dragOverlay)for(const[i,c]of Object.entries(l.dragOverlay))c!==void 0&&r.node.style.setProperty(i,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);a!=null&&a.active&&n.node.classList.remove(a.active)}},g1=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:hn.Transform.toString(t)},{transform:hn.Transform.toString(n)}]},y1={duration:250,easing:"ease",keyframes:g1,sideEffects:x1({styles:{active:{opacity:"0"}}})};function v1(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return Vo((l,a)=>{if(t===null)return;const i=n.get(l);if(!i)return;const c=i.node.current;if(!c)return;const u=_h(a);if(!u)return;const{transform:f}=dt(a).getComputedStyle(a),p=yh(f);if(!p)return;const h=typeof t=="function"?t:w1(t);return Nh(c,s.draggable.measure),h({active:{id:l,data:i.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:p})})}function w1(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...y1,...e};return l=>{let{active:a,dragOverlay:i,transform:c,...u}=l;if(!t)return;const f={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},p={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/i.rect.height:1},h={x:c.x-f.x,y:c.y-f.y,...p},y=s({...u,active:a,dragOverlay:i,transform:{initial:c,final:h}}),[b]=y,v=y[y.length-1];if(JSON.stringify(b)===JSON.stringify(v))return;const w=r==null?void 0:r({active:a,dragOverlay:i,...u}),x=i.node.animate(y,{duration:t,easing:n,fill:"forwards"});return new Promise(m=>{x.onfinish=()=>{w==null||w(),m()}})}}let jd=0;function b1(e){return d.useMemo(()=>{if(e!=null)return jd++,jd},[e])}const Ih=Ce.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:l,modifiers:a,wrapperElement:i="div",className:c,zIndex:u=999}=e;const{activatorEvent:f,active:p,activeNodeRect:h,containerNodeRect:y,draggableNodes:b,droppableContainers:v,dragOverlay:w,over:x,measuringConfiguration:m,scrollableAncestors:g,scrollableAncestorRects:S,windowRect:j}=Ph(),N=d.useContext(Qo),k=b1(p==null?void 0:p.id),C=Rh(a,{activatorEvent:f,active:p,activeNodeRect:h,containerNodeRect:y,draggingNodeRect:w.rect,over:x,overlayNodeRect:w.rect,scrollableAncestors:g,scrollableAncestorRects:S,transform:N,windowRect:j}),z=$c(h),D=v1({config:r,draggableNodes:b,droppableContainers:v,measuringConfiguration:m}),P=z?w.setRef:void 0;return Ce.createElement(f1,null,Ce.createElement(u1,{animation:D},p&&k?Ce.createElement(m1,{key:k,id:p.id,ref:P,as:i,activatorEvent:f,adjustScale:t,className:c,transition:l,rect:z,style:{zIndex:u,...s},transform:C},n):null))});function Go(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function k1(e,t){return e.reduce((n,r,s)=>{const l=t.get(r);return l&&(n[s]=l),n},Array(e.length))}function kl(e){return e!==null&&e>=0}function j1(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function S1(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Oh=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const l=Go(t,r,n),a=t[s],i=l[s];return!i||!a?null:{x:i.left-a.left,y:i.top-a.top,scaleX:i.width/a.width,scaleY:i.height/a.height}},jl={scaleX:1,scaleY:1},Lh=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:l,overIndex:a}=e;const i=(t=l[n])!=null?t:r;if(!i)return null;if(s===n){const u=l[a];return u?{x:0,y:n<a?u.top+u.height-(i.top+i.height):u.top-i.top,...jl}:null}const c=N1(l,s,n);return s>n&&s<=a?{x:0,y:-i.height-c,...jl}:s<n&&s>=a?{x:0,y:i.height+c,...jl}:{x:0,y:0,...jl}};function N1(e,t,n){const r=e[t],s=e[t-1],l=e[t+1];return r?n<t?s?r.top-(s.top+s.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Ah="Sortable",$h=Ce.createContext({activeIndex:-1,containerId:Ah,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Oh,disabled:{draggable:!1,droppable:!1}});function Fh(e){let{children:t,id:n,items:r,strategy:s=Oh,disabled:l=!1}=e;const{active:a,dragOverlay:i,droppableRects:c,over:u,measureDroppableContainers:f}=Ph(),p=rl(Ah,n),h=i.rect!==null,y=d.useMemo(()=>r.map(N=>typeof N=="object"&&"id"in N?N.id:N),[r]),b=a!=null,v=a?y.indexOf(a.id):-1,w=u?y.indexOf(u.id):-1,x=d.useRef(y),m=!j1(y,x.current),g=w!==-1&&v===-1||m,S=S1(l);Kt(()=>{m&&b&&f(y)},[m,y,b,f]),d.useEffect(()=>{x.current=y},[y]);const j=d.useMemo(()=>({activeIndex:v,containerId:p,disabled:S,disableTransforms:g,items:y,overIndex:w,useDragOverlay:h,sortedRects:k1(y,c),strategy:s}),[v,p,S.draggable,S.droppable,g,y,w,c,h,s]);return Ce.createElement($h.Provider,{value:j},t)}const C1=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return Go(n,r,s).indexOf(t)},E1=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:l,newIndex:a,previousItems:i,previousContainerId:c,transition:u}=e;return!u||!r||i!==l&&s===a?!1:n?!0:a!==s&&t===c},M1={duration:200,easing:"ease"},Bh="transform",_1=hn.Transition.toString({property:Bh,duration:0,easing:"linear"}),T1={roleDescription:"sortable"};function D1(e){let{disabled:t,index:n,node:r,rect:s}=e;const[l,a]=d.useState(null),i=d.useRef(n);return Kt(()=>{if(!t&&n!==i.current&&r.current){const c=s.current;if(c){const u=Jr(r.current,{ignoreTransform:!0}),f={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(f.x||f.y)&&a(f)}}n!==i.current&&(i.current=n)},[t,n,r,s]),d.useEffect(()=>{l&&a(null)},[l]),l}function Uh(e){let{animateLayoutChanges:t=E1,attributes:n,disabled:r,data:s,getNewIndex:l=C1,id:a,strategy:i,resizeObserverConfig:c,transition:u=M1}=e;const{items:f,containerId:p,activeIndex:h,disabled:y,disableTransforms:b,sortedRects:v,overIndex:w,useDragOverlay:x,strategy:m}=d.useContext($h),g=R1(r,y),S=f.indexOf(a),j=d.useMemo(()=>({sortable:{containerId:p,index:S,items:f},...s}),[p,s,S,f]),N=d.useMemo(()=>f.slice(f.indexOf(a)),[f,a]),{rect:k,node:C,isOver:z,setNodeRef:D}=c1({id:a,data:j,disabled:g.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...c}}),{active:P,activatorEvent:R,activeNodeRect:E,attributes:B,setNodeRef:ee,listeners:ce,isDragging:ue,over:I,setActivatorNodeRef:O,transform:U}=o1({id:a,data:j,attributes:{...T1,...n},disabled:g.draggable}),Q=Ky(D,ee),J=!!P,ke=J&&!b&&kl(h)&&kl(w),G=!x&&ue,V=G&&ke?U:null,te=i!=null?i:m,X=ke?V!=null?V:te({rects:v,activeNodeRect:E,activeIndex:h,overIndex:w,index:S}):null,se=kl(h)&&kl(w)?l({id:a,items:f,activeIndex:h,overIndex:w}):S,ae=P==null?void 0:P.id,q=d.useRef({activeId:ae,items:f,newIndex:se,containerId:p}),ve=f!==q.current.items,we=t({active:P,containerId:p,isDragging:ue,isSorting:J,id:a,index:S,items:f,newIndex:q.current.newIndex,previousItems:q.current.items,previousContainerId:q.current.containerId,transition:u,wasDragging:q.current.activeId!=null}),Ye=D1({disabled:!we,index:S,node:C,rect:k});return d.useEffect(()=>{J&&q.current.newIndex!==se&&(q.current.newIndex=se),p!==q.current.containerId&&(q.current.containerId=p),f!==q.current.items&&(q.current.items=f)},[J,se,p,f]),d.useEffect(()=>{if(ae===q.current.activeId)return;if(ae!=null&&q.current.activeId==null){q.current.activeId=ae;return}const lt=setTimeout(()=>{q.current.activeId=ae},50);return()=>clearTimeout(lt)},[ae]),{active:P,activeIndex:h,attributes:B,data:j,rect:k,index:S,newIndex:se,items:f,isOver:z,isSorting:J,isDragging:ue,listeners:ce,node:C,overIndex:w,over:I,setNodeRef:Q,setActivatorNodeRef:O,setDroppableNodeRef:D,setDraggableNodeRef:ee,transform:Ye!=null?Ye:X,transition:Se()};function Se(){if(Ye||ve&&q.current.newIndex===S)return _1;if(!(G&&!Xo(R)||!u)&&(J||we))return hn.Transition.toString({...u,property:Bh})}}function R1(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}me.Down,me.Right,me.Up,me.Left;const xe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Sd={always:{label:"",color:"#6b9b6e",bg:"#e0f0e1"},keyword:{label:"",color:"#9b6b6b",bg:"#f0e0e0"},mood:{label:"",color:"#9b7a3b",bg:"#f0ebd8"},message_mode:{label:"",color:"#6b7b9b",bg:"#e0e6f0"}};function Hh({activation:e}){const t=Sd[e]||Sd.always;return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:t.color,background:t.bg},children:t.label})}const Sl=80;function z1({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(f,p)=>{const h=n.current,y=r.current;if(!h)return;const b="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=b,h.style.transform=f?`translateX(${f}px)`:"",y){const v=Math.min(1,Math.abs(f)/Sl);y.style.transition=b,y.style.opacity=`${v}`}f||(h.style.willChange="auto"),s.current.current=f},a=()=>l(0),i=f=>{if(f.target.closest(".drag-handle"))return;const p=f.touches[0],h=s.current;h.startX=p.clientX,h.startY=p.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=f=>{const p=s.current;if(!p.dragging)return;const h=f.touches[0],y=h.clientX-p.startX,b=h.clientY-p.startY;if(!p.locked){if(Math.abs(y)<5&&Math.abs(b)<5)return;p.locked=!0,p.isH=Math.abs(y)>Math.abs(b),p.isH&&n.current&&(n.current.style.willChange="transform")}if(!p.isH){p.dragging=!1;return}f.preventDefault();const v=Math.max(-Sl,Math.min(0,p.base+y));n.current&&(n.current.style.transform=`translateX(${v}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(v)/Sl)}`),p.current=v},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Sl):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:xe.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(Kr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function P1({book:e,onTap:t,onDelete:n}){var f;const{attributes:r,listeners:s,setNodeRef:l,transform:a,transition:i,isDragging:c}=Uh({id:String(e.id)}),u={transform:hn.Transform.toString(a),transition:i,opacity:c?0:1};return o.jsx("div",{ref:l,style:u,className:"mb-3",children:o.jsx(z1,{onDelete:()=>n(e),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:xe.bg,userSelect:"none"},children:[o.jsx("div",{...r,...s,className:"drag-handle shrink-0 cursor-grab touch-none px-1",style:{cursor:c?"grabbing":"grab"},children:o.jsx(qs,{size:18,style:{color:xe.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>t(e),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:xe.text},children:e.name}),o.jsx(Hh,{activation:e.activation})]}),e.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:xe.textMuted},children:e.folder}),e.activation==="keyword"&&((f=e.keywords)==null?void 0:f.length)>0&&o.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[e.keywords.slice(0,3).map((p,h)=>o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(232,160,191,0.15)",color:xe.accentDark},children:p},h)),e.keywords.length>3&&o.jsxs("span",{className:"text-[10px]",style:{color:xe.textMuted},children:["+",e.keywords.length-3]})]})]}),o.jsx($r,{size:16,style:{color:xe.textMuted,flexShrink:0},onClick:()=>t(e)})]})})})}function I1({folder:e,books:t,onDelete:n,onTap:r,onReorder:s}){const[l,a]=d.useState(!0),[i,c]=d.useState(null),u=mh(wo(Ko,{activationConstraint:{distance:5}}),wo(Ac,{activationConstraint:{delay:200,tolerance:5}})),f=({active:h,over:y})=>{if(c(null),!y||h.id===y.id)return;const b=t.findIndex(x=>String(x.id)===String(h.id)),v=t.findIndex(x=>String(x.id)===String(y.id));if(b<0||v<0)return;const w=Go(t,b,v);s(e,w)},p=i?t.find(h=>String(h.id)===String(i)):null;return o.jsxs("div",{className:"mb-4",children:[o.jsxs("button",{className:"mb-2 flex w-full items-center gap-2 px-1",onClick:()=>a(!l),children:[l?o.jsx(Vr,{size:14,style:{color:xe.textMuted}}):o.jsx($r,{size:14,style:{color:xe.textMuted}}),o.jsx("span",{className:"text-[12px] font-bold tracking-wide",style:{color:xe.textMuted},children:e||""}),o.jsx("span",{className:"ml-1 rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.12)",color:xe.textMuted},children:t.length})]}),l&&o.jsxs(zh,{sensors:u,collisionDetection:xh,onDragStart:({active:h})=>c(h.id),onDragEnd:f,children:[o.jsx(Fh,{items:t.map(h=>String(h.id)),strategy:Lh,children:t.map(h=>o.jsx(P1,{book:h,onTap:r,onDelete:n},h.id))}),o.jsx(Ih,{children:p&&o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:xe.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx("div",{className:"shrink-0 px-1",children:o.jsx(qs,{size:18,style:{color:xe.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:xe.text},children:p.name}),o.jsx(Hh,{activation:p.activation})]}),p.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:xe.textMuted},children:p.folder})]}),o.jsx($r,{size:16,style:{color:xe.textMuted,flexShrink:0}})]})})]})]})}function O1(){const e=$t(),[t,n]=d.useState([]),[r,s]=d.useState(!0),[l,a]=d.useState(null),[i,c]=d.useState(null),u=v=>{c(v),setTimeout(()=>c(null),2e3)},f=()=>{s(!0),$("/api/world-books").then(v=>n(v.world_books||[])).catch(()=>u("")).finally(()=>s(!1))};d.useEffect(()=>{f()},[]);const p=async v=>{a(null);try{await $(`/api/world-books/${v.id}`,{method:"DELETE"}),n(w=>w.filter(x=>x.id!==v.id)),u("")}catch(w){u("")}},h=(v,w)=>{const x=v||"";n(m=>[...m.filter(S=>(S.folder||"")!==x),...w]),$("/api/world-books/reorder",{method:"PUT",body:{ordered_ids:w.map(m=>m.id)}}).catch(()=>u(""))},y={};for(const v of t){const w=v.folder||"";y[w]||(y[w]=[]),y[w].push(v)}const b=Object.keys(y).sort((v,w)=>v===""?1:w===""?-1:v.localeCompare(w));return o.jsxs("div",{className:"flex h-full flex-col",style:{background:xe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full nm-active",style:{background:xe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:xe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:xe.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:xe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books/new"),children:o.jsx(Xr,{size:20,style:{color:xe.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-t-transparent",style:{borderColor:xe.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(qs,{size:36,style:{color:xe.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:xe.textMuted},children:" + "})]}):b.map(v=>o.jsx(I1,{folder:v,books:y[v],onDelete:w=>a(w),onTap:w=>e(`/world-books/${w.id}`),onReorder:h},v))}),l&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>a(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:xe.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:v=>v.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:xe.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:xe.textMuted},children:["",l.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:xe.bg,boxShadow:"var(--card-shadow-sm)",color:xe.text},onClick:()=>a(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>p(l),children:""})]})]})}),i&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const Z={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function L1({label:e,value:t,onChange:n,placeholder:r}){return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Z.textMuted},children:e}),o.jsx("input",{type:"text",value:t,onChange:s=>n(s.target.value),placeholder:r,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:Z.bg,color:Z.text}})]})}function A1({value:e,onChange:t,folders:n}){const[r,s]=d.useState(!1),l=n.filter(a=>a!==e&&a.toLowerCase().includes(e.toLowerCase()));return o.jsxs("div",{className:"relative mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Z.textMuted},children:""}),o.jsx("input",{type:"text",value:e,onChange:a=>{t(a.target.value),s(!0)},onFocus:()=>s(!0),onBlur:()=>setTimeout(()=>s(!1),150),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:Z.bg,color:Z.text}}),r&&l.length>0&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[160px] overflow-y-auto rounded-[14px]",style:{background:Z.bg,boxShadow:"var(--card-shadow)"},children:l.map(a=>o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:Z.text},onMouseDown:()=>{t(a),s(!1)},children:a},a))})]})}function $1({value:e,onChange:t}){const n=[{value:"always",label:""},{value:"keyword",label:""},{value:"mood",label:""},{value:"message_mode",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Z.textMuted},children:""}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:Z.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:e===r.value?Z.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?Z.accentDark:Z.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})]})}function F1({selected:e,onChange:t}){const n=[{value:"long",label:""},{value:"short",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Z.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:Z.bg,minHeight:48},children:n.map(r=>{const s=e===r.value;return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?Z.accentDark:Z.bg,color:s?"white":Z.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>t(r.value),children:r.label},r.value)})})]})}const B1=[{value:"happy",label:""},{value:"sad",label:""},{value:"angry",label:""},{value:"anxious",label:""},{value:"tired",label:""},{value:"emo",label:""},{value:"flirty",label:""},{value:"proud",label:""},{value:"calm",label:""}];function U1({selected:e,onChange:t}){const n=r=>{e.includes(r)?t(e.filter(s=>s!==r)):t([...e,r])};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Z.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:Z.bg,minHeight:48},children:B1.map(r=>{const s=e.includes(r.value);return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?Z.accentDark:Z.bg,color:s?"white":Z.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>n(r.value),children:r.label},r.value)})})]})}function H1({keywords:e,onChange:t}){const[n,r]=d.useState(""),s=()=>{const l=n.trim();if(!l||e.includes(l)){r("");return}t([...e,l]),r("")};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Z.textMuted},children:""}),o.jsxs("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:Z.bg,minHeight:48},children:[e.map(l=>o.jsxs("span",{className:"flex items-center gap-1 rounded-full px-2.5 py-1 text-[12px] font-medium",style:{background:"rgba(232,160,191,0.2)",color:Z.accentDark},children:[l,o.jsx("button",{onClick:()=>t(e.filter(a=>a!==l)),children:o.jsx(el,{size:10})})]},l)),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),onKeyDown:l=>{(l.key==="Enter"||l.key===",")&&(l.preventDefault(),s())},placeholder:"...",className:"w-24 bg-transparent text-[12px] outline-none",style:{color:Z.text}}),n.trim()&&o.jsx("button",{className:"flex h-5 w-5 items-center justify-center rounded-full",style:{background:Z.accentDark},onClick:s,children:o.jsx(Xr,{size:10,color:"white"})})]})]}),o.jsx("p",{className:"mt-1 text-[10px]",style:{color:Z.textMuted},children:" Enter "})]})}function W1({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:Z.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:Z.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Z.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Fr,{size:18,style:{color:Z.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:Z.bg,color:Z.text},placeholder:"..."})]})}function Nd(){const e=$t(),{id:t}=nh(),n=!t,[r,s]=d.useState(""),[l,a]=d.useState(""),[i,c]=d.useState("always"),[u,f]=d.useState([]),[p,h]=d.useState("long"),[y,b]=d.useState(""),[v,w]=d.useState(!1),[x,m]=d.useState(!n),[g,S]=d.useState(null),[j,N]=d.useState([]),[k,C]=d.useState(!1),z=d.useRef(null),D=E=>{var ce;const B=(ce=E.target.files)==null?void 0:ce[0];if(!B)return;const ee=new FileReader;ee.onload=ue=>b(ue.target.result||""),ee.readAsText(B),E.target.value=""},P=E=>{S(E),setTimeout(()=>S(null),2e3)};d.useEffect(()=>{$("/api/world-books").then(E=>{const B=E.world_books||[];if(N([...new Set(B.map(ee=>ee.folder).filter(Boolean))]),!n){const ee=B.find(ce=>String(ce.id)===String(t));ee&&(s(ee.name),a(ee.folder||""),c(ee.activation),f(ee.keywords||[]),h(ee.message_mode||"long"),b(ee.content))}}).catch(()=>P("")).finally(()=>m(!1))},[t,n]);const R=async()=>{if(!r.trim()){P("");return}w(!0);try{const E={name:r.trim(),folder:l.trim()||null,activation:i,keywords:i==="keyword"||i==="mood"?u:[],message_mode:i==="message_mode"?p:null,content:y};n?(await $("/api/world-books",{method:"POST",body:E}),P("")):(await $(`/api/world-books/${t}`,{method:"PUT",body:E}),P(""))}catch(E){P(": "+E.message)}finally{w(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Z.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Z.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:Z.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Z.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Z.bg,boxShadow:v?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:R,disabled:v,children:o.jsx(Ho,{size:18,style:{color:Z.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:x?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Z.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"rounded-[20px] p-5 mb-4",style:{background:Z.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(L1,{label:"",value:r,onChange:s,placeholder:""}),o.jsx(A1,{value:l,onChange:a,folders:j}),o.jsx($1,{value:i,onChange:c}),i==="keyword"&&o.jsx(H1,{keywords:u,onChange:f}),i==="mood"&&o.jsx(U1,{selected:u,onChange:f}),i==="message_mode"&&o.jsx(F1,{selected:p,onChange:h})]}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:Z.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:Z.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Z.bg},onClick:()=>{var E;return(E=z.current)==null?void 0:E.click()},title:"",children:o.jsx(Uo,{size:13,style:{color:Z.textMuted}})}),o.jsx("input",{ref:z,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:D}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Z.bg},onClick:()=>C(!0),title:"",children:o.jsx(Zs,{size:13,style:{color:Z.accentDark}})})]})]}),o.jsx("textarea",{value:y,onChange:E=>b(E.target.value),placeholder:"...",rows:10,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:Z.bg,color:Z.text}})]})]})}),k&&o.jsx(W1,{value:y,onChange:b,onClose:()=>C(!1)}),g&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:g})})]})}const Oe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Nl=80;function V1({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(f,p)=>{const h=n.current,y=r.current;if(!h)return;const b="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=b,h.style.transform=f?`translateX(${f}px)`:"",y){const v=Math.min(1,Math.abs(f)/Nl);y.style.transition=b,y.style.opacity=`${v}`}f||(h.style.willChange="auto"),s.current.current=f},a=()=>l(0),i=f=>{const p=f.touches[0],h=s.current;h.startX=p.clientX,h.startY=p.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=f=>{const p=s.current;if(!p.dragging)return;const h=f.touches[0],y=h.clientX-p.startX,b=h.clientY-p.startY;if(!p.locked){if(Math.abs(y)<5&&Math.abs(b)<5)return;p.locked=!0,p.isH=Math.abs(y)>Math.abs(b),p.isH&&n.current&&(n.current.style.willChange="transform")}if(!p.isH){p.dragging=!1;return}f.preventDefault();const v=Math.max(-Nl,Math.min(0,p.base+y));n.current&&(n.current.style.transform=`translateX(${v}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(v)/Nl)}`),p.current=v},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Nl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Oe.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(Kr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function X1({assistant:e,localAvatar:t,onTap:n}){var s;const r=t||null;return o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Oe.bg,userSelect:"none"},onClick:()=>n(e),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:48,height:48,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Oe.bg},children:r?o.jsx("img",{src:r,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[20px]",style:{color:Oe.accentDark},children:((s=e.name)==null?void 0:s[0])||"?"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[15px] font-bold",style:{color:Oe.text},children:e.name}),e.created_at&&o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:Oe.textMuted},children:e.created_at.slice(0,10)})]}),o.jsx($r,{size:16,style:{color:Oe.textMuted,flexShrink:0}})]})}function K1(){const e=$t(),[t,n]=d.useState([]),[r,s]=d.useState({}),[l,a]=d.useState(!0),[i,c]=d.useState(null),[u,f]=d.useState(null),p=b=>{f(b),setTimeout(()=>f(null),2e3)},h=()=>{a(!0),$("/api/assistants").then(async b=>{const v=b.assistants||[];n(v);const w={};await Promise.all(v.map(async x=>{const m=await Yr(`assistant-avatar-${x.id}`).catch(()=>null);m&&(w[x.id]=m)})),s(w)}).catch(()=>p("")).finally(()=>a(!1))};d.useEffect(()=>{h()},[]);const y=async b=>{c(null);try{await $(`/api/assistants/${b.id}`,{method:"DELETE"}),n(v=>v.filter(w=>w.id!==b.id)),p("")}catch(v){p("")}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Oe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Oe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:Oe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Oe.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Oe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants/new"),children:o.jsx(Xr,{size:20,style:{color:Oe.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Oe.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(ah,{size:36,style:{color:Oe.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:Oe.textMuted},children:" + "})]}):t.map(b=>o.jsx(V1,{onDelete:()=>c(b),children:o.jsx(X1,{assistant:b,localAvatar:r[b.id],onTap:v=>e(`/assistants/${v.id}`)})},b.id))}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>c(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Oe.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:b=>b.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Oe.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Oe.textMuted},children:["",i.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Oe.bg,boxShadow:"var(--card-shadow-sm)",color:Oe.text},onClick:()=>c(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>y(i),children:""})]})]})}),u&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:u})})]})}const _={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Cd({label:e,value:t,onChange:n,placeholder:r,rows:s,onExpand:l,onHistory:a}){const i=d.useRef(null),c=u=>{var h;const f=(h=u.target.files)==null?void 0:h[0];if(!f)return;const p=new FileReader;p.onload=y=>n(y.target.result||""),p.readAsText(f),u.target.value=""};return o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:_.textMuted},children:e}),o.jsxs("div",{className:"flex items-center gap-2",children:[a&&o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:_.bg},onClick:a,children:o.jsx(Iy,{size:13,style:{color:_.textMuted}})}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:_.bg},onClick:()=>{var u;return(u=i.current)==null?void 0:u.click()},children:o.jsx(Uo,{size:13,style:{color:_.textMuted}})}),o.jsx("input",{ref:i,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:c}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:_.bg},onClick:l,children:o.jsx(Zs,{size:13,style:{color:_.accentDark}})})]})]}),o.jsx("textarea",{value:t,onChange:u=>n(u.target.value),placeholder:r,rows:s||6,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:_.bg,color:_.text}})]})}function Ra({label:e,value:t,onChange:n,presets:r}){const[s,l]=d.useState(!1),a=r.find(i=>i.id===t);return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:_.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:_.bg,color:_.text},onClick:()=>l(!s),children:[o.jsx("span",{style:{color:a?_.text:_.textMuted},children:a?a.name:""}),o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:_.textMuted,transform:s?"rotate(180deg)":"none",transition:"transform 0.2s"},children:o.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&o.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:_.bg,boxShadow:"var(--card-shadow)",zIndex:40},children:[o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:_.textMuted},onClick:()=>{n(null),l(!1)},children:""}),r.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[14px]",style:{color:_.text},onClick:()=>{n(i.id),l(!1)},children:[o.jsx("span",{children:i.name}),i.id===t&&o.jsx(Ws,{size:14,style:{color:_.accentDark}})]},i.id))]})]})]})}function za({value:e,onChange:t,onClose:n,title:r,placeholder:s}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:_.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:_.text},children:r||""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Fr,{size:18,style:{color:_.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:l=>t(l.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:_.bg,color:_.text},placeholder:s||""})]})}function Y1({items:e,currentContent:t,onApply:n,onClose:r}){const[s,l]=d.useState("current"),[a,i]=d.useState(null),c=f=>f?new Date(f).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",u=async()=>{if(s==="current"){r();return}const f=e.find(p=>p.id===s);f&&await n(f.content),r()};return a?o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:_.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsxs("span",{className:"text-[15px] font-bold",style:{color:_.text},children:[" ",a.version]}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>i(null),children:o.jsx(Fr,{size:18,style:{color:_.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:o.jsx("div",{className:"rounded-[14px] p-4",style:{boxShadow:"var(--inset-shadow)",background:_.bg},children:o.jsx("p",{className:"whitespace-pre-wrap text-[13px] leading-relaxed",style:{color:_.text},children:a.content})})})]}):o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:_.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:_.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:r,children:o.jsx(Fr,{size:18,style:{color:_.accentDark}})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[o.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:s==="current"?"var(--inset-shadow)":"var(--card-shadow-sm)",background:_.bg},children:[o.jsx("button",{onClick:()=>l("current"),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:s==="current"?_.accentDark:_.bg,boxShadow:s==="current"?"none":"var(--icon-inset)"},children:s==="current"&&o.jsx(Ws,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[13px] font-semibold",style:{color:_.text},children:""}),o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#2a9d5c",background:"rgba(42,157,92,0.12)"},children:""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:_.textMuted},children:t})]})]}),e.length===0&&o.jsx("p",{className:"py-8 text-center text-[13px]",style:{color:_.textMuted},children:""}),e.map(f=>o.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:s===f.id?"var(--inset-shadow)":"var(--card-shadow-sm)",background:_.bg},children:[o.jsx("button",{onClick:()=>l(f.id),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:s===f.id?_.accentDark:_.bg,boxShadow:s===f.id?"none":"var(--icon-inset)"},children:s===f.id&&o.jsx(Ws,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>i(f),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-[13px] font-semibold",style:{color:_.text},children:[" ",f.version]}),o.jsx("span",{className:"text-[10px]",style:{color:_.textMuted},children:c(f.created_at)})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:_.textMuted},children:f.content})]})]},f.id))]}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsx("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:u,children:""})})]})}function Wh(e){return e==="always"?"":e==="keyword"?"":e==="message_mode"?"":""}function Vh(e){return!e||!Array.isArray(e)?[]:e.map((t,n)=>typeof t=="object"&&t!==null?t:{id:t,position:"after",sort_order:n})}function Q1({item:e,book:t,position:n,sectionList:r,onRemove:s,onChangePosition:l}){const{attributes:a,listeners:i,setNodeRef:c,transform:u,transition:f,isDragging:p}=Uh({id:String(e.id)}),h={transform:hn.Transform.toString(u),transition:f,opacity:p?0:1};return t?o.jsxs("div",{ref:c,style:h,className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",children:[o.jsx("div",{...a,...i,className:"cursor-grab touch-none p-1",style:{cursor:p?"grabbing":"grab"},children:o.jsx(qs,{size:14,style:{color:_.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:_.text},children:t.name}),o.jsxs("div",{className:"text-[10px]",style:{color:_.textMuted},children:[Wh(t.activation),t.folder?`  ${t.folder}`:""]})]}),o.jsx("button",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(136,136,160,0.1)",color:_.textMuted},onClick:()=>l(e.id,n==="before"?"after":"before"),children:n==="before"?"":""}),o.jsx("button",{onClick:()=>s(e.id),children:o.jsx(el,{size:14,style:{color:_.textMuted}})})]}):null}function G1({allBooks:e,mountedIds:t,onClose:n,onConfirm:r}){const[s,l]=d.useState(new Set(t)),a={};e.forEach(u=>{const f=u.folder||"";a[f]||(a[f]=[]),a[f].push(u)});const i=u=>{l(f=>{const p=new Set(f);return p.has(u)?p.delete(u):p.add(u),p})},c=u=>{const f=u.every(p=>s.has(p.id));l(p=>{const h=new Set(p);return f?u.forEach(y=>h.delete(y.id)):u.forEach(y=>h.add(y.id)),h})};return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-end",style:{background:"rgba(0,0,0,0.4)"},children:o.jsxs("div",{className:"flex w-full flex-col rounded-t-[24px]",style:{background:_.bg,maxHeight:"82vh"},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between p-5 pb-3",children:[o.jsx("h3",{className:"text-[16px] font-bold",style:{color:_.text},children:""}),o.jsx("button",{onClick:n,children:o.jsx(el,{size:20,style:{color:_.textMuted}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5",children:Object.entries(a).map(([u,f])=>{const p=f.every(h=>s.has(h.id));return o.jsxs("div",{className:"mb-5",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:_.textMuted},children:u}),o.jsx("button",{className:"rounded-full px-2.5 py-1 text-[11px] font-semibold",style:{background:p?"rgba(201,98,138,0.15)":"rgba(136,136,160,0.1)",color:p?_.accentDark:_.textMuted},onClick:()=>c(f),children:p?"":""})]}),o.jsx("div",{className:"space-y-2",children:f.map(h=>{const y=s.has(h.id);return o.jsxs("button",{className:"flex w-full items-center gap-3 rounded-[14px] p-3",style:{background:_.bg,boxShadow:y?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>i(h.id),children:[o.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:y?_.accentDark:_.bg,boxShadow:y?"none":"var(--icon-inset)"},children:y&&o.jsx(Ws,{size:12,color:"white"})}),o.jsx("div",{className:"flex-1 min-w-0 text-left",children:o.jsx("div",{className:"truncate text-[13px] font-medium",style:{color:y?_.accentDark:_.text},children:h.name})}),o.jsx("span",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.1)",color:_.textMuted},children:Wh(h.activation)})]},h.id)})})]},u)})}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsxs("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>r([...s]),children:[" ",s.size,""]})})]})})}function J1({ruleSetIds:e,onChange:t,allBooks:n}){const[r,s]=d.useState(!1),[l,a]=d.useState(null),i=Vh(e),c=i.filter(j=>j.position==="before").sort((j,N)=>j.sort_order-N.sort_order),u=i.filter(j=>j.position==="after").sort((j,N)=>j.sort_order-N.sort_order),f=j=>n.find(N=>N.id===j||N.id===Number(j)),p=mh(wo(Ko,{activationConstraint:{distance:5}}),wo(Ac,{activationConstraint:{delay:150,tolerance:5}})),h=({active:j})=>a(j.id),y=({active:j,over:N})=>{if(!N)return;const k=i.find(z=>String(z.id)===String(j.id)),C=i.find(z=>String(z.id)===String(N.id));if(!(!k||!C)&&k.position!==C.position){const z=i.map(D=>String(D.id)===String(k.id)?{...D,position:C.position}:D);t(z)}},b=({active:j,over:N})=>{if(a(null),!N||j.id===N.id)return;const k=i.find(B=>String(B.id)===String(j.id)),C=i.find(B=>String(B.id)===String(N.id));if(!k||!C||k.position!==C.position)return;const z=k.position==="before"?[...c]:[...u],D=z.findIndex(B=>String(B.id)===String(j.id)),P=z.findIndex(B=>String(B.id)===String(N.id)),R=Go(z,D,P).map((B,ee)=>({...B,sort_order:ee})),E=i.filter(B=>B.position!==k.position);t([...E,...R])},v=j=>t(i.filter(N=>N.id!==j)),w=(j,N)=>{const C=(N==="before"?c:u).length;t(i.map(z=>z.id===j?{...z,position:N,sort_order:C}:z))},x=j=>{const N=i.map(P=>P.id),C=j.filter(P=>!N.includes(P)).map((P,R)=>({id:P,position:"after",sort_order:u.length+R})),z=new Set(N.filter(P=>!j.includes(P))),D=i.filter(P=>!z.has(P.id));t([...D,...C])},m=(j,N)=>j.length===0?o.jsx("div",{className:"py-3 text-center text-[12px]",style:{color:_.textMuted},children:""}):o.jsx(Fh,{items:j.map(k=>String(k.id)),strategy:Lh,children:o.jsx("div",{className:"rounded-[14px] px-2 pt-1",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},children:j.map((k,C)=>o.jsxs("div",{children:[C>0&&o.jsx("div",{className:"mx-2",style:{height:1,background:"rgba(0,0,0,0.06)"}}),o.jsx(Q1,{item:k,book:f(k.id),position:N,sectionList:j,onRemove:v,onChangePosition:w})]},k.id))})}),g=l?i.find(j=>String(j.id)===String(l)):null,S=g?f(g.id):null;return o.jsxs(zh,{sensors:p,collisionDetection:xh,onDragStart:h,onDragOver:y,onDragEnd:b,children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:_.textMuted},children:"System Prompt "}),m(c,"before")]}),o.jsxs("div",{className:"my-4 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}}),o.jsx("span",{className:"rounded-full px-3 py-1 text-[11px] font-bold",style:{background:"rgba(232,160,191,0.15)",color:_.accentDark},children:"System Prompt"}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:_.textMuted},children:"System Prompt "}),m(u,"after")]}),o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-3 text-[14px] font-semibold",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.accentDark},onClick:()=>s(!0),children:[o.jsx(Xr,{size:16})," "]}),o.jsx(Ih,{children:S&&o.jsxs("div",{className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",style:{background:_.bg,boxShadow:"var(--card-shadow)",opacity:.9},children:[o.jsx(qs,{size:14,style:{color:_.textMuted}}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:_.accentDark},children:S.name})})]})}),r&&o.jsx(G1,{allBooks:n,mountedIds:i.map(j=>j.id),onClose:()=>s(!1),onConfirm:j=>{x(j),s(!1)}})]})}function Ed(){const e=$t(),{id:t}=nh(),n=!t,[r,s]=d.useState("basic"),[l,a]=d.useState(""),[i,c]=d.useState(""),[u,f]=d.useState(""),[p,h]=d.useState(null),[y,b]=d.useState(null),[v,w]=d.useState(null),[x,m]=d.useState(""),[g,S]=d.useState(""),[j,N]=d.useState(null),[k,C]=d.useState(null),[z,D]=d.useState([]),[P,R]=d.useState([]),[E,B]=d.useState([]),[ee,ce]=d.useState(!1),[ue,I]=d.useState(!n),[O,U]=d.useState(null),[Q,J]=d.useState(!1),[ke,G]=d.useState(!1),[V,te]=d.useState(!1),[X,se]=d.useState(null),[ae,q]=d.useState([]),ve=d.useRef(null),we=d.useRef(null),Ye=ne=>{var ze;const fe=(ze=ne.target.files)==null?void 0:ze[0];if(!fe)return;const Me=new FileReader;Me.onload=_t=>f(_t.target.result||""),Me.readAsText(fe),ne.target.value=""},Se=ne=>{U(ne),setTimeout(()=>U(null),2500)},lt=async ne=>{const fe=ne==="human"?j:k;if(!fe){Se("");return}try{const Me=await $(`/api/core-blocks/${fe}/history`);q(Me.history||[]),se(ne)}catch(Me){Se("")}};d.useEffect(()=>{(async()=>{const[fe,Me]=await Promise.all([$("/api/presets").catch(()=>({presets:[]})),$("/api/world-books").catch(()=>({world_books:[]}))]);if(R(fe.presets||[]),B(Me.world_books||[]),n)I(!1);else try{const[ze,_t]=await Promise.all([$(`/api/assistants/${t}`),$(`/api/core-blocks?assistant_id=${t}`).catch(()=>({blocks:[]}))]);a(ze.name||""),Yr(`assistant-avatar-${t}`).then($e=>{$e&&c($e)}).catch(function(){}),f(ze.system_prompt||""),h(ze.model_preset_id||null),b(ze.summary_model_preset_id||null),w(ze.summary_fallback_preset_id||null),D(ze.rule_set_ids||[]);for(const $e of _t.blocks||[])$e.block_type==="human"?(m($e.content||""),N($e.id)):$e.block_type==="persona"&&(S($e.content||""),C($e.id))}catch(ze){Se(": "+ze.message)}finally{I(!1)}})()},[t,n]);const be=ne=>{var ze;const fe=(ze=ne.target.files)==null?void 0:ze[0];if(!fe)return;const Me=new FileReader;Me.onload=async _t=>{const $e=_t.target.result,Un=`assistant-avatar-${t||"new"}`;try{await Di(Un,$e),c($e)}catch(M){Se("")}},Me.readAsDataURL(fe),ne.target.value=""},Mt=async()=>{if(!l.trim()){Se("");return}ce(!0);try{const ne={name:l.trim(),avatar_url:i?`assistant-avatar-${t||"new"}`:null,system_prompt:u,model_preset_id:p,summary_model_preset_id:y,summary_fallback_preset_id:v,rule_set_ids:Vh(z)};let fe=t;if(n?(fe=(await $("/api/assistants",{method:"POST",body:{name:l.trim()}})).id,i&&(await Di(`assistant-avatar-${fe}`,i),ne.avatar_url=`assistant-avatar-${fe}`),await $(`/api/assistants/${fe}`,{method:"PUT",body:ne})):await $(`/api/assistants/${t}`,{method:"PUT",body:ne}),j)await $(`/api/core-blocks/${j}`,{method:"PUT",body:{content:x}});else if(x.trim()){const Me=await $("/api/core-blocks",{method:"POST",body:{block_type:"human",assistant_id:Number(fe),content:x}});N(Me.id)}if(k)await $(`/api/core-blocks/${k}`,{method:"PUT",body:{content:g}});else if(g.trim()){const Me=await $("/api/core-blocks",{method:"POST",body:{block_type:"persona",assistant_id:Number(fe),content:g}});C(Me.id)}Se("")}catch(ne){Se(": "+ne.message)}finally{ce(!1)}},xn=[{key:"basic",label:""},{key:"about",label:"Core Blocks"},{key:"books",label:""}];return o.jsxs("div",{className:"flex h-full flex-col",style:{background:_.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:_.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:_.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:ee?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:Mt,disabled:ee,children:o.jsx(Ho,{size:18,style:{color:_.accentDark}})})]}),o.jsx("div",{className:"flex shrink-0 gap-1 px-5 pb-3",children:xn.map(ne=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2.5 text-[13px] font-semibold transition-all",style:{background:r===ne.key?_.bg:"transparent",boxShadow:r===ne.key?"var(--card-shadow-sm)":"none",color:r===ne.key?_.accentDark:_.textMuted},onClick:()=>s(ne.key),children:ne.label},ne.key))}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px",children:ue?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:_.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[r==="basic"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-4 flex items-center gap-4 rounded-[20px] p-4",style:{background:_.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var ne;return(ne=ve.current)==null?void 0:ne.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:_.bg},children:i?o.jsx("img",{src:i,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[24px]",style:{color:_.accentDark},children:(l==null?void 0:l[0])||"?"})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:_.accentDark},children:o.jsx(ih,{size:9,color:"white"})})]}),o.jsx("input",{ref:ve,type:"file",accept:"image/*",className:"hidden",onChange:be}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:_.textMuted},children:""}),o.jsx("input",{type:"text",value:l,onChange:ne=>a(ne.target.value),placeholder:"",className:"w-full rounded-[12px] px-4 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:_.bg,color:_.text}})]})]}),o.jsxs("div",{className:"mb-4 rounded-[20px] p-4",style:{background:_.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:_.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:_.bg},onClick:()=>{var ne;return(ne=we.current)==null?void 0:ne.click()},title:"",children:o.jsx(Uo,{size:13,style:{color:_.textMuted}})}),o.jsx("input",{ref:we,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:Ye}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:_.bg},onClick:()=>J(!0),title:"",children:o.jsx(Zs,{size:13,style:{color:_.accentDark}})})]})]}),o.jsx("textarea",{value:u,onChange:ne=>f(ne.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:_.bg,color:_.text}})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:_.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(Ra,{label:"",value:p,onChange:h,presets:P}),o.jsx(Ra,{label:"",value:y,onChange:b,presets:P}),o.jsx(Ra,{label:"",value:v,onChange:w,presets:P})]})]}),r==="about"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-4 rounded-[20px] p-4",style:{background:_.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Cd,{label:"human block",value:x,onChange:m,placeholder:" AI ...",rows:7,onExpand:()=>G(!0),onHistory:()=>lt("human")})}),o.jsx("div",{className:"rounded-[20px] p-4",style:{background:_.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Cd,{label:"persona block",value:g,onChange:S,placeholder:"AI ...",rows:7,onExpand:()=>te(!0),onHistory:()=>lt("persona")})})]}),r==="books"&&o.jsx("div",{className:"rounded-[20px] p-4",style:{background:_.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(J1,{ruleSetIds:z,onChange:D,allBooks:E})})]})}),Q&&o.jsx(za,{value:u,onChange:f,onClose:()=>J(!1),title:"",placeholder:"..."}),ke&&o.jsx(za,{value:x,onChange:m,onClose:()=>G(!1),title:"human block",placeholder:" AI ..."}),V&&o.jsx(za,{value:g,onChange:S,onClose:()=>te(!1),title:"persona block",placeholder:"AI ..."}),X&&o.jsx(Y1,{items:ae,currentContent:X==="human"?x:g,onApply:async ne=>{const fe=X==="human"?j:k;try{await $(`/api/core-blocks/${fe}`,{method:"PUT",body:{content:ne}}),X==="human"?m(ne):S(ne),Se("")}catch(Me){Se("")}},onClose:()=>se(null)}),O&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:O})})]})}const re={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function q1({on:e,onToggle:t}){return o.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full transition-all",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":re.bg},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function Md({icon:e,label:t,hint:n,onClick:r}){return o.jsxs("button",{className:"flex w-full items-center gap-4 px-4 py-4",onClick:r,children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:re.bg},children:e}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:re.text},children:t}),n&&o.jsx("div",{className:"text-[11px]",style:{color:re.textMuted},children:n})]}),o.jsx($r,{size:16,style:{color:re.textMuted}})]})}function _d(){return o.jsx("div",{className:"mx-4 h-px",style:{background:"rgba(136,136,160,0.15)"}})}function cr({value:e,onChange:t,min:n,max:r}){const[s,l]=d.useState(String(e));d.useEffect(()=>l(String(e)),[e]);const a=()=>{let i=parseInt(s);isNaN(i)&&(i=n),i=Math.max(n,Math.min(r,i)),l(String(i)),t(i)};return o.jsx("input",{type:"number",value:s,onChange:i=>l(i.target.value),onBlur:a,onKeyDown:i=>i.key==="Enter"&&a(),className:"w-20 rounded-[10px] py-2 text-center text-[14px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:re.bg,color:re.text},min:n,max:r})}function Z1(){const e=$t(),[t,n]=d.useState(()=>{var k;return((k=JSON.parse(localStorage.getItem("app-settings")||"{}"))==null?void 0:k.autoMessage)||!1}),[r,s]=d.useState(()=>{var k;return((k=JSON.parse(localStorage.getItem("app-settings")||"{}"))==null?void 0:k.autoMessageIntervalMin)||30}),[l,a]=d.useState(()=>{var k;return((k=JSON.parse(localStorage.getItem("app-settings")||"{}"))==null?void 0:k.autoMessageIntervalMax)||60}),[i,c]=d.useState(()=>parseInt(localStorage.getItem("telegram_buffer_seconds")||"15")),[u,f]=d.useState(8),[p,h]=d.useState(8e3),[y,b]=d.useState(16e3),[v,w]=d.useState(!1),[x,m]=d.useState(!1),[g,S]=d.useState(null),j=k=>{S(k),setTimeout(()=>S(null),2e3)};d.useEffect(()=>{$("/api/settings/context-budget").then(k=>{h(k.retain_budget),b(k.trigger_threshold),w(!0)}).catch(()=>w(!0))},[]),d.useEffect(()=>{const k=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({...k,autoMessage:t,autoMessageIntervalMin:r,autoMessageIntervalMax:l}))},[t,r,l]),d.useEffect(()=>{localStorage.setItem("telegram_buffer_seconds",String(i)),$("/api/settings/buffer-seconds",{method:"PUT",body:{seconds:i}}).catch(()=>{})},[i]),d.useEffect(()=>{$("/api/settings/short-msg-max").then(k=>f(k.max_count||8)).catch(()=>{})},[]),d.useEffect(()=>{$("/api/settings/short-msg-max",{method:"PUT",body:{max_count:u}}).catch(()=>{})},[u]);const N=async()=>{m(!0);try{await $("/api/settings/context-budget",{method:"PUT",body:{retain_budget:p,trigger_threshold:y}}),j("")}catch(k){j("")}finally{m(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:re.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:re.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:re.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:re.text},children:""}),o.jsx("div",{className:"w-10"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px space-y-4",children:[o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:re.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(Md,{icon:o.jsx(Fy,{size:18,style:{color:re.text}}),label:"API ",hint:"  ",onClick:()=>e("/settings/api")}),o.jsx(_d,{}),o.jsx(Md,{icon:o.jsx(Ay,{size:18,style:{color:re.textMuted}}),label:"",hint:"",onClick:()=>j("")})]}),o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:re.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:re.bg},children:o.jsx(Ly,{size:18,style:{color:re.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:re.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:re.textMuted},children:" AI "})]}),o.jsx(q1,{on:t,onToggle:()=>n(!t)})]}),t&&o.jsx("div",{className:"px-4 pb-4",children:o.jsxs("div",{className:"flex items-center justify-between rounded-[12px] px-4 py-3",style:{boxShadow:"var(--inset-shadow)",background:re.bg},children:[o.jsx("span",{className:"text-[12px] font-medium",style:{color:re.textMuted},children:" ()"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(cr,{value:r,onChange:s,min:1,max:999}),o.jsx("span",{style:{color:re.textMuted},children:"~"}),o.jsx(cr,{value:l,onChange:a,min:1,max:999})]})]})})]}),o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:re.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:re.bg},children:o.jsx(Hy,{size:18,style:{color:re.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:re.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:re.textMuted},children:" ()"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(cr,{value:i,onChange:c,min:1,max:120}),o.jsx("span",{className:"text-[12px]",style:{color:re.textMuted},children:""})]})]}),o.jsx(_d,{}),o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:re.bg},children:o.jsx(zy,{size:18,style:{color:re.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:re.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:re.textMuted},children:""})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(cr,{value:u,onChange:f,min:2,max:20}),o.jsx("span",{className:"text-[12px]",style:{color:re.textMuted},children:""})]})]})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:re.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:re.bg},children:o.jsx(Ty,{size:18,style:{color:re.text}})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:re.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:re.textMuted},children:""})]})]}),v?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:re.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:re.textMuted},children:" token "})]}),o.jsx(cr,{value:p,onChange:h,min:1e3,max:1e5})]}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:re.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:re.textMuted},children:""})]}),o.jsx(cr,{value:y,onChange:b,min:1e3,max:2e5})]}),o.jsx("button",{className:"w-full rounded-[14px] py-3 text-[14px] font-bold text-white",style:{background:x?"rgba(201,98,138,0.5)":"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"3px 3px 8px rgba(201,98,138,0.3)"},onClick:N,disabled:x,children:x?"...":""})]}):o.jsx("div",{className:"flex justify-center py-4",children:o.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2",style:{borderColor:re.accent,borderTopColor:"transparent"}})})]})]}),g&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:g})})]})}const A={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},e0=["claude-opus-4-6","claude-opus-4-5-20251101","claude-sonnet-4-6","claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001"];function t0(e){try{return new URL(e).hostname}catch(t){return e}}function Td({label:e,value:t,onChange:n,placeholder:r,password:s,disabled:l}){const[a,i]=d.useState(!1);return o.jsxs("div",{className:"mb-4",children:[e&&o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:A.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:s&&!a?"password":"text",value:t,onChange:c=>n(c.target.value),placeholder:r,disabled:l,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none pr-12",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:l?A.textMuted:A.text,opacity:l?.5:1}}),s&&o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>i(!a),children:a?o.jsx(Ry,{size:16,style:{color:A.textMuted}}):o.jsx(Dy,{size:16,style:{color:A.textMuted}})})]})]})}function n0({value:e,onChange:t,options:n}){return o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:A.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[12px] font-semibold transition-all",style:{background:e===r.value?A.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?A.accentDark:A.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})}function r0({value:e,onChange:t,options:n,placeholder:r}){const[s,l]=d.useState(!1),a=d.useRef(null);return d.useEffect(()=>{if(!s)return;const i=c=>{a.current&&!a.current.contains(c.target)&&l(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[s]),o.jsxs("div",{className:"relative",ref:a,children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:e?A.text:A.textMuted},onClick:()=>l(!s),children:[o.jsx("span",{className:"truncate",children:e||r||""}),o.jsx(Vr,{size:16,style:{color:A.textMuted,flexShrink:0,transform:s?"rotate(180deg)":"none"}})]}),s&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:A.bg,boxShadow:"var(--card-shadow)"},children:n.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[13px]",style:{color:A.text},onClick:()=>{t(i),l(!1)},children:[o.jsx("span",{className:"truncate",children:i}),i===e&&o.jsx(Ws,{size:12,style:{color:A.accentDark,flexShrink:0}})]},i))})]})}function s0({value:e,onChange:t}){const[n,r]=d.useState(!1),s=d.useRef(null);return d.useEffect(()=>{if(!n)return;const l=a=>{s.current&&!s.current.contains(a.target)&&r(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[n]),o.jsxs("div",{className:"relative",ref:s,children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"",value:e,onChange:l=>t(l.target.value),className:"w-full rounded-[14px] px-4 py-3 pr-10 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:A.text}}),o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>r(!n),children:o.jsx(Vr,{size:16,style:{color:A.textMuted}})})]}),n&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:A.bg,boxShadow:"var(--card-shadow)"},children:e0.map(l=>o.jsx("button",{className:"flex w-full px-4 py-3 text-left text-[13px]",style:{color:A.text},onClick:()=>{t(l),r(!1)},children:l},l))})]})}function Pa({value:e,onChange:t,min:n,max:r,step:s}){const[l,a]=d.useState(String(e));d.useEffect(()=>a(String(e)),[e]);const i=()=>{let c=parseFloat(l);isNaN(c)&&(c=n),c=Math.max(n,Math.min(r,c)),c=Math.round(c/s)*s,c=parseFloat(c.toFixed(4)),a(String(c)),t(c)};return o.jsx("input",{type:"number",value:l,onChange:c=>a(c.target.value),onBlur:i,onKeyDown:c=>c.key==="Enter"&&i(),step:s,min:n,max:r,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:A.text}})}function Dd({on:e,onToggle:t}){return o.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":A.bg,transition:"background 0.2s"},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function Ia({children:e,className:t=""}){return o.jsx("div",{className:`rounded-[20px] p-5 mb-4 space-y-4 ${t}`,style:{background:A.bg,boxShadow:"var(--card-shadow)"},children:e})}function l0(){const e=$t(),[t,n]=d.useState([]),[r,s]=d.useState([]),[l,a]=d.useState(!0),[i,c]=d.useState(""),[u,f]=d.useState(""),[p,h]=d.useState("api_key"),[y,b]=d.useState(""),[v,w]=d.useState([]),[x,m]=d.useState(!1),[g,S]=d.useState(1),[j,N]=d.useState(!1),[k,C]=d.useState(1),[z,D]=d.useState(!1),[P,R]=d.useState(4096),[E,B]=d.useState(null),[ee,ce]=d.useState(null),[ue,I]=d.useState(!1),[O,U]=d.useState(!1),[Q,J]=d.useState(""),[ke,G]=d.useState(!1),[V,te]=d.useState(!1),[X,se]=d.useState(null),[ae,q]=d.useState(null),[ve,we]=d.useState(""),Ye=d.useRef(null),Se=d.useRef(!1),lt=d.useRef({});lt.current={baseUrl:i,apiKey:u,authType:p,modelName:y,temperature:g,tempEnabled:j,topP:k,topPEnabled:z,maxTokens:P,editingPreset:E,providers:t};const be=d.useCallback(L=>{ce(L),setTimeout(()=>ce(null),2500)},[]),Mt=d.useCallback(async()=>{try{const[L,pe]=await Promise.all([$("/api/providers"),$("/api/presets")]);n(L.providers||[]),s(pe.presets||[])}catch(L){be(": "+L.message)}finally{a(!1)}},[be]);d.useEffect(()=>{Mt()},[Mt]);const xn=L=>{var ie,Pe;B(L),b(L.model_name),N(L.temperature!=null),S((ie=L.temperature)!=null?ie:1),D(L.top_p!=null),C((Pe=L.top_p)!=null?Pe:1),R(L.max_tokens);const pe=t.find(Tt=>Tt.id===L.api_provider_id);pe&&(c(pe.base_url),f(pe.api_key),h(pe.auth_type||"api_key"))},ne=()=>{B(null),c(""),f(""),h("api_key"),b(""),S(1),N(!1),C(1),D(!1),R(4096),w([])},fe=async()=>{if(!i.trim()||!u.trim()){be(" API  Key");return}m(!0);try{const L=await fetch(`${i.trim().replace(/\/+$/,"")}/models`,{headers:{Authorization:`Bearer ${u.trim()}`}});if(!L.ok)throw new Error(`HTTP ${L.status}`);const ie=((await L.json()).data||[]).map(Pe=>Pe.id).sort();w(ie),be(ie.length?` ${ie.length} `:"")}catch(L){be(": "+L.message)}finally{m(!1)}},Me=async()=>{var L;if(!i.trim()||!u.trim()||!y.trim()){be(" API Key ");return}I(!0);try{const pe=i.trim().replace(/\/+$/,""),ie={"Content-Type":"application/json",Authorization:`Bearer ${u.trim()}`};p==="oauth_token"&&(ie["anthropic-beta"]="claude-code-20250219,oauth-2025-04-20,fine-grained-tool-streaming-2025-05-14",ie["anthropic-dangerous-direct-browser-access"]="true",ie["x-app"]="cli");const Pe=await fetch(`${pe}/chat/completions`,{method:"POST",headers:ie,body:JSON.stringify({model:y.trim(),max_tokens:10,messages:[{role:"user",content:"Hi"}]})});if(!Pe.ok){const Tt=await Pe.json().catch(()=>({}));throw new Error(((L=Tt.error)==null?void 0:L.message)||`HTTP ${Pe.status}`)}be(" ")}catch(pe){be(": "+pe.message)}finally{I(!1)}},ze=async L=>{const pe=lt.current,ie=pe.baseUrl.trim(),Pe=pe.apiKey.trim(),Tt=pe.authType,nn=L.find(Zo=>Zo.base_url===ie);return nn?((nn.api_key!==Pe||nn.auth_type!==Tt)&&await $(`/api/providers/${nn.id}`,{method:"PUT",body:{api_key:Pe,auth_type:Tt}}),nn.id):(await $("/api/providers",{method:"POST",body:{name:t0(ie),base_url:ie,api_key:Pe,auth_type:Tt}})).id},_t=async(L,pe)=>{const ie=lt.current;if(!ie.baseUrl.trim()||!ie.apiKey.trim()||!ie.modelName.trim()){be("");return}te(!0);try{const Pe=await ze(ie.providers),Tt={name:L,model_name:ie.modelName.trim(),temperature:ie.tempEnabled?ie.temperature:null,top_p:ie.topPEnabled?ie.topP:null,max_tokens:Number(ie.maxTokens)||4096,api_provider_id:Pe};ie.editingPreset&&!pe?(await $(`/api/presets/${ie.editingPreset.id}`,{method:"PUT",body:Tt}),be("")):(await $("/api/presets",{method:"POST",body:Tt}),be("")),await Mt()}catch(Pe){be(": "+Pe.message)}finally{te(!1)}},$e=()=>{const L=Q.trim();L&&(U(!1),_t(L,ke))},Un=()=>{E&&_t(E.name,!1)},M=async()=>{if(X){try{await $(`/api/presets/${X.id}`,{method:"DELETE"}),be(""),(E==null?void 0:E.id)===X.id&&ne(),Mt()}catch(L){be(": "+L.message)}se(null)}},F=async()=>{const L=ve.trim();if(!(!L||!ae)){try{await $(`/api/presets/${ae.id}`,{method:"PUT",body:{name:L}}),be(""),Mt()}catch(pe){be("")}q(null)}},K=(L,pe)=>{Se.current=!1,L.touches?L.touches[0].clientX:L.clientX,L.touches?L.touches[0].clientY:L.clientY,Ye.current=setTimeout(()=>{Se.current=!0,se(pe)},600)},Ze=()=>clearTimeout(Ye.current);return o.jsxs("div",{className:"flex h-full flex-col",style:{background:A.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:A.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:A.text},children:"API "}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px",children:l?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:A.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs(Ia,{children:[o.jsx(Td,{label:"API ",value:i,onChange:c,placeholder:"https://api.openai.com/v1",disabled:p==="oauth_token"}),o.jsx(Td,{label:"API Key",value:u,onChange:f,placeholder:p==="oauth_token"?"sk-ant-oat01-...":"sk-...",password:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:A.textMuted},children:""}),o.jsx(n0,{value:p,onChange:L=>{h(L),L==="oauth_token"&&c("https://api.anthropic.com/v1")},options:[{value:"api_key",label:" API Key"},{value:"oauth_token",label:"Setup Token"}]})]})]}),o.jsxs(Ia,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:A.textMuted},children:""}),p==="oauth_token"?o.jsx(s0,{value:y,onChange:b}):o.jsx(r0,{value:y,onChange:b,options:v})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text},onClick:Me,disabled:ue,children:[ue?o.jsx(cd,{size:14,className:"animate-spin"}):null,""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text,opacity:p==="oauth_token"?.4:1},onClick:fe,disabled:x||p==="oauth_token",children:[x?o.jsx(cd,{size:14,className:"animate-spin"}):o.jsx(Rc,{size:14}),""]})]})]}),o.jsxs(Ia,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:A.text},children:" (0-2)"}),o.jsx("div",{className:"text-[11px]",style:{color:A.textMuted},children:""})]}),o.jsx(Dd,{on:j,onToggle:()=>N(!j)})]}),j&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:A.textMuted},children:""}),o.jsx(Pa,{value:g,onChange:S,min:0,max:2,step:.1})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:A.text},children:"Top P (0-1)"}),o.jsx(Dd,{on:z,onToggle:()=>D(!z)})]}),z&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:A.textMuted},children:""}),o.jsx(Pa,{value:k,onChange:C,min:0,max:1,step:.05})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:A.text},children:"Max Tokens"}),o.jsx(Pa,{value:P,onChange:R,min:128,max:2e5,step:1})]})]}),o.jsxs("div",{className:"mb-4 space-y-3",children:[E?o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:Un,disabled:V,children:[o.jsx(Ho,{size:14}),V?"...":""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text},onClick:()=>{G(!0),J(""),U(!0)},disabled:V,children:[o.jsx(_y,{size:14}),""]})]}):o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>{G(!0),J(""),U(!0)},disabled:V,children:[o.jsx(Xr,{size:14}),""]}),E&&o.jsx("button",{className:"w-full py-1 text-center text-[12px]",style:{color:A.textMuted},onClick:ne,children:""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"mb-3 text-[12px] font-bold uppercase tracking-wide",style:{color:A.textMuted},children:""}),r.length===0?o.jsx("div",{className:"rounded-[20px] py-8 text-center text-[13px]",style:{background:A.bg,boxShadow:"var(--card-shadow)",color:A.textMuted},children:""}):o.jsx("div",{className:"space-y-3",children:r.map(L=>{var pe,ie;return o.jsxs("div",{className:"rounded-[18px] p-4",style:{background:A.bg,boxShadow:(E==null?void 0:E.id)===L.id?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{Se.current||xn(L)},onTouchStart:Pe=>K(Pe,L),onTouchEnd:Ze,onMouseDown:Pe=>K(Pe,L),onMouseUp:Ze,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-[14px] font-bold truncate",style:{color:(E==null?void 0:E.id)===L.id?A.accentDark:A.text},children:L.name}),o.jsx(uh,{size:12,style:{color:A.textMuted,flexShrink:0,marginLeft:8}})]}),o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:A.textMuted},children:L.model_name}),o.jsxs("div",{className:"mt-1 text-[10px] font-mono",style:{color:A.textMuted},children:["T: ",(pe=L.temperature)!=null?pe:""," | Top-P: ",(ie=L.top_p)!=null?ie:""," | Max: ",L.max_tokens]})]},L.id)})})]})]})}),O&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>U(!1),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:A.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:L=>L.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:A.text},children:""}),o.jsx("input",{type:"text",value:Q,onChange:L=>J(L.target.value),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:A.text},autoFocus:!0,onKeyDown:L=>L.key==="Enter"&&$e()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text},onClick:()=>U(!1),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:Q.trim()?"linear-gradient(135deg, var(--accent), var(--accent-dark))":"rgba(201,98,138,0.3)"},onClick:$e,disabled:!Q.trim(),children:""})]})]})}),X&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>se(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:A.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:L=>L.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:A.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:A.textMuted},children:["",X.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text},onClick:()=>se(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:M,children:""})]})]})}),ae&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>q(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:A.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:L=>L.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:A.text},children:""}),o.jsx("input",{autoFocus:!0,type:"text",value:ve,onChange:L=>we(L.target.value),className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:A.text},onKeyDown:L=>L.key==="Enter"&&F()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text},onClick:()=>q(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))"},onClick:F,children:""})]})]})}),ee&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:ee})})]})}const he={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Jo={thinking:{bg:"rgba(168,130,200,0.12)",color:"#8860c8",label:""},tool_use:{bg:"rgba(232,160,60,0.12)",color:"#b8820a",label:""},tool_result:{bg:"rgba(80,160,200,0.12)",color:"#1a7ab0",label:""},injected_memories:{bg:"rgba(80,180,120,0.12)",color:"#3a8a5f",label:""}},o0=[{key:"short",label:""},{key:"long",label:""},{key:"theater",label:""}],a0=[{key:"happy",label:""},{key:"sad",label:""},{key:"angry",label:""},{key:"anxious",label:""},{key:"tired",label:""},{key:"emo",label:""},{key:"flirty",label:""},{key:"proud",label:""},{key:"calm",label:""}],Rd=300;function Fc({block_type:e}){const t=Jo[e]||{bg:"rgba(136,136,160,0.1)",color:he.textMuted,label:e};return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:t.bg,color:t.color},children:t.label})}function Xh({content:e}){const[t,n]=d.useState(!1),r=e.length>Rd;return o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:he.text},children:r&&!t?e.slice(0,Rd)+"...":e}),r&&o.jsx("div",{className:"mt-1.5 flex justify-center",children:o.jsx("button",{className:"rounded-full px-3 py-0.5 text-[11px]",style:{color:he.accentDark,background:"rgba(232,160,191,0.12)"},onClick:s=>{s.stopPropagation(),n(!t)},children:t?"":""})})]})}function i0({block:e,cacheKey:t,translateCache:n}){const r=n.current.get(t),[s,l]=d.useState(r||null),[a,i]=d.useState(!!r),[c,u]=d.useState(!1),f=Jo.thinking,p=async h=>{if(h.stopPropagation(),s){i(!a);return}u(!0);try{const y=await $("/api/cot/translate",{method:"POST",body:{text:e.content}});l(y.translated),i(!0),n.current.set(t,y.translated)}catch(y){console.error("Translation failed:",y)}finally{u(!1)}};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:f.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(Fc,{block_type:"thinking"}),o.jsx("span",{className:"flex-1"}),o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#1a7ab0",background:"rgba(80,160,200,0.15)"},onClick:p,disabled:c,children:c?"...":a?"":""})]}),o.jsx(Xh,{content:a&&s?s:e.content})]})}function c0({avatarUrl:e}){return o.jsx("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full overflow-hidden",style:{boxShadow:"var(--icon-inset)",background:he.bg},children:e?o.jsx("img",{src:e,alt:"",className:"h-full w-full object-cover"}):o.jsx("span",{style:{fontSize:16},children:""})})}function zd(e){return e?e>=1e3?`${(e/1e3).toFixed(1)}k`:String(e):"0"}function u0(e){if(!e)return null;const t=e/1e3;return t>=100?`${Math.round(t)}s`:`${t.toFixed(1)}s`}function d0({prompt:e,completion:t,elapsedMs:n}){return!e&&!t&&!n?null:o.jsxs(o.Fragment,{children:[e||t?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(80,160,120,0.12)",color:"#3a8a5f"},children:["",zd(e)]}),o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(160,100,220,0.12)",color:"#8a5abf"},children:["",zd(t)]})]}):null,n?o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(200,140,60,0.12)",color:"#b8820a"},children:u0(n)}):null]})}function f0(e){const t=[],n=[],r=[],s=[];for(const a of e)a.block_type==="thinking"?t.push(a):a.block_type==="tool_use"?n.push(a):a.block_type==="tool_result"?r.push(a):s.push(a);const l=[];for(let a=0;a<n.length;a++)l.push(n[a]),a<r.length&&l.push(r[a]);for(let a=n.length;a<r.length;a++)l.push(r[a]);return[...t,...l,...s]}function p0({memories:e}){const[t,n]=d.useState(!1);if(!e||e.length===0)return null;const r=Jo.injected_memories;return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:r.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-2",onClick:()=>n(!t),children:[o.jsx(Fc,{block_type:"injected_memories"}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:r.color},children:["(",e.length,")"]}),t?o.jsx(ch,{size:12,style:{color:r.color}}):o.jsx(Vr,{size:12,style:{color:r.color}})]}),t&&o.jsx("div",{className:"mt-2 space-y-1",children:e.map(s=>o.jsxs("p",{className:"text-[11px] leading-relaxed",style:{color:he.text},children:[o.jsxs("span",{style:{color:r.color,fontWeight:600},children:["#",s.id]})," ",s.content]},s.id))})]})}function h0({item:e,expanded:t,onToggle:n,live:r,avatarUrl:s,translateCache:l}){const a=e.rounds.map(c=>({...c,blocks:f0(c.blocks.filter(u=>u.block_type!=="text"&&u.block_type!=="usage"))})).filter(c=>c.blocks.length>0),i=a.length>0||e.injectedMemories&&e.injectedMemories.length>0||r&&e.textPreview;return o.jsxs("div",{className:"rounded-[18px] overflow-hidden",style:{background:he.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-3 p-4",onClick:n,children:[o.jsx(c0,{avatarUrl:s}),o.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r&&o.jsx("span",{className:"inline-block h-3 w-3 animate-spin rounded-full border-[1.5px]",style:{borderColor:he.accentDark,borderTopColor:"transparent"}}),e.has_tool_calls&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold",style:{background:"rgba(232,160,60,0.15)",color:"#b8820a"},children:""}),o.jsx(d0,{prompt:e.prompt_tokens||0,completion:e.completion_tokens||0,elapsedMs:e.elapsed_ms||0}),o.jsx("span",{className:"text-[10px]",style:{color:he.textMuted},children:e.created_at||""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[13px]",style:{color:he.text},children:e.preview||"()"})]}),t?o.jsx(ch,{size:16,style:{color:he.textMuted,flexShrink:0}}):o.jsx(Vr,{size:16,style:{color:he.textMuted,flexShrink:0}})]}),t&&i&&o.jsxs("div",{className:"px-4 pb-4",children:[o.jsx(p0,{memories:e.injectedMemories}),a.map(c=>o.jsxs("div",{className:"mb-3",children:[a.length>1&&o.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:he.textMuted},children:[" ",c.round_index+1]}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}})]}),c.blocks.map((u,f)=>{if(u.block_type==="thinking")return o.jsx(i0,{block:u,cacheKey:`${e.request_id}:${c.round_index}:${f}`,translateCache:l},f);const p=Jo[u.block_type]||{bg:"rgba(136,136,160,0.08)",color:he.textMuted,label:u.block_type};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:p.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(Fc,{block_type:u.block_type}),u.tool_name&&o.jsx("span",{className:"text-[10px] font-mono",style:{color:p.color},children:u.tool_name})]}),o.jsx(Xh,{content:u.content})]},f)})]},c.round_index)),r&&e.textPreview&&o.jsxs("div",{className:"rounded-[12px] p-3",style:{background:"rgba(232,160,191,0.08)"},children:[o.jsx("div",{className:"mb-1",children:o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(232,160,191,0.15)",color:he.accentDark},children:""})}),o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:he.text},children:e.textPreview})]})]})]})}function m0(){const e=$t(),[t,n]=d.useState([]),[r,s]=d.useState(!0),[l,a]=d.useState(null),[i,c]=d.useState(()=>localStorage.getItem("chat_mode")||"long"),[u,f]=d.useState(!1),[p,h]=d.useState(new Set),[y,b]=d.useState(null),[v,w]=d.useState(null),x=d.useRef(null),m=d.useRef(new Map),[g,S]=d.useState(null),[j,N]=d.useState(!1),k=d.useRef(null),[C,z]=d.useState(()=>localStorage.getItem("whisper_token")),D=()=>{s(!0),b(null),$("/api/cot?limit=100").then(R=>{n(Array.isArray(R)?R:[])}).catch(R=>{console.error("COT load error:",R),b(R.message||"")}).finally(()=>{s(!1);const R=localStorage.getItem("whisper_token");R&&R!==C&&z(R)})};d.useEffect(()=>{D()},[]),d.useEffect(()=>{$("/api/sessions?limit=1").then(R=>{var B;const E=(B=R.sessions)==null?void 0:B[0];E!=null&&E.assistant_id&&Yr(`assistant-avatar-${E.assistant_id}`).then(ee=>{ee&&w(ee)}).catch(()=>{})}).catch(()=>{})},[]),d.useEffect(()=>{$("/api/settings/mood").then(R=>S(R.mood||"calm")).catch(()=>S("calm"))},[]),d.useEffect(()=>{if(!j)return;const R=E=>{k.current&&!k.current.contains(E.target)&&N(!1)};return document.addEventListener("pointerdown",R),()=>document.removeEventListener("pointerdown",R)},[j]),d.useEffect(()=>{if(!C){console.log("[COT WS] No token yet, waiting...");return}const E=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/cot?token=${encodeURIComponent(C)}`;console.log("[COT WS] Connecting to",E);let B,ee,ce=!1;const ue=()=>{ce||(B=new WebSocket(E),x.current=B,B.onopen=()=>{console.log("[COT WS] Connected"),f(!0)},B.onmessage=I=>{try{const O=JSON.parse(I.data),{type:U,request_id:Q}=O,J=G=>{const V=G.findIndex(ae=>ae.request_id===Q);return V>=0?[G,V]:[[{request_id:Q,created_at:new Date().toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),preview:"...",has_tool_calls:!1,rounds:[],injectedMemories:[],textPreview:""},...G],0]},ke=(G,V)=>{const te=G.findIndex(se=>se.round_index===V);if(te>=0)return[G,te];const X=[...G,{round_index:V,blocks:[]}];return X.sort((se,ae)=>se.round_index-ae.round_index),[X,X.findIndex(se=>se.round_index===V)]};if(U==="done"){h(G=>{const V=new Set(G);return V.delete(Q),V}),n(G=>G.map(V=>V.request_id===Q?{...V,prompt_tokens:O.prompt_tokens||0,completion_tokens:O.completion_tokens||0,elapsed_ms:O.elapsed_ms||0,textPreview:""}:V));return}if(U==="injected_memories"){n(G=>{let[V,te]=J(G);return V=[...V],V[te]={...V[te],injectedMemories:O.memories||[]},V}),h(G=>new Set(G).add(Q)),a(Q);return}if(U==="thinking_delta"){n(G=>{let[V,te]=J(G);V=[...V];const X={...V[te]};let[se,ae]=ke([...X.rounds],O.round_index);const q={...se[ae],blocks:[...se[ae].blocks]};let ve=-1;for(let we=q.blocks.length-1;we>=0;we--)if(q.blocks[we].block_type==="thinking"){ve=we;break}return ve>=0?q.blocks[ve]={...q.blocks[ve],content:q.blocks[ve].content+O.content}:q.blocks.push({block_type:"thinking",content:O.content,tool_name:null}),se[ae]=q,X.rounds=se,V[te]=X,V}),h(G=>new Set(G).add(Q)),a(Q);return}if(U==="text_delta"){n(G=>{let[V,te]=J(G);V=[...V];const X={...V[te]};return X.textPreview=(X.textPreview||"")+O.content,(!X.preview||X.preview==="...")&&(X.preview=X.textPreview.slice(0,80)),V[te]=X,V}),h(G=>new Set(G).add(Q)),a(Q);return}if(U==="tool_use"||U==="tool_result"){n(G=>{let[V,te]=J(G);V=[...V];const X={...V[te]};let[se,ae]=ke([...X.rounds],O.round_index);return se[ae]={...se[ae],blocks:[...se[ae].blocks,{block_type:U,content:O.content,tool_name:O.tool_name}]},X.rounds=se,U==="tool_use"&&(X.has_tool_calls=!0),V[te]=X,V}),h(G=>new Set(G).add(Q)),a(Q);return}if(O.block_type){const{round_index:G,block_type:V,content:te,tool_name:X}=O;n(se=>{let[ae,q]=J(se);ae=[...ae];const ve={...ae[q]};let[we,Ye]=ke([...ve.rounds],G);return we[Ye]={...we[Ye],blocks:[...we[Ye].blocks,{block_type:V,content:te,tool_name:X}]},ve.rounds=we,V==="tool_use"&&(ve.has_tool_calls=!0),V==="text"&&(!ve.preview||ve.preview==="...")&&(ve.preview=te.slice(0,80)),ae[q]=ve,ae}),h(se=>new Set(se).add(Q)),a(Q)}}catch(O){}},B.onclose=I=>{console.log("[COT WS] Disconnected, code:",I.code,"reason:",I.reason),f(!1),x.current=null,ce||(ee=setTimeout(ue,3e3))},B.onerror=I=>{console.error("[COT WS] Error:",I),B.close()})};return ue(),()=>{ce=!0,clearTimeout(ee),x.current&&(x.current.onclose=null,x.current.close())}},[C]),d.useEffect(()=>{localStorage.setItem("chat_mode",i);const R=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({...R,shortMode:i==="short",theaterMode:i==="theater"})),$("/api/settings/chat-mode",{method:"PUT",body:{mode:i}}).catch(()=>{})},[i]);const P=R=>{S(R),N(!1),$("/api/settings/mood",{method:"PUT",body:{mood:R}}).catch(()=>{})};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:he.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:he.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:he.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:he.text},children:"COT "}),o.jsxs("div",{className:"flex items-center gap-2",children:[u&&o.jsx("div",{className:"h-2 w-2 rounded-full",style:{background:"#2a9d5c"},title:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:he.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:D,disabled:r,children:o.jsx(Rc,{size:16,style:{color:he.accentDark},className:r?"animate-spin":""})})]})]}),o.jsx("div",{className:"shrink-0 pb-3",style:{paddingLeft:20,paddingRight:20},children:o.jsxs("div",{className:"flex items-stretch gap-4 justify-center",children:[o.jsxs("div",{className:"relative flex",ref:k,children:[o.jsx("button",{className:"flex w-[42px] shrink-0 items-center justify-center rounded-[14px]",style:{background:he.bg,boxShadow:"var(--inset-shadow)"},onClick:()=>g&&N(!j),children:g?o.jsx("img",{src:`/miniapp/assets/mood/${g}.png`,alt:g,className:"h-6 w-6",style:{imageRendering:"pixelated"}}):o.jsx("div",{className:"h-6 w-6"})}),j&&o.jsx("div",{className:"absolute left-0 top-12 z-50 rounded-[16px] overflow-hidden",style:{background:he.bg,boxShadow:"var(--card-shadow-sm)",width:174},children:a0.map((R,E)=>{const B=Math.floor(E/3),ee=E%3,ce=g===R.key;return o.jsxs("button",{className:"inline-flex flex-col items-center justify-center",style:{width:"calc(100% / 3)",padding:"8px 0 6px",background:ce?"rgba(232,160,191,0.18)":"transparent",boxShadow:[ee<2?"inset -1px 0 0 rgba(136,136,160,0.12)":"",B<2?"inset 0 -1px 0 rgba(136,136,160,0.12)":""].filter(Boolean).join(", ")||"none"},onClick:()=>P(R.key),children:[o.jsx("img",{src:`/miniapp/assets/mood/${R.key}.png`,alt:R.label,className:"h-7 w-7",style:{imageRendering:"pixelated",filter:ce?"drop-shadow(0 0 3px #e8a0bf)":"none"}}),o.jsx("span",{className:"text-[10px] mt-0.5",style:{color:ce?"#d48aab":he.textMuted},children:R.label})]},R.key)})})]}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:he.bg,width:240},children:o0.map(R=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:i===R.key?he.bg:"transparent",boxShadow:i===R.key?"var(--card-shadow-sm)":"none",color:i===R.key?he.accentDark:he.textMuted},onClick:()=>c(R.key),children:R.label},R.key))})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:he.accent,borderTopColor:"transparent"}})}):y?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(id,{size:36,style:{color:"#ef4444",opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:"#ef4444"},children:y})]}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(id,{size:36,style:{color:he.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:he.textMuted},children:" COT "})]}):t.map(R=>o.jsx("div",{className:"mb-3 rounded-[18px]",style:{background:he.bg,boxShadow:"var(--card-shadow-sm)"},children:o.jsx(h0,{item:R,expanded:l===R.request_id,onToggle:()=>a(l===R.request_id?null:R.request_id),live:p.has(R.request_id),avatarUrl:v,translateCache:m})},R.request_id))})]})}const We={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Cl=80;function x0({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({sx:0,sy:0,base:0,cur:0,drag:!1,locked:!1,horiz:!1}),l=d.useCallback((i,c)=>{const u=n.current,f=r.current;if(!u)return;const p=c?"all .25s ease":"none";if(u.style.transition=p,u.style.transform=i?`translateX(${i}px)`:"",f){const h=Math.min(1,Math.abs(i)/Cl);f.style.transition=p,f.style.opacity=`${h}`}i||(u.style.willChange="auto"),s.current.cur=i},[]),a=d.useCallback(()=>l(0,!0),[l]);return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:We.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{onClick:()=>{a(),t()},className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},children:[o.jsx(Kr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",style:{},onTouchStart:i=>{const c=i.touches[0],u=s.current;u.sx=c.clientX,u.sy=c.clientY,u.base=u.cur,u.drag=!0,u.locked=!1,u.horiz=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},onTouchMove:i=>{const c=s.current;if(!c.drag)return;const u=i.touches[0],f=u.clientX-c.sx,p=u.clientY-c.sy;if(!c.locked){if(Math.abs(f)<5&&Math.abs(p)<5)return;c.locked=!0,c.horiz=Math.abs(f)>Math.abs(p),c.horiz&&n.current&&(n.current.style.willChange="transform")}if(!c.horiz){c.drag=!1;return}i.preventDefault();const h=Math.max(-Cl,Math.min(0,c.base+f));n.current&&(n.current.style.transform=`translateX(${h}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(h)/Cl)}`),c.cur=h},onTouchEnd:()=>{s.current.drag=!1,l(s.current.cur<-40?-Cl:0,!0)},children:e})]})}function g0({msg:e,roleLabel:t,roleColor:n,fmtTime:r,onDelete:s}){const[l,a]=d.useState(!1),[i,c]=d.useState(!1),u=d.useRef(null);return d.useLayoutEffect(()=>{const f=u.current;f&&!l&&c(f.scrollHeight>f.clientHeight+1)},[e.content,l]),o.jsx(x0,{onDelete:s,children:o.jsxs("div",{className:"rounded-[18px] p-3",style:{background:We.bg},children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:n(e.role)},children:t(e.role)}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[e.summarized&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px] font-semibold",style:{background:"rgba(58,138,95,0.15)",color:"#2d7a4a"},children:""}),o.jsx("span",{className:"text-[10px]",style:{color:We.textMuted},children:r(e.created_at)})]})]}),o.jsx("div",{ref:u,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:We.text}:{color:We.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:e.content}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:"#d48aab",background:"rgba(232,160,191,0.1)"},onClick:f=>{f.stopPropagation(),a(!l)},children:l?"":""})})]})})}function y0(){const e=$t(),[t,n]=d.useState([]),[r,s]=d.useState(null),[l,a]=d.useState(!0),[i,c]=d.useState(!1),u=async()=>{var v;a(!0);try{const x=(v=(await $("/api/sessions?limit=1")).sessions)==null?void 0:v[0];if(!x){a(!1);return}s(x.id);const m=await $(`/api/sessions/${x.id}/messages?limit=50`);n((m.messages||[]).reverse()),c(m.has_more||!1)}catch(w){console.error(w)}a(!1)};d.useEffect(()=>{u()},[]);const f=async v=>{if(r)try{await $(`/api/sessions/${r}/messages/${v}`,{method:"DELETE"}),n(w=>w.filter(x=>x.id!==v))}catch(w){console.error("Delete failed",w)}},p=async()=>{if(!r||!i||l)return;const v=t[t.length-1];if(v){a(!0);try{const w=await $(`/api/sessions/${r}/messages?limit=50&before_id=${v.id}`),x=(w.messages||[]).reverse();n(m=>[...m,...x]),c(w.has_more||!1)}catch(w){console.error(w)}a(!1)}},h=v=>{if(!v)return"";const w=new Date(v),x=new Date;return w.toDateString()===x.toDateString()?w.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):w.toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})},y=v=>v==="user"?"":v==="assistant"?"AI":"",b=v=>v==="user"?We.accentDark:v==="assistant"?"#3a9b5c":We.textMuted;return o.jsxs("div",{className:"flex h-full flex-col",style:{background:We.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:We.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:We.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:We.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:We.bg,boxShadow:l?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:u,disabled:l,children:o.jsx(Rc,{size:16,style:{color:We.accentDark},className:l?"animate-spin":""})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("p",{className:"text-[11px]",style:{color:We.textMuted},children:""})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l&&t.length===0?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:We.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:We.textMuted},children:""}):o.jsxs(o.Fragment,{children:[t.map(v=>o.jsx(g0,{msg:v,roleLabel:y,roleColor:b,fmtTime:h,onDelete:()=>f(v.id)},v.id)),i&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:We.bg,boxShadow:"var(--card-shadow-sm)",color:We.accentDark},onClick:p,disabled:l,children:l?"...":""})]})})]})}const W={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},v0=[{key:"memories",label:""},{key:"summaries",label:""},{key:"messages",label:""}],El=80,Pd={identity:{color:"#7b5ea7",bg:"#ede4f7"},relationship:{color:"#c26a8a",bg:"#f7e0ea"},bond:{color:"#d48aab",bg:"#fce8f0"},conflict:{color:"#b5454a",bg:"#f5dede"},fact:{color:"#4a8ab5",bg:"#deedf5"},preference:{color:"#9b7a3b",bg:"#f0ebd8"},health:{color:"#4a9b6e",bg:"#ddf0e5"},task:{color:"#6b7b9b",bg:"#e0e6f0"},ephemeral:{color:"#9b9b9b",bg:"#ececec"},other:{color:"#8a7a6a",bg:"#efe8df"}};function Sr(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function Bc({text:e,keyword:t}){if(!t||!e)return o.jsx(o.Fragment,{children:e});const n=e.toLowerCase(),r=t.toLowerCase(),s=[];let l=0,a=n.indexOf(r,l);for(;a!==-1;)a>l&&s.push(o.jsx("span",{children:e.slice(l,a)},l)),s.push(o.jsx("span",{style:{color:W.accentDark,fontWeight:600},children:e.slice(a,a+r.length)},`h${a}`)),l=a+r.length,a=n.indexOf(r,l);return l<e.length&&s.push(o.jsx("span",{children:e.slice(l)},l)),o.jsx(o.Fragment,{children:s})}function w0({message:e,onConfirm:t,onCancel:n}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:W.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:W.text},children:""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:W.textMuted},children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.text},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function b0({initialText:e,onSave:t,onCancel:n}){const[r,s]=d.useState(e);return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-5 w-full max-w-[340px] rounded-[18px] p-4",style:{background:W.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:l=>l.stopPropagation(),children:[o.jsx("textarea",{className:"w-full rounded-[12px] p-3 text-[12px] leading-relaxed resize-none outline-none",style:{background:W.bg,boxShadow:"var(--inset-shadow)",color:W.text,minHeight:140,maxHeight:280},value:r,onChange:l=>s(l.target.value),autoFocus:!0}),o.jsxs("div",{className:"mt-3 flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.textMuted},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.accentDark},onClick:()=>t(r),disabled:!r.trim(),children:""})]})]})})}function Kh({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({sx:0,sy:0,base:0,cur:0,drag:!1,locked:!1,horiz:!1}),l=d.useCallback((i,c)=>{const u=n.current,f=r.current;if(!u)return;const p=c?"all .25s ease":"none";u.style.transition=p,u.style.transform=i?`translateX(${i}px)`:"",f&&(f.style.transition=p,f.style.opacity=`${Math.min(1,Math.abs(i)/El)}`),i||(u.style.willChange="auto"),s.current.cur=i},[]),a=d.useCallback(()=>l(0,!0),[l]);return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{onClick:()=>{a(),t()},className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},children:[o.jsx(Kr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i=>{const c=i.touches[0],u=s.current;u.sx=c.clientX,u.sy=c.clientY,u.base=u.cur,u.drag=!0,u.locked=!1,u.horiz=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},onTouchMove:i=>{const c=s.current;if(!c.drag)return;const u=i.touches[0],f=u.clientX-c.sx,p=u.clientY-c.sy;if(!c.locked){if(Math.abs(f)<5&&Math.abs(p)<5)return;c.locked=!0,c.horiz=Math.abs(f)>Math.abs(p),c.horiz&&n.current&&(n.current.style.willChange="transform")}if(!c.horiz){c.drag=!1;return}i.preventDefault();const h=Math.max(-El,Math.min(0,c.base+f));n.current&&(n.current.style.transform=`translateX(${h}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(h)/El)}`),c.cur=h},onTouchEnd:()=>{s.current.drag=!1,l(s.current.cur<-40?-El:0,!0)},children:e})]})}function Id({children:e,time:t,badge:n,keyword:r,onSwipeDelete:s,onEdit:l}){const[a,i]=d.useState(!1),[c,u]=d.useState(!1),f=d.useRef(null),p=typeof e=="string"?e:"",h=!!s;d.useLayoutEffect(()=>{const b=f.current;b&&!a&&u(b.scrollHeight>b.clientHeight+1)},[p,a]);const y=o.jsxs("div",{className:h?"rounded-[18px] p-3":"mb-3 rounded-[18px] p-3",style:{background:W.bg,boxShadow:h?"none":"var(--card-shadow-sm)"},children:[o.jsxs("div",{className:"flex items-start justify-between gap-1",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[n,o.jsx("div",{ref:f,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:a?{color:W.text}:{color:W.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>i(!a),children:o.jsx(Bc,{text:p,keyword:r})})]}),l&&o.jsx("button",{className:"mt-0.5 flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)"},onClick:b=>{b.stopPropagation(),l()},children:o.jsx(uh,{size:11,style:{color:W.accentDark}})})]}),o.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:W.textMuted},children:t||""}),(c||a)&&o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:W.accentDark,background:"rgba(232,160,191,0.1)"},onClick:b=>{b.stopPropagation(),i(!a)},children:a?"":""})]})]});return s?o.jsx(Kh,{onDelete:s,children:y}):y}function k0({content:e,deletedAt:t,keyword:n,onRestore:r,onPermanentDelete:s}){const[l,a]=d.useState(!1),[i,c]=d.useState(!1),u=d.useRef(null);return d.useLayoutEffect(()=>{const f=u.current;f&&!l&&c(f.scrollHeight>f.clientHeight+1)},[e,l]),o.jsxs("div",{className:"mb-2 rounded-[14px] p-3",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",opacity:.75},children:[o.jsx("div",{ref:u,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:W.text}:{color:W.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:o.jsx(Bc,{text:e,keyword:n})}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:W.accentDark,background:"rgba(232,160,191,0.1)"},onClick:f=>{f.stopPropagation(),a(!l)},children:l?"":""})}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:W.textMuted},children:t?` ${Sr(t)}`:""}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(59,130,246,0.1)",color:"#3b82f6"},onClick:r,children:""}),o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(239,68,68,0.1)",color:"#ef4444"},onClick:s,children:""})]})]})]})}function j0({msg:e,keyword:t,roleLabel:n,roleColor:r,onDelete:s}){const[l,a]=d.useState(!1),[i,c]=d.useState(!1),u=d.useRef(null);return d.useLayoutEffect(()=>{const f=u.current;f&&!l&&c(f.scrollHeight>f.clientHeight+1)},[e.content,l]),o.jsx(Kh,{onDelete:s,children:o.jsxs("div",{className:"rounded-[18px] p-3",style:{background:W.bg},children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:r(e.role)},children:n(e.role)}),e.summary_group_id&&o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(74,138,181,0.1)",color:"#4a8ab5"},children:["",e.summary_group_id]})]}),o.jsx("span",{className:"text-[10px]",style:{color:W.textMuted},children:Sr(e.created_at)})]}),o.jsx("div",{ref:u,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:W.text}:{color:W.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:o.jsx(Bc,{text:e.content,keyword:t})}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:W.accentDark,background:"rgba(232,160,191,0.1)"},onClick:f=>{f.stopPropagation(),a(!l)},children:l?"":""})})]})})}function S0(){const e=$t(),[t,n]=d.useState("memories"),[r,s]=d.useState(!1),[l,a]=d.useState(null),[i,c]=d.useState([]),[u,f]=d.useState(null),[p,h]=d.useState(""),[y,b]=d.useState(null),[v,w]=d.useState(null),[x,m]=d.useState([]),[g,S]=d.useState([]),[j,N]=d.useState([]),[k,C]=d.useState([]),[z,D]=d.useState([]),[P,R]=d.useState(!0),[E,B]=d.useState(!1),[ee,ce]=d.useState(!1),[ue,I]=d.useState(!1);d.useEffect(()=>{$("/api/sessions?limit=50").then(M=>{const F=M.sessions||[];c(F),F.length>0&&!l&&a(F[0].id)}).catch(()=>{})},[]),d.useEffect(()=>{l&&$(`/api/sessions/${l}/info`).then(M=>f(M.assistant_name||null)).catch(()=>f(null))},[l]);const O=50,U=d.useRef(""),Q=d.useRef(null);d.useEffect(()=>{l&&ke()},[l,r]),d.useEffect(()=>{l&&!r&&ke()},[t]),d.useEffect(()=>(Q.current&&clearTimeout(Q.current),Q.current=setTimeout(()=>{const M=p.trim();M!==U.current&&(U.current=M,l&&ke(M))},400),()=>{Q.current&&clearTimeout(Q.current)}),[p]);const J=M=>{const F=(M!=null?M:U.current||"").trim();return F?`&search=${encodeURIComponent(F)}`:""},ke=async M=>{if(!l)return;R(!0);const F=J(M);try{if(r){const[K,Ze]=await Promise.all([$("/api/memories/trash?limit=100"),$(`/api/sessions/${l}/summaries/trash`)]);C(K.memories||[]),D(Ze.summaries||[])}else if(t==="memories"){const K=await $(`/api/memories?limit=${O}&offset=0${F}`);m(K.memories||[]),B((K.total||0)>(K.memories||[]).length)}else if(t==="summaries"){const K=await $(`/api/sessions/${l}/summaries?limit=${O}&offset=0${F}`);S(K.summaries||[]),ce((K.total||0)>(K.summaries||[]).length)}else{const K=await $(`/api/sessions/${l}/messages?limit=50${F}`);N((K.messages||[]).reverse()),I(K.has_more||!1)}}catch(K){console.error(K)}R(!1)},G=async()=>{if(!E||P)return;R(!0);const M=J();try{const F=await $(`/api/memories?limit=${O}&offset=${x.length}${M}`),K=F.memories||[];m(Ze=>[...Ze,...K]),B((F.total||0)>x.length+K.length)}catch(F){console.error(F)}R(!1)},V=async()=>{if(!l||!ee||P)return;R(!0);const M=J();try{const F=await $(`/api/sessions/${l}/summaries?limit=${O}&offset=${g.length}${M}`),K=F.summaries||[];S(Ze=>[...Ze,...K]),ce((F.total||0)>g.length+K.length)}catch(F){console.error(F)}R(!1)},te=async()=>{if(!l||!ue||P)return;const M=j[j.length-1];if(!M)return;R(!0);const F=J();try{const K=await $(`/api/sessions/${l}/messages?limit=50&before_id=${M.id}${F}`);N(Ze=>[...Ze,...(K.messages||[]).reverse()]),I(K.has_more||!1)}catch(K){console.error(K)}R(!1)},X=p.trim(),se=d.useMemo(()=>X?k.filter(M=>M.content.toLowerCase().includes(X.toLowerCase())):k,[k,X]),ae=d.useMemo(()=>X?z.filter(M=>(M.summary_content||"").toLowerCase().includes(X.toLowerCase())):z,[z,X]),q=(M,F)=>b({message:M,action:F}),ve=M=>q("",async()=>{await $(`/api/memories/${M}`,{method:"DELETE"}),m(F=>F.filter(K=>K.id!==M))}),we=M=>q("",async()=>{await $(`/api/sessions/${l}/summaries/${M}`,{method:"DELETE"}),S(F=>F.filter(K=>K.id!==M))}),Ye=M=>q("",async()=>{await $(`/api/sessions/${l}/messages/${M}`,{method:"DELETE"}),N(F=>F.filter(K=>K.id!==M))}),Se=async M=>{await $(`/api/memories/${M}/restore`,{method:"POST"}),C(F=>F.filter(K=>K.id!==M))},lt=M=>q("",async()=>{await $(`/api/memories/${M}/permanent`,{method:"DELETE"}),C(F=>F.filter(K=>K.id!==M))}),be=async M=>{await $(`/api/sessions/${l}/summaries/${M}/restore`,{method:"POST"}),D(F=>F.filter(K=>K.id!==M))},Mt=M=>q("",async()=>{await $(`/api/sessions/${l}/summaries/${M}/permanent`,{method:"DELETE"}),D(F=>F.filter(K=>K.id!==M))}),xn=async M=>{if(v){try{v.type==="memory"?(await $(`/api/memories/${v.id}`,{method:"PUT",body:{content:M}}),m(F=>F.map(K=>K.id===v.id?{...K,content:M}:K))):(await $(`/api/sessions/${l}/summaries/${v.id}`,{method:"PATCH",body:{summary_content:M}}),S(F=>F.map(K=>K.id===v.id?{...K,summary_content:M}:K)))}catch(F){console.error(F)}w(null)}},ne=M=>M==="user"?"":M==="assistant"?u||"":"",fe=M=>M==="user"?W.accentDark:M==="assistant"?"#8d68c4":W.textMuted,Un=r?(()=>{if(P)return o.jsx(Ml,{});const M=t==="memories"?se:ae;return M.length===0?o.jsx(_l,{text:X?"":""}):M.map(F=>o.jsx(k0,{content:F.content||F.summary_content||"()",deletedAt:F.deleted_at,keyword:X,onRestore:()=>t==="memories"?Se(F.id):be(F.id),onPermanentDelete:()=>t==="memories"?lt(F.id):Mt(F.id)},F.id))})():t==="memories"?P&&x.length===0?o.jsx(Ml,{}):x.length===0?o.jsx(_l,{text:X?"":""}):o.jsxs(o.Fragment,{children:[x.map(M=>o.jsx(Id,{time:M.updated_at?`${Sr(M.created_at)}   ${Sr(M.updated_at)}`:Sr(M.created_at),keyword:X,onSwipeDelete:()=>ve(M.id),onEdit:()=>w({type:"memory",id:M.id,text:M.content}),badge:(()=>{const F=Pd[M.klass]||Pd.other;return o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:F.bg,color:F.color},children:M.klass}),o.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:W.textMuted},children:["#",M.id]})]})})(),children:M.content},M.id)),E&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.accentDark},onClick:G,disabled:P,children:P?"...":""})]}):t==="summaries"?P&&g.length===0?o.jsx(Ml,{}):g.length===0?o.jsx(_l,{text:X?"":""}):o.jsxs(o.Fragment,{children:[g.map(M=>o.jsx(Id,{time:Sr(M.created_at),keyword:X,onSwipeDelete:()=>we(M.id),onEdit:()=>w({type:"summary",id:M.id,text:M.summary_content}),badge:o.jsxs(o.Fragment,{children:[M.mood_tag&&o.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:"rgba(232,160,191,0.15)",color:W.accentDark},children:M.mood_tag}),o.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:W.textMuted},children:["#",M.id]})]}),children:M.summary_content||"()"},M.id)),ee&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.accentDark},onClick:V,disabled:P,children:P?"...":""})]}):P&&j.length===0?o.jsx(Ml,{}):j.length===0?o.jsx(_l,{text:X?"":""}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"mb-2 text-[11px]",style:{color:W.textMuted},children:""}),j.map(M=>o.jsx(j0,{msg:M,keyword:X,roleLabel:ne,roleColor:fe,onDelete:()=>Ye(M.id)},M.id)),ue&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.accentDark},onClick:te,disabled:P,children:P?"...":""})]});return o.jsxs("div",{className:"flex h-full flex-col",style:{background:W.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:W.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:W.text},children:r?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:W.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>s(!r),children:o.jsx(Kr,{size:16,style:{color:r?"#ef4444":W.accentDark}})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:W.bg,boxShadow:"var(--inset-shadow)"},children:v0.map(M=>{const F=r&&M.key==="messages",K=t===M.key;return o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:F?{color:W.textMuted,opacity:.35,cursor:"default"}:K?{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.accentDark}:{color:W.textMuted},disabled:F,onClick:()=>!F&&n(M.key),children:M.label},M.key)})})}),o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative",style:{width:"33%"},children:[o.jsx("select",{className:"w-full appearance-none rounded-[12px] py-2 pl-3 pr-7 text-[11px] font-medium outline-none truncate",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.text,WebkitAppearance:"none"},value:l!=null?l:"",onChange:M=>a(Number(M.target.value)),children:i.map(M=>o.jsxs("option",{value:M.id,children:["#",M.id," ",M.title||""]},M.id))}),o.jsx(Vr,{size:12,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2",style:{color:W.textMuted}})]}),o.jsxs("div",{className:"relative flex-1",children:[o.jsx($y,{size:13,className:"absolute left-2.5 top-1/2 -translate-y-1/2",style:{color:W.textMuted}}),o.jsx("input",{className:"w-full rounded-[12px] py-2 pl-8 pr-7 text-[11px] outline-none",style:{background:W.bg,boxShadow:"var(--inset-shadow)",color:W.text},placeholder:"...",value:p,onChange:M=>h(M.target.value)}),p&&o.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>h(""),children:o.jsx(el,{size:13,style:{color:W.textMuted}})})]})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:Un}),y&&o.jsx(w0,{message:y.message,onConfirm:async()=>{try{await y.action()}catch(M){console.error(M)}b(null)},onCancel:()=>b(null)}),v&&o.jsx(b0,{initialText:v.text,onSave:xn,onCancel:()=>w(null)})]})}function Ml(){return o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:W.accent,borderTopColor:"transparent"}})})}function _l({text:e}){return o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:W.textMuted},children:e})}const Y={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},N0=[{key:"theirs",label:""},{key:"mine",label:""}],Tl=80;function Yh(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function C0({message:e,onConfirm:t,onCancel:n}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Y.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Y.text},children:""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:Y.textMuted},children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)",color:Y.text},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function E0({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({sx:0,sy:0,base:0,cur:0,drag:!1,locked:!1,horiz:!1}),l=d.useCallback((i,c)=>{const u=n.current,f=r.current;if(!u)return;const p=c?"all 0.25s cubic-bezier(.4,0,.2,1)":"none";u.style.transition=p,u.style.transform=i?`translateX(${i}px)`:"",f&&(f.style.transition=p,f.style.opacity=`${Math.min(1,Math.abs(i)/Tl)}`),i||(u.style.willChange="auto"),s.current.cur=i},[]),a=d.useCallback(()=>l(0,!0),[l]);return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{onClick:()=>{a(),t()},className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},children:[o.jsx(Kr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i=>{const c=i.touches[0],u=s.current;u.sx=c.clientX,u.sy=c.clientY,u.base=u.cur,u.drag=!0,u.locked=!1,u.horiz=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},onTouchMove:i=>{const c=s.current;if(!c.drag)return;const u=i.touches[0],f=u.clientX-c.sx,p=u.clientY-c.sy;if(!c.locked){if(Math.abs(f)<5&&Math.abs(p)<5)return;c.locked=!0,c.horiz=Math.abs(f)>Math.abs(p),c.horiz&&n.current&&(n.current.style.willChange="transform")}if(!c.horiz){c.drag=!1;return}i.preventDefault();const h=Math.max(-Tl,Math.min(0,c.base+f));n.current&&(n.current.style.transform=`translateX(${h}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(h)/Tl)}`),c.cur=h},onTouchEnd:()=>{s.current.drag=!1,l(s.current.cur<-40?-Tl:0,!0)},children:e})]})}function M0({unlockAt:e}){const[t,n]=d.useState(Date.now());d.useEffect(()=>{const u=setInterval(()=>n(Date.now()),1e3);return()=>clearInterval(u)},[]);const r=new Date(e).getTime()-t;if(r<=0)return null;const s=Math.floor(r/864e5),l=Math.floor(r%864e5/36e5),a=Math.floor(r%36e5/6e4),i=Math.floor(r%6e4/1e3);let c="";return s>0&&(c+=`${s}`),(l>0||s>0)&&(c+=`${l}`),c+=`${a}${i}`,o.jsxs("div",{className:"flex items-center gap-1.5 text-[12px]",style:{color:Y.accentDark},children:[o.jsx(Oy,{size:12}),o.jsx("span",{children:c})]})}function _0({assistants:e,avatarMap:t,currentId:n,onSelect:r,onClose:s}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:s,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-5",style:{background:Y.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:l=>l.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:Y.text},children:""}),o.jsx("button",{onClick:s,children:o.jsx(el,{size:18,style:{color:Y.textMuted}})})]}),o.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:e.map(l=>{var i;const a=t[l.id]||l.avatar_url;return o.jsxs("button",{className:"mb-2 flex w-full items-center gap-3 rounded-[14px] p-3 text-left",style:{background:Y.bg,boxShadow:l.id===n?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{r(l.id),s()},children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:36,height:36,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:2},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Y.bg},children:a?o.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:Y.accentDark},children:((i=l.name)==null?void 0:i[0])||"?"})})}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:Y.text},children:l.name})]},l.id)})})]})})}function T0({diary:e,onBack:t,onMarkRead:n}){return d.useEffect(()=>{e&&!e.is_read&&e.author==="assistant"&&(!e.unlock_at||new Date(e.unlock_at)<=new Date)&&n(e.id)},[e]),o.jsxs("div",{className:"flex h-full flex-col",style:{background:Y.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)"},onClick:t,children:o.jsx(Et,{size:22,style:{color:Y.text}})}),o.jsx("h1",{className:"text-[15px] font-bold truncate max-w-[60%]",style:{color:Y.text},children:e.title||""}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:o.jsxs("div",{className:"rounded-[18px] p-5",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{className:"mb-3 text-[10px]",style:{color:Y.textMuted},children:Yh(e.created_at)}),o.jsx("div",{className:"text-[13px] leading-[28px]",style:{color:Y.text},children:e.content.split(`
`).map((r,s)=>o.jsx("div",{style:{borderBottom:"1px solid rgba(0,0,0,0.06)",minHeight:28},children:r||""},s))})]})})]})}function D0({assistantId:e,onSave:t,onCancel:n}){const[r,s]=d.useState(""),[l,a]=d.useState(""),[i,c]=d.useState(!1),[u,f]=d.useState(""),[p,h]=d.useState(!1),[y,b]=d.useState(!1),v=async()=>{if(!(!l.trim()||p)){h(!0);try{const w={assistant_id:e,author:"user",title:r.trim(),content:l.trim()};i&&u&&(w.unlock_at=new Date(u).toISOString()),await t(w)}finally{h(!1)}}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Y.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Et,{size:22,style:{color:Y.text}})}),o.jsx("h1",{className:"text-[15px] font-bold",style:{color:Y.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Y.bg,boxShadow:l.trim()?"var(--card-shadow-sm)":"var(--inset-shadow)"},onClick:v,disabled:!l.trim()||p,children:o.jsx("span",{className:"text-[12px] font-bold",style:{color:l.trim()?Y.accentDark:Y.textMuted},children:""})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[!y&&o.jsx("input",{className:"mb-3 w-full rounded-[12px] px-3 py-2.5 text-[13px] font-medium outline-none",style:{background:Y.bg,boxShadow:"var(--inset-shadow)",color:Y.text},placeholder:"",value:r,onChange:w=>s(w.target.value)}),o.jsxs("div",{className:"relative mb-3",children:[o.jsx("textarea",{className:"w-full rounded-[14px] p-3 text-[13px] leading-[28px] resize-none outline-none",style:{background:Y.bg,boxShadow:"var(--inset-shadow)",color:Y.text,minHeight:y?"calc(100vh - 120px)":200,backgroundImage:"repeating-linear-gradient(transparent, transparent 27px, rgba(0,0,0,0.05) 27px, rgba(0,0,0,0.05) 28px)",backgroundPositionY:9},placeholder:"...",value:l,onChange:w=>a(w.target.value),autoFocus:!0}),o.jsx("button",{className:"absolute top-2 right-2 flex h-7 w-7 items-center justify-center rounded-full",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>b(!y),children:y?o.jsx(Fr,{size:13,style:{color:Y.accentDark}}):o.jsx(Zs,{size:13,style:{color:Y.accentDark}})})]}),!y&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-[14px] px-4 py-3",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-[13px] font-medium",style:{color:Y.text},children:""}),o.jsx("p",{className:"text-[10px]",style:{color:Y.textMuted},children:""})]}),o.jsx("button",{className:"relative h-7 w-12 rounded-full transition-colors",style:{background:i?Y.accent:"rgba(0,0,0,0.1)"},onClick:()=>{if(!i&&!u){const w=new Date;w.setDate(w.getDate()+1),w.setHours(9,0,0,0);const x=m=>String(m).padStart(2,"0");f(`${w.getFullYear()}-${x(w.getMonth()+1)}-${x(w.getDate())}T${x(w.getHours())}:${x(w.getMinutes())}`)}c(!i)},children:o.jsx("div",{className:"absolute top-0.5 h-6 w-6 rounded-full transition-transform",style:{background:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",transform:i?"translateX(22px)":"translateX(2px)"}})})]}),i&&o.jsxs("div",{className:"rounded-[14px] px-4 py-3",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("p",{className:"mb-2 text-[12px] font-medium",style:{color:Y.text},children:""}),o.jsx("input",{type:"datetime-local",className:"w-full rounded-[10px] px-3 py-2 text-[13px] outline-none",style:{background:Y.bg,boxShadow:"var(--inset-shadow)",color:Y.text},value:u,onChange:w=>f(w.target.value)})]})]})]})]})}function R0(){var R;const e=$t(),[t,n]=d.useState("theirs"),[r,s]=d.useState([]),[l,a]=d.useState({}),[i,c]=d.useState(null),[u,f]=d.useState(!1),[p,h]=d.useState([]),[y,b]=d.useState(!0),[v,w]=d.useState(null),[x,m]=d.useState(null),[g,S]=d.useState(!1);d.useEffect(()=>{$("/api/assistants").then(async E=>{const B=E.assistants||[];s(B),B.length>0&&!i&&c(B[0].id);const ee={};await Promise.all(B.map(async ce=>{const ue=await Yr(`assistant-avatar-${ce.id}`).catch(()=>null);ue&&(ee[ce.id]=ue)})),a(ee)}).catch(()=>{})},[]);const j=r.find(E=>E.id===i),N=i&&l[i]||(j==null?void 0:j.avatar_url);d.useEffect(()=>{i!=null&&k()},[i,t]);const k=async()=>{b(!0);try{const B=await $(`/api/diary?assistant_id=${i}&author=${t==="theirs"?"assistant":"user"}&limit=100`);h(B.diary||[])}catch(E){console.error(E)}b(!1)},C=E=>{w({message:"",action:async()=>{await $(`/api/diary/${E}`,{method:"DELETE"}),h(B=>B.filter(ee=>ee.id!==E))}})},z=async E=>{try{await $(`/api/diary/${E}/read`,{method:"POST"}),h(B=>B.map(ee=>ee.id===E?{...ee,is_read:!0}:ee))}catch(B){console.error(B)}},D=async E=>{await $("/api/diary",{method:"POST",body:E}),S(!1),k()},P=E=>{E.unlock_at&&new Date(E.unlock_at)>new Date||m(E)};return x?o.jsx(T0,{diary:x,onBack:()=>{m(null),k()},onMarkRead:z}):g?o.jsx(D0,{assistantId:i,onSave:D,onCancel:()=>S(!1)}):o.jsxs("div",{className:"flex h-full flex-col",style:{background:Y.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Y.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:Y.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Y.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{border:"2px solid #e8a0bf",padding:2},onClick:()=>f(!0),children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Y.bg},children:N?o.jsx("img",{src:N,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:Y.accentDark},children:((R=j==null?void 0:j.name)==null?void 0:R[0])||"?"})})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:Y.bg,boxShadow:"var(--inset-shadow)"},children:N0.map(E=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:t===E.key?{background:Y.bg,boxShadow:"var(--card-shadow-sm)",color:Y.accentDark}:{color:Y.textMuted},onClick:()=>n(E.key),children:E.label},E.key))})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24",children:y?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Y.accent,borderTopColor:"transparent"}})}):p.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:Y.textMuted},children:t==="theirs"?"":""}):p.map(E=>{const B=E.unlock_at&&new Date(E.unlock_at)>new Date;return o.jsx(E0,{onDelete:()=>C(E.id),children:o.jsxs("div",{className:"p-4 rounded-[18px]",style:{background:Y.bg,userSelect:"none"},onClick:()=>P(E),children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[!E.is_read&&E.author==="assistant"&&!B&&o.jsx("div",{className:"h-2 w-2 shrink-0 rounded-full",style:{background:"#ef4444"}}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:Y.text},children:E.title||""})]}),o.jsx("span",{className:"text-[10px] shrink-0 ml-2",style:{color:Y.textMuted},children:Yh(E.created_at)})]}),B?o.jsx(M0,{unlockAt:E.unlock_at}):o.jsx("p",{className:"text-[12px] leading-relaxed break-words",style:{color:Y.textMuted,maxHeight:40,overflow:"hidden"},children:E.content.length>60?E.content.slice(0,60)+"...":E.content})]})},E.id)})}),t==="mine"&&o.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center",style:{zIndex:30},children:o.jsx("button",{className:"flex h-12 w-12 items-center justify-center rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",boxShadow:"0 4px 14px rgba(232,160,191,0.4)"},onClick:()=>S(!0),children:o.jsx(Xr,{size:22,color:"white"})})}),u&&o.jsx(_0,{assistants:r,avatarMap:l,currentId:i,onSelect:c,onClose:()=>f(!1)}),v&&o.jsx(C0,{message:v.message,onConfirm:async()=>{try{await v.action()}catch(E){console.error(E)}w(null)},onCancel:()=>w(null)})]})}const ge={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function z0({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:ge.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:ge.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ge.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Fr,{size:18,style:{color:ge.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:ge.bg,color:ge.text},placeholder:"..."})]})}function P0(){const e=$t(),[t,n]=d.useState(""),[r,s]=d.useState(""),[l,a]=d.useState(""),[i,c]=d.useState(""),[u,f]=d.useState(!1),[p,h]=d.useState(!0),[y,b]=d.useState(null),[v,w]=d.useState(!1),x=d.useRef(null),m=d.useRef(null),g=k=>{b(k),setTimeout(()=>b(null),2e3)};d.useEffect(()=>{$("/api/user/profile").then(k=>{n(k.nickname||""),s(k.background_url||""),a(k.basic_info||"")}).catch(()=>{}).finally(()=>h(!1)),Yr("user-avatar").then(k=>{k&&c(k)}).catch(function(){})},[]);const S=k=>{var D;const C=(D=k.target.files)==null?void 0:D[0];if(!C)return;const z=new FileReader;z.onload=async P=>{const R=P.target.result;try{await Di("user-avatar",R),c(R)}catch(E){g("")}},z.readAsDataURL(C),k.target.value=""},j=k=>{var D;const C=(D=k.target.files)==null?void 0:D[0];if(!C)return;const z=new FileReader;z.onload=P=>a(P.target.result||""),z.readAsText(C),k.target.value=""},N=async()=>{f(!0);try{const k={nickname:t.trim()||null,background_url:r||null,basic_info:l||null,avatar_url:i?"user-avatar":null};await $("/api/user/profile",{method:"PUT",body:k});try{const C=JSON.parse(localStorage.getItem("whisper_profile")||"{}");localStorage.setItem("whisper_profile",JSON.stringify({...C,...k}))}catch(C){}g("")}catch(k){g("")}finally{f(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:ge.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ge.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:ge.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:ge.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ge.bg,boxShadow:u?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:N,disabled:u,children:o.jsx(Ho,{size:18,style:{color:ge.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px space-y-4",children:p?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:ge.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-[20px] p-5",style:{background:ge.bg,boxShadow:"var(--card-shadow)"},children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var k;return(k=x.current)==null?void 0:k.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:ge.bg},children:i?o.jsx("img",{src:i,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:24},children:""})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:ge.accentDark},children:o.jsx(ih,{size:9,color:"white"})})]}),o.jsx("input",{ref:x,type:"file",accept:"image/*",className:"hidden",onChange:S}),o.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ge.textMuted},children:""}),o.jsx("input",{type:"text",value:t,onChange:k=>n(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:ge.bg,color:ge.text}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ge.textMuted},children:""}),o.jsx("input",{type:"text",value:r,onChange:k=>s(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2 text-[13px] italic outline-none",style:{boxShadow:"var(--inset-shadow)",background:ge.bg,color:ge.text}})]})]})]})}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:ge.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:ge.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:ge.bg},onClick:()=>{var k;return(k=m.current)==null?void 0:k.click()},title:"",children:o.jsx(Uo,{size:13,style:{color:ge.textMuted}})}),o.jsx("input",{ref:m,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:j}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:ge.bg},onClick:()=>w(!0),title:"",children:o.jsx(Zs,{size:13,style:{color:ge.accentDark}})})]})]}),o.jsx("textarea",{value:l,onChange:k=>a(k.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:ge.bg,color:ge.text}})]})]})}),v&&o.jsx(z0,{value:l,onChange:a,onClose:()=>w(!1)}),y&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:y})})]})}function ur(){var n;const e=(n=window.Telegram)==null?void 0:n.WebApp,t=Math.max((e==null?void 0:e.viewportHeight)||0,window.innerHeight);document.documentElement.style.setProperty("--tg-viewport-height",t+"px")}function I0({onSuccess:e}){const[t,n]=d.useState(""),[r,s]=d.useState(""),[l,a]=d.useState(!1),i=async c=>{if(c.preventDefault(),!!t.trim()){a(!0),s("");try{await ky(t),e()}catch(u){s(u.message||"")}finally{a(!1)}}};return o.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--bg)",padding:"2rem"},children:o.jsxs("div",{style:{width:"100%",maxWidth:320,borderRadius:24,padding:"2rem 1.5rem",background:"var(--bg)",boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontSize:36,marginBottom:8},children:""}),o.jsx("h1",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--text)",margin:0},children:"WHISPER"}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:4},children:""})]}),o.jsxs("form",{onSubmit:i,children:[o.jsx("input",{type:"password",value:t,onChange:c=>n(c.target.value),placeholder:"",autoFocus:!0,style:{width:"100%",padding:"12px 16px",borderRadius:14,border:"none",outline:"none",fontSize:14,color:"var(--text)",background:"var(--bg)",boxShadow:"var(--inset-shadow)",boxSizing:"border-box"}}),r&&o.jsx("p",{style:{color:"#ef4444",fontSize:"0.75rem",textAlign:"center",marginTop:8,marginBottom:0},children:r}),o.jsx("button",{type:"submit",disabled:l||!t.trim(),style:{width:"100%",marginTop:16,padding:"12px 0",borderRadius:14,border:"none",fontSize:14,fontWeight:600,color:"#fff",background:l||!t.trim()?"var(--text-muted)":"linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%)",cursor:l||!t.trim()?"not-allowed":"pointer",boxShadow:"var(--card-shadow-sm)"},children:l?"...":""})]})]})})}function O0(){const e=Tc();return d.useEffect(()=>{var n;const t=(n=window.Telegram)==null?void 0:n.WebApp;t&&!e.pathname.startsWith("/cot")&&t.expand(),ur()},[e.pathname]),o.jsxs(yy,{children:[o.jsx(ot,{path:"/",element:o.jsx(Xy,{})}),o.jsx(ot,{path:"/profile",element:o.jsx(P0,{})}),o.jsx(ot,{path:"/world-books",element:o.jsx(O1,{})}),o.jsx(ot,{path:"/world-books/new",element:o.jsx(Nd,{})}),o.jsx(ot,{path:"/world-books/:id",element:o.jsx(Nd,{})}),o.jsx(ot,{path:"/assistants",element:o.jsx(K1,{})}),o.jsx(ot,{path:"/assistants/new",element:o.jsx(Ed,{})}),o.jsx(ot,{path:"/assistants/:id",element:o.jsx(Ed,{})}),o.jsx(ot,{path:"/settings",element:o.jsx(Z1,{})}),o.jsx(ot,{path:"/settings/api",element:o.jsx(l0,{})}),o.jsx(ot,{path:"/cot",element:o.jsx(m0,{})}),o.jsx(ot,{path:"/memories",element:o.jsx(S0,{})}),o.jsx(ot,{path:"/diary",element:o.jsx(R0,{})}),o.jsx(ot,{path:"/messages",element:o.jsx(y0,{})})]})}function L0(){const[e,t]=d.useState(null);return d.useEffect(()=>{var r;const n=(r=window.Telegram)==null?void 0:r.WebApp;return localStorage.getItem("whisper_token")||n&&n.initData&&n.initData.length>0?t("ok"):t("login"),n&&(n.ready(),window.location.hash.startsWith("#/cot")||n.expand()),ur(),n&&n.onEvent("viewportChanged",ur),window.addEventListener("resize",ur),()=>{n&&n.offEvent("viewportChanged",ur),window.removeEventListener("resize",ur)}},[]),e===null?null:e==="login"?o.jsx(I0,{onSuccess:()=>t("ok")}):o.jsx(by,{children:o.jsx(O0,{})})}Oa.createRoot(document.getElementById("root")).render(o.jsx(Ce.StrictMode,{children:o.jsx(L0,{})}));
