function ox(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function ax(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xd={exports:{}},_o={},Yd={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zs=Symbol.for("react.element"),ix=Symbol.for("react.portal"),cx=Symbol.for("react.fragment"),ux=Symbol.for("react.strict_mode"),dx=Symbol.for("react.profiler"),fx=Symbol.for("react.provider"),px=Symbol.for("react.context"),hx=Symbol.for("react.forward_ref"),xx=Symbol.for("react.suspense"),mx=Symbol.for("react.memo"),gx=Symbol.for("react.lazy"),Jc=Symbol.iterator;function vx(e){return e===null||typeof e!="object"?null:(e=Jc&&e[Jc]||e["@@iterator"],typeof e=="function"?e:null)}var Kd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qd=Object.assign,Gd={};function Kr(e,t,n){this.props=e,this.context=t,this.refs=Gd,this.updater=n||Kd}Kr.prototype.isReactComponent={};Kr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Kr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qd(){}qd.prototype=Kr.prototype;function Vi(e,t,n){this.props=e,this.context=t,this.refs=Gd,this.updater=n||Kd}var Xi=Vi.prototype=new qd;Xi.constructor=Vi;Qd(Xi,Kr.prototype);Xi.isPureReactComponent=!0;var Zc=Array.isArray,Jd=Object.prototype.hasOwnProperty,Yi={current:null},Zd={key:!0,ref:!0,__self:!0,__source:!0};function ef(e,t,n){var r,s={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)Jd.call(t,r)&&!Zd.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:Zs,type:e,key:l,ref:a,props:s,_owner:Yi.current}}function yx(e,t){return{$$typeof:Zs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ki(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zs}function wx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var eu=/\/+/g;function aa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wx(""+e.key):t.toString(36)}function $l(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Zs:case ix:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+aa(a,0):r,Zc(s)?(n="",e!=null&&(n=e.replace(eu,"$&/")+"/"),$l(s,t,n,"",function(u){return u})):s!=null&&(Ki(s)&&(s=yx(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(eu,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Zc(e))for(var i=0;i<e.length;i++){l=e[i];var c=r+aa(l,i);a+=$l(l,t,n,c,s)}else if(c=vx(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=r+aa(l,i++),a+=$l(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function dl(e,t,n){if(e==null)return e;var r=[],s=0;return $l(e,r,"","",function(l){return t.call(n,l,s++)}),r}function bx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xt={current:null},Al={transition:null},kx={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:Al,ReactCurrentOwner:Yi};function tf(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:dl,forEach:function(e,t,n){dl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return dl(e,function(){t++}),t},toArray:function(e){return dl(e,function(t){return t})||[]},only:function(e){if(!Ki(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};fe.Component=Kr;fe.Fragment=cx;fe.Profiler=dx;fe.PureComponent=Vi;fe.StrictMode=ux;fe.Suspense=xx;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kx;fe.act=tf;fe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Qd({},e.props),s=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=Yi.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Jd.call(t,c)&&!Zd.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var u=0;u<c;u++)i[u]=arguments[u+2];r.children=i}return{$$typeof:Zs,type:e.type,key:s,ref:l,props:r,_owner:a}};fe.createContext=function(e){return e={$$typeof:px,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:fx,_context:e},e.Consumer=e};fe.createElement=ef;fe.createFactory=function(e){var t=ef.bind(null,e);return t.type=e,t};fe.createRef=function(){return{current:null}};fe.forwardRef=function(e){return{$$typeof:hx,render:e}};fe.isValidElement=Ki;fe.lazy=function(e){return{$$typeof:gx,_payload:{_status:-1,_result:e},_init:bx}};fe.memo=function(e,t){return{$$typeof:mx,type:e,compare:t===void 0?null:t}};fe.startTransition=function(e){var t=Al.transition;Al.transition={};try{e()}finally{Al.transition=t}};fe.unstable_act=tf;fe.useCallback=function(e,t){return xt.current.useCallback(e,t)};fe.useContext=function(e){return xt.current.useContext(e)};fe.useDebugValue=function(){};fe.useDeferredValue=function(e){return xt.current.useDeferredValue(e)};fe.useEffect=function(e,t){return xt.current.useEffect(e,t)};fe.useId=function(){return xt.current.useId()};fe.useImperativeHandle=function(e,t,n){return xt.current.useImperativeHandle(e,t,n)};fe.useInsertionEffect=function(e,t){return xt.current.useInsertionEffect(e,t)};fe.useLayoutEffect=function(e,t){return xt.current.useLayoutEffect(e,t)};fe.useMemo=function(e,t){return xt.current.useMemo(e,t)};fe.useReducer=function(e,t,n){return xt.current.useReducer(e,t,n)};fe.useRef=function(e){return xt.current.useRef(e)};fe.useState=function(e){return xt.current.useState(e)};fe.useSyncExternalStore=function(e,t,n){return xt.current.useSyncExternalStore(e,t,n)};fe.useTransition=function(){return xt.current.useTransition()};fe.version="18.3.1";Yd.exports=fe;var d=Yd.exports;const Re=ax(d),jx=ox({__proto__:null,default:Re},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx=d,Nx=Symbol.for("react.element"),Cx=Symbol.for("react.fragment"),Ex=Object.prototype.hasOwnProperty,Mx=Sx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_x={key:!0,ref:!0,__self:!0,__source:!0};function nf(e,t,n){var r,s={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Ex.call(t,r)&&!_x.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Nx,type:e,key:l,ref:a,props:s,_owner:Mx.current}}_o.Fragment=Cx;_o.jsx=nf;_o.jsxs=nf;Xd.exports=_o;var o=Xd.exports,Xa={},rf={exports:{}},Rt={},sf={exports:{}},lf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,Y){var _=I.length;I.push(Y);e:for(;0<_;){var G=_-1>>>1,H=I[G];if(0<s(H,Y))I[G]=Y,I[_]=H,_=G;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var Y=I[0],_=I.pop();if(_!==Y){I[0]=_;e:for(var G=0,H=I.length,be=H>>>1;G<be;){var ve=2*(G+1)-1,He=I[ve],ye=ve+1,K=I[ye];if(0>s(He,_))ye<H&&0>s(K,He)?(I[G]=K,I[ye]=_,G=ye):(I[G]=He,I[ve]=_,G=ve);else if(ye<H&&0>s(K,_))I[G]=K,I[ye]=_,G=ye;else break e}}return Y}function s(I,Y){var _=I.sortIndex-Y.sortIndex;return _!==0?_:I.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],u=[],p=1,f=null,h=3,x=!1,w=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(I){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=I)r(u),Y.sortIndex=Y.expirationTime,t(c,Y);else break;Y=n(u)}}function S(I){if(v=!1,y(I),!w)if(n(c)!==null)w=!0,he(j);else{var Y=n(u);Y!==null&&me(S,Y.startTime-I)}}function j(I,Y){w=!1,v&&(v=!1,g(E),E=-1),x=!0;var _=h;try{for(y(Y),f=n(c);f!==null&&(!(f.expirationTime>Y)||I&&!$());){var G=f.callback;if(typeof G=="function"){f.callback=null,h=f.priorityLevel;var H=G(f.expirationTime<=Y);Y=e.unstable_now(),typeof H=="function"?f.callback=H:f===n(c)&&r(c),y(Y)}else r(c);f=n(c)}if(f!==null)var be=!0;else{var ve=n(u);ve!==null&&me(S,ve.startTime-Y),be=!1}return be}finally{f=null,h=_,x=!1}}var N=!1,k=null,E=-1,T=5,R=-1;function $(){return!(e.unstable_now()-R<T)}function oe(){if(k!==null){var I=e.unstable_now();R=I;var Y=!0;try{Y=k(!0,I)}finally{Y?W():(N=!1,k=null)}}else N=!1}var W;if(typeof m=="function")W=function(){m(oe)};else if(typeof MessageChannel!="undefined"){var P=new MessageChannel,J=P.port2;P.port1.onmessage=oe,W=function(){J.postMessage(null)}}else W=function(){b(oe,0)};function he(I){k=I,N||(N=!0,W())}function me(I,Y){E=b(function(){I(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,he(j))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(I){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var _=h;h=Y;try{return I()}finally{h=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,Y){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var _=h;h=I;try{return Y()}finally{h=_}},e.unstable_scheduleCallback=function(I,Y,_){var G=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?G+_:G):_=G,I){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=_+H,I={id:p++,callback:Y,priorityLevel:I,startTime:_,expirationTime:H,sortIndex:-1},_>G?(I.sortIndex=_,t(u,I),n(c)===null&&I===n(u)&&(v?(g(E),E=-1):v=!0,me(S,_-G))):(I.sortIndex=H,t(c,I),w||x||(w=!0,he(j))),I},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(I){var Y=h;return function(){var _=h;h=Y;try{return I.apply(this,arguments)}finally{h=_}}}})(lf);sf.exports=lf;var Tx=sf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dx=d,Dt=Tx;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var of=new Set,Rs={};function ar(e,t){$r(e,t),$r(e+"Capture",t)}function $r(e,t){for(Rs[e]=t,e=0;e<t.length;e++)of.add(t[e])}var pn=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Ya=Object.prototype.hasOwnProperty,Rx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tu={},nu={};function Px(e){return Ya.call(nu,e)?!0:Ya.call(tu,e)?!1:Rx.test(e)?nu[e]=!0:(tu[e]=!0,!1)}function zx(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ix(e,t,n,r){if(t===null||typeof t=="undefined"||zx(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mt(e,t,n,r,s,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){lt[e]=new mt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];lt[t]=new mt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){lt[e]=new mt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){lt[e]=new mt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){lt[e]=new mt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){lt[e]=new mt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){lt[e]=new mt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){lt[e]=new mt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){lt[e]=new mt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Qi=/[\-:]([a-z])/g;function Gi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Qi,Gi);lt[t]=new mt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Qi,Gi);lt[t]=new mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Qi,Gi);lt[t]=new mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){lt[e]=new mt(e,1,!1,e.toLowerCase(),null,!1,!1)});lt.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){lt[e]=new mt(e,1,!1,e.toLowerCase(),null,!0,!0)});function qi(e,t,n,r){var s=lt.hasOwnProperty(t)?lt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ix(t,n,s,r)&&(n=null),r||s===null?Px(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var vn=Dx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fl=Symbol.for("react.element"),gr=Symbol.for("react.portal"),vr=Symbol.for("react.fragment"),Ji=Symbol.for("react.strict_mode"),Ka=Symbol.for("react.profiler"),af=Symbol.for("react.provider"),cf=Symbol.for("react.context"),Zi=Symbol.for("react.forward_ref"),Qa=Symbol.for("react.suspense"),Ga=Symbol.for("react.suspense_list"),ec=Symbol.for("react.memo"),jn=Symbol.for("react.lazy"),uf=Symbol.for("react.offscreen"),ru=Symbol.iterator;function as(e){return e===null||typeof e!="object"?null:(e=ru&&e[ru]||e["@@iterator"],typeof e=="function"?e:null)}var $e=Object.assign,ia;function ms(e){if(ia===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ia=t&&t[1]||""}return`
`+ia+e}var ca=!1;function ua(e,t){if(!e||ca)return"";ca=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),l=r.stack.split(`
`),a=s.length-1,i=l.length-1;1<=a&&0<=i&&s[a]!==l[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==l[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==l[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{ca=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ms(e):""}function Lx(e){switch(e.tag){case 5:return ms(e.type);case 16:return ms("Lazy");case 13:return ms("Suspense");case 19:return ms("SuspenseList");case 0:case 2:case 15:return e=ua(e.type,!1),e;case 11:return e=ua(e.type.render,!1),e;case 1:return e=ua(e.type,!0),e;default:return""}}function qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vr:return"Fragment";case gr:return"Portal";case Ka:return"Profiler";case Ji:return"StrictMode";case Qa:return"Suspense";case Ga:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cf:return(e.displayName||"Context")+".Consumer";case af:return(e._context.displayName||"Context")+".Provider";case Zi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ec:return t=e.displayName||null,t!==null?t:qa(e.type)||"Memo";case jn:t=e._payload,e=e._init;try{return qa(e(t))}catch(n){}}return null}function Ox(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qa(t);case 8:return t===Ji?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function An(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function df(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $x(e){var t=df(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pl(e){e._valueTracker||(e._valueTracker=$x(e))}function ff(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=df(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ql(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ja(e,t){var n=t.checked;return $e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function su(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=An(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function pf(e,t){t=t.checked,t!=null&&qi(e,"checked",t,!1)}function Za(e,t){pf(e,t);var n=An(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ei(e,t.type,n):t.hasOwnProperty("defaultValue")&&ei(e,t.type,An(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function lu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ei(e,t,n){(t!=="number"||ql(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var gs=Array.isArray;function Dr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+An(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ti(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return $e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ou(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(gs(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:An(n)}}function hf(e,t){var n=An(t.value),r=An(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function au(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ni(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hl,mf=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hl=hl||document.createElement("div"),hl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ps(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ws={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ax=["Webkit","ms","Moz","O"];Object.keys(ws).forEach(function(e){Ax.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ws[t]=ws[e]})});function gf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ws.hasOwnProperty(e)&&ws[e]?(""+t).trim():t+"px"}function vf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=gf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Fx=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ri(e,t){if(t){if(Fx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function si(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var li=null;function tc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var oi=null,Rr=null,Pr=null;function iu(e){if(e=nl(e)){if(typeof oi!="function")throw Error(D(280));var t=e.stateNode;t&&(t=zo(t),oi(e.stateNode,e.type,t))}}function yf(e){Rr?Pr?Pr.push(e):Pr=[e]:Rr=e}function wf(){if(Rr){var e=Rr,t=Pr;if(Pr=Rr=null,iu(e),t)for(e=0;e<t.length;e++)iu(t[e])}}function bf(e,t){return e(t)}function kf(){}var da=!1;function jf(e,t,n){if(da)return e(t,n);da=!0;try{return bf(e,t,n)}finally{da=!1,(Rr!==null||Pr!==null)&&(kf(),wf())}}function zs(e,t){var n=e.stateNode;if(n===null)return null;var r=zo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var ai=!1;if(pn)try{var is={};Object.defineProperty(is,"passive",{get:function(){ai=!0}}),window.addEventListener("test",is,is),window.removeEventListener("test",is,is)}catch(e){ai=!1}function Bx(e,t,n,r,s,l,a,i,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(p){this.onError(p)}}var bs=!1,Jl=null,Zl=!1,ii=null,Ux={onError:function(e){bs=!0,Jl=e}};function Hx(e,t,n,r,s,l,a,i,c){bs=!1,Jl=null,Bx.apply(Ux,arguments)}function Wx(e,t,n,r,s,l,a,i,c){if(Hx.apply(this,arguments),bs){if(bs){var u=Jl;bs=!1,Jl=null}else throw Error(D(198));Zl||(Zl=!0,ii=u)}}function ir(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Sf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cu(e){if(ir(e)!==e)throw Error(D(188))}function Vx(e){var t=e.alternate;if(!t){if(t=ir(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return cu(s),e;if(l===r)return cu(s),t;l=l.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=l;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=l;break}if(i===r){a=!0,r=s,n=l;break}i=i.sibling}if(!a){for(i=l.child;i;){if(i===n){a=!0,n=l,r=s;break}if(i===r){a=!0,r=l,n=s;break}i=i.sibling}if(!a)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function Nf(e){return e=Vx(e),e!==null?Cf(e):null}function Cf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Cf(e);if(t!==null)return t;e=e.sibling}return null}var Ef=Dt.unstable_scheduleCallback,uu=Dt.unstable_cancelCallback,Xx=Dt.unstable_shouldYield,Yx=Dt.unstable_requestPaint,Be=Dt.unstable_now,Kx=Dt.unstable_getCurrentPriorityLevel,nc=Dt.unstable_ImmediatePriority,Mf=Dt.unstable_UserBlockingPriority,eo=Dt.unstable_NormalPriority,Qx=Dt.unstable_LowPriority,_f=Dt.unstable_IdlePriority,To=null,rn=null;function Gx(e){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(To,e,void 0,(e.current.flags&128)===128)}catch(t){}}var Xt=Math.clz32?Math.clz32:Zx,qx=Math.log,Jx=Math.LN2;function Zx(e){return e>>>=0,e===0?32:31-(qx(e)/Jx|0)|0}var xl=64,ml=4194304;function vs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function to(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=vs(i):(l&=a,l!==0&&(r=vs(l)))}else a=n&~s,a!==0?r=vs(a):l!==0&&(r=vs(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Xt(t),s=1<<n,r|=e[n],t&=~s;return r}function em(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-Xt(l),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=em(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function ci(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Tf(){var e=xl;return xl<<=1,!(xl&4194240)&&(xl=64),e}function fa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function el(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xt(t),e[t]=n}function nm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Xt(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function rc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Xt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ce=0;function Df(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Rf,sc,Pf,zf,If,ui=!1,gl=[],Dn=null,Rn=null,Pn=null,Is=new Map,Ls=new Map,Cn=[],rm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function du(e,t){switch(e){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":Is.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ls.delete(t.pointerId)}}function cs(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=nl(t),t!==null&&sc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function sm(e,t,n,r,s){switch(t){case"focusin":return Dn=cs(Dn,e,t,n,r,s),!0;case"dragenter":return Rn=cs(Rn,e,t,n,r,s),!0;case"mouseover":return Pn=cs(Pn,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return Is.set(l,cs(Is.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,Ls.set(l,cs(Ls.get(l)||null,e,t,n,r,s)),!0}return!1}function Lf(e){var t=Qn(e.target);if(t!==null){var n=ir(t);if(n!==null){if(t=n.tag,t===13){if(t=Sf(n),t!==null){e.blockedOn=t,If(e.priority,function(){Pf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=di(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);li=r,n.target.dispatchEvent(r),li=null}else return t=nl(n),t!==null&&sc(t),e.blockedOn=n,!1;t.shift()}return!0}function fu(e,t,n){Fl(e)&&n.delete(t)}function lm(){ui=!1,Dn!==null&&Fl(Dn)&&(Dn=null),Rn!==null&&Fl(Rn)&&(Rn=null),Pn!==null&&Fl(Pn)&&(Pn=null),Is.forEach(fu),Ls.forEach(fu)}function us(e,t){e.blockedOn===t&&(e.blockedOn=null,ui||(ui=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,lm)))}function Os(e){function t(s){return us(s,e)}if(0<gl.length){us(gl[0],e);for(var n=1;n<gl.length;n++){var r=gl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Dn!==null&&us(Dn,e),Rn!==null&&us(Rn,e),Pn!==null&&us(Pn,e),Is.forEach(t),Ls.forEach(t),n=0;n<Cn.length;n++)r=Cn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Cn.length&&(n=Cn[0],n.blockedOn===null);)Lf(n),n.blockedOn===null&&Cn.shift()}var zr=vn.ReactCurrentBatchConfig,no=!0;function om(e,t,n,r){var s=Ce,l=zr.transition;zr.transition=null;try{Ce=1,lc(e,t,n,r)}finally{Ce=s,zr.transition=l}}function am(e,t,n,r){var s=Ce,l=zr.transition;zr.transition=null;try{Ce=4,lc(e,t,n,r)}finally{Ce=s,zr.transition=l}}function lc(e,t,n,r){if(no){var s=di(e,t,n,r);if(s===null)ka(e,t,r,ro,n),du(e,r);else if(sm(s,e,t,n,r))r.stopPropagation();else if(du(e,r),t&4&&-1<rm.indexOf(e)){for(;s!==null;){var l=nl(s);if(l!==null&&Rf(l),l=di(e,t,n,r),l===null&&ka(e,t,r,ro,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else ka(e,t,r,null,n)}}var ro=null;function di(e,t,n,r){if(ro=null,e=tc(r),e=Qn(e),e!==null)if(t=ir(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Sf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ro=e,null}function Of(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kx()){case nc:return 1;case Mf:return 4;case eo:case Qx:return 16;case _f:return 536870912;default:return 16}default:return 16}}var Mn=null,oc=null,Bl=null;function $f(){if(Bl)return Bl;var e,t=oc,n=t.length,r,s="value"in Mn?Mn.value:Mn.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[l-r];r++);return Bl=s.slice(e,1<r?1-r:void 0)}function Ul(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vl(){return!0}function pu(){return!1}function Pt(e){function t(n,r,s,l,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?vl:pu,this.isPropagationStopped=pu,this}return $e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vl)},persist:function(){},isPersistent:vl}),t}var Qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ac=Pt(Qr),tl=$e({},Qr,{view:0,detail:0}),im=Pt(tl),pa,ha,ds,Do=$e({},tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ic,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ds&&(ds&&e.type==="mousemove"?(pa=e.screenX-ds.screenX,ha=e.screenY-ds.screenY):ha=pa=0,ds=e),pa)},movementY:function(e){return"movementY"in e?e.movementY:ha}}),hu=Pt(Do),cm=$e({},Do,{dataTransfer:0}),um=Pt(cm),dm=$e({},tl,{relatedTarget:0}),xa=Pt(dm),fm=$e({},Qr,{animationName:0,elapsedTime:0,pseudoElement:0}),pm=Pt(fm),hm=$e({},Qr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xm=Pt(hm),mm=$e({},Qr,{data:0}),xu=Pt(mm),gm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ym={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ym[e])?!!t[e]:!1}function ic(){return wm}var bm=$e({},tl,{key:function(e){if(e.key){var t=gm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ul(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ic,charCode:function(e){return e.type==="keypress"?Ul(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ul(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),km=Pt(bm),jm=$e({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mu=Pt(jm),Sm=$e({},tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ic}),Nm=Pt(Sm),Cm=$e({},Qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Em=Pt(Cm),Mm=$e({},Do,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_m=Pt(Mm),Tm=[9,13,27,32],cc=pn&&"CompositionEvent"in window,ks=null;pn&&"documentMode"in document&&(ks=document.documentMode);var Dm=pn&&"TextEvent"in window&&!ks,Af=pn&&(!cc||ks&&8<ks&&11>=ks),gu=" ",vu=!1;function Ff(e,t){switch(e){case"keyup":return Tm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yr=!1;function Rm(e,t){switch(e){case"compositionend":return Bf(t);case"keypress":return t.which!==32?null:(vu=!0,gu);case"textInput":return e=t.data,e===gu&&vu?null:e;default:return null}}function Pm(e,t){if(yr)return e==="compositionend"||!cc&&Ff(e,t)?(e=$f(),Bl=oc=Mn=null,yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Af&&t.locale!=="ko"?null:t.data;default:return null}}var zm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zm[e.type]:t==="textarea"}function Uf(e,t,n,r){yf(r),t=so(t,"onChange"),0<t.length&&(n=new ac("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var js=null,$s=null;function Im(e){Zf(e,0)}function Ro(e){var t=kr(e);if(ff(t))return e}function Lm(e,t){if(e==="change")return t}var Hf=!1;if(pn){var ma;if(pn){var ga="oninput"in document;if(!ga){var wu=document.createElement("div");wu.setAttribute("oninput","return;"),ga=typeof wu.oninput=="function"}ma=ga}else ma=!1;Hf=ma&&(!document.documentMode||9<document.documentMode)}function bu(){js&&(js.detachEvent("onpropertychange",Wf),$s=js=null)}function Wf(e){if(e.propertyName==="value"&&Ro($s)){var t=[];Uf(t,$s,e,tc(e)),jf(Im,t)}}function Om(e,t,n){e==="focusin"?(bu(),js=t,$s=n,js.attachEvent("onpropertychange",Wf)):e==="focusout"&&bu()}function $m(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ro($s)}function Am(e,t){if(e==="click")return Ro(t)}function Fm(e,t){if(e==="input"||e==="change")return Ro(t)}function Bm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kt=typeof Object.is=="function"?Object.is:Bm;function As(e,t){if(Kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ya.call(t,s)||!Kt(e[s],t[s]))return!1}return!0}function ku(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ju(e,t){var n=ku(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ku(n)}}function Vf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Vf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Xf(){for(var e=window,t=ql();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=ql(e.document)}return t}function uc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Um(e){var t=Xf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Vf(n.ownerDocument.documentElement,n)){if(r!==null&&uc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=ju(n,l);var a=ju(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Hm=pn&&"documentMode"in document&&11>=document.documentMode,wr=null,fi=null,Ss=null,pi=!1;function Su(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pi||wr==null||wr!==ql(r)||(r=wr,"selectionStart"in r&&uc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ss&&As(Ss,r)||(Ss=r,r=so(fi,"onSelect"),0<r.length&&(t=new ac("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=wr)))}function yl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:yl("Animation","AnimationEnd"),animationiteration:yl("Animation","AnimationIteration"),animationstart:yl("Animation","AnimationStart"),transitionend:yl("Transition","TransitionEnd")},va={},Yf={};pn&&(Yf=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);function Po(e){if(va[e])return va[e];if(!br[e])return e;var t=br[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Yf)return va[e]=t[n];return e}var Kf=Po("animationend"),Qf=Po("animationiteration"),Gf=Po("animationstart"),qf=Po("transitionend"),Jf=new Map,Nu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bn(e,t){Jf.set(e,t),ar(t,[e])}for(var ya=0;ya<Nu.length;ya++){var wa=Nu[ya],Wm=wa.toLowerCase(),Vm=wa[0].toUpperCase()+wa.slice(1);Bn(Wm,"on"+Vm)}Bn(Kf,"onAnimationEnd");Bn(Qf,"onAnimationIteration");Bn(Gf,"onAnimationStart");Bn("dblclick","onDoubleClick");Bn("focusin","onFocus");Bn("focusout","onBlur");Bn(qf,"onTransitionEnd");$r("onMouseEnter",["mouseout","mouseover"]);$r("onMouseLeave",["mouseout","mouseover"]);$r("onPointerEnter",["pointerout","pointerover"]);$r("onPointerLeave",["pointerout","pointerover"]);ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ar("onBeforeInput",["compositionend","keypress","textInput","paste"]);ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xm=new Set("cancel close invalid load scroll toggle".split(" ").concat(ys));function Cu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Wx(r,t,void 0,e),e.currentTarget=null}function Zf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,u=i.currentTarget;if(i=i.listener,c!==l&&s.isPropagationStopped())break e;Cu(s,i,u),l=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,u=i.currentTarget,i=i.listener,c!==l&&s.isPropagationStopped())break e;Cu(s,i,u),l=c}}}if(Zl)throw e=ii,Zl=!1,ii=null,e}function De(e,t){var n=t[vi];n===void 0&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(ep(t,e,2,!1),n.add(r))}function ba(e,t,n){var r=0;t&&(r|=4),ep(n,e,r,t)}var wl="_reactListening"+Math.random().toString(36).slice(2);function Fs(e){if(!e[wl]){e[wl]=!0,of.forEach(function(n){n!=="selectionchange"&&(Xm.has(n)||ba(n,!1,e),ba(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wl]||(t[wl]=!0,ba("selectionchange",!1,t))}}function ep(e,t,n,r){switch(Of(t)){case 1:var s=om;break;case 4:s=am;break;default:s=lc}n=s.bind(null,t,n,e),s=void 0,!ai||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ka(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=Qn(i),a===null)return;if(c=a.tag,c===5||c===6){r=l=a;continue e}i=i.parentNode}}r=r.return}jf(function(){var u=l,p=tc(n),f=[];e:{var h=Jf.get(e);if(h!==void 0){var x=ac,w=e;switch(e){case"keypress":if(Ul(n)===0)break e;case"keydown":case"keyup":x=km;break;case"focusin":w="focus",x=xa;break;case"focusout":w="blur",x=xa;break;case"beforeblur":case"afterblur":x=xa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=hu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=um;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Nm;break;case Kf:case Qf:case Gf:x=pm;break;case qf:x=Em;break;case"scroll":x=im;break;case"wheel":x=_m;break;case"copy":case"cut":case"paste":x=xm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=mu}var v=(t&4)!==0,b=!v&&e==="scroll",g=v?h!==null?h+"Capture":null:h;v=[];for(var m=u,y;m!==null;){y=m;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,g!==null&&(S=zs(m,g),S!=null&&v.push(Bs(m,S,y)))),b)break;m=m.return}0<v.length&&(h=new x(h,w,null,n,p),f.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==li&&(w=n.relatedTarget||n.fromElement)&&(Qn(w)||w[hn]))break e;if((x||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,x?(w=n.relatedTarget||n.toElement,x=u,w=w?Qn(w):null,w!==null&&(b=ir(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=u),x!==w)){if(v=hu,S="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(v=mu,S="onPointerLeave",g="onPointerEnter",m="pointer"),b=x==null?h:kr(x),y=w==null?h:kr(w),h=new v(S,m+"leave",x,n,p),h.target=b,h.relatedTarget=y,S=null,Qn(p)===u&&(v=new v(g,m+"enter",w,n,p),v.target=y,v.relatedTarget=b,S=v),b=S,x&&w)t:{for(v=x,g=w,m=0,y=v;y;y=hr(y))m++;for(y=0,S=g;S;S=hr(S))y++;for(;0<m-y;)v=hr(v),m--;for(;0<y-m;)g=hr(g),y--;for(;m--;){if(v===g||g!==null&&v===g.alternate)break t;v=hr(v),g=hr(g)}v=null}else v=null;x!==null&&Eu(f,h,x,v,!1),w!==null&&b!==null&&Eu(f,b,w,v,!0)}}e:{if(h=u?kr(u):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var j=Lm;else if(yu(h))if(Hf)j=Fm;else{j=$m;var N=Om}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=Am);if(j&&(j=j(e,u))){Uf(f,j,n,p);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&ei(h,"number",h.value)}switch(N=u?kr(u):window,e){case"focusin":(yu(N)||N.contentEditable==="true")&&(wr=N,fi=u,Ss=null);break;case"focusout":Ss=fi=wr=null;break;case"mousedown":pi=!0;break;case"contextmenu":case"mouseup":case"dragend":pi=!1,Su(f,n,p);break;case"selectionchange":if(Hm)break;case"keydown":case"keyup":Su(f,n,p)}var k;if(cc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else yr?Ff(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Af&&n.locale!=="ko"&&(yr||E!=="onCompositionStart"?E==="onCompositionEnd"&&yr&&(k=$f()):(Mn=p,oc="value"in Mn?Mn.value:Mn.textContent,yr=!0)),N=so(u,E),0<N.length&&(E=new xu(E,e,null,n,p),f.push({event:E,listeners:N}),k?E.data=k:(k=Bf(n),k!==null&&(E.data=k)))),(k=Dm?Rm(e,n):Pm(e,n))&&(u=so(u,"onBeforeInput"),0<u.length&&(p=new xu("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:u}),p.data=k))}Zf(f,t)})}function Bs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function so(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=zs(e,n),l!=null&&r.unshift(Bs(e,l,s)),l=zs(e,t),l!=null&&r.push(Bs(e,l,s))),e=e.return}return r}function hr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Eu(e,t,n,r,s){for(var l=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,u=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&u!==null&&(i=u,s?(c=zs(n,l),c!=null&&a.unshift(Bs(n,c,i))):s||(c=zs(n,l),c!=null&&a.push(Bs(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Ym=/\r\n?/g,Km=/\u0000|\uFFFD/g;function Mu(e){return(typeof e=="string"?e:""+e).replace(Ym,`
`).replace(Km,"")}function bl(e,t,n){if(t=Mu(t),Mu(e)!==t&&n)throw Error(D(425))}function lo(){}var hi=null,xi=null;function mi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gi=typeof setTimeout=="function"?setTimeout:void 0,Qm=typeof clearTimeout=="function"?clearTimeout:void 0,_u=typeof Promise=="function"?Promise:void 0,Gm=typeof queueMicrotask=="function"?queueMicrotask:typeof _u!="undefined"?function(e){return _u.resolve(null).then(e).catch(qm)}:gi;function qm(e){setTimeout(function(){throw e})}function ja(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Os(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Os(t)}function zn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Tu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),nn="__reactFiber$"+Gr,Us="__reactProps$"+Gr,hn="__reactContainer$"+Gr,vi="__reactEvents$"+Gr,Jm="__reactListeners$"+Gr,Zm="__reactHandles$"+Gr;function Qn(e){var t=e[nn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hn]||n[nn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Tu(e);e!==null;){if(n=e[nn])return n;e=Tu(e)}return t}e=n,n=e.parentNode}return null}function nl(e){return e=e[nn]||e[hn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function zo(e){return e[Us]||null}var yi=[],jr=-1;function Un(e){return{current:e}}function Pe(e){0>jr||(e.current=yi[jr],yi[jr]=null,jr--)}function Te(e,t){jr++,yi[jr]=e.current,e.current=t}var Fn={},dt=Un(Fn),kt=Un(!1),tr=Fn;function Ar(e,t){var n=e.type.contextTypes;if(!n)return Fn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function jt(e){return e=e.childContextTypes,e!=null}function oo(){Pe(kt),Pe(dt)}function Du(e,t,n){if(dt.current!==Fn)throw Error(D(168));Te(dt,t),Te(kt,n)}function tp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(D(108,Ox(e)||"Unknown",s));return $e({},n,r)}function ao(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fn,tr=dt.current,Te(dt,e),Te(kt,kt.current),!0}function Ru(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=tp(e,t,tr),r.__reactInternalMemoizedMergedChildContext=e,Pe(kt),Pe(dt),Te(dt,e)):Pe(kt),Te(kt,n)}var cn=null,Io=!1,Sa=!1;function np(e){cn===null?cn=[e]:cn.push(e)}function eg(e){Io=!0,np(e)}function Hn(){if(!Sa&&cn!==null){Sa=!0;var e=0,t=Ce;try{var n=cn;for(Ce=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}cn=null,Io=!1}catch(s){throw cn!==null&&(cn=cn.slice(e+1)),Ef(nc,Hn),s}finally{Ce=t,Sa=!1}}return null}var Sr=[],Nr=0,io=null,co=0,Lt=[],Ot=0,nr=null,un=1,dn="";function Yn(e,t){Sr[Nr++]=co,Sr[Nr++]=io,io=e,co=t}function rp(e,t,n){Lt[Ot++]=un,Lt[Ot++]=dn,Lt[Ot++]=nr,nr=e;var r=un;e=dn;var s=32-Xt(r)-1;r&=~(1<<s),n+=1;var l=32-Xt(t)+s;if(30<l){var a=s-s%5;l=(r&(1<<a)-1).toString(32),r>>=a,s-=a,un=1<<32-Xt(t)+s|n<<s|r,dn=l+e}else un=1<<l|n<<s|r,dn=e}function dc(e){e.return!==null&&(Yn(e,1),rp(e,1,0))}function fc(e){for(;e===io;)io=Sr[--Nr],Sr[Nr]=null,co=Sr[--Nr],Sr[Nr]=null;for(;e===nr;)nr=Lt[--Ot],Lt[Ot]=null,dn=Lt[--Ot],Lt[Ot]=null,un=Lt[--Ot],Lt[Ot]=null}var Tt=null,_t=null,ze=!1,Vt=null;function sp(e,t){var n=$t(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Pu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tt=e,_t=zn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tt=e,_t=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=nr!==null?{id:un,overflow:dn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=$t(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Tt=e,_t=null,!0):!1;default:return!1}}function wi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bi(e){if(ze){var t=_t;if(t){var n=t;if(!Pu(e,t)){if(wi(e))throw Error(D(418));t=zn(n.nextSibling);var r=Tt;t&&Pu(e,t)?sp(r,n):(e.flags=e.flags&-4097|2,ze=!1,Tt=e)}}else{if(wi(e))throw Error(D(418));e.flags=e.flags&-4097|2,ze=!1,Tt=e}}}function zu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tt=e}function kl(e){if(e!==Tt)return!1;if(!ze)return zu(e),ze=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!mi(e.type,e.memoizedProps)),t&&(t=_t)){if(wi(e))throw lp(),Error(D(418));for(;t;)sp(e,t),t=zn(t.nextSibling)}if(zu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){_t=zn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}_t=null}}else _t=Tt?zn(e.stateNode.nextSibling):null;return!0}function lp(){for(var e=_t;e;)e=zn(e.nextSibling)}function Fr(){_t=Tt=null,ze=!1}function pc(e){Vt===null?Vt=[e]:Vt.push(e)}var tg=vn.ReactCurrentBatchConfig;function fs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var i=s.refs;a===null?delete i[l]:i[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function jl(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Iu(e){var t=e._init;return t(e._payload)}function op(e){function t(g,m){if(e){var y=g.deletions;y===null?(g.deletions=[m],g.flags|=16):y.push(m)}}function n(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=$n(g,m),g.index=0,g.sibling=null,g}function l(g,m,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<m?(g.flags|=2,m):y):(g.flags|=2,m)):(g.flags|=1048576,m)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,m,y,S){return m===null||m.tag!==6?(m=Da(y,g.mode,S),m.return=g,m):(m=s(m,y),m.return=g,m)}function c(g,m,y,S){var j=y.type;return j===vr?p(g,m,y.props.children,S,y.key):m!==null&&(m.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===jn&&Iu(j)===m.type)?(S=s(m,y.props),S.ref=fs(g,m,y),S.return=g,S):(S=Ql(y.type,y.key,y.props,null,g.mode,S),S.ref=fs(g,m,y),S.return=g,S)}function u(g,m,y,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=Ra(y,g.mode,S),m.return=g,m):(m=s(m,y.children||[]),m.return=g,m)}function p(g,m,y,S,j){return m===null||m.tag!==7?(m=Zn(y,g.mode,S,j),m.return=g,m):(m=s(m,y),m.return=g,m)}function f(g,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Da(""+m,g.mode,y),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case fl:return y=Ql(m.type,m.key,m.props,null,g.mode,y),y.ref=fs(g,null,m),y.return=g,y;case gr:return m=Ra(m,g.mode,y),m.return=g,m;case jn:var S=m._init;return f(g,S(m._payload),y)}if(gs(m)||as(m))return m=Zn(m,g.mode,y,null),m.return=g,m;jl(g,m)}return null}function h(g,m,y,S){var j=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return j!==null?null:i(g,m,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case fl:return y.key===j?c(g,m,y,S):null;case gr:return y.key===j?u(g,m,y,S):null;case jn:return j=y._init,h(g,m,j(y._payload),S)}if(gs(y)||as(y))return j!==null?null:p(g,m,y,S,null);jl(g,y)}return null}function x(g,m,y,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(y)||null,i(m,g,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case fl:return g=g.get(S.key===null?y:S.key)||null,c(m,g,S,j);case gr:return g=g.get(S.key===null?y:S.key)||null,u(m,g,S,j);case jn:var N=S._init;return x(g,m,y,N(S._payload),j)}if(gs(S)||as(S))return g=g.get(y)||null,p(m,g,S,j,null);jl(m,S)}return null}function w(g,m,y,S){for(var j=null,N=null,k=m,E=m=0,T=null;k!==null&&E<y.length;E++){k.index>E?(T=k,k=null):T=k.sibling;var R=h(g,k,y[E],S);if(R===null){k===null&&(k=T);break}e&&k&&R.alternate===null&&t(g,k),m=l(R,m,E),N===null?j=R:N.sibling=R,N=R,k=T}if(E===y.length)return n(g,k),ze&&Yn(g,E),j;if(k===null){for(;E<y.length;E++)k=f(g,y[E],S),k!==null&&(m=l(k,m,E),N===null?j=k:N.sibling=k,N=k);return ze&&Yn(g,E),j}for(k=r(g,k);E<y.length;E++)T=x(k,g,E,y[E],S),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?E:T.key),m=l(T,m,E),N===null?j=T:N.sibling=T,N=T);return e&&k.forEach(function($){return t(g,$)}),ze&&Yn(g,E),j}function v(g,m,y,S){var j=as(y);if(typeof j!="function")throw Error(D(150));if(y=j.call(y),y==null)throw Error(D(151));for(var N=j=null,k=m,E=m=0,T=null,R=y.next();k!==null&&!R.done;E++,R=y.next()){k.index>E?(T=k,k=null):T=k.sibling;var $=h(g,k,R.value,S);if($===null){k===null&&(k=T);break}e&&k&&$.alternate===null&&t(g,k),m=l($,m,E),N===null?j=$:N.sibling=$,N=$,k=T}if(R.done)return n(g,k),ze&&Yn(g,E),j;if(k===null){for(;!R.done;E++,R=y.next())R=f(g,R.value,S),R!==null&&(m=l(R,m,E),N===null?j=R:N.sibling=R,N=R);return ze&&Yn(g,E),j}for(k=r(g,k);!R.done;E++,R=y.next())R=x(k,g,E,R.value,S),R!==null&&(e&&R.alternate!==null&&k.delete(R.key===null?E:R.key),m=l(R,m,E),N===null?j=R:N.sibling=R,N=R);return e&&k.forEach(function(oe){return t(g,oe)}),ze&&Yn(g,E),j}function b(g,m,y,S){if(typeof y=="object"&&y!==null&&y.type===vr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case fl:e:{for(var j=y.key,N=m;N!==null;){if(N.key===j){if(j=y.type,j===vr){if(N.tag===7){n(g,N.sibling),m=s(N,y.props.children),m.return=g,g=m;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===jn&&Iu(j)===N.type){n(g,N.sibling),m=s(N,y.props),m.ref=fs(g,N,y),m.return=g,g=m;break e}n(g,N);break}else t(g,N);N=N.sibling}y.type===vr?(m=Zn(y.props.children,g.mode,S,y.key),m.return=g,g=m):(S=Ql(y.type,y.key,y.props,null,g.mode,S),S.ref=fs(g,m,y),S.return=g,g=S)}return a(g);case gr:e:{for(N=y.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(g,m.sibling),m=s(m,y.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else t(g,m);m=m.sibling}m=Ra(y,g.mode,S),m.return=g,g=m}return a(g);case jn:return N=y._init,b(g,m,N(y._payload),S)}if(gs(y))return w(g,m,y,S);if(as(y))return v(g,m,y,S);jl(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,y),m.return=g,g=m):(n(g,m),m=Da(y,g.mode,S),m.return=g,g=m),a(g)):n(g,m)}return b}var Br=op(!0),ap=op(!1),uo=Un(null),fo=null,Cr=null,hc=null;function xc(){hc=Cr=fo=null}function mc(e){var t=uo.current;Pe(uo),e._currentValue=t}function ki(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ir(e,t){fo=e,hc=Cr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bt=!0),e.firstContext=null)}function Ft(e){var t=e._currentValue;if(hc!==e)if(e={context:e,memoizedValue:t,next:null},Cr===null){if(fo===null)throw Error(D(308));Cr=e,fo.dependencies={lanes:0,firstContext:e}}else Cr=Cr.next=e;return t}var Gn=null;function gc(e){Gn===null?Gn=[e]:Gn.push(e)}function ip(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,gc(t)):(n.next=s.next,s.next=n),t.interleaved=n,xn(e,r)}function xn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Sn=!1;function vc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function In(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,xn(e,n)}return s=r.interleaved,s===null?(t.next=t,gc(r)):(t.next=s.next,s.next=t),r.interleaved=t,xn(e,n)}function Hl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,rc(e,n)}}function Lu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function po(e,t,n,r){var s=e.updateQueue;Sn=!1;var l=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,u=c.next;c.next=null,a===null?l=u:a.next=u,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,i=p.lastBaseUpdate,i!==a&&(i===null?p.firstBaseUpdate=u:i.next=u,p.lastBaseUpdate=c))}if(l!==null){var f=s.baseState;a=0,p=u=c=null,i=l;do{var h=i.lane,x=i.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var w=e,v=i;switch(h=t,x=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){f=w.call(x,f,h);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,h=typeof w=="function"?w.call(x,f,h):w,h==null)break e;f=$e({},f,h);break e;case 2:Sn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[i]:h.push(i))}else x={eventTime:x,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},p===null?(u=p=x,c=f):p=p.next=x,a|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;h=i,i=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);sr|=a,e.lanes=a,e.memoizedState=f}}function Ou(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var rl={},sn=Un(rl),Hs=Un(rl),Ws=Un(rl);function qn(e){if(e===rl)throw Error(D(174));return e}function yc(e,t){switch(Te(Ws,t),Te(Hs,e),Te(sn,rl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ni(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ni(t,e)}Pe(sn),Te(sn,t)}function Ur(){Pe(sn),Pe(Hs),Pe(Ws)}function up(e){qn(Ws.current);var t=qn(sn.current),n=ni(t,e.type);t!==n&&(Te(Hs,e),Te(sn,n))}function wc(e){Hs.current===e&&(Pe(sn),Pe(Hs))}var Le=Un(0);function ho(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Na=[];function bc(){for(var e=0;e<Na.length;e++)Na[e]._workInProgressVersionPrimary=null;Na.length=0}var Wl=vn.ReactCurrentDispatcher,Ca=vn.ReactCurrentBatchConfig,rr=0,Oe=null,Ye=null,Ze=null,xo=!1,Ns=!1,Vs=0,ng=0;function at(){throw Error(D(321))}function kc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kt(e[n],t[n]))return!1;return!0}function jc(e,t,n,r,s,l){if(rr=l,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wl.current=e===null||e.memoizedState===null?og:ag,e=n(r,s),Ns){l=0;do{if(Ns=!1,Vs=0,25<=l)throw Error(D(301));l+=1,Ze=Ye=null,t.updateQueue=null,Wl.current=ig,e=n(r,s)}while(Ns)}if(Wl.current=mo,t=Ye!==null&&Ye.next!==null,rr=0,Ze=Ye=Oe=null,xo=!1,t)throw Error(D(300));return e}function Sc(){var e=Vs!==0;return Vs=0,e}function tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Oe.memoizedState=Ze=e:Ze=Ze.next=e,Ze}function Bt(){if(Ye===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=Ze===null?Oe.memoizedState:Ze.next;if(t!==null)Ze=t,Ye=e;else{if(e===null)throw Error(D(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},Ze===null?Oe.memoizedState=Ze=e:Ze=Ze.next=e}return Ze}function Xs(e,t){return typeof t=="function"?t(e):t}function Ea(e){var t=Bt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=Ye,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var a=s.next;s.next=l.next,l.next=a}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var i=a=null,c=null,u=l;do{var p=u.lane;if((rr&p)===p)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(i=c=f,a=r):c=c.next=f,Oe.lanes|=p,sr|=p}u=u.next}while(u!==null&&u!==l);c===null?a=r:c.next=i,Kt(r,t.memoizedState)||(bt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,Oe.lanes|=l,sr|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ma(e){var t=Bt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do l=e(l,a.action),a=a.next;while(a!==s);Kt(l,t.memoizedState)||(bt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function dp(){}function fp(e,t){var n=Oe,r=Bt(),s=t(),l=!Kt(r.memoizedState,s);if(l&&(r.memoizedState=s,bt=!0),r=r.queue,Nc(xp.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,Ys(9,hp.bind(null,n,r,s,t),void 0,null),tt===null)throw Error(D(349));rr&30||pp(n,t,s)}return s}function pp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function hp(e,t,n,r){t.value=n,t.getSnapshot=r,mp(t)&&gp(e)}function xp(e,t,n){return n(function(){mp(t)&&gp(e)})}function mp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kt(e,n)}catch(r){return!0}}function gp(e){var t=xn(e,1);t!==null&&Yt(t,e,1,-1)}function $u(e){var t=tn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:e},t.queue=e,e=e.dispatch=lg.bind(null,Oe,e),[t.memoizedState,e]}function Ys(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function vp(){return Bt().memoizedState}function Vl(e,t,n,r){var s=tn();Oe.flags|=e,s.memoizedState=Ys(1|t,n,void 0,r===void 0?null:r)}function Lo(e,t,n,r){var s=Bt();r=r===void 0?null:r;var l=void 0;if(Ye!==null){var a=Ye.memoizedState;if(l=a.destroy,r!==null&&kc(r,a.deps)){s.memoizedState=Ys(t,n,l,r);return}}Oe.flags|=e,s.memoizedState=Ys(1|t,n,l,r)}function Au(e,t){return Vl(8390656,8,e,t)}function Nc(e,t){return Lo(2048,8,e,t)}function yp(e,t){return Lo(4,2,e,t)}function wp(e,t){return Lo(4,4,e,t)}function bp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kp(e,t,n){return n=n!=null?n.concat([e]):null,Lo(4,4,bp.bind(null,t,e),n)}function Cc(){}function jp(e,t){var n=Bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&kc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Sp(e,t){var n=Bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&kc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Np(e,t,n){return rr&21?(Kt(n,t)||(n=Tf(),Oe.lanes|=n,sr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bt=!0),e.memoizedState=n)}function rg(e,t){var n=Ce;Ce=n!==0&&4>n?n:4,e(!0);var r=Ca.transition;Ca.transition={};try{e(!1),t()}finally{Ce=n,Ca.transition=r}}function Cp(){return Bt().memoizedState}function sg(e,t,n){var r=On(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ep(e))Mp(t,n);else if(n=ip(e,t,n,r),n!==null){var s=ht();Yt(n,e,r,s),_p(n,t,r)}}function lg(e,t,n){var r=On(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ep(e))Mp(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,i=l(a,n);if(s.hasEagerState=!0,s.eagerState=i,Kt(i,a)){var c=t.interleaved;c===null?(s.next=s,gc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch(u){}finally{}n=ip(e,t,s,r),n!==null&&(s=ht(),Yt(n,e,r,s),_p(n,t,r))}}function Ep(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function Mp(e,t){Ns=xo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function _p(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,rc(e,n)}}var mo={readContext:Ft,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},og={readContext:Ft,useCallback:function(e,t){return tn().memoizedState=[e,t===void 0?null:t],e},useContext:Ft,useEffect:Au,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Vl(4194308,4,bp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vl(4,2,e,t)},useMemo:function(e,t){var n=tn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=tn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=sg.bind(null,Oe,e),[r.memoizedState,e]},useRef:function(e){var t=tn();return e={current:e},t.memoizedState=e},useState:$u,useDebugValue:Cc,useDeferredValue:function(e){return tn().memoizedState=e},useTransition:function(){var e=$u(!1),t=e[0];return e=rg.bind(null,e[1]),tn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Oe,s=tn();if(ze){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),tt===null)throw Error(D(349));rr&30||pp(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,Au(xp.bind(null,r,l,e),[e]),r.flags|=2048,Ys(9,hp.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=tn(),t=tt.identifierPrefix;if(ze){var n=dn,r=un;n=(r&~(1<<32-Xt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Vs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ng++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ag={readContext:Ft,useCallback:jp,useContext:Ft,useEffect:Nc,useImperativeHandle:kp,useInsertionEffect:yp,useLayoutEffect:wp,useMemo:Sp,useReducer:Ea,useRef:vp,useState:function(){return Ea(Xs)},useDebugValue:Cc,useDeferredValue:function(e){var t=Bt();return Np(t,Ye.memoizedState,e)},useTransition:function(){var e=Ea(Xs)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:dp,useSyncExternalStore:fp,useId:Cp,unstable_isNewReconciler:!1},ig={readContext:Ft,useCallback:jp,useContext:Ft,useEffect:Nc,useImperativeHandle:kp,useInsertionEffect:yp,useLayoutEffect:wp,useMemo:Sp,useReducer:Ma,useRef:vp,useState:function(){return Ma(Xs)},useDebugValue:Cc,useDeferredValue:function(e){var t=Bt();return Ye===null?t.memoizedState=e:Np(t,Ye.memoizedState,e)},useTransition:function(){var e=Ma(Xs)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:dp,useSyncExternalStore:fp,useId:Cp,unstable_isNewReconciler:!1};function Ht(e,t){if(e&&e.defaultProps){t=$e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ji(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:$e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Oo={isMounted:function(e){return(e=e._reactInternals)?ir(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ht(),s=On(e),l=fn(r,s);l.payload=t,n!=null&&(l.callback=n),t=In(e,l,s),t!==null&&(Yt(t,e,s,r),Hl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ht(),s=On(e),l=fn(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=In(e,l,s),t!==null&&(Yt(t,e,s,r),Hl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ht(),r=On(e),s=fn(n,r);s.tag=2,t!=null&&(s.callback=t),t=In(e,s,r),t!==null&&(Yt(t,e,r,n),Hl(t,e,r))}};function Fu(e,t,n,r,s,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!As(n,r)||!As(s,l):!0}function Tp(e,t,n){var r=!1,s=Fn,l=t.contextType;return typeof l=="object"&&l!==null?l=Ft(l):(s=jt(t)?tr:dt.current,r=t.contextTypes,l=(r=r!=null)?Ar(e,s):Fn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Oo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function Bu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Oo.enqueueReplaceState(t,t.state,null)}function Si(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},vc(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Ft(l):(l=jt(t)?tr:dt.current,s.context=Ar(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ji(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Oo.enqueueReplaceState(s,s.state,null),po(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Hr(e,t){try{var n="",r=t;do n+=Lx(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function _a(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function Ni(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var cg=typeof WeakMap=="function"?WeakMap:Map;function Dp(e,t,n){n=fn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){vo||(vo=!0,Ii=r),Ni(e,t)},n}function Rp(e,t,n){n=fn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ni(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Ni(e,t),typeof r!="function"&&(Ln===null?Ln=new Set([this]):Ln.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Uu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new cg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=jg.bind(null,e,t,n),t.then(e,e))}function Hu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Wu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=fn(-1,1),t.tag=2,In(n,t,1))),n.lanes|=1),e)}var ug=vn.ReactCurrentOwner,bt=!1;function ft(e,t,n,r){t.child=e===null?ap(t,null,n,r):Br(t,e.child,n,r)}function Vu(e,t,n,r,s){n=n.render;var l=t.ref;return Ir(t,s),r=jc(e,t,n,r,l,s),n=Sc(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mn(e,t,s)):(ze&&n&&dc(t),t.flags|=1,ft(e,t,r,s),t.child)}function Xu(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!zc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Pp(e,t,l,r,s)):(e=Ql(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:As,n(a,r)&&e.ref===t.ref)return mn(e,t,s)}return t.flags|=1,e=$n(l,r),e.ref=t.ref,e.return=t,t.child=e}function Pp(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(As(l,r)&&e.ref===t.ref)if(bt=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(bt=!0);else return t.lanes=e.lanes,mn(e,t,s)}return Ci(e,t,n,r,s)}function zp(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Mr,Mt),Mt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(Mr,Mt),Mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Te(Mr,Mt),Mt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,Te(Mr,Mt),Mt|=r;return ft(e,t,s,n),t.child}function Ip(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ci(e,t,n,r,s){var l=jt(n)?tr:dt.current;return l=Ar(t,l),Ir(t,s),n=jc(e,t,n,r,l,s),r=Sc(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mn(e,t,s)):(ze&&r&&dc(t),t.flags|=1,ft(e,t,n,s),t.child)}function Yu(e,t,n,r,s){if(jt(n)){var l=!0;ao(t)}else l=!1;if(Ir(t,s),t.stateNode===null)Xl(e,t),Tp(t,n,r),Si(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ft(u):(u=jt(n)?tr:dt.current,u=Ar(t,u));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==u)&&Bu(t,a,r,u),Sn=!1;var h=t.memoizedState;a.state=h,po(t,r,a,s),c=t.memoizedState,i!==r||h!==c||kt.current||Sn?(typeof p=="function"&&(ji(t,n,p,r),c=t.memoizedState),(i=Sn||Fu(t,n,i,r,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,cp(e,t),i=t.memoizedProps,u=t.type===t.elementType?i:Ht(t.type,i),a.props=u,f=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ft(c):(c=jt(n)?tr:dt.current,c=Ar(t,c));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||h!==c)&&Bu(t,a,r,c),Sn=!1,h=t.memoizedState,a.state=h,po(t,r,a,s);var w=t.memoizedState;i!==f||h!==w||kt.current||Sn?(typeof x=="function"&&(ji(t,n,x,r),w=t.memoizedState),(u=Sn||Fu(t,n,u,r,h,w,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ei(e,t,n,r,l,s)}function Ei(e,t,n,r,s,l){Ip(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Ru(t,n,!1),mn(e,t,l);r=t.stateNode,ug.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Br(t,e.child,null,l),t.child=Br(t,null,i,l)):ft(e,t,i,l),t.memoizedState=r.state,s&&Ru(t,n,!0),t.child}function Lp(e){var t=e.stateNode;t.pendingContext?Du(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Du(e,t.context,!1),yc(e,t.containerInfo)}function Ku(e,t,n,r,s){return Fr(),pc(s),t.flags|=256,ft(e,t,n,r),t.child}var Mi={dehydrated:null,treeContext:null,retryLane:0};function _i(e){return{baseLanes:e,cachePool:null,transitions:null}}function Op(e,t,n){var r=t.pendingProps,s=Le.current,l=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Te(Le,s&1),e===null)return bi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=Fo(a,r,0,null),e=Zn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=_i(n),t.memoizedState=Mi,e):Ec(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return dg(e,t,a,r,i,s,n);if(l){l=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=$n(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?l=$n(i,l):(l=Zn(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?_i(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=Mi,r}return l=e.child,e=l.sibling,r=$n(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ec(e,t){return t=Fo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Sl(e,t,n,r){return r!==null&&pc(r),Br(t,e.child,null,n),e=Ec(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function dg(e,t,n,r,s,l,a){if(n)return t.flags&256?(t.flags&=-257,r=_a(Error(D(422))),Sl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=Fo({mode:"visible",children:r.children},s,0,null),l=Zn(l,s,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Br(t,e.child,null,a),t.child.memoizedState=_i(a),t.memoizedState=Mi,l);if(!(t.mode&1))return Sl(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(D(419)),r=_a(l,r,void 0),Sl(e,t,a,r)}if(i=(a&e.childLanes)!==0,bt||i){if(r=tt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,xn(e,s),Yt(r,e,s,-1))}return Pc(),r=_a(Error(D(421))),Sl(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Sg.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,_t=zn(s.nextSibling),Tt=t,ze=!0,Vt=null,e!==null&&(Lt[Ot++]=un,Lt[Ot++]=dn,Lt[Ot++]=nr,un=e.id,dn=e.overflow,nr=t),t=Ec(t,r.children),t.flags|=4096,t)}function Qu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ki(e.return,t,n)}function Ta(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function $p(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(ft(e,t,r.children,n),r=Le.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qu(e,n,t);else if(e.tag===19)Qu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Te(Le,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ho(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ta(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ho(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ta(t,!0,n,null,l);break;case"together":Ta(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),sr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=$n(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=$n(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function fg(e,t,n){switch(t.tag){case 3:Lp(t),Fr();break;case 5:up(t);break;case 1:jt(t.type)&&ao(t);break;case 4:yc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Te(uo,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Te(Le,Le.current&1),t.flags|=128,null):n&t.child.childLanes?Op(e,t,n):(Te(Le,Le.current&1),e=mn(e,t,n),e!==null?e.sibling:null);Te(Le,Le.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return $p(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Le,Le.current),r)break;return null;case 22:case 23:return t.lanes=0,zp(e,t,n)}return mn(e,t,n)}var Ap,Ti,Fp,Bp;Ap=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ti=function(){};Fp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,qn(sn.current);var l=null;switch(n){case"input":s=Ja(e,s),r=Ja(e,r),l=[];break;case"select":s=$e({},s,{value:void 0}),r=$e({},r,{value:void 0}),l=[];break;case"textarea":s=ti(e,s),r=ti(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=lo)}ri(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var i=s[u];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Rs.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in r){var c=r[u];if(i=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==i&&(c!=null||i!=null))if(u==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(l||(l=[]),l.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Rs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&De("scroll",e),l||i===c||(l=[])):(l=l||[]).push(u,c))}n&&(l=l||[]).push("style",n);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};Bp=function(e,t,n,r){n!==r&&(t.flags|=4)};function ps(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function it(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pg(e,t,n){var r=t.pendingProps;switch(fc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(t),null;case 1:return jt(t.type)&&oo(),it(t),null;case 3:return r=t.stateNode,Ur(),Pe(kt),Pe(dt),bc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(kl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vt!==null&&($i(Vt),Vt=null))),Ti(e,t),it(t),null;case 5:wc(t);var s=qn(Ws.current);if(n=t.type,e!==null&&t.stateNode!=null)Fp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return it(t),null}if(e=qn(sn.current),kl(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[nn]=t,r[Us]=l,e=(t.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(s=0;s<ys.length;s++)De(ys[s],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":su(r,l),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},De("invalid",r);break;case"textarea":ou(r,l),De("invalid",r)}ri(n,l),s=null;for(var a in l)if(l.hasOwnProperty(a)){var i=l[a];a==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&bl(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&bl(r.textContent,i,e),s=["children",""+i]):Rs.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&De("scroll",r)}switch(n){case"input":pl(r),lu(r,l,!0);break;case"textarea":pl(r),au(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=lo)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[nn]=t,e[Us]=r,Ap(e,t,!1,!1),t.stateNode=e;e:{switch(a=si(n,r),n){case"dialog":De("cancel",e),De("close",e),s=r;break;case"iframe":case"object":case"embed":De("load",e),s=r;break;case"video":case"audio":for(s=0;s<ys.length;s++)De(ys[s],e);s=r;break;case"source":De("error",e),s=r;break;case"img":case"image":case"link":De("error",e),De("load",e),s=r;break;case"details":De("toggle",e),s=r;break;case"input":su(e,r),s=Ja(e,r),De("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=$e({},r,{value:void 0}),De("invalid",e);break;case"textarea":ou(e,r),s=ti(e,r),De("invalid",e);break;default:s=r}ri(n,s),i=s;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?vf(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&mf(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ps(e,c):typeof c=="number"&&Ps(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Rs.hasOwnProperty(l)?c!=null&&l==="onScroll"&&De("scroll",e):c!=null&&qi(e,l,c,a))}switch(n){case"input":pl(e),lu(e,r,!1);break;case"textarea":pl(e),au(e);break;case"option":r.value!=null&&e.setAttribute("value",""+An(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Dr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Dr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=lo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return it(t),null;case 6:if(e&&t.stateNode!=null)Bp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=qn(Ws.current),qn(sn.current),kl(t)){if(r=t.stateNode,n=t.memoizedProps,r[nn]=t,(l=r.nodeValue!==n)&&(e=Tt,e!==null))switch(e.tag){case 3:bl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bl(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nn]=t,t.stateNode=r}return it(t),null;case 13:if(Pe(Le),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ze&&_t!==null&&t.mode&1&&!(t.flags&128))lp(),Fr(),t.flags|=98560,l=!1;else if(l=kl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(D(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(D(317));l[nn]=t}else Fr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;it(t),l=!1}else Vt!==null&&($i(Vt),Vt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?Qe===0&&(Qe=3):Pc())),t.updateQueue!==null&&(t.flags|=4),it(t),null);case 4:return Ur(),Ti(e,t),e===null&&Fs(t.stateNode.containerInfo),it(t),null;case 10:return mc(t.type._context),it(t),null;case 17:return jt(t.type)&&oo(),it(t),null;case 19:if(Pe(Le),l=t.memoizedState,l===null)return it(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)ps(l,!1);else{if(Qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=ho(e),a!==null){for(t.flags|=128,ps(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Te(Le,Le.current&1|2),t.child}e=e.sibling}l.tail!==null&&Be()>Wr&&(t.flags|=128,r=!0,ps(l,!1),t.lanes=4194304)}else{if(!r)if(e=ho(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ps(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!ze)return it(t),null}else 2*Be()-l.renderingStartTime>Wr&&n!==1073741824&&(t.flags|=128,r=!0,ps(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Be(),t.sibling=null,n=Le.current,Te(Le,r?n&1|2:n&1),t):(it(t),null);case 22:case 23:return Rc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Mt&1073741824&&(it(t),t.subtreeFlags&6&&(t.flags|=8192)):it(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function hg(e,t){switch(fc(t),t.tag){case 1:return jt(t.type)&&oo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ur(),Pe(kt),Pe(dt),bc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wc(t),null;case 13:if(Pe(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Fr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(Le),null;case 4:return Ur(),null;case 10:return mc(t.type._context),null;case 22:case 23:return Rc(),null;case 24:return null;default:return null}}var Nl=!1,ut=!1,xg=typeof WeakSet=="function"?WeakSet:Set,X=null;function Er(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(e,t,r)}else n.current=null}function Di(e,t,n){try{n()}catch(r){Ae(e,t,r)}}var Gu=!1;function mg(e,t){if(hi=no,e=Xf(),uc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch(S){n=null;break e}var a=0,i=-1,c=-1,u=0,p=0,f=e,h=null;t:for(;;){for(var x;f!==n||s!==0&&f.nodeType!==3||(i=a+s),f!==l||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)h=f,f=x;for(;;){if(f===e)break t;if(h===n&&++u===s&&(i=a),h===l&&++p===r&&(c=a),(x=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=x}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(xi={focusedElem:e,selectionRange:n},no=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,b=w.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:Ht(t.type,v),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(S){Ae(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return w=Gu,Gu=!1,w}function Cs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&Di(t,n,l)}s=s.next}while(s!==r)}}function $o(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ri(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Up(e){var t=e.alternate;t!==null&&(e.alternate=null,Up(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[nn],delete t[Us],delete t[vi],delete t[Jm],delete t[Zm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hp(e){return e.tag===5||e.tag===3||e.tag===4}function qu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=lo));else if(r!==4&&(e=e.child,e!==null))for(Pi(e,t,n),e=e.sibling;e!==null;)Pi(e,t,n),e=e.sibling}function zi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(zi(e,t,n),e=e.sibling;e!==null;)zi(e,t,n),e=e.sibling}var rt=null,Wt=!1;function kn(e,t,n){for(n=n.child;n!==null;)Wp(e,t,n),n=n.sibling}function Wp(e,t,n){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(To,n)}catch(i){}switch(n.tag){case 5:ut||Er(n,t);case 6:var r=rt,s=Wt;rt=null,kn(e,t,n),rt=r,Wt=s,rt!==null&&(Wt?(e=rt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(Wt?(e=rt,n=n.stateNode,e.nodeType===8?ja(e.parentNode,n):e.nodeType===1&&ja(e,n),Os(e)):ja(rt,n.stateNode));break;case 4:r=rt,s=Wt,rt=n.stateNode.containerInfo,Wt=!0,kn(e,t,n),rt=r,Wt=s;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&Di(n,t,a),s=s.next}while(s!==r)}kn(e,t,n);break;case 1:if(!ut&&(Er(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Ae(n,t,i)}kn(e,t,n);break;case 21:kn(e,t,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,kn(e,t,n),ut=r):kn(e,t,n);break;default:kn(e,t,n)}}function Ju(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new xg),t.forEach(function(r){var s=Ng.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ut(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:rt=i.stateNode,Wt=!1;break e;case 3:rt=i.stateNode.containerInfo,Wt=!0;break e;case 4:rt=i.stateNode.containerInfo,Wt=!0;break e}i=i.return}if(rt===null)throw Error(D(160));Wp(l,a,s),rt=null,Wt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ae(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Vp(t,e),t=t.sibling}function Vp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ut(t,e),en(e),r&4){try{Cs(3,e,e.return),$o(3,e)}catch(v){Ae(e,e.return,v)}try{Cs(5,e,e.return)}catch(v){Ae(e,e.return,v)}}break;case 1:Ut(t,e),en(e),r&512&&n!==null&&Er(n,n.return);break;case 5:if(Ut(t,e),en(e),r&512&&n!==null&&Er(n,n.return),e.flags&32){var s=e.stateNode;try{Ps(s,"")}catch(v){Ae(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&pf(s,l),si(i,a);var u=si(i,l);for(a=0;a<c.length;a+=2){var p=c[a],f=c[a+1];p==="style"?vf(s,f):p==="dangerouslySetInnerHTML"?mf(s,f):p==="children"?Ps(s,f):qi(s,p,f,u)}switch(i){case"input":Za(s,l);break;case"textarea":hf(s,l);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?Dr(s,!!l.multiple,x,!1):h!==!!l.multiple&&(l.defaultValue!=null?Dr(s,!!l.multiple,l.defaultValue,!0):Dr(s,!!l.multiple,l.multiple?[]:"",!1))}s[Us]=l}catch(v){Ae(e,e.return,v)}}break;case 6:if(Ut(t,e),en(e),r&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(v){Ae(e,e.return,v)}}break;case 3:if(Ut(t,e),en(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Os(t.containerInfo)}catch(v){Ae(e,e.return,v)}break;case 4:Ut(t,e),en(e);break;case 13:Ut(t,e),en(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(Tc=Be())),r&4&&Ju(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(ut=(u=ut)||p,Ut(t,e),ut=u):Ut(t,e),en(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!p&&e.mode&1)for(X=e,p=e.child;p!==null;){for(f=X=p;X!==null;){switch(h=X,x=h.child,h.tag){case 0:case 11:case 14:case 15:Cs(4,h,h.return);break;case 1:Er(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(v){Ae(r,n,v)}}break;case 5:Er(h,h.return);break;case 22:if(h.memoizedState!==null){ed(f);continue}}x!==null?(x.return=h,X=x):ed(f)}p=p.sibling}e:for(p=null,f=e;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,u?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=gf("display",a))}catch(v){Ae(e,e.return,v)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Ae(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ut(t,e),en(e),r&4&&Ju(e);break;case 21:break;default:Ut(t,e),en(e)}}function en(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Hp(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ps(s,""),r.flags&=-33);var l=qu(e);zi(e,l,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=qu(e);Pi(e,i,a);break;default:throw Error(D(161))}}catch(c){Ae(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gg(e,t,n){X=e,Xp(e)}function Xp(e,t,n){for(var r=(e.mode&1)!==0;X!==null;){var s=X,l=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Nl;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||ut;i=Nl;var u=ut;if(Nl=a,(ut=c)&&!u)for(X=s;X!==null;)a=X,c=a.child,a.tag===22&&a.memoizedState!==null?td(s):c!==null?(c.return=a,X=c):td(s);for(;l!==null;)X=l,Xp(l),l=l.sibling;X=s,Nl=i,ut=u}Zu(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,X=l):Zu(e)}}function Zu(e){for(;X!==null;){var t=X;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ut||$o(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ut)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ht(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Ou(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ou(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&Os(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}ut||t.flags&512&&Ri(t)}catch(h){Ae(t,t.return,h)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function ed(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function td(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$o(4,t)}catch(c){Ae(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ae(t,s,c)}}var l=t.return;try{Ri(t)}catch(c){Ae(t,l,c)}break;case 5:var a=t.return;try{Ri(t)}catch(c){Ae(t,a,c)}}}catch(c){Ae(t,t.return,c)}if(t===e){X=null;break}var i=t.sibling;if(i!==null){i.return=t.return,X=i;break}X=t.return}}var vg=Math.ceil,go=vn.ReactCurrentDispatcher,Mc=vn.ReactCurrentOwner,At=vn.ReactCurrentBatchConfig,we=0,tt=null,Ue=null,st=0,Mt=0,Mr=Un(0),Qe=0,Ks=null,sr=0,Ao=0,_c=0,Es=null,wt=null,Tc=0,Wr=1/0,an=null,vo=!1,Ii=null,Ln=null,Cl=!1,_n=null,yo=0,Ms=0,Li=null,Yl=-1,Kl=0;function ht(){return we&6?Be():Yl!==-1?Yl:Yl=Be()}function On(e){return e.mode&1?we&2&&st!==0?st&-st:tg.transition!==null?(Kl===0&&(Kl=Tf()),Kl):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:Of(e.type)),e):1}function Yt(e,t,n,r){if(50<Ms)throw Ms=0,Li=null,Error(D(185));el(e,n,r),(!(we&2)||e!==tt)&&(e===tt&&(!(we&2)&&(Ao|=n),Qe===4&&En(e,st)),St(e,r),n===1&&we===0&&!(t.mode&1)&&(Wr=Be()+500,Io&&Hn()))}function St(e,t){var n=e.callbackNode;tm(e,t);var r=to(e,e===tt?st:0);if(r===0)n!==null&&uu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&uu(n),t===1)e.tag===0?eg(nd.bind(null,e)):np(nd.bind(null,e)),Gm(function(){!(we&6)&&Hn()}),n=null;else{switch(Df(r)){case 1:n=nc;break;case 4:n=Mf;break;case 16:n=eo;break;case 536870912:n=_f;break;default:n=eo}n=eh(n,Yp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Yp(e,t){if(Yl=-1,Kl=0,we&6)throw Error(D(327));var n=e.callbackNode;if(Lr()&&e.callbackNode!==n)return null;var r=to(e,e===tt?st:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=wo(e,r);else{t=r;var s=we;we|=2;var l=Qp();(tt!==e||st!==t)&&(an=null,Wr=Be()+500,Jn(e,t));do try{bg();break}catch(i){Kp(e,i)}while(!0);xc(),go.current=l,we=s,Ue!==null?t=0:(tt=null,st=0,t=Qe)}if(t!==0){if(t===2&&(s=ci(e),s!==0&&(r=s,t=Oi(e,s))),t===1)throw n=Ks,Jn(e,0),En(e,r),St(e,Be()),n;if(t===6)En(e,r);else{if(s=e.current.alternate,!(r&30)&&!yg(s)&&(t=wo(e,r),t===2&&(l=ci(e),l!==0&&(r=l,t=Oi(e,l))),t===1))throw n=Ks,Jn(e,0),En(e,r),St(e,Be()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:Kn(e,wt,an);break;case 3:if(En(e,r),(r&130023424)===r&&(t=Tc+500-Be(),10<t)){if(to(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){ht(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=gi(Kn.bind(null,e,wt,an),t);break}Kn(e,wt,an);break;case 4:if(En(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Xt(r);l=1<<a,a=t[a],a>s&&(s=a),r&=~l}if(r=s,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vg(r/1960))-r,10<r){e.timeoutHandle=gi(Kn.bind(null,e,wt,an),r);break}Kn(e,wt,an);break;case 5:Kn(e,wt,an);break;default:throw Error(D(329))}}}return St(e,Be()),e.callbackNode===n?Yp.bind(null,e):null}function Oi(e,t){var n=Es;return e.current.memoizedState.isDehydrated&&(Jn(e,t).flags|=256),e=wo(e,t),e!==2&&(t=wt,wt=n,t!==null&&$i(t)),e}function $i(e){wt===null?wt=e:wt.push.apply(wt,e)}function yg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!Kt(l(),s))return!1}catch(a){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function En(e,t){for(t&=~_c,t&=~Ao,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Xt(t),r=1<<n;e[n]=-1,t&=~r}}function nd(e){if(we&6)throw Error(D(327));Lr();var t=to(e,0);if(!(t&1))return St(e,Be()),null;var n=wo(e,t);if(e.tag!==0&&n===2){var r=ci(e);r!==0&&(t=r,n=Oi(e,r))}if(n===1)throw n=Ks,Jn(e,0),En(e,t),St(e,Be()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Kn(e,wt,an),St(e,Be()),null}function Dc(e,t){var n=we;we|=1;try{return e(t)}finally{we=n,we===0&&(Wr=Be()+500,Io&&Hn())}}function lr(e){_n!==null&&_n.tag===0&&!(we&6)&&Lr();var t=we;we|=1;var n=At.transition,r=Ce;try{if(At.transition=null,Ce=1,e)return e()}finally{Ce=r,At.transition=n,we=t,!(we&6)&&Hn()}}function Rc(){Mt=Mr.current,Pe(Mr)}function Jn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Qm(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(fc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oo();break;case 3:Ur(),Pe(kt),Pe(dt),bc();break;case 5:wc(r);break;case 4:Ur();break;case 13:Pe(Le);break;case 19:Pe(Le);break;case 10:mc(r.type._context);break;case 22:case 23:Rc()}n=n.return}if(tt=e,Ue=e=$n(e.current,null),st=Mt=t,Qe=0,Ks=null,_c=Ao=sr=0,wt=Es=null,Gn!==null){for(t=0;t<Gn.length;t++)if(n=Gn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=s,r.next=a}n.pending=r}Gn=null}return e}function Kp(e,t){do{var n=Ue;try{if(xc(),Wl.current=mo,xo){for(var r=Oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xo=!1}if(rr=0,Ze=Ye=Oe=null,Ns=!1,Vs=0,Mc.current=null,n===null||n.return===null){Qe=1,Ks=t,Ue=null;break}e:{var l=e,a=n.return,i=n,c=t;if(t=st,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,p=i,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=Hu(a);if(x!==null){x.flags&=-257,Wu(x,a,i,l,t),x.mode&1&&Uu(l,u,t),t=x,c=u;var w=t.updateQueue;if(w===null){var v=new Set;v.add(c),t.updateQueue=v}else w.add(c);break e}else{if(!(t&1)){Uu(l,u,t),Pc();break e}c=Error(D(426))}}else if(ze&&i.mode&1){var b=Hu(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Wu(b,a,i,l,t),pc(Hr(c,i));break e}}l=c=Hr(c,i),Qe!==4&&(Qe=2),Es===null?Es=[l]:Es.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var g=Dp(l,c,t);Lu(l,g);break e;case 1:i=c;var m=l.type,y=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ln===null||!Ln.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t;var S=Rp(l,i,t);Lu(l,S);break e}}l=l.return}while(l!==null)}qp(n)}catch(j){t=j,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function Qp(){var e=go.current;return go.current=mo,e===null?mo:e}function Pc(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),tt===null||!(sr&268435455)&&!(Ao&268435455)||En(tt,st)}function wo(e,t){var n=we;we|=2;var r=Qp();(tt!==e||st!==t)&&(an=null,Jn(e,t));do try{wg();break}catch(s){Kp(e,s)}while(!0);if(xc(),we=n,go.current=r,Ue!==null)throw Error(D(261));return tt=null,st=0,Qe}function wg(){for(;Ue!==null;)Gp(Ue)}function bg(){for(;Ue!==null&&!Xx();)Gp(Ue)}function Gp(e){var t=Zp(e.alternate,e,Mt);e.memoizedProps=e.pendingProps,t===null?qp(e):Ue=t,Mc.current=null}function qp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=hg(n,t),n!==null){n.flags&=32767,Ue=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qe=6,Ue=null;return}}else if(n=pg(n,t,Mt),n!==null){Ue=n;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);Qe===0&&(Qe=5)}function Kn(e,t,n){var r=Ce,s=At.transition;try{At.transition=null,Ce=1,kg(e,t,n,r)}finally{At.transition=s,Ce=r}return null}function kg(e,t,n,r){do Lr();while(_n!==null);if(we&6)throw Error(D(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(nm(e,l),e===tt&&(Ue=tt=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cl||(Cl=!0,eh(eo,function(){return Lr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=At.transition,At.transition=null;var a=Ce;Ce=1;var i=we;we|=4,Mc.current=null,mg(e,n),Vp(n,e),Um(xi),no=!!hi,xi=hi=null,e.current=n,gg(n),Yx(),we=i,Ce=a,At.transition=l}else e.current=n;if(Cl&&(Cl=!1,_n=e,yo=s),l=e.pendingLanes,l===0&&(Ln=null),Gx(n.stateNode),St(e,Be()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(vo)throw vo=!1,e=Ii,Ii=null,e;return yo&1&&e.tag!==0&&Lr(),l=e.pendingLanes,l&1?e===Li?Ms++:(Ms=0,Li=e):Ms=0,Hn(),null}function Lr(){if(_n!==null){var e=Df(yo),t=At.transition,n=Ce;try{if(At.transition=null,Ce=16>e?16:e,_n===null)var r=!1;else{if(e=_n,_n=null,yo=0,we&6)throw Error(D(331));var s=we;for(we|=4,X=e.current;X!==null;){var l=X,a=l.child;if(X.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var u=i[c];for(X=u;X!==null;){var p=X;switch(p.tag){case 0:case 11:case 15:Cs(8,p,l)}var f=p.child;if(f!==null)f.return=p,X=f;else for(;X!==null;){p=X;var h=p.sibling,x=p.return;if(Up(p),p===u){X=null;break}if(h!==null){h.return=x,X=h;break}X=x}}}var w=l.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}X=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,X=a;else e:for(;X!==null;){if(l=X,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Cs(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,X=g;break e}X=l.return}}var m=e.current;for(X=m;X!==null;){a=X;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,X=y;else e:for(a=m;X!==null;){if(i=X,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:$o(9,i)}}catch(j){Ae(i,i.return,j)}if(i===a){X=null;break e}var S=i.sibling;if(S!==null){S.return=i.return,X=S;break e}X=i.return}}if(we=s,Hn(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(To,e)}catch(j){}r=!0}return r}finally{Ce=n,At.transition=t}}return!1}function rd(e,t,n){t=Hr(n,t),t=Dp(e,t,1),e=In(e,t,1),t=ht(),e!==null&&(el(e,1,t),St(e,t))}function Ae(e,t,n){if(e.tag===3)rd(e,e,n);else for(;t!==null;){if(t.tag===3){rd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ln===null||!Ln.has(r))){e=Hr(n,e),e=Rp(t,e,1),t=In(t,e,1),e=ht(),t!==null&&(el(t,1,e),St(t,e));break}}t=t.return}}function jg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ht(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(st&n)===n&&(Qe===4||Qe===3&&(st&130023424)===st&&500>Be()-Tc?Jn(e,0):_c|=n),St(e,t)}function Jp(e,t){t===0&&(e.mode&1?(t=ml,ml<<=1,!(ml&130023424)&&(ml=4194304)):t=1);var n=ht();e=xn(e,t),e!==null&&(el(e,t,n),St(e,n))}function Sg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Jp(e,n)}function Ng(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),Jp(e,n)}var Zp;Zp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||kt.current)bt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return bt=!1,fg(e,t,n);bt=!!(e.flags&131072)}else bt=!1,ze&&t.flags&1048576&&rp(t,co,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Xl(e,t),e=t.pendingProps;var s=Ar(t,dt.current);Ir(t,n),s=jc(null,t,r,e,s,n);var l=Sc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jt(r)?(l=!0,ao(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vc(t),s.updater=Oo,t.stateNode=s,s._reactInternals=t,Si(t,r,e,n),t=Ei(null,t,r,!0,l,n)):(t.tag=0,ze&&l&&dc(t),ft(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Xl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Eg(r),e=Ht(r,e),s){case 0:t=Ci(null,t,r,e,n);break e;case 1:t=Yu(null,t,r,e,n);break e;case 11:t=Vu(null,t,r,e,n);break e;case 14:t=Xu(null,t,r,Ht(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ht(r,s),Ci(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ht(r,s),Yu(e,t,r,s,n);case 3:e:{if(Lp(t),e===null)throw Error(D(387));r=t.pendingProps,l=t.memoizedState,s=l.element,cp(e,t),po(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Hr(Error(D(423)),t),t=Ku(e,t,r,n,s);break e}else if(r!==s){s=Hr(Error(D(424)),t),t=Ku(e,t,r,n,s);break e}else for(_t=zn(t.stateNode.containerInfo.firstChild),Tt=t,ze=!0,Vt=null,n=ap(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fr(),r===s){t=mn(e,t,n);break e}ft(e,t,r,n)}t=t.child}return t;case 5:return up(t),e===null&&bi(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,a=s.children,mi(r,s)?a=null:l!==null&&mi(r,l)&&(t.flags|=32),Ip(e,t),ft(e,t,a,n),t.child;case 6:return e===null&&bi(t),null;case 13:return Op(e,t,n);case 4:return yc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Br(t,null,r,n):ft(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ht(r,s),Vu(e,t,r,s,n);case 7:return ft(e,t,t.pendingProps,n),t.child;case 8:return ft(e,t,t.pendingProps.children,n),t.child;case 12:return ft(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,a=s.value,Te(uo,r._currentValue),r._currentValue=a,l!==null)if(Kt(l.value,a)){if(l.children===s.children&&!kt.current){t=mn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){a=l.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=fn(-1,n&-n),c.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?c.next=c:(c.next=p.next,p.next=c),u.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),ki(l.return,n,t),i.lanes|=n;break}c=c.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(D(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),ki(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}ft(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ir(t,n),s=Ft(s),r=r(s),t.flags|=1,ft(e,t,r,n),t.child;case 14:return r=t.type,s=Ht(r,t.pendingProps),s=Ht(r.type,s),Xu(e,t,r,s,n);case 15:return Pp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ht(r,s),Xl(e,t),t.tag=1,jt(r)?(e=!0,ao(t)):e=!1,Ir(t,n),Tp(t,r,s),Si(t,r,s,n),Ei(null,t,r,!0,e,n);case 19:return $p(e,t,n);case 22:return zp(e,t,n)}throw Error(D(156,t.tag))};function eh(e,t){return Ef(e,t)}function Cg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(e,t,n,r){return new Cg(e,t,n,r)}function zc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Eg(e){if(typeof e=="function")return zc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zi)return 11;if(e===ec)return 14}return 2}function $n(e,t){var n=e.alternate;return n===null?(n=$t(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ql(e,t,n,r,s,l){var a=2;if(r=e,typeof e=="function")zc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case vr:return Zn(n.children,s,l,t);case Ji:a=8,s|=8;break;case Ka:return e=$t(12,n,t,s|2),e.elementType=Ka,e.lanes=l,e;case Qa:return e=$t(13,n,t,s),e.elementType=Qa,e.lanes=l,e;case Ga:return e=$t(19,n,t,s),e.elementType=Ga,e.lanes=l,e;case uf:return Fo(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case af:a=10;break e;case cf:a=9;break e;case Zi:a=11;break e;case ec:a=14;break e;case jn:a=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=$t(a,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function Zn(e,t,n,r){return e=$t(7,e,r,t),e.lanes=n,e}function Fo(e,t,n,r){return e=$t(22,e,r,t),e.elementType=uf,e.lanes=n,e.stateNode={isHidden:!1},e}function Da(e,t,n){return e=$t(6,e,null,t),e.lanes=n,e}function Ra(e,t,n){return t=$t(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Mg(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fa(0),this.expirationTimes=fa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fa(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ic(e,t,n,r,s,l,a,i,c){return e=new Mg(e,t,n,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=$t(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vc(l),e}function _g(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function th(e){if(!e)return Fn;e=e._reactInternals;e:{if(ir(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(jt(n))return tp(e,n,t)}return t}function nh(e,t,n,r,s,l,a,i,c){return e=Ic(n,r,!0,e,s,l,a,i,c),e.context=th(null),n=e.current,r=ht(),s=On(n),l=fn(r,s),l.callback=t!=null?t:null,In(n,l,s),e.current.lanes=s,el(e,s,r),St(e,r),e}function Bo(e,t,n,r){var s=t.current,l=ht(),a=On(s);return n=th(n),t.context===null?t.context=n:t.pendingContext=n,t=fn(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=In(s,t,a),e!==null&&(Yt(e,s,a,l),Hl(e,s,a)),a}function bo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function sd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Lc(e,t){sd(e,t),(e=e.alternate)&&sd(e,t)}function Tg(){return null}var rh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Oc(e){this._internalRoot=e}Uo.prototype.render=Oc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));Bo(e,t,null,null)};Uo.prototype.unmount=Oc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lr(function(){Bo(null,e,null,null)}),t[hn]=null}};function Uo(e){this._internalRoot=e}Uo.prototype.unstable_scheduleHydration=function(e){if(e){var t=zf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Cn.length&&t!==0&&t<Cn[n].priority;n++);Cn.splice(n,0,e),n===0&&Lf(e)}};function $c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ho(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ld(){}function Dg(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var u=bo(a);l.call(u)}}var a=nh(t,r,e,0,null,!1,!1,"",ld);return e._reactRootContainer=a,e[hn]=a.current,Fs(e.nodeType===8?e.parentNode:e),lr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var u=bo(c);i.call(u)}}var c=Ic(e,0,!1,null,null,!1,!1,"",ld);return e._reactRootContainer=c,e[hn]=c.current,Fs(e.nodeType===8?e.parentNode:e),lr(function(){Bo(t,c,n,r)}),c}function Wo(e,t,n,r,s){var l=n._reactRootContainer;if(l){var a=l;if(typeof s=="function"){var i=s;s=function(){var c=bo(a);i.call(c)}}Bo(t,a,e,s)}else a=Dg(n,t,e,s,r);return bo(a)}Rf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=vs(t.pendingLanes);n!==0&&(rc(t,n|1),St(t,Be()),!(we&6)&&(Wr=Be()+500,Hn()))}break;case 13:lr(function(){var r=xn(e,1);if(r!==null){var s=ht();Yt(r,e,1,s)}}),Lc(e,1)}};sc=function(e){if(e.tag===13){var t=xn(e,134217728);if(t!==null){var n=ht();Yt(t,e,134217728,n)}Lc(e,134217728)}};Pf=function(e){if(e.tag===13){var t=On(e),n=xn(e,t);if(n!==null){var r=ht();Yt(n,e,t,r)}Lc(e,t)}};zf=function(){return Ce};If=function(e,t){var n=Ce;try{return Ce=e,t()}finally{Ce=n}};oi=function(e,t,n){switch(t){case"input":if(Za(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=zo(r);if(!s)throw Error(D(90));ff(r),Za(r,s)}}}break;case"textarea":hf(e,n);break;case"select":t=n.value,t!=null&&Dr(e,!!n.multiple,t,!1)}};bf=Dc;kf=lr;var Rg={usingClientEntryPoint:!1,Events:[nl,kr,zo,yf,wf,Dc]},hs={findFiberByHostInstance:Qn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Pg={bundleType:hs.bundleType,version:hs.version,rendererPackageName:hs.rendererPackageName,rendererConfig:hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Nf(e),e===null?null:e.stateNode},findFiberByHostInstance:hs.findFiberByHostInstance||Tg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var El=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!El.isDisabled&&El.supportsFiber)try{To=El.inject(Pg),rn=El}catch(e){}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rg;Rt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$c(t))throw Error(D(200));return _g(e,t,null,n)};Rt.createRoot=function(e,t){if(!$c(e))throw Error(D(299));var n=!1,r="",s=rh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ic(e,1,!1,null,null,n,!1,r,s),e[hn]=t.current,Fs(e.nodeType===8?e.parentNode:e),new Oc(t)};Rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Nf(t),e=e===null?null:e.stateNode,e};Rt.flushSync=function(e){return lr(e)};Rt.hydrate=function(e,t,n){if(!Ho(t))throw Error(D(200));return Wo(null,e,t,!0,n)};Rt.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",a=rh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=nh(t,null,e,1,n!=null?n:null,s,!1,l,a),e[hn]=t.current,Fs(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Uo(t)};Rt.render=function(e,t,n){if(!Ho(t))throw Error(D(200));return Wo(null,e,t,!1,n)};Rt.unmountComponentAtNode=function(e){if(!Ho(e))throw Error(D(40));return e._reactRootContainer?(lr(function(){Wo(null,null,e,!1,function(){e._reactRootContainer=null,e[hn]=null})}),!0):!1};Rt.unstable_batchedUpdates=Dc;Rt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ho(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return Wo(e,t,n,!1,r)};Rt.version="18.3.1-next-f1338f8080-20240426";function sh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sh)}catch(e){console.error(e)}}sh(),rf.exports=Rt;var _r=rf.exports,od=_r;Xa.createRoot=od.createRoot,Xa.hydrateRoot=od.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qs(){return Qs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qs.apply(this,arguments)}var Tn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Tn||(Tn={}));const ad="popstate";function zg(e){e===void 0&&(e={});function t(s,l){let{pathname:a="/",search:i="",hash:c=""}=cr(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Ai("",{pathname:a,search:i,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(s,l){let a=s.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");i=u===-1?c:c.slice(0,u)}return i+"#"+(typeof l=="string"?l:lh(l))}function r(s,l){Vo(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return Lg(t,n,r,e)}function Ge(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function Vo(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Ig(){return Math.random().toString(36).substr(2,8)}function id(e,t){return{usr:e.state,key:e.key,idx:t}}function Ai(e,t,n,r){return n===void 0&&(n=null),Qs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?cr(t):t,{state:n,key:t&&t.key||r||Ig()})}function lh(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function cr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Lg(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,a=s.history,i=Tn.Pop,c=null,u=p();u==null&&(u=0,a.replaceState(Qs({},a.state,{idx:u}),""));function p(){return(a.state||{idx:null}).idx}function f(){i=Tn.Pop;let b=p(),g=b==null?null:b-u;u=b,c&&c({action:i,location:v.location,delta:g})}function h(b,g){i=Tn.Push;let m=Ai(v.location,b,g);n&&n(m,b),u=p()+1;let y=id(m,u),S=v.createHref(m);try{a.pushState(y,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}l&&c&&c({action:i,location:v.location,delta:1})}function x(b,g){i=Tn.Replace;let m=Ai(v.location,b,g);n&&n(m,b),u=p();let y=id(m,u),S=v.createHref(m);a.replaceState(y,"",S),l&&c&&c({action:i,location:v.location,delta:0})}function w(b){let g=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof b=="string"?b:lh(b);return m=m.replace(/ $/,"%20"),Ge(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let v={get action(){return i},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(ad,f),c=b,()=>{s.removeEventListener(ad,f),c=null}},createHref(b){return t(s,b)},createURL:w,encodeLocation(b){let g=w(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:x,go(b){return a.go(b)}};return v}var cd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(cd||(cd={}));function Og(e,t,n){return n===void 0&&(n="/"),$g(e,t,n)}function $g(e,t,n,r){let s=typeof t=="string"?cr(t):t,l=ih(s.pathname||"/",n);if(l==null)return null;let a=oh(e);Ag(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let u=qg(l);i=Kg(a[c],u)}return i}function oh(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,a,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:a,route:l};c.relativePath.startsWith("/")&&(Ge(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=er([r,c.relativePath]),p=n.concat(c);l.children&&l.children.length>0&&(Ge(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),oh(l.children,t,p,u)),!(l.path==null&&!l.index)&&t.push({path:u,score:Xg(u,l.index),routesMeta:p})};return e.forEach((l,a)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))s(l,a);else for(let c of ah(l.path))s(l,a,c)}),t}function ah(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let a=ah(r.join("/")),i=[];return i.push(...a.map(c=>c===""?l:[l,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Ag(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Yg(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Fg=/^:[\w-]+$/,Bg=3,Ug=2,Hg=1,Wg=10,Vg=-2,ud=e=>e==="*";function Xg(e,t){let n=e.split("/"),r=n.length;return n.some(ud)&&(r+=Vg),t&&(r+=Ug),n.filter(s=>!ud(s)).reduce((s,l)=>s+(Fg.test(l)?Bg:l===""?Hg:Wg),r)}function Yg(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Kg(e,t,n){let{routesMeta:r}=e,s={},l="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],u=i===r.length-1,p=l==="/"?t:t.slice(l.length)||"/",f=Qg({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},p),h=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:er([l,f.pathname]),pathnameBase:sv(er([l,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(l=er([l,f.pathnameBase]))}return a}function Qg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Gg(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],a=l.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((u,p,f)=>{let{paramName:h,isOptional:x}=p;if(h==="*"){let v=i[f]||"";a=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const w=i[f];return x&&!w?u[h]=void 0:u[h]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:a,pattern:e}}function Gg(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Vo(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function qg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Vo(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ih(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const Jg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zg=e=>Jg.test(e);function ev(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?cr(e):e,l;if(n)if(Zg(n))l=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Vo(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?l=dd(n.substring(1),"/"):l=dd(n,t)}else l=t;return{pathname:l,search:lv(r),hash:ov(s)}}function dd(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Pa(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tv(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function nv(e,t){let n=tv(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function rv(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=cr(e):(s=Qs({},e),Ge(!s.pathname||!s.pathname.includes("?"),Pa("?","pathname","search",s)),Ge(!s.pathname||!s.pathname.includes("#"),Pa("#","pathname","hash",s)),Ge(!s.search||!s.search.includes("#"),Pa("#","search","hash",s)));let l=e===""||s.pathname==="",a=l?"/":s.pathname,i;if(a==null)i=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}i=f>=0?t[f]:"/"}let c=ev(s,i),u=a&&a!=="/"&&a.endsWith("/"),p=(l||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||p)&&(c.pathname+="/"),c}const er=e=>e.join("/").replace(/\/\/+/g,"/"),sv=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lv=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ov=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function av(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ch=["post","put","patch","delete"];new Set(ch);const iv=["get",...ch];new Set(iv);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gs(){return Gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gs.apply(this,arguments)}const Ac=d.createContext(null),cv=d.createContext(null),Xo=d.createContext(null),Yo=d.createContext(null),ur=d.createContext({outlet:null,matches:[],isDataRoute:!1}),uh=d.createContext(null);function Ko(){return d.useContext(Yo)!=null}function Fc(){return Ko()||Ge(!1),d.useContext(Yo).location}function dh(e){d.useContext(Xo).static||d.useLayoutEffect(e)}function zt(){let{isDataRoute:e}=d.useContext(ur);return e?kv():uv()}function uv(){Ko()||Ge(!1);let e=d.useContext(Ac),{basename:t,future:n,navigator:r}=d.useContext(Xo),{matches:s}=d.useContext(ur),{pathname:l}=Fc(),a=JSON.stringify(nv(s,n.v7_relativeSplatPath)),i=d.useRef(!1);return dh(()=>{i.current=!0}),d.useCallback(function(u,p){if(p===void 0&&(p={}),!i.current)return;if(typeof u=="number"){r.go(u);return}let f=rv(u,JSON.parse(a),l,p.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:er([t,f.pathname])),(p.replace?r.replace:r.push)(f,p.state,p)},[t,r,a,l,e])}function fh(){let{matches:e}=d.useContext(ur),t=e[e.length-1];return t?t.params:{}}function dv(e,t){return fv(e,t)}function fv(e,t,n,r){Ko()||Ge(!1);let{navigator:s}=d.useContext(Xo),{matches:l}=d.useContext(ur),a=l[l.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Fc(),p;if(t){var f;let b=typeof t=="string"?cr(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Ge(!1),p=b}else p=u;let h=p.pathname||"/",x=h;if(c!=="/"){let b=c.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=Og(e,{pathname:x}),v=gv(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},i,b.params),pathname:er([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:er([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,n,r);return t&&v?d.createElement(Yo.Provider,{value:{location:Gs({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Tn.Pop}},v):v}function pv(){let e=bv(),t=av(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},t),n?d.createElement("pre",{style:s},n):null,null)}const hv=d.createElement(pv,null);class xv extends d.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?d.createElement(ur.Provider,{value:this.props.routeContext},d.createElement(uh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mv(e){let{routeContext:t,match:n,children:r}=e,s=d.useContext(Ac);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),d.createElement(ur.Provider,{value:t},r)}function gv(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let p=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);p>=0||Ge(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let f=a[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=p),f.route.id){let{loaderData:h,errors:x}=n,w=f.route.loader&&h[f.route.id]===void 0&&(!x||x[f.route.id]===void 0);if(f.route.lazy||w){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((p,f,h)=>{let x,w=!1,v=null,b=null;n&&(x=i&&f.route.id?i[f.route.id]:void 0,v=f.route.errorElement||hv,c&&(u<0&&h===0?(jv("route-fallback"),w=!0,b=null):u===h&&(w=!0,b=f.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,h+1)),m=()=>{let y;return x?y=v:w?y=b:f.route.Component?y=d.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=p,d.createElement(mv,{match:f,routeContext:{outlet:p,matches:g,isDataRoute:n!=null},children:y})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?d.createElement(xv,{location:n.location,revalidation:n.revalidation,component:v,error:x,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var ph=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ph||{}),hh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(hh||{});function vv(e){let t=d.useContext(Ac);return t||Ge(!1),t}function yv(e){let t=d.useContext(cv);return t||Ge(!1),t}function wv(e){let t=d.useContext(ur);return t||Ge(!1),t}function xh(e){let t=wv(),n=t.matches[t.matches.length-1];return n.route.id||Ge(!1),n.route.id}function bv(){var e;let t=d.useContext(uh),n=yv(),r=xh();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function kv(){let{router:e}=vv(ph.UseNavigateStable),t=xh(hh.UseNavigateStable),n=d.useRef(!1);return dh(()=>{n.current=!0}),d.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Gs({fromRouteId:t},l)))},[e,t])}const fd={};function jv(e,t,n){fd[e]||(fd[e]=!0)}function Sv(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ct(e){Ge(!1)}function Nv(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Tn.Pop,navigator:l,static:a=!1,future:i}=e;Ko()&&Ge(!1);let c=t.replace(/^\/*/,"/"),u=d.useMemo(()=>({basename:c,navigator:l,static:a,future:Gs({v7_relativeSplatPath:!1},i)}),[c,i,l,a]);typeof r=="string"&&(r=cr(r));let{pathname:p="/",search:f="",hash:h="",state:x=null,key:w="default"}=r,v=d.useMemo(()=>{let b=ih(p,c);return b==null?null:{location:{pathname:b,search:f,hash:h,state:x,key:w},navigationType:s}},[c,p,f,h,x,w,s]);return v==null?null:d.createElement(Xo.Provider,{value:u},d.createElement(Yo.Provider,{children:n,value:v}))}function Cv(e){let{children:t,location:n}=e;return dv(Fi(t),n)}new Promise(()=>{});function Fi(e,t){t===void 0&&(t=[]);let n=[];return d.Children.forEach(e,(r,s)=>{if(!d.isValidElement(r))return;let l=[...t,s];if(r.type===d.Fragment){n.push.apply(n,Fi(r.props.children,l));return}r.type!==ct&&Ge(!1),!r.props.index||!r.props.children||Ge(!1);let a={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Fi(r.props.children,l)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Ev="6";try{window.__reactRouterVersion=Ev}catch(e){}const Mv="startTransition",pd=jx[Mv];function _v(e){let{basename:t,children:n,future:r,window:s}=e,l=d.useRef();l.current==null&&(l.current=zg({window:s,v5Compat:!0}));let a=l.current,[i,c]=d.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},p=d.useCallback(f=>{u&&pd?pd(()=>c(f)):c(f)},[c,u]);return d.useLayoutEffect(()=>a.listen(p),[a,p]),d.useEffect(()=>Sv(r),[r]),d.createElement(Nv,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}var hd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(hd||(hd={}));var xd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(xd||(xd={}));const Bc="";async function md(){var r,s;const e=localStorage.getItem("whisper_token");if(e)return e;const t=(s=(r=window.Telegram)==null?void 0:r.WebApp)==null?void 0:s.initData;if(t){const a=await(await fetch(`${Bc}/api/auth/telegram`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:t})})).json();if(a.success&&a.token)return localStorage.setItem("whisper_token",a.token),a.token}const n=new Error("need_login");throw n.code="NEED_LOGIN",n}async function B(e,t={}){let n=await md();const r=`${Bc}${e}`,s=a=>fetch(r,{...t,cache:"no-store",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`,...t.headers},body:t.body?JSON.stringify(t.body):void 0});let l=await s(n);if(l.status===401&&(localStorage.removeItem("whisper_token"),n=await md(),l=await s(n)),l.status===204)return null;if(!l.ok){const a=await l.json().catch(()=>({}));throw new Error(a.detail||` (${l.status})`)}return l.json()}async function Tv(e){const n=await(await fetch(`${Bc}/api/auth/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})})).json();if(n.success&&n.token)return localStorage.setItem("whisper_token",n.token),!0;throw new Error(n.detail||"")}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mh=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:a,...i},c)=>d.createElement("svg",{ref:c,...Rv,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:mh("lucide",s),...i},[...a.map(([u,p])=>d.createElement(u,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=(e,t)=>{const n=d.forwardRef(({className:r,...s},l)=>d.createElement(Pv,{ref:l,iconNode:t,className:mh(`lucide-${Dv(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=pe("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=pe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=pe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=pe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=pe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=pe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=pe("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=pe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=pe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=pe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=pe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=pe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=pe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=pe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=pe("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=pe("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=pe("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=pe("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=pe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=pe("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=pe("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=pe("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Jv="WhisperMiniDB",Zv=1,Yr="avatars",bh=()=>new Promise((e,t)=>{const n=indexedDB.open(Jv,Zv);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(Yr)||r.createObjectStore(Yr,{keyPath:"key"})}}),Bi=async(e,t)=>{const n=await bh();return new Promise((r,s)=>{const l=n.transaction([Yr],"readwrite");l.objectStore(Yr).put({key:e,base64:t}),l.oncomplete=()=>r(),l.onerror=()=>s(l.error)})},Zr=async e=>{const t=await bh();return new Promise((n,r)=>{const l=t.transaction([Yr],"readonly").objectStore(Yr).get(e);l.onsuccess=()=>{var a;return n(((a=l.result)==null?void 0:a.base64)||null)},l.onerror=()=>r(l.error)})},yt={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function xr({icon:e,label:t,desc:n,disabled:r,onClick:s,badge:l}){const[a,i]=d.useState(!1),c=()=>!r&&i(!0),u=()=>{i(!1),r||s==null||s()};return o.jsxs("button",{className:"flex flex-col items-start rounded-[18px] gap-2 text-left",style:{padding:"16px 14px",background:yt.bg,boxShadow:a?"inset 3px 3px 8px rgba(174,176,182,0.5), inset -3px -3px 8px #ffffff":"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff",opacity:r?.4:1,transform:a?"scale(0.97)":"scale(1)",transition:"transform 0.1s, box-shadow 0.1s",cursor:r?"default":"pointer",WebkitTapHighlightColor:"transparent"},disabled:r,onTouchStart:c,onTouchEnd:u,onMouseDown:c,onMouseUp:u,onMouseLeave:()=>i(!1),children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-[12px]",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))"},children:e}),l&&o.jsx("div",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full",style:{background:"#ef4444",border:"2px solid var(--bg)"}})]}),o.jsxs("div",{className:"pl-1",children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:yt.text},children:t}),o.jsx("div",{className:"mt-0.5 text-[10px] leading-snug",style:{color:yt.textMuted},children:n})]})]})}function yd({children:e}){return o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-[3px]",style:{color:yt.textMuted},children:e})}function ey(){const e=zt(),[t,n]=d.useState(()=>{try{return JSON.parse(localStorage.getItem("whisper_profile")||"null")}catch(u){return null}}),[r,s]=d.useState(null),[l,a]=d.useState(!1);d.useEffect(()=>{B("/api/user/profile").then(u=>{n(u),localStorage.setItem("whisper_profile",JSON.stringify(u))}).catch(()=>{}),Zr("user-avatar").then(u=>{u&&s(u)}).catch(function(){}),B("/api/diary/unread-count").then(u=>{u.count>0&&a(!0)}).catch(()=>{})},[]);const i=(t==null?void 0:t.nickname)||"",c=(t==null?void 0:t.background_url)||"";return o.jsxs("div",{className:"flex flex-col overflow-y-auto",style:{background:yt.bg,height:"100%",paddingBottom:16},children:[o.jsxs("div",{className:"flex flex-col px-5",style:{paddingTop:"max(12px, env(safe-area-inset-top))"},children:[o.jsx("h1",{className:"mb-4 text-center text-[17px] font-medium",style:{color:yt.textMuted,letterSpacing:"4px"},children:"W H I S P E R"}),o.jsxs("button",{className:"mb-5 flex w-full items-center gap-4 rounded-[20px] p-5 text-left",style:{background:yt.bg,boxShadow:"6px 6px 14px rgba(174,176,182,0.5), -6px -6px 14px #ffffff"},onClick:()=>e("/profile"),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:52,height:52,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:yt.bg},children:r?o.jsx("img",{src:r,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:22},children:""})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"text-[17px] font-bold truncate",style:{color:yt.text},children:["@",i]}),o.jsxs("div",{className:"mt-0.5 text-[11px] italic",style:{color:yt.textMuted},children:['"',c,'"']})]}),o.jsx(Vr,{size:16,style:{color:yt.textMuted,flexShrink:0}})]}),o.jsx(yd,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(xr,{icon:o.jsx(Iv,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/world-books")}),o.jsx(xr,{icon:o.jsx(Lv,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/memories")}),o.jsx(xr,{icon:o.jsx(gh,{size:18,color:"white"}),label:"",desc:"Core Blocks",onClick:()=>e("/assistants")}),o.jsx(xr,{icon:o.jsx(Qv,{size:18,color:"white"}),label:"",desc:"API",onClick:()=>e("/settings")})]}),o.jsx(yd,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(xr,{icon:o.jsx(zv,{size:18,color:"white"}),label:"",desc:"",badge:l,onClick:()=>e("/diary")}),o.jsx(xr,{icon:o.jsx(Gv,{size:18,color:"white"}),label:"",desc:"",disabled:!0})]}),o.jsx("button",{className:"flex w-full items-center justify-center rounded-[18px] py-4",style:{background:yt.bg,boxShadow:"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff"},onClick:()=>e("/cot"),children:o.jsx(Uv,{size:32,fill:yt.accent,style:{color:yt.accent,animation:"heartbeat 2s ease-in-out infinite"}})})]}),o.jsx("style",{children:`
        @keyframes heartbeat {
          0%, 100% { transform: scale(1); }
          15% { transform: scale(1.15); }
          30% { transform: scale(1); }
          45% { transform: scale(1.1); }
          60% { transform: scale(1); }
        }
      `})]})}function ty(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const qo=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function es(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Hc(e){return"nodeType"in e}function gt(e){var t,n;return e?es(e)?e:Hc(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Wc(e){const{Document:t}=gt(e);return e instanceof t}function al(e){return es(e)?!1:e instanceof gt(e).HTMLElement}function kh(e){return e instanceof gt(e).SVGElement}function ts(e){return e?es(e)?e.document:Hc(e)?Wc(e)?e:al(e)||kh(e)?e.ownerDocument:document:document:document}const Qt=qo?d.useLayoutEffect:d.useEffect;function Jo(e){const t=d.useRef(e);return Qt(()=>{t.current=e}),d.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function ny(){const e=d.useRef(null),t=d.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=d.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function qs(e,t){t===void 0&&(t=[e]);const n=d.useRef(e);return Qt(()=>{n.current!==e&&(n.current=e)},t),n}function il(e,t){const n=d.useRef();return d.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function ko(e){const t=Jo(e),n=d.useRef(null),r=d.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function jo(e){const t=d.useRef();return d.useEffect(()=>{t.current=e},[e]),t.current}let za={};function cl(e,t){return d.useMemo(()=>{if(t)return t;const n=za[e]==null?0:za[e]+1;return za[e]=n,e+"-"+n},[e,t])}function jh(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const i=Object.entries(a);for(const[c,u]of i){const p=l[c];p!=null&&(l[c]=p+e*u)}return l},{...t})}}const Or=jh(1),So=jh(-1);function ry(e){return"clientX"in e&&"clientY"in e}function Zo(e){if(!e)return!1;const{KeyboardEvent:t}=gt(e.target);return t&&e instanceof t}function sy(e){if(!e)return!1;const{TouchEvent:t}=gt(e.target);return t&&e instanceof t}function No(e){if(sy(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return ry(e)?{x:e.clientX,y:e.clientY}:null}const gn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[gn.Translate.toString(e),gn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),wd="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ly(e){return e.matches(wd)?e:e.querySelector(wd)}const oy={display:"none"};function ay(e){let{id:t,value:n}=e;return Re.createElement("div",{id:t,style:oy},n)}function iy(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Re.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function cy(){const[e,t]=d.useState("");return{announce:d.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Sh=d.createContext(null);function uy(e){const t=d.useContext(Sh);d.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function dy(){const[e]=d.useState(()=>new Set),t=d.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[d.useCallback(r=>{let{type:s,event:l}=r;e.forEach(a=>{var i;return(i=a[s])==null?void 0:i.call(a,l)})},[e]),t]}const fy={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},py={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function hy(e){let{announcements:t=py,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=fy}=e;const{announce:l,announcement:a}=cy(),i=cl("DndLiveRegion"),[c,u]=d.useState(!1);if(d.useEffect(()=>{u(!0)},[]),uy(d.useMemo(()=>({onDragStart(f){let{active:h}=f;l(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:x}=f;t.onDragMove&&l(t.onDragMove({active:h,over:x}))},onDragOver(f){let{active:h,over:x}=f;l(t.onDragOver({active:h,over:x}))},onDragEnd(f){let{active:h,over:x}=f;l(t.onDragEnd({active:h,over:x}))},onDragCancel(f){let{active:h,over:x}=f;l(t.onDragCancel({active:h,over:x}))}}),[l,t])),!c)return null;const p=Re.createElement(Re.Fragment,null,Re.createElement(ay,{id:r,value:s.draggable}),Re.createElement(iy,{id:i,announcement:a}));return n?_r.createPortal(p,n):p}var Ke;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ke||(Ke={}));function Co(){}function Eo(e,t){return d.useMemo(()=>({sensor:e,options:t!=null?t:{}}),[e,t])}function Nh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Gt=Object.freeze({x:0,y:0});function xy(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function my(e,t){const n=No(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function gy(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function vy(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function yy(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function bd(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Ch=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=bd(t,t.left,t.top),l=[];for(const a of r){const{id:i}=a,c=n.get(i);if(c){const u=xy(bd(c),s);l.push({id:i,data:{droppableContainer:a,value:u}})}}return l.sort(gy)};function wy(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height),a=s-r,i=l-n;if(r<s&&n<l){const c=t.width*t.height,u=e.width*e.height,p=a*i,f=p/(c+u-p);return Number(f.toFixed(4))}return 0}const by=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const l of r){const{id:a}=l,i=n.get(a);if(i){const c=wy(i,t);c>0&&s.push({id:a,data:{droppableContainer:l,value:c}})}}return s.sort(vy)};function ky(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Eh(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Gt}function jy(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,i)=>({...a,top:a.top+e*i.y,bottom:a.bottom+e*i.y,left:a.left+e*i.x,right:a.right+e*i.x}),{...n})}}const Sy=jy(1);function Mh(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Ny(e,t,n){const r=Mh(t);if(!r)return e;const{scaleX:s,scaleY:l,x:a,y:i}=r,c=e.left-a-(1-s)*parseFloat(n),u=e.top-i-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),p=s?e.width/s:e.width,f=l?e.height/l:e.height;return{width:p,height:f,top:u,right:c+p,bottom:u+f,left:c}}const Cy={ignoreTransform:!1};function ns(e,t){t===void 0&&(t=Cy);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:p}=gt(e).getComputedStyle(e);u&&(n=Ny(n,u,p))}const{top:r,left:s,width:l,height:a,bottom:i,right:c}=n;return{top:r,left:s,width:l,height:a,bottom:i,right:c}}function kd(e){return ns(e,{ignoreTransform:!0})}function Ey(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function My(e,t){return t===void 0&&(t=gt(e).getComputedStyle(e)),t.position==="fixed"}function _y(e,t){t===void 0&&(t=gt(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=t[s];return typeof l=="string"?n.test(l):!1})}function Vc(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Wc(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!al(s)||kh(s)||n.includes(s))return n;const l=gt(e).getComputedStyle(s);return s!==e&&_y(s,l)&&n.push(s),My(s,l)?n:r(s.parentNode)}return e?r(e):n}function _h(e){const[t]=Vc(e,1);return t!=null?t:null}function Ia(e){return!qo||!e?null:es(e)?e:Hc(e)?Wc(e)||e===ts(e).scrollingElement?window:al(e)?e:null:null}function Th(e){return es(e)?e.scrollX:e.scrollLeft}function Dh(e){return es(e)?e.scrollY:e.scrollTop}function Ui(e){return{x:Th(e),y:Dh(e)}}var et;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(et||(et={}));function Rh(e){return!qo||!e?!1:e===document.scrollingElement}function Ph(e){const t={x:0,y:0},n=Rh(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,l=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:i,maxScroll:r,minScroll:t}}const Ty={x:.2,y:.2};function Dy(e,t,n,r,s){let{top:l,left:a,right:i,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=Ty);const{isTop:u,isBottom:p,isLeft:f,isRight:h}=Ph(e),x={x:0,y:0},w={x:0,y:0},v={height:t.height*s.y,width:t.width*s.x};return!u&&l<=t.top+v.height?(x.y=et.Backward,w.y=r*Math.abs((t.top+v.height-l)/v.height)):!p&&c>=t.bottom-v.height&&(x.y=et.Forward,w.y=r*Math.abs((t.bottom-v.height-c)/v.height)),!h&&i>=t.right-v.width?(x.x=et.Forward,w.x=r*Math.abs((t.right-v.width-i)/v.width)):!f&&a<=t.left+v.width&&(x.x=et.Backward,w.x=r*Math.abs((t.left+v.width-a)/v.width)),{direction:x,speed:w}}function Ry(e){if(e===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function zh(e){return e.reduce((t,n)=>Or(t,Ui(n)),Gt)}function Py(e){return e.reduce((t,n)=>t+Th(n),0)}function zy(e){return e.reduce((t,n)=>t+Dh(n),0)}function Ih(e,t){if(t===void 0&&(t=ns),!e)return;const{top:n,left:r,bottom:s,right:l}=t(e);_h(e)&&(s<=0||l<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Iy=[["x",["left","right"],Py],["y",["top","bottom"],zy]];class Xc{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Vc(n),s=zh(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[l,a,i]of Iy)for(const c of a)Object.defineProperty(this,c,{get:()=>{const u=i(r),p=s[l]-u;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class _s{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Ly(e){const{EventTarget:t}=gt(e);return e instanceof t?e:ts(e)}function La(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var It;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(It||(It={}));function jd(e){e.preventDefault()}function Oy(e){e.stopPropagation()}var je;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(je||(je={}));const Lh={start:[je.Space,je.Enter],cancel:[je.Esc],end:[je.Space,je.Enter,je.Tab]},$y=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case je.Right:return{...n,x:n.x+25};case je.Left:return{...n,x:n.x-25};case je.Down:return{...n,y:n.y+25};case je.Up:return{...n,y:n.y-25}}};class Oh{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new _s(ts(n)),this.windowListeners=new _s(gt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(It.Resize,this.handleCancel),this.windowListeners.add(It.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(It.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Ih(r),n(Gt)}handleKeyDown(t){if(Zo(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:l=Lh,coordinateGetter:a=$y,scrollBehavior:i="smooth"}=s,{code:c}=t;if(l.end.includes(c)){this.handleEnd(t);return}if(l.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=r.current,p=u?{x:u.left,y:u.top}:Gt;this.referenceCoordinates||(this.referenceCoordinates=p);const f=a(t,{active:n,context:r.current,currentCoordinates:p});if(f){const h=So(f,p),x={x:0,y:0},{scrollableAncestors:w}=r.current;for(const v of w){const b=t.code,{isTop:g,isRight:m,isLeft:y,isBottom:S,maxScroll:j,minScroll:N}=Ph(v),k=Ry(v),E={x:Math.min(b===je.Right?k.right-k.width/2:k.right,Math.max(b===je.Right?k.left:k.left+k.width/2,f.x)),y:Math.min(b===je.Down?k.bottom-k.height/2:k.bottom,Math.max(b===je.Down?k.top:k.top+k.height/2,f.y))},T=b===je.Right&&!m||b===je.Left&&!y,R=b===je.Down&&!S||b===je.Up&&!g;if(T&&E.x!==f.x){const $=v.scrollLeft+h.x,oe=b===je.Right&&$<=j.x||b===je.Left&&$>=N.x;if(oe&&!h.y){v.scrollTo({left:$,behavior:i});return}oe?x.x=v.scrollLeft-$:x.x=b===je.Right?v.scrollLeft-j.x:v.scrollLeft-N.x,x.x&&v.scrollBy({left:-x.x,behavior:i});break}else if(R&&E.y!==f.y){const $=v.scrollTop+h.y,oe=b===je.Down&&$<=j.y||b===je.Up&&$>=N.y;if(oe&&!h.x){v.scrollTo({top:$,behavior:i});return}oe?x.y=v.scrollTop-$:x.y=b===je.Down?v.scrollTop-j.y:v.scrollTop-N.y,x.y&&v.scrollBy({top:-x.y,behavior:i});break}}this.handleMove(t,Or(So(f,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Oh.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Lh,onActivation:s}=t,{active:l}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const i=l.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function Sd(e){return!!(e&&"distance"in e)}function Nd(e){return!!(e&&"delay"in e)}class Yc{constructor(t,n,r){var s;r===void 0&&(r=Ly(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:l}=t,{target:a}=l;this.props=t,this.events=n,this.document=ts(a),this.documentListeners=new _s(this.document),this.listeners=new _s(r),this.windowListeners=new _s(gt(a)),this.initialCoordinates=(s=No(l))!=null?s:Gt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(It.Resize,this.handleCancel),this.windowListeners.add(It.DragStart,jd),this.windowListeners.add(It.VisibilityChange,this.handleCancel),this.windowListeners.add(It.ContextMenu,jd),this.documentListeners.add(It.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Nd(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Sd(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(It.Click,Oy,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(It.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:i}}=l;if(!s)return;const c=(n=No(t))!=null?n:Gt,u=So(s,c);if(!r&&i){if(Sd(i)){if(i.tolerance!=null&&La(u,i.tolerance))return this.handleCancel();if(La(u,i.distance))return this.handleStart()}if(Nd(i)&&La(u,i.tolerance))return this.handleCancel();this.handlePending(i,u);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===je.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Ay={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ea extends Yc{constructor(t){const{event:n}=t,r=ts(n.target);super(t,Ay,r)}}ea.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Fy={move:{name:"mousemove"},end:{name:"mouseup"}};var Hi;(function(e){e[e.RightClick=2]="RightClick"})(Hi||(Hi={}));class By extends Yc{constructor(t){super(t,Fy,ts(t.event.target))}}By.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Hi.RightClick?!1:(r==null||r({event:n}),!0)}}];const Oa={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Kc extends Yc{constructor(t){super(t,Oa)}static setup(){return window.addEventListener(Oa.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Oa.move.name,t)};function t(){}}}Kc.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Ts;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ts||(Ts={}));var Mo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Mo||(Mo={}));function Uy(e){let{acceleration:t,activator:n=Ts.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:i=Mo.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:p,delta:f,threshold:h}=e;const x=Wy({delta:f,disabled:!l}),[w,v]=ny(),b=d.useRef({x:0,y:0}),g=d.useRef({x:0,y:0}),m=d.useMemo(()=>{switch(n){case Ts.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Ts.DraggableRect:return s}},[n,s,c]),y=d.useRef(null),S=d.useCallback(()=>{const N=y.current;if(!N)return;const k=b.current.x*g.current.x,E=b.current.y*g.current.y;N.scrollBy(k,E)},[]),j=d.useMemo(()=>i===Mo.TreeOrder?[...u].reverse():u,[i,u]);d.useEffect(()=>{if(!l||!u.length||!m){v();return}for(const N of j){if((r==null?void 0:r(N))===!1)continue;const k=u.indexOf(N),E=p[k];if(!E)continue;const{direction:T,speed:R}=Dy(N,E,m,t,h);for(const $ of["x","y"])x[$][T[$]]||(R[$]=0,T[$]=0);if(R.x>0||R.y>0){v(),y.current=N,w(S,a),b.current=R,g.current=T;return}}b.current={x:0,y:0},g.current={x:0,y:0},v()},[t,S,r,v,l,a,JSON.stringify(m),JSON.stringify(x),w,u,j,p,JSON.stringify(h)])}const Hy={x:{[et.Backward]:!1,[et.Forward]:!1},y:{[et.Backward]:!1,[et.Forward]:!1}};function Wy(e){let{delta:t,disabled:n}=e;const r=jo(t);return il(s=>{if(n||!r||!s)return Hy;const l={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[et.Backward]:s.x[et.Backward]||l.x===-1,[et.Forward]:s.x[et.Forward]||l.x===1},y:{[et.Backward]:s.y[et.Backward]||l.y===-1,[et.Forward]:s.y[et.Forward]||l.y===1}}},[n,t,r])}function Vy(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return il(s=>{var l;return t==null?null:(l=r!=null?r:s)!=null?l:null},[r,t])}function Xy(e,t){return d.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...l]},[]),[e,t])}var Js;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Js||(Js={}));var Wi;(function(e){e.Optimized="optimized"})(Wi||(Wi={}));const Cd=new Map;function Yy(e,t){let{dragging:n,dependencies:r,config:s}=t;const[l,a]=d.useState(null),{frequency:i,measure:c,strategy:u}=s,p=d.useRef(e),f=b(),h=qs(f),x=d.useCallback(function(g){g===void 0&&(g=[]),!h.current&&a(m=>m===null?g:m.concat(g.filter(y=>!m.includes(y))))},[h]),w=d.useRef(null),v=il(g=>{if(f&&!n)return Cd;if(!g||g===Cd||p.current!==e||l!=null){const m=new Map;for(let y of e){if(!y)continue;if(l&&l.length>0&&!l.includes(y.id)&&y.rect.current){m.set(y.id,y.rect.current);continue}const S=y.node.current,j=S?new Xc(c(S),S):null;y.rect.current=j,j&&m.set(y.id,j)}return m}return g},[e,l,n,f,c]);return d.useEffect(()=>{p.current=e},[e]),d.useEffect(()=>{f||x()},[n,f]),d.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),d.useEffect(()=>{f||typeof i!="number"||w.current!==null||(w.current=setTimeout(()=>{x(),w.current=null},i))},[i,f,x,...r]),{droppableRects:v,measureDroppableContainers:x,measuringScheduled:l!=null};function b(){switch(u){case Js.Always:return!1;case Js.BeforeDragging:return n;default:return!n}}}function Qc(e,t){return il(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Ky(e,t){return Qc(e,t)}function Qy(e){let{callback:t,disabled:n}=e;const r=Jo(t),s=d.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:l}=window;return new l(r)},[r,n]);return d.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function ta(e){let{callback:t,disabled:n}=e;const r=Jo(t),s=d.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:l}=window;return new l(r)},[n]);return d.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Gy(e){return new Xc(ns(e),e)}function Ed(e,t,n){t===void 0&&(t=Gy);const[r,s]=d.useState(null);function l(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c!=null?c:n)!=null?u:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=Qy({callback(c){if(e)for(const u of c){const{type:p,target:f}=u;if(p==="childList"&&f instanceof HTMLElement&&f.contains(e)){l();break}}}}),i=ta({callback:l});return Qt(()=>{l(),e?(i==null||i.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),a==null||a.disconnect())},[e]),r}function qy(e){const t=Qc(e);return Eh(e,t)}const Md=[];function Jy(e){const t=d.useRef(e),n=il(r=>e?r&&r!==Md&&e&&t.current&&e.parentNode===t.current.parentNode?r:Vc(e):Md,[e]);return d.useEffect(()=>{t.current=e},[e]),n}function Zy(e){const[t,n]=d.useState(null),r=d.useRef(e),s=d.useCallback(l=>{const a=Ia(l.target);a&&n(i=>i?(i.set(a,Ui(a)),new Map(i)):null)},[]);return d.useEffect(()=>{const l=r.current;if(e!==l){a(l);const i=e.map(c=>{const u=Ia(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Ui(u)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=e}return()=>{a(e),a(l)};function a(i){i.forEach(c=>{const u=Ia(c);u==null||u.removeEventListener("scroll",s)})}},[s,e]),d.useMemo(()=>e.length?t?Array.from(t.values()).reduce((l,a)=>Or(l,a),Gt):zh(e):Gt,[e,t])}function _d(e,t){t===void 0&&(t=[]);const n=d.useRef(null);return d.useEffect(()=>{n.current=null},t),d.useEffect(()=>{const r=e!==Gt;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?So(e,n.current):Gt}function e1(e){d.useEffect(()=>{if(!qo)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function t1(e,t){return d.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:l}=r;return n[s]=a=>{l(a,t)},n},{}),[e,t])}function $h(e){return d.useMemo(()=>e?Ey(e):null,[e])}const Td=[];function n1(e,t){t===void 0&&(t=ns);const[n]=e,r=$h(n?gt(n):null),[s,l]=d.useState(Td);function a(){l(()=>e.length?e.map(c=>Rh(c)?r:new Xc(t(c),c)):Td)}const i=ta({callback:a});return Qt(()=>{i==null||i.disconnect(),a(),e.forEach(c=>i==null?void 0:i.observe(c))},[e]),s}function Ah(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return al(t)?t:e}function r1(e){let{measure:t}=e;const[n,r]=d.useState(null),s=d.useCallback(u=>{for(const{target:p}of u)if(al(p)){r(f=>{const h=t(p);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),l=ta({callback:s}),a=d.useCallback(u=>{const p=Ah(u);l==null||l.disconnect(),p&&(l==null||l.observe(p)),r(p?t(p):null)},[t,l]),[i,c]=ko(a);return d.useMemo(()=>({nodeRef:i,rect:n,setRef:c}),[n,i,c])}const s1=[{sensor:ea,options:{}},{sensor:Oh,options:{}}],l1={current:{}},Gl={draggable:{measure:kd},droppable:{measure:kd,strategy:Js.WhileDragging,frequency:Wi.Optimized},dragOverlay:{measure:ns}};class Ds extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const o1={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ds,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Co},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Gl,measureDroppableContainers:Co,windowRect:null,measuringScheduled:!1},Fh={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Co,draggableNodes:new Map,over:null,measureDroppableContainers:Co},ul=d.createContext(Fh),Bh=d.createContext(o1);function a1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ds}}}function i1(e,t){switch(t.type){case Ke.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ke.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ke.DragEnd:case Ke.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ke.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Ds(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Ke.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,l=e.droppable.containers.get(n);if(!l||r!==l.key)return e;const a=new Ds(e.droppable.containers);return a.set(n,{...l,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case Ke.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const l=new Ds(e.droppable.containers);return l.delete(n),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function c1(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=d.useContext(ul),l=jo(r),a=jo(n==null?void 0:n.id);return d.useEffect(()=>{if(!t&&!r&&l&&a!=null){if(!Zo(l)||document.activeElement===l.target)return;const i=s.get(a);if(!i)return;const{activatorNode:c,node:u}=i;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const p of[c.current,u.current]){if(!p)continue;const f=ly(p);if(f){f.focus();break}}})}},[r,t,s,a,l]),null}function Uh(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,l)=>l({transform:s,...r}),n):n}function u1(e){return d.useMemo(()=>({draggable:{...Gl.draggable,...e==null?void 0:e.draggable},droppable:{...Gl.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Gl.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function d1(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const l=d.useRef(!1),{x:a,y:i}=typeof s=="boolean"?{x:s,y:s}:s;Qt(()=>{if(!a&&!i||!t){l.current=!1;return}if(l.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const p=n(u),f=Eh(p,r);if(a||(f.x=0),i||(f.y=0),l.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=_h(u);h&&h.scrollBy({top:f.y,left:f.x})}},[t,a,i,r,n])}const na=d.createContext({...Gt,scaleX:1,scaleY:1});var Nn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Nn||(Nn={}));const Hh=d.memo(function(t){var n,r,s,l;let{id:a,accessibility:i,autoScroll:c=!0,children:u,sensors:p=s1,collisionDetection:f=by,measuring:h,modifiers:x,...w}=t;const v=d.useReducer(i1,void 0,a1),[b,g]=v,[m,y]=dy(),[S,j]=d.useState(Nn.Uninitialized),N=S===Nn.Initialized,{draggable:{active:k,nodes:E,translate:T},droppable:{containers:R}}=b,$=k!=null?E.get(k):null,oe=d.useRef({initial:null,translated:null}),W=d.useMemo(()=>{var Xe;return k!=null?{id:k,data:(Xe=$==null?void 0:$.data)!=null?Xe:l1,rect:oe}:null},[k,$]),P=d.useRef(null),[J,he]=d.useState(null),[me,I]=d.useState(null),Y=qs(w,Object.values(w)),_=cl("DndDescribedBy",a),G=d.useMemo(()=>R.getEnabled(),[R]),H=u1(h),{droppableRects:be,measureDroppableContainers:ve,measuringScheduled:He}=Yy(G,{dragging:N,dependencies:[T.x,T.y],config:H.droppable}),ye=Vy(E,k),K=d.useMemo(()=>me?No(me):null,[me]),ke=rs(),ie=Ky(ye,H.draggable.measure);d1({activeNode:k!=null?E.get(k):null,config:ke.layoutShiftCompensation,initialRect:ie,measure:H.draggable.measure});const se=Ed(ye,H.draggable.measure,ie),Ie=Ed(ye?ye.parentElement:null),Ee=d.useRef({activatorEvent:null,active:null,activeNode:ye,collisionRect:null,collisions:null,droppableRects:be,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),We=R.getNodeFor((n=Ee.current.over)==null?void 0:n.id),V=r1({measure:H.dragOverlay.measure}),U=(r=V.nodeRef.current)!=null?r:ye,ce=N?(s=V.rect)!=null?s:se:null,re=!!(V.nodeRef.current&&V.rect),te=qy(re?null:se),z=$h(U?gt(U):null),Z=Jy(N?We!=null?We:ye:null),ne=n1(Z),ue=Uh(x,{transform:{x:T.x-te.x,y:T.y-te.y,scaleX:1,scaleY:1},activatorEvent:me,active:W,activeNodeRect:se,containerNodeRect:Ie,draggingNodeRect:ce,over:Ee.current.over,overlayNodeRect:V.rect,scrollableAncestors:Z,scrollableAncestorRects:ne,windowRect:z}),qe=K?Or(K,T):null,Ve=Zy(Z),Wn=_d(Ve),ln=_d(Ve,[se]),Ct=Or(ue,Wn),qt=ce?Sy(ce,ue):null,Jt=W&&qt?f({active:W,collisionRect:qt,droppableRects:be,droppableContainers:G,pointerCoordinates:qe}):null,Vn=yy(Jt,"id"),[Et,Xn]=d.useState(null),fr=re?ue:Or(ue,ln),L=ky(fr,(l=Et==null?void 0:Et.rect)!=null?l:null,se),ge=d.useRef(null),ae=d.useCallback((Xe,C)=>{let{sensor:A,options:Q}=C;if(P.current==null)return;const le=E.get(P.current);if(!le)return;const Me=Xe.nativeEvent,ot=new A({active:P.current,activeNode:le,event:Me,options:Q,context:Ee,onAbort(nt){if(!E.get(nt))return;const{onDragAbort:Zt}=Y.current,on={id:nt};Zt==null||Zt(on),m({type:"onDragAbort",event:on})},onPending(nt,wn,Zt,on){if(!E.get(nt))return;const{onDragPending:ls}=Y.current,bn={id:nt,constraint:wn,initialCoordinates:Zt,offset:on};ls==null||ls(bn),m({type:"onDragPending",event:bn})},onStart(nt){const wn=P.current;if(wn==null)return;const Zt=E.get(wn);if(!Zt)return;const{onDragStart:on}=Y.current,ss={activatorEvent:Me,active:{id:wn,data:Zt.data,rect:oe}};_r.unstable_batchedUpdates(()=>{on==null||on(ss),j(Nn.Initializing),g({type:Ke.DragStart,initialCoordinates:nt,active:wn}),m({type:"onDragStart",event:ss}),he(ge.current),I(Me)})},onMove(nt){g({type:Ke.DragMove,coordinates:nt})},onEnd:pr(Ke.DragEnd),onCancel:pr(Ke.DragCancel)});ge.current=ot;function pr(nt){return async function(){const{active:Zt,collisions:on,over:ss,scrollAdjustedTranslate:ls}=Ee.current;let bn=null;if(Zt&&ls){const{cancelDrop:os}=Y.current;bn={activatorEvent:Me,active:Zt,collisions:on,delta:ls,over:ss},nt===Ke.DragEnd&&typeof os=="function"&&await Promise.resolve(os(bn))&&(nt=Ke.DragCancel)}P.current=null,_r.unstable_batchedUpdates(()=>{g({type:nt}),j(Nn.Uninitialized),Xn(null),he(null),I(null),ge.current=null;const os=nt===Ke.DragEnd?"onDragEnd":"onDragCancel";if(bn){const oa=Y.current[os];oa==null||oa(bn),m({type:os,event:bn})}})}}},[E]),_e=d.useCallback((Xe,C)=>(A,Q)=>{const le=A.nativeEvent,Me=E.get(Q);if(P.current!==null||!Me||le.dndKit||le.defaultPrevented)return;const ot={active:Me};Xe(A,C.options,ot)===!0&&(le.dndKit={capturedBy:C.sensor},P.current=Q,ae(A,C))},[E,ae]),vt=Xy(p,_e);e1(p),Qt(()=>{se&&S===Nn.Initializing&&j(Nn.Initialized)},[se,S]),d.useEffect(()=>{const{onDragMove:Xe}=Y.current,{active:C,activatorEvent:A,collisions:Q,over:le}=Ee.current;if(!C||!A)return;const Me={active:C,activatorEvent:A,collisions:Q,delta:{x:Ct.x,y:Ct.y},over:le};_r.unstable_batchedUpdates(()=>{Xe==null||Xe(Me),m({type:"onDragMove",event:Me})})},[Ct.x,Ct.y]),d.useEffect(()=>{const{active:Xe,activatorEvent:C,collisions:A,droppableContainers:Q,scrollAdjustedTranslate:le}=Ee.current;if(!Xe||P.current==null||!C||!le)return;const{onDragOver:Me}=Y.current,ot=Q.get(Vn),pr=ot&&ot.rect.current?{id:ot.id,rect:ot.rect.current,data:ot.data,disabled:ot.disabled}:null,nt={active:Xe,activatorEvent:C,collisions:A,delta:{x:le.x,y:le.y},over:pr};_r.unstable_batchedUpdates(()=>{Xn(pr),Me==null||Me(nt),m({type:"onDragOver",event:nt})})},[Vn]),Qt(()=>{Ee.current={activatorEvent:me,active:W,activeNode:ye,collisionRect:qt,collisions:Jt,droppableRects:be,draggableNodes:E,draggingNode:U,draggingNodeRect:ce,droppableContainers:R,over:Et,scrollableAncestors:Z,scrollAdjustedTranslate:Ct},oe.current={initial:ce,translated:qt}},[W,ye,Jt,qt,E,U,ce,be,R,Et,Z,Ct]),Uy({...ke,delta:T,draggingRect:qt,pointerCoordinates:qe,scrollableAncestors:Z,scrollableAncestorRects:ne});const yn=d.useMemo(()=>({active:W,activeNode:ye,activeNodeRect:se,activatorEvent:me,collisions:Jt,containerNodeRect:Ie,dragOverlay:V,draggableNodes:E,droppableContainers:R,droppableRects:be,over:Et,measureDroppableContainers:ve,scrollableAncestors:Z,scrollableAncestorRects:ne,measuringConfiguration:H,measuringScheduled:He,windowRect:z}),[W,ye,se,me,Jt,Ie,V,E,R,be,Et,ve,Z,ne,H,He,z]),la=d.useMemo(()=>({activatorEvent:me,activators:vt,active:W,activeNodeRect:se,ariaDescribedById:{draggable:_},dispatch:g,draggableNodes:E,over:Et,measureDroppableContainers:ve}),[me,vt,W,se,g,_,E,Et,ve]);return Re.createElement(Sh.Provider,{value:y},Re.createElement(ul.Provider,{value:la},Re.createElement(Bh.Provider,{value:yn},Re.createElement(na.Provider,{value:L},u)),Re.createElement(c1,{disabled:(i==null?void 0:i.restoreFocus)===!1})),Re.createElement(hy,{...i,hiddenTextDescribedById:_}));function rs(){const Xe=(J==null?void 0:J.autoScrollEnabled)===!1,C=typeof c=="object"?c.enabled===!1:c===!1,A=N&&!Xe&&!C;return typeof c=="object"?{...c,enabled:A}:{enabled:A}}}),f1=d.createContext(null),Dd="button",p1="Draggable";function h1(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const l=cl(p1),{activators:a,activatorEvent:i,active:c,activeNodeRect:u,ariaDescribedById:p,draggableNodes:f,over:h}=d.useContext(ul),{role:x=Dd,roleDescription:w="draggable",tabIndex:v=0}=s!=null?s:{},b=(c==null?void 0:c.id)===t,g=d.useContext(b?na:f1),[m,y]=ko(),[S,j]=ko(),N=t1(a,t),k=qs(n);Qt(()=>(f.set(t,{id:t,key:l,node:m,activatorNode:S,data:k}),()=>{const T=f.get(t);T&&T.key===l&&f.delete(t)}),[f,t]);const E=d.useMemo(()=>({role:x,tabIndex:v,"aria-disabled":r,"aria-pressed":b&&x===Dd?!0:void 0,"aria-roledescription":w,"aria-describedby":p.draggable}),[r,x,v,b,w,p.draggable]);return{active:c,activatorEvent:i,activeNodeRect:u,attributes:E,isDragging:b,listeners:r?void 0:N,node:m,over:h,setNodeRef:y,setActivatorNodeRef:j,transform:g}}function Wh(){return d.useContext(Bh)}const x1="Droppable",m1={timeout:25};function g1(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const l=cl(x1),{active:a,dispatch:i,over:c,measureDroppableContainers:u}=d.useContext(ul),p=d.useRef({disabled:n}),f=d.useRef(!1),h=d.useRef(null),x=d.useRef(null),{disabled:w,updateMeasurementsFor:v,timeout:b}={...m1,...s},g=qs(v!=null?v:r),m=d.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{u(Array.isArray(g.current)?g.current:[g.current]),x.current=null},b)},[b]),y=ta({callback:m,disabled:w||!a}),S=d.useCallback((E,T)=>{y&&(T&&(y.unobserve(T),f.current=!1),E&&y.observe(E))},[y]),[j,N]=ko(S),k=qs(t);return d.useEffect(()=>{!y||!j.current||(y.disconnect(),f.current=!1,y.observe(j.current))},[j,y]),d.useEffect(()=>(i({type:Ke.RegisterDroppable,element:{id:r,key:l,disabled:n,node:j,rect:h,data:k}}),()=>i({type:Ke.UnregisterDroppable,key:l,id:r})),[r]),d.useEffect(()=>{n!==p.current.disabled&&(i({type:Ke.SetDroppableDisabled,id:r,key:l,disabled:n}),p.current.disabled=n)},[r,l,n,i]),{active:a,rect:h,isOver:(c==null?void 0:c.id)===r,node:j,over:c,setNodeRef:N}}function v1(e){let{animation:t,children:n}=e;const[r,s]=d.useState(null),[l,a]=d.useState(null),i=jo(n);return!n&&!r&&i&&s(i),Qt(()=>{if(!l)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(t(u,l)).then(()=>{s(null)})},[t,r,l]),Re.createElement(Re.Fragment,null,n,r?d.cloneElement(r,{ref:a}):null)}const y1={x:0,y:0,scaleX:1,scaleY:1};function w1(e){let{children:t}=e;return Re.createElement(ul.Provider,{value:Fh},Re.createElement(na.Provider,{value:y1},t))}const b1={position:"fixed",touchAction:"none"},k1=e=>Zo(e)?"transform 250ms ease":void 0,j1=d.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:l,className:a,rect:i,style:c,transform:u,transition:p=k1}=e;if(!i)return null;const f=s?u:{...u,scaleX:1,scaleY:1},h={...b1,width:i.width,height:i.height,top:i.top,left:i.left,transform:gn.Transform.toString(f),transformOrigin:s&&r?my(r,i):void 0,transition:typeof p=="function"?p(r):p,...c};return Re.createElement(n,{className:a,style:h,ref:t},l)}),S1=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:l,className:a}=e;if(l!=null&&l.active)for(const[i,c]of Object.entries(l.active))c!==void 0&&(s[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,c));if(l!=null&&l.dragOverlay)for(const[i,c]of Object.entries(l.dragOverlay))c!==void 0&&r.node.style.setProperty(i,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);a!=null&&a.active&&n.node.classList.remove(a.active)}},N1=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:gn.Transform.toString(t)},{transform:gn.Transform.toString(n)}]},C1={duration:250,easing:"ease",keyframes:N1,sideEffects:S1({styles:{active:{opacity:"0"}}})};function E1(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return Jo((l,a)=>{if(t===null)return;const i=n.get(l);if(!i)return;const c=i.node.current;if(!c)return;const u=Ah(a);if(!u)return;const{transform:p}=gt(a).getComputedStyle(a),f=Mh(p);if(!f)return;const h=typeof t=="function"?t:M1(t);return Ih(c,s.draggable.measure),h({active:{id:l,data:i.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function M1(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...C1,...e};return l=>{let{active:a,dragOverlay:i,transform:c,...u}=l;if(!t)return;const p={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},f={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/i.rect.height:1},h={x:c.x-p.x,y:c.y-p.y,...f},x=s({...u,active:a,dragOverlay:i,transform:{initial:c,final:h}}),[w]=x,v=x[x.length-1];if(JSON.stringify(w)===JSON.stringify(v))return;const b=r==null?void 0:r({active:a,dragOverlay:i,...u}),g=i.node.animate(x,{duration:t,easing:n,fill:"forwards"});return new Promise(m=>{g.onfinish=()=>{b==null||b(),m()}})}}let Rd=0;function _1(e){return d.useMemo(()=>{if(e!=null)return Rd++,Rd},[e])}const Vh=Re.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:l,modifiers:a,wrapperElement:i="div",className:c,zIndex:u=999}=e;const{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggableNodes:w,droppableContainers:v,dragOverlay:b,over:g,measuringConfiguration:m,scrollableAncestors:y,scrollableAncestorRects:S,windowRect:j}=Wh(),N=d.useContext(na),k=_1(f==null?void 0:f.id),E=Uh(a,{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggingNodeRect:b.rect,over:g,overlayNodeRect:b.rect,scrollableAncestors:y,scrollableAncestorRects:S,transform:N,windowRect:j}),T=Qc(h),R=E1({config:r,draggableNodes:w,droppableContainers:v,measuringConfiguration:m}),$=T?b.setRef:void 0;return Re.createElement(w1,null,Re.createElement(v1,{animation:R},f&&k?Re.createElement(j1,{key:k,id:f.id,ref:$,as:i,activatorEvent:p,adjustScale:t,className:c,transition:l,rect:T,style:{zIndex:u,...s},transform:E},n):null))});function ra(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function T1(e,t){return e.reduce((n,r,s)=>{const l=t.get(r);return l&&(n[s]=l),n},Array(e.length))}function Ml(e){return e!==null&&e>=0}function D1(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function R1(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Xh=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const l=ra(t,r,n),a=t[s],i=l[s];return!i||!a?null:{x:i.left-a.left,y:i.top-a.top,scaleX:i.width/a.width,scaleY:i.height/a.height}},_l={scaleX:1,scaleY:1},Yh=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:l,overIndex:a}=e;const i=(t=l[n])!=null?t:r;if(!i)return null;if(s===n){const u=l[a];return u?{x:0,y:n<a?u.top+u.height-(i.top+i.height):u.top-i.top,..._l}:null}const c=P1(l,s,n);return s>n&&s<=a?{x:0,y:-i.height-c,..._l}:s<n&&s>=a?{x:0,y:i.height+c,..._l}:{x:0,y:0,..._l}};function P1(e,t,n){const r=e[t],s=e[t-1],l=e[t+1];return r?n<t?s?r.top-(s.top+s.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Kh="Sortable",Qh=Re.createContext({activeIndex:-1,containerId:Kh,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Xh,disabled:{draggable:!1,droppable:!1}});function Gh(e){let{children:t,id:n,items:r,strategy:s=Xh,disabled:l=!1}=e;const{active:a,dragOverlay:i,droppableRects:c,over:u,measureDroppableContainers:p}=Wh(),f=cl(Kh,n),h=i.rect!==null,x=d.useMemo(()=>r.map(N=>typeof N=="object"&&"id"in N?N.id:N),[r]),w=a!=null,v=a?x.indexOf(a.id):-1,b=u?x.indexOf(u.id):-1,g=d.useRef(x),m=!D1(x,g.current),y=b!==-1&&v===-1||m,S=R1(l);Qt(()=>{m&&w&&p(x)},[m,x,w,p]),d.useEffect(()=>{g.current=x},[x]);const j=d.useMemo(()=>({activeIndex:v,containerId:f,disabled:S,disableTransforms:y,items:x,overIndex:b,useDragOverlay:h,sortedRects:T1(x,c),strategy:s}),[v,f,S.draggable,S.droppable,y,x,b,c,h,s]);return Re.createElement(Qh.Provider,{value:j},t)}const z1=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return ra(n,r,s).indexOf(t)},I1=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:l,newIndex:a,previousItems:i,previousContainerId:c,transition:u}=e;return!u||!r||i!==l&&s===a?!1:n?!0:a!==s&&t===c},L1={duration:200,easing:"ease"},qh="transform",O1=gn.Transition.toString({property:qh,duration:0,easing:"linear"}),$1={roleDescription:"sortable"};function A1(e){let{disabled:t,index:n,node:r,rect:s}=e;const[l,a]=d.useState(null),i=d.useRef(n);return Qt(()=>{if(!t&&n!==i.current&&r.current){const c=s.current;if(c){const u=ns(r.current,{ignoreTransform:!0}),p={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(p.x||p.y)&&a(p)}}n!==i.current&&(i.current=n)},[t,n,r,s]),d.useEffect(()=>{l&&a(null)},[l]),l}function Jh(e){let{animateLayoutChanges:t=I1,attributes:n,disabled:r,data:s,getNewIndex:l=z1,id:a,strategy:i,resizeObserverConfig:c,transition:u=L1}=e;const{items:p,containerId:f,activeIndex:h,disabled:x,disableTransforms:w,sortedRects:v,overIndex:b,useDragOverlay:g,strategy:m}=d.useContext(Qh),y=F1(r,x),S=p.indexOf(a),j=d.useMemo(()=>({sortable:{containerId:f,index:S,items:p},...s}),[f,s,S,p]),N=d.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:k,node:E,isOver:T,setNodeRef:R}=g1({id:a,data:j,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...c}}),{active:$,activatorEvent:oe,activeNodeRect:W,attributes:P,setNodeRef:J,listeners:he,isDragging:me,over:I,setActivatorNodeRef:Y,transform:_}=h1({id:a,data:j,attributes:{...$1,...n},disabled:y.draggable}),G=ty(R,J),H=!!$,be=H&&!w&&Ml(h)&&Ml(b),ve=!g&&me,He=ve&&be?_:null,ye=i!=null?i:m,K=be?He!=null?He:ye({rects:v,activeNodeRect:W,activeIndex:h,overIndex:b,index:S}):null,ke=Ml(h)&&Ml(b)?l({id:a,items:p,activeIndex:h,overIndex:b}):S,ie=$==null?void 0:$.id,se=d.useRef({activeId:ie,items:p,newIndex:ke,containerId:f}),Ie=p!==se.current.items,Ee=t({active:$,containerId:f,isDragging:me,isSorting:H,id:a,index:S,items:p,newIndex:se.current.newIndex,previousItems:se.current.items,previousContainerId:se.current.containerId,transition:u,wasDragging:se.current.activeId!=null}),We=A1({disabled:!Ee,index:S,node:E,rect:k});return d.useEffect(()=>{H&&se.current.newIndex!==ke&&(se.current.newIndex=ke),f!==se.current.containerId&&(se.current.containerId=f),p!==se.current.items&&(se.current.items=p)},[H,ke,f,p]),d.useEffect(()=>{if(ie===se.current.activeId)return;if(ie!=null&&se.current.activeId==null){se.current.activeId=ie;return}const U=setTimeout(()=>{se.current.activeId=ie},50);return()=>clearTimeout(U)},[ie]),{active:$,activeIndex:h,attributes:P,data:j,rect:k,index:S,newIndex:ke,items:p,isOver:T,isSorting:H,isDragging:me,listeners:he,node:E,overIndex:b,over:I,setNodeRef:G,setActivatorNodeRef:Y,setDroppableNodeRef:R,setDraggableNodeRef:J,transform:We!=null?We:K,transition:V()};function V(){if(We||Ie&&se.current.newIndex===S)return O1;if(!(ve&&!Zo(oe)||!u)&&(H||Ee))return gn.Transition.toString({...u,property:qh})}}function F1(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}je.Down,je.Right,je.Up,je.Left;const Se={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Pd={always:{label:"",color:"#6b9b6e",bg:"#e0f0e1"},keyword:{label:"",color:"#9b6b6b",bg:"#f0e0e0"},mood:{label:"",color:"#9b7a3b",bg:"#f0ebd8"},message_mode:{label:"",color:"#6b7b9b",bg:"#e0e6f0"}};function Zh({activation:e}){const t=Pd[e]||Pd.always;return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:t.color,background:t.bg},children:t.label})}const Tl=80;function B1({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const v=Math.min(1,Math.abs(p)/Tl);x.style.transition=w,x.style.opacity=`${v}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{if(p.target.closest(".drag-handle"))return;const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const v=Math.max(-Tl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${v}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(v)/Tl)}`),f.current=v},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Tl):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(Jr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function U1({book:e,onTap:t,onDelete:n}){var p;const{attributes:r,listeners:s,setNodeRef:l,transform:a,transition:i,isDragging:c}=Jh({id:String(e.id)}),u={transform:gn.Transform.toString(a),transition:i,opacity:c?0:1};return o.jsx("div",{ref:l,style:u,className:"mb-3",children:o.jsx(B1,{onDelete:()=>n(e),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Se.bg,userSelect:"none"},children:[o.jsx("div",{...r,...s,className:"drag-handle shrink-0 cursor-grab touch-none px-1",style:{cursor:c?"grabbing":"grab"},children:o.jsx(sl,{size:18,style:{color:Se.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>t(e),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:Se.text},children:e.name}),o.jsx(Zh,{activation:e.activation})]}),e.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:Se.textMuted},children:e.folder}),e.activation==="keyword"&&((p=e.keywords)==null?void 0:p.length)>0&&o.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[e.keywords.slice(0,3).map((f,h)=>o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(232,160,191,0.15)",color:Se.accentDark},children:f},h)),e.keywords.length>3&&o.jsxs("span",{className:"text-[10px]",style:{color:Se.textMuted},children:["+",e.keywords.length-3]})]})]}),o.jsx(Vr,{size:16,style:{color:Se.textMuted,flexShrink:0},onClick:()=>t(e)})]})})})}function H1({folder:e,books:t,onDelete:n,onTap:r,onReorder:s}){const[l,a]=d.useState(!0),[i,c]=d.useState(null),u=Nh(Eo(ea,{activationConstraint:{distance:5}}),Eo(Kc,{activationConstraint:{delay:200,tolerance:5}})),p=({active:h,over:x})=>{if(c(null),!x||h.id===x.id)return;const w=t.findIndex(g=>String(g.id)===String(h.id)),v=t.findIndex(g=>String(g.id)===String(x.id));if(w<0||v<0)return;const b=ra(t,w,v);s(e,b)},f=i?t.find(h=>String(h.id)===String(i)):null;return o.jsxs("div",{className:"mb-4",children:[o.jsxs("button",{className:"mb-2 flex w-full items-center gap-2 px-1",onClick:()=>a(!l),children:[l?o.jsx(dr,{size:14,style:{color:Se.textMuted}}):o.jsx(Vr,{size:14,style:{color:Se.textMuted}}),o.jsx("span",{className:"text-[12px] font-bold tracking-wide",style:{color:Se.textMuted},children:e||""}),o.jsx("span",{className:"ml-1 rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.12)",color:Se.textMuted},children:t.length})]}),l&&o.jsxs(Hh,{sensors:u,collisionDetection:Ch,onDragStart:({active:h})=>c(h.id),onDragEnd:p,children:[o.jsx(Gh,{items:t.map(h=>String(h.id)),strategy:Yh,children:t.map(h=>o.jsx(U1,{book:h,onTap:r,onDelete:n},h.id))}),o.jsx(Vh,{children:f&&o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Se.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx("div",{className:"shrink-0 px-1",children:o.jsx(sl,{size:18,style:{color:Se.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:Se.text},children:f.name}),o.jsx(Zh,{activation:f.activation})]}),f.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:Se.textMuted},children:f.folder})]}),o.jsx(Vr,{size:16,style:{color:Se.textMuted,flexShrink:0}})]})})]})]})}function W1(){const e=zt(),[t,n]=d.useState([]),[r,s]=d.useState(!0),[l,a]=d.useState(null),[i,c]=d.useState(null),u=v=>{c(v),setTimeout(()=>c(null),2e3)},p=()=>{s(!0),B("/api/world-books").then(v=>n(v.world_books||[])).catch(()=>u("")).finally(()=>s(!1))};d.useEffect(()=>{p()},[]);const f=async v=>{a(null);try{await B(`/api/world-books/${v.id}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==v.id)),u("")}catch(b){u("")}},h=(v,b)=>{const g=v||"";n(m=>[...m.filter(S=>(S.folder||"")!==g),...b]),B("/api/world-books/reorder",{method:"PUT",body:{ordered_ids:b.map(m=>m.id)}}).catch(()=>u(""))},x={};for(const v of t){const b=v.folder||"";x[b]||(x[b]=[]),x[b].push(v)}const w=Object.keys(x).sort((v,b)=>v===""?1:b===""?-1:v.localeCompare(b));return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Se.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full nm-active",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Nt,{size:22,style:{color:Se.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Se.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books/new"),children:o.jsx(qr,{size:20,style:{color:Se.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-t-transparent",style:{borderColor:Se.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(sl,{size:36,style:{color:Se.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:Se.textMuted},children:" + "})]}):w.map(v=>o.jsx(H1,{folder:v,books:x[v],onDelete:b=>a(b),onTap:b=>e(`/world-books/${b.id}`),onReorder:h},v))}),l&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>a(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Se.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:v=>v.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Se.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Se.textMuted},children:["",l.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)",color:Se.text},onClick:()=>a(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>f(l),children:""})]})]})}),i&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const ee={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function V1({label:e,value:t,onChange:n,placeholder:r}){return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ee.textMuted},children:e}),o.jsx("input",{type:"text",value:t,onChange:s=>n(s.target.value),placeholder:r,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:ee.bg,color:ee.text}})]})}function X1({value:e,onChange:t,folders:n}){const[r,s]=d.useState(!1),l=n.filter(a=>a!==e&&a.toLowerCase().includes(e.toLowerCase()));return o.jsxs("div",{className:"relative mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ee.textMuted},children:""}),o.jsx("input",{type:"text",value:e,onChange:a=>{t(a.target.value),s(!0)},onFocus:()=>s(!0),onBlur:()=>setTimeout(()=>s(!1),150),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:ee.bg,color:ee.text}}),r&&l.length>0&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[160px] overflow-y-auto rounded-[14px]",style:{background:ee.bg,boxShadow:"var(--card-shadow)"},children:l.map(a=>o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:ee.text},onMouseDown:()=>{t(a),s(!1)},children:a},a))})]})}function Y1({value:e,onChange:t}){const n=[{value:"always",label:""},{value:"keyword",label:""},{value:"mood",label:""},{value:"message_mode",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ee.textMuted},children:""}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:ee.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:e===r.value?ee.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?ee.accentDark:ee.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})]})}function K1({selected:e,onChange:t}){const n=[{value:"long",label:""},{value:"short",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ee.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:ee.bg,minHeight:48},children:n.map(r=>{const s=e===r.value;return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?ee.accentDark:ee.bg,color:s?"white":ee.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>t(r.value),children:r.label},r.value)})})]})}const Q1=[{value:"happy",label:""},{value:"sad",label:""},{value:"angry",label:""},{value:"anxious",label:""},{value:"tired",label:""},{value:"emo",label:""},{value:"flirty",label:""},{value:"proud",label:""},{value:"calm",label:""}];function G1({selected:e,onChange:t}){const n=r=>{e.includes(r)?t(e.filter(s=>s!==r)):t([...e,r])};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ee.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:ee.bg,minHeight:48},children:Q1.map(r=>{const s=e.includes(r.value);return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?ee.accentDark:ee.bg,color:s?"white":ee.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>n(r.value),children:r.label},r.value)})})]})}function q1({keywords:e,onChange:t}){const[n,r]=d.useState(""),s=()=>{const l=n.trim();if(!l||e.includes(l)){r("");return}t([...e,l]),r("")};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ee.textMuted},children:""}),o.jsxs("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:ee.bg,minHeight:48},children:[e.map(l=>o.jsxs("span",{className:"flex items-center gap-1 rounded-full px-2.5 py-1 text-[12px] font-medium",style:{background:"rgba(232,160,191,0.2)",color:ee.accentDark},children:[l,o.jsx("button",{onClick:()=>t(e.filter(a=>a!==l)),children:o.jsx(ol,{size:10})})]},l)),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),onKeyDown:l=>{(l.key==="Enter"||l.key===",")&&(l.preventDefault(),s())},placeholder:"...",className:"w-24 bg-transparent text-[12px] outline-none",style:{color:ee.text}}),n.trim()&&o.jsx("button",{className:"flex h-5 w-5 items-center justify-center rounded-full",style:{background:ee.accentDark},onClick:s,children:o.jsx(qr,{size:10,color:"white"})})]})]}),o.jsx("p",{className:"mt-1 text-[10px]",style:{color:ee.textMuted},children:" Enter "})]})}function J1({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:ee.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:ee.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ee.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Xr,{size:18,style:{color:ee.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:ee.bg,color:ee.text},placeholder:"..."})]})}function zd(){const e=zt(),{id:t}=fh(),n=!t,[r,s]=d.useState(""),[l,a]=d.useState(""),[i,c]=d.useState("always"),[u,p]=d.useState([]),[f,h]=d.useState("long"),[x,w]=d.useState(""),[v,b]=d.useState(!1),[g,m]=d.useState(!n),[y,S]=d.useState(null),[j,N]=d.useState([]),[k,E]=d.useState(!1),T=d.useRef(null),R=W=>{var he;const P=(he=W.target.files)==null?void 0:he[0];if(!P)return;const J=new FileReader;J.onload=me=>w(me.target.result||""),J.readAsText(P),W.target.value=""},$=W=>{S(W),setTimeout(()=>S(null),2e3)};d.useEffect(()=>{B("/api/world-books").then(W=>{const P=W.world_books||[];if(N([...new Set(P.map(J=>J.folder).filter(Boolean))]),!n){const J=P.find(he=>String(he.id)===String(t));J&&(s(J.name),a(J.folder||""),c(J.activation),p(J.keywords||[]),h(J.message_mode||"long"),w(J.content))}}).catch(()=>$("")).finally(()=>m(!1))},[t,n]);const oe=async()=>{if(!r.trim()){$("");return}b(!0);try{const W={name:r.trim(),folder:l.trim()||null,activation:i,keywords:i==="keyword"||i==="mood"?u:[],message_mode:i==="message_mode"?f:null,content:x};n?(await B("/api/world-books",{method:"POST",body:W}),$("")):(await B(`/api/world-books/${t}`,{method:"PUT",body:W}),$(""))}catch(W){$(": "+W.message)}finally{b(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:ee.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ee.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books",{replace:!0}),children:o.jsx(Nt,{size:22,style:{color:ee.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:ee.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ee.bg,boxShadow:v?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:oe,disabled:v,children:o.jsx(Go,{size:18,style:{color:ee.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:g?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:ee.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"rounded-[20px] p-5 mb-4",style:{background:ee.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(V1,{label:"",value:r,onChange:s,placeholder:""}),o.jsx(X1,{value:l,onChange:a,folders:j}),o.jsx(Y1,{value:i,onChange:c}),i==="keyword"&&o.jsx(q1,{keywords:u,onChange:p}),i==="mood"&&o.jsx(G1,{selected:u,onChange:p}),i==="message_mode"&&o.jsx(K1,{selected:f,onChange:h})]}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:ee.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:ee.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:ee.bg},onClick:()=>{var W;return(W=T.current)==null?void 0:W.click()},title:"",children:o.jsx(Qo,{size:13,style:{color:ee.textMuted}})}),o.jsx("input",{ref:T,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:R}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:ee.bg},onClick:()=>E(!0),title:"",children:o.jsx(ll,{size:13,style:{color:ee.accentDark}})})]})]}),o.jsx("textarea",{value:x,onChange:W=>w(W.target.value),placeholder:"...",rows:10,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:ee.bg,color:ee.text}})]})]})}),k&&o.jsx(J1,{value:x,onChange:w,onClose:()=>E(!1)}),y&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:y})})]})}const Fe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Dl=80;function Z1({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const v=Math.min(1,Math.abs(p)/Dl);x.style.transition=w,x.style.opacity=`${v}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const v=Math.max(-Dl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${v}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(v)/Dl)}`),f.current=v},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Dl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Fe.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(Jr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function e0({assistant:e,localAvatar:t,onTap:n}){var s;const r=t||null;return o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Fe.bg,userSelect:"none"},onClick:()=>n(e),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:48,height:48,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Fe.bg},children:r?o.jsx("img",{src:r,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[20px]",style:{color:Fe.accentDark},children:((s=e.name)==null?void 0:s[0])||"?"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[15px] font-bold",style:{color:Fe.text},children:e.name}),e.created_at&&o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:Fe.textMuted},children:e.created_at.slice(0,10)})]}),o.jsx(Vr,{size:16,style:{color:Fe.textMuted,flexShrink:0}})]})}function t0(){const e=zt(),[t,n]=d.useState([]),[r,s]=d.useState({}),[l,a]=d.useState(!0),[i,c]=d.useState(null),[u,p]=d.useState(null),f=w=>{p(w),setTimeout(()=>p(null),2e3)},h=()=>{a(!0),B("/api/assistants").then(async w=>{const v=w.assistants||[];n(v);const b={};await Promise.all(v.map(async g=>{const m=await Zr(`assistant-avatar-${g.id}`).catch(()=>null);m&&(b[g.id]=m)})),s(b)}).catch(()=>f("")).finally(()=>a(!1))};d.useEffect(()=>{h()},[]);const x=async w=>{c(null);try{await B(`/api/assistants/${w.id}`,{method:"DELETE"}),n(v=>v.filter(b=>b.id!==w.id)),f("")}catch(v){f("")}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Fe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Fe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Nt,{size:22,style:{color:Fe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Fe.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Fe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants/new"),children:o.jsx(qr,{size:20,style:{color:Fe.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Fe.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(gh,{size:36,style:{color:Fe.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:Fe.textMuted},children:" + "})]}):t.map(w=>o.jsx(Z1,{onDelete:()=>c(w),children:o.jsx(e0,{assistant:w,localAvatar:r[w.id],onTap:v=>e(`/assistants/${v.id}`)})},w.id))}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>c(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Fe.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:w=>w.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Fe.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Fe.textMuted},children:["",i.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Fe.bg,boxShadow:"var(--card-shadow-sm)",color:Fe.text},onClick:()=>c(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>x(i),children:""})]})]})}),u&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:u})})]})}const M={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Id({label:e,value:t,onChange:n,placeholder:r,rows:s,onExpand:l,onHistory:a}){const i=d.useRef(null),c=u=>{var h;const p=(h=u.target.files)==null?void 0:h[0];if(!p)return;const f=new FileReader;f.onload=x=>n(x.target.result||""),f.readAsText(p),u.target.value=""};return o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),o.jsxs("div",{className:"flex items-center gap-2",children:[a&&o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:a,children:o.jsx(Hv,{size:13,style:{color:M.textMuted}})}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var u;return(u=i.current)==null?void 0:u.click()},children:o.jsx(Qo,{size:13,style:{color:M.textMuted}})}),o.jsx("input",{ref:i,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:c}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:l,children:o.jsx(ll,{size:13,style:{color:M.accentDark}})})]})]}),o.jsx("textarea",{value:t,onChange:u=>n(u.target.value),placeholder:r,rows:s||6,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})}function $a({label:e,value:t,onChange:n,presets:r}){const[s,l]=d.useState(!1),a=r.find(i=>i.id===t);return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text},onClick:()=>l(!s),children:[o.jsx("span",{style:{color:a?M.text:M.textMuted},children:a?a.name:""}),o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:M.textMuted,transform:s?"rotate(180deg)":"none",transition:"transform 0.2s"},children:o.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&o.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:M.bg,boxShadow:"var(--card-shadow)",zIndex:40},children:[o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:M.textMuted},onClick:()=>{n(null),l(!1)},children:""}),r.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[14px]",style:{color:M.text},onClick:()=>{n(i.id),l(!1)},children:[o.jsx("span",{children:i.name}),i.id===t&&o.jsx(or,{size:14,style:{color:M.accentDark}})]},i.id))]})]})]})}function Aa({value:e,onChange:t,onClose:n,title:r,placeholder:s}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:r||""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Xr,{size:18,style:{color:M.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:l=>t(l.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:M.bg,color:M.text},placeholder:s||""})]})}const Rl=80;function n0({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const v=Math.min(1,Math.abs(p)/Rl);x.style.transition=w,x.style.opacity=`${v}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const v=Math.max(-Rl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${v}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(v)/Rl)}`),f.current=v},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Rl):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(Jr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function r0({title:e,message:t,onConfirm:n,onCancel:r}){return o.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:r,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:M.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:s=>s.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:M.text},children:e||""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:M.textMuted},children:t}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.text},onClick:r,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:n,children:""})]})]})})}function s0({items:e,currentContent:t,onApply:n,onClose:r,onDelete:s}){const[l,a]=d.useState("current"),[i,c]=d.useState(null),[u,p]=d.useState(null),f=x=>x?new Date(x).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",h=async()=>{if(l==="current"){r();return}const x=e.find(w=>w.id===l);x&&await n(x.content),r()};return i?o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsxs("span",{className:"text-[15px] font-bold",style:{color:M.text},children:[" ",i.version]}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>c(null),children:o.jsx(Xr,{size:18,style:{color:M.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:o.jsx("div",{className:"rounded-[14px] p-4",style:{boxShadow:"var(--inset-shadow)",background:M.bg},children:o.jsx("p",{className:"whitespace-pre-wrap text-[13px] leading-relaxed",style:{color:M.text},children:i.content})})})]}):o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:r,children:o.jsx(Xr,{size:18,style:{color:M.accentDark}})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[o.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:l==="current"?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[o.jsx("button",{onClick:()=>a("current"),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:l==="current"?M.accentDark:M.bg,boxShadow:l==="current"?"none":"var(--icon-inset)"},children:l==="current"&&o.jsx(or,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:""}),o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#2a9d5c",background:"rgba(42,157,92,0.12)"},children:""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:t})]})]}),e.length===0&&o.jsx("p",{className:"py-8 text-center text-[13px]",style:{color:M.textMuted},children:""}),e.map(x=>o.jsx("div",{className:"mb-2",children:o.jsx(n0,{onDelete:()=>p(x.id),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:l===x.id?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[o.jsx("button",{onClick:()=>a(x.id),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:l===x.id?M.accentDark:M.bg,boxShadow:l===x.id?"none":"var(--icon-inset)"},children:l===x.id&&o.jsx(or,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>c(x),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:[" ",x.version]}),o.jsx("span",{className:"text-[10px]",style:{color:M.textMuted},children:f(x.created_at)})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:x.content})]})]})})},x.id))]}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsx("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:h,children:""})}),u&&o.jsx(r0,{message:"",onCancel:()=>p(null),onConfirm:()=>{s(u),p(null)}})]})}function ex(e){return e==="always"?"":e==="keyword"?"":e==="message_mode"?"":""}function tx(e){return!e||!Array.isArray(e)?[]:e.map((t,n)=>typeof t=="object"&&t!==null?t:{id:t,position:"after",sort_order:n})}function l0({item:e,book:t,position:n,sectionList:r,onRemove:s,onChangePosition:l}){const{attributes:a,listeners:i,setNodeRef:c,transform:u,transition:p,isDragging:f}=Jh({id:String(e.id)}),h={transform:gn.Transform.toString(u),transition:p,opacity:f?0:1};return t?o.jsxs("div",{ref:c,style:h,className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",children:[o.jsx("div",{...a,...i,className:"cursor-grab touch-none p-1",style:{cursor:f?"grabbing":"grab"},children:o.jsx(sl,{size:14,style:{color:M.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.text},children:t.name}),o.jsxs("div",{className:"text-[10px]",style:{color:M.textMuted},children:[ex(t.activation),t.folder?`  ${t.folder}`:""]})]}),o.jsx("button",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},onClick:()=>l(e.id,n==="before"?"after":"before"),children:n==="before"?"":""}),o.jsx("button",{onClick:()=>s(e.id),children:o.jsx(ol,{size:14,style:{color:M.textMuted}})})]}):null}function o0({allBooks:e,mountedIds:t,onClose:n,onConfirm:r}){const[s,l]=d.useState(new Set(t)),a={};e.forEach(u=>{const p=u.folder||"";a[p]||(a[p]=[]),a[p].push(u)});const i=u=>{l(p=>{const f=new Set(p);return f.has(u)?f.delete(u):f.add(u),f})},c=u=>{const p=u.every(f=>s.has(f.id));l(f=>{const h=new Set(f);return p?u.forEach(x=>h.delete(x.id)):u.forEach(x=>h.add(x.id)),h})};return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-end",style:{background:"rgba(0,0,0,0.4)"},children:o.jsxs("div",{className:"flex w-full flex-col rounded-t-[24px]",style:{background:M.bg,maxHeight:"82vh"},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between p-5 pb-3",children:[o.jsx("h3",{className:"text-[16px] font-bold",style:{color:M.text},children:""}),o.jsx("button",{onClick:n,children:o.jsx(ol,{size:20,style:{color:M.textMuted}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5",children:Object.entries(a).map(([u,p])=>{const f=p.every(h=>s.has(h.id));return o.jsxs("div",{className:"mb-5",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:u}),o.jsx("button",{className:"rounded-full px-2.5 py-1 text-[11px] font-semibold",style:{background:f?"rgba(201,98,138,0.15)":"rgba(136,136,160,0.1)",color:f?M.accentDark:M.textMuted},onClick:()=>c(p),children:f?"":""})]}),o.jsx("div",{className:"space-y-2",children:p.map(h=>{const x=s.has(h.id);return o.jsxs("button",{className:"flex w-full items-center gap-3 rounded-[14px] p-3",style:{background:M.bg,boxShadow:x?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>i(h.id),children:[o.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:x?M.accentDark:M.bg,boxShadow:x?"none":"var(--icon-inset)"},children:x&&o.jsx(or,{size:12,color:"white"})}),o.jsx("div",{className:"flex-1 min-w-0 text-left",children:o.jsx("div",{className:"truncate text-[13px] font-medium",style:{color:x?M.accentDark:M.text},children:h.name})}),o.jsx("span",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},children:ex(h.activation)})]},h.id)})})]},u)})}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsxs("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>r([...s]),children:[" ",s.size,""]})})]})})}function a0({ruleSetIds:e,onChange:t,allBooks:n}){const[r,s]=d.useState(!1),[l,a]=d.useState(null),i=tx(e),c=i.filter(j=>j.position==="before").sort((j,N)=>j.sort_order-N.sort_order),u=i.filter(j=>j.position==="after").sort((j,N)=>j.sort_order-N.sort_order),p=j=>n.find(N=>N.id===j||N.id===Number(j)),f=Nh(Eo(ea,{activationConstraint:{distance:5}}),Eo(Kc,{activationConstraint:{delay:150,tolerance:5}})),h=({active:j})=>a(j.id),x=({active:j,over:N})=>{if(!N)return;const k=i.find(T=>String(T.id)===String(j.id)),E=i.find(T=>String(T.id)===String(N.id));if(!(!k||!E)&&k.position!==E.position){const T=i.map(R=>String(R.id)===String(k.id)?{...R,position:E.position}:R);t(T)}},w=({active:j,over:N})=>{if(a(null),!N||j.id===N.id)return;const k=i.find(P=>String(P.id)===String(j.id)),E=i.find(P=>String(P.id)===String(N.id));if(!k||!E||k.position!==E.position)return;const T=k.position==="before"?[...c]:[...u],R=T.findIndex(P=>String(P.id)===String(j.id)),$=T.findIndex(P=>String(P.id)===String(N.id)),oe=ra(T,R,$).map((P,J)=>({...P,sort_order:J})),W=i.filter(P=>P.position!==k.position);t([...W,...oe])},v=j=>t(i.filter(N=>N.id!==j)),b=(j,N)=>{const E=(N==="before"?c:u).length;t(i.map(T=>T.id===j?{...T,position:N,sort_order:E}:T))},g=j=>{const N=i.map($=>$.id),E=j.filter($=>!N.includes($)).map(($,oe)=>({id:$,position:"after",sort_order:u.length+oe})),T=new Set(N.filter($=>!j.includes($))),R=i.filter($=>!T.has($.id));t([...R,...E])},m=(j,N)=>j.length===0?o.jsx("div",{className:"py-3 text-center text-[12px]",style:{color:M.textMuted},children:""}):o.jsx(Gh,{items:j.map(k=>String(k.id)),strategy:Yh,children:o.jsx("div",{className:"rounded-[14px] px-2 pt-1",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:j.map((k,E)=>o.jsxs("div",{children:[E>0&&o.jsx("div",{className:"mx-2",style:{height:1,background:"rgba(0,0,0,0.06)"}}),o.jsx(l0,{item:k,book:p(k.id),position:N,sectionList:j,onRemove:v,onChangePosition:b})]},k.id))})}),y=l?i.find(j=>String(j.id)===String(l)):null,S=y?p(y.id):null;return o.jsxs(Hh,{sensors:f,collisionDetection:Ch,onDragStart:h,onDragOver:x,onDragEnd:w,children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(c,"before")]}),o.jsxs("div",{className:"my-4 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}}),o.jsx("span",{className:"rounded-full px-3 py-1 text-[11px] font-bold",style:{background:"rgba(232,160,191,0.15)",color:M.accentDark},children:"System Prompt"}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(u,"after")]}),o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-3 text-[14px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.accentDark},onClick:()=>s(!0),children:[o.jsx(qr,{size:16})," "]}),o.jsx(Vh,{children:S&&o.jsxs("div",{className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",style:{background:M.bg,boxShadow:"var(--card-shadow)",opacity:.9},children:[o.jsx(sl,{size:14,style:{color:M.textMuted}}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.accentDark},children:S.name})})]})}),r&&o.jsx(o0,{allBooks:n,mountedIds:i.map(j=>j.id),onClose:()=>s(!1),onConfirm:j=>{g(j),s(!1)}})]})}function Ld(){const e=zt(),{id:t}=fh(),n=!t,[r,s]=d.useState("basic"),[l,a]=d.useState(""),[i,c]=d.useState(""),[u,p]=d.useState(""),[f,h]=d.useState(null),[x,w]=d.useState(null),[v,b]=d.useState(null),[g,m]=d.useState(""),[y,S]=d.useState(""),[j,N]=d.useState(null),[k,E]=d.useState(null),[T,R]=d.useState([]),[$,oe]=d.useState([]),[W,P]=d.useState([]),[J,he]=d.useState(!1),[me,I]=d.useState(!n),[Y,_]=d.useState(null),[G,H]=d.useState(!1),[be,ve]=d.useState(!1),[He,ye]=d.useState(!1),[K,ke]=d.useState(null),[ie,se]=d.useState([]),Ie=d.useRef(null),Ee=d.useRef(null),We=z=>{var ue;const Z=(ue=z.target.files)==null?void 0:ue[0];if(!Z)return;const ne=new FileReader;ne.onload=qe=>p(qe.target.result||""),ne.readAsText(Z),z.target.value=""},V=z=>{_(z),setTimeout(()=>_(null),2500)},U=async z=>{const Z=z==="human"?j:k;if(!Z){V("");return}try{const ne=await B(`/api/core-blocks/${Z}/history`);se(ne.history||[]),ke(z)}catch(ne){V("")}};d.useEffect(()=>{(async()=>{const[Z,ne]=await Promise.all([B("/api/presets").catch(()=>({presets:[]})),B("/api/world-books").catch(()=>({world_books:[]}))]);if(oe(Z.presets||[]),P(ne.world_books||[]),n)I(!1);else try{const[ue,qe]=await Promise.all([B(`/api/assistants/${t}`),B(`/api/core-blocks?assistant_id=${t}`).catch(()=>({blocks:[]}))]);a(ue.name||""),Zr(`assistant-avatar-${t}`).then(Ve=>{Ve&&c(Ve)}).catch(function(){}),p(ue.system_prompt||""),h(ue.model_preset_id||null),w(ue.summary_model_preset_id||null),b(ue.summary_fallback_preset_id||null),R(ue.rule_set_ids||[]);for(const Ve of qe.blocks||[])Ve.block_type==="human"?(m(Ve.content||""),N(Ve.id)):Ve.block_type==="persona"&&(S(Ve.content||""),E(Ve.id))}catch(ue){V(": "+ue.message)}finally{I(!1)}})()},[t,n]);const ce=z=>{var ue;const Z=(ue=z.target.files)==null?void 0:ue[0];if(!Z)return;const ne=new FileReader;ne.onload=async qe=>{const Ve=qe.target.result,Wn=`assistant-avatar-${t||"new"}`;try{await Bi(Wn,Ve),c(Ve)}catch(ln){V("")}},ne.readAsDataURL(Z),z.target.value=""},re=async()=>{if(!l.trim()){V("");return}he(!0);try{const z={name:l.trim(),avatar_url:i?`assistant-avatar-${t||"new"}`:null,system_prompt:u,model_preset_id:f,summary_model_preset_id:x,summary_fallback_preset_id:v,rule_set_ids:tx(T)};let Z=t;if(n?(Z=(await B("/api/assistants",{method:"POST",body:{name:l.trim()}})).id,i&&(await Bi(`assistant-avatar-${Z}`,i),z.avatar_url=`assistant-avatar-${Z}`),await B(`/api/assistants/${Z}`,{method:"PUT",body:z})):await B(`/api/assistants/${t}`,{method:"PUT",body:z}),j)await B(`/api/core-blocks/${j}`,{method:"PUT",body:{content:g}});else if(g.trim()){const ne=await B("/api/core-blocks",{method:"POST",body:{block_type:"human",assistant_id:Number(Z),content:g}});N(ne.id)}if(k)await B(`/api/core-blocks/${k}`,{method:"PUT",body:{content:y}});else if(y.trim()){const ne=await B("/api/core-blocks",{method:"POST",body:{block_type:"persona",assistant_id:Number(Z),content:y}});E(ne.id)}V("")}catch(z){V(": "+z.message)}finally{he(!1)}},te=[{key:"basic",label:""},{key:"about",label:"Core Blocks"},{key:"books",label:""}];return o.jsxs("div",{className:"flex h-full flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants",{replace:!0}),children:o.jsx(Nt,{size:22,style:{color:M.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:M.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:J?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:re,disabled:J,children:o.jsx(Go,{size:18,style:{color:M.accentDark}})})]}),o.jsx("div",{className:"flex shrink-0 gap-1 px-5 pb-3",children:te.map(z=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2.5 text-[13px] font-semibold transition-all",style:{background:r===z.key?M.bg:"transparent",boxShadow:r===z.key?"var(--card-shadow-sm)":"none",color:r===z.key?M.accentDark:M.textMuted},onClick:()=>s(z.key),children:z.label},z.key))}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px",children:me?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:M.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[r==="basic"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-4 flex items-center gap-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var z;return(z=Ie.current)==null?void 0:z.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:M.bg},children:i?o.jsx("img",{src:i,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[24px]",style:{color:M.accentDark},children:(l==null?void 0:l[0])||"?"})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:M.accentDark},children:o.jsx(vh,{size:9,color:"white"})})]}),o.jsx("input",{ref:Ie,type:"file",accept:"image/*",className:"hidden",onChange:ce}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),o.jsx("input",{type:"text",value:l,onChange:z=>a(z.target.value),placeholder:"",className:"w-full rounded-[12px] px-4 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})]}),o.jsxs("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var z;return(z=Ee.current)==null?void 0:z.click()},title:"",children:o.jsx(Qo,{size:13,style:{color:M.textMuted}})}),o.jsx("input",{ref:Ee,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:We}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>H(!0),title:"",children:o.jsx(ll,{size:13,style:{color:M.accentDark}})})]})]}),o.jsx("textarea",{value:u,onChange:z=>p(z.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx($a,{label:"",value:f,onChange:h,presets:$}),o.jsx($a,{label:"",value:x,onChange:w,presets:$}),o.jsx($a,{label:"",value:v,onChange:b,presets:$})]})]}),r==="about"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Id,{label:"human block",value:g,onChange:m,placeholder:" AI ...",rows:7,onExpand:()=>ve(!0),onHistory:()=>U("human")})}),o.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Id,{label:"persona block",value:y,onChange:S,placeholder:"AI ...",rows:7,onExpand:()=>ye(!0),onHistory:()=>U("persona")})})]}),r==="books"&&o.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(a0,{ruleSetIds:T,onChange:R,allBooks:W})})]})}),G&&o.jsx(Aa,{value:u,onChange:p,onClose:()=>H(!1),title:"",placeholder:"..."}),be&&o.jsx(Aa,{value:g,onChange:m,onClose:()=>ve(!1),title:"human block",placeholder:" AI ..."}),He&&o.jsx(Aa,{value:y,onChange:S,onClose:()=>ye(!1),title:"persona block",placeholder:"AI ..."}),K&&o.jsx(s0,{items:ie,currentContent:K==="human"?g:y,onApply:async z=>{const Z=K==="human"?j:k;try{await B(`/api/core-blocks/${Z}`,{method:"PUT",body:{content:z}}),K==="human"?m(z):S(z),V("")}catch(ne){V("")}},onDelete:async z=>{try{await B(`/api/core-blocks/history/${z}`,{method:"DELETE"}),se(Z=>Z.filter(ne=>ne.id!==z)),V("")}catch(Z){V("")}},onClose:()=>ke(null)}),Y&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:Y})})]})}const xe={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function Fa({icon:e,label:t,hint:n,onClick:r}){return o.jsxs("button",{className:"flex w-full items-center gap-4 px-4 py-4",onClick:r,children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:xe.bg},children:e}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:xe.text},children:t}),n&&o.jsx("div",{className:"text-[11px]",style:{color:xe.textMuted},children:n})]}),o.jsx(Vr,{size:16,style:{color:xe.textMuted}})]})}function Od(){return o.jsx("div",{className:"mx-4 h-px",style:{background:"rgba(136,136,160,0.15)"}})}function Pl({value:e,onChange:t,min:n,max:r}){const[s,l]=d.useState(String(e));d.useEffect(()=>l(String(e)),[e]);const a=()=>{let i=parseInt(s);isNaN(i)&&(i=n),i=Math.max(n,Math.min(r,i)),l(String(i)),t(i)};return o.jsx("input",{type:"number",value:s,onChange:i=>l(i.target.value),onBlur:a,onKeyDown:i=>i.key==="Enter"&&a(),className:"w-20 rounded-[10px] py-2 text-center text-[14px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:xe.bg,color:xe.text},min:n,max:r})}function i0(){const e=zt(),[t,n]=d.useState(()=>parseInt(localStorage.getItem("telegram_buffer_seconds")||"15")),[r,s]=d.useState(8),[l,a]=d.useState(8e3),[i,c]=d.useState(16e3),[u,p]=d.useState(!1),[f,h]=d.useState(!1),[x,w]=d.useState(null),v=g=>{w(g),setTimeout(()=>w(null),2e3)};d.useEffect(()=>{B("/api/settings/context-budget").then(g=>{a(g.retain_budget),c(g.trigger_threshold),p(!0)}).catch(()=>p(!0))},[]),d.useEffect(()=>{localStorage.setItem("telegram_buffer_seconds",String(t)),B("/api/settings/buffer-seconds",{method:"PUT",body:{seconds:t}}).catch(()=>{})},[t]),d.useEffect(()=>{B("/api/settings/short-msg-max").then(g=>s(g.max_count||8)).catch(()=>{})},[]),d.useEffect(()=>{B("/api/settings/short-msg-max",{method:"PUT",body:{max_count:r}}).catch(()=>{})},[r]);const b=async()=>{h(!0);try{await B("/api/settings/context-budget",{method:"PUT",body:{retain_budget:l,trigger_threshold:i}}),v("")}catch(g){v("")}finally{h(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:xe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:xe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Nt,{size:22,style:{color:xe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:xe.text},children:""}),o.jsx("div",{className:"w-10"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px space-y-4",children:[o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:xe.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(Fa,{icon:o.jsx(Kv,{size:18,style:{color:xe.text}}),label:"API ",hint:"  ",onClick:()=>e("/settings/api")}),o.jsx(Od,{}),o.jsx(Fa,{icon:o.jsx(Xv,{size:18,style:{color:xe.textMuted}}),label:"",hint:"",onClick:()=>v("")})]}),o.jsx("div",{className:"rounded-[20px] overflow-hidden",style:{background:xe.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Fa,{icon:o.jsx(Vv,{size:18,style:{color:xe.text}}),label:"",hint:" AI ",onClick:()=>e("/settings/proactive")})}),o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:xe.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:xe.bg},children:o.jsx(qv,{size:18,style:{color:xe.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:xe.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:xe.textMuted},children:" ()"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Pl,{value:t,onChange:n,min:1,max:120}),o.jsx("span",{className:"text-[12px]",style:{color:xe.textMuted},children:""})]})]}),o.jsx(Od,{}),o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:xe.bg},children:o.jsx(Bv,{size:18,style:{color:xe.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:xe.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:xe.textMuted},children:""})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Pl,{value:r,onChange:s,min:2,max:20}),o.jsx("span",{className:"text-[12px]",style:{color:xe.textMuted},children:""})]})]})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:xe.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:xe.bg},children:o.jsx($v,{size:18,style:{color:xe.text}})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:xe.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:xe.textMuted},children:""})]})]}),u?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:xe.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:xe.textMuted},children:" token "})]}),o.jsx(Pl,{value:l,onChange:a,min:1e3,max:1e5})]}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:xe.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:xe.textMuted},children:""})]}),o.jsx(Pl,{value:i,onChange:c,min:1e3,max:2e5})]}),o.jsx("button",{className:"w-full rounded-[14px] py-3 text-[14px] font-bold text-white",style:{background:f?"rgba(201,98,138,0.5)":"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"3px 3px 8px rgba(201,98,138,0.3)"},onClick:b,disabled:f,children:f?"...":""})]}):o.jsx("div",{className:"flex justify-center py-4",children:o.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2",style:{borderColor:xe.accent,borderTopColor:"transparent"}})})]})]}),x&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:x})})]})}const F={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},c0=["claude-opus-4-6","claude-opus-4-5-20251101","claude-sonnet-4-6","claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001"];function u0(e){try{return new URL(e).hostname}catch(t){return e}}function $d({label:e,value:t,onChange:n,placeholder:r,password:s,disabled:l}){const[a,i]=d.useState(!1);return o.jsxs("div",{className:"mb-4",children:[e&&o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:F.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:s&&!a?"password":"text",value:t,onChange:c=>n(c.target.value),placeholder:r,disabled:l,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none pr-12",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:l?F.textMuted:F.text,opacity:l?.5:1}}),s&&o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>i(!a),children:a?o.jsx(Fv,{size:16,style:{color:F.textMuted}}):o.jsx(Av,{size:16,style:{color:F.textMuted}})})]})]})}function d0({value:e,onChange:t,options:n}){return o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:F.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[12px] font-semibold transition-all",style:{background:e===r.value?F.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?F.accentDark:F.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})}function f0({value:e,onChange:t,options:n,placeholder:r}){const[s,l]=d.useState(!1),a=d.useRef(null);return d.useEffect(()=>{if(!s)return;const i=c=>{a.current&&!a.current.contains(c.target)&&l(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[s]),o.jsxs("div",{className:"relative",ref:a,children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:e?F.text:F.textMuted},onClick:()=>l(!s),children:[o.jsx("span",{className:"truncate",children:e||r||""}),o.jsx(dr,{size:16,style:{color:F.textMuted,flexShrink:0,transform:s?"rotate(180deg)":"none"}})]}),s&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:F.bg,boxShadow:"var(--card-shadow)"},children:n.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[13px]",style:{color:F.text},onClick:()=>{t(i),l(!1)},children:[o.jsx("span",{className:"truncate",children:i}),i===e&&o.jsx(or,{size:12,style:{color:F.accentDark,flexShrink:0}})]},i))})]})}function p0({value:e,onChange:t}){const[n,r]=d.useState(!1),s=d.useRef(null);return d.useEffect(()=>{if(!n)return;const l=a=>{s.current&&!s.current.contains(a.target)&&r(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[n]),o.jsxs("div",{className:"relative",ref:s,children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"",value:e,onChange:l=>t(l.target.value),className:"w-full rounded-[14px] px-4 py-3 pr-10 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:F.text}}),o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>r(!n),children:o.jsx(dr,{size:16,style:{color:F.textMuted}})})]}),n&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:F.bg,boxShadow:"var(--card-shadow)"},children:c0.map(l=>o.jsx("button",{className:"flex w-full px-4 py-3 text-left text-[13px]",style:{color:F.text},onClick:()=>{t(l),r(!1)},children:l},l))})]})}function Ba({value:e,onChange:t,min:n,max:r,step:s}){const[l,a]=d.useState(String(e));d.useEffect(()=>a(String(e)),[e]);const i=()=>{let c=parseFloat(l);isNaN(c)&&(c=n),c=Math.max(n,Math.min(r,c)),c=Math.round(c/s)*s,c=parseFloat(c.toFixed(4)),a(String(c)),t(c)};return o.jsx("input",{type:"number",value:l,onChange:c=>a(c.target.value),onBlur:i,onKeyDown:c=>c.key==="Enter"&&i(),step:s,min:n,max:r,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:F.text}})}function Ad({on:e,onToggle:t}){return o.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":F.bg,transition:"background 0.2s"},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function Ua({children:e,className:t=""}){return o.jsx("div",{className:`rounded-[20px] p-5 mb-4 space-y-4 ${t}`,style:{background:F.bg,boxShadow:"var(--card-shadow)"},children:e})}function h0(){const e=zt(),[t,n]=d.useState([]),[r,s]=d.useState([]),[l,a]=d.useState(!0),[i,c]=d.useState(""),[u,p]=d.useState(""),[f,h]=d.useState("api_key"),[x,w]=d.useState(""),[v,b]=d.useState([]),[g,m]=d.useState(!1),[y,S]=d.useState(1),[j,N]=d.useState(!1),[k,E]=d.useState(1),[T,R]=d.useState(!1),[$,oe]=d.useState(4096),[W,P]=d.useState(null),[J,he]=d.useState(0),[me,I]=d.useState(null),[Y,_]=d.useState(!1),[G,H]=d.useState(!1),[be,ve]=d.useState(""),[He,ye]=d.useState(!1),[K,ke]=d.useState(!1),[ie,se]=d.useState(null),[Ie,Ee]=d.useState(null),[We,V]=d.useState(""),U=d.useRef(null),ce=d.useRef(!1),re=d.useRef(null),te=d.useRef({});te.current={baseUrl:i,apiKey:u,authType:f,modelName:x,temperature:y,tempEnabled:j,topP:k,topPEnabled:T,maxTokens:$,thinkingBudget:J,editingPreset:W,providers:t};const z=d.useCallback(L=>{I(L),setTimeout(()=>I(null),2500)},[]),Z=d.useCallback(async()=>{try{const[L,ge]=await Promise.all([B("/api/providers"),B("/api/presets")]);n(L.providers||[]),s(ge.presets||[])}catch(L){z(": "+L.message)}finally{a(!1)}},[z]);d.useEffect(()=>{Z()},[Z]);const ne=L=>{var ae,_e;P(L),w(L.model_name),N(L.temperature!=null),S((ae=L.temperature)!=null?ae:1),R(L.top_p!=null),E((_e=L.top_p)!=null?_e:1),oe(L.max_tokens),he(L.thinking_budget||0);const ge=t.find(vt=>vt.id===L.api_provider_id);ge&&(c(ge.base_url),p(ge.api_key),h(ge.auth_type||"api_key"))},ue=()=>{P(null),c(""),p(""),h("api_key"),w(""),S(1),N(!1),E(1),R(!1),oe(4096),he(0),b([])},qe=async()=>{if(!i.trim()||!u.trim()){z(" API  Key");return}m(!0);try{const L=await fetch(`${i.trim().replace(/\/+$/,"")}/models`,{headers:{Authorization:`Bearer ${u.trim()}`}});if(!L.ok)throw new Error(`HTTP ${L.status}`);const ae=((await L.json()).data||[]).map(_e=>_e.id).sort();b(ae),z(ae.length?` ${ae.length} `:"")}catch(L){z(": "+L.message)}finally{m(!1)}},Ve=async()=>{var L;if(!i.trim()||!u.trim()||!x.trim()){z(" API Key ");return}_(!0);try{const ge=i.trim().replace(/\/+$/,""),ae={"Content-Type":"application/json",Authorization:`Bearer ${u.trim()}`};f==="oauth_token"&&(ae["anthropic-beta"]="claude-code-20250219,oauth-2025-04-20,fine-grained-tool-streaming-2025-05-14",ae["anthropic-dangerous-direct-browser-access"]="true",ae["x-app"]="cli");const _e=await fetch(`${ge}/chat/completions`,{method:"POST",headers:ae,body:JSON.stringify({model:x.trim(),max_tokens:10,messages:[{role:"user",content:"Hi"}]})});if(!_e.ok){const vt=await _e.json().catch(()=>({}));throw new Error(((L=vt.error)==null?void 0:L.message)||`HTTP ${_e.status}`)}z(" ")}catch(ge){z(": "+ge.message)}finally{_(!1)}},Wn=async L=>{const ge=te.current,ae=ge.baseUrl.trim(),_e=ge.apiKey.trim(),vt=ge.authType,yn=L.find(rs=>rs.base_url===ae);return yn?((yn.api_key!==_e||yn.auth_type!==vt)&&await B(`/api/providers/${yn.id}`,{method:"PUT",body:{api_key:_e,auth_type:vt}}),yn.id):(await B("/api/providers",{method:"POST",body:{name:u0(ae),base_url:ae,api_key:_e,auth_type:vt}})).id},ln=async(L,ge)=>{const ae=te.current;if(!ae.baseUrl.trim()||!ae.apiKey.trim()||!ae.modelName.trim()){z("");return}ke(!0);try{const _e=await Wn(ae.providers),vt={name:L,model_name:ae.modelName.trim(),temperature:ae.tempEnabled?ae.temperature:null,top_p:ae.topPEnabled?ae.topP:null,max_tokens:Number(ae.maxTokens)||4096,thinking_budget:Number(ae.thinkingBudget)||0,api_provider_id:_e};ae.editingPreset&&!ge?(await B(`/api/presets/${ae.editingPreset.id}`,{method:"PUT",body:vt}),z("")):(await B("/api/presets",{method:"POST",body:vt}),z("")),await Z()}catch(_e){z(": "+_e.message)}finally{ke(!1)}},Ct=()=>{const L=be.trim();L&&(H(!1),ln(L,He))},qt=()=>{W&&ln(W.name,!1)},Jt=async()=>{if(ie){try{await B(`/api/presets/${ie.id}`,{method:"DELETE"}),z(""),(W==null?void 0:W.id)===ie.id&&ue(),Z()}catch(L){z(": "+L.message)}se(null)}},Vn=async()=>{const L=We.trim();if(!(!L||!Ie)){try{await B(`/api/presets/${Ie.id}`,{method:"PUT",body:{name:L}}),z(""),Z()}catch(ge){z("")}Ee(null)}},Et=(L,ge)=>{ce.current=!1;const ae=L.touches?L.touches[0]:L;re.current={x:ae.clientX,y:ae.clientY},U.current=setTimeout(()=>{ce.current=!0,se(ge)},600)},Xn=L=>{if(!re.current||!U.current)return;const ge=L.touches?L.touches[0]:L,ae=ge.clientX-re.current.x,_e=ge.clientY-re.current.y;ae*ae+_e*_e>100&&(clearTimeout(U.current),U.current=null)},fr=()=>clearTimeout(U.current);return o.jsxs("div",{className:"flex h-full flex-col",style:{background:F.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:o.jsx(Nt,{size:22,style:{color:F.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:F.text},children:"API "}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px",children:l?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:F.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs(Ua,{children:[o.jsx($d,{label:"API ",value:i,onChange:c,placeholder:"https://api.openai.com/v1",disabled:f==="oauth_token"}),o.jsx($d,{label:"API Key",value:u,onChange:p,placeholder:f==="oauth_token"?"sk-ant-oat01-...":"sk-...",password:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:F.textMuted},children:""}),o.jsx(d0,{value:f,onChange:L=>{h(L),L==="oauth_token"&&c("https://api.anthropic.com/v1")},options:[{value:"api_key",label:" API Key"},{value:"oauth_token",label:"Setup Token"}]})]})]}),o.jsxs(Ua,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:F.textMuted},children:""}),f==="oauth_token"?o.jsx(p0,{value:x,onChange:w}):o.jsx(f0,{value:x,onChange:w,options:v})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text},onClick:Ve,disabled:Y,children:[Y?o.jsx(vd,{size:14,className:"animate-spin"}):null,""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text,opacity:f==="oauth_token"?.4:1},onClick:qe,disabled:g||f==="oauth_token",children:[g?o.jsx(vd,{size:14,className:"animate-spin"}):o.jsx(Uc,{size:14}),""]})]})]}),o.jsxs(Ua,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:F.text},children:" (0-2)"}),o.jsx("div",{className:"text-[11px]",style:{color:F.textMuted},children:""})]}),o.jsx(Ad,{on:j,onToggle:()=>N(!j)})]}),j&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:F.textMuted},children:""}),o.jsx(Ba,{value:y,onChange:S,min:0,max:2,step:.1})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:F.text},children:"Top P (0-1)"}),o.jsx(Ad,{on:T,onToggle:()=>R(!T)})]}),T&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:F.textMuted},children:""}),o.jsx(Ba,{value:k,onChange:E,min:0,max:1,step:.05})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:F.text},children:"Max Tokens"}),o.jsx(Ba,{value:$,onChange:oe,min:128,max:2e5,step:1})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:F.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:F.textMuted},children:"Extended Thinking tokens"})]}),o.jsxs("select",{className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none appearance-none",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:F.text,WebkitAppearance:"none",textAlignLast:"center"},value:J,onChange:L=>he(Number(L.target.value)),children:[o.jsx("option",{value:0,children:""}),o.jsx("option",{value:1024,children:"1024"}),o.jsx("option",{value:2048,children:"2048"}),o.jsx("option",{value:4096,children:"4096"}),o.jsx("option",{value:8192,children:"8192"}),o.jsx("option",{value:16384,children:"16384"})]})]})]}),o.jsxs("div",{className:"mb-4 space-y-3",children:[W?o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:qt,disabled:K,children:[o.jsx(Go,{size:14}),K?"...":""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text},onClick:()=>{ye(!0),ve(""),H(!0)},disabled:K,children:[o.jsx(Ov,{size:14}),""]})]}):o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>{ye(!0),ve(""),H(!0)},disabled:K,children:[o.jsx(qr,{size:14}),""]}),W&&o.jsx("button",{className:"w-full py-1 text-center text-[12px]",style:{color:F.textMuted},onClick:ue,children:""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"mb-3 text-[12px] font-bold uppercase tracking-wide",style:{color:F.textMuted},children:""}),r.length===0?o.jsx("div",{className:"rounded-[20px] py-8 text-center text-[13px]",style:{background:F.bg,boxShadow:"var(--card-shadow)",color:F.textMuted},children:""}):o.jsx("div",{className:"space-y-3",children:r.map(L=>{var ge,ae;return o.jsxs("div",{className:"rounded-[18px] p-4",style:{background:F.bg,boxShadow:(W==null?void 0:W.id)===L.id?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{ce.current||ne(L)},onTouchStart:_e=>Et(_e,L),onTouchMove:Xn,onTouchEnd:fr,onMouseDown:_e=>Et(_e,L),onMouseMove:Xn,onMouseUp:fr,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-[14px] font-bold truncate",style:{color:(W==null?void 0:W.id)===L.id?F.accentDark:F.text},children:L.name}),o.jsx(wh,{size:12,style:{color:F.textMuted,flexShrink:0,marginLeft:8}})]}),o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:F.textMuted},children:L.model_name}),o.jsxs("div",{className:"mt-1 text-[10px] font-mono",style:{color:F.textMuted},children:["T: ",(ge=L.temperature)!=null?ge:""," | Top-P: ",(ae=L.top_p)!=null?ae:""," | Max: ",L.max_tokens,L.thinking_budget?` | Think: ${L.thinking_budget}`:""]})]},L.id)})})]})]})}),G&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>H(!1),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:F.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:L=>L.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:F.text},children:""}),o.jsx("input",{type:"text",value:be,onChange:L=>ve(L.target.value),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:F.text},autoFocus:!0,onKeyDown:L=>L.key==="Enter"&&Ct()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text},onClick:()=>H(!1),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:be.trim()?"linear-gradient(135deg, var(--accent), var(--accent-dark))":"rgba(201,98,138,0.3)"},onClick:Ct,disabled:!be.trim(),children:""})]})]})}),ie&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>se(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:F.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:L=>L.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:F.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:F.textMuted},children:["",ie.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text},onClick:()=>se(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:Jt,children:""})]})]})}),Ie&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>Ee(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:F.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:L=>L.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:F.text},children:""}),o.jsx("input",{autoFocus:!0,type:"text",value:We,onChange:L=>V(L.target.value),className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:F.text},onKeyDown:L=>L.key==="Enter"&&Vn()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text},onClick:()=>Ee(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))"},onClick:Vn,children:""})]})]})}),me&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:me})})]})}const pt={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function Ha({on:e,onToggle:t,disabled:n}){return o.jsx("button",{onClick:()=>!n&&t(),className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":pt.bg,transition:"background 0.2s",opacity:n?.4:1,cursor:n?"not-allowed":"pointer"},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function xs({label:e,hint:t,value:n,onChange:r,min:s,max:l,step:a=1,disabled:i}){const[c,u]=d.useState(String(n));d.useEffect(()=>u(String(n)),[n]);const p=()=>{let f=parseFloat(c);isNaN(f)&&(f=s),f=Math.max(s,Math.min(l,f)),f=Math.round(f/a)*a,f=parseFloat(f.toFixed(a<1?1:0)),u(String(f)),r(f)};return o.jsxs("div",{className:"flex items-center justify-between",style:{opacity:i?.4:1,pointerEvents:i?"none":"auto"},children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:pt.text},children:e}),t&&o.jsx("div",{className:"text-[11px]",style:{color:pt.textMuted},children:t})]}),o.jsx("input",{type:"number",value:c,onChange:f=>u(f.target.value),onBlur:p,onKeyDown:f=>f.key==="Enter"&&p(),step:a,min:s,max:l,disabled:i,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:pt.bg,color:pt.text}})]})}function Wa({children:e}){return o.jsx("div",{className:"rounded-[20px] p-5 mb-4 space-y-4",style:{background:pt.bg,boxShadow:"var(--card-shadow)"},children:e})}function Va(){return o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}})}function x0(){const e=zt(),[t,n]=d.useState(!0),[r,s]=d.useState({enabled:!1,interval:30,min_gap:30,retry_enabled:!0,retry_gap:1.5,max_retries:8,voice_enabled:!1,voice_chance:30}),[l,a]=d.useState(null),i=d.useRef(null),c=d.useCallback(f=>{a(f),setTimeout(()=>a(null),2e3)},[]);d.useEffect(()=>{(async()=>{try{const f=await B("/api/settings/proactive");s(f)}catch(f){c(": "+f.message)}finally{n(!1)}})()},[c]);const u=d.useCallback(f=>{s(h=>({...h,...f})),i.current&&clearTimeout(i.current),i.current=setTimeout(async()=>{try{await B("/api/settings/proactive",{method:"PUT",body:f})}catch(h){c(": "+h.message)}},300)},[c]),p=!r.enabled;return o.jsxs("div",{className:"flex h-full flex-col",style:{background:pt.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:pt.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:o.jsx(Nt,{size:22,style:{color:pt.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:pt.text},children:""}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px",children:t?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:pt.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs(Wa,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:pt.text},children:""}),o.jsx(Ha,{on:r.enabled,onToggle:()=>u({enabled:!r.enabled})})]}),o.jsx(Va,{}),o.jsx(xs,{label:" ()",hint:"",value:r.interval,onChange:f=>u({interval:f}),min:10,max:60,disabled:p}),o.jsx(xs,{label:" ()",hint:"",value:r.min_gap,onChange:f=>u({min_gap:f}),min:15,max:120,disabled:p})]}),o.jsxs(Wa,{children:[o.jsxs("div",{className:"flex items-center justify-between",style:{opacity:p?.4:1,pointerEvents:p?"none":"auto"},children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:pt.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:pt.textMuted},children:" = "})]}),o.jsx(Ha,{on:r.retry_enabled,onToggle:()=>u({retry_enabled:!r.retry_enabled}),disabled:p})]}),o.jsx(Va,{}),o.jsx(xs,{label:" ()",value:r.retry_gap,onChange:f=>u({retry_gap:f}),min:.5,max:4,step:.1,disabled:p||!r.retry_enabled}),o.jsx(xs,{label:"",value:r.max_retries,onChange:f=>u({max_retries:f}),min:1,max:15,disabled:p||!r.retry_enabled})]}),o.jsxs(Wa,{children:[o.jsxs("div",{className:"flex items-center justify-between",style:{opacity:p?.4:1,pointerEvents:p?"none":"auto"},children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:pt.text},children:""}),o.jsx(Ha,{on:r.voice_enabled,onToggle:()=>u({voice_enabled:!r.voice_enabled}),disabled:p})]}),o.jsx(Va,{}),o.jsx(xs,{label:" (%)",value:r.voice_chance,onChange:f=>u({voice_chance:f}),min:0,max:100,disabled:p||!r.voice_enabled})]})]})}),l&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:l})})]})}const de={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},sa={thinking:{bg:"rgba(168,130,200,0.12)",color:"#8860c8",label:""},tool_use:{bg:"rgba(232,160,60,0.12)",color:"#b8820a",label:""},tool_result:{bg:"rgba(80,160,200,0.12)",color:"#1a7ab0",label:""},injected_memories:{bg:"rgba(80,180,120,0.12)",color:"#3a8a5f",label:""}},Fd=[{key:"short",label:""},{key:"long",label:""}],m0=[{key:"happy",label:""},{key:"sad",label:""},{key:"angry",label:""},{key:"anxious",label:""},{key:"tired",label:""},{key:"emo",label:""},{key:"flirty",label:""},{key:"proud",label:""},{key:"calm",label:""}],Bd=300;function Gc({block_type:e}){const t=sa[e]||{bg:"rgba(136,136,160,0.1)",color:de.textMuted,label:e};return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:t.bg,color:t.color},children:t.label})}function nx({content:e}){const[t,n]=d.useState(!1),r=e.length>Bd;return o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:de.text},children:r&&!t?e.slice(0,Bd)+"...":e}),r&&o.jsx("div",{className:"mt-1.5 flex justify-center",children:o.jsx("button",{className:"rounded-full px-3 py-0.5 text-[11px]",style:{color:de.accentDark,background:"rgba(232,160,191,0.12)"},onClick:s=>{s.stopPropagation(),n(!t)},children:t?"":""})})]})}function g0({block:e,cacheKey:t,translateCache:n}){const r=n.current.get(t),[s,l]=d.useState(r||null),[a,i]=d.useState(!!r),[c,u]=d.useState(!1),p=sa.thinking,f=async h=>{if(h.stopPropagation(),s){i(!a);return}u(!0);try{const x=await B("/api/cot/translate",{method:"POST",body:{text:e.content}});l(x.translated),i(!0),n.current.set(t,x.translated)}catch(x){console.error("Translation failed:",x),alert("")}finally{u(!1)}};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:p.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(Gc,{block_type:"thinking"}),o.jsx("span",{className:"flex-1"}),o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#1a7ab0",background:"rgba(80,160,200,0.15)"},onClick:f,disabled:c,children:c?"...":a?"":""})]}),o.jsx(nx,{content:a&&s?s:e.content})]})}function v0({avatarUrl:e}){return o.jsx("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full overflow-hidden",style:{boxShadow:"var(--icon-inset)",background:de.bg},children:e?o.jsx("img",{src:e,alt:"",className:"h-full w-full object-cover"}):o.jsx("span",{style:{fontSize:16},children:""})})}function Ud(e){return e?e>=1e3?`${(e/1e3).toFixed(1)}k`:String(e):"0"}function y0(e){if(!e)return null;const t=e/1e3;return t>=100?`${Math.round(t)}s`:`${t.toFixed(1)}s`}function w0({prompt:e,completion:t,elapsedMs:n,hasToolCalls:r,cacheHit:s}){if(!(e||t||n)&&!r)return null;const a=s?"rgba(220,120,160,0.12)":"rgba(80,160,120,0.12)",i=s?"#d478a0":"#3a8a5f";return o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:a,color:i},children:["",Ud(e)]}),o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(160,100,220,0.12)",color:"#8a5abf"},children:["",Ud(t)]}),n?o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(200,140,60,0.12)",color:"#b8820a"},children:y0(n)}):null]})}function b0(e){const t=[],n=[],r=[],s=[];for(const a of e)a.block_type==="thinking"?t.push(a):a.block_type==="tool_use"?n.push(a):a.block_type==="tool_result"?r.push(a):s.push(a);const l=[];for(let a=0;a<n.length;a++)l.push(n[a]),a<r.length&&l.push(r[a]);for(let a=n.length;a<r.length;a++)l.push(r[a]);return[...t,...l,...s]}function k0({memories:e}){const[t,n]=d.useState(!1);if(!e||e.length===0)return null;const r=sa.injected_memories;return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:r.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-2",onClick:()=>n(!t),children:[o.jsx(Gc,{block_type:"injected_memories"}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:r.color},children:["(",e.length,")"]}),t?o.jsx(yh,{size:12,style:{color:r.color}}):o.jsx(dr,{size:12,style:{color:r.color}})]}),t&&o.jsx("div",{className:"mt-2 space-y-1",children:e.map(s=>o.jsxs("p",{className:"text-[11px] leading-relaxed",style:{color:de.text},children:[o.jsxs("span",{style:{color:r.color,fontWeight:600},children:["#",s.id]})," ",s.content]},s.id))})]})}function j0({item:e,expanded:t,onToggle:n,live:r,avatarUrl:s,translateCache:l}){const a=e.rounds.map(c=>({...c,blocks:b0(c.blocks.filter(u=>u.block_type!=="text"&&u.block_type!=="usage"))})).filter(c=>c.blocks.length>0),i=a.length>0||e.injectedMemories&&e.injectedMemories.length>0||r&&e.textPreview;return o.jsxs("div",{className:"rounded-[18px] overflow-hidden",style:{background:de.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-3 p-4",onClick:n,children:[o.jsx(v0,{avatarUrl:s}),o.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r&&o.jsx("span",{className:"inline-block h-3 w-3 animate-spin rounded-full border-[1.5px]",style:{borderColor:de.accentDark,borderTopColor:"transparent"}}),e.has_tool_calls&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold",style:{background:"rgba(232,160,60,0.15)",color:"#b8820a"},children:""}),o.jsx(w0,{prompt:e.prompt_tokens||0,completion:e.completion_tokens||0,elapsedMs:e.elapsed_ms||0,hasToolCalls:e.has_tool_calls,cacheHit:e.cache_hit}),o.jsx("span",{className:"text-[10px]",style:{color:de.textMuted},children:e.created_at||""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[13px]",style:{color:de.text},children:e.preview||"()"})]}),t?o.jsx(yh,{size:16,style:{color:de.textMuted,flexShrink:0}}):o.jsx(dr,{size:16,style:{color:de.textMuted,flexShrink:0}})]}),t&&i&&o.jsxs("div",{className:"px-4 pb-4",children:[o.jsx(k0,{memories:e.injectedMemories}),a.map(c=>o.jsxs("div",{className:"mb-3",children:[a.length>1&&o.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:de.textMuted},children:[" ",c.round_index+1]}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}})]}),c.blocks.map((u,p)=>{if(u.block_type==="thinking")return o.jsx(g0,{block:u,cacheKey:`${e.request_id}:${c.round_index}:${p}`,translateCache:l},p);const f=sa[u.block_type]||{bg:"rgba(136,136,160,0.08)",color:de.textMuted,label:u.block_type};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:f.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(Gc,{block_type:u.block_type}),u.tool_name&&o.jsx("span",{className:"text-[10px] font-mono",style:{color:f.color},children:u.tool_name})]}),o.jsx(nx,{content:u.content})]},p)})]},c.round_index)),r&&e.textPreview&&o.jsxs("div",{className:"rounded-[12px] p-3",style:{background:"rgba(232,160,191,0.08)"},children:[o.jsx("div",{className:"mb-1",children:o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(232,160,191,0.15)",color:de.accentDark},children:""})}),o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:de.text},children:e.textPreview})]})]})]})}function S0(){var Y;const e=zt(),[t,n]=d.useState([]),[r,s]=d.useState(!0),[l,a]=d.useState(new Set),[i,c]=d.useState(()=>localStorage.getItem("chat_mode")||"long"),[u,p]=d.useState(null),[f,h]=d.useState(!1),[x,w]=d.useState(new Set),[v,b]=d.useState(null),[g,m]=d.useState(null),y=d.useRef(null),S=d.useRef(new Map),[j,N]=d.useState(null),[k,E]=d.useState(!1),T=d.useRef(null),R=d.useRef(new Set),$=d.useRef(!1),oe=d.useRef([]),[W,P]=d.useState(()=>localStorage.getItem("whisper_token")),J=d.useRef(null),he=()=>{s(!0),b(null),$.current=!1,B("/api/cot?limit=100").then(_=>{n(Array.isArray(_)?_:[]),$.current=!0;const G=oe.current;if(oe.current=[],G.length>0&&J.current)for(const H of G)J.current(H)}).catch(_=>{console.error("COT load error:",_),b(_.message||""),$.current=!0}).finally(()=>{s(!1);const _=localStorage.getItem("whisper_token");_&&_!==W&&P(_)})};d.useEffect(()=>{he()},[]),d.useEffect(()=>{B("/api/sessions?limit=1").then(_=>{var H;const G=(H=_.sessions)==null?void 0:H[0];G!=null&&G.assistant_id&&Zr(`assistant-avatar-${G.assistant_id}`).then(be=>{be&&m(be)}).catch(()=>{})}).catch(()=>{})},[]),d.useEffect(()=>{B("/api/settings/mood").then(_=>N(_.mood||"calm")).catch(()=>N("calm"))},[]),d.useEffect(()=>{if(!k)return;const _=G=>{T.current&&!T.current.contains(G.target)&&E(!1)};return document.addEventListener("pointerdown",_),()=>document.removeEventListener("pointerdown",_)},[k]),d.useEffect(()=>{if(!W){console.log("[COT WS] No token yet, waiting...");return}const G=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/cot?token=${encodeURIComponent(W)}`;console.log("[COT WS] Connecting to",G);let H,be,ve=!1;const He=()=>{if(ve)return;H=new WebSocket(G),y.current=H,H.onopen=()=>{console.log("[COT WS] Connected"),h(!0)};const ye=K=>{var We;const{type:ke,request_id:ie}=K,se=V=>{const U=V.findIndex(z=>z.request_id===ie);return U>=0?[V,U]:[[{request_id:ie,created_at:new Date().toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),preview:"...",has_tool_calls:!1,rounds:[],injectedMemories:[],textPreview:""},...V],0]},Ie=(V,U)=>{const ce=V.findIndex(te=>te.round_index===U);if(ce>=0)return[V,ce];const re=[...V,{round_index:U,blocks:[]}];return re.sort((te,z)=>te.round_index-z.round_index),[re,re.findIndex(te=>te.round_index===U)]},Ee=V=>{R.current.has(V)||a(U=>{if(U.has(V))return U;const ce=new Set(U);return ce.add(V),ce})};if(ke==="tokens_update"){n(V=>V.map(U=>U.request_id===ie?{...U,prompt_tokens:K.prompt_tokens||0,completion_tokens:K.completion_tokens||0,cache_hit:K.cache_hit||!1}:U));return}if(ke==="replay_snapshot"){console.log("[COT] replay_snapshot",ie,"thinking_rounds:",(We=K.rounds)==null?void 0:We.length,"text_len:",(K.text_preview||"").length),n(V=>{let[U,ce]=se(V);U=[...U];const re={...U[ce]};if(K.rounds)for(const te of K.rounds){if(!te.thinking)continue;let[z,Z]=Ie([...re.rounds],te.round_index);const ne={...z[Z],blocks:[...z[Z].blocks]},ue=ne.blocks.findIndex(qe=>qe.block_type==="thinking");ue>=0?te.thinking.length>ne.blocks[ue].content.length&&(ne.blocks[ue]={...ne.blocks[ue],content:te.thinking}):ne.blocks.push({block_type:"thinking",content:te.thinking,tool_name:null}),z[Z]=ne,re.rounds=z}return K.text_preview&&K.text_preview.length>(re.textPreview||"").length&&(re.textPreview=K.text_preview,(!re.preview||re.preview==="...")&&(re.preview=K.text_preview.slice(0,80))),K.injected_memories&&(re.injectedMemories=K.injected_memories),K.prompt_tokens&&(re.prompt_tokens=K.prompt_tokens),K.completion_tokens&&(re.completion_tokens=K.completion_tokens),K.cache_hit&&(re.cache_hit=K.cache_hit),U[ce]=re,U}),w(V=>new Set(V).add(ie)),Ee(ie);return}if(ke==="done"){w(V=>{const U=new Set(V);return U.delete(ie),U}),R.current.delete(ie),n(V=>V.map(U=>U.request_id===ie?{...U,prompt_tokens:K.prompt_tokens||0,completion_tokens:K.completion_tokens||0,elapsed_ms:K.elapsed_ms||0,cache_hit:K.cache_hit||!1,textPreview:""}:U));return}if(ke==="injected_memories"){n(V=>{let[U,ce]=se(V);return U=[...U],U[ce]={...U[ce],injectedMemories:K.memories||[]},U}),w(V=>new Set(V).add(ie)),Ee(ie);return}if(ke==="thinking_delta"){n(V=>{let[U,ce]=se(V);U=[...U];const re={...U[ce]};let[te,z]=Ie([...re.rounds],K.round_index);const Z={...te[z],blocks:[...te[z].blocks]};let ne=-1;for(let ue=Z.blocks.length-1;ue>=0;ue--)if(Z.blocks[ue].block_type==="thinking"){ne=ue;break}return ne>=0?Z.blocks[ne]={...Z.blocks[ne],content:Z.blocks[ne].content+K.content}:Z.blocks.push({block_type:"thinking",content:K.content,tool_name:null}),te[z]=Z,re.rounds=te,U[ce]=re,U}),w(V=>new Set(V).add(ie)),Ee(ie);return}if(ke==="text_delta"){n(V=>{let[U,ce]=se(V);U=[...U];const re={...U[ce]};return re.textPreview=(re.textPreview||"")+K.content,(!re.preview||re.preview==="...")&&(re.preview=re.textPreview.slice(0,80)),U[ce]=re,U}),w(V=>new Set(V).add(ie)),Ee(ie);return}if(ke==="tool_use"||ke==="tool_result"){n(V=>{let[U,ce]=se(V);U=[...U];const re={...U[ce]};let[te,z]=Ie([...re.rounds],K.round_index);return te[z]={...te[z],blocks:[...te[z].blocks,{block_type:ke,content:K.content,tool_name:K.tool_name}]},re.rounds=te,ke==="tool_use"&&(re.has_tool_calls=!0),U[ce]=re,U}),w(V=>new Set(V).add(ie)),Ee(ie);return}if(K.block_type){const{round_index:V,block_type:U,content:ce,tool_name:re}=K;n(te=>{let[z,Z]=se(te);z=[...z];const ne={...z[Z]};let[ue,qe]=Ie([...ne.rounds],V);return ue[qe]={...ue[qe],blocks:[...ue[qe].blocks,{block_type:U,content:ce,tool_name:re}]},ne.rounds=ue,U==="tool_use"&&(ne.has_tool_calls=!0),U==="text"&&(!ne.preview||ne.preview==="...")&&(ne.preview=ce.slice(0,80)),z[Z]=ne,z}),w(te=>new Set(te).add(ie)),Ee(ie)}};J.current=ye,H.onmessage=K=>{try{const ke=JSON.parse(K.data);if(!$.current){oe.current.push(ke);return}ye(ke)}catch(ke){}},H.onclose=K=>{console.log("[COT WS] Disconnected, code:",K.code,"reason:",K.reason),h(!1),y.current=null,ve||(be=setTimeout(He,3e3))},H.onerror=K=>{console.error("[COT WS] Error:",K),H.close()}};return He(),()=>{ve=!0,clearTimeout(be),y.current&&(y.current.onclose=null,y.current.close())}},[W]);const me=d.useRef(!0);d.useEffect(()=>{if(me.current){me.current=!1;return}localStorage.setItem("chat_mode",i);const _=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({..._,shortMode:i==="short"})),B("/api/settings/chat-mode",{method:"PUT",body:{mode:i}}).catch(()=>{})},[i]);const I=_=>{N(_),E(!1),B("/api/settings/mood",{method:"PUT",body:{mood:_}}).catch(()=>{})};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:de.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:de.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Nt,{size:22,style:{color:de.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:de.text},children:"COT "}),o.jsxs("div",{className:"flex items-center gap-2",children:[f&&o.jsx("div",{className:"h-2 w-2 rounded-full",style:{background:"#2a9d5c"},title:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:de.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:he,disabled:r,children:o.jsx(Uc,{size:16,style:{color:de.accentDark},className:r?"animate-spin":""})})]})]}),o.jsx("div",{className:"shrink-0 pb-3",style:{paddingLeft:20,paddingRight:20},children:o.jsxs("div",{className:"flex items-stretch gap-4 justify-center",children:[o.jsxs("div",{className:"relative flex",ref:T,children:[o.jsx("button",{className:"flex w-[42px] shrink-0 items-center justify-center rounded-[14px]",style:{background:de.bg,boxShadow:"var(--inset-shadow)"},onClick:()=>j&&E(!k),children:j?o.jsx("img",{src:`/miniapp/assets/mood/${j}.png`,alt:j,className:"h-6 w-6",style:{imageRendering:"pixelated"}}):o.jsx("div",{className:"h-6 w-6"})}),k&&o.jsx("div",{className:"absolute left-0 top-12 z-50 rounded-[16px] overflow-hidden",style:{background:de.bg,boxShadow:"var(--card-shadow-sm)",width:174},children:m0.map((_,G)=>{const H=Math.floor(G/3),be=G%3,ve=j===_.key;return o.jsxs("button",{className:"inline-flex flex-col items-center justify-center",style:{width:"calc(100% / 3)",padding:"8px 0 6px",background:ve?"rgba(232,160,191,0.18)":"transparent",boxShadow:[be<2?"inset -1px 0 0 rgba(136,136,160,0.12)":"",H<2?"inset 0 -1px 0 rgba(136,136,160,0.12)":""].filter(Boolean).join(", ")||"none"},onClick:()=>I(_.key),children:[o.jsx("img",{src:`/miniapp/assets/mood/${_.key}.png`,alt:_.label,className:"h-7 w-7",style:{imageRendering:"pixelated",filter:ve?"drop-shadow(0 0 3px #e8a0bf)":"none"}}),o.jsx("span",{className:"text-[10px] mt-0.5",style:{color:ve?"#d48aab":de.textMuted},children:_.label})]},_.key)})})]}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:de.bg,width:160},children:Fd.map(_=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:i===_.key?de.bg:"transparent",boxShadow:i===_.key?"var(--card-shadow-sm)":"none",color:i===_.key?de.accentDark:de.textMuted},onClick:()=>{_.key!==i&&p(_.key)},children:_.label},_.key))})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:de.accent,borderTopColor:"transparent"}})}):v?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(gd,{size:36,style:{color:"#ef4444",opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:"#ef4444"},children:v})]}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(gd,{size:36,style:{color:de.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:de.textMuted},children:" COT "})]}):t.map(_=>o.jsx("div",{className:"mb-3 rounded-[18px]",style:{background:de.bg,boxShadow:"var(--card-shadow-sm)"},children:o.jsx(j0,{item:_,expanded:l.has(_.request_id),onToggle:()=>{a(G=>{const H=new Set(G);return H.has(_.request_id)?(H.delete(_.request_id),R.current.add(_.request_id)):(H.add(_.request_id),R.current.delete(_.request_id)),H})},live:x.has(_.request_id),avatarUrl:g,translateCache:S})},_.request_id))}),u&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>p(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:de.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:_=>_.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:de.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:de.textMuted},children:["",((Y=Fd.find(_=>_.key===u))==null?void 0:Y.label)||u,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:de.bg,boxShadow:"var(--card-shadow-sm)",color:de.text},onClick:()=>p(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:de.accentDark,boxShadow:"4px 4px 10px rgba(201,98,138,0.4)"},onClick:()=>{c(u),p(null)},children:""})]})]})})]})}const Je={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},zl=80;function N0({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const v=Math.min(1,Math.abs(p)/zl);x.style.transition=w,x.style.opacity=`${v}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const v=Math.max(-zl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${v}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(v)/zl)}`),f.current=v},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-zl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Je.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(Jr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function C0({msg:e,roleLabel:t,roleColor:n,fmtTime:r,onDelete:s}){const[l,a]=d.useState(!1),[i,c]=d.useState(!1),u=d.useRef(null);return d.useLayoutEffect(()=>{const p=u.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e.content,l]),o.jsx(N0,{onDelete:s,children:o.jsxs("div",{className:"rounded-[18px] p-3",style:{background:Je.bg},children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:n(e.role)},children:t(e.role)}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[e.summarized&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px] font-semibold",style:{background:"rgba(58,138,95,0.15)",color:"#2d7a4a"},children:""}),o.jsx("span",{className:"text-[10px]",style:{color:Je.textMuted},children:r(e.created_at)})]})]}),o.jsx("div",{ref:u,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:Je.text}:{color:Je.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:e.content}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:"#d48aab",background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})})]})})}function E0(){const e=zt(),[t,n]=d.useState([]),[r,s]=d.useState(null),[l,a]=d.useState(!0),[i,c]=d.useState(!1),u=async()=>{var v;a(!0);try{const g=(v=(await B("/api/sessions?limit=1")).sessions)==null?void 0:v[0];if(!g){a(!1);return}s(g.id);const m=await B(`/api/sessions/${g.id}/messages?limit=50`);n((m.messages||[]).reverse()),c(m.has_more||!1)}catch(b){console.error(b)}a(!1)};d.useEffect(()=>{u()},[]);const p=async v=>{if(r)try{await B(`/api/sessions/${r}/messages/${v}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==v))}catch(b){console.error("Delete failed",b)}},f=async()=>{if(!r||!i||l)return;const v=t[t.length-1];if(v){a(!0);try{const b=await B(`/api/sessions/${r}/messages?limit=50&before_id=${v.id}`),g=(b.messages||[]).reverse();n(m=>[...m,...g]),c(b.has_more||!1)}catch(b){console.error(b)}a(!1)}},h=v=>{if(!v)return"";const b=new Date(v),g=new Date;return b.toDateString()===g.toDateString()?b.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):b.toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})},x=v=>v==="user"?"":v==="assistant"?"AI":"",w=v=>v==="user"?Je.accentDark:v==="assistant"?"#3a9b5c":Je.textMuted;return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Je.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Je.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Nt,{size:22,style:{color:Je.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Je.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Je.bg,boxShadow:l?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:u,disabled:l,children:o.jsx(Uc,{size:16,style:{color:Je.accentDark},className:l?"animate-spin":""})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("p",{className:"text-[11px]",style:{color:Je.textMuted},children:""})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l&&t.length===0?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Je.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:Je.textMuted},children:""}):o.jsxs(o.Fragment,{children:[t.map(v=>o.jsx(C0,{msg:v,roleLabel:x,roleColor:w,fmtTime:h,onDelete:()=>p(v.id)},v.id)),i&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:Je.bg,boxShadow:"var(--card-shadow-sm)",color:Je.accentDark},onClick:f,disabled:l,children:l?"...":""})]})})]})}const O={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},M0=[{key:"memories",label:""},{key:"summaries",label:""},{key:"messages",label:""}],Hd={identity:{color:"#7b5ea7",bg:"#ede4f7"},relationship:{color:"#c26a8a",bg:"#f7e0ea"},bond:{color:"#d48aab",bg:"#fce8f0"},conflict:{color:"#b5454a",bg:"#f5dede"},fact:{color:"#4a8ab5",bg:"#deedf5"},preference:{color:"#9b7a3b",bg:"#f0ebd8"},health:{color:"#4a9b6e",bg:"#ddf0e5"},task:{color:"#6b7b9b",bg:"#e0e6f0"},ephemeral:{color:"#9b9b9b",bg:"#ececec"},other:{color:"#8a7a6a",bg:"#efe8df"}},rx=[{value:"",label:""},{value:"identity",label:"identity"},{value:"relationship",label:"relationship"},{value:"bond",label:"bond"},{value:"conflict",label:"conflict"},{value:"fact",label:"fact"},{value:"preference",label:"preference"},{value:"health",label:"health"},{value:"task",label:"task"},{value:"ephemeral",label:"ephemeral"},{value:"other",label:"other"}],_0=[{value:"",label:""},{value:"sad",label:"sad"},{value:"angry",label:"angry"},{value:"anxious",label:"anxious"},{value:"tired",label:"tired"},{value:"emo",label:"emo"},{value:"happy",label:"happy"},{value:"flirty",label:"flirty"},{value:"proud",label:"proud"},{value:"calm",label:"calm"}],T0=[{value:"",label:""},{value:"user",label:""},{value:"assistant",label:""},{value:"system",label:""}];function Tr(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function qc({text:e,keyword:t}){if(!t||!e)return o.jsx(o.Fragment,{children:e});const n=e.toLowerCase(),r=t.toLowerCase(),s=[];let l=0,a=n.indexOf(r,l);for(;a!==-1;)a>l&&s.push(o.jsx("span",{children:e.slice(l,a)},l)),s.push(o.jsx("span",{style:{color:O.accentDark,fontWeight:600},children:e.slice(a,a+r.length)},`h${a}`)),l=a+r.length,a=n.indexOf(r,l);return l<e.length&&s.push(o.jsx("span",{children:e.slice(l)},l)),o.jsx(o.Fragment,{children:s})}function sx({selected:e}){return o.jsx("div",{className:"flex h-5 w-5 shrink-0 items-center justify-center rounded-full",style:e?{background:O.accentDark,boxShadow:"0 2px 6px rgba(201,98,138,0.3)"}:{background:O.bg,boxShadow:"var(--inset-shadow)"},children:e&&o.jsx(or,{size:12,color:"white",strokeWidth:3})})}function D0({message:e,onConfirm:t,onCancel:n}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:O.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:O.text},children:""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:O.textMuted},children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)",color:O.text},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function R0({initialText:e,onSave:t,onCancel:n,memoryData:r}){var h;const[s,l]=d.useState(e),[a,i]=d.useState((r==null?void 0:r.klass)||"other"),[c,u]=d.useState((((h=r==null?void 0:r.tags)==null?void 0:h.topic)||[]).join(", ")),p=!!r,f=rx.filter(x=>x.value);return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-5 w-full max-w-[340px] rounded-[18px] p-4",style:{background:O.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:x=>x.stopPropagation(),children:[o.jsx("textarea",{className:"w-full rounded-[12px] p-3 text-[12px] leading-relaxed resize-none outline-none",style:{background:O.bg,boxShadow:"var(--inset-shadow)",color:O.text,minHeight:p?100:140,maxHeight:280},value:s,onChange:x=>l(x.target.value),autoFocus:!0}),p&&o.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:O.textMuted},children:""}),o.jsxs("div",{className:"relative flex-1",children:[o.jsx("select",{className:"w-full appearance-none rounded-[10px] px-3 py-1.5 text-[11px] font-medium outline-none",style:{background:O.bg,boxShadow:"var(--inset-shadow)",color:O.text,WebkitAppearance:"none"},value:a,onChange:x=>i(x.target.value),children:f.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))}),o.jsx(dr,{size:10,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2",style:{color:O.textMuted}})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:O.textMuted},children:""}),o.jsx("input",{className:"flex-1 rounded-[10px] px-3 py-1.5 text-[11px] outline-none",style:{background:O.bg,boxShadow:"var(--inset-shadow)",color:O.text},placeholder:", ",value:c,onChange:x=>u(x.target.value)})]})]}),o.jsxs("div",{className:"mt-3 flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)",color:O.textMuted},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)",color:O.accentDark},onClick:()=>{if(p){const x=c.split(/[,]/).map(w=>w.trim()).filter(Boolean);t(s,a,{topic:x})}else t(s)},disabled:!s.trim(),children:""})]})]})})}function Wd({value:e,rawValue:t,onChange:n,options:r,width:s,active:l}){var p;const[a,i]=d.useState(!1),c=d.useRef(null);d.useEffect(()=>{if(!a)return;const f=h=>{c.current&&!c.current.contains(h.target)&&i(!1)};return document.addEventListener("mousedown",f),document.addEventListener("touchstart",f),()=>{document.removeEventListener("mousedown",f),document.removeEventListener("touchstart",f)}},[a]);const u=((p=r.find(f=>f.value===String(t)))==null?void 0:p.label)||e||"";return o.jsxs("div",{className:"relative",style:{width:s},ref:c,children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[12px] px-2.5 py-2 text-[11px] font-medium text-left",style:{boxShadow:"var(--card-shadow-sm)",background:O.bg,color:l?O.accentDark:O.text},onClick:()=>i(!a),children:[o.jsx("span",{className:"truncate flex-1",children:u}),o.jsx(dr,{size:10,style:{color:O.textMuted,flexShrink:0,marginLeft:2,transform:a?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),a&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[12px]",style:{background:O.bg,boxShadow:"var(--card-shadow)"},children:r.map(f=>o.jsxs("button",{className:"flex w-full items-center justify-between px-3 py-2 text-[11px]",style:{color:O.text},onClick:()=>{n(f.value),i(!1)},children:[o.jsx("span",{className:"truncate",children:f.label}),String(t)===f.value&&o.jsx(or,{size:10,style:{color:O.accentDark,flexShrink:0}})]},f.value))})]})}function Vd({children:e,time:t,badge:n,keyword:r,onEdit:s,selectMode:l,selected:a,onToggle:i,onLongPress:c}){const[u,p]=d.useState(!1),[f,h]=d.useState(!1),x=d.useRef(null),w=typeof e=="string"?e:"",v=d.useRef(null),b=d.useRef(!1),g=d.useRef(null);d.useLayoutEffect(()=>{const N=x.current;N&&!u&&h(N.scrollHeight>N.clientHeight+1)},[w,u]);const m=N=>{if(l)return;const k=N.touches[0];g.current={x:k.clientX,y:k.clientY},b.current=!1,v.current=setTimeout(()=>{b.current=!0,c==null||c()},600)},y=N=>{if(!g.current||!v.current)return;const k=N.touches[0],E=k.clientX-g.current.x,T=k.clientY-g.current.y;E*E+T*T>100&&(clearTimeout(v.current),v.current=null)},S=()=>{clearTimeout(v.current)},j=()=>{if(!b.current&&l){i==null||i();return}};return o.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:m,onTouchMove:y,onTouchEnd:S,onTouchCancel:S,onClick:j,children:[l&&o.jsx("div",{className:"mt-1",children:o.jsx(sx,{selected:a})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between gap-1",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[n,o.jsx("div",{ref:x,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:u?{color:O.text}:{color:O.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:N=>{l||(N.stopPropagation(),p(!u))},children:o.jsx(qc,{text:w,keyword:r})})]}),!l&&s&&o.jsx("button",{className:"mt-0.5 flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)"},onClick:N=>{N.stopPropagation(),s()},children:o.jsx(wh,{size:11,style:{color:O.accentDark}})})]}),o.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:O.textMuted},children:t||""}),!l&&(f||u)&&o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:O.accentDark,background:"rgba(232,160,191,0.1)"},onClick:N=>{N.stopPropagation(),p(!u)},children:u?"":""})]})]})]})}function P0({content:e,deletedAt:t,keyword:n,onRestore:r,onPermanentDelete:s}){const[l,a]=d.useState(!1),[i,c]=d.useState(!1),u=d.useRef(null);return d.useLayoutEffect(()=>{const p=u.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e,l]),o.jsxs("div",{className:"mb-2 rounded-[14px] p-3",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)",opacity:.75},children:[o.jsx("div",{ref:u,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:O.text}:{color:O.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:o.jsx(qc,{text:e,keyword:n})}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:O.accentDark,background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:O.textMuted},children:t?(()=>{const p=Math.max(0,30-Math.floor((Date.now()-new Date(t).getTime())/864e5));return` ${Tr(t)}  ${p}`})():""}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(59,130,246,0.1)",color:"#3b82f6"},onClick:r,children:""}),o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(239,68,68,0.1)",color:"#ef4444"},onClick:s,children:""})]})]})]})}function z0({msg:e,keyword:t,roleLabel:n,roleColor:r,selectMode:s,selected:l,onToggle:a,onLongPress:i}){const[c,u]=d.useState(!1),[p,f]=d.useState(!1),h=d.useRef(null),x=d.useRef(null),w=d.useRef(!1),v=d.useRef(null);d.useLayoutEffect(()=>{const S=h.current;S&&!c&&f(S.scrollHeight>S.clientHeight+1)},[e.content,c]);const b=S=>{if(s)return;const j=S.touches[0];v.current={x:j.clientX,y:j.clientY},w.current=!1,x.current=setTimeout(()=>{w.current=!0,i==null||i()},600)},g=S=>{if(!v.current||!x.current)return;const j=S.touches[0],N=j.clientX-v.current.x,k=j.clientY-v.current.y;N*N+k*k>100&&(clearTimeout(x.current),x.current=null)},m=()=>{clearTimeout(x.current)},y=()=>{if(!w.current&&s){a==null||a();return}};return o.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:b,onTouchMove:g,onTouchEnd:m,onTouchCancel:m,onClick:y,children:[s&&o.jsx("div",{className:"mt-1",children:o.jsx(sx,{selected:l})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:r(e.role)},children:n(e.role)}),e.summary_group_id&&o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(74,138,181,0.1)",color:"#4a8ab5"},children:["",e.summary_group_id]})]}),o.jsx("span",{className:"text-[10px]",style:{color:O.textMuted},children:Tr(e.created_at)})]}),o.jsx("div",{ref:h,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:c?{color:O.text}:{color:O.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:S=>{s||(S.stopPropagation(),u(!c))},children:o.jsx(qc,{text:e.content,keyword:t})}),!s&&(p||c)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:O.accentDark,background:"rgba(232,160,191,0.1)"},onClick:S=>{S.stopPropagation(),u(!c)},children:c?"":""})})]})]})}function I0(){var Xe;const e=zt(),[t,n]=d.useState("memories"),[r,s]=d.useState(!1),[l,a]=d.useState(null),[i,c]=d.useState([]),[u,p]=d.useState(null),[f,h]=d.useState(""),[x,w]=d.useState(null),[v,b]=d.useState(null),[g,m]=d.useState(""),[y,S]=d.useState(""),[j,N]=d.useState(""),[k,E]=d.useState(!1),[T,R]=d.useState(new Set),[$,oe]=d.useState([]),[W,P]=d.useState([]),[J,he]=d.useState([]),[me,I]=d.useState([]),[Y,_]=d.useState([]),[G,H]=d.useState(!0),[be,ve]=d.useState(!1),[He,ye]=d.useState(!1),[K,ke]=d.useState(!1);d.useEffect(()=>{E(!1),R(new Set)},[t]),d.useEffect(()=>{B("/api/sessions?limit=50").then(C=>{const A=C.sessions||[];c(A),A.length>0&&!l&&a(A[0].id)}).catch(()=>{})},[]),d.useEffect(()=>{l&&B(`/api/sessions/${l}/info`).then(C=>p(C.assistant_name||null)).catch(()=>p(null))},[l]);const ie=50,se=d.useRef(""),Ie=d.useRef(null),Ee=d.useRef({klass:"",mood:"",role:""});Ee.current={klass:g,mood:y,role:j},d.useEffect(()=>{l&&V()},[l,r]),d.useEffect(()=>{l&&!r&&V()},[t]),d.useEffect(()=>{l&&!r&&V()},[g,y,j]),d.useEffect(()=>(Ie.current&&clearTimeout(Ie.current),Ie.current=setTimeout(()=>{const C=f.trim();C!==se.current&&(se.current=C,l&&V(C))},400),()=>{Ie.current&&clearTimeout(Ie.current)}),[f]);const We=C=>{const A=[],Q=(C!=null?C:se.current||"").trim();Q&&A.push(`search=${encodeURIComponent(Q)}`);const le=Ee.current;return t==="memories"&&le.klass&&A.push(`klass=${encodeURIComponent(le.klass)}`),t==="summaries"&&le.mood&&A.push(`mood_tag=${encodeURIComponent(le.mood)}`),t==="messages"&&le.role&&A.push(`role=${encodeURIComponent(le.role)}`),A.length?`&${A.join("&")}`:""},V=async C=>{if(!l)return;H(!0);const A=We(C);try{if(r){const[Q,le]=await Promise.all([B("/api/memories/trash?limit=100"),B(`/api/sessions/${l}/summaries/trash`)]);I(Q.memories||[]),_(le.summaries||[])}else if(t==="memories"){const Q=await B(`/api/memories?limit=${ie}&offset=0${A}`);oe(Q.memories||[]),ve((Q.total||0)>(Q.memories||[]).length)}else if(t==="summaries"){const Q=await B(`/api/sessions/${l}/summaries?limit=${ie}&offset=0${A}`);P(Q.summaries||[]),ye((Q.total||0)>(Q.summaries||[]).length)}else{const Q=await B(`/api/sessions/${l}/messages?limit=50${A}`);he((Q.messages||[]).reverse()),ke(Q.has_more||!1)}}catch(Q){console.error(Q)}H(!1)},U=async()=>{if(!be||G)return;H(!0);const C=We();try{const A=await B(`/api/memories?limit=${ie}&offset=${$.length}${C}`),Q=A.memories||[];oe(le=>[...le,...Q]),ve((A.total||0)>$.length+Q.length)}catch(A){console.error(A)}H(!1)},ce=async()=>{if(!l||!He||G)return;H(!0);const C=We();try{const A=await B(`/api/sessions/${l}/summaries?limit=${ie}&offset=${W.length}${C}`),Q=A.summaries||[];P(le=>[...le,...Q]),ye((A.total||0)>W.length+Q.length)}catch(A){console.error(A)}H(!1)},re=async()=>{if(!l||!K||G)return;const C=J[J.length-1];if(!C)return;H(!0);const A=We();try{const Q=await B(`/api/sessions/${l}/messages?limit=50&before_id=${C.id}${A}`);he(le=>[...le,...(Q.messages||[]).reverse()]),ke(Q.has_more||!1)}catch(Q){console.error(Q)}H(!1)},te=f.trim(),z=d.useMemo(()=>te?me.filter(C=>C.content.toLowerCase().includes(te.toLowerCase())):me,[me,te]),Z=d.useMemo(()=>te?Y.filter(C=>(C.summary_content||"").toLowerCase().includes(te.toLowerCase())):Y,[Y,te]),ne=(C,A)=>w({message:C,action:A}),ue=async C=>{await B(`/api/memories/${C}/restore`,{method:"POST"}),I(A=>A.filter(Q=>Q.id!==C))},qe=C=>ne("",async()=>{await B(`/api/memories/${C}/permanent`,{method:"DELETE"}),I(A=>A.filter(Q=>Q.id!==C))}),Ve=async C=>{await B(`/api/sessions/${l}/summaries/${C}/restore`,{method:"POST"}),_(A=>A.filter(Q=>Q.id!==C))},Wn=C=>ne("",async()=>{await B(`/api/sessions/${l}/summaries/${C}/permanent`,{method:"DELETE"}),_(A=>A.filter(Q=>Q.id!==C))}),ln=C=>{R(A=>{const Q=new Set(A);return Q.has(C)?Q.delete(C):Q.add(C),Q})},Ct=C=>{E(!0),R(new Set([C]))},qt=()=>{let C=[];t==="memories"?C=$.map(A=>A.id):t==="summaries"?C=W.map(A=>A.id):C=J.map(A=>A.id),R(new Set(C))},Jt=()=>{E(!1),R(new Set)},Vn=()=>{if(T.size===0)return;const C=T.size,A=t==="messages"?` ${C} `:` ${C} ${t==="memories"?"":""}`;ne(A,async()=>{const Q=[...T];t==="memories"?(await B("/api/memories/batch",{method:"DELETE",body:{ids:Q}}),oe(le=>le.filter(Me=>!T.has(Me.id)))):t==="summaries"?(await B(`/api/sessions/${l}/summaries/batch`,{method:"DELETE",body:{ids:Q}}),P(le=>le.filter(Me=>!T.has(Me.id)))):(await B(`/api/sessions/${l}/messages/batch`,{method:"DELETE",body:{ids:Q}}),he(le=>le.filter(Me=>!T.has(Me.id)))),Jt()})},Et=async(C,A,Q)=>{if(v){try{if(v.type==="memory"){const le={content:C};A!==void 0&&(le.klass=A),Q!==void 0&&(le.tags=Q),await B(`/api/memories/${v.id}`,{method:"PUT",body:le}),oe(Me=>Me.map(ot=>ot.id===v.id?{...ot,content:C,...A!==void 0?{klass:A}:{},...Q!==void 0?{tags:Q}:{}}:ot))}else await B(`/api/sessions/${l}/summaries/${v.id}`,{method:"PATCH",body:{summary_content:C}}),P(le=>le.map(Me=>Me.id===v.id?{...Me,summary_content:C}:Me))}catch(le){console.error(le)}b(null)}},Xn=C=>C==="user"?"":C==="assistant"?u||"":"",fr=C=>C==="user"?O.accentDark:C==="assistant"?"#8d68c4":O.textMuted,L=t==="memories"?rx:t==="summaries"?_0:T0,ge=t==="memories"?g:t==="summaries"?y:j,ae=C=>{t==="memories"?m(C):t==="summaries"?S(C):N(C)},rs=r?(()=>{if(G)return o.jsx(Il,{});const C=t==="memories"?z:Z;return C.length===0?o.jsx(Ll,{text:te?"":""}):C.map(A=>o.jsx(P0,{content:A.content||A.summary_content||"()",deletedAt:A.deleted_at,keyword:te,onRestore:()=>t==="memories"?ue(A.id):Ve(A.id),onPermanentDelete:()=>t==="memories"?qe(A.id):Wn(A.id)},A.id))})():t==="memories"?G&&$.length===0?o.jsx(Il,{}):$.length===0?o.jsx(Ll,{text:te?"":""}):o.jsxs(o.Fragment,{children:[!k&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:O.textMuted},children:""}),$.map(C=>o.jsx(Vd,{time:C.updated_at?`${Tr(C.created_at)}   ${Tr(C.updated_at)}`:Tr(C.created_at),keyword:te,onEdit:()=>b({type:"memory",id:C.id,text:C.content,klass:C.klass,tags:C.tags}),selectMode:k,selected:T.has(C.id),onToggle:()=>ln(C.id),onLongPress:()=>Ct(C.id),badge:(()=>{var le;const A=Hd[C.klass]||Hd.other,Q=((le=C.tags)==null?void 0:le.topic)||[];return o.jsxs("div",{className:"flex flex-wrap items-center gap-1 mb-1",children:[o.jsx("span",{className:"inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:A.bg,color:A.color},children:C.klass}),o.jsxs("span",{className:"inline-block text-[10px]",style:{color:O.textMuted},children:["#",C.id]}),Q.map((Me,ot)=>o.jsx("span",{className:"inline-block rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(136,136,160,0.1)",color:O.textMuted},children:Me},ot))]})})(),children:C.content},C.id)),be&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)",color:O.accentDark},onClick:U,disabled:G,children:G?"...":""})]}):t==="summaries"?G&&W.length===0?o.jsx(Il,{}):W.length===0?o.jsx(Ll,{text:te?"":""}):o.jsxs(o.Fragment,{children:[!k&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:O.textMuted},children:""}),W.map(C=>o.jsx(Vd,{time:Tr(C.created_at),keyword:te,onEdit:()=>b({type:"summary",id:C.id,text:C.summary_content}),selectMode:k,selected:T.has(C.id),onToggle:()=>ln(C.id),onLongPress:()=>Ct(C.id),badge:o.jsxs(o.Fragment,{children:[C.mood_tag&&o.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:"rgba(232,160,191,0.15)",color:O.accentDark},children:C.mood_tag}),o.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:O.textMuted},children:["#",C.id]})]}),children:C.summary_content||"()"},C.id)),He&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)",color:O.accentDark},onClick:ce,disabled:G,children:G?"...":""})]}):G&&J.length===0?o.jsx(Il,{}):J.length===0?o.jsx(Ll,{text:te?"":""}):o.jsxs(o.Fragment,{children:[!k&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:O.textMuted},children:""}),J.map(C=>o.jsx(z0,{msg:C,keyword:te,roleLabel:Xn,roleColor:fr,selectMode:k,selected:T.has(C.id),onToggle:()=>ln(C.id),onLongPress:()=>Ct(C.id)},C.id)),K&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)",color:O.accentDark},onClick:re,disabled:G,children:G?"...":""})]});return o.jsxs("div",{className:"flex h-full flex-col",style:{background:O.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Nt,{size:22,style:{color:O.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:O.text},children:r?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:O.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>s(!r),children:o.jsx(Jr,{size:16,style:{color:r?"#ef4444":O.accentDark}})})]}),k&&o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsxs("div",{className:"flex items-center justify-between rounded-[14px] px-4 py-2.5",style:{background:O.bg,boxShadow:"var(--inset-shadow)"},children:[o.jsxs("span",{className:"text-[12px] font-semibold",style:{color:O.accentDark},children:[" ",T.size," "]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:"rgba(59,130,246,0.15)",color:"#3b82f6"},onClick:qt,children:""}),o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:O.bg,boxShadow:"var(--card-shadow-sm)",color:O.textMuted},onClick:Jt,children:""}),o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold text-white",style:{background:T.size>0?"#ff4d6d":"rgba(255,77,109,0.3)"},onClick:Vn,disabled:T.size===0,children:""})]})]})}),!k&&o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:O.bg,boxShadow:"var(--inset-shadow)"},children:M0.map(C=>{const A=r&&C.key==="messages",Q=t===C.key;return o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:A?{color:O.textMuted,opacity:.35,cursor:"default"}:Q?{background:O.bg,boxShadow:"var(--card-shadow-sm)",color:O.accentDark}:{color:O.textMuted},disabled:A,onClick:()=>!A&&n(C.key),children:C.label},C.key)})})}),!k&&o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Wd,{value:l?`#${l}`:"",rawValue:l!=null?l:"",onChange:C=>a(Number(C)),options:i.map(C=>({value:String(C.id),label:`#${C.id} ${C.title||""}`})),width:"22%"}),o.jsx(Wd,{value:((Xe=L.find(C=>C.value===ge))==null?void 0:Xe.label)||L[0].label,rawValue:ge,onChange:ae,options:L.map(C=>({value:C.value,label:C.label})),width:"22%",active:!!ge}),o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Yv,{size:13,className:"absolute left-2.5 top-1/2 -translate-y-1/2",style:{color:O.textMuted}}),o.jsx("input",{className:"w-full rounded-[12px] py-2 pl-8 pr-7 text-[11px] outline-none",style:{background:O.bg,boxShadow:"var(--inset-shadow)",color:O.text},placeholder:"...",value:f,onChange:C=>h(C.target.value)}),f&&o.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>h(""),children:o.jsx(ol,{size:13,style:{color:O.textMuted}})})]})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:rs}),x&&o.jsx(D0,{message:x.message,onConfirm:async()=>{try{await x.action()}catch(C){console.error(C)}w(null)},onCancel:()=>w(null)}),v&&o.jsx(R0,{initialText:v.text,onSave:Et,onCancel:()=>b(null),memoryData:v.type==="memory"?{klass:v.klass,tags:v.tags}:null})]})}function Il(){return o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:O.accent,borderTopColor:"transparent"}})})}function Ll({text:e}){return o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:O.textMuted},children:e})}const q={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},L0=[{key:"theirs",label:""},{key:"mine",label:""}],Ol=80;function lx(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function O0({message:e,onConfirm:t,onCancel:n}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:q.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:q.text},children:""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:q.textMuted},children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)",color:q.text},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function $0({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const v=Math.min(1,Math.abs(p)/Ol);x.style.transition=w,x.style.opacity=`${v}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const v=Math.max(-Ol,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${v}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(v)/Ol)}`),f.current=v},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Ol):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(Jr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function A0({unlockAt:e}){const[t,n]=d.useState(Date.now());d.useEffect(()=>{const u=setInterval(()=>n(Date.now()),1e3);return()=>clearInterval(u)},[]);const r=new Date(e).getTime()-t;if(r<=0)return null;const s=Math.floor(r/864e5),l=Math.floor(r%864e5/36e5),a=Math.floor(r%36e5/6e4),i=Math.floor(r%6e4/1e3);let c="";return s>0&&(c+=`${s}`),(l>0||s>0)&&(c+=`${l}`),c+=`${a}${i}`,o.jsxs("div",{className:"flex items-center gap-1.5 text-[12px]",style:{color:q.accentDark},children:[o.jsx(Wv,{size:12}),o.jsx("span",{children:c})]})}function F0({assistants:e,avatarMap:t,currentId:n,onSelect:r,onClose:s}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:s,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-5",style:{background:q.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:l=>l.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:q.text},children:""}),o.jsx("button",{onClick:s,children:o.jsx(ol,{size:18,style:{color:q.textMuted}})})]}),o.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:e.map(l=>{var i;const a=t[l.id]||l.avatar_url;return o.jsxs("button",{className:"mb-2 flex w-full items-center gap-3 rounded-[14px] p-3 text-left",style:{background:q.bg,boxShadow:l.id===n?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{r(l.id),s()},children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:36,height:36,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:2},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:q.bg},children:a?o.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:q.accentDark},children:((i=l.name)==null?void 0:i[0])||"?"})})}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:q.text},children:l.name})]},l.id)})})]})})}function B0({diary:e,onBack:t,onMarkRead:n}){return d.useEffect(()=>{e&&!e.is_read&&e.author==="assistant"&&(!e.unlock_at||new Date(e.unlock_at)<=new Date)&&n(e.id)},[e]),o.jsxs("div",{className:"flex h-full flex-col",style:{background:q.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:t,children:o.jsx(Nt,{size:22,style:{color:q.text}})}),o.jsx("h1",{className:"text-[15px] font-bold truncate max-w-[60%]",style:{color:q.text},children:e.title||""}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:o.jsxs("div",{className:"rounded-[18px] p-5",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{className:"mb-3 text-[10px]",style:{color:q.textMuted},children:lx(e.created_at)}),o.jsx("div",{className:"text-[13px] leading-[28px]",style:{color:q.text},children:e.content.split(`
`).map((r,s)=>o.jsx("div",{style:{borderBottom:"1px solid rgba(0,0,0,0.06)",minHeight:28},children:r||""},s))})]})})]})}function U0({assistantId:e,onSave:t,onCancel:n}){const[r,s]=d.useState(""),[l,a]=d.useState(""),[i,c]=d.useState(!1),[u,p]=d.useState(""),[f,h]=d.useState(!1),[x,w]=d.useState(!1),v=async()=>{if(!(!l.trim()||f)){h(!0);try{const b={assistant_id:e,author:"user",title:r.trim(),content:l.trim()};i&&u&&(b.unlock_at=new Date(u).toISOString()),await t(b)}finally{h(!1)}}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:q.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Nt,{size:22,style:{color:q.text}})}),o.jsx("h1",{className:"text-[15px] font-bold",style:{color:q.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:l.trim()?"var(--card-shadow-sm)":"var(--inset-shadow)"},onClick:v,disabled:!l.trim()||f,children:o.jsx("span",{className:"text-[12px] font-bold",style:{color:l.trim()?q.accentDark:q.textMuted},children:""})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[!x&&o.jsx("input",{className:"mb-3 w-full rounded-[12px] px-3 py-2.5 text-[13px] font-medium outline-none",style:{background:q.bg,boxShadow:"var(--inset-shadow)",color:q.text},placeholder:"",value:r,onChange:b=>s(b.target.value)}),o.jsxs("div",{className:"relative mb-3",children:[o.jsx("textarea",{className:"w-full rounded-[14px] p-3 text-[13px] leading-[28px] resize-none outline-none",style:{background:q.bg,boxShadow:"var(--inset-shadow)",color:q.text,minHeight:x?"calc(100vh - 120px)":200,backgroundImage:"repeating-linear-gradient(transparent, transparent 27px, rgba(0,0,0,0.05) 27px, rgba(0,0,0,0.05) 28px)",backgroundPositionY:9},placeholder:"...",value:l,onChange:b=>a(b.target.value),autoFocus:!0}),o.jsx("button",{className:"absolute top-2 right-2 flex h-7 w-7 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>w(!x),children:x?o.jsx(Xr,{size:13,style:{color:q.accentDark}}):o.jsx(ll,{size:13,style:{color:q.accentDark}})})]}),!x&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-[14px] px-4 py-3",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-[13px] font-medium",style:{color:q.text},children:""}),o.jsx("p",{className:"text-[10px]",style:{color:q.textMuted},children:""})]}),o.jsx("button",{className:"relative h-7 w-12 rounded-full transition-colors",style:{background:i?q.accent:"rgba(0,0,0,0.1)"},onClick:()=>{if(!i&&!u){const b=new Date;b.setDate(b.getDate()+1),b.setHours(9,0,0,0);const g=m=>String(m).padStart(2,"0");p(`${b.getFullYear()}-${g(b.getMonth()+1)}-${g(b.getDate())}T${g(b.getHours())}:${g(b.getMinutes())}`)}c(!i)},children:o.jsx("div",{className:"absolute top-0.5 h-6 w-6 rounded-full transition-transform",style:{background:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",transform:i?"translateX(22px)":"translateX(2px)"}})})]}),i&&o.jsxs("div",{className:"rounded-[14px] px-4 py-3",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("p",{className:"mb-2 text-[12px] font-medium",style:{color:q.text},children:""}),o.jsx("input",{type:"datetime-local",className:"w-full rounded-[10px] px-3 py-2 text-[13px] outline-none",style:{background:q.bg,boxShadow:"var(--inset-shadow)",color:q.text},value:u,onChange:b=>p(b.target.value)})]})]})]})]})}function H0(){var W;const e=zt(),[t,n]=d.useState("theirs"),[r,s]=d.useState([]),[l,a]=d.useState({}),[i,c]=d.useState(()=>{const P=localStorage.getItem("diary_assistant_id");return P?Number(P):null}),u=P=>{c(P),P!=null&&localStorage.setItem("diary_assistant_id",String(P))},[p,f]=d.useState(!1),[h,x]=d.useState([]),[w,v]=d.useState(!0),[b,g]=d.useState(null),[m,y]=d.useState(null),[S,j]=d.useState(!1);d.useEffect(()=>{B("/api/assistants").then(async P=>{const J=P.assistants||[];s(J),J.length>0&&(i&&J.some(I=>I.id===i)||u(J[0].id));const he={};await Promise.all(J.map(async me=>{const I=await Zr(`assistant-avatar-${me.id}`).catch(()=>null);I&&(he[me.id]=I)})),a(he)}).catch(()=>{})},[]);const N=r.find(P=>P.id===i),k=i&&l[i]||(N==null?void 0:N.avatar_url);d.useEffect(()=>{i!=null&&E()},[i,t]);const E=async()=>{v(!0);try{const J=await B(`/api/diary?assistant_id=${i}&author=${t==="theirs"?"assistant":"user"}&limit=100`);x(J.diary||[])}catch(P){console.error(P)}v(!1)},T=P=>{g({message:"",action:async()=>{await B(`/api/diary/${P}`,{method:"DELETE"}),x(J=>J.filter(he=>he.id!==P))}})},R=async P=>{try{await B(`/api/diary/${P}/read`,{method:"POST"}),x(J=>J.map(he=>he.id===P?{...he,is_read:!0}:he))}catch(J){console.error(J)}},$=async P=>{await B("/api/diary",{method:"POST",body:P}),j(!1),E()},oe=P=>{P.unlock_at&&new Date(P.unlock_at)>new Date||y(P)};return m?o.jsx(B0,{diary:m,onBack:()=>{y(null),E()},onMarkRead:R}):S?o.jsx(U0,{assistantId:i,onSave:$,onCancel:()=>j(!1)}):o.jsxs("div",{className:"flex h-full flex-col",style:{background:q.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Nt,{size:22,style:{color:q.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:q.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{border:"2px solid #e8a0bf",padding:2},onClick:()=>f(!0),children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:q.bg},children:k?o.jsx("img",{src:k,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:q.accentDark},children:((W=N==null?void 0:N.name)==null?void 0:W[0])||"?"})})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:q.bg,boxShadow:"var(--inset-shadow)"},children:L0.map(P=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:t===P.key?{background:q.bg,boxShadow:"var(--card-shadow-sm)",color:q.accentDark}:{color:q.textMuted},onClick:()=>n(P.key),children:P.label},P.key))})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24",children:w?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:q.accent,borderTopColor:"transparent"}})}):h.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:q.textMuted},children:t==="theirs"?"":""}):h.map(P=>{const J=P.unlock_at&&new Date(P.unlock_at)>new Date;return o.jsx($0,{onDelete:()=>T(P.id),children:o.jsxs("div",{className:"p-4 rounded-[18px]",style:{background:q.bg,userSelect:"none"},onClick:()=>oe(P),children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[!P.is_read&&P.author==="assistant"&&!J&&o.jsx("div",{className:"h-2 w-2 shrink-0 rounded-full",style:{background:"#ef4444"}}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:q.text},children:P.title||""})]}),o.jsx("span",{className:"text-[10px] shrink-0 ml-2",style:{color:q.textMuted},children:lx(P.created_at)})]}),J?o.jsx(A0,{unlockAt:P.unlock_at}):o.jsx("p",{className:"text-[12px] leading-relaxed break-words",style:{color:q.textMuted,maxHeight:40,overflow:"hidden"},children:P.content.length>60?P.content.slice(0,60)+"...":P.content})]})},P.id)})}),t==="mine"&&o.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center",style:{zIndex:30},children:o.jsx("button",{className:"flex h-12 w-12 items-center justify-center rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",boxShadow:"0 4px 14px rgba(232,160,191,0.4)"},onClick:()=>j(!0),children:o.jsx(qr,{size:22,color:"white"})})}),p&&o.jsx(F0,{assistants:r,avatarMap:l,currentId:i,onSelect:u,onClose:()=>f(!1)}),b&&o.jsx(O0,{message:b.message,onConfirm:async()=>{try{await b.action()}catch(P){console.error(P)}g(null)},onCancel:()=>g(null)})]})}const Ne={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function W0({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:Ne.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:Ne.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Xr,{size:18,style:{color:Ne.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:Ne.bg,color:Ne.text},placeholder:"..."})]})}function V0(){const e=zt(),[t,n]=d.useState(""),[r,s]=d.useState(""),[l,a]=d.useState(""),[i,c]=d.useState(""),[u,p]=d.useState(!1),[f,h]=d.useState(!0),[x,w]=d.useState(null),[v,b]=d.useState(!1),g=d.useRef(null),m=d.useRef(null),y=k=>{w(k),setTimeout(()=>w(null),2e3)};d.useEffect(()=>{B("/api/user/profile").then(k=>{n(k.nickname||""),s(k.background_url||""),a(k.basic_info||"")}).catch(()=>{}).finally(()=>h(!1)),Zr("user-avatar").then(k=>{k&&c(k)}).catch(function(){})},[]);const S=k=>{var R;const E=(R=k.target.files)==null?void 0:R[0];if(!E)return;const T=new FileReader;T.onload=async $=>{const oe=$.target.result;try{await Bi("user-avatar",oe),c(oe)}catch(W){y("")}},T.readAsDataURL(E),k.target.value=""},j=k=>{var R;const E=(R=k.target.files)==null?void 0:R[0];if(!E)return;const T=new FileReader;T.onload=$=>a($.target.result||""),T.readAsText(E),k.target.value=""},N=async()=>{p(!0);try{const k={nickname:t.trim()||null,background_url:r||null,basic_info:l||null,avatar_url:i?"user-avatar":null};await B("/api/user/profile",{method:"PUT",body:k});try{const E=JSON.parse(localStorage.getItem("whisper_profile")||"{}");localStorage.setItem("whisper_profile",JSON.stringify({...E,...k}))}catch(E){}y("")}catch(k){y("")}finally{p(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ne.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Nt,{size:22,style:{color:Ne.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ne.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:u?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:N,disabled:u,children:o.jsx(Go,{size:18,style:{color:Ne.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px space-y-4",children:f?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ne.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-[20px] p-5",style:{background:Ne.bg,boxShadow:"var(--card-shadow)"},children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var k;return(k=g.current)==null?void 0:k.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Ne.bg},children:i?o.jsx("img",{src:i,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:24},children:""})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:Ne.accentDark},children:o.jsx(vh,{size:9,color:"white"})})]}),o.jsx("input",{ref:g,type:"file",accept:"image/*",className:"hidden",onChange:S}),o.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Ne.textMuted},children:""}),o.jsx("input",{type:"text",value:t,onChange:k=>n(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ne.bg,color:Ne.text}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Ne.textMuted},children:""}),o.jsx("input",{type:"text",value:r,onChange:k=>s(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2 text-[13px] italic outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ne.bg,color:Ne.text}})]})]})]})}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:Ne.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:Ne.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Ne.bg},onClick:()=>{var k;return(k=m.current)==null?void 0:k.click()},title:"",children:o.jsx(Qo,{size:13,style:{color:Ne.textMuted}})}),o.jsx("input",{ref:m,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:j}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Ne.bg},onClick:()=>b(!0),title:"",children:o.jsx(ll,{size:13,style:{color:Ne.accentDark}})})]})]}),o.jsx("textarea",{value:l,onChange:k=>a(k.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ne.bg,color:Ne.text}})]})]})}),v&&o.jsx(W0,{value:l,onChange:a,onClose:()=>b(!1)}),x&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:x})})]})}function mr(){var n;const e=(n=window.Telegram)==null?void 0:n.WebApp,t=Math.max((e==null?void 0:e.viewportHeight)||0,window.innerHeight);document.documentElement.style.setProperty("--tg-viewport-height",t+"px")}function X0({onSuccess:e}){const[t,n]=d.useState(""),[r,s]=d.useState(""),[l,a]=d.useState(!1),i=async c=>{if(c.preventDefault(),!!t.trim()){a(!0),s("");try{await Tv(t),e()}catch(u){s(u.message||"")}finally{a(!1)}}};return o.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--bg)",padding:"2rem"},children:o.jsxs("div",{style:{width:"100%",maxWidth:320,borderRadius:24,padding:"2rem 1.5rem",background:"var(--bg)",boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontSize:36,marginBottom:8},children:""}),o.jsx("h1",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--text)",margin:0},children:"WHISPER"}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:4},children:""})]}),o.jsxs("form",{onSubmit:i,children:[o.jsx("input",{type:"password",value:t,onChange:c=>n(c.target.value),placeholder:"",autoFocus:!0,style:{width:"100%",padding:"12px 16px",borderRadius:14,border:"none",outline:"none",fontSize:14,color:"var(--text)",background:"var(--bg)",boxShadow:"var(--inset-shadow)",boxSizing:"border-box"}}),r&&o.jsx("p",{style:{color:"#ef4444",fontSize:"0.75rem",textAlign:"center",marginTop:8,marginBottom:0},children:r}),o.jsx("button",{type:"submit",disabled:l||!t.trim(),style:{width:"100%",marginTop:16,padding:"12px 0",borderRadius:14,border:"none",fontSize:14,fontWeight:600,color:"#fff",background:l||!t.trim()?"var(--text-muted)":"linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%)",cursor:l||!t.trim()?"not-allowed":"pointer",boxShadow:"var(--card-shadow-sm)"},children:l?"...":""})]})]})})}function Y0(){const e=Fc();return d.useEffect(()=>{var n;const t=(n=window.Telegram)==null?void 0:n.WebApp;t&&!e.pathname.startsWith("/cot")&&t.expand(),mr()},[e.pathname]),o.jsxs(Cv,{children:[o.jsx(ct,{path:"/",element:o.jsx(ey,{})}),o.jsx(ct,{path:"/profile",element:o.jsx(V0,{})}),o.jsx(ct,{path:"/world-books",element:o.jsx(W1,{})}),o.jsx(ct,{path:"/world-books/new",element:o.jsx(zd,{})}),o.jsx(ct,{path:"/world-books/:id",element:o.jsx(zd,{})}),o.jsx(ct,{path:"/assistants",element:o.jsx(t0,{})}),o.jsx(ct,{path:"/assistants/new",element:o.jsx(Ld,{})}),o.jsx(ct,{path:"/assistants/:id",element:o.jsx(Ld,{})}),o.jsx(ct,{path:"/settings",element:o.jsx(i0,{})}),o.jsx(ct,{path:"/settings/api",element:o.jsx(h0,{})}),o.jsx(ct,{path:"/settings/proactive",element:o.jsx(x0,{})}),o.jsx(ct,{path:"/cot",element:o.jsx(S0,{})}),o.jsx(ct,{path:"/memories",element:o.jsx(I0,{})}),o.jsx(ct,{path:"/diary",element:o.jsx(H0,{})}),o.jsx(ct,{path:"/messages",element:o.jsx(E0,{})})]})}function K0(){const[e,t]=d.useState(null);return d.useEffect(()=>{var r;const n=(r=window.Telegram)==null?void 0:r.WebApp;return localStorage.getItem("whisper_token")||n&&n.initData&&n.initData.length>0?t("ok"):t("login"),n&&(n.ready(),window.location.hash.startsWith("#/cot")||n.expand()),mr(),n&&n.onEvent("viewportChanged",mr),window.addEventListener("resize",mr),()=>{n&&n.offEvent("viewportChanged",mr),window.removeEventListener("resize",mr)}},[]),e===null?null:e==="login"?o.jsx(X0,{onSuccess:()=>t("ok")}):o.jsx(_v,{children:o.jsx(Y0,{})})}Xa.createRoot(document.getElementById("root")).render(o.jsx(Re.StrictMode,{children:o.jsx(K0,{})}));
