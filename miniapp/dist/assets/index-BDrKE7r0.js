function ex(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function tx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fd={exports:{}},Eo={},Bd={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qs=Symbol.for("react.element"),nx=Symbol.for("react.portal"),rx=Symbol.for("react.fragment"),sx=Symbol.for("react.strict_mode"),lx=Symbol.for("react.profiler"),ox=Symbol.for("react.provider"),ax=Symbol.for("react.context"),ix=Symbol.for("react.forward_ref"),cx=Symbol.for("react.suspense"),ux=Symbol.for("react.memo"),dx=Symbol.for("react.lazy"),Xc=Symbol.iterator;function fx(e){return e===null||typeof e!="object"?null:(e=Xc&&e[Xc]||e["@@iterator"],typeof e=="function"?e:null)}var Ud={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hd=Object.assign,Wd={};function Kr(e,t,n){this.props=e,this.context=t,this.refs=Wd,this.updater=n||Ud}Kr.prototype.isReactComponent={};Kr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Kr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Vd(){}Vd.prototype=Kr.prototype;function Ai(e,t,n){this.props=e,this.context=t,this.refs=Wd,this.updater=n||Ud}var Fi=Ai.prototype=new Vd;Fi.constructor=Ai;Hd(Fi,Kr.prototype);Fi.isPureReactComponent=!0;var Yc=Array.isArray,Xd=Object.prototype.hasOwnProperty,Bi={current:null},Yd={key:!0,ref:!0,__self:!0,__source:!0};function Kd(e,t,n){var r,s={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)Xd.call(t,r)&&!Yd.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:qs,type:e,key:l,ref:a,props:s,_owner:Bi.current}}function px(e,t){return{$$typeof:qs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ui(e){return typeof e=="object"&&e!==null&&e.$$typeof===qs}function hx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Kc=/\/+/g;function la(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hx(""+e.key):t.toString(36)}function Ll(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case qs:case nx:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+la(a,0):r,Yc(s)?(n="",e!=null&&(n=e.replace(Kc,"$&/")+"/"),Ll(s,t,n,"",function(d){return d})):s!=null&&(Ui(s)&&(s=px(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Kc,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Yc(e))for(var i=0;i<e.length;i++){l=e[i];var c=r+la(l,i);a+=Ll(l,t,n,c,s)}else if(c=fx(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=r+la(l,i++),a+=Ll(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ul(e,t,n){if(e==null)return e;var r=[],s=0;return Ll(e,r,"","",function(l){return t.call(n,l,s++)}),r}function xx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pt={current:null},Ol={transition:null},mx={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:Ol,ReactCurrentOwner:Bi};function Qd(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:ul,forEach:function(e,t,n){ul(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ul(e,function(){t++}),t},toArray:function(e){return ul(e,function(t){return t})||[]},only:function(e){if(!Ui(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ue.Component=Kr;ue.Fragment=rx;ue.Profiler=lx;ue.PureComponent=Ai;ue.StrictMode=sx;ue.Suspense=cx;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mx;ue.act=Qd;ue.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Hd({},e.props),s=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=Bi.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Xd.call(t,c)&&!Yd.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];r.children=i}return{$$typeof:qs,type:e.type,key:s,ref:l,props:r,_owner:a}};ue.createContext=function(e){return e={$$typeof:ax,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ox,_context:e},e.Consumer=e};ue.createElement=Kd;ue.createFactory=function(e){var t=Kd.bind(null,e);return t.type=e,t};ue.createRef=function(){return{current:null}};ue.forwardRef=function(e){return{$$typeof:ix,render:e}};ue.isValidElement=Ui;ue.lazy=function(e){return{$$typeof:dx,_payload:{_status:-1,_result:e},_init:xx}};ue.memo=function(e,t){return{$$typeof:ux,type:e,compare:t===void 0?null:t}};ue.startTransition=function(e){var t=Ol.transition;Ol.transition={};try{e()}finally{Ol.transition=t}};ue.unstable_act=Qd;ue.useCallback=function(e,t){return pt.current.useCallback(e,t)};ue.useContext=function(e){return pt.current.useContext(e)};ue.useDebugValue=function(){};ue.useDeferredValue=function(e){return pt.current.useDeferredValue(e)};ue.useEffect=function(e,t){return pt.current.useEffect(e,t)};ue.useId=function(){return pt.current.useId()};ue.useImperativeHandle=function(e,t,n){return pt.current.useImperativeHandle(e,t,n)};ue.useInsertionEffect=function(e,t){return pt.current.useInsertionEffect(e,t)};ue.useLayoutEffect=function(e,t){return pt.current.useLayoutEffect(e,t)};ue.useMemo=function(e,t){return pt.current.useMemo(e,t)};ue.useReducer=function(e,t,n){return pt.current.useReducer(e,t,n)};ue.useRef=function(e){return pt.current.useRef(e)};ue.useState=function(e){return pt.current.useState(e)};ue.useSyncExternalStore=function(e,t,n){return pt.current.useSyncExternalStore(e,t,n)};ue.useTransition=function(){return pt.current.useTransition()};ue.version="18.3.1";Bd.exports=ue;var u=Bd.exports;const Pe=tx(u),gx=ex({__proto__:null,default:Pe},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vx=u,yx=Symbol.for("react.element"),wx=Symbol.for("react.fragment"),bx=Object.prototype.hasOwnProperty,kx=vx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jx={key:!0,ref:!0,__self:!0,__source:!0};function Gd(e,t,n){var r,s={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)bx.call(t,r)&&!jx.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:yx,type:e,key:l,ref:a,props:s,_owner:kx.current}}Eo.Fragment=wx;Eo.jsx=Gd;Eo.jsxs=Gd;Fd.exports=Eo;var o=Fd.exports,Fa={},Jd={exports:{}},_t={},qd={exports:{}},Zd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,L){var K=_.length;_.push(L);e:for(;0<K;){var q=K-1>>>1,J=_[q];if(0<s(J,L))_[q]=L,_[K]=J,K=q;else break e}}function n(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var L=_[0],K=_.pop();if(K!==L){_[0]=K;e:for(var q=0,J=_.length,Ce=J>>>1;q<Ce;){var te=2*(q+1)-1,be=_[te],ne=te+1,Se=_[ne];if(0>s(be,K))ne<J&&0>s(Se,be)?(_[q]=Se,_[ne]=K,q=ne):(_[q]=be,_[te]=K,q=te);else if(ne<J&&0>s(Se,K))_[q]=Se,_[ne]=K,q=ne;else break e}}return L}function s(_,L){var K=_.sortIndex-L.sortIndex;return K!==0?K:_.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],d=[],p=1,f=null,h=3,x=!1,w=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(_){for(var L=n(d);L!==null;){if(L.callback===null)r(d);else if(L.startTime<=_)r(d),L.sortIndex=L.expirationTime,t(c,L);else break;L=n(d)}}function S(_){if(v=!1,y(_),!w)if(n(c)!==null)w=!0,fe(j);else{var L=n(d);L!==null&&A(S,L.startTime-_)}}function j(_,L){w=!1,v&&(v=!1,g(E),E=-1),x=!0;var K=h;try{for(y(L),f=n(c);f!==null&&(!(f.expirationTime>L)||_&&!I());){var q=f.callback;if(typeof q=="function"){f.callback=null,h=f.priorityLevel;var J=q(f.expirationTime<=L);L=e.unstable_now(),typeof J=="function"?f.callback=J:f===n(c)&&r(c),y(L)}else r(c);f=n(c)}if(f!==null)var Ce=!0;else{var te=n(d);te!==null&&A(S,te.startTime-L),Ce=!1}return Ce}finally{f=null,h=K,x=!1}}var N=!1,k=null,E=-1,T=5,R=-1;function I(){return!(e.unstable_now()-R<T)}function ae(){if(k!==null){var _=e.unstable_now();R=_;var L=!0;try{L=k(!0,_)}finally{L?H():(N=!1,k=null)}}else N=!1}var H;if(typeof m=="function")H=function(){m(ae)};else if(typeof MessageChannel!="undefined"){var P=new MessageChannel,G=P.port2;P.port1.onmessage=ae,H=function(){G.postMessage(null)}}else H=function(){b(ae,0)};function fe(_){k=_,N||(N=!0,H())}function A(_,L){E=b(function(){_(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,fe(j))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(_){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var K=h;h=L;try{return _()}finally{h=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,L){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var K=h;h=_;try{return L()}finally{h=K}},e.unstable_scheduleCallback=function(_,L,K){var q=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?q+K:q):K=q,_){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=K+J,_={id:p++,callback:L,priorityLevel:_,startTime:K,expirationTime:J,sortIndex:-1},K>q?(_.sortIndex=K,t(d,_),n(c)===null&&_===n(d)&&(v?(g(E),E=-1):v=!0,A(S,K-q))):(_.sortIndex=J,t(c,_),w||x||(w=!0,fe(j))),_},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(_){var L=h;return function(){var K=h;h=L;try{return _.apply(this,arguments)}finally{h=K}}}})(Zd);qd.exports=Zd;var Sx=qd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nx=u,Mt=Sx;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ef=new Set,Ds={};function or(e,t){$r(e,t),$r(e+"Capture",t)}function $r(e,t){for(Ds[e]=t,e=0;e<t.length;e++)ef.add(t[e])}var fn=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Ba=Object.prototype.hasOwnProperty,Cx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qc={},Gc={};function Ex(e){return Ba.call(Gc,e)?!0:Ba.call(Qc,e)?!1:Cx.test(e)?Gc[e]=!0:(Qc[e]=!0,!1)}function Mx(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _x(e,t,n,r){if(t===null||typeof t=="undefined"||Mx(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ht(e,t,n,r,s,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){st[e]=new ht(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];st[t]=new ht(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){st[e]=new ht(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){st[e]=new ht(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){st[e]=new ht(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){st[e]=new ht(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){st[e]=new ht(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){st[e]=new ht(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){st[e]=new ht(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hi=/[\-:]([a-z])/g;function Wi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Hi,Wi);st[t]=new ht(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Hi,Wi);st[t]=new ht(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Hi,Wi);st[t]=new ht(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){st[e]=new ht(e,1,!1,e.toLowerCase(),null,!1,!1)});st.xlinkHref=new ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){st[e]=new ht(e,1,!1,e.toLowerCase(),null,!0,!0)});function Vi(e,t,n,r){var s=st.hasOwnProperty(t)?st[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_x(t,n,s,r)&&(n=null),r||s===null?Ex(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var gn=Nx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dl=Symbol.for("react.element"),gr=Symbol.for("react.portal"),vr=Symbol.for("react.fragment"),Xi=Symbol.for("react.strict_mode"),Ua=Symbol.for("react.profiler"),tf=Symbol.for("react.provider"),nf=Symbol.for("react.context"),Yi=Symbol.for("react.forward_ref"),Ha=Symbol.for("react.suspense"),Wa=Symbol.for("react.suspense_list"),Ki=Symbol.for("react.memo"),kn=Symbol.for("react.lazy"),rf=Symbol.for("react.offscreen"),Jc=Symbol.iterator;function as(e){return e===null||typeof e!="object"?null:(e=Jc&&e[Jc]||e["@@iterator"],typeof e=="function"?e:null)}var Ae=Object.assign,oa;function xs(e){if(oa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);oa=t&&t[1]||""}return`
`+oa+e}var aa=!1;function ia(e,t){if(!e||aa)return"";aa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),l=r.stack.split(`
`),a=s.length-1,i=l.length-1;1<=a&&0<=i&&s[a]!==l[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==l[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==l[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{aa=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?xs(e):""}function Tx(e){switch(e.tag){case 5:return xs(e.type);case 16:return xs("Lazy");case 13:return xs("Suspense");case 19:return xs("SuspenseList");case 0:case 2:case 15:return e=ia(e.type,!1),e;case 11:return e=ia(e.type.render,!1),e;case 1:return e=ia(e.type,!0),e;default:return""}}function Va(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vr:return"Fragment";case gr:return"Portal";case Ua:return"Profiler";case Xi:return"StrictMode";case Ha:return"Suspense";case Wa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nf:return(e.displayName||"Context")+".Consumer";case tf:return(e._context.displayName||"Context")+".Provider";case Yi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ki:return t=e.displayName||null,t!==null?t:Va(e.type)||"Memo";case kn:t=e._payload,e=e._init;try{return Va(e(t))}catch(n){}}return null}function Dx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Va(t);case 8:return t===Xi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $n(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Rx(e){var t=sf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fl(e){e._valueTracker||(e._valueTracker=Rx(e))}function lf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=sf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ql(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Xa(e,t){var n=t.checked;return Ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function qc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=$n(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function of(e,t){t=t.checked,t!=null&&Vi(e,"checked",t,!1)}function Ya(e,t){of(e,t);var n=$n(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ka(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ka(e,t.type,$n(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ka(e,t,n){(t!=="number"||Ql(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ms=Array.isArray;function Dr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$n(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Qa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function eu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(ms(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:$n(n)}}function af(e,t){var n=$n(t.value),r=$n(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function tu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ga(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var pl,uf=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(pl=pl||document.createElement("div"),pl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ys={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Px=["Webkit","ms","Moz","O"];Object.keys(ys).forEach(function(e){Px.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ys[t]=ys[e]})});function df(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ys.hasOwnProperty(e)&&ys[e]?(""+t).trim():t+"px"}function ff(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=df(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var zx=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ja(e,t){if(t){if(zx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function qa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Za=null;function Qi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ei=null,Rr=null,Pr=null;function nu(e){if(e=tl(e)){if(typeof ei!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Ro(t),ei(e.stateNode,e.type,t))}}function pf(e){Rr?Pr?Pr.push(e):Pr=[e]:Rr=e}function hf(){if(Rr){var e=Rr,t=Pr;if(Pr=Rr=null,nu(e),t)for(e=0;e<t.length;e++)nu(t[e])}}function xf(e,t){return e(t)}function mf(){}var ca=!1;function gf(e,t,n){if(ca)return e(t,n);ca=!0;try{return xf(e,t,n)}finally{ca=!1,(Rr!==null||Pr!==null)&&(mf(),hf())}}function Ps(e,t){var n=e.stateNode;if(n===null)return null;var r=Ro(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var ti=!1;if(fn)try{var is={};Object.defineProperty(is,"passive",{get:function(){ti=!0}}),window.addEventListener("test",is,is),window.removeEventListener("test",is,is)}catch(e){ti=!1}function Ix(e,t,n,r,s,l,a,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(p){this.onError(p)}}var ws=!1,Gl=null,Jl=!1,ni=null,Lx={onError:function(e){ws=!0,Gl=e}};function Ox(e,t,n,r,s,l,a,i,c){ws=!1,Gl=null,Ix.apply(Lx,arguments)}function $x(e,t,n,r,s,l,a,i,c){if(Ox.apply(this,arguments),ws){if(ws){var d=Gl;ws=!1,Gl=null}else throw Error(D(198));Jl||(Jl=!0,ni=d)}}function ar(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function vf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ru(e){if(ar(e)!==e)throw Error(D(188))}function Ax(e){var t=e.alternate;if(!t){if(t=ar(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return ru(s),e;if(l===r)return ru(s),t;l=l.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=l;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=l;break}if(i===r){a=!0,r=s,n=l;break}i=i.sibling}if(!a){for(i=l.child;i;){if(i===n){a=!0,n=l,r=s;break}if(i===r){a=!0,r=l,n=s;break}i=i.sibling}if(!a)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function yf(e){return e=Ax(e),e!==null?wf(e):null}function wf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=wf(e);if(t!==null)return t;e=e.sibling}return null}var bf=Mt.unstable_scheduleCallback,su=Mt.unstable_cancelCallback,Fx=Mt.unstable_shouldYield,Bx=Mt.unstable_requestPaint,He=Mt.unstable_now,Ux=Mt.unstable_getCurrentPriorityLevel,Gi=Mt.unstable_ImmediatePriority,kf=Mt.unstable_UserBlockingPriority,ql=Mt.unstable_NormalPriority,Hx=Mt.unstable_LowPriority,jf=Mt.unstable_IdlePriority,Mo=null,nn=null;function Wx(e){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(Mo,e,void 0,(e.current.flags&128)===128)}catch(t){}}var Vt=Math.clz32?Math.clz32:Yx,Vx=Math.log,Xx=Math.LN2;function Yx(e){return e>>>=0,e===0?32:31-(Vx(e)/Xx|0)|0}var hl=64,xl=4194304;function gs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Zl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=gs(i):(l&=a,l!==0&&(r=gs(l)))}else a=n&~s,a!==0?r=gs(a):l!==0&&(r=gs(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Vt(t),s=1<<n,r|=e[n],t&=~s;return r}function Kx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qx(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-Vt(l),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=Kx(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function ri(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Sf(){var e=hl;return hl<<=1,!(hl&4194240)&&(hl=64),e}function ua(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Zs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vt(t),e[t]=n}function Gx(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Vt(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function Ji(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Vt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var je=0;function Nf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Cf,qi,Ef,Mf,_f,si=!1,ml=[],Tn=null,Dn=null,Rn=null,zs=new Map,Is=new Map,Nn=[],Jx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lu(e,t){switch(e){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":zs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(t.pointerId)}}function cs(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=tl(t),t!==null&&qi(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function qx(e,t,n,r,s){switch(t){case"focusin":return Tn=cs(Tn,e,t,n,r,s),!0;case"dragenter":return Dn=cs(Dn,e,t,n,r,s),!0;case"mouseover":return Rn=cs(Rn,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return zs.set(l,cs(zs.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,Is.set(l,cs(Is.get(l)||null,e,t,n,r,s)),!0}return!1}function Tf(e){var t=Kn(e.target);if(t!==null){var n=ar(t);if(n!==null){if(t=n.tag,t===13){if(t=vf(n),t!==null){e.blockedOn=t,_f(e.priority,function(){Ef(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $l(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=li(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Za=r,n.target.dispatchEvent(r),Za=null}else return t=tl(n),t!==null&&qi(t),e.blockedOn=n,!1;t.shift()}return!0}function ou(e,t,n){$l(e)&&n.delete(t)}function Zx(){si=!1,Tn!==null&&$l(Tn)&&(Tn=null),Dn!==null&&$l(Dn)&&(Dn=null),Rn!==null&&$l(Rn)&&(Rn=null),zs.forEach(ou),Is.forEach(ou)}function us(e,t){e.blockedOn===t&&(e.blockedOn=null,si||(si=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,Zx)))}function Ls(e){function t(s){return us(s,e)}if(0<ml.length){us(ml[0],e);for(var n=1;n<ml.length;n++){var r=ml[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Tn!==null&&us(Tn,e),Dn!==null&&us(Dn,e),Rn!==null&&us(Rn,e),zs.forEach(t),Is.forEach(t),n=0;n<Nn.length;n++)r=Nn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Nn.length&&(n=Nn[0],n.blockedOn===null);)Tf(n),n.blockedOn===null&&Nn.shift()}var zr=gn.ReactCurrentBatchConfig,eo=!0;function em(e,t,n,r){var s=je,l=zr.transition;zr.transition=null;try{je=1,Zi(e,t,n,r)}finally{je=s,zr.transition=l}}function tm(e,t,n,r){var s=je,l=zr.transition;zr.transition=null;try{je=4,Zi(e,t,n,r)}finally{je=s,zr.transition=l}}function Zi(e,t,n,r){if(eo){var s=li(e,t,n,r);if(s===null)wa(e,t,r,to,n),lu(e,r);else if(qx(s,e,t,n,r))r.stopPropagation();else if(lu(e,r),t&4&&-1<Jx.indexOf(e)){for(;s!==null;){var l=tl(s);if(l!==null&&Cf(l),l=li(e,t,n,r),l===null&&wa(e,t,r,to,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else wa(e,t,r,null,n)}}var to=null;function li(e,t,n,r){if(to=null,e=Qi(r),e=Kn(e),e!==null)if(t=ar(e),t===null)e=null;else if(n=t.tag,n===13){if(e=vf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return to=e,null}function Df(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ux()){case Gi:return 1;case kf:return 4;case ql:case Hx:return 16;case jf:return 536870912;default:return 16}default:return 16}}var En=null,ec=null,Al=null;function Rf(){if(Al)return Al;var e,t=ec,n=t.length,r,s="value"in En?En.value:En.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[l-r];r++);return Al=s.slice(e,1<r?1-r:void 0)}function Fl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gl(){return!0}function au(){return!1}function Tt(e){function t(n,r,s,l,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?gl:au,this.isPropagationStopped=au,this}return Ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gl)},persist:function(){},isPersistent:gl}),t}var Qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tc=Tt(Qr),el=Ae({},Qr,{view:0,detail:0}),nm=Tt(el),da,fa,ds,_o=Ae({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ds&&(ds&&e.type==="mousemove"?(da=e.screenX-ds.screenX,fa=e.screenY-ds.screenY):fa=da=0,ds=e),da)},movementY:function(e){return"movementY"in e?e.movementY:fa}}),iu=Tt(_o),rm=Ae({},_o,{dataTransfer:0}),sm=Tt(rm),lm=Ae({},el,{relatedTarget:0}),pa=Tt(lm),om=Ae({},Qr,{animationName:0,elapsedTime:0,pseudoElement:0}),am=Tt(om),im=Ae({},Qr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cm=Tt(im),um=Ae({},Qr,{data:0}),cu=Tt(um),dm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pm[e])?!!t[e]:!1}function nc(){return hm}var xm=Ae({},el,{key:function(e){if(e.key){var t=dm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nc,charCode:function(e){return e.type==="keypress"?Fl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mm=Tt(xm),gm=Ae({},_o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uu=Tt(gm),vm=Ae({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nc}),ym=Tt(vm),wm=Ae({},Qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),bm=Tt(wm),km=Ae({},_o,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jm=Tt(km),Sm=[9,13,27,32],rc=fn&&"CompositionEvent"in window,bs=null;fn&&"documentMode"in document&&(bs=document.documentMode);var Nm=fn&&"TextEvent"in window&&!bs,Pf=fn&&(!rc||bs&&8<bs&&11>=bs),du=" ",fu=!1;function zf(e,t){switch(e){case"keyup":return Sm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function If(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yr=!1;function Cm(e,t){switch(e){case"compositionend":return If(t);case"keypress":return t.which!==32?null:(fu=!0,du);case"textInput":return e=t.data,e===du&&fu?null:e;default:return null}}function Em(e,t){if(yr)return e==="compositionend"||!rc&&zf(e,t)?(e=Rf(),Al=ec=En=null,yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pf&&t.locale!=="ko"?null:t.data;default:return null}}var Mm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mm[e.type]:t==="textarea"}function Lf(e,t,n,r){pf(r),t=no(t,"onChange"),0<t.length&&(n=new tc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ks=null,Os=null;function _m(e){Yf(e,0)}function To(e){var t=kr(e);if(lf(t))return e}function Tm(e,t){if(e==="change")return t}var Of=!1;if(fn){var ha;if(fn){var xa="oninput"in document;if(!xa){var hu=document.createElement("div");hu.setAttribute("oninput","return;"),xa=typeof hu.oninput=="function"}ha=xa}else ha=!1;Of=ha&&(!document.documentMode||9<document.documentMode)}function xu(){ks&&(ks.detachEvent("onpropertychange",$f),Os=ks=null)}function $f(e){if(e.propertyName==="value"&&To(Os)){var t=[];Lf(t,Os,e,Qi(e)),gf(_m,t)}}function Dm(e,t,n){e==="focusin"?(xu(),ks=t,Os=n,ks.attachEvent("onpropertychange",$f)):e==="focusout"&&xu()}function Rm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return To(Os)}function Pm(e,t){if(e==="click")return To(t)}function zm(e,t){if(e==="input"||e==="change")return To(t)}function Im(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yt=typeof Object.is=="function"?Object.is:Im;function $s(e,t){if(Yt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ba.call(t,s)||!Yt(e[s],t[s]))return!1}return!0}function mu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gu(e,t){var n=mu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mu(n)}}function Af(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Af(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ff(){for(var e=window,t=Ql();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=Ql(e.document)}return t}function sc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Lm(e){var t=Ff(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Af(n.ownerDocument.documentElement,n)){if(r!==null&&sc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=gu(n,l);var a=gu(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Om=fn&&"documentMode"in document&&11>=document.documentMode,wr=null,oi=null,js=null,ai=!1;function vu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ai||wr==null||wr!==Ql(r)||(r=wr,"selectionStart"in r&&sc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),js&&$s(js,r)||(js=r,r=no(oi,"onSelect"),0<r.length&&(t=new tc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=wr)))}function vl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:vl("Animation","AnimationEnd"),animationiteration:vl("Animation","AnimationIteration"),animationstart:vl("Animation","AnimationStart"),transitionend:vl("Transition","TransitionEnd")},ma={},Bf={};fn&&(Bf=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);function Do(e){if(ma[e])return ma[e];if(!br[e])return e;var t=br[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Bf)return ma[e]=t[n];return e}var Uf=Do("animationend"),Hf=Do("animationiteration"),Wf=Do("animationstart"),Vf=Do("transitionend"),Xf=new Map,yu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fn(e,t){Xf.set(e,t),or(t,[e])}for(var ga=0;ga<yu.length;ga++){var va=yu[ga],$m=va.toLowerCase(),Am=va[0].toUpperCase()+va.slice(1);Fn($m,"on"+Am)}Fn(Uf,"onAnimationEnd");Fn(Hf,"onAnimationIteration");Fn(Wf,"onAnimationStart");Fn("dblclick","onDoubleClick");Fn("focusin","onFocus");Fn("focusout","onBlur");Fn(Vf,"onTransitionEnd");$r("onMouseEnter",["mouseout","mouseover"]);$r("onMouseLeave",["mouseout","mouseover"]);$r("onPointerEnter",["pointerout","pointerover"]);$r("onPointerLeave",["pointerout","pointerover"]);or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));or("onBeforeInput",["compositionend","keypress","textInput","paste"]);or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fm=new Set("cancel close invalid load scroll toggle".split(" ").concat(vs));function wu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,$x(r,t,void 0,e),e.currentTarget=null}function Yf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==l&&s.isPropagationStopped())break e;wu(s,i,d),l=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,d=i.currentTarget,i=i.listener,c!==l&&s.isPropagationStopped())break e;wu(s,i,d),l=c}}}if(Jl)throw e=ni,Jl=!1,ni=null,e}function Re(e,t){var n=t[fi];n===void 0&&(n=t[fi]=new Set);var r=e+"__bubble";n.has(r)||(Kf(t,e,2,!1),n.add(r))}function ya(e,t,n){var r=0;t&&(r|=4),Kf(n,e,r,t)}var yl="_reactListening"+Math.random().toString(36).slice(2);function As(e){if(!e[yl]){e[yl]=!0,ef.forEach(function(n){n!=="selectionchange"&&(Fm.has(n)||ya(n,!1,e),ya(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yl]||(t[yl]=!0,ya("selectionchange",!1,t))}}function Kf(e,t,n,r){switch(Df(t)){case 1:var s=em;break;case 4:s=tm;break;default:s=Zi}n=s.bind(null,t,n,e),s=void 0,!ti||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function wa(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=Kn(i),a===null)return;if(c=a.tag,c===5||c===6){r=l=a;continue e}i=i.parentNode}}r=r.return}gf(function(){var d=l,p=Qi(n),f=[];e:{var h=Xf.get(e);if(h!==void 0){var x=tc,w=e;switch(e){case"keypress":if(Fl(n)===0)break e;case"keydown":case"keyup":x=mm;break;case"focusin":w="focus",x=pa;break;case"focusout":w="blur",x=pa;break;case"beforeblur":case"afterblur":x=pa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=iu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=sm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=ym;break;case Uf:case Hf:case Wf:x=am;break;case Vf:x=bm;break;case"scroll":x=nm;break;case"wheel":x=jm;break;case"copy":case"cut":case"paste":x=cm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=uu}var v=(t&4)!==0,b=!v&&e==="scroll",g=v?h!==null?h+"Capture":null:h;v=[];for(var m=d,y;m!==null;){y=m;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,g!==null&&(S=Ps(m,g),S!=null&&v.push(Fs(m,S,y)))),b)break;m=m.return}0<v.length&&(h=new x(h,w,null,n,p),f.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==Za&&(w=n.relatedTarget||n.fromElement)&&(Kn(w)||w[pn]))break e;if((x||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,x?(w=n.relatedTarget||n.toElement,x=d,w=w?Kn(w):null,w!==null&&(b=ar(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=d),x!==w)){if(v=iu,S="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(v=uu,S="onPointerLeave",g="onPointerEnter",m="pointer"),b=x==null?h:kr(x),y=w==null?h:kr(w),h=new v(S,m+"leave",x,n,p),h.target=b,h.relatedTarget=y,S=null,Kn(p)===d&&(v=new v(g,m+"enter",w,n,p),v.target=y,v.relatedTarget=b,S=v),b=S,x&&w)t:{for(v=x,g=w,m=0,y=v;y;y=pr(y))m++;for(y=0,S=g;S;S=pr(S))y++;for(;0<m-y;)v=pr(v),m--;for(;0<y-m;)g=pr(g),y--;for(;m--;){if(v===g||g!==null&&v===g.alternate)break t;v=pr(v),g=pr(g)}v=null}else v=null;x!==null&&bu(f,h,x,v,!1),w!==null&&b!==null&&bu(f,b,w,v,!0)}}e:{if(h=d?kr(d):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var j=Tm;else if(pu(h))if(Of)j=zm;else{j=Rm;var N=Dm}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=Pm);if(j&&(j=j(e,d))){Lf(f,j,n,p);break e}N&&N(e,h,d),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&Ka(h,"number",h.value)}switch(N=d?kr(d):window,e){case"focusin":(pu(N)||N.contentEditable==="true")&&(wr=N,oi=d,js=null);break;case"focusout":js=oi=wr=null;break;case"mousedown":ai=!0;break;case"contextmenu":case"mouseup":case"dragend":ai=!1,vu(f,n,p);break;case"selectionchange":if(Om)break;case"keydown":case"keyup":vu(f,n,p)}var k;if(rc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else yr?zf(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Pf&&n.locale!=="ko"&&(yr||E!=="onCompositionStart"?E==="onCompositionEnd"&&yr&&(k=Rf()):(En=p,ec="value"in En?En.value:En.textContent,yr=!0)),N=no(d,E),0<N.length&&(E=new cu(E,e,null,n,p),f.push({event:E,listeners:N}),k?E.data=k:(k=If(n),k!==null&&(E.data=k)))),(k=Nm?Cm(e,n):Em(e,n))&&(d=no(d,"onBeforeInput"),0<d.length&&(p=new cu("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:d}),p.data=k))}Yf(f,t)})}function Fs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function no(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=Ps(e,n),l!=null&&r.unshift(Fs(e,l,s)),l=Ps(e,t),l!=null&&r.push(Fs(e,l,s))),e=e.return}return r}function pr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bu(e,t,n,r,s){for(var l=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,d=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&d!==null&&(i=d,s?(c=Ps(n,l),c!=null&&a.unshift(Fs(n,c,i))):s||(c=Ps(n,l),c!=null&&a.push(Fs(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Bm=/\r\n?/g,Um=/\u0000|\uFFFD/g;function ku(e){return(typeof e=="string"?e:""+e).replace(Bm,`
`).replace(Um,"")}function wl(e,t,n){if(t=ku(t),ku(e)!==t&&n)throw Error(D(425))}function ro(){}var ii=null,ci=null;function ui(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var di=typeof setTimeout=="function"?setTimeout:void 0,Hm=typeof clearTimeout=="function"?clearTimeout:void 0,ju=typeof Promise=="function"?Promise:void 0,Wm=typeof queueMicrotask=="function"?queueMicrotask:typeof ju!="undefined"?function(e){return ju.resolve(null).then(e).catch(Vm)}:di;function Vm(e){setTimeout(function(){throw e})}function ba(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ls(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ls(t)}function Pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Su(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),tn="__reactFiber$"+Gr,Bs="__reactProps$"+Gr,pn="__reactContainer$"+Gr,fi="__reactEvents$"+Gr,Xm="__reactListeners$"+Gr,Ym="__reactHandles$"+Gr;function Kn(e){var t=e[tn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pn]||n[tn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Su(e);e!==null;){if(n=e[tn])return n;e=Su(e)}return t}e=n,n=e.parentNode}return null}function tl(e){return e=e[tn]||e[pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Ro(e){return e[Bs]||null}var pi=[],jr=-1;function Bn(e){return{current:e}}function ze(e){0>jr||(e.current=pi[jr],pi[jr]=null,jr--)}function _e(e,t){jr++,pi[jr]=e.current,e.current=t}var An={},ct=Bn(An),wt=Bn(!1),er=An;function Ar(e,t){var n=e.type.contextTypes;if(!n)return An;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function bt(e){return e=e.childContextTypes,e!=null}function so(){ze(wt),ze(ct)}function Nu(e,t,n){if(ct.current!==An)throw Error(D(168));_e(ct,t),_e(wt,n)}function Qf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(D(108,Dx(e)||"Unknown",s));return Ae({},n,r)}function lo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||An,er=ct.current,_e(ct,e),_e(wt,wt.current),!0}function Cu(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=Qf(e,t,er),r.__reactInternalMemoizedMergedChildContext=e,ze(wt),ze(ct),_e(ct,e)):ze(wt),_e(wt,n)}var an=null,Po=!1,ka=!1;function Gf(e){an===null?an=[e]:an.push(e)}function Km(e){Po=!0,Gf(e)}function Un(){if(!ka&&an!==null){ka=!0;var e=0,t=je;try{var n=an;for(je=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}an=null,Po=!1}catch(s){throw an!==null&&(an=an.slice(e+1)),bf(Gi,Un),s}finally{je=t,ka=!1}}return null}var Sr=[],Nr=0,oo=null,ao=0,zt=[],It=0,tr=null,cn=1,un="";function Xn(e,t){Sr[Nr++]=ao,Sr[Nr++]=oo,oo=e,ao=t}function Jf(e,t,n){zt[It++]=cn,zt[It++]=un,zt[It++]=tr,tr=e;var r=cn;e=un;var s=32-Vt(r)-1;r&=~(1<<s),n+=1;var l=32-Vt(t)+s;if(30<l){var a=s-s%5;l=(r&(1<<a)-1).toString(32),r>>=a,s-=a,cn=1<<32-Vt(t)+s|n<<s|r,un=l+e}else cn=1<<l|n<<s|r,un=e}function lc(e){e.return!==null&&(Xn(e,1),Jf(e,1,0))}function oc(e){for(;e===oo;)oo=Sr[--Nr],Sr[Nr]=null,ao=Sr[--Nr],Sr[Nr]=null;for(;e===tr;)tr=zt[--It],zt[It]=null,un=zt[--It],zt[It]=null,cn=zt[--It],zt[It]=null}var Et=null,Ct=null,Le=!1,Wt=null;function qf(e,t){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Eu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Et=e,Ct=Pn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Et=e,Ct=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=tr!==null?{id:cn,overflow:un}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Et=e,Ct=null,!0):!1;default:return!1}}function hi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xi(e){if(Le){var t=Ct;if(t){var n=t;if(!Eu(e,t)){if(hi(e))throw Error(D(418));t=Pn(n.nextSibling);var r=Et;t&&Eu(e,t)?qf(r,n):(e.flags=e.flags&-4097|2,Le=!1,Et=e)}}else{if(hi(e))throw Error(D(418));e.flags=e.flags&-4097|2,Le=!1,Et=e}}}function Mu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Et=e}function bl(e){if(e!==Et)return!1;if(!Le)return Mu(e),Le=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ui(e.type,e.memoizedProps)),t&&(t=Ct)){if(hi(e))throw Zf(),Error(D(418));for(;t;)qf(e,t),t=Pn(t.nextSibling)}if(Mu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ct=Pn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ct=null}}else Ct=Et?Pn(e.stateNode.nextSibling):null;return!0}function Zf(){for(var e=Ct;e;)e=Pn(e.nextSibling)}function Fr(){Ct=Et=null,Le=!1}function ac(e){Wt===null?Wt=[e]:Wt.push(e)}var Qm=gn.ReactCurrentBatchConfig;function fs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var i=s.refs;a===null?delete i[l]:i[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function kl(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _u(e){var t=e._init;return t(e._payload)}function ep(e){function t(g,m){if(e){var y=g.deletions;y===null?(g.deletions=[m],g.flags|=16):y.push(m)}}function n(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=On(g,m),g.index=0,g.sibling=null,g}function l(g,m,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<m?(g.flags|=2,m):y):(g.flags|=2,m)):(g.flags|=1048576,m)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,m,y,S){return m===null||m.tag!==6?(m=_a(y,g.mode,S),m.return=g,m):(m=s(m,y),m.return=g,m)}function c(g,m,y,S){var j=y.type;return j===vr?p(g,m,y.props.children,S,y.key):m!==null&&(m.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===kn&&_u(j)===m.type)?(S=s(m,y.props),S.ref=fs(g,m,y),S.return=g,S):(S=Yl(y.type,y.key,y.props,null,g.mode,S),S.ref=fs(g,m,y),S.return=g,S)}function d(g,m,y,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=Ta(y,g.mode,S),m.return=g,m):(m=s(m,y.children||[]),m.return=g,m)}function p(g,m,y,S,j){return m===null||m.tag!==7?(m=qn(y,g.mode,S,j),m.return=g,m):(m=s(m,y),m.return=g,m)}function f(g,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=_a(""+m,g.mode,y),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case dl:return y=Yl(m.type,m.key,m.props,null,g.mode,y),y.ref=fs(g,null,m),y.return=g,y;case gr:return m=Ta(m,g.mode,y),m.return=g,m;case kn:var S=m._init;return f(g,S(m._payload),y)}if(ms(m)||as(m))return m=qn(m,g.mode,y,null),m.return=g,m;kl(g,m)}return null}function h(g,m,y,S){var j=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return j!==null?null:i(g,m,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case dl:return y.key===j?c(g,m,y,S):null;case gr:return y.key===j?d(g,m,y,S):null;case kn:return j=y._init,h(g,m,j(y._payload),S)}if(ms(y)||as(y))return j!==null?null:p(g,m,y,S,null);kl(g,y)}return null}function x(g,m,y,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(y)||null,i(m,g,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case dl:return g=g.get(S.key===null?y:S.key)||null,c(m,g,S,j);case gr:return g=g.get(S.key===null?y:S.key)||null,d(m,g,S,j);case kn:var N=S._init;return x(g,m,y,N(S._payload),j)}if(ms(S)||as(S))return g=g.get(y)||null,p(m,g,S,j,null);kl(m,S)}return null}function w(g,m,y,S){for(var j=null,N=null,k=m,E=m=0,T=null;k!==null&&E<y.length;E++){k.index>E?(T=k,k=null):T=k.sibling;var R=h(g,k,y[E],S);if(R===null){k===null&&(k=T);break}e&&k&&R.alternate===null&&t(g,k),m=l(R,m,E),N===null?j=R:N.sibling=R,N=R,k=T}if(E===y.length)return n(g,k),Le&&Xn(g,E),j;if(k===null){for(;E<y.length;E++)k=f(g,y[E],S),k!==null&&(m=l(k,m,E),N===null?j=k:N.sibling=k,N=k);return Le&&Xn(g,E),j}for(k=r(g,k);E<y.length;E++)T=x(k,g,E,y[E],S),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?E:T.key),m=l(T,m,E),N===null?j=T:N.sibling=T,N=T);return e&&k.forEach(function(I){return t(g,I)}),Le&&Xn(g,E),j}function v(g,m,y,S){var j=as(y);if(typeof j!="function")throw Error(D(150));if(y=j.call(y),y==null)throw Error(D(151));for(var N=j=null,k=m,E=m=0,T=null,R=y.next();k!==null&&!R.done;E++,R=y.next()){k.index>E?(T=k,k=null):T=k.sibling;var I=h(g,k,R.value,S);if(I===null){k===null&&(k=T);break}e&&k&&I.alternate===null&&t(g,k),m=l(I,m,E),N===null?j=I:N.sibling=I,N=I,k=T}if(R.done)return n(g,k),Le&&Xn(g,E),j;if(k===null){for(;!R.done;E++,R=y.next())R=f(g,R.value,S),R!==null&&(m=l(R,m,E),N===null?j=R:N.sibling=R,N=R);return Le&&Xn(g,E),j}for(k=r(g,k);!R.done;E++,R=y.next())R=x(k,g,E,R.value,S),R!==null&&(e&&R.alternate!==null&&k.delete(R.key===null?E:R.key),m=l(R,m,E),N===null?j=R:N.sibling=R,N=R);return e&&k.forEach(function(ae){return t(g,ae)}),Le&&Xn(g,E),j}function b(g,m,y,S){if(typeof y=="object"&&y!==null&&y.type===vr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case dl:e:{for(var j=y.key,N=m;N!==null;){if(N.key===j){if(j=y.type,j===vr){if(N.tag===7){n(g,N.sibling),m=s(N,y.props.children),m.return=g,g=m;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===kn&&_u(j)===N.type){n(g,N.sibling),m=s(N,y.props),m.ref=fs(g,N,y),m.return=g,g=m;break e}n(g,N);break}else t(g,N);N=N.sibling}y.type===vr?(m=qn(y.props.children,g.mode,S,y.key),m.return=g,g=m):(S=Yl(y.type,y.key,y.props,null,g.mode,S),S.ref=fs(g,m,y),S.return=g,g=S)}return a(g);case gr:e:{for(N=y.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(g,m.sibling),m=s(m,y.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else t(g,m);m=m.sibling}m=Ta(y,g.mode,S),m.return=g,g=m}return a(g);case kn:return N=y._init,b(g,m,N(y._payload),S)}if(ms(y))return w(g,m,y,S);if(as(y))return v(g,m,y,S);kl(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,y),m.return=g,g=m):(n(g,m),m=_a(y,g.mode,S),m.return=g,g=m),a(g)):n(g,m)}return b}var Br=ep(!0),tp=ep(!1),io=Bn(null),co=null,Cr=null,ic=null;function cc(){ic=Cr=co=null}function uc(e){var t=io.current;ze(io),e._currentValue=t}function mi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ir(e,t){co=e,ic=Cr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yt=!0),e.firstContext=null)}function $t(e){var t=e._currentValue;if(ic!==e)if(e={context:e,memoizedValue:t,next:null},Cr===null){if(co===null)throw Error(D(308));Cr=e,co.dependencies={lanes:0,firstContext:e}}else Cr=Cr.next=e;return t}var Qn=null;function dc(e){Qn===null?Qn=[e]:Qn.push(e)}function np(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,dc(t)):(n.next=s.next,s.next=n),t.interleaved=n,hn(e,r)}function hn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var jn=!1;function fc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function dn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,hn(e,n)}return s=r.interleaved,s===null?(t.next=t,dc(r)):(t.next=s.next,s.next=t),r.interleaved=t,hn(e,n)}function Bl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ji(e,n)}}function Tu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function uo(e,t,n,r){var s=e.updateQueue;jn=!1;var l=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,d=c.next;c.next=null,a===null?l=d:a.next=d,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,i=p.lastBaseUpdate,i!==a&&(i===null?p.firstBaseUpdate=d:i.next=d,p.lastBaseUpdate=c))}if(l!==null){var f=s.baseState;a=0,p=d=c=null,i=l;do{var h=i.lane,x=i.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var w=e,v=i;switch(h=t,x=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){f=w.call(x,f,h);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,h=typeof w=="function"?w.call(x,f,h):w,h==null)break e;f=Ae({},f,h);break e;case 2:jn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[i]:h.push(i))}else x={eventTime:x,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},p===null?(d=p=x,c=f):p=p.next=x,a|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;h=i,i=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);rr|=a,e.lanes=a,e.memoizedState=f}}function Du(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var nl={},rn=Bn(nl),Us=Bn(nl),Hs=Bn(nl);function Gn(e){if(e===nl)throw Error(D(174));return e}function pc(e,t){switch(_e(Hs,t),_e(Us,e),_e(rn,nl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ga(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ga(t,e)}ze(rn),_e(rn,t)}function Ur(){ze(rn),ze(Us),ze(Hs)}function sp(e){Gn(Hs.current);var t=Gn(rn.current),n=Ga(t,e.type);t!==n&&(_e(Us,e),_e(rn,n))}function hc(e){Us.current===e&&(ze(rn),ze(Us))}var Oe=Bn(0);function fo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=[];function xc(){for(var e=0;e<ja.length;e++)ja[e]._workInProgressVersionPrimary=null;ja.length=0}var Ul=gn.ReactCurrentDispatcher,Sa=gn.ReactCurrentBatchConfig,nr=0,$e=null,Ye=null,qe=null,po=!1,Ss=!1,Ws=0,Gm=0;function ot(){throw Error(D(321))}function mc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yt(e[n],t[n]))return!1;return!0}function gc(e,t,n,r,s,l){if(nr=l,$e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ul.current=e===null||e.memoizedState===null?eg:tg,e=n(r,s),Ss){l=0;do{if(Ss=!1,Ws=0,25<=l)throw Error(D(301));l+=1,qe=Ye=null,t.updateQueue=null,Ul.current=ng,e=n(r,s)}while(Ss)}if(Ul.current=ho,t=Ye!==null&&Ye.next!==null,nr=0,qe=Ye=$e=null,po=!1,t)throw Error(D(300));return e}function vc(){var e=Ws!==0;return Ws=0,e}function en(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?$e.memoizedState=qe=e:qe=qe.next=e,qe}function At(){if(Ye===null){var e=$e.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=qe===null?$e.memoizedState:qe.next;if(t!==null)qe=t,Ye=e;else{if(e===null)throw Error(D(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},qe===null?$e.memoizedState=qe=e:qe=qe.next=e}return qe}function Vs(e,t){return typeof t=="function"?t(e):t}function Na(e){var t=At(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=Ye,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var a=s.next;s.next=l.next,l.next=a}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var i=a=null,c=null,d=l;do{var p=d.lane;if((nr&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var f={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=f,a=r):c=c.next=f,$e.lanes|=p,rr|=p}d=d.next}while(d!==null&&d!==l);c===null?a=r:c.next=i,Yt(r,t.memoizedState)||(yt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,$e.lanes|=l,rr|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ca(e){var t=At(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do l=e(l,a.action),a=a.next;while(a!==s);Yt(l,t.memoizedState)||(yt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function lp(){}function op(e,t){var n=$e,r=At(),s=t(),l=!Yt(r.memoizedState,s);if(l&&(r.memoizedState=s,yt=!0),r=r.queue,yc(cp.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,Xs(9,ip.bind(null,n,r,s,t),void 0,null),et===null)throw Error(D(349));nr&30||ap(n,t,s)}return s}function ap(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ip(e,t,n,r){t.value=n,t.getSnapshot=r,up(t)&&dp(e)}function cp(e,t,n){return n(function(){up(t)&&dp(e)})}function up(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yt(e,n)}catch(r){return!0}}function dp(e){var t=hn(e,1);t!==null&&Xt(t,e,1,-1)}function Ru(e){var t=en();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:e},t.queue=e,e=e.dispatch=Zm.bind(null,$e,e),[t.memoizedState,e]}function Xs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function fp(){return At().memoizedState}function Hl(e,t,n,r){var s=en();$e.flags|=e,s.memoizedState=Xs(1|t,n,void 0,r===void 0?null:r)}function zo(e,t,n,r){var s=At();r=r===void 0?null:r;var l=void 0;if(Ye!==null){var a=Ye.memoizedState;if(l=a.destroy,r!==null&&mc(r,a.deps)){s.memoizedState=Xs(t,n,l,r);return}}$e.flags|=e,s.memoizedState=Xs(1|t,n,l,r)}function Pu(e,t){return Hl(8390656,8,e,t)}function yc(e,t){return zo(2048,8,e,t)}function pp(e,t){return zo(4,2,e,t)}function hp(e,t){return zo(4,4,e,t)}function xp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mp(e,t,n){return n=n!=null?n.concat([e]):null,zo(4,4,xp.bind(null,t,e),n)}function wc(){}function gp(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&mc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function vp(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&mc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function yp(e,t,n){return nr&21?(Yt(n,t)||(n=Sf(),$e.lanes|=n,rr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yt=!0),e.memoizedState=n)}function Jm(e,t){var n=je;je=n!==0&&4>n?n:4,e(!0);var r=Sa.transition;Sa.transition={};try{e(!1),t()}finally{je=n,Sa.transition=r}}function wp(){return At().memoizedState}function qm(e,t,n){var r=Ln(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bp(e))kp(t,n);else if(n=np(e,t,n,r),n!==null){var s=ft();Xt(n,e,r,s),jp(n,t,r)}}function Zm(e,t,n){var r=Ln(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bp(e))kp(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,i=l(a,n);if(s.hasEagerState=!0,s.eagerState=i,Yt(i,a)){var c=t.interleaved;c===null?(s.next=s,dc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch(d){}finally{}n=np(e,t,s,r),n!==null&&(s=ft(),Xt(n,e,r,s),jp(n,t,r))}}function bp(e){var t=e.alternate;return e===$e||t!==null&&t===$e}function kp(e,t){Ss=po=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function jp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ji(e,n)}}var ho={readContext:$t,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},eg={readContext:$t,useCallback:function(e,t){return en().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:Pu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Hl(4194308,4,xp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hl(4,2,e,t)},useMemo:function(e,t){var n=en();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=en();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qm.bind(null,$e,e),[r.memoizedState,e]},useRef:function(e){var t=en();return e={current:e},t.memoizedState=e},useState:Ru,useDebugValue:wc,useDeferredValue:function(e){return en().memoizedState=e},useTransition:function(){var e=Ru(!1),t=e[0];return e=Jm.bind(null,e[1]),en().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=$e,s=en();if(Le){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),et===null)throw Error(D(349));nr&30||ap(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,Pu(cp.bind(null,r,l,e),[e]),r.flags|=2048,Xs(9,ip.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=en(),t=et.identifierPrefix;if(Le){var n=un,r=cn;n=(r&~(1<<32-Vt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ws++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Gm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},tg={readContext:$t,useCallback:gp,useContext:$t,useEffect:yc,useImperativeHandle:mp,useInsertionEffect:pp,useLayoutEffect:hp,useMemo:vp,useReducer:Na,useRef:fp,useState:function(){return Na(Vs)},useDebugValue:wc,useDeferredValue:function(e){var t=At();return yp(t,Ye.memoizedState,e)},useTransition:function(){var e=Na(Vs)[0],t=At().memoizedState;return[e,t]},useMutableSource:lp,useSyncExternalStore:op,useId:wp,unstable_isNewReconciler:!1},ng={readContext:$t,useCallback:gp,useContext:$t,useEffect:yc,useImperativeHandle:mp,useInsertionEffect:pp,useLayoutEffect:hp,useMemo:vp,useReducer:Ca,useRef:fp,useState:function(){return Ca(Vs)},useDebugValue:wc,useDeferredValue:function(e){var t=At();return Ye===null?t.memoizedState=e:yp(t,Ye.memoizedState,e)},useTransition:function(){var e=Ca(Vs)[0],t=At().memoizedState;return[e,t]},useMutableSource:lp,useSyncExternalStore:op,useId:wp,unstable_isNewReconciler:!1};function Ut(e,t){if(e&&e.defaultProps){t=Ae({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function gi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ae({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Io={isMounted:function(e){return(e=e._reactInternals)?ar(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ft(),s=Ln(e),l=dn(r,s);l.payload=t,n!=null&&(l.callback=n),t=zn(e,l,s),t!==null&&(Xt(t,e,s,r),Bl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ft(),s=Ln(e),l=dn(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=zn(e,l,s),t!==null&&(Xt(t,e,s,r),Bl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ft(),r=Ln(e),s=dn(n,r);s.tag=2,t!=null&&(s.callback=t),t=zn(e,s,r),t!==null&&(Xt(t,e,r,n),Bl(t,e,r))}};function zu(e,t,n,r,s,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!$s(n,r)||!$s(s,l):!0}function Sp(e,t,n){var r=!1,s=An,l=t.contextType;return typeof l=="object"&&l!==null?l=$t(l):(s=bt(t)?er:ct.current,r=t.contextTypes,l=(r=r!=null)?Ar(e,s):An),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Io,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function Iu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Io.enqueueReplaceState(t,t.state,null)}function vi(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},fc(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=$t(l):(l=bt(t)?er:ct.current,s.context=Ar(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(gi(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Io.enqueueReplaceState(s,s.state,null),uo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Hr(e,t){try{var n="",r=t;do n+=Tx(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function Ea(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function yi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var rg=typeof WeakMap=="function"?WeakMap:Map;function Np(e,t,n){n=dn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){mo||(mo=!0,_i=r),yi(e,t)},n}function Cp(e,t,n){n=dn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){yi(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){yi(e,t),typeof r!="function"&&(In===null?In=new Set([this]):In.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Lu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new rg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=gg.bind(null,e,t,n),t.then(e,e))}function Ou(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $u(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=dn(-1,1),t.tag=2,zn(n,t,1))),n.lanes|=1),e)}var sg=gn.ReactCurrentOwner,yt=!1;function dt(e,t,n,r){t.child=e===null?tp(t,null,n,r):Br(t,e.child,n,r)}function Au(e,t,n,r,s){n=n.render;var l=t.ref;return Ir(t,s),r=gc(e,t,n,r,l,s),n=vc(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,xn(e,t,s)):(Le&&n&&lc(t),t.flags|=1,dt(e,t,r,s),t.child)}function Fu(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!Mc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Ep(e,t,l,r,s)):(e=Yl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:$s,n(a,r)&&e.ref===t.ref)return xn(e,t,s)}return t.flags|=1,e=On(l,r),e.ref=t.ref,e.return=t,t.child=e}function Ep(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if($s(l,r)&&e.ref===t.ref)if(yt=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(yt=!0);else return t.lanes=e.lanes,xn(e,t,s)}return wi(e,t,n,r,s)}function Mp(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Mr,Nt),Nt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(Mr,Nt),Nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,_e(Mr,Nt),Nt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,_e(Mr,Nt),Nt|=r;return dt(e,t,s,n),t.child}function _p(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function wi(e,t,n,r,s){var l=bt(n)?er:ct.current;return l=Ar(t,l),Ir(t,s),n=gc(e,t,n,r,l,s),r=vc(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,xn(e,t,s)):(Le&&r&&lc(t),t.flags|=1,dt(e,t,n,s),t.child)}function Bu(e,t,n,r,s){if(bt(n)){var l=!0;lo(t)}else l=!1;if(Ir(t,s),t.stateNode===null)Wl(e,t),Sp(t,n,r),vi(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=$t(d):(d=bt(n)?er:ct.current,d=Ar(t,d));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==d)&&Iu(t,a,r,d),jn=!1;var h=t.memoizedState;a.state=h,uo(t,r,a,s),c=t.memoizedState,i!==r||h!==c||wt.current||jn?(typeof p=="function"&&(gi(t,n,p,r),c=t.memoizedState),(i=jn||zu(t,n,i,r,h,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,rp(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:Ut(t.type,i),a.props=d,f=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=$t(c):(c=bt(n)?er:ct.current,c=Ar(t,c));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||h!==c)&&Iu(t,a,r,c),jn=!1,h=t.memoizedState,a.state=h,uo(t,r,a,s);var w=t.memoizedState;i!==f||h!==w||wt.current||jn?(typeof x=="function"&&(gi(t,n,x,r),w=t.memoizedState),(d=jn||zu(t,n,d,r,h,w,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return bi(e,t,n,r,l,s)}function bi(e,t,n,r,s,l){_p(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Cu(t,n,!1),xn(e,t,l);r=t.stateNode,sg.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Br(t,e.child,null,l),t.child=Br(t,null,i,l)):dt(e,t,i,l),t.memoizedState=r.state,s&&Cu(t,n,!0),t.child}function Tp(e){var t=e.stateNode;t.pendingContext?Nu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Nu(e,t.context,!1),pc(e,t.containerInfo)}function Uu(e,t,n,r,s){return Fr(),ac(s),t.flags|=256,dt(e,t,n,r),t.child}var ki={dehydrated:null,treeContext:null,retryLane:0};function ji(e){return{baseLanes:e,cachePool:null,transitions:null}}function Dp(e,t,n){var r=t.pendingProps,s=Oe.current,l=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),_e(Oe,s&1),e===null)return xi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=$o(a,r,0,null),e=qn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=ji(n),t.memoizedState=ki,e):bc(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return lg(e,t,a,r,i,s,n);if(l){l=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=On(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?l=On(i,l):(l=qn(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?ji(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=ki,r}return l=e.child,e=l.sibling,r=On(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function bc(e,t){return t=$o({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jl(e,t,n,r){return r!==null&&ac(r),Br(t,e.child,null,n),e=bc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lg(e,t,n,r,s,l,a){if(n)return t.flags&256?(t.flags&=-257,r=Ea(Error(D(422))),jl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=$o({mode:"visible",children:r.children},s,0,null),l=qn(l,s,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Br(t,e.child,null,a),t.child.memoizedState=ji(a),t.memoizedState=ki,l);if(!(t.mode&1))return jl(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(D(419)),r=Ea(l,r,void 0),jl(e,t,a,r)}if(i=(a&e.childLanes)!==0,yt||i){if(r=et,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,hn(e,s),Xt(r,e,s,-1))}return Ec(),r=Ea(Error(D(421))),jl(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=vg.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,Ct=Pn(s.nextSibling),Et=t,Le=!0,Wt=null,e!==null&&(zt[It++]=cn,zt[It++]=un,zt[It++]=tr,cn=e.id,un=e.overflow,tr=t),t=bc(t,r.children),t.flags|=4096,t)}function Hu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),mi(e.return,t,n)}function Ma(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function Rp(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(dt(e,t,r.children,n),r=Oe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hu(e,n,t);else if(e.tag===19)Hu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_e(Oe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&fo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ma(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&fo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ma(t,!0,n,null,l);break;case"together":Ma(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),rr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=On(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=On(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function og(e,t,n){switch(t.tag){case 3:Tp(t),Fr();break;case 5:sp(t);break;case 1:bt(t.type)&&lo(t);break;case 4:pc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;_e(io,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(_e(Oe,Oe.current&1),t.flags|=128,null):n&t.child.childLanes?Dp(e,t,n):(_e(Oe,Oe.current&1),e=xn(e,t,n),e!==null?e.sibling:null);_e(Oe,Oe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Rp(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Oe,Oe.current),r)break;return null;case 22:case 23:return t.lanes=0,Mp(e,t,n)}return xn(e,t,n)}var Pp,Si,zp,Ip;Pp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Si=function(){};zp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Gn(rn.current);var l=null;switch(n){case"input":s=Xa(e,s),r=Xa(e,r),l=[];break;case"select":s=Ae({},s,{value:void 0}),r=Ae({},r,{value:void 0}),l=[];break;case"textarea":s=Qa(e,s),r=Qa(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ro)}Ja(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var i=s[d];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ds.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var c=r[d];if(i=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(l||(l=[]),l.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ds.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Re("scroll",e),l||i===c||(l=[])):(l=l||[]).push(d,c))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};Ip=function(e,t,n,r){n!==r&&(t.flags|=4)};function ps(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function at(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ag(e,t,n){var r=t.pendingProps;switch(oc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(t),null;case 1:return bt(t.type)&&so(),at(t),null;case 3:return r=t.stateNode,Ur(),ze(wt),ze(ct),xc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(bl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wt!==null&&(Ri(Wt),Wt=null))),Si(e,t),at(t),null;case 5:hc(t);var s=Gn(Hs.current);if(n=t.type,e!==null&&t.stateNode!=null)zp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return at(t),null}if(e=Gn(rn.current),bl(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[tn]=t,r[Bs]=l,e=(t.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<vs.length;s++)Re(vs[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":qc(r,l),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Re("invalid",r);break;case"textarea":eu(r,l),Re("invalid",r)}Ja(n,l),s=null;for(var a in l)if(l.hasOwnProperty(a)){var i=l[a];a==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&wl(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&wl(r.textContent,i,e),s=["children",""+i]):Ds.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Re("scroll",r)}switch(n){case"input":fl(r),Zc(r,l,!0);break;case"textarea":fl(r),tu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=ro)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[tn]=t,e[Bs]=r,Pp(e,t,!1,!1),t.stateNode=e;e:{switch(a=qa(n,r),n){case"dialog":Re("cancel",e),Re("close",e),s=r;break;case"iframe":case"object":case"embed":Re("load",e),s=r;break;case"video":case"audio":for(s=0;s<vs.length;s++)Re(vs[s],e);s=r;break;case"source":Re("error",e),s=r;break;case"img":case"image":case"link":Re("error",e),Re("load",e),s=r;break;case"details":Re("toggle",e),s=r;break;case"input":qc(e,r),s=Xa(e,r),Re("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ae({},r,{value:void 0}),Re("invalid",e);break;case"textarea":eu(e,r),s=Qa(e,r),Re("invalid",e);break;default:s=r}Ja(n,s),i=s;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?ff(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&uf(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Rs(e,c):typeof c=="number"&&Rs(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ds.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Re("scroll",e):c!=null&&Vi(e,l,c,a))}switch(n){case"input":fl(e),Zc(e,r,!1);break;case"textarea":fl(e),tu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+$n(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Dr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Dr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ro)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return at(t),null;case 6:if(e&&t.stateNode!=null)Ip(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=Gn(Hs.current),Gn(rn.current),bl(t)){if(r=t.stateNode,n=t.memoizedProps,r[tn]=t,(l=r.nodeValue!==n)&&(e=Et,e!==null))switch(e.tag){case 3:wl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wl(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tn]=t,t.stateNode=r}return at(t),null;case 13:if(ze(Oe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Le&&Ct!==null&&t.mode&1&&!(t.flags&128))Zf(),Fr(),t.flags|=98560,l=!1;else if(l=bl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(D(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(D(317));l[tn]=t}else Fr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;at(t),l=!1}else Wt!==null&&(Ri(Wt),Wt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Oe.current&1?Qe===0&&(Qe=3):Ec())),t.updateQueue!==null&&(t.flags|=4),at(t),null);case 4:return Ur(),Si(e,t),e===null&&As(t.stateNode.containerInfo),at(t),null;case 10:return uc(t.type._context),at(t),null;case 17:return bt(t.type)&&so(),at(t),null;case 19:if(ze(Oe),l=t.memoizedState,l===null)return at(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)ps(l,!1);else{if(Qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=fo(e),a!==null){for(t.flags|=128,ps(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _e(Oe,Oe.current&1|2),t.child}e=e.sibling}l.tail!==null&&He()>Wr&&(t.flags|=128,r=!0,ps(l,!1),t.lanes=4194304)}else{if(!r)if(e=fo(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ps(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!Le)return at(t),null}else 2*He()-l.renderingStartTime>Wr&&n!==1073741824&&(t.flags|=128,r=!0,ps(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=He(),t.sibling=null,n=Oe.current,_e(Oe,r?n&1|2:n&1),t):(at(t),null);case 22:case 23:return Cc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Nt&1073741824&&(at(t),t.subtreeFlags&6&&(t.flags|=8192)):at(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function ig(e,t){switch(oc(t),t.tag){case 1:return bt(t.type)&&so(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ur(),ze(wt),ze(ct),xc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return hc(t),null;case 13:if(ze(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Fr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(Oe),null;case 4:return Ur(),null;case 10:return uc(t.type._context),null;case 22:case 23:return Cc(),null;case 24:return null;default:return null}}var Sl=!1,it=!1,cg=typeof WeakSet=="function"?WeakSet:Set,V=null;function Er(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(e,t,r)}else n.current=null}function Ni(e,t,n){try{n()}catch(r){Fe(e,t,r)}}var Wu=!1;function ug(e,t){if(ii=eo,e=Ff(),sc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch(S){n=null;break e}var a=0,i=-1,c=-1,d=0,p=0,f=e,h=null;t:for(;;){for(var x;f!==n||s!==0&&f.nodeType!==3||(i=a+s),f!==l||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)h=f,f=x;for(;;){if(f===e)break t;if(h===n&&++d===s&&(i=a),h===l&&++p===r&&(c=a),(x=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=x}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ci={focusedElem:e,selectionRange:n},eo=!1,V=t;V!==null;)if(t=V,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,V=e;else for(;V!==null;){t=V;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,b=w.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:Ut(t.type,v),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(S){Fe(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}return w=Wu,Wu=!1,w}function Ns(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&Ni(t,n,l)}s=s.next}while(s!==r)}}function Lo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ci(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Lp(e){var t=e.alternate;t!==null&&(e.alternate=null,Lp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[tn],delete t[Bs],delete t[fi],delete t[Xm],delete t[Ym])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Op(e){return e.tag===5||e.tag===3||e.tag===4}function Vu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Op(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ei(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ro));else if(r!==4&&(e=e.child,e!==null))for(Ei(e,t,n),e=e.sibling;e!==null;)Ei(e,t,n),e=e.sibling}function Mi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Mi(e,t,n),e=e.sibling;e!==null;)Mi(e,t,n),e=e.sibling}var nt=null,Ht=!1;function bn(e,t,n){for(n=n.child;n!==null;)$p(e,t,n),n=n.sibling}function $p(e,t,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(Mo,n)}catch(i){}switch(n.tag){case 5:it||Er(n,t);case 6:var r=nt,s=Ht;nt=null,bn(e,t,n),nt=r,Ht=s,nt!==null&&(Ht?(e=nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(Ht?(e=nt,n=n.stateNode,e.nodeType===8?ba(e.parentNode,n):e.nodeType===1&&ba(e,n),Ls(e)):ba(nt,n.stateNode));break;case 4:r=nt,s=Ht,nt=n.stateNode.containerInfo,Ht=!0,bn(e,t,n),nt=r,Ht=s;break;case 0:case 11:case 14:case 15:if(!it&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&Ni(n,t,a),s=s.next}while(s!==r)}bn(e,t,n);break;case 1:if(!it&&(Er(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Fe(n,t,i)}bn(e,t,n);break;case 21:bn(e,t,n);break;case 22:n.mode&1?(it=(r=it)||n.memoizedState!==null,bn(e,t,n),it=r):bn(e,t,n);break;default:bn(e,t,n)}}function Xu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new cg),t.forEach(function(r){var s=yg.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Bt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:nt=i.stateNode,Ht=!1;break e;case 3:nt=i.stateNode.containerInfo,Ht=!0;break e;case 4:nt=i.stateNode.containerInfo,Ht=!0;break e}i=i.return}if(nt===null)throw Error(D(160));$p(l,a,s),nt=null,Ht=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Fe(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ap(t,e),t=t.sibling}function Ap(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bt(t,e),Zt(e),r&4){try{Ns(3,e,e.return),Lo(3,e)}catch(v){Fe(e,e.return,v)}try{Ns(5,e,e.return)}catch(v){Fe(e,e.return,v)}}break;case 1:Bt(t,e),Zt(e),r&512&&n!==null&&Er(n,n.return);break;case 5:if(Bt(t,e),Zt(e),r&512&&n!==null&&Er(n,n.return),e.flags&32){var s=e.stateNode;try{Rs(s,"")}catch(v){Fe(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&of(s,l),qa(i,a);var d=qa(i,l);for(a=0;a<c.length;a+=2){var p=c[a],f=c[a+1];p==="style"?ff(s,f):p==="dangerouslySetInnerHTML"?uf(s,f):p==="children"?Rs(s,f):Vi(s,p,f,d)}switch(i){case"input":Ya(s,l);break;case"textarea":af(s,l);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?Dr(s,!!l.multiple,x,!1):h!==!!l.multiple&&(l.defaultValue!=null?Dr(s,!!l.multiple,l.defaultValue,!0):Dr(s,!!l.multiple,l.multiple?[]:"",!1))}s[Bs]=l}catch(v){Fe(e,e.return,v)}}break;case 6:if(Bt(t,e),Zt(e),r&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(v){Fe(e,e.return,v)}}break;case 3:if(Bt(t,e),Zt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ls(t.containerInfo)}catch(v){Fe(e,e.return,v)}break;case 4:Bt(t,e),Zt(e);break;case 13:Bt(t,e),Zt(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(Sc=He())),r&4&&Xu(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(it=(d=it)||p,Bt(t,e),it=d):Bt(t,e),Zt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(V=e,p=e.child;p!==null;){for(f=V=p;V!==null;){switch(h=V,x=h.child,h.tag){case 0:case 11:case 14:case 15:Ns(4,h,h.return);break;case 1:Er(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(v){Fe(r,n,v)}}break;case 5:Er(h,h.return);break;case 22:if(h.memoizedState!==null){Ku(f);continue}}x!==null?(x.return=h,V=x):Ku(f)}p=p.sibling}e:for(p=null,f=e;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,d?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=df("display",a))}catch(v){Fe(e,e.return,v)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(v){Fe(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Bt(t,e),Zt(e),r&4&&Xu(e);break;case 21:break;default:Bt(t,e),Zt(e)}}function Zt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Op(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Rs(s,""),r.flags&=-33);var l=Vu(e);Mi(e,l,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=Vu(e);Ei(e,i,a);break;default:throw Error(D(161))}}catch(c){Fe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dg(e,t,n){V=e,Fp(e)}function Fp(e,t,n){for(var r=(e.mode&1)!==0;V!==null;){var s=V,l=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Sl;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||it;i=Sl;var d=it;if(Sl=a,(it=c)&&!d)for(V=s;V!==null;)a=V,c=a.child,a.tag===22&&a.memoizedState!==null?Qu(s):c!==null?(c.return=a,V=c):Qu(s);for(;l!==null;)V=l,Fp(l),l=l.sibling;V=s,Sl=i,it=d}Yu(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,V=l):Yu(e)}}function Yu(e){for(;V!==null;){var t=V;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:it||Lo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!it)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ut(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Du(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Du(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&Ls(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}it||t.flags&512&&Ci(t)}catch(h){Fe(t,t.return,h)}}if(t===e){V=null;break}if(n=t.sibling,n!==null){n.return=t.return,V=n;break}V=t.return}}function Ku(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var n=t.sibling;if(n!==null){n.return=t.return,V=n;break}V=t.return}}function Qu(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Lo(4,t)}catch(c){Fe(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Fe(t,s,c)}}var l=t.return;try{Ci(t)}catch(c){Fe(t,l,c)}break;case 5:var a=t.return;try{Ci(t)}catch(c){Fe(t,a,c)}}}catch(c){Fe(t,t.return,c)}if(t===e){V=null;break}var i=t.sibling;if(i!==null){i.return=t.return,V=i;break}V=t.return}}var fg=Math.ceil,xo=gn.ReactCurrentDispatcher,kc=gn.ReactCurrentOwner,Ot=gn.ReactCurrentBatchConfig,me=0,et=null,We=null,rt=0,Nt=0,Mr=Bn(0),Qe=0,Ys=null,rr=0,Oo=0,jc=0,Cs=null,vt=null,Sc=0,Wr=1/0,on=null,mo=!1,_i=null,In=null,Nl=!1,Mn=null,go=0,Es=0,Ti=null,Vl=-1,Xl=0;function ft(){return me&6?He():Vl!==-1?Vl:Vl=He()}function Ln(e){return e.mode&1?me&2&&rt!==0?rt&-rt:Qm.transition!==null?(Xl===0&&(Xl=Sf()),Xl):(e=je,e!==0||(e=window.event,e=e===void 0?16:Df(e.type)),e):1}function Xt(e,t,n,r){if(50<Es)throw Es=0,Ti=null,Error(D(185));Zs(e,n,r),(!(me&2)||e!==et)&&(e===et&&(!(me&2)&&(Oo|=n),Qe===4&&Cn(e,rt)),kt(e,r),n===1&&me===0&&!(t.mode&1)&&(Wr=He()+500,Po&&Un()))}function kt(e,t){var n=e.callbackNode;Qx(e,t);var r=Zl(e,e===et?rt:0);if(r===0)n!==null&&su(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&su(n),t===1)e.tag===0?Km(Gu.bind(null,e)):Gf(Gu.bind(null,e)),Wm(function(){!(me&6)&&Un()}),n=null;else{switch(Nf(r)){case 1:n=Gi;break;case 4:n=kf;break;case 16:n=ql;break;case 536870912:n=jf;break;default:n=ql}n=Kp(n,Bp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Bp(e,t){if(Vl=-1,Xl=0,me&6)throw Error(D(327));var n=e.callbackNode;if(Lr()&&e.callbackNode!==n)return null;var r=Zl(e,e===et?rt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=vo(e,r);else{t=r;var s=me;me|=2;var l=Hp();(et!==e||rt!==t)&&(on=null,Wr=He()+500,Jn(e,t));do try{xg();break}catch(i){Up(e,i)}while(!0);cc(),xo.current=l,me=s,We!==null?t=0:(et=null,rt=0,t=Qe)}if(t!==0){if(t===2&&(s=ri(e),s!==0&&(r=s,t=Di(e,s))),t===1)throw n=Ys,Jn(e,0),Cn(e,r),kt(e,He()),n;if(t===6)Cn(e,r);else{if(s=e.current.alternate,!(r&30)&&!pg(s)&&(t=vo(e,r),t===2&&(l=ri(e),l!==0&&(r=l,t=Di(e,l))),t===1))throw n=Ys,Jn(e,0),Cn(e,r),kt(e,He()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:Yn(e,vt,on);break;case 3:if(Cn(e,r),(r&130023424)===r&&(t=Sc+500-He(),10<t)){if(Zl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){ft(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=di(Yn.bind(null,e,vt,on),t);break}Yn(e,vt,on);break;case 4:if(Cn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Vt(r);l=1<<a,a=t[a],a>s&&(s=a),r&=~l}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fg(r/1960))-r,10<r){e.timeoutHandle=di(Yn.bind(null,e,vt,on),r);break}Yn(e,vt,on);break;case 5:Yn(e,vt,on);break;default:throw Error(D(329))}}}return kt(e,He()),e.callbackNode===n?Bp.bind(null,e):null}function Di(e,t){var n=Cs;return e.current.memoizedState.isDehydrated&&(Jn(e,t).flags|=256),e=vo(e,t),e!==2&&(t=vt,vt=n,t!==null&&Ri(t)),e}function Ri(e){vt===null?vt=e:vt.push.apply(vt,e)}function pg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!Yt(l(),s))return!1}catch(a){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cn(e,t){for(t&=~jc,t&=~Oo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vt(t),r=1<<n;e[n]=-1,t&=~r}}function Gu(e){if(me&6)throw Error(D(327));Lr();var t=Zl(e,0);if(!(t&1))return kt(e,He()),null;var n=vo(e,t);if(e.tag!==0&&n===2){var r=ri(e);r!==0&&(t=r,n=Di(e,r))}if(n===1)throw n=Ys,Jn(e,0),Cn(e,t),kt(e,He()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yn(e,vt,on),kt(e,He()),null}function Nc(e,t){var n=me;me|=1;try{return e(t)}finally{me=n,me===0&&(Wr=He()+500,Po&&Un())}}function sr(e){Mn!==null&&Mn.tag===0&&!(me&6)&&Lr();var t=me;me|=1;var n=Ot.transition,r=je;try{if(Ot.transition=null,je=1,e)return e()}finally{je=r,Ot.transition=n,me=t,!(me&6)&&Un()}}function Cc(){Nt=Mr.current,ze(Mr)}function Jn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Hm(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(oc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&so();break;case 3:Ur(),ze(wt),ze(ct),xc();break;case 5:hc(r);break;case 4:Ur();break;case 13:ze(Oe);break;case 19:ze(Oe);break;case 10:uc(r.type._context);break;case 22:case 23:Cc()}n=n.return}if(et=e,We=e=On(e.current,null),rt=Nt=t,Qe=0,Ys=null,jc=Oo=rr=0,vt=Cs=null,Qn!==null){for(t=0;t<Qn.length;t++)if(n=Qn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=s,r.next=a}n.pending=r}Qn=null}return e}function Up(e,t){do{var n=We;try{if(cc(),Ul.current=ho,po){for(var r=$e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}po=!1}if(nr=0,qe=Ye=$e=null,Ss=!1,Ws=0,kc.current=null,n===null||n.return===null){Qe=1,Ys=t,We=null;break}e:{var l=e,a=n.return,i=n,c=t;if(t=rt,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=i,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=Ou(a);if(x!==null){x.flags&=-257,$u(x,a,i,l,t),x.mode&1&&Lu(l,d,t),t=x,c=d;var w=t.updateQueue;if(w===null){var v=new Set;v.add(c),t.updateQueue=v}else w.add(c);break e}else{if(!(t&1)){Lu(l,d,t),Ec();break e}c=Error(D(426))}}else if(Le&&i.mode&1){var b=Ou(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),$u(b,a,i,l,t),ac(Hr(c,i));break e}}l=c=Hr(c,i),Qe!==4&&(Qe=2),Cs===null?Cs=[l]:Cs.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var g=Np(l,c,t);Tu(l,g);break e;case 1:i=c;var m=l.type,y=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(In===null||!In.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t;var S=Cp(l,i,t);Tu(l,S);break e}}l=l.return}while(l!==null)}Vp(n)}catch(j){t=j,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function Hp(){var e=xo.current;return xo.current=ho,e===null?ho:e}function Ec(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),et===null||!(rr&268435455)&&!(Oo&268435455)||Cn(et,rt)}function vo(e,t){var n=me;me|=2;var r=Hp();(et!==e||rt!==t)&&(on=null,Jn(e,t));do try{hg();break}catch(s){Up(e,s)}while(!0);if(cc(),me=n,xo.current=r,We!==null)throw Error(D(261));return et=null,rt=0,Qe}function hg(){for(;We!==null;)Wp(We)}function xg(){for(;We!==null&&!Fx();)Wp(We)}function Wp(e){var t=Yp(e.alternate,e,Nt);e.memoizedProps=e.pendingProps,t===null?Vp(e):We=t,kc.current=null}function Vp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ig(n,t),n!==null){n.flags&=32767,We=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qe=6,We=null;return}}else if(n=ag(n,t,Nt),n!==null){We=n;return}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Qe===0&&(Qe=5)}function Yn(e,t,n){var r=je,s=Ot.transition;try{Ot.transition=null,je=1,mg(e,t,n,r)}finally{Ot.transition=s,je=r}return null}function mg(e,t,n,r){do Lr();while(Mn!==null);if(me&6)throw Error(D(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Gx(e,l),e===et&&(We=et=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nl||(Nl=!0,Kp(ql,function(){return Lr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Ot.transition,Ot.transition=null;var a=je;je=1;var i=me;me|=4,kc.current=null,ug(e,n),Ap(n,e),Lm(ci),eo=!!ii,ci=ii=null,e.current=n,dg(n),Bx(),me=i,je=a,Ot.transition=l}else e.current=n;if(Nl&&(Nl=!1,Mn=e,go=s),l=e.pendingLanes,l===0&&(In=null),Wx(n.stateNode),kt(e,He()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(mo)throw mo=!1,e=_i,_i=null,e;return go&1&&e.tag!==0&&Lr(),l=e.pendingLanes,l&1?e===Ti?Es++:(Es=0,Ti=e):Es=0,Un(),null}function Lr(){if(Mn!==null){var e=Nf(go),t=Ot.transition,n=je;try{if(Ot.transition=null,je=16>e?16:e,Mn===null)var r=!1;else{if(e=Mn,Mn=null,go=0,me&6)throw Error(D(331));var s=me;for(me|=4,V=e.current;V!==null;){var l=V,a=l.child;if(V.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(V=d;V!==null;){var p=V;switch(p.tag){case 0:case 11:case 15:Ns(8,p,l)}var f=p.child;if(f!==null)f.return=p,V=f;else for(;V!==null;){p=V;var h=p.sibling,x=p.return;if(Lp(p),p===d){V=null;break}if(h!==null){h.return=x,V=h;break}V=x}}}var w=l.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}V=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,V=a;else e:for(;V!==null;){if(l=V,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ns(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,V=g;break e}V=l.return}}var m=e.current;for(V=m;V!==null;){a=V;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,V=y;else e:for(a=m;V!==null;){if(i=V,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Lo(9,i)}}catch(j){Fe(i,i.return,j)}if(i===a){V=null;break e}var S=i.sibling;if(S!==null){S.return=i.return,V=S;break e}V=i.return}}if(me=s,Un(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(Mo,e)}catch(j){}r=!0}return r}finally{je=n,Ot.transition=t}}return!1}function Ju(e,t,n){t=Hr(n,t),t=Np(e,t,1),e=zn(e,t,1),t=ft(),e!==null&&(Zs(e,1,t),kt(e,t))}function Fe(e,t,n){if(e.tag===3)Ju(e,e,n);else for(;t!==null;){if(t.tag===3){Ju(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(In===null||!In.has(r))){e=Hr(n,e),e=Cp(t,e,1),t=zn(t,e,1),e=ft(),t!==null&&(Zs(t,1,e),kt(t,e));break}}t=t.return}}function gg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ft(),e.pingedLanes|=e.suspendedLanes&n,et===e&&(rt&n)===n&&(Qe===4||Qe===3&&(rt&130023424)===rt&&500>He()-Sc?Jn(e,0):jc|=n),kt(e,t)}function Xp(e,t){t===0&&(e.mode&1?(t=xl,xl<<=1,!(xl&130023424)&&(xl=4194304)):t=1);var n=ft();e=hn(e,t),e!==null&&(Zs(e,t,n),kt(e,n))}function vg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Xp(e,n)}function yg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),Xp(e,n)}var Yp;Yp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||wt.current)yt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return yt=!1,og(e,t,n);yt=!!(e.flags&131072)}else yt=!1,Le&&t.flags&1048576&&Jf(t,ao,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wl(e,t),e=t.pendingProps;var s=Ar(t,ct.current);Ir(t,n),s=gc(null,t,r,e,s,n);var l=vc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bt(r)?(l=!0,lo(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,fc(t),s.updater=Io,t.stateNode=s,s._reactInternals=t,vi(t,r,e,n),t=bi(null,t,r,!0,l,n)):(t.tag=0,Le&&l&&lc(t),dt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=bg(r),e=Ut(r,e),s){case 0:t=wi(null,t,r,e,n);break e;case 1:t=Bu(null,t,r,e,n);break e;case 11:t=Au(null,t,r,e,n);break e;case 14:t=Fu(null,t,r,Ut(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ut(r,s),wi(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ut(r,s),Bu(e,t,r,s,n);case 3:e:{if(Tp(t),e===null)throw Error(D(387));r=t.pendingProps,l=t.memoizedState,s=l.element,rp(e,t),uo(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Hr(Error(D(423)),t),t=Uu(e,t,r,n,s);break e}else if(r!==s){s=Hr(Error(D(424)),t),t=Uu(e,t,r,n,s);break e}else for(Ct=Pn(t.stateNode.containerInfo.firstChild),Et=t,Le=!0,Wt=null,n=tp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fr(),r===s){t=xn(e,t,n);break e}dt(e,t,r,n)}t=t.child}return t;case 5:return sp(t),e===null&&xi(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,a=s.children,ui(r,s)?a=null:l!==null&&ui(r,l)&&(t.flags|=32),_p(e,t),dt(e,t,a,n),t.child;case 6:return e===null&&xi(t),null;case 13:return Dp(e,t,n);case 4:return pc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Br(t,null,r,n):dt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ut(r,s),Au(e,t,r,s,n);case 7:return dt(e,t,t.pendingProps,n),t.child;case 8:return dt(e,t,t.pendingProps.children,n),t.child;case 12:return dt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,a=s.value,_e(io,r._currentValue),r._currentValue=a,l!==null)if(Yt(l.value,a)){if(l.children===s.children&&!wt.current){t=xn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){a=l.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=dn(-1,n&-n),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),mi(l.return,n,t),i.lanes|=n;break}c=c.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(D(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),mi(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}dt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ir(t,n),s=$t(s),r=r(s),t.flags|=1,dt(e,t,r,n),t.child;case 14:return r=t.type,s=Ut(r,t.pendingProps),s=Ut(r.type,s),Fu(e,t,r,s,n);case 15:return Ep(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ut(r,s),Wl(e,t),t.tag=1,bt(r)?(e=!0,lo(t)):e=!1,Ir(t,n),Sp(t,r,s),vi(t,r,s,n),bi(null,t,r,!0,e,n);case 19:return Rp(e,t,n);case 22:return Mp(e,t,n)}throw Error(D(156,t.tag))};function Kp(e,t){return bf(e,t)}function wg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,t,n,r){return new wg(e,t,n,r)}function Mc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bg(e){if(typeof e=="function")return Mc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Yi)return 11;if(e===Ki)return 14}return 2}function On(e,t){var n=e.alternate;return n===null?(n=Lt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Yl(e,t,n,r,s,l){var a=2;if(r=e,typeof e=="function")Mc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case vr:return qn(n.children,s,l,t);case Xi:a=8,s|=8;break;case Ua:return e=Lt(12,n,t,s|2),e.elementType=Ua,e.lanes=l,e;case Ha:return e=Lt(13,n,t,s),e.elementType=Ha,e.lanes=l,e;case Wa:return e=Lt(19,n,t,s),e.elementType=Wa,e.lanes=l,e;case rf:return $o(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tf:a=10;break e;case nf:a=9;break e;case Yi:a=11;break e;case Ki:a=14;break e;case kn:a=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=Lt(a,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function qn(e,t,n,r){return e=Lt(7,e,r,t),e.lanes=n,e}function $o(e,t,n,r){return e=Lt(22,e,r,t),e.elementType=rf,e.lanes=n,e.stateNode={isHidden:!1},e}function _a(e,t,n){return e=Lt(6,e,null,t),e.lanes=n,e}function Ta(e,t,n){return t=Lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kg(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ua(0),this.expirationTimes=ua(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ua(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _c(e,t,n,r,s,l,a,i,c){return e=new kg(e,t,n,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Lt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fc(l),e}function jg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Qp(e){if(!e)return An;e=e._reactInternals;e:{if(ar(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(bt(n))return Qf(e,n,t)}return t}function Gp(e,t,n,r,s,l,a,i,c){return e=_c(n,r,!0,e,s,l,a,i,c),e.context=Qp(null),n=e.current,r=ft(),s=Ln(n),l=dn(r,s),l.callback=t!=null?t:null,zn(n,l,s),e.current.lanes=s,Zs(e,s,r),kt(e,r),e}function Ao(e,t,n,r){var s=t.current,l=ft(),a=Ln(s);return n=Qp(n),t.context===null?t.context=n:t.pendingContext=n,t=dn(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=zn(s,t,a),e!==null&&(Xt(e,s,a,l),Bl(e,s,a)),a}function yo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Tc(e,t){qu(e,t),(e=e.alternate)&&qu(e,t)}function Sg(){return null}var Jp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Dc(e){this._internalRoot=e}Fo.prototype.render=Dc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));Ao(e,t,null,null)};Fo.prototype.unmount=Dc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;sr(function(){Ao(null,e,null,null)}),t[pn]=null}};function Fo(e){this._internalRoot=e}Fo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nn.length&&t!==0&&t<Nn[n].priority;n++);Nn.splice(n,0,e),n===0&&Tf(e)}};function Rc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zu(){}function Ng(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var d=yo(a);l.call(d)}}var a=Gp(t,r,e,0,null,!1,!1,"",Zu);return e._reactRootContainer=a,e[pn]=a.current,As(e.nodeType===8?e.parentNode:e),sr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var d=yo(c);i.call(d)}}var c=_c(e,0,!1,null,null,!1,!1,"",Zu);return e._reactRootContainer=c,e[pn]=c.current,As(e.nodeType===8?e.parentNode:e),sr(function(){Ao(t,c,n,r)}),c}function Uo(e,t,n,r,s){var l=n._reactRootContainer;if(l){var a=l;if(typeof s=="function"){var i=s;s=function(){var c=yo(a);i.call(c)}}Ao(t,a,e,s)}else a=Ng(n,t,e,s,r);return yo(a)}Cf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gs(t.pendingLanes);n!==0&&(Ji(t,n|1),kt(t,He()),!(me&6)&&(Wr=He()+500,Un()))}break;case 13:sr(function(){var r=hn(e,1);if(r!==null){var s=ft();Xt(r,e,1,s)}}),Tc(e,1)}};qi=function(e){if(e.tag===13){var t=hn(e,134217728);if(t!==null){var n=ft();Xt(t,e,134217728,n)}Tc(e,134217728)}};Ef=function(e){if(e.tag===13){var t=Ln(e),n=hn(e,t);if(n!==null){var r=ft();Xt(n,e,t,r)}Tc(e,t)}};Mf=function(){return je};_f=function(e,t){var n=je;try{return je=e,t()}finally{je=n}};ei=function(e,t,n){switch(t){case"input":if(Ya(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Ro(r);if(!s)throw Error(D(90));lf(r),Ya(r,s)}}}break;case"textarea":af(e,n);break;case"select":t=n.value,t!=null&&Dr(e,!!n.multiple,t,!1)}};xf=Nc;mf=sr;var Cg={usingClientEntryPoint:!1,Events:[tl,kr,Ro,pf,hf,Nc]},hs={findFiberByHostInstance:Kn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Eg={bundleType:hs.bundleType,version:hs.version,rendererPackageName:hs.rendererPackageName,rendererConfig:hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yf(e),e===null?null:e.stateNode},findFiberByHostInstance:hs.findFiberByHostInstance||Sg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{Mo=Cl.inject(Eg),nn=Cl}catch(e){}}_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cg;_t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rc(t))throw Error(D(200));return jg(e,t,null,n)};_t.createRoot=function(e,t){if(!Rc(e))throw Error(D(299));var n=!1,r="",s=Jp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=_c(e,1,!1,null,null,n,!1,r,s),e[pn]=t.current,As(e.nodeType===8?e.parentNode:e),new Dc(t)};_t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=yf(t),e=e===null?null:e.stateNode,e};_t.flushSync=function(e){return sr(e)};_t.hydrate=function(e,t,n){if(!Bo(t))throw Error(D(200));return Uo(null,e,t,!0,n)};_t.hydrateRoot=function(e,t,n){if(!Rc(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",a=Jp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Gp(t,null,e,1,n!=null?n:null,s,!1,l,a),e[pn]=t.current,As(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Fo(t)};_t.render=function(e,t,n){if(!Bo(t))throw Error(D(200));return Uo(null,e,t,!1,n)};_t.unmountComponentAtNode=function(e){if(!Bo(e))throw Error(D(40));return e._reactRootContainer?(sr(function(){Uo(null,null,e,!1,function(){e._reactRootContainer=null,e[pn]=null})}),!0):!1};_t.unstable_batchedUpdates=Nc;_t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bo(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return Uo(e,t,n,!1,r)};_t.version="18.3.1-next-f1338f8080-20240426";function qp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qp)}catch(e){console.error(e)}}qp(),Jd.exports=_t;var _r=Jd.exports,ed=_r;Fa.createRoot=ed.createRoot,Fa.hydrateRoot=ed.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ks(){return Ks=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ks.apply(this,arguments)}var _n;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(_n||(_n={}));const td="popstate";function Mg(e){e===void 0&&(e={});function t(s,l){let{pathname:a="/",search:i="",hash:c=""}=ir(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Pi("",{pathname:a,search:i,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(s,l){let a=s.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");i=d===-1?c:c.slice(0,d)}return i+"#"+(typeof l=="string"?l:Zp(l))}function r(s,l){Ho(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return Tg(t,n,r,e)}function Ge(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function Ho(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function _g(){return Math.random().toString(36).substr(2,8)}function nd(e,t){return{usr:e.state,key:e.key,idx:t}}function Pi(e,t,n,r){return n===void 0&&(n=null),Ks({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ir(t):t,{state:n,key:t&&t.key||r||_g()})}function Zp(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ir(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Tg(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,a=s.history,i=_n.Pop,c=null,d=p();d==null&&(d=0,a.replaceState(Ks({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function f(){i=_n.Pop;let b=p(),g=b==null?null:b-d;d=b,c&&c({action:i,location:v.location,delta:g})}function h(b,g){i=_n.Push;let m=Pi(v.location,b,g);n&&n(m,b),d=p()+1;let y=nd(m,d),S=v.createHref(m);try{a.pushState(y,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}l&&c&&c({action:i,location:v.location,delta:1})}function x(b,g){i=_n.Replace;let m=Pi(v.location,b,g);n&&n(m,b),d=p();let y=nd(m,d),S=v.createHref(m);a.replaceState(y,"",S),l&&c&&c({action:i,location:v.location,delta:0})}function w(b){let g=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof b=="string"?b:Zp(b);return m=m.replace(/ $/,"%20"),Ge(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let v={get action(){return i},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(td,f),c=b,()=>{s.removeEventListener(td,f),c=null}},createHref(b){return t(s,b)},createURL:w,encodeLocation(b){let g=w(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:x,go(b){return a.go(b)}};return v}var rd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(rd||(rd={}));function Dg(e,t,n){return n===void 0&&(n="/"),Rg(e,t,n)}function Rg(e,t,n,r){let s=typeof t=="string"?ir(t):t,l=nh(s.pathname||"/",n);if(l==null)return null;let a=eh(e);Pg(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let d=Vg(l);i=Ug(a[c],d)}return i}function eh(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,a,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:a,route:l};c.relativePath.startsWith("/")&&(Ge(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Zn([r,c.relativePath]),p=n.concat(c);l.children&&l.children.length>0&&(Ge(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),eh(l.children,t,p,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:Fg(d,l.index),routesMeta:p})};return e.forEach((l,a)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))s(l,a);else for(let c of th(l.path))s(l,a,c)}),t}function th(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let a=th(r.join("/")),i=[];return i.push(...a.map(c=>c===""?l:[l,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Pg(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Bg(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const zg=/^:[\w-]+$/,Ig=3,Lg=2,Og=1,$g=10,Ag=-2,sd=e=>e==="*";function Fg(e,t){let n=e.split("/"),r=n.length;return n.some(sd)&&(r+=Ag),t&&(r+=Lg),n.filter(s=>!sd(s)).reduce((s,l)=>s+(zg.test(l)?Ig:l===""?Og:$g),r)}function Bg(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Ug(e,t,n){let{routesMeta:r}=e,s={},l="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],d=i===r.length-1,p=l==="/"?t:t.slice(l.length)||"/",f=Hg({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),h=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Zn([l,f.pathname]),pathnameBase:qg(Zn([l,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(l=Zn([l,f.pathnameBase]))}return a}function Hg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Wg(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],a=l.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((d,p,f)=>{let{paramName:h,isOptional:x}=p;if(h==="*"){let v=i[f]||"";a=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const w=i[f];return x&&!w?d[h]=void 0:d[h]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:a,pattern:e}}function Wg(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ho(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Vg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ho(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function nh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const Xg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yg=e=>Xg.test(e);function Kg(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?ir(e):e,l;if(n)if(Yg(n))l=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Ho(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?l=ld(n.substring(1),"/"):l=ld(n,t)}else l=t;return{pathname:l,search:Zg(r),hash:ev(s)}}function ld(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Da(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Qg(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Gg(e,t){let n=Qg(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Jg(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=ir(e):(s=Ks({},e),Ge(!s.pathname||!s.pathname.includes("?"),Da("?","pathname","search",s)),Ge(!s.pathname||!s.pathname.includes("#"),Da("#","pathname","hash",s)),Ge(!s.search||!s.search.includes("#"),Da("#","search","hash",s)));let l=e===""||s.pathname==="",a=l?"/":s.pathname,i;if(a==null)i=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}i=f>=0?t[f]:"/"}let c=Kg(s,i),d=a&&a!=="/"&&a.endsWith("/"),p=(l||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const Zn=e=>e.join("/").replace(/\/\/+/g,"/"),qg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Zg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ev=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function tv(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const rh=["post","put","patch","delete"];new Set(rh);const nv=["get",...rh];new Set(nv);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qs(){return Qs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qs.apply(this,arguments)}const Pc=u.createContext(null),rv=u.createContext(null),Wo=u.createContext(null),Vo=u.createContext(null),cr=u.createContext({outlet:null,matches:[],isDataRoute:!1}),sh=u.createContext(null);function Xo(){return u.useContext(Vo)!=null}function zc(){return Xo()||Ge(!1),u.useContext(Vo).location}function lh(e){u.useContext(Wo).static||u.useLayoutEffect(e)}function Ft(){let{isDataRoute:e}=u.useContext(cr);return e?mv():sv()}function sv(){Xo()||Ge(!1);let e=u.useContext(Pc),{basename:t,future:n,navigator:r}=u.useContext(Wo),{matches:s}=u.useContext(cr),{pathname:l}=zc(),a=JSON.stringify(Gg(s,n.v7_relativeSplatPath)),i=u.useRef(!1);return lh(()=>{i.current=!0}),u.useCallback(function(d,p){if(p===void 0&&(p={}),!i.current)return;if(typeof d=="number"){r.go(d);return}let f=Jg(d,JSON.parse(a),l,p.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Zn([t,f.pathname])),(p.replace?r.replace:r.push)(f,p.state,p)},[t,r,a,l,e])}function oh(){let{matches:e}=u.useContext(cr),t=e[e.length-1];return t?t.params:{}}function lv(e,t){return ov(e,t)}function ov(e,t,n,r){Xo()||Ge(!1);let{navigator:s}=u.useContext(Wo),{matches:l}=u.useContext(cr),a=l[l.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=zc(),p;if(t){var f;let b=typeof t=="string"?ir(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Ge(!1),p=b}else p=d;let h=p.pathname||"/",x=h;if(c!=="/"){let b=c.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=Dg(e,{pathname:x}),v=dv(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},i,b.params),pathname:Zn([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Zn([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,n,r);return t&&v?u.createElement(Vo.Provider,{value:{location:Qs({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:_n.Pop}},v):v}function av(){let e=xv(),t=tv(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:s},n):null,null)}const iv=u.createElement(av,null);class cv extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(cr.Provider,{value:this.props.routeContext},u.createElement(sh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uv(e){let{routeContext:t,match:n,children:r}=e,s=u.useContext(Pc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(cr.Provider,{value:t},r)}function dv(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let p=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);p>=0||Ge(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let f=a[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=p),f.route.id){let{loaderData:h,errors:x}=n,w=f.route.loader&&h[f.route.id]===void 0&&(!x||x[f.route.id]===void 0);if(f.route.lazy||w){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,f,h)=>{let x,w=!1,v=null,b=null;n&&(x=i&&f.route.id?i[f.route.id]:void 0,v=f.route.errorElement||iv,c&&(d<0&&h===0?(gv("route-fallback"),w=!0,b=null):d===h&&(w=!0,b=f.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,h+1)),m=()=>{let y;return x?y=v:w?y=b:f.route.Component?y=u.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=p,u.createElement(uv,{match:f,routeContext:{outlet:p,matches:g,isDataRoute:n!=null},children:y})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?u.createElement(cv,{location:n.location,revalidation:n.revalidation,component:v,error:x,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var ah=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ah||{}),ih=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ih||{});function fv(e){let t=u.useContext(Pc);return t||Ge(!1),t}function pv(e){let t=u.useContext(rv);return t||Ge(!1),t}function hv(e){let t=u.useContext(cr);return t||Ge(!1),t}function ch(e){let t=hv(),n=t.matches[t.matches.length-1];return n.route.id||Ge(!1),n.route.id}function xv(){var e;let t=u.useContext(sh),n=pv(),r=ch();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function mv(){let{router:e}=fv(ah.UseNavigateStable),t=ch(ih.UseNavigateStable),n=u.useRef(!1);return lh(()=>{n.current=!0}),u.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Qs({fromRouteId:t},l)))},[e,t])}const od={};function gv(e,t,n){od[e]||(od[e]=!0)}function vv(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ut(e){Ge(!1)}function yv(e){let{basename:t="/",children:n=null,location:r,navigationType:s=_n.Pop,navigator:l,static:a=!1,future:i}=e;Xo()&&Ge(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:l,static:a,future:Qs({v7_relativeSplatPath:!1},i)}),[c,i,l,a]);typeof r=="string"&&(r=ir(r));let{pathname:p="/",search:f="",hash:h="",state:x=null,key:w="default"}=r,v=u.useMemo(()=>{let b=nh(p,c);return b==null?null:{location:{pathname:b,search:f,hash:h,state:x,key:w},navigationType:s}},[c,p,f,h,x,w,s]);return v==null?null:u.createElement(Wo.Provider,{value:d},u.createElement(Vo.Provider,{children:n,value:v}))}function wv(e){let{children:t,location:n}=e;return lv(zi(t),n)}new Promise(()=>{});function zi(e,t){t===void 0&&(t=[]);let n=[];return u.Children.forEach(e,(r,s)=>{if(!u.isValidElement(r))return;let l=[...t,s];if(r.type===u.Fragment){n.push.apply(n,zi(r.props.children,l));return}r.type!==ut&&Ge(!1),!r.props.index||!r.props.children||Ge(!1);let a={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=zi(r.props.children,l)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const bv="6";try{window.__reactRouterVersion=bv}catch(e){}const kv="startTransition",ad=gx[kv];function jv(e){let{basename:t,children:n,future:r,window:s}=e,l=u.useRef();l.current==null&&(l.current=Mg({window:s,v5Compat:!0}));let a=l.current,[i,c]=u.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},p=u.useCallback(f=>{d&&ad?ad(()=>c(f)):c(f)},[c,d]);return u.useLayoutEffect(()=>a.listen(p),[a,p]),u.useEffect(()=>vv(r),[r]),u.createElement(yv,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}var id;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(id||(id={}));var cd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(cd||(cd={}));const Ic="";async function ud(){var r,s;const e=localStorage.getItem("whisper_token");if(e)return e;const t=(s=(r=window.Telegram)==null?void 0:r.WebApp)==null?void 0:s.initData;if(t){const a=await(await fetch(`${Ic}/api/auth/telegram`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:t})})).json();if(a.success&&a.token)return localStorage.setItem("whisper_token",a.token),a.token}const n=new Error("need_login");throw n.code="NEED_LOGIN",n}async function U(e,t={}){let n=await ud();const r=`${Ic}${e}`,s=a=>fetch(r,{...t,cache:"no-store",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`,...t.headers},body:t.body?JSON.stringify(t.body):void 0});let l=await s(n);if(l.status===401&&(localStorage.removeItem("whisper_token"),n=await ud(),l=await s(n)),l.status===204)return null;if(!l.ok){const a=await l.json().catch(()=>({}));throw new Error(a.detail||` (${l.status})`)}return l.json()}async function Sv(e){const n=await(await fetch(`${Ic}/api/auth/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})})).json();if(n.success&&n.token)return localStorage.setItem("whisper_token",n.token),!0;throw new Error(n.detail||"")}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uh=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:a,...i},c)=>u.createElement("svg",{ref:c,...Cv,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:uh("lucide",s),...i},[...a.map(([d,p])=>u.createElement(d,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=(e,t)=>{const n=u.forwardRef(({className:r,...s},l)=>u.createElement(Ev,{ref:l,iconNode:t,className:uh(`lucide-${Nv(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=de("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=de("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=de("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=de("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=de("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=de("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=de("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=de("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=de("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=de("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=de("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=de("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=de("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=de("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=de("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=de("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=de("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=de("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=de("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=de("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=de("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=de("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=de("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=de("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=de("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=de("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=de("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=de("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=de("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=de("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=de("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=de("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=de("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Xv="WhisperMiniDB",Yv=1,Yr="avatars",xh=()=>new Promise((e,t)=>{const n=indexedDB.open(Xv,Yv);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(Yr)||r.createObjectStore(Yr,{keyPath:"key"})}}),Ii=async(e,t)=>{const n=await xh();return new Promise((r,s)=>{const l=n.transaction([Yr],"readwrite");l.objectStore(Yr).put({key:e,base64:t}),l.oncomplete=()=>r(),l.onerror=()=>s(l.error)})},Zr=async e=>{const t=await xh();return new Promise((n,r)=>{const l=t.transaction([Yr],"readonly").objectStore(Yr).get(e);l.onsuccess=()=>{var a;return n(((a=l.result)==null?void 0:a.base64)||null)},l.onerror=()=>r(l.error)})},gt={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function hr({icon:e,label:t,desc:n,disabled:r,onClick:s,badge:l}){const[a,i]=u.useState(!1),c=()=>!r&&i(!0),d=()=>{i(!1),r||s==null||s()};return o.jsxs("button",{className:"flex flex-col items-start rounded-[18px] gap-2 text-left",style:{padding:"16px 14px",background:gt.bg,boxShadow:a?"inset 3px 3px 8px rgba(174,176,182,0.5), inset -3px -3px 8px #ffffff":"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff",opacity:r?.4:1,transform:a?"scale(0.97)":"scale(1)",transition:"transform 0.1s, box-shadow 0.1s",cursor:r?"default":"pointer",WebkitTapHighlightColor:"transparent"},disabled:r,onTouchStart:c,onTouchEnd:d,onMouseDown:c,onMouseUp:d,onMouseLeave:()=>i(!1),children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-[12px]",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))"},children:e}),l&&o.jsx("div",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full",style:{background:"#ef4444",border:"2px solid var(--bg)"}})]}),o.jsxs("div",{className:"pl-1",children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:gt.text},children:t}),o.jsx("div",{className:"mt-0.5 text-[10px] leading-snug",style:{color:gt.textMuted},children:n})]})]})}function pd({children:e}){return o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-[3px]",style:{color:gt.textMuted},children:e})}function Kv(){const e=Ft(),[t,n]=u.useState(()=>{try{return JSON.parse(localStorage.getItem("whisper_profile")||"null")}catch(d){return null}}),[r,s]=u.useState(null),[l,a]=u.useState(!1);u.useEffect(()=>{U("/api/user/profile").then(d=>{n(d),localStorage.setItem("whisper_profile",JSON.stringify(d))}).catch(()=>{}),Zr("user-avatar").then(d=>{d&&s(d)}).catch(function(){}),U("/api/diary/unread-count").then(d=>{d.count>0&&a(!0)}).catch(()=>{})},[]);const i=(t==null?void 0:t.nickname)||"",c=(t==null?void 0:t.background_url)||"";return o.jsxs("div",{className:"flex flex-col overflow-y-auto",style:{background:gt.bg,height:"100%",paddingBottom:16},children:[o.jsxs("div",{className:"flex flex-col px-5",style:{paddingTop:"max(12px, env(safe-area-inset-top))"},children:[o.jsx("h1",{className:"mb-4 text-center text-[17px] font-medium",style:{color:gt.textMuted,letterSpacing:"4px"},children:"W H I S P E R"}),o.jsxs("button",{className:"mb-5 flex w-full items-center gap-4 rounded-[20px] p-5 text-left",style:{background:gt.bg,boxShadow:"6px 6px 14px rgba(174,176,182,0.5), -6px -6px 14px #ffffff"},onClick:()=>e("/profile"),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:52,height:52,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:gt.bg},children:r?o.jsx("img",{src:r,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:22},children:""})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"text-[17px] font-bold truncate",style:{color:gt.text},children:["@",i]}),o.jsxs("div",{className:"mt-0.5 text-[11px] italic",style:{color:gt.textMuted},children:['"',c,'"']})]}),o.jsx(Vr,{size:16,style:{color:gt.textMuted,flexShrink:0}})]}),o.jsx(pd,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(hr,{icon:o.jsx(_v,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/world-books")}),o.jsx(hr,{icon:o.jsx(Tv,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/memories")}),o.jsx(hr,{icon:o.jsx(dh,{size:18,color:"white"}),label:"",desc:"Core Blocks",onClick:()=>e("/assistants")}),o.jsx(hr,{icon:o.jsx(Hv,{size:18,color:"white"}),label:"",desc:"API",onClick:()=>e("/settings")})]}),o.jsx(pd,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(hr,{icon:o.jsx(Mv,{size:18,color:"white"}),label:"",desc:"",badge:l,onClick:()=>e("/diary")}),o.jsx(hr,{icon:o.jsx(Wv,{size:18,color:"white"}),label:"",desc:"",disabled:!0})]}),o.jsx("button",{className:"flex w-full items-center justify-center rounded-[18px] py-4",style:{background:gt.bg,boxShadow:"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff"},onClick:()=>e("/cot"),children:o.jsx(Lv,{size:32,fill:gt.accent,style:{color:gt.accent,animation:"heartbeat 2s ease-in-out infinite"}})})]}),o.jsx("style",{children:`
        @keyframes heartbeat {
          0%, 100% { transform: scale(1); }
          15% { transform: scale(1.15); }
          30% { transform: scale(1); }
          45% { transform: scale(1.1); }
          60% { transform: scale(1); }
        }
      `})]})}function Qv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const Qo=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function es(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Oc(e){return"nodeType"in e}function xt(e){var t,n;return e?es(e)?e:Oc(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function $c(e){const{Document:t}=xt(e);return e instanceof t}function ol(e){return es(e)?!1:e instanceof xt(e).HTMLElement}function mh(e){return e instanceof xt(e).SVGElement}function ts(e){return e?es(e)?e.document:Oc(e)?$c(e)?e:ol(e)||mh(e)?e.ownerDocument:document:document:document}const Kt=Qo?u.useLayoutEffect:u.useEffect;function Go(e){const t=u.useRef(e);return Kt(()=>{t.current=e}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function Gv(){const e=u.useRef(null),t=u.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=u.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Gs(e,t){t===void 0&&(t=[e]);const n=u.useRef(e);return Kt(()=>{n.current!==e&&(n.current=e)},t),n}function al(e,t){const n=u.useRef();return u.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function wo(e){const t=Go(e),n=u.useRef(null),r=u.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function bo(e){const t=u.useRef();return u.useEffect(()=>{t.current=e},[e]),t.current}let Ra={};function il(e,t){return u.useMemo(()=>{if(t)return t;const n=Ra[e]==null?0:Ra[e]+1;return Ra[e]=n,e+"-"+n},[e,t])}function gh(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const i=Object.entries(a);for(const[c,d]of i){const p=l[c];p!=null&&(l[c]=p+e*d)}return l},{...t})}}const Or=gh(1),ko=gh(-1);function Jv(e){return"clientX"in e&&"clientY"in e}function Jo(e){if(!e)return!1;const{KeyboardEvent:t}=xt(e.target);return t&&e instanceof t}function qv(e){if(!e)return!1;const{TouchEvent:t}=xt(e.target);return t&&e instanceof t}function jo(e){if(qv(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Jv(e)?{x:e.clientX,y:e.clientY}:null}const mn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[mn.Translate.toString(e),mn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),hd="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Zv(e){return e.matches(hd)?e:e.querySelector(hd)}const ey={display:"none"};function ty(e){let{id:t,value:n}=e;return Pe.createElement("div",{id:t,style:ey},n)}function ny(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Pe.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function ry(){const[e,t]=u.useState("");return{announce:u.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const vh=u.createContext(null);function sy(e){const t=u.useContext(vh);u.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function ly(){const[e]=u.useState(()=>new Set),t=u.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[u.useCallback(r=>{let{type:s,event:l}=r;e.forEach(a=>{var i;return(i=a[s])==null?void 0:i.call(a,l)})},[e]),t]}const oy={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ay={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function iy(e){let{announcements:t=ay,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=oy}=e;const{announce:l,announcement:a}=ry(),i=il("DndLiveRegion"),[c,d]=u.useState(!1);if(u.useEffect(()=>{d(!0)},[]),sy(u.useMemo(()=>({onDragStart(f){let{active:h}=f;l(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:x}=f;t.onDragMove&&l(t.onDragMove({active:h,over:x}))},onDragOver(f){let{active:h,over:x}=f;l(t.onDragOver({active:h,over:x}))},onDragEnd(f){let{active:h,over:x}=f;l(t.onDragEnd({active:h,over:x}))},onDragCancel(f){let{active:h,over:x}=f;l(t.onDragCancel({active:h,over:x}))}}),[l,t])),!c)return null;const p=Pe.createElement(Pe.Fragment,null,Pe.createElement(ty,{id:r,value:s.draggable}),Pe.createElement(ny,{id:i,announcement:a}));return n?_r.createPortal(p,n):p}var Ke;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ke||(Ke={}));function So(){}function No(e,t){return u.useMemo(()=>({sensor:e,options:t!=null?t:{}}),[e,t])}function yh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Qt=Object.freeze({x:0,y:0});function cy(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function uy(e,t){const n=jo(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function dy(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function fy(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function py(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function xd(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const wh=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=xd(t,t.left,t.top),l=[];for(const a of r){const{id:i}=a,c=n.get(i);if(c){const d=cy(xd(c),s);l.push({id:i,data:{droppableContainer:a,value:d}})}}return l.sort(dy)};function hy(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height),a=s-r,i=l-n;if(r<s&&n<l){const c=t.width*t.height,d=e.width*e.height,p=a*i,f=p/(c+d-p);return Number(f.toFixed(4))}return 0}const xy=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const l of r){const{id:a}=l,i=n.get(a);if(i){const c=hy(i,t);c>0&&s.push({id:a,data:{droppableContainer:l,value:c}})}}return s.sort(fy)};function my(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function bh(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Qt}function gy(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,i)=>({...a,top:a.top+e*i.y,bottom:a.bottom+e*i.y,left:a.left+e*i.x,right:a.right+e*i.x}),{...n})}}const vy=gy(1);function kh(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function yy(e,t,n){const r=kh(t);if(!r)return e;const{scaleX:s,scaleY:l,x:a,y:i}=r,c=e.left-a-(1-s)*parseFloat(n),d=e.top-i-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),p=s?e.width/s:e.width,f=l?e.height/l:e.height;return{width:p,height:f,top:d,right:c+p,bottom:d+f,left:c}}const wy={ignoreTransform:!1};function ns(e,t){t===void 0&&(t=wy);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:p}=xt(e).getComputedStyle(e);d&&(n=yy(n,d,p))}const{top:r,left:s,width:l,height:a,bottom:i,right:c}=n;return{top:r,left:s,width:l,height:a,bottom:i,right:c}}function md(e){return ns(e,{ignoreTransform:!0})}function by(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function ky(e,t){return t===void 0&&(t=xt(e).getComputedStyle(e)),t.position==="fixed"}function jy(e,t){t===void 0&&(t=xt(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=t[s];return typeof l=="string"?n.test(l):!1})}function Ac(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if($c(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!ol(s)||mh(s)||n.includes(s))return n;const l=xt(e).getComputedStyle(s);return s!==e&&jy(s,l)&&n.push(s),ky(s,l)?n:r(s.parentNode)}return e?r(e):n}function jh(e){const[t]=Ac(e,1);return t!=null?t:null}function Pa(e){return!Qo||!e?null:es(e)?e:Oc(e)?$c(e)||e===ts(e).scrollingElement?window:ol(e)?e:null:null}function Sh(e){return es(e)?e.scrollX:e.scrollLeft}function Nh(e){return es(e)?e.scrollY:e.scrollTop}function Li(e){return{x:Sh(e),y:Nh(e)}}var Ze;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ze||(Ze={}));function Ch(e){return!Qo||!e?!1:e===document.scrollingElement}function Eh(e){const t={x:0,y:0},n=Ch(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,l=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:i,maxScroll:r,minScroll:t}}const Sy={x:.2,y:.2};function Ny(e,t,n,r,s){let{top:l,left:a,right:i,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=Sy);const{isTop:d,isBottom:p,isLeft:f,isRight:h}=Eh(e),x={x:0,y:0},w={x:0,y:0},v={height:t.height*s.y,width:t.width*s.x};return!d&&l<=t.top+v.height?(x.y=Ze.Backward,w.y=r*Math.abs((t.top+v.height-l)/v.height)):!p&&c>=t.bottom-v.height&&(x.y=Ze.Forward,w.y=r*Math.abs((t.bottom-v.height-c)/v.height)),!h&&i>=t.right-v.width?(x.x=Ze.Forward,w.x=r*Math.abs((t.right-v.width-i)/v.width)):!f&&a<=t.left+v.width&&(x.x=Ze.Backward,w.x=r*Math.abs((t.left+v.width-a)/v.width)),{direction:x,speed:w}}function Cy(e){if(e===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function Mh(e){return e.reduce((t,n)=>Or(t,Li(n)),Qt)}function Ey(e){return e.reduce((t,n)=>t+Sh(n),0)}function My(e){return e.reduce((t,n)=>t+Nh(n),0)}function _h(e,t){if(t===void 0&&(t=ns),!e)return;const{top:n,left:r,bottom:s,right:l}=t(e);jh(e)&&(s<=0||l<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const _y=[["x",["left","right"],Ey],["y",["top","bottom"],My]];class Fc{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ac(n),s=Mh(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[l,a,i]of _y)for(const c of a)Object.defineProperty(this,c,{get:()=>{const d=i(r),p=s[l]-d;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ms{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Ty(e){const{EventTarget:t}=xt(e);return e instanceof t?e:ts(e)}function za(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Pt;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Pt||(Pt={}));function gd(e){e.preventDefault()}function Dy(e){e.stopPropagation()}var ve;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(ve||(ve={}));const Th={start:[ve.Space,ve.Enter],cancel:[ve.Esc],end:[ve.Space,ve.Enter,ve.Tab]},Ry=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case ve.Right:return{...n,x:n.x+25};case ve.Left:return{...n,x:n.x-25};case ve.Down:return{...n,y:n.y+25};case ve.Up:return{...n,y:n.y-25}}};class Dh{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ms(ts(n)),this.windowListeners=new Ms(xt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Pt.Resize,this.handleCancel),this.windowListeners.add(Pt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Pt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&_h(r),n(Qt)}handleKeyDown(t){if(Jo(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:l=Th,coordinateGetter:a=Ry,scrollBehavior:i="smooth"}=s,{code:c}=t;if(l.end.includes(c)){this.handleEnd(t);return}if(l.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:Qt;this.referenceCoordinates||(this.referenceCoordinates=p);const f=a(t,{active:n,context:r.current,currentCoordinates:p});if(f){const h=ko(f,p),x={x:0,y:0},{scrollableAncestors:w}=r.current;for(const v of w){const b=t.code,{isTop:g,isRight:m,isLeft:y,isBottom:S,maxScroll:j,minScroll:N}=Eh(v),k=Cy(v),E={x:Math.min(b===ve.Right?k.right-k.width/2:k.right,Math.max(b===ve.Right?k.left:k.left+k.width/2,f.x)),y:Math.min(b===ve.Down?k.bottom-k.height/2:k.bottom,Math.max(b===ve.Down?k.top:k.top+k.height/2,f.y))},T=b===ve.Right&&!m||b===ve.Left&&!y,R=b===ve.Down&&!S||b===ve.Up&&!g;if(T&&E.x!==f.x){const I=v.scrollLeft+h.x,ae=b===ve.Right&&I<=j.x||b===ve.Left&&I>=N.x;if(ae&&!h.y){v.scrollTo({left:I,behavior:i});return}ae?x.x=v.scrollLeft-I:x.x=b===ve.Right?v.scrollLeft-j.x:v.scrollLeft-N.x,x.x&&v.scrollBy({left:-x.x,behavior:i});break}else if(R&&E.y!==f.y){const I=v.scrollTop+h.y,ae=b===ve.Down&&I<=j.y||b===ve.Up&&I>=N.y;if(ae&&!h.x){v.scrollTo({top:I,behavior:i});return}ae?x.y=v.scrollTop-I:x.y=b===ve.Down?v.scrollTop-j.y:v.scrollTop-N.y,x.y&&v.scrollBy({top:-x.y,behavior:i});break}}this.handleMove(t,Or(ko(f,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Dh.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Th,onActivation:s}=t,{active:l}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const i=l.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function vd(e){return!!(e&&"distance"in e)}function yd(e){return!!(e&&"delay"in e)}class Bc{constructor(t,n,r){var s;r===void 0&&(r=Ty(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:l}=t,{target:a}=l;this.props=t,this.events=n,this.document=ts(a),this.documentListeners=new Ms(this.document),this.listeners=new Ms(r),this.windowListeners=new Ms(xt(a)),this.initialCoordinates=(s=jo(l))!=null?s:Qt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Pt.Resize,this.handleCancel),this.windowListeners.add(Pt.DragStart,gd),this.windowListeners.add(Pt.VisibilityChange,this.handleCancel),this.windowListeners.add(Pt.ContextMenu,gd),this.documentListeners.add(Pt.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(yd(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(vd(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Pt.Click,Dy,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Pt.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:i}}=l;if(!s)return;const c=(n=jo(t))!=null?n:Qt,d=ko(s,c);if(!r&&i){if(vd(i)){if(i.tolerance!=null&&za(d,i.tolerance))return this.handleCancel();if(za(d,i.distance))return this.handleStart()}if(yd(i)&&za(d,i.tolerance))return this.handleCancel();this.handlePending(i,d);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===ve.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Py={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class qo extends Bc{constructor(t){const{event:n}=t,r=ts(n.target);super(t,Py,r)}}qo.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const zy={move:{name:"mousemove"},end:{name:"mouseup"}};var Oi;(function(e){e[e.RightClick=2]="RightClick"})(Oi||(Oi={}));class Iy extends Bc{constructor(t){super(t,zy,ts(t.event.target))}}Iy.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Oi.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ia={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Uc extends Bc{constructor(t){super(t,Ia)}static setup(){return window.addEventListener(Ia.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ia.move.name,t)};function t(){}}}Uc.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var _s;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(_s||(_s={}));var Co;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Co||(Co={}));function Ly(e){let{acceleration:t,activator:n=_s.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:i=Co.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:p,delta:f,threshold:h}=e;const x=$y({delta:f,disabled:!l}),[w,v]=Gv(),b=u.useRef({x:0,y:0}),g=u.useRef({x:0,y:0}),m=u.useMemo(()=>{switch(n){case _s.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case _s.DraggableRect:return s}},[n,s,c]),y=u.useRef(null),S=u.useCallback(()=>{const N=y.current;if(!N)return;const k=b.current.x*g.current.x,E=b.current.y*g.current.y;N.scrollBy(k,E)},[]),j=u.useMemo(()=>i===Co.TreeOrder?[...d].reverse():d,[i,d]);u.useEffect(()=>{if(!l||!d.length||!m){v();return}for(const N of j){if((r==null?void 0:r(N))===!1)continue;const k=d.indexOf(N),E=p[k];if(!E)continue;const{direction:T,speed:R}=Ny(N,E,m,t,h);for(const I of["x","y"])x[I][T[I]]||(R[I]=0,T[I]=0);if(R.x>0||R.y>0){v(),y.current=N,w(S,a),b.current=R,g.current=T;return}}b.current={x:0,y:0},g.current={x:0,y:0},v()},[t,S,r,v,l,a,JSON.stringify(m),JSON.stringify(x),w,d,j,p,JSON.stringify(h)])}const Oy={x:{[Ze.Backward]:!1,[Ze.Forward]:!1},y:{[Ze.Backward]:!1,[Ze.Forward]:!1}};function $y(e){let{delta:t,disabled:n}=e;const r=bo(t);return al(s=>{if(n||!r||!s)return Oy;const l={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Ze.Backward]:s.x[Ze.Backward]||l.x===-1,[Ze.Forward]:s.x[Ze.Forward]||l.x===1},y:{[Ze.Backward]:s.y[Ze.Backward]||l.y===-1,[Ze.Forward]:s.y[Ze.Forward]||l.y===1}}},[n,t,r])}function Ay(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return al(s=>{var l;return t==null?null:(l=r!=null?r:s)!=null?l:null},[r,t])}function Fy(e,t){return u.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...l]},[]),[e,t])}var Js;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Js||(Js={}));var $i;(function(e){e.Optimized="optimized"})($i||($i={}));const wd=new Map;function By(e,t){let{dragging:n,dependencies:r,config:s}=t;const[l,a]=u.useState(null),{frequency:i,measure:c,strategy:d}=s,p=u.useRef(e),f=b(),h=Gs(f),x=u.useCallback(function(g){g===void 0&&(g=[]),!h.current&&a(m=>m===null?g:m.concat(g.filter(y=>!m.includes(y))))},[h]),w=u.useRef(null),v=al(g=>{if(f&&!n)return wd;if(!g||g===wd||p.current!==e||l!=null){const m=new Map;for(let y of e){if(!y)continue;if(l&&l.length>0&&!l.includes(y.id)&&y.rect.current){m.set(y.id,y.rect.current);continue}const S=y.node.current,j=S?new Fc(c(S),S):null;y.rect.current=j,j&&m.set(y.id,j)}return m}return g},[e,l,n,f,c]);return u.useEffect(()=>{p.current=e},[e]),u.useEffect(()=>{f||x()},[n,f]),u.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),u.useEffect(()=>{f||typeof i!="number"||w.current!==null||(w.current=setTimeout(()=>{x(),w.current=null},i))},[i,f,x,...r]),{droppableRects:v,measureDroppableContainers:x,measuringScheduled:l!=null};function b(){switch(d){case Js.Always:return!1;case Js.BeforeDragging:return n;default:return!n}}}function Hc(e,t){return al(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Uy(e,t){return Hc(e,t)}function Hy(e){let{callback:t,disabled:n}=e;const r=Go(t),s=u.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:l}=window;return new l(r)},[r,n]);return u.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Zo(e){let{callback:t,disabled:n}=e;const r=Go(t),s=u.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:l}=window;return new l(r)},[n]);return u.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Wy(e){return new Fc(ns(e),e)}function bd(e,t,n){t===void 0&&(t=Wy);const[r,s]=u.useState(null);function l(){s(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c!=null?c:n)!=null?d:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=Hy({callback(c){if(e)for(const d of c){const{type:p,target:f}=d;if(p==="childList"&&f instanceof HTMLElement&&f.contains(e)){l();break}}}}),i=Zo({callback:l});return Kt(()=>{l(),e?(i==null||i.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),a==null||a.disconnect())},[e]),r}function Vy(e){const t=Hc(e);return bh(e,t)}const kd=[];function Xy(e){const t=u.useRef(e),n=al(r=>e?r&&r!==kd&&e&&t.current&&e.parentNode===t.current.parentNode?r:Ac(e):kd,[e]);return u.useEffect(()=>{t.current=e},[e]),n}function Yy(e){const[t,n]=u.useState(null),r=u.useRef(e),s=u.useCallback(l=>{const a=Pa(l.target);a&&n(i=>i?(i.set(a,Li(a)),new Map(i)):null)},[]);return u.useEffect(()=>{const l=r.current;if(e!==l){a(l);const i=e.map(c=>{const d=Pa(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,Li(d)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=e}return()=>{a(e),a(l)};function a(i){i.forEach(c=>{const d=Pa(c);d==null||d.removeEventListener("scroll",s)})}},[s,e]),u.useMemo(()=>e.length?t?Array.from(t.values()).reduce((l,a)=>Or(l,a),Qt):Mh(e):Qt,[e,t])}function jd(e,t){t===void 0&&(t=[]);const n=u.useRef(null);return u.useEffect(()=>{n.current=null},t),u.useEffect(()=>{const r=e!==Qt;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?ko(e,n.current):Qt}function Ky(e){u.useEffect(()=>{if(!Qo)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Qy(e,t){return u.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:l}=r;return n[s]=a=>{l(a,t)},n},{}),[e,t])}function Rh(e){return u.useMemo(()=>e?by(e):null,[e])}const Sd=[];function Gy(e,t){t===void 0&&(t=ns);const[n]=e,r=Rh(n?xt(n):null),[s,l]=u.useState(Sd);function a(){l(()=>e.length?e.map(c=>Ch(c)?r:new Fc(t(c),c)):Sd)}const i=Zo({callback:a});return Kt(()=>{i==null||i.disconnect(),a(),e.forEach(c=>i==null?void 0:i.observe(c))},[e]),s}function Ph(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return ol(t)?t:e}function Jy(e){let{measure:t}=e;const[n,r]=u.useState(null),s=u.useCallback(d=>{for(const{target:p}of d)if(ol(p)){r(f=>{const h=t(p);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),l=Zo({callback:s}),a=u.useCallback(d=>{const p=Ph(d);l==null||l.disconnect(),p&&(l==null||l.observe(p)),r(p?t(p):null)},[t,l]),[i,c]=wo(a);return u.useMemo(()=>({nodeRef:i,rect:n,setRef:c}),[n,i,c])}const qy=[{sensor:qo,options:{}},{sensor:Dh,options:{}}],Zy={current:{}},Kl={draggable:{measure:md},droppable:{measure:md,strategy:Js.WhileDragging,frequency:$i.Optimized},dragOverlay:{measure:ns}};class Ts extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const e1={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ts,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:So},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Kl,measureDroppableContainers:So,windowRect:null,measuringScheduled:!1},zh={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:So,draggableNodes:new Map,over:null,measureDroppableContainers:So},cl=u.createContext(zh),Ih=u.createContext(e1);function t1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ts}}}function n1(e,t){switch(t.type){case Ke.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ke.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ke.DragEnd:case Ke.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ke.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Ts(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Ke.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,l=e.droppable.containers.get(n);if(!l||r!==l.key)return e;const a=new Ts(e.droppable.containers);return a.set(n,{...l,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case Ke.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const l=new Ts(e.droppable.containers);return l.delete(n),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function r1(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=u.useContext(cl),l=bo(r),a=bo(n==null?void 0:n.id);return u.useEffect(()=>{if(!t&&!r&&l&&a!=null){if(!Jo(l)||document.activeElement===l.target)return;const i=s.get(a);if(!i)return;const{activatorNode:c,node:d}=i;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[c.current,d.current]){if(!p)continue;const f=Zv(p);if(f){f.focus();break}}})}},[r,t,s,a,l]),null}function Lh(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,l)=>l({transform:s,...r}),n):n}function s1(e){return u.useMemo(()=>({draggable:{...Kl.draggable,...e==null?void 0:e.draggable},droppable:{...Kl.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Kl.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function l1(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const l=u.useRef(!1),{x:a,y:i}=typeof s=="boolean"?{x:s,y:s}:s;Kt(()=>{if(!a&&!i||!t){l.current=!1;return}if(l.current||!r)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const p=n(d),f=bh(p,r);if(a||(f.x=0),i||(f.y=0),l.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=jh(d);h&&h.scrollBy({top:f.y,left:f.x})}},[t,a,i,r,n])}const ea=u.createContext({...Qt,scaleX:1,scaleY:1});var Sn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Sn||(Sn={}));const Oh=u.memo(function(t){var n,r,s,l;let{id:a,accessibility:i,autoScroll:c=!0,children:d,sensors:p=qy,collisionDetection:f=xy,measuring:h,modifiers:x,...w}=t;const v=u.useReducer(n1,void 0,t1),[b,g]=v,[m,y]=ly(),[S,j]=u.useState(Sn.Uninitialized),N=S===Sn.Initialized,{draggable:{active:k,nodes:E,translate:T},droppable:{containers:R}}=b,I=k!=null?E.get(k):null,ae=u.useRef({initial:null,translated:null}),H=u.useMemo(()=>{var Xe;return k!=null?{id:k,data:(Xe=I==null?void 0:I.data)!=null?Xe:Zy,rect:ae}:null},[k,I]),P=u.useRef(null),[G,fe]=u.useState(null),[A,_]=u.useState(null),L=Gs(w,Object.values(w)),K=il("DndDescribedBy",a),q=u.useMemo(()=>R.getEnabled(),[R]),J=s1(h),{droppableRects:Ce,measureDroppableContainers:te,measuringScheduled:be}=By(q,{dragging:N,dependencies:[T.x,T.y],config:J.droppable}),ne=Ay(E,k),Se=u.useMemo(()=>A?jo(A):null,[A]),Be=rs(),Ne=Uy(ne,J.draggable.measure);l1({activeNode:k!=null?E.get(k):null,config:Be.layoutShiftCompensation,initialRect:Ne,measure:J.draggable.measure});const B=bd(ne,J.draggable.measure,Ne),X=bd(ne?ne.parentElement:null),oe=u.useRef({activatorEvent:null,active:null,activeNode:ne,collisionRect:null,collisions:null,droppableRects:Ce,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ie=R.getNodeFor((n=oe.current.over)==null?void 0:n.id),ee=Jy({measure:J.dragOverlay.measure}),pe=(r=ee.nodeRef.current)!=null?r:ne,Te=N?(s=ee.rect)!=null?s:B:null,De=!!(ee.nodeRef.current&&ee.rect),xe=Vy(De?null:B),W=Rh(pe?xt(pe):null),ce=Xy(N?ie!=null?ie:ne:null),ke=Gy(ce),Ie=Lh(x,{transform:{x:T.x-xe.x,y:T.y-xe.y,scaleX:1,scaleY:1},activatorEvent:A,active:H,activeNodeRect:B,containerNodeRect:X,draggingNodeRect:Te,over:oe.current.over,overlayNodeRect:ee.rect,scrollableAncestors:ce,scrollableAncestorRects:ke,windowRect:W}),Rt=Se?Or(Se,T):null,Ve=Yy(ce),Hn=jd(Ve),sn=jd(Ve,[B]),jt=Or(Ie,Hn),Gt=Te?vy(Te,Ie):null,Jt=H&&Gt?f({active:H,collisionRect:Gt,droppableRects:Ce,droppableContainers:q,pointerCoordinates:Rt}):null,Wn=py(Jt,"id"),[St,Vn]=u.useState(null),dr=De?Ie:Or(Ie,sn),O=my(dr,(l=St==null?void 0:St.rect)!=null?l:null,B),he=u.useRef(null),se=u.useCallback((Xe,C)=>{let{sensor:$,options:Y}=C;if(P.current==null)return;const re=E.get(P.current);if(!re)return;const Ee=Xe.nativeEvent,lt=new $({active:P.current,activeNode:re,event:Ee,options:Y,context:oe,onAbort(tt){if(!E.get(tt))return;const{onDragAbort:qt}=L.current,ln={id:tt};qt==null||qt(ln),m({type:"onDragAbort",event:ln})},onPending(tt,yn,qt,ln){if(!E.get(tt))return;const{onDragPending:ls}=L.current,wn={id:tt,constraint:yn,initialCoordinates:qt,offset:ln};ls==null||ls(wn),m({type:"onDragPending",event:wn})},onStart(tt){const yn=P.current;if(yn==null)return;const qt=E.get(yn);if(!qt)return;const{onDragStart:ln}=L.current,ss={activatorEvent:Ee,active:{id:yn,data:qt.data,rect:ae}};_r.unstable_batchedUpdates(()=>{ln==null||ln(ss),j(Sn.Initializing),g({type:Ke.DragStart,initialCoordinates:tt,active:yn}),m({type:"onDragStart",event:ss}),fe(he.current),_(Ee)})},onMove(tt){g({type:Ke.DragMove,coordinates:tt})},onEnd:fr(Ke.DragEnd),onCancel:fr(Ke.DragCancel)});he.current=lt;function fr(tt){return async function(){const{active:qt,collisions:ln,over:ss,scrollAdjustedTranslate:ls}=oe.current;let wn=null;if(qt&&ls){const{cancelDrop:os}=L.current;wn={activatorEvent:Ee,active:qt,collisions:ln,delta:ls,over:ss},tt===Ke.DragEnd&&typeof os=="function"&&await Promise.resolve(os(wn))&&(tt=Ke.DragCancel)}P.current=null,_r.unstable_batchedUpdates(()=>{g({type:tt}),j(Sn.Uninitialized),Vn(null),fe(null),_(null),he.current=null;const os=tt===Ke.DragEnd?"onDragEnd":"onDragCancel";if(wn){const sa=L.current[os];sa==null||sa(wn),m({type:os,event:wn})}})}}},[E]),Me=u.useCallback((Xe,C)=>($,Y)=>{const re=$.nativeEvent,Ee=E.get(Y);if(P.current!==null||!Ee||re.dndKit||re.defaultPrevented)return;const lt={active:Ee};Xe($,C.options,lt)===!0&&(re.dndKit={capturedBy:C.sensor},P.current=Y,se($,C))},[E,se]),mt=Fy(p,Me);Ky(p),Kt(()=>{B&&S===Sn.Initializing&&j(Sn.Initialized)},[B,S]),u.useEffect(()=>{const{onDragMove:Xe}=L.current,{active:C,activatorEvent:$,collisions:Y,over:re}=oe.current;if(!C||!$)return;const Ee={active:C,activatorEvent:$,collisions:Y,delta:{x:jt.x,y:jt.y},over:re};_r.unstable_batchedUpdates(()=>{Xe==null||Xe(Ee),m({type:"onDragMove",event:Ee})})},[jt.x,jt.y]),u.useEffect(()=>{const{active:Xe,activatorEvent:C,collisions:$,droppableContainers:Y,scrollAdjustedTranslate:re}=oe.current;if(!Xe||P.current==null||!C||!re)return;const{onDragOver:Ee}=L.current,lt=Y.get(Wn),fr=lt&&lt.rect.current?{id:lt.id,rect:lt.rect.current,data:lt.data,disabled:lt.disabled}:null,tt={active:Xe,activatorEvent:C,collisions:$,delta:{x:re.x,y:re.y},over:fr};_r.unstable_batchedUpdates(()=>{Vn(fr),Ee==null||Ee(tt),m({type:"onDragOver",event:tt})})},[Wn]),Kt(()=>{oe.current={activatorEvent:A,active:H,activeNode:ne,collisionRect:Gt,collisions:Jt,droppableRects:Ce,draggableNodes:E,draggingNode:pe,draggingNodeRect:Te,droppableContainers:R,over:St,scrollableAncestors:ce,scrollAdjustedTranslate:jt},ae.current={initial:Te,translated:Gt}},[H,ne,Jt,Gt,E,pe,Te,Ce,R,St,ce,jt]),Ly({...Be,delta:T,draggingRect:Gt,pointerCoordinates:Rt,scrollableAncestors:ce,scrollableAncestorRects:ke});const vn=u.useMemo(()=>({active:H,activeNode:ne,activeNodeRect:B,activatorEvent:A,collisions:Jt,containerNodeRect:X,dragOverlay:ee,draggableNodes:E,droppableContainers:R,droppableRects:Ce,over:St,measureDroppableContainers:te,scrollableAncestors:ce,scrollableAncestorRects:ke,measuringConfiguration:J,measuringScheduled:be,windowRect:W}),[H,ne,B,A,Jt,X,ee,E,R,Ce,St,te,ce,ke,J,be,W]),ra=u.useMemo(()=>({activatorEvent:A,activators:mt,active:H,activeNodeRect:B,ariaDescribedById:{draggable:K},dispatch:g,draggableNodes:E,over:St,measureDroppableContainers:te}),[A,mt,H,B,g,K,E,St,te]);return Pe.createElement(vh.Provider,{value:y},Pe.createElement(cl.Provider,{value:ra},Pe.createElement(Ih.Provider,{value:vn},Pe.createElement(ea.Provider,{value:O},d)),Pe.createElement(r1,{disabled:(i==null?void 0:i.restoreFocus)===!1})),Pe.createElement(iy,{...i,hiddenTextDescribedById:K}));function rs(){const Xe=(G==null?void 0:G.autoScrollEnabled)===!1,C=typeof c=="object"?c.enabled===!1:c===!1,$=N&&!Xe&&!C;return typeof c=="object"?{...c,enabled:$}:{enabled:$}}}),o1=u.createContext(null),Nd="button",a1="Draggable";function i1(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const l=il(a1),{activators:a,activatorEvent:i,active:c,activeNodeRect:d,ariaDescribedById:p,draggableNodes:f,over:h}=u.useContext(cl),{role:x=Nd,roleDescription:w="draggable",tabIndex:v=0}=s!=null?s:{},b=(c==null?void 0:c.id)===t,g=u.useContext(b?ea:o1),[m,y]=wo(),[S,j]=wo(),N=Qy(a,t),k=Gs(n);Kt(()=>(f.set(t,{id:t,key:l,node:m,activatorNode:S,data:k}),()=>{const T=f.get(t);T&&T.key===l&&f.delete(t)}),[f,t]);const E=u.useMemo(()=>({role:x,tabIndex:v,"aria-disabled":r,"aria-pressed":b&&x===Nd?!0:void 0,"aria-roledescription":w,"aria-describedby":p.draggable}),[r,x,v,b,w,p.draggable]);return{active:c,activatorEvent:i,activeNodeRect:d,attributes:E,isDragging:b,listeners:r?void 0:N,node:m,over:h,setNodeRef:y,setActivatorNodeRef:j,transform:g}}function $h(){return u.useContext(Ih)}const c1="Droppable",u1={timeout:25};function d1(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const l=il(c1),{active:a,dispatch:i,over:c,measureDroppableContainers:d}=u.useContext(cl),p=u.useRef({disabled:n}),f=u.useRef(!1),h=u.useRef(null),x=u.useRef(null),{disabled:w,updateMeasurementsFor:v,timeout:b}={...u1,...s},g=Gs(v!=null?v:r),m=u.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(g.current)?g.current:[g.current]),x.current=null},b)},[b]),y=Zo({callback:m,disabled:w||!a}),S=u.useCallback((E,T)=>{y&&(T&&(y.unobserve(T),f.current=!1),E&&y.observe(E))},[y]),[j,N]=wo(S),k=Gs(t);return u.useEffect(()=>{!y||!j.current||(y.disconnect(),f.current=!1,y.observe(j.current))},[j,y]),u.useEffect(()=>(i({type:Ke.RegisterDroppable,element:{id:r,key:l,disabled:n,node:j,rect:h,data:k}}),()=>i({type:Ke.UnregisterDroppable,key:l,id:r})),[r]),u.useEffect(()=>{n!==p.current.disabled&&(i({type:Ke.SetDroppableDisabled,id:r,key:l,disabled:n}),p.current.disabled=n)},[r,l,n,i]),{active:a,rect:h,isOver:(c==null?void 0:c.id)===r,node:j,over:c,setNodeRef:N}}function f1(e){let{animation:t,children:n}=e;const[r,s]=u.useState(null),[l,a]=u.useState(null),i=bo(n);return!n&&!r&&i&&s(i),Kt(()=>{if(!l)return;const c=r==null?void 0:r.key,d=r==null?void 0:r.props.id;if(c==null||d==null){s(null);return}Promise.resolve(t(d,l)).then(()=>{s(null)})},[t,r,l]),Pe.createElement(Pe.Fragment,null,n,r?u.cloneElement(r,{ref:a}):null)}const p1={x:0,y:0,scaleX:1,scaleY:1};function h1(e){let{children:t}=e;return Pe.createElement(cl.Provider,{value:zh},Pe.createElement(ea.Provider,{value:p1},t))}const x1={position:"fixed",touchAction:"none"},m1=e=>Jo(e)?"transform 250ms ease":void 0,g1=u.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:l,className:a,rect:i,style:c,transform:d,transition:p=m1}=e;if(!i)return null;const f=s?d:{...d,scaleX:1,scaleY:1},h={...x1,width:i.width,height:i.height,top:i.top,left:i.left,transform:mn.Transform.toString(f),transformOrigin:s&&r?uy(r,i):void 0,transition:typeof p=="function"?p(r):p,...c};return Pe.createElement(n,{className:a,style:h,ref:t},l)}),v1=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:l,className:a}=e;if(l!=null&&l.active)for(const[i,c]of Object.entries(l.active))c!==void 0&&(s[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,c));if(l!=null&&l.dragOverlay)for(const[i,c]of Object.entries(l.dragOverlay))c!==void 0&&r.node.style.setProperty(i,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,d]of Object.entries(s))n.node.style.setProperty(c,d);a!=null&&a.active&&n.node.classList.remove(a.active)}},y1=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:mn.Transform.toString(t)},{transform:mn.Transform.toString(n)}]},w1={duration:250,easing:"ease",keyframes:y1,sideEffects:v1({styles:{active:{opacity:"0"}}})};function b1(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return Go((l,a)=>{if(t===null)return;const i=n.get(l);if(!i)return;const c=i.node.current;if(!c)return;const d=Ph(a);if(!d)return;const{transform:p}=xt(a).getComputedStyle(a),f=kh(p);if(!f)return;const h=typeof t=="function"?t:k1(t);return _h(c,s.draggable.measure),h({active:{id:l,data:i.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function k1(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...w1,...e};return l=>{let{active:a,dragOverlay:i,transform:c,...d}=l;if(!t)return;const p={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},f={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/i.rect.height:1},h={x:c.x-p.x,y:c.y-p.y,...f},x=s({...d,active:a,dragOverlay:i,transform:{initial:c,final:h}}),[w]=x,v=x[x.length-1];if(JSON.stringify(w)===JSON.stringify(v))return;const b=r==null?void 0:r({active:a,dragOverlay:i,...d}),g=i.node.animate(x,{duration:t,easing:n,fill:"forwards"});return new Promise(m=>{g.onfinish=()=>{b==null||b(),m()}})}}let Cd=0;function j1(e){return u.useMemo(()=>{if(e!=null)return Cd++,Cd},[e])}const Ah=Pe.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:l,modifiers:a,wrapperElement:i="div",className:c,zIndex:d=999}=e;const{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggableNodes:w,droppableContainers:v,dragOverlay:b,over:g,measuringConfiguration:m,scrollableAncestors:y,scrollableAncestorRects:S,windowRect:j}=$h(),N=u.useContext(ea),k=j1(f==null?void 0:f.id),E=Lh(a,{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggingNodeRect:b.rect,over:g,overlayNodeRect:b.rect,scrollableAncestors:y,scrollableAncestorRects:S,transform:N,windowRect:j}),T=Hc(h),R=b1({config:r,draggableNodes:w,droppableContainers:v,measuringConfiguration:m}),I=T?b.setRef:void 0;return Pe.createElement(h1,null,Pe.createElement(f1,{animation:R},f&&k?Pe.createElement(g1,{key:k,id:f.id,ref:I,as:i,activatorEvent:p,adjustScale:t,className:c,transition:l,rect:T,style:{zIndex:d,...s},transform:E},n):null))});function ta(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function S1(e,t){return e.reduce((n,r,s)=>{const l=t.get(r);return l&&(n[s]=l),n},Array(e.length))}function El(e){return e!==null&&e>=0}function N1(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function C1(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Fh=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const l=ta(t,r,n),a=t[s],i=l[s];return!i||!a?null:{x:i.left-a.left,y:i.top-a.top,scaleX:i.width/a.width,scaleY:i.height/a.height}},Ml={scaleX:1,scaleY:1},Bh=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:l,overIndex:a}=e;const i=(t=l[n])!=null?t:r;if(!i)return null;if(s===n){const d=l[a];return d?{x:0,y:n<a?d.top+d.height-(i.top+i.height):d.top-i.top,...Ml}:null}const c=E1(l,s,n);return s>n&&s<=a?{x:0,y:-i.height-c,...Ml}:s<n&&s>=a?{x:0,y:i.height+c,...Ml}:{x:0,y:0,...Ml}};function E1(e,t,n){const r=e[t],s=e[t-1],l=e[t+1];return r?n<t?s?r.top-(s.top+s.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Uh="Sortable",Hh=Pe.createContext({activeIndex:-1,containerId:Uh,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Fh,disabled:{draggable:!1,droppable:!1}});function Wh(e){let{children:t,id:n,items:r,strategy:s=Fh,disabled:l=!1}=e;const{active:a,dragOverlay:i,droppableRects:c,over:d,measureDroppableContainers:p}=$h(),f=il(Uh,n),h=i.rect!==null,x=u.useMemo(()=>r.map(N=>typeof N=="object"&&"id"in N?N.id:N),[r]),w=a!=null,v=a?x.indexOf(a.id):-1,b=d?x.indexOf(d.id):-1,g=u.useRef(x),m=!N1(x,g.current),y=b!==-1&&v===-1||m,S=C1(l);Kt(()=>{m&&w&&p(x)},[m,x,w,p]),u.useEffect(()=>{g.current=x},[x]);const j=u.useMemo(()=>({activeIndex:v,containerId:f,disabled:S,disableTransforms:y,items:x,overIndex:b,useDragOverlay:h,sortedRects:S1(x,c),strategy:s}),[v,f,S.draggable,S.droppable,y,x,b,c,h,s]);return Pe.createElement(Hh.Provider,{value:j},t)}const M1=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return ta(n,r,s).indexOf(t)},_1=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:l,newIndex:a,previousItems:i,previousContainerId:c,transition:d}=e;return!d||!r||i!==l&&s===a?!1:n?!0:a!==s&&t===c},T1={duration:200,easing:"ease"},Vh="transform",D1=mn.Transition.toString({property:Vh,duration:0,easing:"linear"}),R1={roleDescription:"sortable"};function P1(e){let{disabled:t,index:n,node:r,rect:s}=e;const[l,a]=u.useState(null),i=u.useRef(n);return Kt(()=>{if(!t&&n!==i.current&&r.current){const c=s.current;if(c){const d=ns(r.current,{ignoreTransform:!0}),p={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(p.x||p.y)&&a(p)}}n!==i.current&&(i.current=n)},[t,n,r,s]),u.useEffect(()=>{l&&a(null)},[l]),l}function Xh(e){let{animateLayoutChanges:t=_1,attributes:n,disabled:r,data:s,getNewIndex:l=M1,id:a,strategy:i,resizeObserverConfig:c,transition:d=T1}=e;const{items:p,containerId:f,activeIndex:h,disabled:x,disableTransforms:w,sortedRects:v,overIndex:b,useDragOverlay:g,strategy:m}=u.useContext(Hh),y=z1(r,x),S=p.indexOf(a),j=u.useMemo(()=>({sortable:{containerId:f,index:S,items:p},...s}),[f,s,S,p]),N=u.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:k,node:E,isOver:T,setNodeRef:R}=d1({id:a,data:j,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...c}}),{active:I,activatorEvent:ae,activeNodeRect:H,attributes:P,setNodeRef:G,listeners:fe,isDragging:A,over:_,setActivatorNodeRef:L,transform:K}=i1({id:a,data:j,attributes:{...R1,...n},disabled:y.draggable}),q=Qv(R,G),J=!!I,Ce=J&&!w&&El(h)&&El(b),te=!g&&A,be=te&&Ce?K:null,ne=i!=null?i:m,Se=Ce?be!=null?be:ne({rects:v,activeNodeRect:H,activeIndex:h,overIndex:b,index:S}):null,Be=El(h)&&El(b)?l({id:a,items:p,activeIndex:h,overIndex:b}):S,Ne=I==null?void 0:I.id,B=u.useRef({activeId:Ne,items:p,newIndex:Be,containerId:f}),X=p!==B.current.items,oe=t({active:I,containerId:f,isDragging:A,isSorting:J,id:a,index:S,items:p,newIndex:B.current.newIndex,previousItems:B.current.items,previousContainerId:B.current.containerId,transition:d,wasDragging:B.current.activeId!=null}),ie=P1({disabled:!oe,index:S,node:E,rect:k});return u.useEffect(()=>{J&&B.current.newIndex!==Be&&(B.current.newIndex=Be),f!==B.current.containerId&&(B.current.containerId=f),p!==B.current.items&&(B.current.items=p)},[J,Be,f,p]),u.useEffect(()=>{if(Ne===B.current.activeId)return;if(Ne!=null&&B.current.activeId==null){B.current.activeId=Ne;return}const pe=setTimeout(()=>{B.current.activeId=Ne},50);return()=>clearTimeout(pe)},[Ne]),{active:I,activeIndex:h,attributes:P,data:j,rect:k,index:S,newIndex:Be,items:p,isOver:T,isSorting:J,isDragging:A,listeners:fe,node:E,overIndex:b,over:_,setNodeRef:q,setActivatorNodeRef:L,setDroppableNodeRef:R,setDraggableNodeRef:G,transform:ie!=null?ie:Se,transition:ee()};function ee(){if(ie||X&&B.current.newIndex===S)return D1;if(!(te&&!Jo(ae)||!d)&&(J||oe))return mn.Transition.toString({...d,property:Vh})}}function z1(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}ve.Down,ve.Right,ve.Up,ve.Left;const ye={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Ed={always:{label:"",color:"#6b9b6e",bg:"#e0f0e1"},keyword:{label:"",color:"#9b6b6b",bg:"#f0e0e0"},mood:{label:"",color:"#9b7a3b",bg:"#f0ebd8"},message_mode:{label:"",color:"#6b7b9b",bg:"#e0e6f0"}};function Yh({activation:e}){const t=Ed[e]||Ed.always;return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:t.color,background:t.bg},children:t.label})}const _l=80;function I1({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const v=Math.min(1,Math.abs(p)/_l);x.style.transition=w,x.style.opacity=`${v}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{if(p.target.closest(".drag-handle"))return;const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const v=Math.max(-_l,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${v}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(v)/_l)}`),f.current=v},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-_l):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:ye.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(qr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function L1({book:e,onTap:t,onDelete:n}){var p;const{attributes:r,listeners:s,setNodeRef:l,transform:a,transition:i,isDragging:c}=Xh({id:String(e.id)}),d={transform:mn.Transform.toString(a),transition:i,opacity:c?0:1};return o.jsx("div",{ref:l,style:d,className:"mb-3",children:o.jsx(I1,{onDelete:()=>n(e),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:ye.bg,userSelect:"none"},children:[o.jsx("div",{...r,...s,className:"drag-handle shrink-0 cursor-grab touch-none px-1",style:{cursor:c?"grabbing":"grab"},children:o.jsx(rl,{size:18,style:{color:ye.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>t(e),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:ye.text},children:e.name}),o.jsx(Yh,{activation:e.activation})]}),e.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:ye.textMuted},children:e.folder}),e.activation==="keyword"&&((p=e.keywords)==null?void 0:p.length)>0&&o.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[e.keywords.slice(0,3).map((f,h)=>o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(232,160,191,0.15)",color:ye.accentDark},children:f},h)),e.keywords.length>3&&o.jsxs("span",{className:"text-[10px]",style:{color:ye.textMuted},children:["+",e.keywords.length-3]})]})]}),o.jsx(Vr,{size:16,style:{color:ye.textMuted,flexShrink:0},onClick:()=>t(e)})]})})})}function O1({folder:e,books:t,onDelete:n,onTap:r,onReorder:s}){const[l,a]=u.useState(!0),[i,c]=u.useState(null),d=yh(No(qo,{activationConstraint:{distance:5}}),No(Uc,{activationConstraint:{delay:200,tolerance:5}})),p=({active:h,over:x})=>{if(c(null),!x||h.id===x.id)return;const w=t.findIndex(g=>String(g.id)===String(h.id)),v=t.findIndex(g=>String(g.id)===String(x.id));if(w<0||v<0)return;const b=ta(t,w,v);s(e,b)},f=i?t.find(h=>String(h.id)===String(i)):null;return o.jsxs("div",{className:"mb-4",children:[o.jsxs("button",{className:"mb-2 flex w-full items-center gap-2 px-1",onClick:()=>a(!l),children:[l?o.jsx(ur,{size:14,style:{color:ye.textMuted}}):o.jsx(Vr,{size:14,style:{color:ye.textMuted}}),o.jsx("span",{className:"text-[12px] font-bold tracking-wide",style:{color:ye.textMuted},children:e||""}),o.jsx("span",{className:"ml-1 rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.12)",color:ye.textMuted},children:t.length})]}),l&&o.jsxs(Oh,{sensors:d,collisionDetection:wh,onDragStart:({active:h})=>c(h.id),onDragEnd:p,children:[o.jsx(Wh,{items:t.map(h=>String(h.id)),strategy:Bh,children:t.map(h=>o.jsx(L1,{book:h,onTap:r,onDelete:n},h.id))}),o.jsx(Ah,{children:f&&o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:ye.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx("div",{className:"shrink-0 px-1",children:o.jsx(rl,{size:18,style:{color:ye.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:ye.text},children:f.name}),o.jsx(Yh,{activation:f.activation})]}),f.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:ye.textMuted},children:f.folder})]}),o.jsx(Vr,{size:16,style:{color:ye.textMuted,flexShrink:0}})]})})]})]})}function $1(){const e=Ft(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[l,a]=u.useState(null),[i,c]=u.useState(null),d=v=>{c(v),setTimeout(()=>c(null),2e3)},p=()=>{s(!0),U("/api/world-books").then(v=>n(v.world_books||[])).catch(()=>d("")).finally(()=>s(!1))};u.useEffect(()=>{p()},[]);const f=async v=>{a(null);try{await U(`/api/world-books/${v.id}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==v.id)),d("")}catch(b){d("")}},h=(v,b)=>{const g=v||"";n(m=>[...m.filter(S=>(S.folder||"")!==g),...b]),U("/api/world-books/reorder",{method:"PUT",body:{ordered_ids:b.map(m=>m.id)}}).catch(()=>d(""))},x={};for(const v of t){const b=v.folder||"";x[b]||(x[b]=[]),x[b].push(v)}const w=Object.keys(x).sort((v,b)=>v===""?1:b===""?-1:v.localeCompare(b));return o.jsxs("div",{className:"flex h-full flex-col",style:{background:ye.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full nm-active",style:{background:ye.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:ye.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:ye.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ye.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books/new"),children:o.jsx(Jr,{size:20,style:{color:ye.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-t-transparent",style:{borderColor:ye.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(rl,{size:36,style:{color:ye.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:ye.textMuted},children:" + "})]}):w.map(v=>o.jsx(O1,{folder:v,books:x[v],onDelete:b=>a(b),onTap:b=>e(`/world-books/${b.id}`),onReorder:h},v))}),l&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>a(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:ye.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:v=>v.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:ye.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:ye.textMuted},children:["",l.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:ye.bg,boxShadow:"var(--card-shadow-sm)",color:ye.text},onClick:()=>a(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>f(l),children:""})]})]})}),i&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const Z={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function A1({label:e,value:t,onChange:n,placeholder:r}){return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Z.textMuted},children:e}),o.jsx("input",{type:"text",value:t,onChange:s=>n(s.target.value),placeholder:r,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:Z.bg,color:Z.text}})]})}function F1({value:e,onChange:t,folders:n}){const[r,s]=u.useState(!1),l=n.filter(a=>a!==e&&a.toLowerCase().includes(e.toLowerCase()));return o.jsxs("div",{className:"relative mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Z.textMuted},children:""}),o.jsx("input",{type:"text",value:e,onChange:a=>{t(a.target.value),s(!0)},onFocus:()=>s(!0),onBlur:()=>setTimeout(()=>s(!1),150),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:Z.bg,color:Z.text}}),r&&l.length>0&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[160px] overflow-y-auto rounded-[14px]",style:{background:Z.bg,boxShadow:"var(--card-shadow)"},children:l.map(a=>o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:Z.text},onMouseDown:()=>{t(a),s(!1)},children:a},a))})]})}function B1({value:e,onChange:t}){const n=[{value:"always",label:""},{value:"keyword",label:""},{value:"mood",label:""},{value:"message_mode",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Z.textMuted},children:""}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:Z.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:e===r.value?Z.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?Z.accentDark:Z.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})]})}function U1({selected:e,onChange:t}){const n=[{value:"long",label:""},{value:"short",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Z.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:Z.bg,minHeight:48},children:n.map(r=>{const s=e===r.value;return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?Z.accentDark:Z.bg,color:s?"white":Z.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>t(r.value),children:r.label},r.value)})})]})}const H1=[{value:"happy",label:""},{value:"sad",label:""},{value:"angry",label:""},{value:"anxious",label:""},{value:"tired",label:""},{value:"emo",label:""},{value:"flirty",label:""},{value:"proud",label:""},{value:"calm",label:""}];function W1({selected:e,onChange:t}){const n=r=>{e.includes(r)?t(e.filter(s=>s!==r)):t([...e,r])};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Z.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:Z.bg,minHeight:48},children:H1.map(r=>{const s=e.includes(r.value);return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?Z.accentDark:Z.bg,color:s?"white":Z.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>n(r.value),children:r.label},r.value)})})]})}function V1({keywords:e,onChange:t}){const[n,r]=u.useState(""),s=()=>{const l=n.trim();if(!l||e.includes(l)){r("");return}t([...e,l]),r("")};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Z.textMuted},children:""}),o.jsxs("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:Z.bg,minHeight:48},children:[e.map(l=>o.jsxs("span",{className:"flex items-center gap-1 rounded-full px-2.5 py-1 text-[12px] font-medium",style:{background:"rgba(232,160,191,0.2)",color:Z.accentDark},children:[l,o.jsx("button",{onClick:()=>t(e.filter(a=>a!==l)),children:o.jsx(ll,{size:10})})]},l)),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),onKeyDown:l=>{(l.key==="Enter"||l.key===",")&&(l.preventDefault(),s())},placeholder:"...",className:"w-24 bg-transparent text-[12px] outline-none",style:{color:Z.text}}),n.trim()&&o.jsx("button",{className:"flex h-5 w-5 items-center justify-center rounded-full",style:{background:Z.accentDark},onClick:s,children:o.jsx(Jr,{size:10,color:"white"})})]})]}),o.jsx("p",{className:"mt-1 text-[10px]",style:{color:Z.textMuted},children:" Enter "})]})}function X1({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:Z.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:Z.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Z.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Xr,{size:18,style:{color:Z.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:Z.bg,color:Z.text},placeholder:"..."})]})}function Md(){const e=Ft(),{id:t}=oh(),n=!t,[r,s]=u.useState(""),[l,a]=u.useState(""),[i,c]=u.useState("always"),[d,p]=u.useState([]),[f,h]=u.useState("long"),[x,w]=u.useState(""),[v,b]=u.useState(!1),[g,m]=u.useState(!n),[y,S]=u.useState(null),[j,N]=u.useState([]),[k,E]=u.useState(!1),T=u.useRef(null),R=H=>{var fe;const P=(fe=H.target.files)==null?void 0:fe[0];if(!P)return;const G=new FileReader;G.onload=A=>w(A.target.result||""),G.readAsText(P),H.target.value=""},I=H=>{S(H),setTimeout(()=>S(null),2e3)};u.useEffect(()=>{U("/api/world-books").then(H=>{const P=H.world_books||[];if(N([...new Set(P.map(G=>G.folder).filter(Boolean))]),!n){const G=P.find(fe=>String(fe.id)===String(t));G&&(s(G.name),a(G.folder||""),c(G.activation),p(G.keywords||[]),h(G.message_mode||"long"),w(G.content))}}).catch(()=>I("")).finally(()=>m(!1))},[t,n]);const ae=async()=>{if(!r.trim()){I("");return}b(!0);try{const H={name:r.trim(),folder:l.trim()||null,activation:i,keywords:i==="keyword"||i==="mood"?d:[],message_mode:i==="message_mode"?f:null,content:x};n?(await U("/api/world-books",{method:"POST",body:H}),I("")):(await U(`/api/world-books/${t}`,{method:"PUT",body:H}),I(""))}catch(H){I(": "+H.message)}finally{b(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Z.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Z.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:Z.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Z.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Z.bg,boxShadow:v?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:ae,disabled:v,children:o.jsx(Ko,{size:18,style:{color:Z.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:g?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Z.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"rounded-[20px] p-5 mb-4",style:{background:Z.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(A1,{label:"",value:r,onChange:s,placeholder:""}),o.jsx(F1,{value:l,onChange:a,folders:j}),o.jsx(B1,{value:i,onChange:c}),i==="keyword"&&o.jsx(V1,{keywords:d,onChange:p}),i==="mood"&&o.jsx(W1,{selected:d,onChange:p}),i==="message_mode"&&o.jsx(U1,{selected:f,onChange:h})]}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:Z.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:Z.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Z.bg},onClick:()=>{var H;return(H=T.current)==null?void 0:H.click()},title:"",children:o.jsx(Yo,{size:13,style:{color:Z.textMuted}})}),o.jsx("input",{ref:T,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:R}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Z.bg},onClick:()=>E(!0),title:"",children:o.jsx(sl,{size:13,style:{color:Z.accentDark}})})]})]}),o.jsx("textarea",{value:x,onChange:H=>w(H.target.value),placeholder:"...",rows:10,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:Z.bg,color:Z.text}})]})]})}),k&&o.jsx(X1,{value:x,onChange:w,onClose:()=>E(!1)}),y&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:y})})]})}const Ue={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Tl=80;function Y1({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const v=Math.min(1,Math.abs(p)/Tl);x.style.transition=w,x.style.opacity=`${v}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const v=Math.max(-Tl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${v}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(v)/Tl)}`),f.current=v},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Tl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Ue.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(qr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function K1({assistant:e,localAvatar:t,onTap:n}){var s;const r=t||null;return o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Ue.bg,userSelect:"none"},onClick:()=>n(e),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:48,height:48,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Ue.bg},children:r?o.jsx("img",{src:r,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[20px]",style:{color:Ue.accentDark},children:((s=e.name)==null?void 0:s[0])||"?"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[15px] font-bold",style:{color:Ue.text},children:e.name}),e.created_at&&o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:Ue.textMuted},children:e.created_at.slice(0,10)})]}),o.jsx(Vr,{size:16,style:{color:Ue.textMuted,flexShrink:0}})]})}function Q1(){const e=Ft(),[t,n]=u.useState([]),[r,s]=u.useState({}),[l,a]=u.useState(!0),[i,c]=u.useState(null),[d,p]=u.useState(null),f=w=>{p(w),setTimeout(()=>p(null),2e3)},h=()=>{a(!0),U("/api/assistants").then(async w=>{const v=w.assistants||[];n(v);const b={};await Promise.all(v.map(async g=>{const m=await Zr(`assistant-avatar-${g.id}`).catch(()=>null);m&&(b[g.id]=m)})),s(b)}).catch(()=>f("")).finally(()=>a(!1))};u.useEffect(()=>{h()},[]);const x=async w=>{c(null);try{await U(`/api/assistants/${w.id}`,{method:"DELETE"}),n(v=>v.filter(b=>b.id!==w.id)),f("")}catch(v){f("")}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ue.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ue.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:Ue.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ue.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ue.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants/new"),children:o.jsx(Jr,{size:20,style:{color:Ue.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ue.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(dh,{size:36,style:{color:Ue.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:Ue.textMuted},children:" + "})]}):t.map(w=>o.jsx(Y1,{onDelete:()=>c(w),children:o.jsx(K1,{assistant:w,localAvatar:r[w.id],onTap:v=>e(`/assistants/${v.id}`)})},w.id))}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>c(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Ue.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:w=>w.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Ue.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Ue.textMuted},children:["",i.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Ue.bg,boxShadow:"var(--card-shadow-sm)",color:Ue.text},onClick:()=>c(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>x(i),children:""})]})]})}),d&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:d})})]})}const M={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function _d({label:e,value:t,onChange:n,placeholder:r,rows:s,onExpand:l,onHistory:a}){const i=u.useRef(null),c=d=>{var h;const p=(h=d.target.files)==null?void 0:h[0];if(!p)return;const f=new FileReader;f.onload=x=>n(x.target.result||""),f.readAsText(p),d.target.value=""};return o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),o.jsxs("div",{className:"flex items-center gap-2",children:[a&&o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:a,children:o.jsx(Ov,{size:13,style:{color:M.textMuted}})}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var d;return(d=i.current)==null?void 0:d.click()},children:o.jsx(Yo,{size:13,style:{color:M.textMuted}})}),o.jsx("input",{ref:i,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:c}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:l,children:o.jsx(sl,{size:13,style:{color:M.accentDark}})})]})]}),o.jsx("textarea",{value:t,onChange:d=>n(d.target.value),placeholder:r,rows:s||6,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})}function La({label:e,value:t,onChange:n,presets:r}){const[s,l]=u.useState(!1),a=r.find(i=>i.id===t);return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text},onClick:()=>l(!s),children:[o.jsx("span",{style:{color:a?M.text:M.textMuted},children:a?a.name:""}),o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:M.textMuted,transform:s?"rotate(180deg)":"none",transition:"transform 0.2s"},children:o.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&o.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:M.bg,boxShadow:"var(--card-shadow)",zIndex:40},children:[o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:M.textMuted},onClick:()=>{n(null),l(!1)},children:""}),r.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[14px]",style:{color:M.text},onClick:()=>{n(i.id),l(!1)},children:[o.jsx("span",{children:i.name}),i.id===t&&o.jsx(lr,{size:14,style:{color:M.accentDark}})]},i.id))]})]})]})}function Oa({value:e,onChange:t,onClose:n,title:r,placeholder:s}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:r||""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Xr,{size:18,style:{color:M.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:l=>t(l.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:M.bg,color:M.text},placeholder:s||""})]})}const Dl=80;function G1({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const v=Math.min(1,Math.abs(p)/Dl);x.style.transition=w,x.style.opacity=`${v}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const v=Math.max(-Dl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${v}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(v)/Dl)}`),f.current=v},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Dl):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(qr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function J1({title:e,message:t,onConfirm:n,onCancel:r}){return o.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:r,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:M.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:s=>s.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:M.text},children:e||""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:M.textMuted},children:t}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.text},onClick:r,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:n,children:""})]})]})})}function q1({items:e,currentContent:t,onApply:n,onClose:r,onDelete:s}){const[l,a]=u.useState("current"),[i,c]=u.useState(null),[d,p]=u.useState(null),f=x=>x?new Date(x).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",h=async()=>{if(l==="current"){r();return}const x=e.find(w=>w.id===l);x&&await n(x.content),r()};return i?o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsxs("span",{className:"text-[15px] font-bold",style:{color:M.text},children:[" ",i.version]}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>c(null),children:o.jsx(Xr,{size:18,style:{color:M.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:o.jsx("div",{className:"rounded-[14px] p-4",style:{boxShadow:"var(--inset-shadow)",background:M.bg},children:o.jsx("p",{className:"whitespace-pre-wrap text-[13px] leading-relaxed",style:{color:M.text},children:i.content})})})]}):o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:r,children:o.jsx(Xr,{size:18,style:{color:M.accentDark}})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[o.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:l==="current"?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[o.jsx("button",{onClick:()=>a("current"),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:l==="current"?M.accentDark:M.bg,boxShadow:l==="current"?"none":"var(--icon-inset)"},children:l==="current"&&o.jsx(lr,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:""}),o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#2a9d5c",background:"rgba(42,157,92,0.12)"},children:""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:t})]})]}),e.length===0&&o.jsx("p",{className:"py-8 text-center text-[13px]",style:{color:M.textMuted},children:""}),e.map(x=>o.jsx("div",{className:"mb-2",children:o.jsx(G1,{onDelete:()=>p(x.id),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:l===x.id?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[o.jsx("button",{onClick:()=>a(x.id),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:l===x.id?M.accentDark:M.bg,boxShadow:l===x.id?"none":"var(--icon-inset)"},children:l===x.id&&o.jsx(lr,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>c(x),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:[" ",x.version]}),o.jsx("span",{className:"text-[10px]",style:{color:M.textMuted},children:f(x.created_at)})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:x.content})]})]})})},x.id))]}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsx("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:h,children:""})}),d&&o.jsx(J1,{message:"",onCancel:()=>p(null),onConfirm:()=>{s(d),p(null)}})]})}function Kh(e){return e==="always"?"":e==="keyword"?"":e==="message_mode"?"":""}function Qh(e){return!e||!Array.isArray(e)?[]:e.map((t,n)=>typeof t=="object"&&t!==null?t:{id:t,position:"after",sort_order:n})}function Z1({item:e,book:t,position:n,sectionList:r,onRemove:s,onChangePosition:l}){const{attributes:a,listeners:i,setNodeRef:c,transform:d,transition:p,isDragging:f}=Xh({id:String(e.id)}),h={transform:mn.Transform.toString(d),transition:p,opacity:f?0:1};return t?o.jsxs("div",{ref:c,style:h,className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",children:[o.jsx("div",{...a,...i,className:"cursor-grab touch-none p-1",style:{cursor:f?"grabbing":"grab"},children:o.jsx(rl,{size:14,style:{color:M.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.text},children:t.name}),o.jsxs("div",{className:"text-[10px]",style:{color:M.textMuted},children:[Kh(t.activation),t.folder?`  ${t.folder}`:""]})]}),o.jsx("button",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},onClick:()=>l(e.id,n==="before"?"after":"before"),children:n==="before"?"":""}),o.jsx("button",{onClick:()=>s(e.id),children:o.jsx(ll,{size:14,style:{color:M.textMuted}})})]}):null}function e0({allBooks:e,mountedIds:t,onClose:n,onConfirm:r}){const[s,l]=u.useState(new Set(t)),a={};e.forEach(d=>{const p=d.folder||"";a[p]||(a[p]=[]),a[p].push(d)});const i=d=>{l(p=>{const f=new Set(p);return f.has(d)?f.delete(d):f.add(d),f})},c=d=>{const p=d.every(f=>s.has(f.id));l(f=>{const h=new Set(f);return p?d.forEach(x=>h.delete(x.id)):d.forEach(x=>h.add(x.id)),h})};return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-end",style:{background:"rgba(0,0,0,0.4)"},children:o.jsxs("div",{className:"flex w-full flex-col rounded-t-[24px]",style:{background:M.bg,maxHeight:"82vh"},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between p-5 pb-3",children:[o.jsx("h3",{className:"text-[16px] font-bold",style:{color:M.text},children:""}),o.jsx("button",{onClick:n,children:o.jsx(ll,{size:20,style:{color:M.textMuted}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5",children:Object.entries(a).map(([d,p])=>{const f=p.every(h=>s.has(h.id));return o.jsxs("div",{className:"mb-5",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:d}),o.jsx("button",{className:"rounded-full px-2.5 py-1 text-[11px] font-semibold",style:{background:f?"rgba(201,98,138,0.15)":"rgba(136,136,160,0.1)",color:f?M.accentDark:M.textMuted},onClick:()=>c(p),children:f?"":""})]}),o.jsx("div",{className:"space-y-2",children:p.map(h=>{const x=s.has(h.id);return o.jsxs("button",{className:"flex w-full items-center gap-3 rounded-[14px] p-3",style:{background:M.bg,boxShadow:x?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>i(h.id),children:[o.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:x?M.accentDark:M.bg,boxShadow:x?"none":"var(--icon-inset)"},children:x&&o.jsx(lr,{size:12,color:"white"})}),o.jsx("div",{className:"flex-1 min-w-0 text-left",children:o.jsx("div",{className:"truncate text-[13px] font-medium",style:{color:x?M.accentDark:M.text},children:h.name})}),o.jsx("span",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},children:Kh(h.activation)})]},h.id)})})]},d)})}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsxs("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>r([...s]),children:[" ",s.size,""]})})]})})}function t0({ruleSetIds:e,onChange:t,allBooks:n}){const[r,s]=u.useState(!1),[l,a]=u.useState(null),i=Qh(e),c=i.filter(j=>j.position==="before").sort((j,N)=>j.sort_order-N.sort_order),d=i.filter(j=>j.position==="after").sort((j,N)=>j.sort_order-N.sort_order),p=j=>n.find(N=>N.id===j||N.id===Number(j)),f=yh(No(qo,{activationConstraint:{distance:5}}),No(Uc,{activationConstraint:{delay:150,tolerance:5}})),h=({active:j})=>a(j.id),x=({active:j,over:N})=>{if(!N)return;const k=i.find(T=>String(T.id)===String(j.id)),E=i.find(T=>String(T.id)===String(N.id));if(!(!k||!E)&&k.position!==E.position){const T=i.map(R=>String(R.id)===String(k.id)?{...R,position:E.position}:R);t(T)}},w=({active:j,over:N})=>{if(a(null),!N||j.id===N.id)return;const k=i.find(P=>String(P.id)===String(j.id)),E=i.find(P=>String(P.id)===String(N.id));if(!k||!E||k.position!==E.position)return;const T=k.position==="before"?[...c]:[...d],R=T.findIndex(P=>String(P.id)===String(j.id)),I=T.findIndex(P=>String(P.id)===String(N.id)),ae=ta(T,R,I).map((P,G)=>({...P,sort_order:G})),H=i.filter(P=>P.position!==k.position);t([...H,...ae])},v=j=>t(i.filter(N=>N.id!==j)),b=(j,N)=>{const E=(N==="before"?c:d).length;t(i.map(T=>T.id===j?{...T,position:N,sort_order:E}:T))},g=j=>{const N=i.map(I=>I.id),E=j.filter(I=>!N.includes(I)).map((I,ae)=>({id:I,position:"after",sort_order:d.length+ae})),T=new Set(N.filter(I=>!j.includes(I))),R=i.filter(I=>!T.has(I.id));t([...R,...E])},m=(j,N)=>j.length===0?o.jsx("div",{className:"py-3 text-center text-[12px]",style:{color:M.textMuted},children:""}):o.jsx(Wh,{items:j.map(k=>String(k.id)),strategy:Bh,children:o.jsx("div",{className:"rounded-[14px] px-2 pt-1",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:j.map((k,E)=>o.jsxs("div",{children:[E>0&&o.jsx("div",{className:"mx-2",style:{height:1,background:"rgba(0,0,0,0.06)"}}),o.jsx(Z1,{item:k,book:p(k.id),position:N,sectionList:j,onRemove:v,onChangePosition:b})]},k.id))})}),y=l?i.find(j=>String(j.id)===String(l)):null,S=y?p(y.id):null;return o.jsxs(Oh,{sensors:f,collisionDetection:wh,onDragStart:h,onDragOver:x,onDragEnd:w,children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(c,"before")]}),o.jsxs("div",{className:"my-4 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}}),o.jsx("span",{className:"rounded-full px-3 py-1 text-[11px] font-bold",style:{background:"rgba(232,160,191,0.15)",color:M.accentDark},children:"System Prompt"}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(d,"after")]}),o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-3 text-[14px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.accentDark},onClick:()=>s(!0),children:[o.jsx(Jr,{size:16})," "]}),o.jsx(Ah,{children:S&&o.jsxs("div",{className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",style:{background:M.bg,boxShadow:"var(--card-shadow)",opacity:.9},children:[o.jsx(rl,{size:14,style:{color:M.textMuted}}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.accentDark},children:S.name})})]})}),r&&o.jsx(e0,{allBooks:n,mountedIds:i.map(j=>j.id),onClose:()=>s(!1),onConfirm:j=>{g(j),s(!1)}})]})}function Td(){const e=Ft(),{id:t}=oh(),n=!t,[r,s]=u.useState("basic"),[l,a]=u.useState(""),[i,c]=u.useState(""),[d,p]=u.useState(""),[f,h]=u.useState(null),[x,w]=u.useState(null),[v,b]=u.useState(null),[g,m]=u.useState(""),[y,S]=u.useState(""),[j,N]=u.useState(null),[k,E]=u.useState(null),[T,R]=u.useState([]),[I,ae]=u.useState([]),[H,P]=u.useState([]),[G,fe]=u.useState(!1),[A,_]=u.useState(!n),[L,K]=u.useState(null),[q,J]=u.useState(!1),[Ce,te]=u.useState(!1),[be,ne]=u.useState(!1),[Se,Be]=u.useState(null),[Ne,B]=u.useState([]),X=u.useRef(null),oe=u.useRef(null),ie=W=>{var Ie;const ce=(Ie=W.target.files)==null?void 0:Ie[0];if(!ce)return;const ke=new FileReader;ke.onload=Rt=>p(Rt.target.result||""),ke.readAsText(ce),W.target.value=""},ee=W=>{K(W),setTimeout(()=>K(null),2500)},pe=async W=>{const ce=W==="human"?j:k;if(!ce){ee("");return}try{const ke=await U(`/api/core-blocks/${ce}/history`);B(ke.history||[]),Be(W)}catch(ke){ee("")}};u.useEffect(()=>{(async()=>{const[ce,ke]=await Promise.all([U("/api/presets").catch(()=>({presets:[]})),U("/api/world-books").catch(()=>({world_books:[]}))]);if(ae(ce.presets||[]),P(ke.world_books||[]),n)_(!1);else try{const[Ie,Rt]=await Promise.all([U(`/api/assistants/${t}`),U(`/api/core-blocks?assistant_id=${t}`).catch(()=>({blocks:[]}))]);a(Ie.name||""),Zr(`assistant-avatar-${t}`).then(Ve=>{Ve&&c(Ve)}).catch(function(){}),p(Ie.system_prompt||""),h(Ie.model_preset_id||null),w(Ie.summary_model_preset_id||null),b(Ie.summary_fallback_preset_id||null),R(Ie.rule_set_ids||[]);for(const Ve of Rt.blocks||[])Ve.block_type==="human"?(m(Ve.content||""),N(Ve.id)):Ve.block_type==="persona"&&(S(Ve.content||""),E(Ve.id))}catch(Ie){ee(": "+Ie.message)}finally{_(!1)}})()},[t,n]);const Te=W=>{var Ie;const ce=(Ie=W.target.files)==null?void 0:Ie[0];if(!ce)return;const ke=new FileReader;ke.onload=async Rt=>{const Ve=Rt.target.result,Hn=`assistant-avatar-${t||"new"}`;try{await Ii(Hn,Ve),c(Ve)}catch(sn){ee("")}},ke.readAsDataURL(ce),W.target.value=""},De=async()=>{if(!l.trim()){ee("");return}fe(!0);try{const W={name:l.trim(),avatar_url:i?`assistant-avatar-${t||"new"}`:null,system_prompt:d,model_preset_id:f,summary_model_preset_id:x,summary_fallback_preset_id:v,rule_set_ids:Qh(T)};let ce=t;if(n?(ce=(await U("/api/assistants",{method:"POST",body:{name:l.trim()}})).id,i&&(await Ii(`assistant-avatar-${ce}`,i),W.avatar_url=`assistant-avatar-${ce}`),await U(`/api/assistants/${ce}`,{method:"PUT",body:W})):await U(`/api/assistants/${t}`,{method:"PUT",body:W}),j)await U(`/api/core-blocks/${j}`,{method:"PUT",body:{content:g}});else if(g.trim()){const ke=await U("/api/core-blocks",{method:"POST",body:{block_type:"human",assistant_id:Number(ce),content:g}});N(ke.id)}if(k)await U(`/api/core-blocks/${k}`,{method:"PUT",body:{content:y}});else if(y.trim()){const ke=await U("/api/core-blocks",{method:"POST",body:{block_type:"persona",assistant_id:Number(ce),content:y}});E(ke.id)}ee("")}catch(W){ee(": "+W.message)}finally{fe(!1)}},xe=[{key:"basic",label:""},{key:"about",label:"Core Blocks"},{key:"books",label:""}];return o.jsxs("div",{className:"flex h-full flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:M.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:M.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:G?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:De,disabled:G,children:o.jsx(Ko,{size:18,style:{color:M.accentDark}})})]}),o.jsx("div",{className:"flex shrink-0 gap-1 px-5 pb-3",children:xe.map(W=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2.5 text-[13px] font-semibold transition-all",style:{background:r===W.key?M.bg:"transparent",boxShadow:r===W.key?"var(--card-shadow-sm)":"none",color:r===W.key?M.accentDark:M.textMuted},onClick:()=>s(W.key),children:W.label},W.key))}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px",children:A?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:M.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[r==="basic"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-4 flex items-center gap-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var W;return(W=X.current)==null?void 0:W.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:M.bg},children:i?o.jsx("img",{src:i,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[24px]",style:{color:M.accentDark},children:(l==null?void 0:l[0])||"?"})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:M.accentDark},children:o.jsx(fh,{size:9,color:"white"})})]}),o.jsx("input",{ref:X,type:"file",accept:"image/*",className:"hidden",onChange:Te}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),o.jsx("input",{type:"text",value:l,onChange:W=>a(W.target.value),placeholder:"",className:"w-full rounded-[12px] px-4 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})]}),o.jsxs("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var W;return(W=oe.current)==null?void 0:W.click()},title:"",children:o.jsx(Yo,{size:13,style:{color:M.textMuted}})}),o.jsx("input",{ref:oe,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:ie}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>J(!0),title:"",children:o.jsx(sl,{size:13,style:{color:M.accentDark}})})]})]}),o.jsx("textarea",{value:d,onChange:W=>p(W.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(La,{label:"",value:f,onChange:h,presets:I}),o.jsx(La,{label:"",value:x,onChange:w,presets:I}),o.jsx(La,{label:"",value:v,onChange:b,presets:I})]})]}),r==="about"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(_d,{label:"human block",value:g,onChange:m,placeholder:" AI ...",rows:7,onExpand:()=>te(!0),onHistory:()=>pe("human")})}),o.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(_d,{label:"persona block",value:y,onChange:S,placeholder:"AI ...",rows:7,onExpand:()=>ne(!0),onHistory:()=>pe("persona")})})]}),r==="books"&&o.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(t0,{ruleSetIds:T,onChange:R,allBooks:H})})]})}),q&&o.jsx(Oa,{value:d,onChange:p,onClose:()=>J(!1),title:"",placeholder:"..."}),Ce&&o.jsx(Oa,{value:g,onChange:m,onClose:()=>te(!1),title:"human block",placeholder:" AI ..."}),be&&o.jsx(Oa,{value:y,onChange:S,onClose:()=>ne(!1),title:"persona block",placeholder:"AI ..."}),Se&&o.jsx(q1,{items:Ne,currentContent:Se==="human"?g:y,onApply:async W=>{const ce=Se==="human"?j:k;try{await U(`/api/core-blocks/${ce}`,{method:"PUT",body:{content:W}}),Se==="human"?m(W):S(W),ee("")}catch(ke){ee("")}},onDelete:async W=>{try{await U(`/api/core-blocks/history/${W}`,{method:"DELETE"}),B(ce=>ce.filter(ke=>ke.id!==W)),ee("")}catch(ce){ee("")}},onClose:()=>Be(null)}),L&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:L})})]})}const le={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function n0({on:e,onToggle:t}){return o.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full transition-all",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":le.bg},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function Dd({icon:e,label:t,hint:n,onClick:r}){return o.jsxs("button",{className:"flex w-full items-center gap-4 px-4 py-4",onClick:r,children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:e}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:t}),n&&o.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:n})]}),o.jsx(Vr,{size:16,style:{color:le.textMuted}})]})}function Rd(){return o.jsx("div",{className:"mx-4 h-px",style:{background:"rgba(136,136,160,0.15)"}})}function xr({value:e,onChange:t,min:n,max:r}){const[s,l]=u.useState(String(e));u.useEffect(()=>l(String(e)),[e]);const a=()=>{let i=parseInt(s);isNaN(i)&&(i=n),i=Math.max(n,Math.min(r,i)),l(String(i)),t(i)};return o.jsx("input",{type:"number",value:s,onChange:i=>l(i.target.value),onBlur:a,onKeyDown:i=>i.key==="Enter"&&a(),className:"w-20 rounded-[10px] py-2 text-center text-[14px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:le.bg,color:le.text},min:n,max:r})}function r0(){const e=Ft(),[t,n]=u.useState(()=>{var k;return((k=JSON.parse(localStorage.getItem("app-settings")||"{}"))==null?void 0:k.autoMessage)||!1}),[r,s]=u.useState(()=>{var k;return((k=JSON.parse(localStorage.getItem("app-settings")||"{}"))==null?void 0:k.autoMessageIntervalMin)||30}),[l,a]=u.useState(()=>{var k;return((k=JSON.parse(localStorage.getItem("app-settings")||"{}"))==null?void 0:k.autoMessageIntervalMax)||60}),[i,c]=u.useState(()=>parseInt(localStorage.getItem("telegram_buffer_seconds")||"15")),[d,p]=u.useState(8),[f,h]=u.useState(8e3),[x,w]=u.useState(16e3),[v,b]=u.useState(!1),[g,m]=u.useState(!1),[y,S]=u.useState(null),j=k=>{S(k),setTimeout(()=>S(null),2e3)};u.useEffect(()=>{U("/api/settings/context-budget").then(k=>{h(k.retain_budget),w(k.trigger_threshold),b(!0)}).catch(()=>b(!0))},[]),u.useEffect(()=>{const k=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({...k,autoMessage:t,autoMessageIntervalMin:r,autoMessageIntervalMax:l}))},[t,r,l]),u.useEffect(()=>{localStorage.setItem("telegram_buffer_seconds",String(i)),U("/api/settings/buffer-seconds",{method:"PUT",body:{seconds:i}}).catch(()=>{})},[i]),u.useEffect(()=>{U("/api/settings/short-msg-max").then(k=>p(k.max_count||8)).catch(()=>{})},[]),u.useEffect(()=>{U("/api/settings/short-msg-max",{method:"PUT",body:{max_count:d}}).catch(()=>{})},[d]);const N=async()=>{m(!0);try{await U("/api/settings/context-budget",{method:"PUT",body:{retain_budget:f,trigger_threshold:x}}),j("")}catch(k){j("")}finally{m(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:le.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:le.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:le.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:le.text},children:""}),o.jsx("div",{className:"w-10"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px space-y-4",children:[o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(Dd,{icon:o.jsx(Uv,{size:18,style:{color:le.text}}),label:"API ",hint:"  ",onClick:()=>e("/settings/api")}),o.jsx(Rd,{}),o.jsx(Dd,{icon:o.jsx(Fv,{size:18,style:{color:le.textMuted}}),label:"",hint:"",onClick:()=>j("")})]}),o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:o.jsx(Av,{size:18,style:{color:le.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:" AI "})]}),o.jsx(n0,{on:t,onToggle:()=>n(!t)})]}),t&&o.jsx("div",{className:"px-4 pb-4",children:o.jsxs("div",{className:"flex items-center justify-between rounded-[12px] px-4 py-3",style:{boxShadow:"var(--inset-shadow)",background:le.bg},children:[o.jsx("span",{className:"text-[12px] font-medium",style:{color:le.textMuted},children:" ()"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(xr,{value:r,onChange:s,min:1,max:999}),o.jsx("span",{style:{color:le.textMuted},children:"~"}),o.jsx(xr,{value:l,onChange:a,min:1,max:999})]})]})})]}),o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:o.jsx(Vv,{size:18,style:{color:le.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:" ()"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(xr,{value:i,onChange:c,min:1,max:120}),o.jsx("span",{className:"text-[12px]",style:{color:le.textMuted},children:""})]})]}),o.jsx(Rd,{}),o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:o.jsx(Iv,{size:18,style:{color:le.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:""})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(xr,{value:d,onChange:p,min:2,max:20}),o.jsx("span",{className:"text-[12px]",style:{color:le.textMuted},children:""})]})]})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:o.jsx(Rv,{size:18,style:{color:le.text}})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:""})]})]}),v?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:" token "})]}),o.jsx(xr,{value:f,onChange:h,min:1e3,max:1e5})]}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),o.jsx(xr,{value:x,onChange:w,min:1e3,max:2e5})]}),o.jsx("button",{className:"w-full rounded-[14px] py-3 text-[14px] font-bold text-white",style:{background:g?"rgba(201,98,138,0.5)":"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"3px 3px 8px rgba(201,98,138,0.3)"},onClick:N,disabled:g,children:g?"...":""})]}):o.jsx("div",{className:"flex justify-center py-4",children:o.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2",style:{borderColor:le.accent,borderTopColor:"transparent"}})})]})]}),y&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:y})})]})}const F={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},s0=["claude-opus-4-6","claude-opus-4-5-20251101","claude-sonnet-4-6","claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001"];function l0(e){try{return new URL(e).hostname}catch(t){return e}}function Pd({label:e,value:t,onChange:n,placeholder:r,password:s,disabled:l}){const[a,i]=u.useState(!1);return o.jsxs("div",{className:"mb-4",children:[e&&o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:F.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:s&&!a?"password":"text",value:t,onChange:c=>n(c.target.value),placeholder:r,disabled:l,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none pr-12",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:l?F.textMuted:F.text,opacity:l?.5:1}}),s&&o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>i(!a),children:a?o.jsx(zv,{size:16,style:{color:F.textMuted}}):o.jsx(Pv,{size:16,style:{color:F.textMuted}})})]})]})}function o0({value:e,onChange:t,options:n}){return o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:F.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[12px] font-semibold transition-all",style:{background:e===r.value?F.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?F.accentDark:F.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})}function a0({value:e,onChange:t,options:n,placeholder:r}){const[s,l]=u.useState(!1),a=u.useRef(null);return u.useEffect(()=>{if(!s)return;const i=c=>{a.current&&!a.current.contains(c.target)&&l(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[s]),o.jsxs("div",{className:"relative",ref:a,children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:e?F.text:F.textMuted},onClick:()=>l(!s),children:[o.jsx("span",{className:"truncate",children:e||r||""}),o.jsx(ur,{size:16,style:{color:F.textMuted,flexShrink:0,transform:s?"rotate(180deg)":"none"}})]}),s&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:F.bg,boxShadow:"var(--card-shadow)"},children:n.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[13px]",style:{color:F.text},onClick:()=>{t(i),l(!1)},children:[o.jsx("span",{className:"truncate",children:i}),i===e&&o.jsx(lr,{size:12,style:{color:F.accentDark,flexShrink:0}})]},i))})]})}function i0({value:e,onChange:t}){const[n,r]=u.useState(!1),s=u.useRef(null);return u.useEffect(()=>{if(!n)return;const l=a=>{s.current&&!s.current.contains(a.target)&&r(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[n]),o.jsxs("div",{className:"relative",ref:s,children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"",value:e,onChange:l=>t(l.target.value),className:"w-full rounded-[14px] px-4 py-3 pr-10 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:F.text}}),o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>r(!n),children:o.jsx(ur,{size:16,style:{color:F.textMuted}})})]}),n&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:F.bg,boxShadow:"var(--card-shadow)"},children:s0.map(l=>o.jsx("button",{className:"flex w-full px-4 py-3 text-left text-[13px]",style:{color:F.text},onClick:()=>{t(l),r(!1)},children:l},l))})]})}function $a({value:e,onChange:t,min:n,max:r,step:s}){const[l,a]=u.useState(String(e));u.useEffect(()=>a(String(e)),[e]);const i=()=>{let c=parseFloat(l);isNaN(c)&&(c=n),c=Math.max(n,Math.min(r,c)),c=Math.round(c/s)*s,c=parseFloat(c.toFixed(4)),a(String(c)),t(c)};return o.jsx("input",{type:"number",value:l,onChange:c=>a(c.target.value),onBlur:i,onKeyDown:c=>c.key==="Enter"&&i(),step:s,min:n,max:r,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:F.text}})}function zd({on:e,onToggle:t}){return o.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":F.bg,transition:"background 0.2s"},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function Aa({children:e,className:t=""}){return o.jsx("div",{className:`rounded-[20px] p-5 mb-4 space-y-4 ${t}`,style:{background:F.bg,boxShadow:"var(--card-shadow)"},children:e})}function c0(){const e=Ft(),[t,n]=u.useState([]),[r,s]=u.useState([]),[l,a]=u.useState(!0),[i,c]=u.useState(""),[d,p]=u.useState(""),[f,h]=u.useState("api_key"),[x,w]=u.useState(""),[v,b]=u.useState([]),[g,m]=u.useState(!1),[y,S]=u.useState(1),[j,N]=u.useState(!1),[k,E]=u.useState(1),[T,R]=u.useState(!1),[I,ae]=u.useState(4096),[H,P]=u.useState(null),[G,fe]=u.useState(0),[A,_]=u.useState(null),[L,K]=u.useState(!1),[q,J]=u.useState(!1),[Ce,te]=u.useState(""),[be,ne]=u.useState(!1),[Se,Be]=u.useState(!1),[Ne,B]=u.useState(null),[X,oe]=u.useState(null),[ie,ee]=u.useState(""),pe=u.useRef(null),Te=u.useRef(!1),De=u.useRef(null),xe=u.useRef({});xe.current={baseUrl:i,apiKey:d,authType:f,modelName:x,temperature:y,tempEnabled:j,topP:k,topPEnabled:T,maxTokens:I,thinkingBudget:G,editingPreset:H,providers:t};const W=u.useCallback(O=>{_(O),setTimeout(()=>_(null),2500)},[]),ce=u.useCallback(async()=>{try{const[O,he]=await Promise.all([U("/api/providers"),U("/api/presets")]);n(O.providers||[]),s(he.presets||[])}catch(O){W(": "+O.message)}finally{a(!1)}},[W]);u.useEffect(()=>{ce()},[ce]);const ke=O=>{var se,Me;P(O),w(O.model_name),N(O.temperature!=null),S((se=O.temperature)!=null?se:1),R(O.top_p!=null),E((Me=O.top_p)!=null?Me:1),ae(O.max_tokens),fe(O.thinking_budget||0);const he=t.find(mt=>mt.id===O.api_provider_id);he&&(c(he.base_url),p(he.api_key),h(he.auth_type||"api_key"))},Ie=()=>{P(null),c(""),p(""),h("api_key"),w(""),S(1),N(!1),E(1),R(!1),ae(4096),fe(0),b([])},Rt=async()=>{if(!i.trim()||!d.trim()){W(" API  Key");return}m(!0);try{const O=await fetch(`${i.trim().replace(/\/+$/,"")}/models`,{headers:{Authorization:`Bearer ${d.trim()}`}});if(!O.ok)throw new Error(`HTTP ${O.status}`);const se=((await O.json()).data||[]).map(Me=>Me.id).sort();b(se),W(se.length?` ${se.length} `:"")}catch(O){W(": "+O.message)}finally{m(!1)}},Ve=async()=>{var O;if(!i.trim()||!d.trim()||!x.trim()){W(" API Key ");return}K(!0);try{const he=i.trim().replace(/\/+$/,""),se={"Content-Type":"application/json",Authorization:`Bearer ${d.trim()}`};f==="oauth_token"&&(se["anthropic-beta"]="claude-code-20250219,oauth-2025-04-20,fine-grained-tool-streaming-2025-05-14",se["anthropic-dangerous-direct-browser-access"]="true",se["x-app"]="cli");const Me=await fetch(`${he}/chat/completions`,{method:"POST",headers:se,body:JSON.stringify({model:x.trim(),max_tokens:10,messages:[{role:"user",content:"Hi"}]})});if(!Me.ok){const mt=await Me.json().catch(()=>({}));throw new Error(((O=mt.error)==null?void 0:O.message)||`HTTP ${Me.status}`)}W(" ")}catch(he){W(": "+he.message)}finally{K(!1)}},Hn=async O=>{const he=xe.current,se=he.baseUrl.trim(),Me=he.apiKey.trim(),mt=he.authType,vn=O.find(rs=>rs.base_url===se);return vn?((vn.api_key!==Me||vn.auth_type!==mt)&&await U(`/api/providers/${vn.id}`,{method:"PUT",body:{api_key:Me,auth_type:mt}}),vn.id):(await U("/api/providers",{method:"POST",body:{name:l0(se),base_url:se,api_key:Me,auth_type:mt}})).id},sn=async(O,he)=>{const se=xe.current;if(!se.baseUrl.trim()||!se.apiKey.trim()||!se.modelName.trim()){W("");return}Be(!0);try{const Me=await Hn(se.providers),mt={name:O,model_name:se.modelName.trim(),temperature:se.tempEnabled?se.temperature:null,top_p:se.topPEnabled?se.topP:null,max_tokens:Number(se.maxTokens)||4096,thinking_budget:Number(se.thinkingBudget)||0,api_provider_id:Me};se.editingPreset&&!he?(await U(`/api/presets/${se.editingPreset.id}`,{method:"PUT",body:mt}),W("")):(await U("/api/presets",{method:"POST",body:mt}),W("")),await ce()}catch(Me){W(": "+Me.message)}finally{Be(!1)}},jt=()=>{const O=Ce.trim();O&&(J(!1),sn(O,be))},Gt=()=>{H&&sn(H.name,!1)},Jt=async()=>{if(Ne){try{await U(`/api/presets/${Ne.id}`,{method:"DELETE"}),W(""),(H==null?void 0:H.id)===Ne.id&&Ie(),ce()}catch(O){W(": "+O.message)}B(null)}},Wn=async()=>{const O=ie.trim();if(!(!O||!X)){try{await U(`/api/presets/${X.id}`,{method:"PUT",body:{name:O}}),W(""),ce()}catch(he){W("")}oe(null)}},St=(O,he)=>{Te.current=!1;const se=O.touches?O.touches[0]:O;De.current={x:se.clientX,y:se.clientY},pe.current=setTimeout(()=>{Te.current=!0,B(he)},600)},Vn=O=>{if(!De.current||!pe.current)return;const he=O.touches?O.touches[0]:O,se=he.clientX-De.current.x,Me=he.clientY-De.current.y;se*se+Me*Me>100&&(clearTimeout(pe.current),pe.current=null)},dr=()=>clearTimeout(pe.current);return o.jsxs("div",{className:"flex h-full flex-col",style:{background:F.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:F.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:F.text},children:"API "}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px",children:l?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:F.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs(Aa,{children:[o.jsx(Pd,{label:"API ",value:i,onChange:c,placeholder:"https://api.openai.com/v1",disabled:f==="oauth_token"}),o.jsx(Pd,{label:"API Key",value:d,onChange:p,placeholder:f==="oauth_token"?"sk-ant-oat01-...":"sk-...",password:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:F.textMuted},children:""}),o.jsx(o0,{value:f,onChange:O=>{h(O),O==="oauth_token"&&c("https://api.anthropic.com/v1")},options:[{value:"api_key",label:" API Key"},{value:"oauth_token",label:"Setup Token"}]})]})]}),o.jsxs(Aa,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:F.textMuted},children:""}),f==="oauth_token"?o.jsx(i0,{value:x,onChange:w}):o.jsx(a0,{value:x,onChange:w,options:v})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text},onClick:Ve,disabled:L,children:[L?o.jsx(fd,{size:14,className:"animate-spin"}):null,""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text,opacity:f==="oauth_token"?.4:1},onClick:Rt,disabled:g||f==="oauth_token",children:[g?o.jsx(fd,{size:14,className:"animate-spin"}):o.jsx(Lc,{size:14}),""]})]})]}),o.jsxs(Aa,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:F.text},children:" (0-2)"}),o.jsx("div",{className:"text-[11px]",style:{color:F.textMuted},children:""})]}),o.jsx(zd,{on:j,onToggle:()=>N(!j)})]}),j&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:F.textMuted},children:""}),o.jsx($a,{value:y,onChange:S,min:0,max:2,step:.1})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:F.text},children:"Top P (0-1)"}),o.jsx(zd,{on:T,onToggle:()=>R(!T)})]}),T&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:F.textMuted},children:""}),o.jsx($a,{value:k,onChange:E,min:0,max:1,step:.05})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:F.text},children:"Max Tokens"}),o.jsx($a,{value:I,onChange:ae,min:128,max:2e5,step:1})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:F.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:F.textMuted},children:"Extended Thinking tokens"})]}),o.jsxs("select",{className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none appearance-none",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:F.text,WebkitAppearance:"none",textAlignLast:"center"},value:G,onChange:O=>fe(Number(O.target.value)),children:[o.jsx("option",{value:0,children:""}),o.jsx("option",{value:1024,children:"1024"}),o.jsx("option",{value:2048,children:"2048"}),o.jsx("option",{value:4096,children:"4096"}),o.jsx("option",{value:8192,children:"8192"}),o.jsx("option",{value:16384,children:"16384"})]})]})]}),o.jsxs("div",{className:"mb-4 space-y-3",children:[H?o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:Gt,disabled:Se,children:[o.jsx(Ko,{size:14}),Se?"...":""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text},onClick:()=>{ne(!0),te(""),J(!0)},disabled:Se,children:[o.jsx(Dv,{size:14}),""]})]}):o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>{ne(!0),te(""),J(!0)},disabled:Se,children:[o.jsx(Jr,{size:14}),""]}),H&&o.jsx("button",{className:"w-full py-1 text-center text-[12px]",style:{color:F.textMuted},onClick:Ie,children:""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"mb-3 text-[12px] font-bold uppercase tracking-wide",style:{color:F.textMuted},children:""}),r.length===0?o.jsx("div",{className:"rounded-[20px] py-8 text-center text-[13px]",style:{background:F.bg,boxShadow:"var(--card-shadow)",color:F.textMuted},children:""}):o.jsx("div",{className:"space-y-3",children:r.map(O=>{var he,se;return o.jsxs("div",{className:"rounded-[18px] p-4",style:{background:F.bg,boxShadow:(H==null?void 0:H.id)===O.id?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{Te.current||ke(O)},onTouchStart:Me=>St(Me,O),onTouchMove:Vn,onTouchEnd:dr,onMouseDown:Me=>St(Me,O),onMouseMove:Vn,onMouseUp:dr,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-[14px] font-bold truncate",style:{color:(H==null?void 0:H.id)===O.id?F.accentDark:F.text},children:O.name}),o.jsx(hh,{size:12,style:{color:F.textMuted,flexShrink:0,marginLeft:8}})]}),o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:F.textMuted},children:O.model_name}),o.jsxs("div",{className:"mt-1 text-[10px] font-mono",style:{color:F.textMuted},children:["T: ",(he=O.temperature)!=null?he:""," | Top-P: ",(se=O.top_p)!=null?se:""," | Max: ",O.max_tokens]})]},O.id)})})]})]})}),q&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>J(!1),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:F.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:O=>O.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:F.text},children:""}),o.jsx("input",{type:"text",value:Ce,onChange:O=>te(O.target.value),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:F.text},autoFocus:!0,onKeyDown:O=>O.key==="Enter"&&jt()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text},onClick:()=>J(!1),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:Ce.trim()?"linear-gradient(135deg, var(--accent), var(--accent-dark))":"rgba(201,98,138,0.3)"},onClick:jt,disabled:!Ce.trim(),children:""})]})]})}),Ne&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>B(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:F.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:O=>O.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:F.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:F.textMuted},children:["",Ne.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text},onClick:()=>B(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:Jt,children:""})]})]})}),X&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>oe(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:F.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:O=>O.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:F.text},children:""}),o.jsx("input",{autoFocus:!0,type:"text",value:ie,onChange:O=>ee(O.target.value),className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:F.text},onKeyDown:O=>O.key==="Enter"&&Wn()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text},onClick:()=>oe(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))"},onClick:Wn,children:""})]})]})}),A&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:A})})]})}const ge={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},na={thinking:{bg:"rgba(168,130,200,0.12)",color:"#8860c8",label:""},tool_use:{bg:"rgba(232,160,60,0.12)",color:"#b8820a",label:""},tool_result:{bg:"rgba(80,160,200,0.12)",color:"#1a7ab0",label:""},injected_memories:{bg:"rgba(80,180,120,0.12)",color:"#3a8a5f",label:""}},u0=[{key:"short",label:""},{key:"long",label:""}],d0=[{key:"happy",label:""},{key:"sad",label:""},{key:"angry",label:""},{key:"anxious",label:""},{key:"tired",label:""},{key:"emo",label:""},{key:"flirty",label:""},{key:"proud",label:""},{key:"calm",label:""}],Id=300;function Wc({block_type:e}){const t=na[e]||{bg:"rgba(136,136,160,0.1)",color:ge.textMuted,label:e};return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:t.bg,color:t.color},children:t.label})}function Gh({content:e}){const[t,n]=u.useState(!1),r=e.length>Id;return o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:ge.text},children:r&&!t?e.slice(0,Id)+"...":e}),r&&o.jsx("div",{className:"mt-1.5 flex justify-center",children:o.jsx("button",{className:"rounded-full px-3 py-0.5 text-[11px]",style:{color:ge.accentDark,background:"rgba(232,160,191,0.12)"},onClick:s=>{s.stopPropagation(),n(!t)},children:t?"":""})})]})}function f0({block:e,cacheKey:t,translateCache:n}){const r=n.current.get(t),[s,l]=u.useState(r||null),[a,i]=u.useState(!!r),[c,d]=u.useState(!1),p=na.thinking,f=async h=>{if(h.stopPropagation(),s){i(!a);return}d(!0);try{const x=await U("/api/cot/translate",{method:"POST",body:{text:e.content}});l(x.translated),i(!0),n.current.set(t,x.translated)}catch(x){console.error("Translation failed:",x),alert("")}finally{d(!1)}};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:p.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(Wc,{block_type:"thinking"}),o.jsx("span",{className:"flex-1"}),o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#1a7ab0",background:"rgba(80,160,200,0.15)"},onClick:f,disabled:c,children:c?"...":a?"":""})]}),o.jsx(Gh,{content:a&&s?s:e.content})]})}function p0({avatarUrl:e}){return o.jsx("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full overflow-hidden",style:{boxShadow:"var(--icon-inset)",background:ge.bg},children:e?o.jsx("img",{src:e,alt:"",className:"h-full w-full object-cover"}):o.jsx("span",{style:{fontSize:16},children:""})})}function Ld(e){return e?e>=1e3?`${(e/1e3).toFixed(1)}k`:String(e):"0"}function h0(e){if(!e)return null;const t=e/1e3;return t>=100?`${Math.round(t)}s`:`${t.toFixed(1)}s`}function x0({prompt:e,completion:t,elapsedMs:n}){return!e&&!t&&!n?null:o.jsxs(o.Fragment,{children:[e||t?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(80,160,120,0.12)",color:"#3a8a5f"},children:["",Ld(e)]}),o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(160,100,220,0.12)",color:"#8a5abf"},children:["",Ld(t)]})]}):null,n?o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(200,140,60,0.12)",color:"#b8820a"},children:h0(n)}):null]})}function m0(e){const t=[],n=[],r=[],s=[];for(const a of e)a.block_type==="thinking"?t.push(a):a.block_type==="tool_use"?n.push(a):a.block_type==="tool_result"?r.push(a):s.push(a);const l=[];for(let a=0;a<n.length;a++)l.push(n[a]),a<r.length&&l.push(r[a]);for(let a=n.length;a<r.length;a++)l.push(r[a]);return[...t,...l,...s]}function g0({memories:e}){const[t,n]=u.useState(!1);if(!e||e.length===0)return null;const r=na.injected_memories;return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:r.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-2",onClick:()=>n(!t),children:[o.jsx(Wc,{block_type:"injected_memories"}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:r.color},children:["(",e.length,")"]}),t?o.jsx(ph,{size:12,style:{color:r.color}}):o.jsx(ur,{size:12,style:{color:r.color}})]}),t&&o.jsx("div",{className:"mt-2 space-y-1",children:e.map(s=>o.jsxs("p",{className:"text-[11px] leading-relaxed",style:{color:ge.text},children:[o.jsxs("span",{style:{color:r.color,fontWeight:600},children:["#",s.id]})," ",s.content]},s.id))})]})}function v0({item:e,expanded:t,onToggle:n,live:r,avatarUrl:s,translateCache:l}){const a=e.rounds.map(c=>({...c,blocks:m0(c.blocks.filter(d=>d.block_type!=="text"&&d.block_type!=="usage"))})).filter(c=>c.blocks.length>0),i=a.length>0||e.injectedMemories&&e.injectedMemories.length>0||r&&e.textPreview;return o.jsxs("div",{className:"rounded-[18px] overflow-hidden",style:{background:ge.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-3 p-4",onClick:n,children:[o.jsx(p0,{avatarUrl:s}),o.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r&&o.jsx("span",{className:"inline-block h-3 w-3 animate-spin rounded-full border-[1.5px]",style:{borderColor:ge.accentDark,borderTopColor:"transparent"}}),e.has_tool_calls&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold",style:{background:"rgba(232,160,60,0.15)",color:"#b8820a"},children:""}),o.jsx(x0,{prompt:e.prompt_tokens||0,completion:e.completion_tokens||0,elapsedMs:e.elapsed_ms||0}),o.jsx("span",{className:"text-[10px]",style:{color:ge.textMuted},children:e.created_at||""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[13px]",style:{color:ge.text},children:e.preview||"()"})]}),t?o.jsx(ph,{size:16,style:{color:ge.textMuted,flexShrink:0}}):o.jsx(ur,{size:16,style:{color:ge.textMuted,flexShrink:0}})]}),t&&i&&o.jsxs("div",{className:"px-4 pb-4",children:[o.jsx(g0,{memories:e.injectedMemories}),a.map(c=>o.jsxs("div",{className:"mb-3",children:[a.length>1&&o.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:ge.textMuted},children:[" ",c.round_index+1]}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}})]}),c.blocks.map((d,p)=>{if(d.block_type==="thinking")return o.jsx(f0,{block:d,cacheKey:`${e.request_id}:${c.round_index}:${p}`,translateCache:l},p);const f=na[d.block_type]||{bg:"rgba(136,136,160,0.08)",color:ge.textMuted,label:d.block_type};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:f.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(Wc,{block_type:d.block_type}),d.tool_name&&o.jsx("span",{className:"text-[10px] font-mono",style:{color:f.color},children:d.tool_name})]}),o.jsx(Gh,{content:d.content})]},p)})]},c.round_index)),r&&e.textPreview&&o.jsxs("div",{className:"rounded-[12px] p-3",style:{background:"rgba(232,160,191,0.08)"},children:[o.jsx("div",{className:"mb-1",children:o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(232,160,191,0.15)",color:ge.accentDark},children:""})}),o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:ge.text},children:e.textPreview})]})]})]})}function y0(){const e=Ft(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[l,a]=u.useState(new Set),[i,c]=u.useState(()=>localStorage.getItem("chat_mode")||"long"),[d,p]=u.useState(!1),[f,h]=u.useState(new Set),[x,w]=u.useState(null),[v,b]=u.useState(null),g=u.useRef(null),m=u.useRef(new Map),[y,S]=u.useState(null),[j,N]=u.useState(!1),k=u.useRef(null),E=u.useRef(new Set),T=u.useRef(!1),R=u.useRef([]),[I,ae]=u.useState(()=>localStorage.getItem("whisper_token")),H=u.useRef(null),P=()=>{s(!0),w(null),T.current=!1,U("/api/cot?limit=100").then(A=>{n(Array.isArray(A)?A:[]),T.current=!0;const _=R.current;if(R.current=[],_.length>0&&H.current)for(const L of _)H.current(L)}).catch(A=>{console.error("COT load error:",A),w(A.message||""),T.current=!0}).finally(()=>{s(!1);const A=localStorage.getItem("whisper_token");A&&A!==I&&ae(A)})};u.useEffect(()=>{P()},[]),u.useEffect(()=>{U("/api/sessions?limit=1").then(A=>{var L;const _=(L=A.sessions)==null?void 0:L[0];_!=null&&_.assistant_id&&Zr(`assistant-avatar-${_.assistant_id}`).then(K=>{K&&b(K)}).catch(()=>{})}).catch(()=>{})},[]),u.useEffect(()=>{U("/api/settings/mood").then(A=>S(A.mood||"calm")).catch(()=>S("calm"))},[]),u.useEffect(()=>{if(!j)return;const A=_=>{k.current&&!k.current.contains(_.target)&&N(!1)};return document.addEventListener("pointerdown",A),()=>document.removeEventListener("pointerdown",A)},[j]),u.useEffect(()=>{if(!I){console.log("[COT WS] No token yet, waiting...");return}const _=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/cot?token=${encodeURIComponent(I)}`;console.log("[COT WS] Connecting to",_);let L,K,q=!1;const J=()=>{if(q)return;L=new WebSocket(_),g.current=L,L.onopen=()=>{console.log("[COT WS] Connected"),p(!0)};const Ce=te=>{const{type:be,request_id:ne}=te,Se=B=>{const X=B.findIndex(pe=>pe.request_id===ne);return X>=0?[B,X]:[[{request_id:ne,created_at:new Date().toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),preview:"...",has_tool_calls:!1,rounds:[],injectedMemories:[],textPreview:""},...B],0]},Be=(B,X)=>{const oe=B.findIndex(ee=>ee.round_index===X);if(oe>=0)return[B,oe];const ie=[...B,{round_index:X,blocks:[]}];return ie.sort((ee,pe)=>ee.round_index-pe.round_index),[ie,ie.findIndex(ee=>ee.round_index===X)]},Ne=B=>{E.current.has(B)||a(X=>{if(X.has(B))return X;const oe=new Set(X);return oe.add(B),oe})};if(be==="done"){h(B=>{const X=new Set(B);return X.delete(ne),X}),E.current.delete(ne),n(B=>B.map(X=>X.request_id===ne?{...X,prompt_tokens:te.prompt_tokens||0,completion_tokens:te.completion_tokens||0,elapsed_ms:te.elapsed_ms||0,textPreview:""}:X));return}if(be==="injected_memories"){n(B=>{let[X,oe]=Se(B);return X=[...X],X[oe]={...X[oe],injectedMemories:te.memories||[]},X}),h(B=>new Set(B).add(ne)),Ne(ne);return}if(be==="thinking_delta"){n(B=>{let[X,oe]=Se(B);X=[...X];const ie={...X[oe]};let[ee,pe]=Be([...ie.rounds],te.round_index);const Te={...ee[pe],blocks:[...ee[pe].blocks]};let De=-1;for(let xe=Te.blocks.length-1;xe>=0;xe--)if(Te.blocks[xe].block_type==="thinking"){De=xe;break}return De>=0?Te.blocks[De]={...Te.blocks[De],content:Te.blocks[De].content+te.content}:Te.blocks.push({block_type:"thinking",content:te.content,tool_name:null}),ee[pe]=Te,ie.rounds=ee,X[oe]=ie,X}),h(B=>new Set(B).add(ne)),Ne(ne);return}if(be==="text_delta"){n(B=>{let[X,oe]=Se(B);X=[...X];const ie={...X[oe]};return ie.textPreview=(ie.textPreview||"")+te.content,(!ie.preview||ie.preview==="...")&&(ie.preview=ie.textPreview.slice(0,80)),X[oe]=ie,X}),h(B=>new Set(B).add(ne)),Ne(ne);return}if(be==="tool_use"||be==="tool_result"){n(B=>{let[X,oe]=Se(B);X=[...X];const ie={...X[oe]};let[ee,pe]=Be([...ie.rounds],te.round_index);return ee[pe]={...ee[pe],blocks:[...ee[pe].blocks,{block_type:be,content:te.content,tool_name:te.tool_name}]},ie.rounds=ee,be==="tool_use"&&(ie.has_tool_calls=!0),X[oe]=ie,X}),h(B=>new Set(B).add(ne)),Ne(ne);return}if(te.block_type){const{round_index:B,block_type:X,content:oe,tool_name:ie}=te;n(ee=>{let[pe,Te]=Se(ee);pe=[...pe];const De={...pe[Te]};let[xe,W]=Be([...De.rounds],B);return xe[W]={...xe[W],blocks:[...xe[W].blocks,{block_type:X,content:oe,tool_name:ie}]},De.rounds=xe,X==="tool_use"&&(De.has_tool_calls=!0),X==="text"&&(!De.preview||De.preview==="...")&&(De.preview=oe.slice(0,80)),pe[Te]=De,pe}),h(ee=>new Set(ee).add(ne)),Ne(ne)}};H.current=Ce,L.onmessage=te=>{try{const be=JSON.parse(te.data);if(!T.current){R.current.push(be);return}Ce(be)}catch(be){}},L.onclose=te=>{console.log("[COT WS] Disconnected, code:",te.code,"reason:",te.reason),p(!1),g.current=null,q||(K=setTimeout(J,3e3))},L.onerror=te=>{console.error("[COT WS] Error:",te),L.close()}};return J(),()=>{q=!0,clearTimeout(K),g.current&&(g.current.onclose=null,g.current.close())}},[I]);const G=u.useRef(!0);u.useEffect(()=>{if(G.current){G.current=!1;return}localStorage.setItem("chat_mode",i);const A=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({...A,shortMode:i==="short"})),U("/api/settings/chat-mode",{method:"PUT",body:{mode:i}}).catch(()=>{})},[i]);const fe=A=>{S(A),N(!1),U("/api/settings/mood",{method:"PUT",body:{mood:A}}).catch(()=>{})};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:ge.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ge.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:ge.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:ge.text},children:"COT "}),o.jsxs("div",{className:"flex items-center gap-2",children:[d&&o.jsx("div",{className:"h-2 w-2 rounded-full",style:{background:"#2a9d5c"},title:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ge.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:P,disabled:r,children:o.jsx(Lc,{size:16,style:{color:ge.accentDark},className:r?"animate-spin":""})})]})]}),o.jsx("div",{className:"shrink-0 pb-3",style:{paddingLeft:20,paddingRight:20},children:o.jsxs("div",{className:"flex items-stretch gap-4 justify-center",children:[o.jsxs("div",{className:"relative flex",ref:k,children:[o.jsx("button",{className:"flex w-[42px] shrink-0 items-center justify-center rounded-[14px]",style:{background:ge.bg,boxShadow:"var(--inset-shadow)"},onClick:()=>y&&N(!j),children:y?o.jsx("img",{src:`/miniapp/assets/mood/${y}.png`,alt:y,className:"h-6 w-6",style:{imageRendering:"pixelated"}}):o.jsx("div",{className:"h-6 w-6"})}),j&&o.jsx("div",{className:"absolute left-0 top-12 z-50 rounded-[16px] overflow-hidden",style:{background:ge.bg,boxShadow:"var(--card-shadow-sm)",width:174},children:d0.map((A,_)=>{const L=Math.floor(_/3),K=_%3,q=y===A.key;return o.jsxs("button",{className:"inline-flex flex-col items-center justify-center",style:{width:"calc(100% / 3)",padding:"8px 0 6px",background:q?"rgba(232,160,191,0.18)":"transparent",boxShadow:[K<2?"inset -1px 0 0 rgba(136,136,160,0.12)":"",L<2?"inset 0 -1px 0 rgba(136,136,160,0.12)":""].filter(Boolean).join(", ")||"none"},onClick:()=>fe(A.key),children:[o.jsx("img",{src:`/miniapp/assets/mood/${A.key}.png`,alt:A.label,className:"h-7 w-7",style:{imageRendering:"pixelated",filter:q?"drop-shadow(0 0 3px #e8a0bf)":"none"}}),o.jsx("span",{className:"text-[10px] mt-0.5",style:{color:q?"#d48aab":ge.textMuted},children:A.label})]},A.key)})})]}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:ge.bg,width:160},children:u0.map(A=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:i===A.key?ge.bg:"transparent",boxShadow:i===A.key?"var(--card-shadow-sm)":"none",color:i===A.key?ge.accentDark:ge.textMuted},onClick:()=>c(A.key),children:A.label},A.key))})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:ge.accent,borderTopColor:"transparent"}})}):x?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(dd,{size:36,style:{color:"#ef4444",opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:"#ef4444"},children:x})]}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(dd,{size:36,style:{color:ge.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:ge.textMuted},children:" COT "})]}):t.map(A=>o.jsx("div",{className:"mb-3 rounded-[18px]",style:{background:ge.bg,boxShadow:"var(--card-shadow-sm)"},children:o.jsx(v0,{item:A,expanded:l.has(A.request_id),onToggle:()=>{a(_=>{const L=new Set(_);return L.has(A.request_id)?(L.delete(A.request_id),E.current.add(A.request_id)):(L.add(A.request_id),E.current.delete(A.request_id)),L})},live:f.has(A.request_id),avatarUrl:v,translateCache:m})},A.request_id))})]})}const Je={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Rl=80;function w0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const v=Math.min(1,Math.abs(p)/Rl);x.style.transition=w,x.style.opacity=`${v}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const v=Math.max(-Rl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${v}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(v)/Rl)}`),f.current=v},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Rl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Je.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(qr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function b0({msg:e,roleLabel:t,roleColor:n,fmtTime:r,onDelete:s}){const[l,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);return u.useLayoutEffect(()=>{const p=d.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e.content,l]),o.jsx(w0,{onDelete:s,children:o.jsxs("div",{className:"rounded-[18px] p-3",style:{background:Je.bg},children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:n(e.role)},children:t(e.role)}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[e.summarized&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px] font-semibold",style:{background:"rgba(58,138,95,0.15)",color:"#2d7a4a"},children:""}),o.jsx("span",{className:"text-[10px]",style:{color:Je.textMuted},children:r(e.created_at)})]})]}),o.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:Je.text}:{color:Je.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:e.content}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:"#d48aab",background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})})]})})}function k0(){const e=Ft(),[t,n]=u.useState([]),[r,s]=u.useState(null),[l,a]=u.useState(!0),[i,c]=u.useState(!1),d=async()=>{var v;a(!0);try{const g=(v=(await U("/api/sessions?limit=1")).sessions)==null?void 0:v[0];if(!g){a(!1);return}s(g.id);const m=await U(`/api/sessions/${g.id}/messages?limit=50`);n((m.messages||[]).reverse()),c(m.has_more||!1)}catch(b){console.error(b)}a(!1)};u.useEffect(()=>{d()},[]);const p=async v=>{if(r)try{await U(`/api/sessions/${r}/messages/${v}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==v))}catch(b){console.error("Delete failed",b)}},f=async()=>{if(!r||!i||l)return;const v=t[t.length-1];if(v){a(!0);try{const b=await U(`/api/sessions/${r}/messages?limit=50&before_id=${v.id}`),g=(b.messages||[]).reverse();n(m=>[...m,...g]),c(b.has_more||!1)}catch(b){console.error(b)}a(!1)}},h=v=>{if(!v)return"";const b=new Date(v),g=new Date;return b.toDateString()===g.toDateString()?b.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):b.toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})},x=v=>v==="user"?"":v==="assistant"?"AI":"",w=v=>v==="user"?Je.accentDark:v==="assistant"?"#3a9b5c":Je.textMuted;return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Je.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Je.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:Je.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Je.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Je.bg,boxShadow:l?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:d,disabled:l,children:o.jsx(Lc,{size:16,style:{color:Je.accentDark},className:l?"animate-spin":""})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("p",{className:"text-[11px]",style:{color:Je.textMuted},children:""})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l&&t.length===0?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Je.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:Je.textMuted},children:""}):o.jsxs(o.Fragment,{children:[t.map(v=>o.jsx(b0,{msg:v,roleLabel:x,roleColor:w,fmtTime:h,onDelete:()=>p(v.id)},v.id)),i&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:Je.bg,boxShadow:"var(--card-shadow-sm)",color:Je.accentDark},onClick:f,disabled:l,children:l?"...":""})]})})]})}const z={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},j0=[{key:"memories",label:""},{key:"summaries",label:""},{key:"messages",label:""}],Od={identity:{color:"#7b5ea7",bg:"#ede4f7"},relationship:{color:"#c26a8a",bg:"#f7e0ea"},bond:{color:"#d48aab",bg:"#fce8f0"},conflict:{color:"#b5454a",bg:"#f5dede"},fact:{color:"#4a8ab5",bg:"#deedf5"},preference:{color:"#9b7a3b",bg:"#f0ebd8"},health:{color:"#4a9b6e",bg:"#ddf0e5"},task:{color:"#6b7b9b",bg:"#e0e6f0"},ephemeral:{color:"#9b9b9b",bg:"#ececec"},other:{color:"#8a7a6a",bg:"#efe8df"}},Jh=[{value:"",label:""},{value:"identity",label:"identity"},{value:"relationship",label:"relationship"},{value:"bond",label:"bond"},{value:"conflict",label:"conflict"},{value:"fact",label:"fact"},{value:"preference",label:"preference"},{value:"health",label:"health"},{value:"task",label:"task"},{value:"ephemeral",label:"ephemeral"},{value:"other",label:"other"}],S0=[{value:"",label:""},{value:"sad",label:"sad"},{value:"angry",label:"angry"},{value:"anxious",label:"anxious"},{value:"tired",label:"tired"},{value:"emo",label:"emo"},{value:"happy",label:"happy"},{value:"flirty",label:"flirty"},{value:"proud",label:"proud"},{value:"calm",label:"calm"}],N0=[{value:"",label:""},{value:"user",label:""},{value:"assistant",label:""},{value:"system",label:""}];function Tr(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function Vc({text:e,keyword:t}){if(!t||!e)return o.jsx(o.Fragment,{children:e});const n=e.toLowerCase(),r=t.toLowerCase(),s=[];let l=0,a=n.indexOf(r,l);for(;a!==-1;)a>l&&s.push(o.jsx("span",{children:e.slice(l,a)},l)),s.push(o.jsx("span",{style:{color:z.accentDark,fontWeight:600},children:e.slice(a,a+r.length)},`h${a}`)),l=a+r.length,a=n.indexOf(r,l);return l<e.length&&s.push(o.jsx("span",{children:e.slice(l)},l)),o.jsx(o.Fragment,{children:s})}function qh({selected:e}){return o.jsx("div",{className:"flex h-5 w-5 shrink-0 items-center justify-center rounded-full",style:e?{background:z.accentDark,boxShadow:"0 2px 6px rgba(201,98,138,0.3)"}:{background:z.bg,boxShadow:"var(--inset-shadow)"},children:e&&o.jsx(lr,{size:12,color:"white",strokeWidth:3})})}function C0({message:e,onConfirm:t,onCancel:n}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:z.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:z.text},children:""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:z.textMuted},children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:z.bg,boxShadow:"var(--card-shadow-sm)",color:z.text},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function E0({initialText:e,onSave:t,onCancel:n,memoryData:r}){var h;const[s,l]=u.useState(e),[a,i]=u.useState((r==null?void 0:r.klass)||"other"),[c,d]=u.useState((((h=r==null?void 0:r.tags)==null?void 0:h.topic)||[]).join(", ")),p=!!r,f=Jh.filter(x=>x.value);return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-5 w-full max-w-[340px] rounded-[18px] p-4",style:{background:z.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:x=>x.stopPropagation(),children:[o.jsx("textarea",{className:"w-full rounded-[12px] p-3 text-[12px] leading-relaxed resize-none outline-none",style:{background:z.bg,boxShadow:"var(--inset-shadow)",color:z.text,minHeight:p?100:140,maxHeight:280},value:s,onChange:x=>l(x.target.value),autoFocus:!0}),p&&o.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:z.textMuted},children:""}),o.jsxs("div",{className:"relative flex-1",children:[o.jsx("select",{className:"w-full appearance-none rounded-[10px] px-3 py-1.5 text-[11px] font-medium outline-none",style:{background:z.bg,boxShadow:"var(--inset-shadow)",color:z.text,WebkitAppearance:"none"},value:a,onChange:x=>i(x.target.value),children:f.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))}),o.jsx(ur,{size:10,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2",style:{color:z.textMuted}})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:z.textMuted},children:""}),o.jsx("input",{className:"flex-1 rounded-[10px] px-3 py-1.5 text-[11px] outline-none",style:{background:z.bg,boxShadow:"var(--inset-shadow)",color:z.text},placeholder:", ",value:c,onChange:x=>d(x.target.value)})]})]}),o.jsxs("div",{className:"mt-3 flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:z.bg,boxShadow:"var(--card-shadow-sm)",color:z.textMuted},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:z.bg,boxShadow:"var(--card-shadow-sm)",color:z.accentDark},onClick:()=>{if(p){const x=c.split(/[,]/).map(w=>w.trim()).filter(Boolean);t(s,a,{topic:x})}else t(s)},disabled:!s.trim(),children:""})]})]})})}function $d({value:e,rawValue:t,onChange:n,options:r,width:s,active:l}){var p;const[a,i]=u.useState(!1),c=u.useRef(null);u.useEffect(()=>{if(!a)return;const f=h=>{c.current&&!c.current.contains(h.target)&&i(!1)};return document.addEventListener("mousedown",f),document.addEventListener("touchstart",f),()=>{document.removeEventListener("mousedown",f),document.removeEventListener("touchstart",f)}},[a]);const d=((p=r.find(f=>f.value===String(t)))==null?void 0:p.label)||e||"";return o.jsxs("div",{className:"relative",style:{width:s},ref:c,children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[12px] px-2.5 py-2 text-[11px] font-medium text-left",style:{boxShadow:"var(--card-shadow-sm)",background:z.bg,color:l?z.accentDark:z.text},onClick:()=>i(!a),children:[o.jsx("span",{className:"truncate flex-1",children:d}),o.jsx(ur,{size:10,style:{color:z.textMuted,flexShrink:0,marginLeft:2,transform:a?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),a&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[12px]",style:{background:z.bg,boxShadow:"var(--card-shadow)"},children:r.map(f=>o.jsxs("button",{className:"flex w-full items-center justify-between px-3 py-2 text-[11px]",style:{color:z.text},onClick:()=>{n(f.value),i(!1)},children:[o.jsx("span",{className:"truncate",children:f.label}),String(t)===f.value&&o.jsx(lr,{size:10,style:{color:z.accentDark,flexShrink:0}})]},f.value))})]})}function Ad({children:e,time:t,badge:n,keyword:r,onEdit:s,selectMode:l,selected:a,onToggle:i,onLongPress:c}){const[d,p]=u.useState(!1),[f,h]=u.useState(!1),x=u.useRef(null),w=typeof e=="string"?e:"",v=u.useRef(null),b=u.useRef(!1),g=u.useRef(null);u.useLayoutEffect(()=>{const N=x.current;N&&!d&&h(N.scrollHeight>N.clientHeight+1)},[w,d]);const m=N=>{if(l)return;const k=N.touches[0];g.current={x:k.clientX,y:k.clientY},b.current=!1,v.current=setTimeout(()=>{b.current=!0,c==null||c()},600)},y=N=>{if(!g.current||!v.current)return;const k=N.touches[0],E=k.clientX-g.current.x,T=k.clientY-g.current.y;E*E+T*T>100&&(clearTimeout(v.current),v.current=null)},S=()=>{clearTimeout(v.current)},j=()=>{if(!b.current&&l){i==null||i();return}};return o.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:z.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:m,onTouchMove:y,onTouchEnd:S,onTouchCancel:S,onClick:j,children:[l&&o.jsx("div",{className:"mt-1",children:o.jsx(qh,{selected:a})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between gap-1",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[n,o.jsx("div",{ref:x,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:d?{color:z.text}:{color:z.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:N=>{l||(N.stopPropagation(),p(!d))},children:o.jsx(Vc,{text:w,keyword:r})})]}),!l&&s&&o.jsx("button",{className:"mt-0.5 flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:z.bg,boxShadow:"var(--card-shadow-sm)"},onClick:N=>{N.stopPropagation(),s()},children:o.jsx(hh,{size:11,style:{color:z.accentDark}})})]}),o.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:z.textMuted},children:t||""}),!l&&(f||d)&&o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:z.accentDark,background:"rgba(232,160,191,0.1)"},onClick:N=>{N.stopPropagation(),p(!d)},children:d?"":""})]})]})]})}function M0({content:e,deletedAt:t,keyword:n,onRestore:r,onPermanentDelete:s}){const[l,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);return u.useLayoutEffect(()=>{const p=d.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e,l]),o.jsxs("div",{className:"mb-2 rounded-[14px] p-3",style:{background:z.bg,boxShadow:"var(--card-shadow-sm)",opacity:.75},children:[o.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:z.text}:{color:z.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:o.jsx(Vc,{text:e,keyword:n})}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:z.accentDark,background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:z.textMuted},children:t?(()=>{const p=Math.max(0,30-Math.floor((Date.now()-new Date(t).getTime())/864e5));return` ${Tr(t)}  ${p}`})():""}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(59,130,246,0.1)",color:"#3b82f6"},onClick:r,children:""}),o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(239,68,68,0.1)",color:"#ef4444"},onClick:s,children:""})]})]})]})}function _0({msg:e,keyword:t,roleLabel:n,roleColor:r,selectMode:s,selected:l,onToggle:a,onLongPress:i}){const[c,d]=u.useState(!1),[p,f]=u.useState(!1),h=u.useRef(null),x=u.useRef(null),w=u.useRef(!1),v=u.useRef(null);u.useLayoutEffect(()=>{const S=h.current;S&&!c&&f(S.scrollHeight>S.clientHeight+1)},[e.content,c]);const b=S=>{if(s)return;const j=S.touches[0];v.current={x:j.clientX,y:j.clientY},w.current=!1,x.current=setTimeout(()=>{w.current=!0,i==null||i()},600)},g=S=>{if(!v.current||!x.current)return;const j=S.touches[0],N=j.clientX-v.current.x,k=j.clientY-v.current.y;N*N+k*k>100&&(clearTimeout(x.current),x.current=null)},m=()=>{clearTimeout(x.current)},y=()=>{if(!w.current&&s){a==null||a();return}};return o.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:z.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:b,onTouchMove:g,onTouchEnd:m,onTouchCancel:m,onClick:y,children:[s&&o.jsx("div",{className:"mt-1",children:o.jsx(qh,{selected:l})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:r(e.role)},children:n(e.role)}),e.summary_group_id&&o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(74,138,181,0.1)",color:"#4a8ab5"},children:["",e.summary_group_id]})]}),o.jsx("span",{className:"text-[10px]",style:{color:z.textMuted},children:Tr(e.created_at)})]}),o.jsx("div",{ref:h,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:c?{color:z.text}:{color:z.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:S=>{s||(S.stopPropagation(),d(!c))},children:o.jsx(Vc,{text:e.content,keyword:t})}),!s&&(p||c)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:z.accentDark,background:"rgba(232,160,191,0.1)"},onClick:S=>{S.stopPropagation(),d(!c)},children:c?"":""})})]})]})}function T0(){var Xe;const e=Ft(),[t,n]=u.useState("memories"),[r,s]=u.useState(!1),[l,a]=u.useState(null),[i,c]=u.useState([]),[d,p]=u.useState(null),[f,h]=u.useState(""),[x,w]=u.useState(null),[v,b]=u.useState(null),[g,m]=u.useState(""),[y,S]=u.useState(""),[j,N]=u.useState(""),[k,E]=u.useState(!1),[T,R]=u.useState(new Set),[I,ae]=u.useState([]),[H,P]=u.useState([]),[G,fe]=u.useState([]),[A,_]=u.useState([]),[L,K]=u.useState([]),[q,J]=u.useState(!0),[Ce,te]=u.useState(!1),[be,ne]=u.useState(!1),[Se,Be]=u.useState(!1);u.useEffect(()=>{E(!1),R(new Set)},[t]),u.useEffect(()=>{U("/api/sessions?limit=50").then(C=>{const $=C.sessions||[];c($),$.length>0&&!l&&a($[0].id)}).catch(()=>{})},[]),u.useEffect(()=>{l&&U(`/api/sessions/${l}/info`).then(C=>p(C.assistant_name||null)).catch(()=>p(null))},[l]);const Ne=50,B=u.useRef(""),X=u.useRef(null),oe=u.useRef({klass:"",mood:"",role:""});oe.current={klass:g,mood:y,role:j},u.useEffect(()=>{l&&ee()},[l,r]),u.useEffect(()=>{l&&!r&&ee()},[t]),u.useEffect(()=>{l&&!r&&ee()},[g,y,j]),u.useEffect(()=>(X.current&&clearTimeout(X.current),X.current=setTimeout(()=>{const C=f.trim();C!==B.current&&(B.current=C,l&&ee(C))},400),()=>{X.current&&clearTimeout(X.current)}),[f]);const ie=C=>{const $=[],Y=(C!=null?C:B.current||"").trim();Y&&$.push(`search=${encodeURIComponent(Y)}`);const re=oe.current;return t==="memories"&&re.klass&&$.push(`klass=${encodeURIComponent(re.klass)}`),t==="summaries"&&re.mood&&$.push(`mood_tag=${encodeURIComponent(re.mood)}`),t==="messages"&&re.role&&$.push(`role=${encodeURIComponent(re.role)}`),$.length?`&${$.join("&")}`:""},ee=async C=>{if(!l)return;J(!0);const $=ie(C);try{if(r){const[Y,re]=await Promise.all([U("/api/memories/trash?limit=100"),U(`/api/sessions/${l}/summaries/trash`)]);_(Y.memories||[]),K(re.summaries||[])}else if(t==="memories"){const Y=await U(`/api/memories?limit=${Ne}&offset=0${$}`);ae(Y.memories||[]),te((Y.total||0)>(Y.memories||[]).length)}else if(t==="summaries"){const Y=await U(`/api/sessions/${l}/summaries?limit=${Ne}&offset=0${$}`);P(Y.summaries||[]),ne((Y.total||0)>(Y.summaries||[]).length)}else{const Y=await U(`/api/sessions/${l}/messages?limit=50${$}`);fe((Y.messages||[]).reverse()),Be(Y.has_more||!1)}}catch(Y){console.error(Y)}J(!1)},pe=async()=>{if(!Ce||q)return;J(!0);const C=ie();try{const $=await U(`/api/memories?limit=${Ne}&offset=${I.length}${C}`),Y=$.memories||[];ae(re=>[...re,...Y]),te(($.total||0)>I.length+Y.length)}catch($){console.error($)}J(!1)},Te=async()=>{if(!l||!be||q)return;J(!0);const C=ie();try{const $=await U(`/api/sessions/${l}/summaries?limit=${Ne}&offset=${H.length}${C}`),Y=$.summaries||[];P(re=>[...re,...Y]),ne(($.total||0)>H.length+Y.length)}catch($){console.error($)}J(!1)},De=async()=>{if(!l||!Se||q)return;const C=G[G.length-1];if(!C)return;J(!0);const $=ie();try{const Y=await U(`/api/sessions/${l}/messages?limit=50&before_id=${C.id}${$}`);fe(re=>[...re,...(Y.messages||[]).reverse()]),Be(Y.has_more||!1)}catch(Y){console.error(Y)}J(!1)},xe=f.trim(),W=u.useMemo(()=>xe?A.filter(C=>C.content.toLowerCase().includes(xe.toLowerCase())):A,[A,xe]),ce=u.useMemo(()=>xe?L.filter(C=>(C.summary_content||"").toLowerCase().includes(xe.toLowerCase())):L,[L,xe]),ke=(C,$)=>w({message:C,action:$}),Ie=async C=>{await U(`/api/memories/${C}/restore`,{method:"POST"}),_($=>$.filter(Y=>Y.id!==C))},Rt=C=>ke("",async()=>{await U(`/api/memories/${C}/permanent`,{method:"DELETE"}),_($=>$.filter(Y=>Y.id!==C))}),Ve=async C=>{await U(`/api/sessions/${l}/summaries/${C}/restore`,{method:"POST"}),K($=>$.filter(Y=>Y.id!==C))},Hn=C=>ke("",async()=>{await U(`/api/sessions/${l}/summaries/${C}/permanent`,{method:"DELETE"}),K($=>$.filter(Y=>Y.id!==C))}),sn=C=>{R($=>{const Y=new Set($);return Y.has(C)?Y.delete(C):Y.add(C),Y})},jt=C=>{E(!0),R(new Set([C]))},Gt=()=>{let C=[];t==="memories"?C=I.map($=>$.id):t==="summaries"?C=H.map($=>$.id):C=G.map($=>$.id),R(new Set(C))},Jt=()=>{E(!1),R(new Set)},Wn=()=>{if(T.size===0)return;const C=T.size,$=t==="messages"?` ${C} `:` ${C} ${t==="memories"?"":""}`;ke($,async()=>{const Y=[...T];t==="memories"?(await U("/api/memories/batch",{method:"DELETE",body:{ids:Y}}),ae(re=>re.filter(Ee=>!T.has(Ee.id)))):t==="summaries"?(await U(`/api/sessions/${l}/summaries/batch`,{method:"DELETE",body:{ids:Y}}),P(re=>re.filter(Ee=>!T.has(Ee.id)))):(await U(`/api/sessions/${l}/messages/batch`,{method:"DELETE",body:{ids:Y}}),fe(re=>re.filter(Ee=>!T.has(Ee.id)))),Jt()})},St=async(C,$,Y)=>{if(v){try{if(v.type==="memory"){const re={content:C};$!==void 0&&(re.klass=$),Y!==void 0&&(re.tags=Y),await U(`/api/memories/${v.id}`,{method:"PUT",body:re}),ae(Ee=>Ee.map(lt=>lt.id===v.id?{...lt,content:C,...$!==void 0?{klass:$}:{},...Y!==void 0?{tags:Y}:{}}:lt))}else await U(`/api/sessions/${l}/summaries/${v.id}`,{method:"PATCH",body:{summary_content:C}}),P(re=>re.map(Ee=>Ee.id===v.id?{...Ee,summary_content:C}:Ee))}catch(re){console.error(re)}b(null)}},Vn=C=>C==="user"?"":C==="assistant"?d||"":"",dr=C=>C==="user"?z.accentDark:C==="assistant"?"#8d68c4":z.textMuted,O=t==="memories"?Jh:t==="summaries"?S0:N0,he=t==="memories"?g:t==="summaries"?y:j,se=C=>{t==="memories"?m(C):t==="summaries"?S(C):N(C)},rs=r?(()=>{if(q)return o.jsx(Pl,{});const C=t==="memories"?W:ce;return C.length===0?o.jsx(zl,{text:xe?"":""}):C.map($=>o.jsx(M0,{content:$.content||$.summary_content||"()",deletedAt:$.deleted_at,keyword:xe,onRestore:()=>t==="memories"?Ie($.id):Ve($.id),onPermanentDelete:()=>t==="memories"?Rt($.id):Hn($.id)},$.id))})():t==="memories"?q&&I.length===0?o.jsx(Pl,{}):I.length===0?o.jsx(zl,{text:xe?"":""}):o.jsxs(o.Fragment,{children:[!k&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:z.textMuted},children:""}),I.map(C=>o.jsx(Ad,{time:C.updated_at?`${Tr(C.created_at)}   ${Tr(C.updated_at)}`:Tr(C.created_at),keyword:xe,onEdit:()=>b({type:"memory",id:C.id,text:C.content,klass:C.klass,tags:C.tags}),selectMode:k,selected:T.has(C.id),onToggle:()=>sn(C.id),onLongPress:()=>jt(C.id),badge:(()=>{var re;const $=Od[C.klass]||Od.other,Y=((re=C.tags)==null?void 0:re.topic)||[];return o.jsxs("div",{className:"flex flex-wrap items-center gap-1 mb-1",children:[o.jsx("span",{className:"inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:$.bg,color:$.color},children:C.klass}),o.jsxs("span",{className:"inline-block text-[10px]",style:{color:z.textMuted},children:["#",C.id]}),Y.map((Ee,lt)=>o.jsx("span",{className:"inline-block rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(136,136,160,0.1)",color:z.textMuted},children:Ee},lt))]})})(),children:C.content},C.id)),Ce&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:z.bg,boxShadow:"var(--card-shadow-sm)",color:z.accentDark},onClick:pe,disabled:q,children:q?"...":""})]}):t==="summaries"?q&&H.length===0?o.jsx(Pl,{}):H.length===0?o.jsx(zl,{text:xe?"":""}):o.jsxs(o.Fragment,{children:[!k&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:z.textMuted},children:""}),H.map(C=>o.jsx(Ad,{time:Tr(C.created_at),keyword:xe,onEdit:()=>b({type:"summary",id:C.id,text:C.summary_content}),selectMode:k,selected:T.has(C.id),onToggle:()=>sn(C.id),onLongPress:()=>jt(C.id),badge:o.jsxs(o.Fragment,{children:[C.mood_tag&&o.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:"rgba(232,160,191,0.15)",color:z.accentDark},children:C.mood_tag}),o.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:z.textMuted},children:["#",C.id]})]}),children:C.summary_content||"()"},C.id)),be&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:z.bg,boxShadow:"var(--card-shadow-sm)",color:z.accentDark},onClick:Te,disabled:q,children:q?"...":""})]}):q&&G.length===0?o.jsx(Pl,{}):G.length===0?o.jsx(zl,{text:xe?"":""}):o.jsxs(o.Fragment,{children:[!k&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:z.textMuted},children:""}),G.map(C=>o.jsx(_0,{msg:C,keyword:xe,roleLabel:Vn,roleColor:dr,selectMode:k,selected:T.has(C.id),onToggle:()=>sn(C.id),onLongPress:()=>jt(C.id)},C.id)),Se&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:z.bg,boxShadow:"var(--card-shadow-sm)",color:z.accentDark},onClick:De,disabled:q,children:q?"...":""})]});return o.jsxs("div",{className:"flex h-full flex-col",style:{background:z.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:z.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:z.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:z.text},children:r?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:z.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>s(!r),children:o.jsx(qr,{size:16,style:{color:r?"#ef4444":z.accentDark}})})]}),k&&o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsxs("div",{className:"flex items-center justify-between rounded-[14px] px-4 py-2.5",style:{background:z.bg,boxShadow:"var(--inset-shadow)"},children:[o.jsxs("span",{className:"text-[12px] font-semibold",style:{color:z.accentDark},children:[" ",T.size," "]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:"rgba(59,130,246,0.15)",color:"#3b82f6"},onClick:Gt,children:""}),o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:z.bg,boxShadow:"var(--card-shadow-sm)",color:z.textMuted},onClick:Jt,children:""}),o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold text-white",style:{background:T.size>0?"#ff4d6d":"rgba(255,77,109,0.3)"},onClick:Wn,disabled:T.size===0,children:""})]})]})}),!k&&o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:z.bg,boxShadow:"var(--inset-shadow)"},children:j0.map(C=>{const $=r&&C.key==="messages",Y=t===C.key;return o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:$?{color:z.textMuted,opacity:.35,cursor:"default"}:Y?{background:z.bg,boxShadow:"var(--card-shadow-sm)",color:z.accentDark}:{color:z.textMuted},disabled:$,onClick:()=>!$&&n(C.key),children:C.label},C.key)})})}),!k&&o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx($d,{value:l?`#${l}`:"",rawValue:l!=null?l:"",onChange:C=>a(Number(C)),options:i.map(C=>({value:String(C.id),label:`#${C.id} ${C.title||""}`})),width:"22%"}),o.jsx($d,{value:((Xe=O.find(C=>C.value===he))==null?void 0:Xe.label)||O[0].label,rawValue:he,onChange:se,options:O.map(C=>({value:C.value,label:C.label})),width:"22%",active:!!he}),o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Bv,{size:13,className:"absolute left-2.5 top-1/2 -translate-y-1/2",style:{color:z.textMuted}}),o.jsx("input",{className:"w-full rounded-[12px] py-2 pl-8 pr-7 text-[11px] outline-none",style:{background:z.bg,boxShadow:"var(--inset-shadow)",color:z.text},placeholder:"...",value:f,onChange:C=>h(C.target.value)}),f&&o.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>h(""),children:o.jsx(ll,{size:13,style:{color:z.textMuted}})})]})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:rs}),x&&o.jsx(C0,{message:x.message,onConfirm:async()=>{try{await x.action()}catch(C){console.error(C)}w(null)},onCancel:()=>w(null)}),v&&o.jsx(E0,{initialText:v.text,onSave:St,onCancel:()=>b(null),memoryData:v.type==="memory"?{klass:v.klass,tags:v.tags}:null})]})}function Pl(){return o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:z.accent,borderTopColor:"transparent"}})})}function zl({text:e}){return o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:z.textMuted},children:e})}const Q={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},D0=[{key:"theirs",label:""},{key:"mine",label:""}],Il=80;function Zh(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function R0({message:e,onConfirm:t,onCancel:n}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Q.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Q.text},children:""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:Q.textMuted},children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)",color:Q.text},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function P0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const v=Math.min(1,Math.abs(p)/Il);x.style.transition=w,x.style.opacity=`${v}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const v=Math.max(-Il,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${v}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(v)/Il)}`),f.current=v},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Il):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(qr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function z0({unlockAt:e}){const[t,n]=u.useState(Date.now());u.useEffect(()=>{const d=setInterval(()=>n(Date.now()),1e3);return()=>clearInterval(d)},[]);const r=new Date(e).getTime()-t;if(r<=0)return null;const s=Math.floor(r/864e5),l=Math.floor(r%864e5/36e5),a=Math.floor(r%36e5/6e4),i=Math.floor(r%6e4/1e3);let c="";return s>0&&(c+=`${s}`),(l>0||s>0)&&(c+=`${l}`),c+=`${a}${i}`,o.jsxs("div",{className:"flex items-center gap-1.5 text-[12px]",style:{color:Q.accentDark},children:[o.jsx($v,{size:12}),o.jsx("span",{children:c})]})}function I0({assistants:e,avatarMap:t,currentId:n,onSelect:r,onClose:s}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:s,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-5",style:{background:Q.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:l=>l.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:Q.text},children:""}),o.jsx("button",{onClick:s,children:o.jsx(ll,{size:18,style:{color:Q.textMuted}})})]}),o.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:e.map(l=>{var i;const a=t[l.id]||l.avatar_url;return o.jsxs("button",{className:"mb-2 flex w-full items-center gap-3 rounded-[14px] p-3 text-left",style:{background:Q.bg,boxShadow:l.id===n?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{r(l.id),s()},children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:36,height:36,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:2},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Q.bg},children:a?o.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:Q.accentDark},children:((i=l.name)==null?void 0:i[0])||"?"})})}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:Q.text},children:l.name})]},l.id)})})]})})}function L0({diary:e,onBack:t,onMarkRead:n}){return u.useEffect(()=>{e&&!e.is_read&&e.author==="assistant"&&(!e.unlock_at||new Date(e.unlock_at)<=new Date)&&n(e.id)},[e]),o.jsxs("div",{className:"flex h-full flex-col",style:{background:Q.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:t,children:o.jsx(Dt,{size:22,style:{color:Q.text}})}),o.jsx("h1",{className:"text-[15px] font-bold truncate max-w-[60%]",style:{color:Q.text},children:e.title||""}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:o.jsxs("div",{className:"rounded-[18px] p-5",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{className:"mb-3 text-[10px]",style:{color:Q.textMuted},children:Zh(e.created_at)}),o.jsx("div",{className:"text-[13px] leading-[28px]",style:{color:Q.text},children:e.content.split(`
`).map((r,s)=>o.jsx("div",{style:{borderBottom:"1px solid rgba(0,0,0,0.06)",minHeight:28},children:r||""},s))})]})})]})}function O0({assistantId:e,onSave:t,onCancel:n}){const[r,s]=u.useState(""),[l,a]=u.useState(""),[i,c]=u.useState(!1),[d,p]=u.useState(""),[f,h]=u.useState(!1),[x,w]=u.useState(!1),v=async()=>{if(!(!l.trim()||f)){h(!0);try{const b={assistant_id:e,author:"user",title:r.trim(),content:l.trim()};i&&d&&(b.unlock_at=new Date(d).toISOString()),await t(b)}finally{h(!1)}}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Q.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Dt,{size:22,style:{color:Q.text}})}),o.jsx("h1",{className:"text-[15px] font-bold",style:{color:Q.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Q.bg,boxShadow:l.trim()?"var(--card-shadow-sm)":"var(--inset-shadow)"},onClick:v,disabled:!l.trim()||f,children:o.jsx("span",{className:"text-[12px] font-bold",style:{color:l.trim()?Q.accentDark:Q.textMuted},children:""})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[!x&&o.jsx("input",{className:"mb-3 w-full rounded-[12px] px-3 py-2.5 text-[13px] font-medium outline-none",style:{background:Q.bg,boxShadow:"var(--inset-shadow)",color:Q.text},placeholder:"",value:r,onChange:b=>s(b.target.value)}),o.jsxs("div",{className:"relative mb-3",children:[o.jsx("textarea",{className:"w-full rounded-[14px] p-3 text-[13px] leading-[28px] resize-none outline-none",style:{background:Q.bg,boxShadow:"var(--inset-shadow)",color:Q.text,minHeight:x?"calc(100vh - 120px)":200,backgroundImage:"repeating-linear-gradient(transparent, transparent 27px, rgba(0,0,0,0.05) 27px, rgba(0,0,0,0.05) 28px)",backgroundPositionY:9},placeholder:"...",value:l,onChange:b=>a(b.target.value),autoFocus:!0}),o.jsx("button",{className:"absolute top-2 right-2 flex h-7 w-7 items-center justify-center rounded-full",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>w(!x),children:x?o.jsx(Xr,{size:13,style:{color:Q.accentDark}}):o.jsx(sl,{size:13,style:{color:Q.accentDark}})})]}),!x&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-[14px] px-4 py-3",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-[13px] font-medium",style:{color:Q.text},children:""}),o.jsx("p",{className:"text-[10px]",style:{color:Q.textMuted},children:""})]}),o.jsx("button",{className:"relative h-7 w-12 rounded-full transition-colors",style:{background:i?Q.accent:"rgba(0,0,0,0.1)"},onClick:()=>{if(!i&&!d){const b=new Date;b.setDate(b.getDate()+1),b.setHours(9,0,0,0);const g=m=>String(m).padStart(2,"0");p(`${b.getFullYear()}-${g(b.getMonth()+1)}-${g(b.getDate())}T${g(b.getHours())}:${g(b.getMinutes())}`)}c(!i)},children:o.jsx("div",{className:"absolute top-0.5 h-6 w-6 rounded-full transition-transform",style:{background:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",transform:i?"translateX(22px)":"translateX(2px)"}})})]}),i&&o.jsxs("div",{className:"rounded-[14px] px-4 py-3",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("p",{className:"mb-2 text-[12px] font-medium",style:{color:Q.text},children:""}),o.jsx("input",{type:"datetime-local",className:"w-full rounded-[10px] px-3 py-2 text-[13px] outline-none",style:{background:Q.bg,boxShadow:"var(--inset-shadow)",color:Q.text},value:d,onChange:b=>p(b.target.value)})]})]})]})]})}function $0(){var H;const e=Ft(),[t,n]=u.useState("theirs"),[r,s]=u.useState([]),[l,a]=u.useState({}),[i,c]=u.useState(()=>{const P=localStorage.getItem("diary_assistant_id");return P?Number(P):null}),d=P=>{c(P),P!=null&&localStorage.setItem("diary_assistant_id",String(P))},[p,f]=u.useState(!1),[h,x]=u.useState([]),[w,v]=u.useState(!0),[b,g]=u.useState(null),[m,y]=u.useState(null),[S,j]=u.useState(!1);u.useEffect(()=>{U("/api/assistants").then(async P=>{const G=P.assistants||[];s(G),G.length>0&&(i&&G.some(_=>_.id===i)||d(G[0].id));const fe={};await Promise.all(G.map(async A=>{const _=await Zr(`assistant-avatar-${A.id}`).catch(()=>null);_&&(fe[A.id]=_)})),a(fe)}).catch(()=>{})},[]);const N=r.find(P=>P.id===i),k=i&&l[i]||(N==null?void 0:N.avatar_url);u.useEffect(()=>{i!=null&&E()},[i,t]);const E=async()=>{v(!0);try{const G=await U(`/api/diary?assistant_id=${i}&author=${t==="theirs"?"assistant":"user"}&limit=100`);x(G.diary||[])}catch(P){console.error(P)}v(!1)},T=P=>{g({message:"",action:async()=>{await U(`/api/diary/${P}`,{method:"DELETE"}),x(G=>G.filter(fe=>fe.id!==P))}})},R=async P=>{try{await U(`/api/diary/${P}/read`,{method:"POST"}),x(G=>G.map(fe=>fe.id===P?{...fe,is_read:!0}:fe))}catch(G){console.error(G)}},I=async P=>{await U("/api/diary",{method:"POST",body:P}),j(!1),E()},ae=P=>{P.unlock_at&&new Date(P.unlock_at)>new Date||y(P)};return m?o.jsx(L0,{diary:m,onBack:()=>{y(null),E()},onMarkRead:R}):S?o.jsx(O0,{assistantId:i,onSave:I,onCancel:()=>j(!1)}):o.jsxs("div",{className:"flex h-full flex-col",style:{background:Q.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:Q.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Q.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{border:"2px solid #e8a0bf",padding:2},onClick:()=>f(!0),children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Q.bg},children:k?o.jsx("img",{src:k,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:Q.accentDark},children:((H=N==null?void 0:N.name)==null?void 0:H[0])||"?"})})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:Q.bg,boxShadow:"var(--inset-shadow)"},children:D0.map(P=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:t===P.key?{background:Q.bg,boxShadow:"var(--card-shadow-sm)",color:Q.accentDark}:{color:Q.textMuted},onClick:()=>n(P.key),children:P.label},P.key))})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24",children:w?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Q.accent,borderTopColor:"transparent"}})}):h.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:Q.textMuted},children:t==="theirs"?"":""}):h.map(P=>{const G=P.unlock_at&&new Date(P.unlock_at)>new Date;return o.jsx(P0,{onDelete:()=>T(P.id),children:o.jsxs("div",{className:"p-4 rounded-[18px]",style:{background:Q.bg,userSelect:"none"},onClick:()=>ae(P),children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[!P.is_read&&P.author==="assistant"&&!G&&o.jsx("div",{className:"h-2 w-2 shrink-0 rounded-full",style:{background:"#ef4444"}}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:Q.text},children:P.title||""})]}),o.jsx("span",{className:"text-[10px] shrink-0 ml-2",style:{color:Q.textMuted},children:Zh(P.created_at)})]}),G?o.jsx(z0,{unlockAt:P.unlock_at}):o.jsx("p",{className:"text-[12px] leading-relaxed break-words",style:{color:Q.textMuted,maxHeight:40,overflow:"hidden"},children:P.content.length>60?P.content.slice(0,60)+"...":P.content})]})},P.id)})}),t==="mine"&&o.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center",style:{zIndex:30},children:o.jsx("button",{className:"flex h-12 w-12 items-center justify-center rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",boxShadow:"0 4px 14px rgba(232,160,191,0.4)"},onClick:()=>j(!0),children:o.jsx(Jr,{size:22,color:"white"})})}),p&&o.jsx(I0,{assistants:r,avatarMap:l,currentId:i,onSelect:d,onClose:()=>f(!1)}),b&&o.jsx(R0,{message:b.message,onConfirm:async()=>{try{await b.action()}catch(P){console.error(P)}g(null)},onCancel:()=>g(null)})]})}const we={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function A0({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:we.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:we.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:we.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Xr,{size:18,style:{color:we.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:we.bg,color:we.text},placeholder:"..."})]})}function F0(){const e=Ft(),[t,n]=u.useState(""),[r,s]=u.useState(""),[l,a]=u.useState(""),[i,c]=u.useState(""),[d,p]=u.useState(!1),[f,h]=u.useState(!0),[x,w]=u.useState(null),[v,b]=u.useState(!1),g=u.useRef(null),m=u.useRef(null),y=k=>{w(k),setTimeout(()=>w(null),2e3)};u.useEffect(()=>{U("/api/user/profile").then(k=>{n(k.nickname||""),s(k.background_url||""),a(k.basic_info||"")}).catch(()=>{}).finally(()=>h(!1)),Zr("user-avatar").then(k=>{k&&c(k)}).catch(function(){})},[]);const S=k=>{var R;const E=(R=k.target.files)==null?void 0:R[0];if(!E)return;const T=new FileReader;T.onload=async I=>{const ae=I.target.result;try{await Ii("user-avatar",ae),c(ae)}catch(H){y("")}},T.readAsDataURL(E),k.target.value=""},j=k=>{var R;const E=(R=k.target.files)==null?void 0:R[0];if(!E)return;const T=new FileReader;T.onload=I=>a(I.target.result||""),T.readAsText(E),k.target.value=""},N=async()=>{p(!0);try{const k={nickname:t.trim()||null,background_url:r||null,basic_info:l||null,avatar_url:i?"user-avatar":null};await U("/api/user/profile",{method:"PUT",body:k});try{const E=JSON.parse(localStorage.getItem("whisper_profile")||"{}");localStorage.setItem("whisper_profile",JSON.stringify({...E,...k}))}catch(E){}y("")}catch(k){y("")}finally{p(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:we.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:we.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:we.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:we.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:we.bg,boxShadow:d?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:N,disabled:d,children:o.jsx(Ko,{size:18,style:{color:we.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px space-y-4",children:f?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:we.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-[20px] p-5",style:{background:we.bg,boxShadow:"var(--card-shadow)"},children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var k;return(k=g.current)==null?void 0:k.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:we.bg},children:i?o.jsx("img",{src:i,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:24},children:""})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:we.accentDark},children:o.jsx(fh,{size:9,color:"white"})})]}),o.jsx("input",{ref:g,type:"file",accept:"image/*",className:"hidden",onChange:S}),o.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:we.textMuted},children:""}),o.jsx("input",{type:"text",value:t,onChange:k=>n(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:we.bg,color:we.text}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:we.textMuted},children:""}),o.jsx("input",{type:"text",value:r,onChange:k=>s(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2 text-[13px] italic outline-none",style:{boxShadow:"var(--inset-shadow)",background:we.bg,color:we.text}})]})]})]})}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:we.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:we.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:we.bg},onClick:()=>{var k;return(k=m.current)==null?void 0:k.click()},title:"",children:o.jsx(Yo,{size:13,style:{color:we.textMuted}})}),o.jsx("input",{ref:m,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:j}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:we.bg},onClick:()=>b(!0),title:"",children:o.jsx(sl,{size:13,style:{color:we.accentDark}})})]})]}),o.jsx("textarea",{value:l,onChange:k=>a(k.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:we.bg,color:we.text}})]})]})}),v&&o.jsx(A0,{value:l,onChange:a,onClose:()=>b(!1)}),x&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:x})})]})}function mr(){var n;const e=(n=window.Telegram)==null?void 0:n.WebApp,t=Math.max((e==null?void 0:e.viewportHeight)||0,window.innerHeight);document.documentElement.style.setProperty("--tg-viewport-height",t+"px")}function B0({onSuccess:e}){const[t,n]=u.useState(""),[r,s]=u.useState(""),[l,a]=u.useState(!1),i=async c=>{if(c.preventDefault(),!!t.trim()){a(!0),s("");try{await Sv(t),e()}catch(d){s(d.message||"")}finally{a(!1)}}};return o.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--bg)",padding:"2rem"},children:o.jsxs("div",{style:{width:"100%",maxWidth:320,borderRadius:24,padding:"2rem 1.5rem",background:"var(--bg)",boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontSize:36,marginBottom:8},children:""}),o.jsx("h1",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--text)",margin:0},children:"WHISPER"}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:4},children:""})]}),o.jsxs("form",{onSubmit:i,children:[o.jsx("input",{type:"password",value:t,onChange:c=>n(c.target.value),placeholder:"",autoFocus:!0,style:{width:"100%",padding:"12px 16px",borderRadius:14,border:"none",outline:"none",fontSize:14,color:"var(--text)",background:"var(--bg)",boxShadow:"var(--inset-shadow)",boxSizing:"border-box"}}),r&&o.jsx("p",{style:{color:"#ef4444",fontSize:"0.75rem",textAlign:"center",marginTop:8,marginBottom:0},children:r}),o.jsx("button",{type:"submit",disabled:l||!t.trim(),style:{width:"100%",marginTop:16,padding:"12px 0",borderRadius:14,border:"none",fontSize:14,fontWeight:600,color:"#fff",background:l||!t.trim()?"var(--text-muted)":"linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%)",cursor:l||!t.trim()?"not-allowed":"pointer",boxShadow:"var(--card-shadow-sm)"},children:l?"...":""})]})]})})}function U0(){const e=zc();return u.useEffect(()=>{var n;const t=(n=window.Telegram)==null?void 0:n.WebApp;t&&!e.pathname.startsWith("/cot")&&t.expand(),mr()},[e.pathname]),o.jsxs(wv,{children:[o.jsx(ut,{path:"/",element:o.jsx(Kv,{})}),o.jsx(ut,{path:"/profile",element:o.jsx(F0,{})}),o.jsx(ut,{path:"/world-books",element:o.jsx($1,{})}),o.jsx(ut,{path:"/world-books/new",element:o.jsx(Md,{})}),o.jsx(ut,{path:"/world-books/:id",element:o.jsx(Md,{})}),o.jsx(ut,{path:"/assistants",element:o.jsx(Q1,{})}),o.jsx(ut,{path:"/assistants/new",element:o.jsx(Td,{})}),o.jsx(ut,{path:"/assistants/:id",element:o.jsx(Td,{})}),o.jsx(ut,{path:"/settings",element:o.jsx(r0,{})}),o.jsx(ut,{path:"/settings/api",element:o.jsx(c0,{})}),o.jsx(ut,{path:"/cot",element:o.jsx(y0,{})}),o.jsx(ut,{path:"/memories",element:o.jsx(T0,{})}),o.jsx(ut,{path:"/diary",element:o.jsx($0,{})}),o.jsx(ut,{path:"/messages",element:o.jsx(k0,{})})]})}function H0(){const[e,t]=u.useState(null);return u.useEffect(()=>{var r;const n=(r=window.Telegram)==null?void 0:r.WebApp;return localStorage.getItem("whisper_token")||n&&n.initData&&n.initData.length>0?t("ok"):t("login"),n&&(n.ready(),window.location.hash.startsWith("#/cot")||n.expand()),mr(),n&&n.onEvent("viewportChanged",mr),window.addEventListener("resize",mr),()=>{n&&n.offEvent("viewportChanged",mr),window.removeEventListener("resize",mr)}},[]),e===null?null:e==="login"?o.jsx(B0,{onSuccess:()=>t("ok")}):o.jsx(jv,{children:o.jsx(U0,{})})}Fa.createRoot(document.getElementById("root")).render(o.jsx(Pe.StrictMode,{children:o.jsx(H0,{})}));
