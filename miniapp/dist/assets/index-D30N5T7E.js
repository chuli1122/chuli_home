function Jh(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function qh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pd={exports:{}},ko={},Id={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ks=Symbol.for("react.element"),Zh=Symbol.for("react.portal"),em=Symbol.for("react.fragment"),tm=Symbol.for("react.strict_mode"),nm=Symbol.for("react.profiler"),rm=Symbol.for("react.provider"),sm=Symbol.for("react.context"),lm=Symbol.for("react.forward_ref"),om=Symbol.for("react.suspense"),am=Symbol.for("react.memo"),im=Symbol.for("react.lazy"),Bc=Symbol.iterator;function cm(e){return e===null||typeof e!="object"?null:(e=Bc&&e[Bc]||e["@@iterator"],typeof e=="function"?e:null)}var Ld={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Od=Object.assign,Ad={};function Ur(e,t,n){this.props=e,this.context=t,this.refs=Ad,this.updater=n||Ld}Ur.prototype.isReactComponent={};Ur.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ur.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $d(){}$d.prototype=Ur.prototype;function Pi(e,t,n){this.props=e,this.context=t,this.refs=Ad,this.updater=n||Ld}var Ii=Pi.prototype=new $d;Ii.constructor=Pi;Od(Ii,Ur.prototype);Ii.isPureReactComponent=!0;var Uc=Array.isArray,Fd=Object.prototype.hasOwnProperty,Li={current:null},Bd={key:!0,ref:!0,__self:!0,__source:!0};function Ud(e,t,n){var r,s={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)Fd.call(t,r)&&!Bd.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:Ks,type:e,key:l,ref:a,props:s,_owner:Li.current}}function um(e,t){return{$$typeof:Ks,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Oi(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ks}function dm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Hc=/\/+/g;function ea(e,t){return typeof e=="object"&&e!==null&&e.key!=null?dm(""+e.key):t.toString(36)}function Dl(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ks:case Zh:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+ea(a,0):r,Uc(s)?(n="",e!=null&&(n=e.replace(Hc,"$&/")+"/"),Dl(s,t,n,"",function(u){return u})):s!=null&&(Oi(s)&&(s=um(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Hc,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Uc(e))for(var i=0;i<e.length;i++){l=e[i];var c=r+ea(l,i);a+=Dl(l,t,n,c,s)}else if(c=cm(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=r+ea(l,i++),a+=Dl(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ll(e,t,n){if(e==null)return e;var r=[],s=0;return Dl(e,r,"","",function(l){return t.call(n,l,s++)}),r}function fm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var it={current:null},Rl={transition:null},pm={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:Rl,ReactCurrentOwner:Li};function Hd(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:ll,forEach:function(e,t,n){ll(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ll(e,function(){t++}),t},toArray:function(e){return ll(e,function(t){return t})||[]},only:function(e){if(!Oi(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=Ur;oe.Fragment=em;oe.Profiler=nm;oe.PureComponent=Pi;oe.StrictMode=tm;oe.Suspense=om;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pm;oe.act=Hd;oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Od({},e.props),s=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=Li.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Fd.call(t,c)&&!Bd.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var u=0;u<c;u++)i[u]=arguments[u+2];r.children=i}return{$$typeof:Ks,type:e.type,key:s,ref:l,props:r,_owner:a}};oe.createContext=function(e){return e={$$typeof:sm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rm,_context:e},e.Consumer=e};oe.createElement=Ud;oe.createFactory=function(e){var t=Ud.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:lm,render:e}};oe.isValidElement=Oi;oe.lazy=function(e){return{$$typeof:im,_payload:{_status:-1,_result:e},_init:fm}};oe.memo=function(e,t){return{$$typeof:am,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=Rl.transition;Rl.transition={};try{e()}finally{Rl.transition=t}};oe.unstable_act=Hd;oe.useCallback=function(e,t){return it.current.useCallback(e,t)};oe.useContext=function(e){return it.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return it.current.useDeferredValue(e)};oe.useEffect=function(e,t){return it.current.useEffect(e,t)};oe.useId=function(){return it.current.useId()};oe.useImperativeHandle=function(e,t,n){return it.current.useImperativeHandle(e,t,n)};oe.useInsertionEffect=function(e,t){return it.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return it.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return it.current.useMemo(e,t)};oe.useReducer=function(e,t,n){return it.current.useReducer(e,t,n)};oe.useRef=function(e){return it.current.useRef(e)};oe.useState=function(e){return it.current.useState(e)};oe.useSyncExternalStore=function(e,t,n){return it.current.useSyncExternalStore(e,t,n)};oe.useTransition=function(){return it.current.useTransition()};oe.version="18.3.1";Id.exports=oe;var d=Id.exports;const Se=qh(d),hm=Jh({__proto__:null,default:Se},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm=d,xm=Symbol.for("react.element"),gm=Symbol.for("react.fragment"),ym=Object.prototype.hasOwnProperty,vm=mm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wm={key:!0,ref:!0,__self:!0,__source:!0};function Wd(e,t,n){var r,s={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)ym.call(t,r)&&!wm.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:xm,type:e,key:l,ref:a,props:s,_owner:vm.current}}ko.Fragment=gm;ko.jsx=Wd;ko.jsxs=Wd;Pd.exports=ko;var o=Pd.exports,Ia={},Vd={exports:{}},Nt={},Xd={exports:{}},Kd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,I){var H=P.length;P.push(I);e:for(;0<H;){var ne=H-1>>>1,L=P[ne];if(0<s(L,I))P[ne]=I,P[H]=L,H=ne;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var I=P[0],H=P.pop();if(H!==I){P[0]=H;e:for(var ne=0,L=P.length,U=L>>>1;ne<U;){var se=2*(ne+1)-1,le=P[se],J=se+1,Q=P[J];if(0>s(le,H))J<L&&0>s(Q,le)?(P[ne]=Q,P[J]=H,ne=J):(P[ne]=le,P[se]=H,ne=se);else if(J<L&&0>s(Q,H))P[ne]=Q,P[J]=H,ne=J;else break e}}return I}function s(P,I){var H=P.sortIndex-I.sortIndex;return H!==0?H:P.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],u=[],f=1,p=null,h=3,y=!1,b=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(P){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=P)r(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(u)}}function S(P){if(v=!1,g(P),!b)if(n(c)!==null)b=!0,ve(j);else{var I=n(u);I!==null&&ee(S,I.startTime-P)}}function j(P,I){b=!1,v&&(v=!1,x(C),C=-1),y=!0;var H=h;try{for(g(I),p=n(c);p!==null&&(!(p.expirationTime>I)||P&&!z());){var ne=p.callback;if(typeof ne=="function"){p.callback=null,h=p.priorityLevel;var L=ne(p.expirationTime<=I);I=e.unstable_now(),typeof L=="function"?p.callback=L:p===n(c)&&r(c),g(I)}else r(c);p=n(c)}if(p!==null)var U=!0;else{var se=n(u);se!==null&&ee(S,se.startTime-I),U=!1}return U}finally{p=null,h=H,y=!1}}var N=!1,k=null,C=-1,E=5,D=-1;function z(){return!(e.unstable_now()-D<E)}function Y(){if(k!==null){var P=e.unstable_now();D=P;var I=!0;try{I=k(!0,P)}finally{I?_():(N=!1,k=null)}}else N=!1}var _;if(typeof m=="function")_=function(){m(Y)};else if(typeof MessageChannel!="undefined"){var V=new MessageChannel,te=V.port2;V.port1.onmessage=Y,_=function(){te.postMessage(null)}}else _=function(){w(Y,0)};function ve(P){k=P,N||(N=!0,_())}function ee(P,I){C=w(function(){P(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){b||y||(b=!0,ve(j))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(P){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var H=h;h=I;try{return P()}finally{h=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,I){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var H=h;h=P;try{return I()}finally{h=H}},e.unstable_scheduleCallback=function(P,I,H){var ne=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ne+H:ne):H=ne,P){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=H+L,P={id:f++,callback:I,priorityLevel:P,startTime:H,expirationTime:L,sortIndex:-1},H>ne?(P.sortIndex=H,t(u,P),n(c)===null&&P===n(u)&&(v?(x(C),C=-1):v=!0,ee(S,H-ne))):(P.sortIndex=L,t(c,P),b||y||(b=!0,ve(j))),P},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(P){var I=h;return function(){var H=h;h=I;try{return P.apply(this,arguments)}finally{h=H}}}})(Kd);Xd.exports=Kd;var bm=Xd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km=d,St=bm;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yd=new Set,Ns={};function nr(e,t){Rr(e,t),Rr(e+"Capture",t)}function Rr(e,t){for(Ns[e]=t,e=0;e<t.length;e++)Yd.add(t[e])}var un=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),La=Object.prototype.hasOwnProperty,jm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wc={},Vc={};function Sm(e){return La.call(Vc,e)?!0:La.call(Wc,e)?!1:jm.test(e)?Vc[e]=!0:(Wc[e]=!0,!1)}function Nm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Cm(e,t,n,r){if(t===null||typeof t=="undefined"||Nm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ct(e,t,n,r,s,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Je[e]=new ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Je[t]=new ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Je[e]=new ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Je[e]=new ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Je[e]=new ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Je[e]=new ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Je[e]=new ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Je[e]=new ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Je[e]=new ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ai=/[\-:]([a-z])/g;function $i(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ai,$i);Je[t]=new ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ai,$i);Je[t]=new ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ai,$i);Je[t]=new ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Je[e]=new ct(e,1,!1,e.toLowerCase(),null,!1,!1)});Je.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Je[e]=new ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function Fi(e,t,n,r){var s=Je.hasOwnProperty(t)?Je[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Cm(t,n,s,r)&&(n=null),r||s===null?Sm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var mn=km.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ol=Symbol.for("react.element"),dr=Symbol.for("react.portal"),fr=Symbol.for("react.fragment"),Bi=Symbol.for("react.strict_mode"),Oa=Symbol.for("react.profiler"),Qd=Symbol.for("react.provider"),Gd=Symbol.for("react.context"),Ui=Symbol.for("react.forward_ref"),Aa=Symbol.for("react.suspense"),$a=Symbol.for("react.suspense_list"),Hi=Symbol.for("react.memo"),bn=Symbol.for("react.lazy"),Jd=Symbol.for("react.offscreen"),Xc=Symbol.iterator;function ts(e){return e===null||typeof e!="object"?null:(e=Xc&&e[Xc]||e["@@iterator"],typeof e=="function"?e:null)}var Te=Object.assign,ta;function cs(e){if(ta===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ta=t&&t[1]||""}return`
`+ta+e}var na=!1;function ra(e,t){if(!e||na)return"";na=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),l=r.stack.split(`
`),a=s.length-1,i=l.length-1;1<=a&&0<=i&&s[a]!==l[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==l[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==l[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{na=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?cs(e):""}function Em(e){switch(e.tag){case 5:return cs(e.type);case 16:return cs("Lazy");case 13:return cs("Suspense");case 19:return cs("SuspenseList");case 0:case 2:case 15:return e=ra(e.type,!1),e;case 11:return e=ra(e.type.render,!1),e;case 1:return e=ra(e.type,!0),e;default:return""}}function Fa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fr:return"Fragment";case dr:return"Portal";case Oa:return"Profiler";case Bi:return"StrictMode";case Aa:return"Suspense";case $a:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Gd:return(e.displayName||"Context")+".Consumer";case Qd:return(e._context.displayName||"Context")+".Provider";case Ui:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Hi:return t=e.displayName||null,t!==null?t:Fa(e.type)||"Memo";case bn:t=e._payload,e=e._init;try{return Fa(e(t))}catch(n){}}return null}function Mm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fa(t);case 8:return t===Bi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function On(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _m(e){var t=qd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function al(e){e._valueTracker||(e._valueTracker=_m(e))}function Zd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=qd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Wl(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ba(e,t){var n=t.checked;return Te({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function Kc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=On(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ef(e,t){t=t.checked,t!=null&&Fi(e,"checked",t,!1)}function Ua(e,t){ef(e,t);var n=On(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ha(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ha(e,t.type,On(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Yc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ha(e,t,n){(t!=="number"||Wl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var us=Array.isArray;function Nr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+On(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Wa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return Te({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(R(92));if(us(n)){if(1<n.length)throw Error(R(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:On(n)}}function tf(e,t){var n=On(t.value),r=On(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Gc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function nf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Va(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?nf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var il,rf=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(il=il||document.createElement("div"),il.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=il.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tm=["Webkit","ms","Moz","O"];Object.keys(ps).forEach(function(e){Tm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ps[t]=ps[e]})});function sf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ps.hasOwnProperty(e)&&ps[e]?(""+t).trim():t+"px"}function lf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=sf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Dm=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xa(e,t){if(t){if(Dm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function Ka(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ya=null;function Wi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qa=null,Cr=null,Er=null;function Jc(e){if(e=Gs(e)){if(typeof Qa!="function")throw Error(R(280));var t=e.stateNode;t&&(t=Eo(t),Qa(e.stateNode,e.type,t))}}function of(e){Cr?Er?Er.push(e):Er=[e]:Cr=e}function af(){if(Cr){var e=Cr,t=Er;if(Er=Cr=null,Jc(e),t)for(e=0;e<t.length;e++)Jc(t[e])}}function cf(e,t){return e(t)}function uf(){}var sa=!1;function df(e,t,n){if(sa)return e(t,n);sa=!0;try{return cf(e,t,n)}finally{sa=!1,(Cr!==null||Er!==null)&&(uf(),af())}}function Es(e,t){var n=e.stateNode;if(n===null)return null;var r=Eo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(R(231,t,typeof n));return n}var Ga=!1;if(un)try{var ns={};Object.defineProperty(ns,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",ns,ns),window.removeEventListener("test",ns,ns)}catch(e){Ga=!1}function Rm(e,t,n,r,s,l,a,i,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var hs=!1,Vl=null,Xl=!1,Ja=null,zm={onError:function(e){hs=!0,Vl=e}};function Pm(e,t,n,r,s,l,a,i,c){hs=!1,Vl=null,Rm.apply(zm,arguments)}function Im(e,t,n,r,s,l,a,i,c){if(Pm.apply(this,arguments),hs){if(hs){var u=Vl;hs=!1,Vl=null}else throw Error(R(198));Xl||(Xl=!0,Ja=u)}}function rr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ff(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qc(e){if(rr(e)!==e)throw Error(R(188))}function Lm(e){var t=e.alternate;if(!t){if(t=rr(e),t===null)throw Error(R(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return qc(s),e;if(l===r)return qc(s),t;l=l.sibling}throw Error(R(188))}if(n.return!==r.return)n=s,r=l;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=l;break}if(i===r){a=!0,r=s,n=l;break}i=i.sibling}if(!a){for(i=l.child;i;){if(i===n){a=!0,n=l,r=s;break}if(i===r){a=!0,r=l,n=s;break}i=i.sibling}if(!a)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?e:t}function pf(e){return e=Lm(e),e!==null?hf(e):null}function hf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=hf(e);if(t!==null)return t;e=e.sibling}return null}var mf=St.unstable_scheduleCallback,Zc=St.unstable_cancelCallback,Om=St.unstable_shouldYield,Am=St.unstable_requestPaint,Ie=St.unstable_now,$m=St.unstable_getCurrentPriorityLevel,Vi=St.unstable_ImmediatePriority,xf=St.unstable_UserBlockingPriority,Kl=St.unstable_NormalPriority,Fm=St.unstable_LowPriority,gf=St.unstable_IdlePriority,jo=null,en=null;function Bm(e){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(jo,e,void 0,(e.current.flags&128)===128)}catch(t){}}var Wt=Math.clz32?Math.clz32:Wm,Um=Math.log,Hm=Math.LN2;function Wm(e){return e>>>=0,e===0?32:31-(Um(e)/Hm|0)|0}var cl=64,ul=4194304;function ds(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=ds(i):(l&=a,l!==0&&(r=ds(l)))}else a=n&~s,a!==0?r=ds(a):l!==0&&(r=ds(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Wt(t),s=1<<n,r|=e[n],t&=~s;return r}function Vm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-Wt(l),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=Vm(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function qa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yf(){var e=cl;return cl<<=1,!(cl&4194240)&&(cl=64),e}function la(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ys(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wt(t),e[t]=n}function Km(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Wt(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function Xi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Wt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ye=0;function vf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wf,Ki,bf,kf,jf,Za=!1,dl=[],_n=null,Tn=null,Dn=null,Ms=new Map,_s=new Map,Sn=[],Ym="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eu(e,t){switch(e){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":Ms.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_s.delete(t.pointerId)}}function rs(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Gs(t),t!==null&&Ki(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Qm(e,t,n,r,s){switch(t){case"focusin":return _n=rs(_n,e,t,n,r,s),!0;case"dragenter":return Tn=rs(Tn,e,t,n,r,s),!0;case"mouseover":return Dn=rs(Dn,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return Ms.set(l,rs(Ms.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,_s.set(l,rs(_s.get(l)||null,e,t,n,r,s)),!0}return!1}function Sf(e){var t=Vn(e.target);if(t!==null){var n=rr(t);if(n!==null){if(t=n.tag,t===13){if(t=ff(n),t!==null){e.blockedOn=t,jf(e.priority,function(){bf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ei(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ya=r,n.target.dispatchEvent(r),Ya=null}else return t=Gs(n),t!==null&&Ki(t),e.blockedOn=n,!1;t.shift()}return!0}function tu(e,t,n){zl(e)&&n.delete(t)}function Gm(){Za=!1,_n!==null&&zl(_n)&&(_n=null),Tn!==null&&zl(Tn)&&(Tn=null),Dn!==null&&zl(Dn)&&(Dn=null),Ms.forEach(tu),_s.forEach(tu)}function ss(e,t){e.blockedOn===t&&(e.blockedOn=null,Za||(Za=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,Gm)))}function Ts(e){function t(s){return ss(s,e)}if(0<dl.length){ss(dl[0],e);for(var n=1;n<dl.length;n++){var r=dl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_n!==null&&ss(_n,e),Tn!==null&&ss(Tn,e),Dn!==null&&ss(Dn,e),Ms.forEach(t),_s.forEach(t),n=0;n<Sn.length;n++)r=Sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Sn.length&&(n=Sn[0],n.blockedOn===null);)Sf(n),n.blockedOn===null&&Sn.shift()}var Mr=mn.ReactCurrentBatchConfig,Ql=!0;function Jm(e,t,n,r){var s=ye,l=Mr.transition;Mr.transition=null;try{ye=1,Yi(e,t,n,r)}finally{ye=s,Mr.transition=l}}function qm(e,t,n,r){var s=ye,l=Mr.transition;Mr.transition=null;try{ye=4,Yi(e,t,n,r)}finally{ye=s,Mr.transition=l}}function Yi(e,t,n,r){if(Ql){var s=ei(e,t,n,r);if(s===null)ma(e,t,r,Gl,n),eu(e,r);else if(Qm(s,e,t,n,r))r.stopPropagation();else if(eu(e,r),t&4&&-1<Ym.indexOf(e)){for(;s!==null;){var l=Gs(s);if(l!==null&&wf(l),l=ei(e,t,n,r),l===null&&ma(e,t,r,Gl,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else ma(e,t,r,null,n)}}var Gl=null;function ei(e,t,n,r){if(Gl=null,e=Wi(r),e=Vn(e),e!==null)if(t=rr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ff(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gl=e,null}function Nf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($m()){case Vi:return 1;case xf:return 4;case Kl:case Fm:return 16;case gf:return 536870912;default:return 16}default:return 16}}var Cn=null,Qi=null,Pl=null;function Cf(){if(Pl)return Pl;var e,t=Qi,n=t.length,r,s="value"in Cn?Cn.value:Cn.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[l-r];r++);return Pl=s.slice(e,1<r?1-r:void 0)}function Il(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fl(){return!0}function nu(){return!1}function Ct(e){function t(n,r,s,l,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?fl:nu,this.isPropagationStopped=nu,this}return Te(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fl)},persist:function(){},isPersistent:fl}),t}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gi=Ct(Hr),Qs=Te({},Hr,{view:0,detail:0}),Zm=Ct(Qs),oa,aa,ls,So=Te({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ji,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ls&&(ls&&e.type==="mousemove"?(oa=e.screenX-ls.screenX,aa=e.screenY-ls.screenY):aa=oa=0,ls=e),oa)},movementY:function(e){return"movementY"in e?e.movementY:aa}}),ru=Ct(So),ex=Te({},So,{dataTransfer:0}),tx=Ct(ex),nx=Te({},Qs,{relatedTarget:0}),ia=Ct(nx),rx=Te({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),sx=Ct(rx),lx=Te({},Hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ox=Ct(lx),ax=Te({},Hr,{data:0}),su=Ct(ax),ix={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ux={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ux[e])?!!t[e]:!1}function Ji(){return dx}var fx=Te({},Qs,{key:function(e){if(e.key){var t=ix[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Il(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ji,charCode:function(e){return e.type==="keypress"?Il(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Il(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),px=Ct(fx),hx=Te({},So,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lu=Ct(hx),mx=Te({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ji}),xx=Ct(mx),gx=Te({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),yx=Ct(gx),vx=Te({},So,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wx=Ct(vx),bx=[9,13,27,32],qi=un&&"CompositionEvent"in window,ms=null;un&&"documentMode"in document&&(ms=document.documentMode);var kx=un&&"TextEvent"in window&&!ms,Ef=un&&(!qi||ms&&8<ms&&11>=ms),ou=" ",au=!1;function Mf(e,t){switch(e){case"keyup":return bx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _f(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pr=!1;function jx(e,t){switch(e){case"compositionend":return _f(t);case"keypress":return t.which!==32?null:(au=!0,ou);case"textInput":return e=t.data,e===ou&&au?null:e;default:return null}}function Sx(e,t){if(pr)return e==="compositionend"||!qi&&Mf(e,t)?(e=Cf(),Pl=Qi=Cn=null,pr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ef&&t.locale!=="ko"?null:t.data;default:return null}}var Nx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Nx[e.type]:t==="textarea"}function Tf(e,t,n,r){of(r),t=Jl(t,"onChange"),0<t.length&&(n=new Gi("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var xs=null,Ds=null;function Cx(e){Bf(e,0)}function No(e){var t=xr(e);if(Zd(t))return e}function Ex(e,t){if(e==="change")return t}var Df=!1;if(un){var ca;if(un){var ua="oninput"in document;if(!ua){var cu=document.createElement("div");cu.setAttribute("oninput","return;"),ua=typeof cu.oninput=="function"}ca=ua}else ca=!1;Df=ca&&(!document.documentMode||9<document.documentMode)}function uu(){xs&&(xs.detachEvent("onpropertychange",Rf),Ds=xs=null)}function Rf(e){if(e.propertyName==="value"&&No(Ds)){var t=[];Tf(t,Ds,e,Wi(e)),df(Cx,t)}}function Mx(e,t,n){e==="focusin"?(uu(),xs=t,Ds=n,xs.attachEvent("onpropertychange",Rf)):e==="focusout"&&uu()}function _x(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return No(Ds)}function Tx(e,t){if(e==="click")return No(t)}function Dx(e,t){if(e==="input"||e==="change")return No(t)}function Rx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xt=typeof Object.is=="function"?Object.is:Rx;function Rs(e,t){if(Xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!La.call(t,s)||!Xt(e[s],t[s]))return!1}return!0}function du(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fu(e,t){var n=du(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=du(n)}}function zf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pf(){for(var e=window,t=Wl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=Wl(e.document)}return t}function Zi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zx(e){var t=Pf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&zf(n.ownerDocument.documentElement,n)){if(r!==null&&Zi(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=fu(n,l);var a=fu(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Px=un&&"documentMode"in document&&11>=document.documentMode,hr=null,ti=null,gs=null,ni=!1;function pu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ni||hr==null||hr!==Wl(r)||(r=hr,"selectionStart"in r&&Zi(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gs&&Rs(gs,r)||(gs=r,r=Jl(ti,"onSelect"),0<r.length&&(t=new Gi("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=hr)))}function pl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var mr={animationend:pl("Animation","AnimationEnd"),animationiteration:pl("Animation","AnimationIteration"),animationstart:pl("Animation","AnimationStart"),transitionend:pl("Transition","TransitionEnd")},da={},If={};un&&(If=document.createElement("div").style,"AnimationEvent"in window||(delete mr.animationend.animation,delete mr.animationiteration.animation,delete mr.animationstart.animation),"TransitionEvent"in window||delete mr.transitionend.transition);function Co(e){if(da[e])return da[e];if(!mr[e])return e;var t=mr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in If)return da[e]=t[n];return e}var Lf=Co("animationend"),Of=Co("animationiteration"),Af=Co("animationstart"),$f=Co("transitionend"),Ff=new Map,hu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $n(e,t){Ff.set(e,t),nr(t,[e])}for(var fa=0;fa<hu.length;fa++){var pa=hu[fa],Ix=pa.toLowerCase(),Lx=pa[0].toUpperCase()+pa.slice(1);$n(Ix,"on"+Lx)}$n(Lf,"onAnimationEnd");$n(Of,"onAnimationIteration");$n(Af,"onAnimationStart");$n("dblclick","onDoubleClick");$n("focusin","onFocus");$n("focusout","onBlur");$n($f,"onTransitionEnd");Rr("onMouseEnter",["mouseout","mouseover"]);Rr("onMouseLeave",["mouseout","mouseover"]);Rr("onPointerEnter",["pointerout","pointerover"]);Rr("onPointerLeave",["pointerout","pointerover"]);nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nr("onBeforeInput",["compositionend","keypress","textInput","paste"]);nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ox=new Set("cancel close invalid load scroll toggle".split(" ").concat(fs));function mu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Im(r,t,void 0,e),e.currentTarget=null}function Bf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,u=i.currentTarget;if(i=i.listener,c!==l&&s.isPropagationStopped())break e;mu(s,i,u),l=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,u=i.currentTarget,i=i.listener,c!==l&&s.isPropagationStopped())break e;mu(s,i,u),l=c}}}if(Xl)throw e=Ja,Xl=!1,Ja=null,e}function je(e,t){var n=t[ai];n===void 0&&(n=t[ai]=new Set);var r=e+"__bubble";n.has(r)||(Uf(t,e,2,!1),n.add(r))}function ha(e,t,n){var r=0;t&&(r|=4),Uf(n,e,r,t)}var hl="_reactListening"+Math.random().toString(36).slice(2);function zs(e){if(!e[hl]){e[hl]=!0,Yd.forEach(function(n){n!=="selectionchange"&&(Ox.has(n)||ha(n,!1,e),ha(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hl]||(t[hl]=!0,ha("selectionchange",!1,t))}}function Uf(e,t,n,r){switch(Nf(t)){case 1:var s=Jm;break;case 4:s=qm;break;default:s=Yi}n=s.bind(null,t,n,e),s=void 0,!Ga||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ma(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=Vn(i),a===null)return;if(c=a.tag,c===5||c===6){r=l=a;continue e}i=i.parentNode}}r=r.return}df(function(){var u=l,f=Wi(n),p=[];e:{var h=Ff.get(e);if(h!==void 0){var y=Gi,b=e;switch(e){case"keypress":if(Il(n)===0)break e;case"keydown":case"keyup":y=px;break;case"focusin":b="focus",y=ia;break;case"focusout":b="blur",y=ia;break;case"beforeblur":case"afterblur":y=ia;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=ru;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=tx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=xx;break;case Lf:case Of:case Af:y=sx;break;case $f:y=yx;break;case"scroll":y=Zm;break;case"wheel":y=wx;break;case"copy":case"cut":case"paste":y=ox;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=lu}var v=(t&4)!==0,w=!v&&e==="scroll",x=v?h!==null?h+"Capture":null:h;v=[];for(var m=u,g;m!==null;){g=m;var S=g.stateNode;if(g.tag===5&&S!==null&&(g=S,x!==null&&(S=Es(m,x),S!=null&&v.push(Ps(m,S,g)))),w)break;m=m.return}0<v.length&&(h=new y(h,b,null,n,f),p.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",h&&n!==Ya&&(b=n.relatedTarget||n.fromElement)&&(Vn(b)||b[dn]))break e;if((y||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,y?(b=n.relatedTarget||n.toElement,y=u,b=b?Vn(b):null,b!==null&&(w=rr(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=u),y!==b)){if(v=ru,S="onMouseLeave",x="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(v=lu,S="onPointerLeave",x="onPointerEnter",m="pointer"),w=y==null?h:xr(y),g=b==null?h:xr(b),h=new v(S,m+"leave",y,n,f),h.target=w,h.relatedTarget=g,S=null,Vn(f)===u&&(v=new v(x,m+"enter",b,n,f),v.target=g,v.relatedTarget=w,S=v),w=S,y&&b)t:{for(v=y,x=b,m=0,g=v;g;g=ar(g))m++;for(g=0,S=x;S;S=ar(S))g++;for(;0<m-g;)v=ar(v),m--;for(;0<g-m;)x=ar(x),g--;for(;m--;){if(v===x||x!==null&&v===x.alternate)break t;v=ar(v),x=ar(x)}v=null}else v=null;y!==null&&xu(p,h,y,v,!1),b!==null&&w!==null&&xu(p,w,b,v,!0)}}e:{if(h=u?xr(u):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var j=Ex;else if(iu(h))if(Df)j=Dx;else{j=_x;var N=Mx}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=Tx);if(j&&(j=j(e,u))){Tf(p,j,n,f);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&Ha(h,"number",h.value)}switch(N=u?xr(u):window,e){case"focusin":(iu(N)||N.contentEditable==="true")&&(hr=N,ti=u,gs=null);break;case"focusout":gs=ti=hr=null;break;case"mousedown":ni=!0;break;case"contextmenu":case"mouseup":case"dragend":ni=!1,pu(p,n,f);break;case"selectionchange":if(Px)break;case"keydown":case"keyup":pu(p,n,f)}var k;if(qi)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else pr?Mf(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Ef&&n.locale!=="ko"&&(pr||C!=="onCompositionStart"?C==="onCompositionEnd"&&pr&&(k=Cf()):(Cn=f,Qi="value"in Cn?Cn.value:Cn.textContent,pr=!0)),N=Jl(u,C),0<N.length&&(C=new su(C,e,null,n,f),p.push({event:C,listeners:N}),k?C.data=k:(k=_f(n),k!==null&&(C.data=k)))),(k=kx?jx(e,n):Sx(e,n))&&(u=Jl(u,"onBeforeInput"),0<u.length&&(f=new su("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:u}),f.data=k))}Bf(p,t)})}function Ps(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Jl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=Es(e,n),l!=null&&r.unshift(Ps(e,l,s)),l=Es(e,t),l!=null&&r.push(Ps(e,l,s))),e=e.return}return r}function ar(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xu(e,t,n,r,s){for(var l=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,u=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&u!==null&&(i=u,s?(c=Es(n,l),c!=null&&a.unshift(Ps(n,c,i))):s||(c=Es(n,l),c!=null&&a.push(Ps(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Ax=/\r\n?/g,$x=/\u0000|\uFFFD/g;function gu(e){return(typeof e=="string"?e:""+e).replace(Ax,`
`).replace($x,"")}function ml(e,t,n){if(t=gu(t),gu(e)!==t&&n)throw Error(R(425))}function ql(){}var ri=null,si=null;function li(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var oi=typeof setTimeout=="function"?setTimeout:void 0,Fx=typeof clearTimeout=="function"?clearTimeout:void 0,yu=typeof Promise=="function"?Promise:void 0,Bx=typeof queueMicrotask=="function"?queueMicrotask:typeof yu!="undefined"?function(e){return yu.resolve(null).then(e).catch(Ux)}:oi;function Ux(e){setTimeout(function(){throw e})}function xa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ts(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ts(t)}function Rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Wr=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Wr,Is="__reactProps$"+Wr,dn="__reactContainer$"+Wr,ai="__reactEvents$"+Wr,Hx="__reactListeners$"+Wr,Wx="__reactHandles$"+Wr;function Vn(e){var t=e[Zt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dn]||n[Zt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vu(e);e!==null;){if(n=e[Zt])return n;e=vu(e)}return t}e=n,n=e.parentNode}return null}function Gs(e){return e=e[Zt]||e[dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function Eo(e){return e[Is]||null}var ii=[],gr=-1;function Fn(e){return{current:e}}function Ne(e){0>gr||(e.current=ii[gr],ii[gr]=null,gr--)}function be(e,t){gr++,ii[gr]=e.current,e.current=t}var An={},rt=Fn(An),ht=Fn(!1),Jn=An;function zr(e,t){var n=e.type.contextTypes;if(!n)return An;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function mt(e){return e=e.childContextTypes,e!=null}function Zl(){Ne(ht),Ne(rt)}function wu(e,t,n){if(rt.current!==An)throw Error(R(168));be(rt,t),be(ht,n)}function Hf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(R(108,Mm(e)||"Unknown",s));return Te({},n,r)}function eo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||An,Jn=rt.current,be(rt,e),be(ht,ht.current),!0}function bu(e,t,n){var r=e.stateNode;if(!r)throw Error(R(169));n?(e=Hf(e,t,Jn),r.__reactInternalMemoizedMergedChildContext=e,Ne(ht),Ne(rt),be(rt,e)):Ne(ht),be(ht,n)}var ln=null,Mo=!1,ga=!1;function Wf(e){ln===null?ln=[e]:ln.push(e)}function Vx(e){Mo=!0,Wf(e)}function Bn(){if(!ga&&ln!==null){ga=!0;var e=0,t=ye;try{var n=ln;for(ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ln=null,Mo=!1}catch(s){throw ln!==null&&(ln=ln.slice(e+1)),mf(Vi,Bn),s}finally{ye=t,ga=!1}}return null}var yr=[],vr=0,to=null,no=0,zt=[],Pt=0,qn=null,on=1,an="";function Hn(e,t){yr[vr++]=no,yr[vr++]=to,to=e,no=t}function Vf(e,t,n){zt[Pt++]=on,zt[Pt++]=an,zt[Pt++]=qn,qn=e;var r=on;e=an;var s=32-Wt(r)-1;r&=~(1<<s),n+=1;var l=32-Wt(t)+s;if(30<l){var a=s-s%5;l=(r&(1<<a)-1).toString(32),r>>=a,s-=a,on=1<<32-Wt(t)+s|n<<s|r,an=l+e}else on=1<<l|n<<s|r,an=e}function ec(e){e.return!==null&&(Hn(e,1),Vf(e,1,0))}function tc(e){for(;e===to;)to=yr[--vr],yr[vr]=null,no=yr[--vr],yr[vr]=null;for(;e===qn;)qn=zt[--Pt],zt[Pt]=null,an=zt[--Pt],zt[Pt]=null,on=zt[--Pt],zt[Pt]=null}var jt=null,kt=null,Ee=!1,Ht=null;function Xf(e,t){var n=It(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ku(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jt=e,kt=Rn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jt=e,kt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=qn!==null?{id:on,overflow:an}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=It(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,jt=e,kt=null,!0):!1;default:return!1}}function ci(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ui(e){if(Ee){var t=kt;if(t){var n=t;if(!ku(e,t)){if(ci(e))throw Error(R(418));t=Rn(n.nextSibling);var r=jt;t&&ku(e,t)?Xf(r,n):(e.flags=e.flags&-4097|2,Ee=!1,jt=e)}}else{if(ci(e))throw Error(R(418));e.flags=e.flags&-4097|2,Ee=!1,jt=e}}}function ju(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jt=e}function xl(e){if(e!==jt)return!1;if(!Ee)return ju(e),Ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!li(e.type,e.memoizedProps)),t&&(t=kt)){if(ci(e))throw Kf(),Error(R(418));for(;t;)Xf(e,t),t=Rn(t.nextSibling)}if(ju(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){kt=Rn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}kt=null}}else kt=jt?Rn(e.stateNode.nextSibling):null;return!0}function Kf(){for(var e=kt;e;)e=Rn(e.nextSibling)}function Pr(){kt=jt=null,Ee=!1}function nc(e){Ht===null?Ht=[e]:Ht.push(e)}var Xx=mn.ReactCurrentBatchConfig;function os(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var i=s.refs;a===null?delete i[l]:i[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,e))}return e}function gl(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Su(e){var t=e._init;return t(e._payload)}function Yf(e){function t(x,m){if(e){var g=x.deletions;g===null?(x.deletions=[m],x.flags|=16):g.push(m)}}function n(x,m){if(!e)return null;for(;m!==null;)t(x,m),m=m.sibling;return null}function r(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function s(x,m){return x=Ln(x,m),x.index=0,x.sibling=null,x}function l(x,m,g){return x.index=g,e?(g=x.alternate,g!==null?(g=g.index,g<m?(x.flags|=2,m):g):(x.flags|=2,m)):(x.flags|=1048576,m)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function i(x,m,g,S){return m===null||m.tag!==6?(m=Sa(g,x.mode,S),m.return=x,m):(m=s(m,g),m.return=x,m)}function c(x,m,g,S){var j=g.type;return j===fr?f(x,m,g.props.children,S,g.key):m!==null&&(m.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===bn&&Su(j)===m.type)?(S=s(m,g.props),S.ref=os(x,m,g),S.return=x,S):(S=Ul(g.type,g.key,g.props,null,x.mode,S),S.ref=os(x,m,g),S.return=x,S)}function u(x,m,g,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=Na(g,x.mode,S),m.return=x,m):(m=s(m,g.children||[]),m.return=x,m)}function f(x,m,g,S,j){return m===null||m.tag!==7?(m=Qn(g,x.mode,S,j),m.return=x,m):(m=s(m,g),m.return=x,m)}function p(x,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Sa(""+m,x.mode,g),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ol:return g=Ul(m.type,m.key,m.props,null,x.mode,g),g.ref=os(x,null,m),g.return=x,g;case dr:return m=Na(m,x.mode,g),m.return=x,m;case bn:var S=m._init;return p(x,S(m._payload),g)}if(us(m)||ts(m))return m=Qn(m,x.mode,g,null),m.return=x,m;gl(x,m)}return null}function h(x,m,g,S){var j=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return j!==null?null:i(x,m,""+g,S);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ol:return g.key===j?c(x,m,g,S):null;case dr:return g.key===j?u(x,m,g,S):null;case bn:return j=g._init,h(x,m,j(g._payload),S)}if(us(g)||ts(g))return j!==null?null:f(x,m,g,S,null);gl(x,g)}return null}function y(x,m,g,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(g)||null,i(m,x,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ol:return x=x.get(S.key===null?g:S.key)||null,c(m,x,S,j);case dr:return x=x.get(S.key===null?g:S.key)||null,u(m,x,S,j);case bn:var N=S._init;return y(x,m,g,N(S._payload),j)}if(us(S)||ts(S))return x=x.get(g)||null,f(m,x,S,j,null);gl(m,S)}return null}function b(x,m,g,S){for(var j=null,N=null,k=m,C=m=0,E=null;k!==null&&C<g.length;C++){k.index>C?(E=k,k=null):E=k.sibling;var D=h(x,k,g[C],S);if(D===null){k===null&&(k=E);break}e&&k&&D.alternate===null&&t(x,k),m=l(D,m,C),N===null?j=D:N.sibling=D,N=D,k=E}if(C===g.length)return n(x,k),Ee&&Hn(x,C),j;if(k===null){for(;C<g.length;C++)k=p(x,g[C],S),k!==null&&(m=l(k,m,C),N===null?j=k:N.sibling=k,N=k);return Ee&&Hn(x,C),j}for(k=r(x,k);C<g.length;C++)E=y(k,x,C,g[C],S),E!==null&&(e&&E.alternate!==null&&k.delete(E.key===null?C:E.key),m=l(E,m,C),N===null?j=E:N.sibling=E,N=E);return e&&k.forEach(function(z){return t(x,z)}),Ee&&Hn(x,C),j}function v(x,m,g,S){var j=ts(g);if(typeof j!="function")throw Error(R(150));if(g=j.call(g),g==null)throw Error(R(151));for(var N=j=null,k=m,C=m=0,E=null,D=g.next();k!==null&&!D.done;C++,D=g.next()){k.index>C?(E=k,k=null):E=k.sibling;var z=h(x,k,D.value,S);if(z===null){k===null&&(k=E);break}e&&k&&z.alternate===null&&t(x,k),m=l(z,m,C),N===null?j=z:N.sibling=z,N=z,k=E}if(D.done)return n(x,k),Ee&&Hn(x,C),j;if(k===null){for(;!D.done;C++,D=g.next())D=p(x,D.value,S),D!==null&&(m=l(D,m,C),N===null?j=D:N.sibling=D,N=D);return Ee&&Hn(x,C),j}for(k=r(x,k);!D.done;C++,D=g.next())D=y(k,x,C,D.value,S),D!==null&&(e&&D.alternate!==null&&k.delete(D.key===null?C:D.key),m=l(D,m,C),N===null?j=D:N.sibling=D,N=D);return e&&k.forEach(function(Y){return t(x,Y)}),Ee&&Hn(x,C),j}function w(x,m,g,S){if(typeof g=="object"&&g!==null&&g.type===fr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case ol:e:{for(var j=g.key,N=m;N!==null;){if(N.key===j){if(j=g.type,j===fr){if(N.tag===7){n(x,N.sibling),m=s(N,g.props.children),m.return=x,x=m;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===bn&&Su(j)===N.type){n(x,N.sibling),m=s(N,g.props),m.ref=os(x,N,g),m.return=x,x=m;break e}n(x,N);break}else t(x,N);N=N.sibling}g.type===fr?(m=Qn(g.props.children,x.mode,S,g.key),m.return=x,x=m):(S=Ul(g.type,g.key,g.props,null,x.mode,S),S.ref=os(x,m,g),S.return=x,x=S)}return a(x);case dr:e:{for(N=g.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(x,m.sibling),m=s(m,g.children||[]),m.return=x,x=m;break e}else{n(x,m);break}else t(x,m);m=m.sibling}m=Na(g,x.mode,S),m.return=x,x=m}return a(x);case bn:return N=g._init,w(x,m,N(g._payload),S)}if(us(g))return b(x,m,g,S);if(ts(g))return v(x,m,g,S);gl(x,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(x,m.sibling),m=s(m,g),m.return=x,x=m):(n(x,m),m=Sa(g,x.mode,S),m.return=x,x=m),a(x)):n(x,m)}return w}var Ir=Yf(!0),Qf=Yf(!1),ro=Fn(null),so=null,wr=null,rc=null;function sc(){rc=wr=so=null}function lc(e){var t=ro.current;Ne(ro),e._currentValue=t}function di(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _r(e,t){so=e,rc=wr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(pt=!0),e.firstContext=null)}function Ot(e){var t=e._currentValue;if(rc!==e)if(e={context:e,memoizedValue:t,next:null},wr===null){if(so===null)throw Error(R(308));wr=e,so.dependencies={lanes:0,firstContext:e}}else wr=wr.next=e;return t}var Xn=null;function oc(e){Xn===null?Xn=[e]:Xn.push(e)}function Gf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,oc(t)):(n.next=s.next,s.next=n),t.interleaved=n,fn(e,r)}function fn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var kn=!1;function ac(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,fn(e,n)}return s=r.interleaved,s===null?(t.next=t,oc(r)):(t.next=s.next,s.next=t),r.interleaved=t,fn(e,n)}function Ll(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xi(e,n)}}function Nu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function lo(e,t,n,r){var s=e.updateQueue;kn=!1;var l=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,u=c.next;c.next=null,a===null?l=u:a.next=u,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,i=f.lastBaseUpdate,i!==a&&(i===null?f.firstBaseUpdate=u:i.next=u,f.lastBaseUpdate=c))}if(l!==null){var p=s.baseState;a=0,f=u=c=null,i=l;do{var h=i.lane,y=i.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:y,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var b=e,v=i;switch(h=t,y=n,v.tag){case 1:if(b=v.payload,typeof b=="function"){p=b.call(y,p,h);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,h=typeof b=="function"?b.call(y,p,h):b,h==null)break e;p=Te({},p,h);break e;case 2:kn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[i]:h.push(i))}else y={eventTime:y,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},f===null?(u=f=y,c=p):f=f.next=y,a|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;h=i,i=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(f===null&&(c=p),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);er|=a,e.lanes=a,e.memoizedState=p}}function Cu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(R(191,s));s.call(r)}}}var Js={},tn=Fn(Js),Ls=Fn(Js),Os=Fn(Js);function Kn(e){if(e===Js)throw Error(R(174));return e}function ic(e,t){switch(be(Os,t),be(Ls,e),be(tn,Js),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Va(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Va(t,e)}Ne(tn),be(tn,t)}function Lr(){Ne(tn),Ne(Ls),Ne(Os)}function qf(e){Kn(Os.current);var t=Kn(tn.current),n=Va(t,e.type);t!==n&&(be(Ls,e),be(tn,n))}function cc(e){Ls.current===e&&(Ne(tn),Ne(Ls))}var Me=Fn(0);function oo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ya=[];function uc(){for(var e=0;e<ya.length;e++)ya[e]._workInProgressVersionPrimary=null;ya.length=0}var Ol=mn.ReactCurrentDispatcher,va=mn.ReactCurrentBatchConfig,Zn=0,_e=null,Ae=null,He=null,ao=!1,ys=!1,As=0,Kx=0;function et(){throw Error(R(321))}function dc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xt(e[n],t[n]))return!1;return!0}function fc(e,t,n,r,s,l){if(Zn=l,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ol.current=e===null||e.memoizedState===null?Jx:qx,e=n(r,s),ys){l=0;do{if(ys=!1,As=0,25<=l)throw Error(R(301));l+=1,He=Ae=null,t.updateQueue=null,Ol.current=Zx,e=n(r,s)}while(ys)}if(Ol.current=io,t=Ae!==null&&Ae.next!==null,Zn=0,He=Ae=_e=null,ao=!1,t)throw Error(R(300));return e}function pc(){var e=As!==0;return As=0,e}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?_e.memoizedState=He=e:He=He.next=e,He}function At(){if(Ae===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=Ae.next;var t=He===null?_e.memoizedState:He.next;if(t!==null)He=t,Ae=e;else{if(e===null)throw Error(R(310));Ae=e,e={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},He===null?_e.memoizedState=He=e:He=He.next=e}return He}function $s(e,t){return typeof t=="function"?t(e):t}function wa(e){var t=At(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=Ae,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var a=s.next;s.next=l.next,l.next=a}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var i=a=null,c=null,u=l;do{var f=u.lane;if((Zn&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(i=c=p,a=r):c=c.next=p,_e.lanes|=f,er|=f}u=u.next}while(u!==null&&u!==l);c===null?a=r:c.next=i,Xt(r,t.memoizedState)||(pt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,_e.lanes|=l,er|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ba(e){var t=At(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do l=e(l,a.action),a=a.next;while(a!==s);Xt(l,t.memoizedState)||(pt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Zf(){}function ep(e,t){var n=_e,r=At(),s=t(),l=!Xt(r.memoizedState,s);if(l&&(r.memoizedState=s,pt=!0),r=r.queue,hc(rp.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,Fs(9,np.bind(null,n,r,s,t),void 0,null),Ve===null)throw Error(R(349));Zn&30||tp(n,t,s)}return s}function tp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function np(e,t,n,r){t.value=n,t.getSnapshot=r,sp(t)&&lp(e)}function rp(e,t,n){return n(function(){sp(t)&&lp(e)})}function sp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xt(e,n)}catch(r){return!0}}function lp(e){var t=fn(e,1);t!==null&&Vt(t,e,1,-1)}function Eu(e){var t=qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:e},t.queue=e,e=e.dispatch=Gx.bind(null,_e,e),[t.memoizedState,e]}function Fs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function op(){return At().memoizedState}function Al(e,t,n,r){var s=qt();_e.flags|=e,s.memoizedState=Fs(1|t,n,void 0,r===void 0?null:r)}function _o(e,t,n,r){var s=At();r=r===void 0?null:r;var l=void 0;if(Ae!==null){var a=Ae.memoizedState;if(l=a.destroy,r!==null&&dc(r,a.deps)){s.memoizedState=Fs(t,n,l,r);return}}_e.flags|=e,s.memoizedState=Fs(1|t,n,l,r)}function Mu(e,t){return Al(8390656,8,e,t)}function hc(e,t){return _o(2048,8,e,t)}function ap(e,t){return _o(4,2,e,t)}function ip(e,t){return _o(4,4,e,t)}function cp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function up(e,t,n){return n=n!=null?n.concat([e]):null,_o(4,4,cp.bind(null,t,e),n)}function mc(){}function dp(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&dc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function fp(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&dc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function pp(e,t,n){return Zn&21?(Xt(n,t)||(n=yf(),_e.lanes|=n,er|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,pt=!0),e.memoizedState=n)}function Yx(e,t){var n=ye;ye=n!==0&&4>n?n:4,e(!0);var r=va.transition;va.transition={};try{e(!1),t()}finally{ye=n,va.transition=r}}function hp(){return At().memoizedState}function Qx(e,t,n){var r=In(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},mp(e))xp(t,n);else if(n=Gf(e,t,n,r),n!==null){var s=at();Vt(n,e,r,s),gp(n,t,r)}}function Gx(e,t,n){var r=In(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(mp(e))xp(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,i=l(a,n);if(s.hasEagerState=!0,s.eagerState=i,Xt(i,a)){var c=t.interleaved;c===null?(s.next=s,oc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch(u){}finally{}n=Gf(e,t,s,r),n!==null&&(s=at(),Vt(n,e,r,s),gp(n,t,r))}}function mp(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function xp(e,t){ys=ao=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xi(e,n)}}var io={readContext:Ot,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},Jx={readContext:Ot,useCallback:function(e,t){return qt().memoizedState=[e,t===void 0?null:t],e},useContext:Ot,useEffect:Mu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Al(4194308,4,cp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Al(4194308,4,e,t)},useInsertionEffect:function(e,t){return Al(4,2,e,t)},useMemo:function(e,t){var n=qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=qt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qx.bind(null,_e,e),[r.memoizedState,e]},useRef:function(e){var t=qt();return e={current:e},t.memoizedState=e},useState:Eu,useDebugValue:mc,useDeferredValue:function(e){return qt().memoizedState=e},useTransition:function(){var e=Eu(!1),t=e[0];return e=Yx.bind(null,e[1]),qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=_e,s=qt();if(Ee){if(n===void 0)throw Error(R(407));n=n()}else{if(n=t(),Ve===null)throw Error(R(349));Zn&30||tp(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,Mu(rp.bind(null,r,l,e),[e]),r.flags|=2048,Fs(9,np.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=qt(),t=Ve.identifierPrefix;if(Ee){var n=an,r=on;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=As++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Kx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qx={readContext:Ot,useCallback:dp,useContext:Ot,useEffect:hc,useImperativeHandle:up,useInsertionEffect:ap,useLayoutEffect:ip,useMemo:fp,useReducer:wa,useRef:op,useState:function(){return wa($s)},useDebugValue:mc,useDeferredValue:function(e){var t=At();return pp(t,Ae.memoizedState,e)},useTransition:function(){var e=wa($s)[0],t=At().memoizedState;return[e,t]},useMutableSource:Zf,useSyncExternalStore:ep,useId:hp,unstable_isNewReconciler:!1},Zx={readContext:Ot,useCallback:dp,useContext:Ot,useEffect:hc,useImperativeHandle:up,useInsertionEffect:ap,useLayoutEffect:ip,useMemo:fp,useReducer:ba,useRef:op,useState:function(){return ba($s)},useDebugValue:mc,useDeferredValue:function(e){var t=At();return Ae===null?t.memoizedState=e:pp(t,Ae.memoizedState,e)},useTransition:function(){var e=ba($s)[0],t=At().memoizedState;return[e,t]},useMutableSource:Zf,useSyncExternalStore:ep,useId:hp,unstable_isNewReconciler:!1};function Bt(e,t){if(e&&e.defaultProps){t=Te({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function fi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Te({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var To={isMounted:function(e){return(e=e._reactInternals)?rr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=at(),s=In(e),l=cn(r,s);l.payload=t,n!=null&&(l.callback=n),t=zn(e,l,s),t!==null&&(Vt(t,e,s,r),Ll(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=at(),s=In(e),l=cn(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=zn(e,l,s),t!==null&&(Vt(t,e,s,r),Ll(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=at(),r=In(e),s=cn(n,r);s.tag=2,t!=null&&(s.callback=t),t=zn(e,s,r),t!==null&&(Vt(t,e,r,n),Ll(t,e,r))}};function _u(e,t,n,r,s,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!Rs(n,r)||!Rs(s,l):!0}function yp(e,t,n){var r=!1,s=An,l=t.contextType;return typeof l=="object"&&l!==null?l=Ot(l):(s=mt(t)?Jn:rt.current,r=t.contextTypes,l=(r=r!=null)?zr(e,s):An),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=To,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function Tu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&To.enqueueReplaceState(t,t.state,null)}function pi(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ac(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Ot(l):(l=mt(t)?Jn:rt.current,s.context=zr(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(fi(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&To.enqueueReplaceState(s,s.state,null),lo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Or(e,t){try{var n="",r=t;do n+=Em(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function ka(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function hi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var eg=typeof WeakMap=="function"?WeakMap:Map;function vp(e,t,n){n=cn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){uo||(uo=!0,Si=r),hi(e,t)},n}function wp(e,t,n){n=cn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){hi(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){hi(e,t),typeof r!="function"&&(Pn===null?Pn=new Set([this]):Pn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Du(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new eg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=hg.bind(null,e,t,n),t.then(e,e))}function Ru(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=cn(-1,1),t.tag=2,zn(n,t,1))),n.lanes|=1),e)}var tg=mn.ReactCurrentOwner,pt=!1;function ot(e,t,n,r){t.child=e===null?Qf(t,null,n,r):Ir(t,e.child,n,r)}function Pu(e,t,n,r,s){n=n.render;var l=t.ref;return _r(t,s),r=fc(e,t,n,r,l,s),n=pc(),e!==null&&!pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pn(e,t,s)):(Ee&&n&&ec(t),t.flags|=1,ot(e,t,r,s),t.child)}function Iu(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!jc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,bp(e,t,l,r,s)):(e=Ul(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:Rs,n(a,r)&&e.ref===t.ref)return pn(e,t,s)}return t.flags|=1,e=Ln(l,r),e.ref=t.ref,e.return=t,t.child=e}function bp(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(Rs(l,r)&&e.ref===t.ref)if(pt=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(pt=!0);else return t.lanes=e.lanes,pn(e,t,s)}return mi(e,t,n,r,s)}function kp(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(kr,bt),bt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,be(kr,bt),bt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,be(kr,bt),bt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,be(kr,bt),bt|=r;return ot(e,t,s,n),t.child}function jp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function mi(e,t,n,r,s){var l=mt(n)?Jn:rt.current;return l=zr(t,l),_r(t,s),n=fc(e,t,n,r,l,s),r=pc(),e!==null&&!pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pn(e,t,s)):(Ee&&r&&ec(t),t.flags|=1,ot(e,t,n,s),t.child)}function Lu(e,t,n,r,s){if(mt(n)){var l=!0;eo(t)}else l=!1;if(_r(t,s),t.stateNode===null)$l(e,t),yp(t,n,r),pi(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ot(u):(u=mt(n)?Jn:rt.current,u=zr(t,u));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==u)&&Tu(t,a,r,u),kn=!1;var h=t.memoizedState;a.state=h,lo(t,r,a,s),c=t.memoizedState,i!==r||h!==c||ht.current||kn?(typeof f=="function"&&(fi(t,n,f,r),c=t.memoizedState),(i=kn||_u(t,n,i,r,h,c,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Jf(e,t),i=t.memoizedProps,u=t.type===t.elementType?i:Bt(t.type,i),a.props=u,p=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ot(c):(c=mt(n)?Jn:rt.current,c=zr(t,c));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==p||h!==c)&&Tu(t,a,r,c),kn=!1,h=t.memoizedState,a.state=h,lo(t,r,a,s);var b=t.memoizedState;i!==p||h!==b||ht.current||kn?(typeof y=="function"&&(fi(t,n,y,r),b=t.memoizedState),(u=kn||_u(t,n,u,r,h,b,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),a.props=r,a.state=b,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return xi(e,t,n,r,l,s)}function xi(e,t,n,r,s,l){jp(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&bu(t,n,!1),pn(e,t,l);r=t.stateNode,tg.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Ir(t,e.child,null,l),t.child=Ir(t,null,i,l)):ot(e,t,i,l),t.memoizedState=r.state,s&&bu(t,n,!0),t.child}function Sp(e){var t=e.stateNode;t.pendingContext?wu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wu(e,t.context,!1),ic(e,t.containerInfo)}function Ou(e,t,n,r,s){return Pr(),nc(s),t.flags|=256,ot(e,t,n,r),t.child}var gi={dehydrated:null,treeContext:null,retryLane:0};function yi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Np(e,t,n){var r=t.pendingProps,s=Me.current,l=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),be(Me,s&1),e===null)return ui(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=zo(a,r,0,null),e=Qn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=yi(n),t.memoizedState=gi,e):xc(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return ng(e,t,a,r,i,s,n);if(l){l=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ln(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?l=Ln(i,l):(l=Qn(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?yi(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=gi,r}return l=e.child,e=l.sibling,r=Ln(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function xc(e,t){return t=zo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function yl(e,t,n,r){return r!==null&&nc(r),Ir(t,e.child,null,n),e=xc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ng(e,t,n,r,s,l,a){if(n)return t.flags&256?(t.flags&=-257,r=ka(Error(R(422))),yl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=zo({mode:"visible",children:r.children},s,0,null),l=Qn(l,s,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Ir(t,e.child,null,a),t.child.memoizedState=yi(a),t.memoizedState=gi,l);if(!(t.mode&1))return yl(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(R(419)),r=ka(l,r,void 0),yl(e,t,a,r)}if(i=(a&e.childLanes)!==0,pt||i){if(r=Ve,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,fn(e,s),Vt(r,e,s,-1))}return kc(),r=ka(Error(R(421))),yl(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=mg.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,kt=Rn(s.nextSibling),jt=t,Ee=!0,Ht=null,e!==null&&(zt[Pt++]=on,zt[Pt++]=an,zt[Pt++]=qn,on=e.id,an=e.overflow,qn=t),t=xc(t,r.children),t.flags|=4096,t)}function Au(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),di(e.return,t,n)}function ja(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function Cp(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(ot(e,t,r.children,n),r=Me.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Au(e,n,t);else if(e.tag===19)Au(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(be(Me,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&oo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ja(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&oo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ja(t,!0,n,null,l);break;case"together":ja(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $l(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),er|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,n=Ln(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ln(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function rg(e,t,n){switch(t.tag){case 3:Sp(t),Pr();break;case 5:qf(t);break;case 1:mt(t.type)&&eo(t);break;case 4:ic(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;be(ro,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(be(Me,Me.current&1),t.flags|=128,null):n&t.child.childLanes?Np(e,t,n):(be(Me,Me.current&1),e=pn(e,t,n),e!==null?e.sibling:null);be(Me,Me.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Cp(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),be(Me,Me.current),r)break;return null;case 22:case 23:return t.lanes=0,kp(e,t,n)}return pn(e,t,n)}var Ep,vi,Mp,_p;Ep=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vi=function(){};Mp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Kn(tn.current);var l=null;switch(n){case"input":s=Ba(e,s),r=Ba(e,r),l=[];break;case"select":s=Te({},s,{value:void 0}),r=Te({},r,{value:void 0}),l=[];break;case"textarea":s=Wa(e,s),r=Wa(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ql)}Xa(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var i=s[u];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ns.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in r){var c=r[u];if(i=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==i&&(c!=null||i!=null))if(u==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(l||(l=[]),l.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ns.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&je("scroll",e),l||i===c||(l=[])):(l=l||[]).push(u,c))}n&&(l=l||[]).push("style",n);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};_p=function(e,t,n,r){n!==r&&(t.flags|=4)};function as(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function sg(e,t,n){var r=t.pendingProps;switch(tc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return mt(t.type)&&Zl(),tt(t),null;case 3:return r=t.stateNode,Lr(),Ne(ht),Ne(rt),uc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(xl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ht!==null&&(Ei(Ht),Ht=null))),vi(e,t),tt(t),null;case 5:cc(t);var s=Kn(Os.current);if(n=t.type,e!==null&&t.stateNode!=null)Mp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(R(166));return tt(t),null}if(e=Kn(tn.current),xl(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Zt]=t,r[Is]=l,e=(t.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(s=0;s<fs.length;s++)je(fs[s],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":Kc(r,l),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},je("invalid",r);break;case"textarea":Qc(r,l),je("invalid",r)}Xa(n,l),s=null;for(var a in l)if(l.hasOwnProperty(a)){var i=l[a];a==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&ml(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&ml(r.textContent,i,e),s=["children",""+i]):Ns.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&je("scroll",r)}switch(n){case"input":al(r),Yc(r,l,!0);break;case"textarea":al(r),Gc(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=ql)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Zt]=t,e[Is]=r,Ep(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ka(n,r),n){case"dialog":je("cancel",e),je("close",e),s=r;break;case"iframe":case"object":case"embed":je("load",e),s=r;break;case"video":case"audio":for(s=0;s<fs.length;s++)je(fs[s],e);s=r;break;case"source":je("error",e),s=r;break;case"img":case"image":case"link":je("error",e),je("load",e),s=r;break;case"details":je("toggle",e),s=r;break;case"input":Kc(e,r),s=Ba(e,r),je("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Te({},r,{value:void 0}),je("invalid",e);break;case"textarea":Qc(e,r),s=Wa(e,r),je("invalid",e);break;default:s=r}Xa(n,s),i=s;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?lf(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&rf(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Cs(e,c):typeof c=="number"&&Cs(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ns.hasOwnProperty(l)?c!=null&&l==="onScroll"&&je("scroll",e):c!=null&&Fi(e,l,c,a))}switch(n){case"input":al(e),Yc(e,r,!1);break;case"textarea":al(e),Gc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+On(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Nr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Nr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ql)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)_p(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(R(166));if(n=Kn(Os.current),Kn(tn.current),xl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Zt]=t,(l=r.nodeValue!==n)&&(e=jt,e!==null))switch(e.tag){case 3:ml(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ml(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zt]=t,t.stateNode=r}return tt(t),null;case 13:if(Ne(Me),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ee&&kt!==null&&t.mode&1&&!(t.flags&128))Kf(),Pr(),t.flags|=98560,l=!1;else if(l=xl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(R(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(R(317));l[Zt]=t}else Pr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tt(t),l=!1}else Ht!==null&&(Ei(Ht),Ht=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Me.current&1?Fe===0&&(Fe=3):kc())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return Lr(),vi(e,t),e===null&&zs(t.stateNode.containerInfo),tt(t),null;case 10:return lc(t.type._context),tt(t),null;case 17:return mt(t.type)&&Zl(),tt(t),null;case 19:if(Ne(Me),l=t.memoizedState,l===null)return tt(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)as(l,!1);else{if(Fe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=oo(e),a!==null){for(t.flags|=128,as(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return be(Me,Me.current&1|2),t.child}e=e.sibling}l.tail!==null&&Ie()>Ar&&(t.flags|=128,r=!0,as(l,!1),t.lanes=4194304)}else{if(!r)if(e=oo(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),as(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!Ee)return tt(t),null}else 2*Ie()-l.renderingStartTime>Ar&&n!==1073741824&&(t.flags|=128,r=!0,as(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ie(),t.sibling=null,n=Me.current,be(Me,r?n&1|2:n&1),t):(tt(t),null);case 22:case 23:return bc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?bt&1073741824&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function lg(e,t){switch(tc(t),t.tag){case 1:return mt(t.type)&&Zl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Lr(),Ne(ht),Ne(rt),uc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return cc(t),null;case 13:if(Ne(Me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));Pr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ne(Me),null;case 4:return Lr(),null;case 10:return lc(t.type._context),null;case 22:case 23:return bc(),null;case 24:return null;default:return null}}var vl=!1,nt=!1,og=typeof WeakSet=="function"?WeakSet:Set,B=null;function br(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(e,t,r)}else n.current=null}function wi(e,t,n){try{n()}catch(r){ze(e,t,r)}}var $u=!1;function ag(e,t){if(ri=Ql,e=Pf(),Zi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch(S){n=null;break e}var a=0,i=-1,c=-1,u=0,f=0,p=e,h=null;t:for(;;){for(var y;p!==n||s!==0&&p.nodeType!==3||(i=a+s),p!==l||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(y=p.firstChild)!==null;)h=p,p=y;for(;;){if(p===e)break t;if(h===n&&++u===s&&(i=a),h===l&&++f===r&&(c=a),(y=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=y}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(si={focusedElem:e,selectionRange:n},Ql=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,w=b.memoizedState,x=t.stateNode,m=x.getSnapshotBeforeUpdate(t.elementType===t.type?v:Bt(t.type,v),w);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(S){ze(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return b=$u,$u=!1,b}function vs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&wi(t,n,l)}s=s.next}while(s!==r)}}function Do(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function bi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Tp(e){var t=e.alternate;t!==null&&(e.alternate=null,Tp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Zt],delete t[Is],delete t[ai],delete t[Hx],delete t[Wx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Dp(e){return e.tag===5||e.tag===3||e.tag===4}function Fu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ki(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ql));else if(r!==4&&(e=e.child,e!==null))for(ki(e,t,n),e=e.sibling;e!==null;)ki(e,t,n),e=e.sibling}function ji(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ji(e,t,n),e=e.sibling;e!==null;)ji(e,t,n),e=e.sibling}var Qe=null,Ut=!1;function wn(e,t,n){for(n=n.child;n!==null;)Rp(e,t,n),n=n.sibling}function Rp(e,t,n){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(jo,n)}catch(i){}switch(n.tag){case 5:nt||br(n,t);case 6:var r=Qe,s=Ut;Qe=null,wn(e,t,n),Qe=r,Ut=s,Qe!==null&&(Ut?(e=Qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(Ut?(e=Qe,n=n.stateNode,e.nodeType===8?xa(e.parentNode,n):e.nodeType===1&&xa(e,n),Ts(e)):xa(Qe,n.stateNode));break;case 4:r=Qe,s=Ut,Qe=n.stateNode.containerInfo,Ut=!0,wn(e,t,n),Qe=r,Ut=s;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&wi(n,t,a),s=s.next}while(s!==r)}wn(e,t,n);break;case 1:if(!nt&&(br(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){ze(n,t,i)}wn(e,t,n);break;case 21:wn(e,t,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,wn(e,t,n),nt=r):wn(e,t,n);break;default:wn(e,t,n)}}function Bu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new og),t.forEach(function(r){var s=xg.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ft(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:Qe=i.stateNode,Ut=!1;break e;case 3:Qe=i.stateNode.containerInfo,Ut=!0;break e;case 4:Qe=i.stateNode.containerInfo,Ut=!0;break e}i=i.return}if(Qe===null)throw Error(R(160));Rp(l,a,s),Qe=null,Ut=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ze(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zp(t,e),t=t.sibling}function zp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ft(t,e),Jt(e),r&4){try{vs(3,e,e.return),Do(3,e)}catch(v){ze(e,e.return,v)}try{vs(5,e,e.return)}catch(v){ze(e,e.return,v)}}break;case 1:Ft(t,e),Jt(e),r&512&&n!==null&&br(n,n.return);break;case 5:if(Ft(t,e),Jt(e),r&512&&n!==null&&br(n,n.return),e.flags&32){var s=e.stateNode;try{Cs(s,"")}catch(v){ze(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&ef(s,l),Ka(i,a);var u=Ka(i,l);for(a=0;a<c.length;a+=2){var f=c[a],p=c[a+1];f==="style"?lf(s,p):f==="dangerouslySetInnerHTML"?rf(s,p):f==="children"?Cs(s,p):Fi(s,f,p,u)}switch(i){case"input":Ua(s,l);break;case"textarea":tf(s,l);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var y=l.value;y!=null?Nr(s,!!l.multiple,y,!1):h!==!!l.multiple&&(l.defaultValue!=null?Nr(s,!!l.multiple,l.defaultValue,!0):Nr(s,!!l.multiple,l.multiple?[]:"",!1))}s[Is]=l}catch(v){ze(e,e.return,v)}}break;case 6:if(Ft(t,e),Jt(e),r&4){if(e.stateNode===null)throw Error(R(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(v){ze(e,e.return,v)}}break;case 3:if(Ft(t,e),Jt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ts(t.containerInfo)}catch(v){ze(e,e.return,v)}break;case 4:Ft(t,e),Jt(e);break;case 13:Ft(t,e),Jt(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(vc=Ie())),r&4&&Bu(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(nt=(u=nt)||f,Ft(t,e),nt=u):Ft(t,e),Jt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(B=e,f=e.child;f!==null;){for(p=B=f;B!==null;){switch(h=B,y=h.child,h.tag){case 0:case 11:case 14:case 15:vs(4,h,h.return);break;case 1:br(h,h.return);var b=h.stateNode;if(typeof b.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(v){ze(r,n,v)}}break;case 5:br(h,h.return);break;case 22:if(h.memoizedState!==null){Hu(p);continue}}y!==null?(y.return=h,B=y):Hu(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,u?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=sf("display",a))}catch(v){ze(e,e.return,v)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(v){ze(e,e.return,v)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ft(t,e),Jt(e),r&4&&Bu(e);break;case 21:break;default:Ft(t,e),Jt(e)}}function Jt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Dp(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Cs(s,""),r.flags&=-33);var l=Fu(e);ji(e,l,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=Fu(e);ki(e,i,a);break;default:throw Error(R(161))}}catch(c){ze(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ig(e,t,n){B=e,Pp(e)}function Pp(e,t,n){for(var r=(e.mode&1)!==0;B!==null;){var s=B,l=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||vl;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||nt;i=vl;var u=nt;if(vl=a,(nt=c)&&!u)for(B=s;B!==null;)a=B,c=a.child,a.tag===22&&a.memoizedState!==null?Wu(s):c!==null?(c.return=a,B=c):Wu(s);for(;l!==null;)B=l,Pp(l),l=l.sibling;B=s,vl=i,nt=u}Uu(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,B=l):Uu(e)}}function Uu(e){for(;B!==null;){var t=B;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nt||Do(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!nt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Bt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Cu(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Cu(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Ts(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}nt||t.flags&512&&bi(t)}catch(h){ze(t,t.return,h)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function Hu(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function Wu(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Do(4,t)}catch(c){ze(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){ze(t,s,c)}}var l=t.return;try{bi(t)}catch(c){ze(t,l,c)}break;case 5:var a=t.return;try{bi(t)}catch(c){ze(t,a,c)}}}catch(c){ze(t,t.return,c)}if(t===e){B=null;break}var i=t.sibling;if(i!==null){i.return=t.return,B=i;break}B=t.return}}var cg=Math.ceil,co=mn.ReactCurrentDispatcher,gc=mn.ReactCurrentOwner,Lt=mn.ReactCurrentBatchConfig,ce=0,Ve=null,Le=null,Ge=0,bt=0,kr=Fn(0),Fe=0,Bs=null,er=0,Ro=0,yc=0,ws=null,ft=null,vc=0,Ar=1/0,sn=null,uo=!1,Si=null,Pn=null,wl=!1,En=null,fo=0,bs=0,Ni=null,Fl=-1,Bl=0;function at(){return ce&6?Ie():Fl!==-1?Fl:Fl=Ie()}function In(e){return e.mode&1?ce&2&&Ge!==0?Ge&-Ge:Xx.transition!==null?(Bl===0&&(Bl=yf()),Bl):(e=ye,e!==0||(e=window.event,e=e===void 0?16:Nf(e.type)),e):1}function Vt(e,t,n,r){if(50<bs)throw bs=0,Ni=null,Error(R(185));Ys(e,n,r),(!(ce&2)||e!==Ve)&&(e===Ve&&(!(ce&2)&&(Ro|=n),Fe===4&&Nn(e,Ge)),xt(e,r),n===1&&ce===0&&!(t.mode&1)&&(Ar=Ie()+500,Mo&&Bn()))}function xt(e,t){var n=e.callbackNode;Xm(e,t);var r=Yl(e,e===Ve?Ge:0);if(r===0)n!==null&&Zc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Zc(n),t===1)e.tag===0?Vx(Vu.bind(null,e)):Wf(Vu.bind(null,e)),Bx(function(){!(ce&6)&&Bn()}),n=null;else{switch(vf(r)){case 1:n=Vi;break;case 4:n=xf;break;case 16:n=Kl;break;case 536870912:n=gf;break;default:n=Kl}n=Up(n,Ip.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ip(e,t){if(Fl=-1,Bl=0,ce&6)throw Error(R(327));var n=e.callbackNode;if(Tr()&&e.callbackNode!==n)return null;var r=Yl(e,e===Ve?Ge:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=po(e,r);else{t=r;var s=ce;ce|=2;var l=Op();(Ve!==e||Ge!==t)&&(sn=null,Ar=Ie()+500,Yn(e,t));do try{fg();break}catch(i){Lp(e,i)}while(!0);sc(),co.current=l,ce=s,Le!==null?t=0:(Ve=null,Ge=0,t=Fe)}if(t!==0){if(t===2&&(s=qa(e),s!==0&&(r=s,t=Ci(e,s))),t===1)throw n=Bs,Yn(e,0),Nn(e,r),xt(e,Ie()),n;if(t===6)Nn(e,r);else{if(s=e.current.alternate,!(r&30)&&!ug(s)&&(t=po(e,r),t===2&&(l=qa(e),l!==0&&(r=l,t=Ci(e,l))),t===1))throw n=Bs,Yn(e,0),Nn(e,r),xt(e,Ie()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(R(345));case 2:Wn(e,ft,sn);break;case 3:if(Nn(e,r),(r&130023424)===r&&(t=vc+500-Ie(),10<t)){if(Yl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){at(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=oi(Wn.bind(null,e,ft,sn),t);break}Wn(e,ft,sn);break;case 4:if(Nn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Wt(r);l=1<<a,a=t[a],a>s&&(s=a),r&=~l}if(r=s,r=Ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cg(r/1960))-r,10<r){e.timeoutHandle=oi(Wn.bind(null,e,ft,sn),r);break}Wn(e,ft,sn);break;case 5:Wn(e,ft,sn);break;default:throw Error(R(329))}}}return xt(e,Ie()),e.callbackNode===n?Ip.bind(null,e):null}function Ci(e,t){var n=ws;return e.current.memoizedState.isDehydrated&&(Yn(e,t).flags|=256),e=po(e,t),e!==2&&(t=ft,ft=n,t!==null&&Ei(t)),e}function Ei(e){ft===null?ft=e:ft.push.apply(ft,e)}function ug(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!Xt(l(),s))return!1}catch(a){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nn(e,t){for(t&=~yc,t&=~Ro,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function Vu(e){if(ce&6)throw Error(R(327));Tr();var t=Yl(e,0);if(!(t&1))return xt(e,Ie()),null;var n=po(e,t);if(e.tag!==0&&n===2){var r=qa(e);r!==0&&(t=r,n=Ci(e,r))}if(n===1)throw n=Bs,Yn(e,0),Nn(e,t),xt(e,Ie()),n;if(n===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wn(e,ft,sn),xt(e,Ie()),null}function wc(e,t){var n=ce;ce|=1;try{return e(t)}finally{ce=n,ce===0&&(Ar=Ie()+500,Mo&&Bn())}}function tr(e){En!==null&&En.tag===0&&!(ce&6)&&Tr();var t=ce;ce|=1;var n=Lt.transition,r=ye;try{if(Lt.transition=null,ye=1,e)return e()}finally{ye=r,Lt.transition=n,ce=t,!(ce&6)&&Bn()}}function bc(){bt=kr.current,Ne(kr)}function Yn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Fx(n)),Le!==null)for(n=Le.return;n!==null;){var r=n;switch(tc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zl();break;case 3:Lr(),Ne(ht),Ne(rt),uc();break;case 5:cc(r);break;case 4:Lr();break;case 13:Ne(Me);break;case 19:Ne(Me);break;case 10:lc(r.type._context);break;case 22:case 23:bc()}n=n.return}if(Ve=e,Le=e=Ln(e.current,null),Ge=bt=t,Fe=0,Bs=null,yc=Ro=er=0,ft=ws=null,Xn!==null){for(t=0;t<Xn.length;t++)if(n=Xn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=s,r.next=a}n.pending=r}Xn=null}return e}function Lp(e,t){do{var n=Le;try{if(sc(),Ol.current=io,ao){for(var r=_e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ao=!1}if(Zn=0,He=Ae=_e=null,ys=!1,As=0,gc.current=null,n===null||n.return===null){Fe=1,Bs=t,Le=null;break}e:{var l=e,a=n.return,i=n,c=t;if(t=Ge,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=i,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=Ru(a);if(y!==null){y.flags&=-257,zu(y,a,i,l,t),y.mode&1&&Du(l,u,t),t=y,c=u;var b=t.updateQueue;if(b===null){var v=new Set;v.add(c),t.updateQueue=v}else b.add(c);break e}else{if(!(t&1)){Du(l,u,t),kc();break e}c=Error(R(426))}}else if(Ee&&i.mode&1){var w=Ru(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),zu(w,a,i,l,t),nc(Or(c,i));break e}}l=c=Or(c,i),Fe!==4&&(Fe=2),ws===null?ws=[l]:ws.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var x=vp(l,c,t);Nu(l,x);break e;case 1:i=c;var m=l.type,g=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Pn===null||!Pn.has(g)))){l.flags|=65536,t&=-t,l.lanes|=t;var S=wp(l,i,t);Nu(l,S);break e}}l=l.return}while(l!==null)}$p(n)}catch(j){t=j,Le===n&&n!==null&&(Le=n=n.return);continue}break}while(!0)}function Op(){var e=co.current;return co.current=io,e===null?io:e}function kc(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),Ve===null||!(er&268435455)&&!(Ro&268435455)||Nn(Ve,Ge)}function po(e,t){var n=ce;ce|=2;var r=Op();(Ve!==e||Ge!==t)&&(sn=null,Yn(e,t));do try{dg();break}catch(s){Lp(e,s)}while(!0);if(sc(),ce=n,co.current=r,Le!==null)throw Error(R(261));return Ve=null,Ge=0,Fe}function dg(){for(;Le!==null;)Ap(Le)}function fg(){for(;Le!==null&&!Om();)Ap(Le)}function Ap(e){var t=Bp(e.alternate,e,bt);e.memoizedProps=e.pendingProps,t===null?$p(e):Le=t,gc.current=null}function $p(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=lg(n,t),n!==null){n.flags&=32767,Le=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fe=6,Le=null;return}}else if(n=sg(n,t,bt),n!==null){Le=n;return}if(t=t.sibling,t!==null){Le=t;return}Le=t=e}while(t!==null);Fe===0&&(Fe=5)}function Wn(e,t,n){var r=ye,s=Lt.transition;try{Lt.transition=null,ye=1,pg(e,t,n,r)}finally{Lt.transition=s,ye=r}return null}function pg(e,t,n,r){do Tr();while(En!==null);if(ce&6)throw Error(R(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Km(e,l),e===Ve&&(Le=Ve=null,Ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wl||(wl=!0,Up(Kl,function(){return Tr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Lt.transition,Lt.transition=null;var a=ye;ye=1;var i=ce;ce|=4,gc.current=null,ag(e,n),zp(n,e),zx(si),Ql=!!ri,si=ri=null,e.current=n,ig(n),Am(),ce=i,ye=a,Lt.transition=l}else e.current=n;if(wl&&(wl=!1,En=e,fo=s),l=e.pendingLanes,l===0&&(Pn=null),Bm(n.stateNode),xt(e,Ie()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(uo)throw uo=!1,e=Si,Si=null,e;return fo&1&&e.tag!==0&&Tr(),l=e.pendingLanes,l&1?e===Ni?bs++:(bs=0,Ni=e):bs=0,Bn(),null}function Tr(){if(En!==null){var e=vf(fo),t=Lt.transition,n=ye;try{if(Lt.transition=null,ye=16>e?16:e,En===null)var r=!1;else{if(e=En,En=null,fo=0,ce&6)throw Error(R(331));var s=ce;for(ce|=4,B=e.current;B!==null;){var l=B,a=l.child;if(B.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var u=i[c];for(B=u;B!==null;){var f=B;switch(f.tag){case 0:case 11:case 15:vs(8,f,l)}var p=f.child;if(p!==null)p.return=f,B=p;else for(;B!==null;){f=B;var h=f.sibling,y=f.return;if(Tp(f),f===u){B=null;break}if(h!==null){h.return=y,B=h;break}B=y}}}var b=l.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}B=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,B=a;else e:for(;B!==null;){if(l=B,l.flags&2048)switch(l.tag){case 0:case 11:case 15:vs(9,l,l.return)}var x=l.sibling;if(x!==null){x.return=l.return,B=x;break e}B=l.return}}var m=e.current;for(B=m;B!==null;){a=B;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,B=g;else e:for(a=m;B!==null;){if(i=B,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Do(9,i)}}catch(j){ze(i,i.return,j)}if(i===a){B=null;break e}var S=i.sibling;if(S!==null){S.return=i.return,B=S;break e}B=i.return}}if(ce=s,Bn(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(jo,e)}catch(j){}r=!0}return r}finally{ye=n,Lt.transition=t}}return!1}function Xu(e,t,n){t=Or(n,t),t=vp(e,t,1),e=zn(e,t,1),t=at(),e!==null&&(Ys(e,1,t),xt(e,t))}function ze(e,t,n){if(e.tag===3)Xu(e,e,n);else for(;t!==null;){if(t.tag===3){Xu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pn===null||!Pn.has(r))){e=Or(n,e),e=wp(t,e,1),t=zn(t,e,1),e=at(),t!==null&&(Ys(t,1,e),xt(t,e));break}}t=t.return}}function hg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=at(),e.pingedLanes|=e.suspendedLanes&n,Ve===e&&(Ge&n)===n&&(Fe===4||Fe===3&&(Ge&130023424)===Ge&&500>Ie()-vc?Yn(e,0):yc|=n),xt(e,t)}function Fp(e,t){t===0&&(e.mode&1?(t=ul,ul<<=1,!(ul&130023424)&&(ul=4194304)):t=1);var n=at();e=fn(e,t),e!==null&&(Ys(e,t,n),xt(e,n))}function mg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Fp(e,n)}function xg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(t),Fp(e,n)}var Bp;Bp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ht.current)pt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return pt=!1,rg(e,t,n);pt=!!(e.flags&131072)}else pt=!1,Ee&&t.flags&1048576&&Vf(t,no,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$l(e,t),e=t.pendingProps;var s=zr(t,rt.current);_r(t,n),s=fc(null,t,r,e,s,n);var l=pc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mt(r)?(l=!0,eo(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ac(t),s.updater=To,t.stateNode=s,s._reactInternals=t,pi(t,r,e,n),t=xi(null,t,r,!0,l,n)):(t.tag=0,Ee&&l&&ec(t),ot(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch($l(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=yg(r),e=Bt(r,e),s){case 0:t=mi(null,t,r,e,n);break e;case 1:t=Lu(null,t,r,e,n);break e;case 11:t=Pu(null,t,r,e,n);break e;case 14:t=Iu(null,t,r,Bt(r.type,e),n);break e}throw Error(R(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),mi(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),Lu(e,t,r,s,n);case 3:e:{if(Sp(t),e===null)throw Error(R(387));r=t.pendingProps,l=t.memoizedState,s=l.element,Jf(e,t),lo(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Or(Error(R(423)),t),t=Ou(e,t,r,n,s);break e}else if(r!==s){s=Or(Error(R(424)),t),t=Ou(e,t,r,n,s);break e}else for(kt=Rn(t.stateNode.containerInfo.firstChild),jt=t,Ee=!0,Ht=null,n=Qf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pr(),r===s){t=pn(e,t,n);break e}ot(e,t,r,n)}t=t.child}return t;case 5:return qf(t),e===null&&ui(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,a=s.children,li(r,s)?a=null:l!==null&&li(r,l)&&(t.flags|=32),jp(e,t),ot(e,t,a,n),t.child;case 6:return e===null&&ui(t),null;case 13:return Np(e,t,n);case 4:return ic(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ir(t,null,r,n):ot(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),Pu(e,t,r,s,n);case 7:return ot(e,t,t.pendingProps,n),t.child;case 8:return ot(e,t,t.pendingProps.children,n),t.child;case 12:return ot(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,a=s.value,be(ro,r._currentValue),r._currentValue=a,l!==null)if(Xt(l.value,a)){if(l.children===s.children&&!ht.current){t=pn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){a=l.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=cn(-1,n&-n),c.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),di(l.return,n,t),i.lanes|=n;break}c=c.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(R(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),di(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}ot(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,_r(t,n),s=Ot(s),r=r(s),t.flags|=1,ot(e,t,r,n),t.child;case 14:return r=t.type,s=Bt(r,t.pendingProps),s=Bt(r.type,s),Iu(e,t,r,s,n);case 15:return bp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),$l(e,t),t.tag=1,mt(r)?(e=!0,eo(t)):e=!1,_r(t,n),yp(t,r,s),pi(t,r,s,n),xi(null,t,r,!0,e,n);case 19:return Cp(e,t,n);case 22:return kp(e,t,n)}throw Error(R(156,t.tag))};function Up(e,t){return mf(e,t)}function gg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,t,n,r){return new gg(e,t,n,r)}function jc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yg(e){if(typeof e=="function")return jc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ui)return 11;if(e===Hi)return 14}return 2}function Ln(e,t){var n=e.alternate;return n===null?(n=It(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ul(e,t,n,r,s,l){var a=2;if(r=e,typeof e=="function")jc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case fr:return Qn(n.children,s,l,t);case Bi:a=8,s|=8;break;case Oa:return e=It(12,n,t,s|2),e.elementType=Oa,e.lanes=l,e;case Aa:return e=It(13,n,t,s),e.elementType=Aa,e.lanes=l,e;case $a:return e=It(19,n,t,s),e.elementType=$a,e.lanes=l,e;case Jd:return zo(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Qd:a=10;break e;case Gd:a=9;break e;case Ui:a=11;break e;case Hi:a=14;break e;case bn:a=16,r=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=It(a,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function Qn(e,t,n,r){return e=It(7,e,r,t),e.lanes=n,e}function zo(e,t,n,r){return e=It(22,e,r,t),e.elementType=Jd,e.lanes=n,e.stateNode={isHidden:!1},e}function Sa(e,t,n){return e=It(6,e,null,t),e.lanes=n,e}function Na(e,t,n){return t=It(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vg(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=la(0),this.expirationTimes=la(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=la(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Sc(e,t,n,r,s,l,a,i,c){return e=new vg(e,t,n,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=It(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ac(l),e}function wg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Hp(e){if(!e)return An;e=e._reactInternals;e:{if(rr(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var n=e.type;if(mt(n))return Hf(e,n,t)}return t}function Wp(e,t,n,r,s,l,a,i,c){return e=Sc(n,r,!0,e,s,l,a,i,c),e.context=Hp(null),n=e.current,r=at(),s=In(n),l=cn(r,s),l.callback=t!=null?t:null,zn(n,l,s),e.current.lanes=s,Ys(e,s,r),xt(e,r),e}function Po(e,t,n,r){var s=t.current,l=at(),a=In(s);return n=Hp(n),t.context===null?t.context=n:t.pendingContext=n,t=cn(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=zn(s,t,a),e!==null&&(Vt(e,s,a,l),Ll(e,s,a)),a}function ho(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ku(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Nc(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}function bg(){return null}var Vp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Cc(e){this._internalRoot=e}Io.prototype.render=Cc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));Po(e,t,null,null)};Io.prototype.unmount=Cc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tr(function(){Po(null,e,null,null)}),t[dn]=null}};function Io(e){this._internalRoot=e}Io.prototype.unstable_scheduleHydration=function(e){if(e){var t=kf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sn.length&&t!==0&&t<Sn[n].priority;n++);Sn.splice(n,0,e),n===0&&Sf(e)}};function Ec(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Yu(){}function kg(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var u=ho(a);l.call(u)}}var a=Wp(t,r,e,0,null,!1,!1,"",Yu);return e._reactRootContainer=a,e[dn]=a.current,zs(e.nodeType===8?e.parentNode:e),tr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var u=ho(c);i.call(u)}}var c=Sc(e,0,!1,null,null,!1,!1,"",Yu);return e._reactRootContainer=c,e[dn]=c.current,zs(e.nodeType===8?e.parentNode:e),tr(function(){Po(t,c,n,r)}),c}function Oo(e,t,n,r,s){var l=n._reactRootContainer;if(l){var a=l;if(typeof s=="function"){var i=s;s=function(){var c=ho(a);i.call(c)}}Po(t,a,e,s)}else a=kg(n,t,e,s,r);return ho(a)}wf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ds(t.pendingLanes);n!==0&&(Xi(t,n|1),xt(t,Ie()),!(ce&6)&&(Ar=Ie()+500,Bn()))}break;case 13:tr(function(){var r=fn(e,1);if(r!==null){var s=at();Vt(r,e,1,s)}}),Nc(e,1)}};Ki=function(e){if(e.tag===13){var t=fn(e,134217728);if(t!==null){var n=at();Vt(t,e,134217728,n)}Nc(e,134217728)}};bf=function(e){if(e.tag===13){var t=In(e),n=fn(e,t);if(n!==null){var r=at();Vt(n,e,t,r)}Nc(e,t)}};kf=function(){return ye};jf=function(e,t){var n=ye;try{return ye=e,t()}finally{ye=n}};Qa=function(e,t,n){switch(t){case"input":if(Ua(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Eo(r);if(!s)throw Error(R(90));Zd(r),Ua(r,s)}}}break;case"textarea":tf(e,n);break;case"select":t=n.value,t!=null&&Nr(e,!!n.multiple,t,!1)}};cf=wc;uf=tr;var jg={usingClientEntryPoint:!1,Events:[Gs,xr,Eo,of,af,wc]},is={findFiberByHostInstance:Vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Sg={bundleType:is.bundleType,version:is.version,rendererPackageName:is.rendererPackageName,rendererConfig:is.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=pf(e),e===null?null:e.stateNode},findFiberByHostInstance:is.findFiberByHostInstance||bg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bl.isDisabled&&bl.supportsFiber)try{jo=bl.inject(Sg),en=bl}catch(e){}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jg;Nt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ec(t))throw Error(R(200));return wg(e,t,null,n)};Nt.createRoot=function(e,t){if(!Ec(e))throw Error(R(299));var n=!1,r="",s=Vp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Sc(e,1,!1,null,null,n,!1,r,s),e[dn]=t.current,zs(e.nodeType===8?e.parentNode:e),new Cc(t)};Nt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=pf(t),e=e===null?null:e.stateNode,e};Nt.flushSync=function(e){return tr(e)};Nt.hydrate=function(e,t,n){if(!Lo(t))throw Error(R(200));return Oo(null,e,t,!0,n)};Nt.hydrateRoot=function(e,t,n){if(!Ec(e))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",a=Vp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Wp(t,null,e,1,n!=null?n:null,s,!1,l,a),e[dn]=t.current,zs(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Io(t)};Nt.render=function(e,t,n){if(!Lo(t))throw Error(R(200));return Oo(null,e,t,!1,n)};Nt.unmountComponentAtNode=function(e){if(!Lo(e))throw Error(R(40));return e._reactRootContainer?(tr(function(){Oo(null,null,e,!1,function(){e._reactRootContainer=null,e[dn]=null})}),!0):!1};Nt.unstable_batchedUpdates=wc;Nt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Lo(n))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return Oo(e,t,n,!1,r)};Nt.version="18.3.1-next-f1338f8080-20240426";function Xp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xp)}catch(e){console.error(e)}}Xp(),Vd.exports=Nt;var jr=Vd.exports,Qu=jr;Ia.createRoot=Qu.createRoot,Ia.hydrateRoot=Qu.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Us(){return Us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Us.apply(this,arguments)}var Mn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Mn||(Mn={}));const Gu="popstate";function Ng(e){e===void 0&&(e={});function t(s,l){let{pathname:a="/",search:i="",hash:c=""}=sr(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Mi("",{pathname:a,search:i,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(s,l){let a=s.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");i=u===-1?c:c.slice(0,u)}return i+"#"+(typeof l=="string"?l:Kp(l))}function r(s,l){Ao(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return Eg(t,n,r,e)}function Be(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function Ao(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Cg(){return Math.random().toString(36).substr(2,8)}function Ju(e,t){return{usr:e.state,key:e.key,idx:t}}function Mi(e,t,n,r){return n===void 0&&(n=null),Us({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?sr(t):t,{state:n,key:t&&t.key||r||Cg()})}function Kp(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function sr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Eg(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,a=s.history,i=Mn.Pop,c=null,u=f();u==null&&(u=0,a.replaceState(Us({},a.state,{idx:u}),""));function f(){return(a.state||{idx:null}).idx}function p(){i=Mn.Pop;let w=f(),x=w==null?null:w-u;u=w,c&&c({action:i,location:v.location,delta:x})}function h(w,x){i=Mn.Push;let m=Mi(v.location,w,x);n&&n(m,w),u=f()+1;let g=Ju(m,u),S=v.createHref(m);try{a.pushState(g,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}l&&c&&c({action:i,location:v.location,delta:1})}function y(w,x){i=Mn.Replace;let m=Mi(v.location,w,x);n&&n(m,w),u=f();let g=Ju(m,u),S=v.createHref(m);a.replaceState(g,"",S),l&&c&&c({action:i,location:v.location,delta:0})}function b(w){let x=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof w=="string"?w:Kp(w);return m=m.replace(/ $/,"%20"),Be(x,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,x)}let v={get action(){return i},get location(){return e(s,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Gu,p),c=w,()=>{s.removeEventListener(Gu,p),c=null}},createHref(w){return t(s,w)},createURL:b,encodeLocation(w){let x=b(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:y,go(w){return a.go(w)}};return v}var qu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(qu||(qu={}));function Mg(e,t,n){return n===void 0&&(n="/"),_g(e,t,n)}function _g(e,t,n,r){let s=typeof t=="string"?sr(t):t,l=Gp(s.pathname||"/",n);if(l==null)return null;let a=Yp(e);Tg(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let u=Ug(l);i=$g(a[c],u)}return i}function Yp(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,a,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:a,route:l};c.relativePath.startsWith("/")&&(Be(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Gn([r,c.relativePath]),f=n.concat(c);l.children&&l.children.length>0&&(Be(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Yp(l.children,t,f,u)),!(l.path==null&&!l.index)&&t.push({path:u,score:Og(u,l.index),routesMeta:f})};return e.forEach((l,a)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))s(l,a);else for(let c of Qp(l.path))s(l,a,c)}),t}function Qp(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let a=Qp(r.join("/")),i=[];return i.push(...a.map(c=>c===""?l:[l,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Tg(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Ag(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Dg=/^:[\w-]+$/,Rg=3,zg=2,Pg=1,Ig=10,Lg=-2,Zu=e=>e==="*";function Og(e,t){let n=e.split("/"),r=n.length;return n.some(Zu)&&(r+=Lg),t&&(r+=zg),n.filter(s=>!Zu(s)).reduce((s,l)=>s+(Dg.test(l)?Rg:l===""?Pg:Ig),r)}function Ag(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function $g(e,t,n){let{routesMeta:r}=e,s={},l="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],u=i===r.length-1,f=l==="/"?t:t.slice(l.length)||"/",p=Fg({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),h=c.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:Gn([l,p.pathname]),pathnameBase:Qg(Gn([l,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(l=Gn([l,p.pathnameBase]))}return a}function Fg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Bg(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],a=l.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((u,f,p)=>{let{paramName:h,isOptional:y}=f;if(h==="*"){let v=i[p]||"";a=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const b=i[p];return y&&!b?u[h]=void 0:u[h]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:a,pattern:e}}function Bg(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ao(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Ug(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ao(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Gp(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const Hg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wg=e=>Hg.test(e);function Vg(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?sr(e):e,l;if(n)if(Wg(n))l=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Ao(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?l=ed(n.substring(1),"/"):l=ed(n,t)}else l=t;return{pathname:l,search:Gg(r),hash:Jg(s)}}function ed(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ca(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xg(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Kg(e,t){let n=Xg(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Yg(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=sr(e):(s=Us({},e),Be(!s.pathname||!s.pathname.includes("?"),Ca("?","pathname","search",s)),Be(!s.pathname||!s.pathname.includes("#"),Ca("#","pathname","hash",s)),Be(!s.search||!s.search.includes("#"),Ca("#","search","hash",s)));let l=e===""||s.pathname==="",a=l?"/":s.pathname,i;if(a==null)i=n;else{let p=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),p-=1;s.pathname=h.join("/")}i=p>=0?t[p]:"/"}let c=Vg(s,i),u=a&&a!=="/"&&a.endsWith("/"),f=(l||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const Gn=e=>e.join("/").replace(/\/\/+/g,"/"),Qg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Gg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Jg=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function qg(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Jp=["post","put","patch","delete"];new Set(Jp);const Zg=["get",...Jp];new Set(Zg);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hs(){return Hs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hs.apply(this,arguments)}const Mc=d.createContext(null),ey=d.createContext(null),$o=d.createContext(null),Fo=d.createContext(null),lr=d.createContext({outlet:null,matches:[],isDataRoute:!1}),qp=d.createContext(null);function Bo(){return d.useContext(Fo)!=null}function _c(){return Bo()||Be(!1),d.useContext(Fo).location}function Zp(e){d.useContext($o).static||d.useLayoutEffect(e)}function $t(){let{isDataRoute:e}=d.useContext(lr);return e?py():ty()}function ty(){Bo()||Be(!1);let e=d.useContext(Mc),{basename:t,future:n,navigator:r}=d.useContext($o),{matches:s}=d.useContext(lr),{pathname:l}=_c(),a=JSON.stringify(Kg(s,n.v7_relativeSplatPath)),i=d.useRef(!1);return Zp(()=>{i.current=!0}),d.useCallback(function(u,f){if(f===void 0&&(f={}),!i.current)return;if(typeof u=="number"){r.go(u);return}let p=Yg(u,JSON.parse(a),l,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Gn([t,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[t,r,a,l,e])}function eh(){let{matches:e}=d.useContext(lr),t=e[e.length-1];return t?t.params:{}}function ny(e,t){return ry(e,t)}function ry(e,t,n,r){Bo()||Be(!1);let{navigator:s}=d.useContext($o),{matches:l}=d.useContext(lr),a=l[l.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=_c(),f;if(t){var p;let w=typeof t=="string"?sr(t):t;c==="/"||(p=w.pathname)!=null&&p.startsWith(c)||Be(!1),f=w}else f=u;let h=f.pathname||"/",y=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");y="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=Mg(e,{pathname:y}),v=iy(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},i,w.params),pathname:Gn([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Gn([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),l,n,r);return t&&v?d.createElement(Fo.Provider,{value:{location:Hs({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Mn.Pop}},v):v}function sy(){let e=fy(),t=qg(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},t),n?d.createElement("pre",{style:s},n):null,null)}const ly=d.createElement(sy,null);class oy extends d.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?d.createElement(lr.Provider,{value:this.props.routeContext},d.createElement(qp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ay(e){let{routeContext:t,match:n,children:r}=e,s=d.useContext(Mc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),d.createElement(lr.Provider,{value:t},r)}function iy(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let f=a.findIndex(p=>p.route.id&&(i==null?void 0:i[p.route.id])!==void 0);f>=0||Be(!1),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=f),p.route.id){let{loaderData:h,errors:y}=n,b=p.route.loader&&h[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||b){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((f,p,h)=>{let y,b=!1,v=null,w=null;n&&(y=i&&p.route.id?i[p.route.id]:void 0,v=p.route.errorElement||ly,c&&(u<0&&h===0?(hy("route-fallback"),b=!0,w=null):u===h&&(b=!0,w=p.route.hydrateFallbackElement||null)));let x=t.concat(a.slice(0,h+1)),m=()=>{let g;return y?g=v:b?g=w:p.route.Component?g=d.createElement(p.route.Component,null):p.route.element?g=p.route.element:g=f,d.createElement(ay,{match:p,routeContext:{outlet:f,matches:x,isDataRoute:n!=null},children:g})};return n&&(p.route.ErrorBoundary||p.route.errorElement||h===0)?d.createElement(oy,{location:n.location,revalidation:n.revalidation,component:v,error:y,children:m(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):m()},null)}var th=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(th||{}),nh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(nh||{});function cy(e){let t=d.useContext(Mc);return t||Be(!1),t}function uy(e){let t=d.useContext(ey);return t||Be(!1),t}function dy(e){let t=d.useContext(lr);return t||Be(!1),t}function rh(e){let t=dy(),n=t.matches[t.matches.length-1];return n.route.id||Be(!1),n.route.id}function fy(){var e;let t=d.useContext(qp),n=uy(),r=rh();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function py(){let{router:e}=cy(th.UseNavigateStable),t=rh(nh.UseNavigateStable),n=d.useRef(!1);return Zp(()=>{n.current=!0}),d.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Hs({fromRouteId:t},l)))},[e,t])}const td={};function hy(e,t,n){td[e]||(td[e]=!0)}function my(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function lt(e){Be(!1)}function xy(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Mn.Pop,navigator:l,static:a=!1,future:i}=e;Bo()&&Be(!1);let c=t.replace(/^\/*/,"/"),u=d.useMemo(()=>({basename:c,navigator:l,static:a,future:Hs({v7_relativeSplatPath:!1},i)}),[c,i,l,a]);typeof r=="string"&&(r=sr(r));let{pathname:f="/",search:p="",hash:h="",state:y=null,key:b="default"}=r,v=d.useMemo(()=>{let w=Gp(f,c);return w==null?null:{location:{pathname:w,search:p,hash:h,state:y,key:b},navigationType:s}},[c,f,p,h,y,b,s]);return v==null?null:d.createElement($o.Provider,{value:u},d.createElement(Fo.Provider,{children:n,value:v}))}function gy(e){let{children:t,location:n}=e;return ny(_i(t),n)}new Promise(()=>{});function _i(e,t){t===void 0&&(t=[]);let n=[];return d.Children.forEach(e,(r,s)=>{if(!d.isValidElement(r))return;let l=[...t,s];if(r.type===d.Fragment){n.push.apply(n,_i(r.props.children,l));return}r.type!==lt&&Be(!1),!r.props.index||!r.props.children||Be(!1);let a={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=_i(r.props.children,l)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const yy="6";try{window.__reactRouterVersion=yy}catch(e){}const vy="startTransition",nd=hm[vy];function wy(e){let{basename:t,children:n,future:r,window:s}=e,l=d.useRef();l.current==null&&(l.current=Ng({window:s,v5Compat:!0}));let a=l.current,[i,c]=d.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},f=d.useCallback(p=>{u&&nd?nd(()=>c(p)):c(p)},[c,u]);return d.useLayoutEffect(()=>a.listen(f),[a,f]),d.useEffect(()=>my(r),[r]),d.createElement(xy,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}var rd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(rd||(rd={}));var sd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(sd||(sd={}));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sh=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ky={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:a,...i},c)=>d.createElement("svg",{ref:c,...ky,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:sh("lucide",s),...i},[...a.map(([u,f])=>d.createElement(u,f)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=(e,t)=>{const n=d.forwardRef(({className:r,...s},l)=>d.createElement(jy,{ref:l,iconNode:t,className:sh(`lucide-${by(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=ae("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=ae("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=ae("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=ae("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=ae("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=ae("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=ae("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=ae("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=ae("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=ae("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=ae("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=ae("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=ae("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=ae("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=ae("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=ae("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=ae("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=ae("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=ae("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=ae("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=ae("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=ae("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=ae("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=ae("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=ae("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=ae("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=ae("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=ae("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ch="";async function ad(){let e=localStorage.getItem("whisper_token");if(!e){const n=await(await fetch(`${ch}/api/auth/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"chuli2026"})})).json();if(n.success&&n.token)e=n.token,localStorage.setItem("whisper_token",e);else throw new Error("")}return e}async function $(e,t={}){let n=await ad();const r=`${ch}${e}`,s=a=>fetch(r,{...t,cache:"no-store",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`,...t.headers},body:t.body?JSON.stringify(t.body):void 0});let l=await s(n);if(l.status===401&&(localStorage.removeItem("whisper_token"),n=await ad(),l=await s(n)),l.status===204)return null;if(!l.ok){const a=await l.json().catch(()=>({}));throw new Error(a.detail||` (${l.status})`)}return l.json()}const Uy="WhisperMiniDB",Hy=1,Br="avatars",uh=()=>new Promise((e,t)=>{const n=indexedDB.open(Uy,Hy);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(Br)||r.createObjectStore(Br,{keyPath:"key"})}}),Ti=async(e,t)=>{const n=await uh();return new Promise((r,s)=>{const l=n.transaction([Br],"readwrite");l.objectStore(Br).put({key:e,base64:t}),l.oncomplete=()=>r(),l.onerror=()=>s(l.error)})},Yr=async e=>{const t=await uh();return new Promise((n,r)=>{const l=t.transaction([Br],"readonly").objectStore(Br).get(e);l.onsuccess=()=>{var a;return n(((a=l.result)==null?void 0:a.base64)||null)},l.onerror=()=>r(l.error)})},dt={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function ir({icon:e,label:t,desc:n,disabled:r,onClick:s,badge:l}){const[a,i]=d.useState(!1),c=()=>!r&&i(!0),u=()=>{i(!1),r||s==null||s()};return o.jsxs("button",{className:"flex flex-col items-start rounded-[18px] gap-2 text-left",style:{padding:"16px 14px",background:dt.bg,boxShadow:a?"inset 3px 3px 8px rgba(174,176,182,0.5), inset -3px -3px 8px #ffffff":"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff",opacity:r?.4:1,transform:a?"scale(0.97)":"scale(1)",transition:"transform 0.1s, box-shadow 0.1s",cursor:r?"default":"pointer",WebkitTapHighlightColor:"transparent"},disabled:r,onTouchStart:c,onTouchEnd:u,onMouseDown:c,onMouseUp:u,onMouseLeave:()=>i(!1),children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-[12px]",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))"},children:e}),l&&o.jsx("div",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full",style:{background:"#ef4444",border:"2px solid var(--bg)"}})]}),o.jsxs("div",{className:"pl-1",children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:dt.text},children:t}),o.jsx("div",{className:"mt-0.5 text-[10px] leading-snug",style:{color:dt.textMuted},children:n})]})]})}function id({children:e}){return o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-[3px]",style:{color:dt.textMuted},children:e})}function Wy(){const e=$t(),[t,n]=d.useState(()=>{try{return JSON.parse(localStorage.getItem("whisper_profile")||"null")}catch(u){return null}}),[r,s]=d.useState(null),[l,a]=d.useState(!1);d.useEffect(()=>{$("/api/user/profile").then(u=>{n(u),localStorage.setItem("whisper_profile",JSON.stringify(u))}).catch(()=>{}),Yr("user-avatar").then(u=>{u&&s(u)}).catch(function(){}),$("/api/diary/unread-count").then(u=>{u.count>0&&a(!0)}).catch(()=>{})},[]);const i=(t==null?void 0:t.nickname)||"",c=(t==null?void 0:t.background_url)||"";return o.jsxs("div",{className:"flex flex-col overflow-y-auto",style:{background:dt.bg,height:"100%",paddingBottom:16},children:[o.jsxs("div",{className:"flex flex-col px-5",style:{paddingTop:"max(12px, env(safe-area-inset-top))"},children:[o.jsx("h1",{className:"mb-4 text-center text-[17px] font-medium",style:{color:dt.textMuted,letterSpacing:"4px"},children:"W H I S P E R"}),o.jsxs("button",{className:"mb-5 flex w-full items-center gap-4 rounded-[20px] p-5 text-left",style:{background:dt.bg,boxShadow:"6px 6px 14px rgba(174,176,182,0.5), -6px -6px 14px #ffffff"},onClick:()=>e("/profile"),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:52,height:52,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:dt.bg},children:r?o.jsx("img",{src:r,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:22},children:""})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"text-[17px] font-bold truncate",style:{color:dt.text},children:["@",i]}),o.jsxs("div",{className:"mt-0.5 text-[11px] italic",style:{color:dt.textMuted},children:['"',c,'"']})]}),o.jsx($r,{size:16,style:{color:dt.textMuted,flexShrink:0}})]}),o.jsx(id,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(ir,{icon:o.jsx(Ny,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/world-books")}),o.jsx(ir,{icon:o.jsx(Cy,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/memories")}),o.jsx(ir,{icon:o.jsx(lh,{size:18,color:"white"}),label:"",desc:"Core Blocks",onClick:()=>e("/assistants")}),o.jsx(ir,{icon:o.jsx($y,{size:18,color:"white"}),label:"",desc:"API",onClick:()=>e("/settings")})]}),o.jsx(id,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(ir,{icon:o.jsx(Sy,{size:18,color:"white"}),label:"",desc:"",badge:l,onClick:()=>e("/diary")}),o.jsx(ir,{icon:o.jsx(Fy,{size:18,color:"white"}),label:"",desc:"",disabled:!0})]}),o.jsx("button",{className:"flex w-full items-center justify-center rounded-[18px] py-4",style:{background:dt.bg,boxShadow:"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff"},onClick:()=>e("/cot"),children:o.jsx(Ry,{size:32,fill:dt.accent,style:{color:dt.accent,animation:"heartbeat 2s ease-in-out infinite"}})})]}),o.jsx("style",{children:`
        @keyframes heartbeat {
          0%, 100% { transform: scale(1); }
          15% { transform: scale(1.15); }
          30% { transform: scale(1); }
          45% { transform: scale(1.1); }
          60% { transform: scale(1); }
        }
      `})]})}function Vy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const Wo=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function Qr(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Dc(e){return"nodeType"in e}function ut(e){var t,n;return e?Qr(e)?e:Dc(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Rc(e){const{Document:t}=ut(e);return e instanceof t}function tl(e){return Qr(e)?!1:e instanceof ut(e).HTMLElement}function dh(e){return e instanceof ut(e).SVGElement}function Gr(e){return e?Qr(e)?e.document:Dc(e)?Rc(e)?e:tl(e)||dh(e)?e.ownerDocument:document:document:document}const Kt=Wo?d.useLayoutEffect:d.useEffect;function Vo(e){const t=d.useRef(e);return Kt(()=>{t.current=e}),d.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function Xy(){const e=d.useRef(null),t=d.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=d.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Vs(e,t){t===void 0&&(t=[e]);const n=d.useRef(e);return Kt(()=>{n.current!==e&&(n.current=e)},t),n}function nl(e,t){const n=d.useRef();return d.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function mo(e){const t=Vo(e),n=d.useRef(null),r=d.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function xo(e){const t=d.useRef();return d.useEffect(()=>{t.current=e},[e]),t.current}let Ea={};function rl(e,t){return d.useMemo(()=>{if(t)return t;const n=Ea[e]==null?0:Ea[e]+1;return Ea[e]=n,e+"-"+n},[e,t])}function fh(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const i=Object.entries(a);for(const[c,u]of i){const f=l[c];f!=null&&(l[c]=f+e*u)}return l},{...t})}}const Dr=fh(1),go=fh(-1);function Ky(e){return"clientX"in e&&"clientY"in e}function Xo(e){if(!e)return!1;const{KeyboardEvent:t}=ut(e.target);return t&&e instanceof t}function Yy(e){if(!e)return!1;const{TouchEvent:t}=ut(e.target);return t&&e instanceof t}function yo(e){if(Yy(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Ky(e)?{x:e.clientX,y:e.clientY}:null}const hn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[hn.Translate.toString(e),hn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),cd="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Qy(e){return e.matches(cd)?e:e.querySelector(cd)}const Gy={display:"none"};function Jy(e){let{id:t,value:n}=e;return Se.createElement("div",{id:t,style:Gy},n)}function qy(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Se.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Zy(){const[e,t]=d.useState("");return{announce:d.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const ph=d.createContext(null);function ev(e){const t=d.useContext(ph);d.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function tv(){const[e]=d.useState(()=>new Set),t=d.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[d.useCallback(r=>{let{type:s,event:l}=r;e.forEach(a=>{var i;return(i=a[s])==null?void 0:i.call(a,l)})},[e]),t]}const nv={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},rv={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function sv(e){let{announcements:t=rv,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=nv}=e;const{announce:l,announcement:a}=Zy(),i=rl("DndLiveRegion"),[c,u]=d.useState(!1);if(d.useEffect(()=>{u(!0)},[]),ev(d.useMemo(()=>({onDragStart(p){let{active:h}=p;l(t.onDragStart({active:h}))},onDragMove(p){let{active:h,over:y}=p;t.onDragMove&&l(t.onDragMove({active:h,over:y}))},onDragOver(p){let{active:h,over:y}=p;l(t.onDragOver({active:h,over:y}))},onDragEnd(p){let{active:h,over:y}=p;l(t.onDragEnd({active:h,over:y}))},onDragCancel(p){let{active:h,over:y}=p;l(t.onDragCancel({active:h,over:y}))}}),[l,t])),!c)return null;const f=Se.createElement(Se.Fragment,null,Se.createElement(Jy,{id:r,value:s.draggable}),Se.createElement(qy,{id:i,announcement:a}));return n?jr.createPortal(f,n):f}var $e;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})($e||($e={}));function vo(){}function wo(e,t){return d.useMemo(()=>({sensor:e,options:t!=null?t:{}}),[e,t])}function hh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Yt=Object.freeze({x:0,y:0});function lv(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ov(e,t){const n=yo(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function av(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function iv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function cv(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function ud(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const mh=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=ud(t,t.left,t.top),l=[];for(const a of r){const{id:i}=a,c=n.get(i);if(c){const u=lv(ud(c),s);l.push({id:i,data:{droppableContainer:a,value:u}})}}return l.sort(av)};function uv(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height),a=s-r,i=l-n;if(r<s&&n<l){const c=t.width*t.height,u=e.width*e.height,f=a*i,p=f/(c+u-f);return Number(p.toFixed(4))}return 0}const dv=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const l of r){const{id:a}=l,i=n.get(a);if(i){const c=uv(i,t);c>0&&s.push({id:a,data:{droppableContainer:l,value:c}})}}return s.sort(iv)};function fv(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function xh(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Yt}function pv(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,i)=>({...a,top:a.top+e*i.y,bottom:a.bottom+e*i.y,left:a.left+e*i.x,right:a.right+e*i.x}),{...n})}}const hv=pv(1);function gh(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function mv(e,t,n){const r=gh(t);if(!r)return e;const{scaleX:s,scaleY:l,x:a,y:i}=r,c=e.left-a-(1-s)*parseFloat(n),u=e.top-i-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),f=s?e.width/s:e.width,p=l?e.height/l:e.height;return{width:f,height:p,top:u,right:c+f,bottom:u+p,left:c}}const xv={ignoreTransform:!1};function Jr(e,t){t===void 0&&(t=xv);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:f}=ut(e).getComputedStyle(e);u&&(n=mv(n,u,f))}const{top:r,left:s,width:l,height:a,bottom:i,right:c}=n;return{top:r,left:s,width:l,height:a,bottom:i,right:c}}function dd(e){return Jr(e,{ignoreTransform:!0})}function gv(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function yv(e,t){return t===void 0&&(t=ut(e).getComputedStyle(e)),t.position==="fixed"}function vv(e,t){t===void 0&&(t=ut(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=t[s];return typeof l=="string"?n.test(l):!1})}function zc(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Rc(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!tl(s)||dh(s)||n.includes(s))return n;const l=ut(e).getComputedStyle(s);return s!==e&&vv(s,l)&&n.push(s),yv(s,l)?n:r(s.parentNode)}return e?r(e):n}function yh(e){const[t]=zc(e,1);return t!=null?t:null}function Ma(e){return!Wo||!e?null:Qr(e)?e:Dc(e)?Rc(e)||e===Gr(e).scrollingElement?window:tl(e)?e:null:null}function vh(e){return Qr(e)?e.scrollX:e.scrollLeft}function wh(e){return Qr(e)?e.scrollY:e.scrollTop}function Di(e){return{x:vh(e),y:wh(e)}}var We;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(We||(We={}));function bh(e){return!Wo||!e?!1:e===document.scrollingElement}function kh(e){const t={x:0,y:0},n=bh(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,l=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:i,maxScroll:r,minScroll:t}}const wv={x:.2,y:.2};function bv(e,t,n,r,s){let{top:l,left:a,right:i,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=wv);const{isTop:u,isBottom:f,isLeft:p,isRight:h}=kh(e),y={x:0,y:0},b={x:0,y:0},v={height:t.height*s.y,width:t.width*s.x};return!u&&l<=t.top+v.height?(y.y=We.Backward,b.y=r*Math.abs((t.top+v.height-l)/v.height)):!f&&c>=t.bottom-v.height&&(y.y=We.Forward,b.y=r*Math.abs((t.bottom-v.height-c)/v.height)),!h&&i>=t.right-v.width?(y.x=We.Forward,b.x=r*Math.abs((t.right-v.width-i)/v.width)):!p&&a<=t.left+v.width&&(y.x=We.Backward,b.x=r*Math.abs((t.left+v.width-a)/v.width)),{direction:y,speed:b}}function kv(e){if(e===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function jh(e){return e.reduce((t,n)=>Dr(t,Di(n)),Yt)}function jv(e){return e.reduce((t,n)=>t+vh(n),0)}function Sv(e){return e.reduce((t,n)=>t+wh(n),0)}function Sh(e,t){if(t===void 0&&(t=Jr),!e)return;const{top:n,left:r,bottom:s,right:l}=t(e);yh(e)&&(s<=0||l<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Nv=[["x",["left","right"],jv],["y",["top","bottom"],Sv]];class Pc{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=zc(n),s=jh(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[l,a,i]of Nv)for(const c of a)Object.defineProperty(this,c,{get:()=>{const u=i(r),f=s[l]-u;return this.rect[c]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ks{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Cv(e){const{EventTarget:t}=ut(e);return e instanceof t?e:Gr(e)}function _a(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Rt;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Rt||(Rt={}));function fd(e){e.preventDefault()}function Ev(e){e.stopPropagation()}var he;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(he||(he={}));const Nh={start:[he.Space,he.Enter],cancel:[he.Esc],end:[he.Space,he.Enter,he.Tab]},Mv=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case he.Right:return{...n,x:n.x+25};case he.Left:return{...n,x:n.x-25};case he.Down:return{...n,y:n.y+25};case he.Up:return{...n,y:n.y-25}}};class Ch{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new ks(Gr(n)),this.windowListeners=new ks(ut(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Rt.Resize,this.handleCancel),this.windowListeners.add(Rt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Rt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Sh(r),n(Yt)}handleKeyDown(t){if(Xo(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:l=Nh,coordinateGetter:a=Mv,scrollBehavior:i="smooth"}=s,{code:c}=t;if(l.end.includes(c)){this.handleEnd(t);return}if(l.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=r.current,f=u?{x:u.left,y:u.top}:Yt;this.referenceCoordinates||(this.referenceCoordinates=f);const p=a(t,{active:n,context:r.current,currentCoordinates:f});if(p){const h=go(p,f),y={x:0,y:0},{scrollableAncestors:b}=r.current;for(const v of b){const w=t.code,{isTop:x,isRight:m,isLeft:g,isBottom:S,maxScroll:j,minScroll:N}=kh(v),k=kv(v),C={x:Math.min(w===he.Right?k.right-k.width/2:k.right,Math.max(w===he.Right?k.left:k.left+k.width/2,p.x)),y:Math.min(w===he.Down?k.bottom-k.height/2:k.bottom,Math.max(w===he.Down?k.top:k.top+k.height/2,p.y))},E=w===he.Right&&!m||w===he.Left&&!g,D=w===he.Down&&!S||w===he.Up&&!x;if(E&&C.x!==p.x){const z=v.scrollLeft+h.x,Y=w===he.Right&&z<=j.x||w===he.Left&&z>=N.x;if(Y&&!h.y){v.scrollTo({left:z,behavior:i});return}Y?y.x=v.scrollLeft-z:y.x=w===he.Right?v.scrollLeft-j.x:v.scrollLeft-N.x,y.x&&v.scrollBy({left:-y.x,behavior:i});break}else if(D&&C.y!==p.y){const z=v.scrollTop+h.y,Y=w===he.Down&&z<=j.y||w===he.Up&&z>=N.y;if(Y&&!h.x){v.scrollTo({top:z,behavior:i});return}Y?y.y=v.scrollTop-z:y.y=w===he.Down?v.scrollTop-j.y:v.scrollTop-N.y,y.y&&v.scrollBy({top:-y.y,behavior:i});break}}this.handleMove(t,Dr(go(p,this.referenceCoordinates),y))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ch.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Nh,onActivation:s}=t,{active:l}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const i=l.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function pd(e){return!!(e&&"distance"in e)}function hd(e){return!!(e&&"delay"in e)}class Ic{constructor(t,n,r){var s;r===void 0&&(r=Cv(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:l}=t,{target:a}=l;this.props=t,this.events=n,this.document=Gr(a),this.documentListeners=new ks(this.document),this.listeners=new ks(r),this.windowListeners=new ks(ut(a)),this.initialCoordinates=(s=yo(l))!=null?s:Yt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Rt.Resize,this.handleCancel),this.windowListeners.add(Rt.DragStart,fd),this.windowListeners.add(Rt.VisibilityChange,this.handleCancel),this.windowListeners.add(Rt.ContextMenu,fd),this.documentListeners.add(Rt.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(hd(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(pd(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Rt.Click,Ev,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Rt.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:i}}=l;if(!s)return;const c=(n=yo(t))!=null?n:Yt,u=go(s,c);if(!r&&i){if(pd(i)){if(i.tolerance!=null&&_a(u,i.tolerance))return this.handleCancel();if(_a(u,i.distance))return this.handleStart()}if(hd(i)&&_a(u,i.tolerance))return this.handleCancel();this.handlePending(i,u);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===he.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const _v={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ko extends Ic{constructor(t){const{event:n}=t,r=Gr(n.target);super(t,_v,r)}}Ko.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Tv={move:{name:"mousemove"},end:{name:"mouseup"}};var Ri;(function(e){e[e.RightClick=2]="RightClick"})(Ri||(Ri={}));class Dv extends Ic{constructor(t){super(t,Tv,Gr(t.event.target))}}Dv.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Ri.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ta={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Lc extends Ic{constructor(t){super(t,Ta)}static setup(){return window.addEventListener(Ta.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ta.move.name,t)};function t(){}}}Lc.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var js;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(js||(js={}));var bo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(bo||(bo={}));function Rv(e){let{acceleration:t,activator:n=js.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:i=bo.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:f,delta:p,threshold:h}=e;const y=Pv({delta:p,disabled:!l}),[b,v]=Xy(),w=d.useRef({x:0,y:0}),x=d.useRef({x:0,y:0}),m=d.useMemo(()=>{switch(n){case js.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case js.DraggableRect:return s}},[n,s,c]),g=d.useRef(null),S=d.useCallback(()=>{const N=g.current;if(!N)return;const k=w.current.x*x.current.x,C=w.current.y*x.current.y;N.scrollBy(k,C)},[]),j=d.useMemo(()=>i===bo.TreeOrder?[...u].reverse():u,[i,u]);d.useEffect(()=>{if(!l||!u.length||!m){v();return}for(const N of j){if((r==null?void 0:r(N))===!1)continue;const k=u.indexOf(N),C=f[k];if(!C)continue;const{direction:E,speed:D}=bv(N,C,m,t,h);for(const z of["x","y"])y[z][E[z]]||(D[z]=0,E[z]=0);if(D.x>0||D.y>0){v(),g.current=N,b(S,a),w.current=D,x.current=E;return}}w.current={x:0,y:0},x.current={x:0,y:0},v()},[t,S,r,v,l,a,JSON.stringify(m),JSON.stringify(y),b,u,j,f,JSON.stringify(h)])}const zv={x:{[We.Backward]:!1,[We.Forward]:!1},y:{[We.Backward]:!1,[We.Forward]:!1}};function Pv(e){let{delta:t,disabled:n}=e;const r=xo(t);return nl(s=>{if(n||!r||!s)return zv;const l={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[We.Backward]:s.x[We.Backward]||l.x===-1,[We.Forward]:s.x[We.Forward]||l.x===1},y:{[We.Backward]:s.y[We.Backward]||l.y===-1,[We.Forward]:s.y[We.Forward]||l.y===1}}},[n,t,r])}function Iv(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return nl(s=>{var l;return t==null?null:(l=r!=null?r:s)!=null?l:null},[r,t])}function Lv(e,t){return d.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...l]},[]),[e,t])}var Xs;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Xs||(Xs={}));var zi;(function(e){e.Optimized="optimized"})(zi||(zi={}));const md=new Map;function Ov(e,t){let{dragging:n,dependencies:r,config:s}=t;const[l,a]=d.useState(null),{frequency:i,measure:c,strategy:u}=s,f=d.useRef(e),p=w(),h=Vs(p),y=d.useCallback(function(x){x===void 0&&(x=[]),!h.current&&a(m=>m===null?x:m.concat(x.filter(g=>!m.includes(g))))},[h]),b=d.useRef(null),v=nl(x=>{if(p&&!n)return md;if(!x||x===md||f.current!==e||l!=null){const m=new Map;for(let g of e){if(!g)continue;if(l&&l.length>0&&!l.includes(g.id)&&g.rect.current){m.set(g.id,g.rect.current);continue}const S=g.node.current,j=S?new Pc(c(S),S):null;g.rect.current=j,j&&m.set(g.id,j)}return m}return x},[e,l,n,p,c]);return d.useEffect(()=>{f.current=e},[e]),d.useEffect(()=>{p||y()},[n,p]),d.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),d.useEffect(()=>{p||typeof i!="number"||b.current!==null||(b.current=setTimeout(()=>{y(),b.current=null},i))},[i,p,y,...r]),{droppableRects:v,measureDroppableContainers:y,measuringScheduled:l!=null};function w(){switch(u){case Xs.Always:return!1;case Xs.BeforeDragging:return n;default:return!n}}}function Oc(e,t){return nl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Av(e,t){return Oc(e,t)}function $v(e){let{callback:t,disabled:n}=e;const r=Vo(t),s=d.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:l}=window;return new l(r)},[r,n]);return d.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Yo(e){let{callback:t,disabled:n}=e;const r=Vo(t),s=d.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:l}=window;return new l(r)},[n]);return d.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Fv(e){return new Pc(Jr(e),e)}function xd(e,t,n){t===void 0&&(t=Fv);const[r,s]=d.useState(null);function l(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c!=null?c:n)!=null?u:null}const f=t(e);return JSON.stringify(c)===JSON.stringify(f)?c:f})}const a=$v({callback(c){if(e)for(const u of c){const{type:f,target:p}=u;if(f==="childList"&&p instanceof HTMLElement&&p.contains(e)){l();break}}}}),i=Yo({callback:l});return Kt(()=>{l(),e?(i==null||i.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),a==null||a.disconnect())},[e]),r}function Bv(e){const t=Oc(e);return xh(e,t)}const gd=[];function Uv(e){const t=d.useRef(e),n=nl(r=>e?r&&r!==gd&&e&&t.current&&e.parentNode===t.current.parentNode?r:zc(e):gd,[e]);return d.useEffect(()=>{t.current=e},[e]),n}function Hv(e){const[t,n]=d.useState(null),r=d.useRef(e),s=d.useCallback(l=>{const a=Ma(l.target);a&&n(i=>i?(i.set(a,Di(a)),new Map(i)):null)},[]);return d.useEffect(()=>{const l=r.current;if(e!==l){a(l);const i=e.map(c=>{const u=Ma(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Di(u)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=e}return()=>{a(e),a(l)};function a(i){i.forEach(c=>{const u=Ma(c);u==null||u.removeEventListener("scroll",s)})}},[s,e]),d.useMemo(()=>e.length?t?Array.from(t.values()).reduce((l,a)=>Dr(l,a),Yt):jh(e):Yt,[e,t])}function yd(e,t){t===void 0&&(t=[]);const n=d.useRef(null);return d.useEffect(()=>{n.current=null},t),d.useEffect(()=>{const r=e!==Yt;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?go(e,n.current):Yt}function Wv(e){d.useEffect(()=>{if(!Wo)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Vv(e,t){return d.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:l}=r;return n[s]=a=>{l(a,t)},n},{}),[e,t])}function Eh(e){return d.useMemo(()=>e?gv(e):null,[e])}const vd=[];function Xv(e,t){t===void 0&&(t=Jr);const[n]=e,r=Eh(n?ut(n):null),[s,l]=d.useState(vd);function a(){l(()=>e.length?e.map(c=>bh(c)?r:new Pc(t(c),c)):vd)}const i=Yo({callback:a});return Kt(()=>{i==null||i.disconnect(),a(),e.forEach(c=>i==null?void 0:i.observe(c))},[e]),s}function Mh(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return tl(t)?t:e}function Kv(e){let{measure:t}=e;const[n,r]=d.useState(null),s=d.useCallback(u=>{for(const{target:f}of u)if(tl(f)){r(p=>{const h=t(f);return p?{...p,width:h.width,height:h.height}:h});break}},[t]),l=Yo({callback:s}),a=d.useCallback(u=>{const f=Mh(u);l==null||l.disconnect(),f&&(l==null||l.observe(f)),r(f?t(f):null)},[t,l]),[i,c]=mo(a);return d.useMemo(()=>({nodeRef:i,rect:n,setRef:c}),[n,i,c])}const Yv=[{sensor:Ko,options:{}},{sensor:Ch,options:{}}],Qv={current:{}},Hl={draggable:{measure:dd},droppable:{measure:dd,strategy:Xs.WhileDragging,frequency:zi.Optimized},dragOverlay:{measure:Jr}};class Ss extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Gv={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ss,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:vo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Hl,measureDroppableContainers:vo,windowRect:null,measuringScheduled:!1},_h={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:vo,draggableNodes:new Map,over:null,measureDroppableContainers:vo},sl=d.createContext(_h),Th=d.createContext(Gv);function Jv(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ss}}}function qv(e,t){switch(t.type){case $e.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case $e.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case $e.DragEnd:case $e.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case $e.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Ss(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case $e.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,l=e.droppable.containers.get(n);if(!l||r!==l.key)return e;const a=new Ss(e.droppable.containers);return a.set(n,{...l,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case $e.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const l=new Ss(e.droppable.containers);return l.delete(n),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function Zv(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=d.useContext(sl),l=xo(r),a=xo(n==null?void 0:n.id);return d.useEffect(()=>{if(!t&&!r&&l&&a!=null){if(!Xo(l)||document.activeElement===l.target)return;const i=s.get(a);if(!i)return;const{activatorNode:c,node:u}=i;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[c.current,u.current]){if(!f)continue;const p=Qy(f);if(p){p.focus();break}}})}},[r,t,s,a,l]),null}function Dh(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,l)=>l({transform:s,...r}),n):n}function e1(e){return d.useMemo(()=>({draggable:{...Hl.draggable,...e==null?void 0:e.draggable},droppable:{...Hl.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Hl.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function t1(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const l=d.useRef(!1),{x:a,y:i}=typeof s=="boolean"?{x:s,y:s}:s;Kt(()=>{if(!a&&!i||!t){l.current=!1;return}if(l.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const f=n(u),p=xh(f,r);if(a||(p.x=0),i||(p.y=0),l.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const h=yh(u);h&&h.scrollBy({top:p.y,left:p.x})}},[t,a,i,r,n])}const Qo=d.createContext({...Yt,scaleX:1,scaleY:1});var jn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(jn||(jn={}));const Rh=d.memo(function(t){var n,r,s,l;let{id:a,accessibility:i,autoScroll:c=!0,children:u,sensors:f=Yv,collisionDetection:p=dv,measuring:h,modifiers:y,...b}=t;const v=d.useReducer(qv,void 0,Jv),[w,x]=v,[m,g]=tv(),[S,j]=d.useState(jn.Uninitialized),N=S===jn.Initialized,{draggable:{active:k,nodes:C,translate:E},droppable:{containers:D}}=w,z=k!=null?C.get(k):null,Y=d.useRef({initial:null,translated:null}),_=d.useMemo(()=>{var Ze;return k!=null?{id:k,data:(Ze=z==null?void 0:z.data)!=null?Ze:Qv,rect:Y}:null},[k,z]),V=d.useRef(null),[te,ve]=d.useState(null),[ee,P]=d.useState(null),I=Vs(b,Object.values(b)),H=rl("DndDescribedBy",a),ne=d.useMemo(()=>D.getEnabled(),[D]),L=e1(h),{droppableRects:U,measureDroppableContainers:se,measuringScheduled:le}=Ov(ne,{dragging:N,dependencies:[E.x,E.y],config:L.droppable}),J=Iv(C,k),Q=d.useMemo(()=>ee?yo(ee):null,[ee]),ge=Gh(),pe=Av(J,L.draggable.measure);t1({activeNode:k!=null?C.get(k):null,config:ge.layoutShiftCompensation,initialRect:pe,measure:L.draggable.measure});const q=xd(J,L.draggable.measure,pe),Xe=xd(J?J.parentElement:null),Ke=d.useRef({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:U,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:D,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),gt=D.getNodeFor((n=Ke.current.over)==null?void 0:n.id),ke=Kv({measure:L.dragOverlay.measure}),st=(r=ke.nodeRef.current)!=null?r:J,we=N?(s=ke.rect)!=null?s:q:null,Mt=!!(ke.nodeRef.current&&ke.rect),xn=Bv(Mt?null:q),Z=Eh(st?ut(st):null),ue=Uv(N?gt!=null?gt:J:null),Ce=Xv(ue),De=Dh(y,{transform:{x:E.x-xn.x,y:E.y-xn.y,scaleX:1,scaleY:1},activatorEvent:ee,active:_,activeNodeRect:q,containerNodeRect:Xe,draggingNodeRect:we,over:Ke.current.over,overlayNodeRect:ke.rect,scrollableAncestors:ue,scrollableAncestorRects:Ce,windowRect:Z}),_t=Q?Dr(Q,E):null,Oe=Hv(ue),Un=yd(Oe),M=yd(Oe,[q]),F=Dr(De,Un),X=we?hv(we,De):null,qe=_&&X?p({active:_,collisionRect:X,droppableRects:U,droppableContainers:ne,pointerCoordinates:_t}):null,O=cv(qe,"id"),[de,ie]=d.useState(null),Re=Mt?De:Dr(De,M),Tt=fv(Re,(l=de==null?void 0:de.rect)!=null?l:null,q),nn=d.useRef(null),Jo=d.useCallback((Ze,yt)=>{let{sensor:vt,options:gn}=yt;if(V.current==null)return;const Dt=C.get(V.current);if(!Dt)return;const wt=Ze.nativeEvent,Qt=new vt({active:V.current,activeNode:Dt,event:wt,options:gn,context:Ke,onAbort(Ye){if(!C.get(Ye))return;const{onDragAbort:Gt}=I.current,rn={id:Ye};Gt==null||Gt(rn),m({type:"onDragAbort",event:rn})},onPending(Ye,yn,Gt,rn){if(!C.get(Ye))return;const{onDragPending:Zr}=I.current,vn={id:Ye,constraint:yn,initialCoordinates:Gt,offset:rn};Zr==null||Zr(vn),m({type:"onDragPending",event:vn})},onStart(Ye){const yn=V.current;if(yn==null)return;const Gt=C.get(yn);if(!Gt)return;const{onDragStart:rn}=I.current,qr={activatorEvent:wt,active:{id:yn,data:Gt.data,rect:Y}};jr.unstable_batchedUpdates(()=>{rn==null||rn(qr),j(jn.Initializing),x({type:$e.DragStart,initialCoordinates:Ye,active:yn}),m({type:"onDragStart",event:qr}),ve(nn.current),P(wt)})},onMove(Ye){x({type:$e.DragMove,coordinates:Ye})},onEnd:or($e.DragEnd),onCancel:or($e.DragCancel)});nn.current=Qt;function or(Ye){return async function(){const{active:Gt,collisions:rn,over:qr,scrollAdjustedTranslate:Zr}=Ke.current;let vn=null;if(Gt&&Zr){const{cancelDrop:es}=I.current;vn={activatorEvent:wt,active:Gt,collisions:rn,delta:Zr,over:qr},Ye===$e.DragEnd&&typeof es=="function"&&await Promise.resolve(es(vn))&&(Ye=$e.DragCancel)}V.current=null,jr.unstable_batchedUpdates(()=>{x({type:Ye}),j(jn.Uninitialized),ie(null),ve(null),P(null),nn.current=null;const es=Ye===$e.DragEnd?"onDragEnd":"onDragCancel";if(vn){const Zo=I.current[es];Zo==null||Zo(vn),m({type:es,event:vn})}})}}},[C]),qo=d.useCallback((Ze,yt)=>(vt,gn)=>{const Dt=vt.nativeEvent,wt=C.get(gn);if(V.current!==null||!wt||Dt.dndKit||Dt.defaultPrevented)return;const Qt={active:wt};Ze(vt,yt.options,Qt)===!0&&(Dt.dndKit={capturedBy:yt.sensor},V.current=gn,Jo(vt,yt))},[C,Jo]),Fc=Lv(f,qo);Wv(f),Kt(()=>{q&&S===jn.Initializing&&j(jn.Initialized)},[q,S]),d.useEffect(()=>{const{onDragMove:Ze}=I.current,{active:yt,activatorEvent:vt,collisions:gn,over:Dt}=Ke.current;if(!yt||!vt)return;const wt={active:yt,activatorEvent:vt,collisions:gn,delta:{x:F.x,y:F.y},over:Dt};jr.unstable_batchedUpdates(()=>{Ze==null||Ze(wt),m({type:"onDragMove",event:wt})})},[F.x,F.y]),d.useEffect(()=>{const{active:Ze,activatorEvent:yt,collisions:vt,droppableContainers:gn,scrollAdjustedTranslate:Dt}=Ke.current;if(!Ze||V.current==null||!yt||!Dt)return;const{onDragOver:wt}=I.current,Qt=gn.get(O),or=Qt&&Qt.rect.current?{id:Qt.id,rect:Qt.rect.current,data:Qt.data,disabled:Qt.disabled}:null,Ye={active:Ze,activatorEvent:yt,collisions:vt,delta:{x:Dt.x,y:Dt.y},over:or};jr.unstable_batchedUpdates(()=>{ie(or),wt==null||wt(Ye),m({type:"onDragOver",event:Ye})})},[O]),Kt(()=>{Ke.current={activatorEvent:ee,active:_,activeNode:J,collisionRect:X,collisions:qe,droppableRects:U,draggableNodes:C,draggingNode:st,draggingNodeRect:we,droppableContainers:D,over:de,scrollableAncestors:ue,scrollAdjustedTranslate:F},Y.current={initial:we,translated:X}},[_,J,qe,X,C,st,we,U,D,de,ue,F]),Rv({...ge,delta:E,draggingRect:X,pointerCoordinates:_t,scrollableAncestors:ue,scrollableAncestorRects:Ce});const Yh=d.useMemo(()=>({active:_,activeNode:J,activeNodeRect:q,activatorEvent:ee,collisions:qe,containerNodeRect:Xe,dragOverlay:ke,draggableNodes:C,droppableContainers:D,droppableRects:U,over:de,measureDroppableContainers:se,scrollableAncestors:ue,scrollableAncestorRects:Ce,measuringConfiguration:L,measuringScheduled:le,windowRect:Z}),[_,J,q,ee,qe,Xe,ke,C,D,U,de,se,ue,Ce,L,le,Z]),Qh=d.useMemo(()=>({activatorEvent:ee,activators:Fc,active:_,activeNodeRect:q,ariaDescribedById:{draggable:H},dispatch:x,draggableNodes:C,over:de,measureDroppableContainers:se}),[ee,Fc,_,q,x,H,C,de,se]);return Se.createElement(ph.Provider,{value:g},Se.createElement(sl.Provider,{value:Qh},Se.createElement(Th.Provider,{value:Yh},Se.createElement(Qo.Provider,{value:Tt},u)),Se.createElement(Zv,{disabled:(i==null?void 0:i.restoreFocus)===!1})),Se.createElement(sv,{...i,hiddenTextDescribedById:H}));function Gh(){const Ze=(te==null?void 0:te.autoScrollEnabled)===!1,yt=typeof c=="object"?c.enabled===!1:c===!1,vt=N&&!Ze&&!yt;return typeof c=="object"?{...c,enabled:vt}:{enabled:vt}}}),n1=d.createContext(null),wd="button",r1="Draggable";function s1(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const l=rl(r1),{activators:a,activatorEvent:i,active:c,activeNodeRect:u,ariaDescribedById:f,draggableNodes:p,over:h}=d.useContext(sl),{role:y=wd,roleDescription:b="draggable",tabIndex:v=0}=s!=null?s:{},w=(c==null?void 0:c.id)===t,x=d.useContext(w?Qo:n1),[m,g]=mo(),[S,j]=mo(),N=Vv(a,t),k=Vs(n);Kt(()=>(p.set(t,{id:t,key:l,node:m,activatorNode:S,data:k}),()=>{const E=p.get(t);E&&E.key===l&&p.delete(t)}),[p,t]);const C=d.useMemo(()=>({role:y,tabIndex:v,"aria-disabled":r,"aria-pressed":w&&y===wd?!0:void 0,"aria-roledescription":b,"aria-describedby":f.draggable}),[r,y,v,w,b,f.draggable]);return{active:c,activatorEvent:i,activeNodeRect:u,attributes:C,isDragging:w,listeners:r?void 0:N,node:m,over:h,setNodeRef:g,setActivatorNodeRef:j,transform:x}}function zh(){return d.useContext(Th)}const l1="Droppable",o1={timeout:25};function a1(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const l=rl(l1),{active:a,dispatch:i,over:c,measureDroppableContainers:u}=d.useContext(sl),f=d.useRef({disabled:n}),p=d.useRef(!1),h=d.useRef(null),y=d.useRef(null),{disabled:b,updateMeasurementsFor:v,timeout:w}={...o1,...s},x=Vs(v!=null?v:r),m=d.useCallback(()=>{if(!p.current){p.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),y.current=null},w)},[w]),g=Yo({callback:m,disabled:b||!a}),S=d.useCallback((C,E)=>{g&&(E&&(g.unobserve(E),p.current=!1),C&&g.observe(C))},[g]),[j,N]=mo(S),k=Vs(t);return d.useEffect(()=>{!g||!j.current||(g.disconnect(),p.current=!1,g.observe(j.current))},[j,g]),d.useEffect(()=>(i({type:$e.RegisterDroppable,element:{id:r,key:l,disabled:n,node:j,rect:h,data:k}}),()=>i({type:$e.UnregisterDroppable,key:l,id:r})),[r]),d.useEffect(()=>{n!==f.current.disabled&&(i({type:$e.SetDroppableDisabled,id:r,key:l,disabled:n}),f.current.disabled=n)},[r,l,n,i]),{active:a,rect:h,isOver:(c==null?void 0:c.id)===r,node:j,over:c,setNodeRef:N}}function i1(e){let{animation:t,children:n}=e;const[r,s]=d.useState(null),[l,a]=d.useState(null),i=xo(n);return!n&&!r&&i&&s(i),Kt(()=>{if(!l)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(t(u,l)).then(()=>{s(null)})},[t,r,l]),Se.createElement(Se.Fragment,null,n,r?d.cloneElement(r,{ref:a}):null)}const c1={x:0,y:0,scaleX:1,scaleY:1};function u1(e){let{children:t}=e;return Se.createElement(sl.Provider,{value:_h},Se.createElement(Qo.Provider,{value:c1},t))}const d1={position:"fixed",touchAction:"none"},f1=e=>Xo(e)?"transform 250ms ease":void 0,p1=d.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:l,className:a,rect:i,style:c,transform:u,transition:f=f1}=e;if(!i)return null;const p=s?u:{...u,scaleX:1,scaleY:1},h={...d1,width:i.width,height:i.height,top:i.top,left:i.left,transform:hn.Transform.toString(p),transformOrigin:s&&r?ov(r,i):void 0,transition:typeof f=="function"?f(r):f,...c};return Se.createElement(n,{className:a,style:h,ref:t},l)}),h1=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:l,className:a}=e;if(l!=null&&l.active)for(const[i,c]of Object.entries(l.active))c!==void 0&&(s[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,c));if(l!=null&&l.dragOverlay)for(const[i,c]of Object.entries(l.dragOverlay))c!==void 0&&r.node.style.setProperty(i,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);a!=null&&a.active&&n.node.classList.remove(a.active)}},m1=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:hn.Transform.toString(t)},{transform:hn.Transform.toString(n)}]},x1={duration:250,easing:"ease",keyframes:m1,sideEffects:h1({styles:{active:{opacity:"0"}}})};function g1(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return Vo((l,a)=>{if(t===null)return;const i=n.get(l);if(!i)return;const c=i.node.current;if(!c)return;const u=Mh(a);if(!u)return;const{transform:f}=ut(a).getComputedStyle(a),p=gh(f);if(!p)return;const h=typeof t=="function"?t:y1(t);return Sh(c,s.draggable.measure),h({active:{id:l,data:i.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:p})})}function y1(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...x1,...e};return l=>{let{active:a,dragOverlay:i,transform:c,...u}=l;if(!t)return;const f={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},p={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/i.rect.height:1},h={x:c.x-f.x,y:c.y-f.y,...p},y=s({...u,active:a,dragOverlay:i,transform:{initial:c,final:h}}),[b]=y,v=y[y.length-1];if(JSON.stringify(b)===JSON.stringify(v))return;const w=r==null?void 0:r({active:a,dragOverlay:i,...u}),x=i.node.animate(y,{duration:t,easing:n,fill:"forwards"});return new Promise(m=>{x.onfinish=()=>{w==null||w(),m()}})}}let bd=0;function v1(e){return d.useMemo(()=>{if(e!=null)return bd++,bd},[e])}const Ph=Se.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:l,modifiers:a,wrapperElement:i="div",className:c,zIndex:u=999}=e;const{activatorEvent:f,active:p,activeNodeRect:h,containerNodeRect:y,draggableNodes:b,droppableContainers:v,dragOverlay:w,over:x,measuringConfiguration:m,scrollableAncestors:g,scrollableAncestorRects:S,windowRect:j}=zh(),N=d.useContext(Qo),k=v1(p==null?void 0:p.id),C=Dh(a,{activatorEvent:f,active:p,activeNodeRect:h,containerNodeRect:y,draggingNodeRect:w.rect,over:x,overlayNodeRect:w.rect,scrollableAncestors:g,scrollableAncestorRects:S,transform:N,windowRect:j}),E=Oc(h),D=g1({config:r,draggableNodes:b,droppableContainers:v,measuringConfiguration:m}),z=E?w.setRef:void 0;return Se.createElement(u1,null,Se.createElement(i1,{animation:D},p&&k?Se.createElement(p1,{key:k,id:p.id,ref:z,as:i,activatorEvent:f,adjustScale:t,className:c,transition:l,rect:E,style:{zIndex:u,...s},transform:C},n):null))});function Go(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function w1(e,t){return e.reduce((n,r,s)=>{const l=t.get(r);return l&&(n[s]=l),n},Array(e.length))}function kl(e){return e!==null&&e>=0}function b1(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function k1(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Ih=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const l=Go(t,r,n),a=t[s],i=l[s];return!i||!a?null:{x:i.left-a.left,y:i.top-a.top,scaleX:i.width/a.width,scaleY:i.height/a.height}},jl={scaleX:1,scaleY:1},Lh=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:l,overIndex:a}=e;const i=(t=l[n])!=null?t:r;if(!i)return null;if(s===n){const u=l[a];return u?{x:0,y:n<a?u.top+u.height-(i.top+i.height):u.top-i.top,...jl}:null}const c=j1(l,s,n);return s>n&&s<=a?{x:0,y:-i.height-c,...jl}:s<n&&s>=a?{x:0,y:i.height+c,...jl}:{x:0,y:0,...jl}};function j1(e,t,n){const r=e[t],s=e[t-1],l=e[t+1];return r?n<t?s?r.top-(s.top+s.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Oh="Sortable",Ah=Se.createContext({activeIndex:-1,containerId:Oh,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ih,disabled:{draggable:!1,droppable:!1}});function $h(e){let{children:t,id:n,items:r,strategy:s=Ih,disabled:l=!1}=e;const{active:a,dragOverlay:i,droppableRects:c,over:u,measureDroppableContainers:f}=zh(),p=rl(Oh,n),h=i.rect!==null,y=d.useMemo(()=>r.map(N=>typeof N=="object"&&"id"in N?N.id:N),[r]),b=a!=null,v=a?y.indexOf(a.id):-1,w=u?y.indexOf(u.id):-1,x=d.useRef(y),m=!b1(y,x.current),g=w!==-1&&v===-1||m,S=k1(l);Kt(()=>{m&&b&&f(y)},[m,y,b,f]),d.useEffect(()=>{x.current=y},[y]);const j=d.useMemo(()=>({activeIndex:v,containerId:p,disabled:S,disableTransforms:g,items:y,overIndex:w,useDragOverlay:h,sortedRects:w1(y,c),strategy:s}),[v,p,S.draggable,S.droppable,g,y,w,c,h,s]);return Se.createElement(Ah.Provider,{value:j},t)}const S1=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return Go(n,r,s).indexOf(t)},N1=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:l,newIndex:a,previousItems:i,previousContainerId:c,transition:u}=e;return!u||!r||i!==l&&s===a?!1:n?!0:a!==s&&t===c},C1={duration:200,easing:"ease"},Fh="transform",E1=hn.Transition.toString({property:Fh,duration:0,easing:"linear"}),M1={roleDescription:"sortable"};function _1(e){let{disabled:t,index:n,node:r,rect:s}=e;const[l,a]=d.useState(null),i=d.useRef(n);return Kt(()=>{if(!t&&n!==i.current&&r.current){const c=s.current;if(c){const u=Jr(r.current,{ignoreTransform:!0}),f={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(f.x||f.y)&&a(f)}}n!==i.current&&(i.current=n)},[t,n,r,s]),d.useEffect(()=>{l&&a(null)},[l]),l}function Bh(e){let{animateLayoutChanges:t=N1,attributes:n,disabled:r,data:s,getNewIndex:l=S1,id:a,strategy:i,resizeObserverConfig:c,transition:u=C1}=e;const{items:f,containerId:p,activeIndex:h,disabled:y,disableTransforms:b,sortedRects:v,overIndex:w,useDragOverlay:x,strategy:m}=d.useContext(Ah),g=T1(r,y),S=f.indexOf(a),j=d.useMemo(()=>({sortable:{containerId:p,index:S,items:f},...s}),[p,s,S,f]),N=d.useMemo(()=>f.slice(f.indexOf(a)),[f,a]),{rect:k,node:C,isOver:E,setNodeRef:D}=a1({id:a,data:j,disabled:g.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...c}}),{active:z,activatorEvent:Y,activeNodeRect:_,attributes:V,setNodeRef:te,listeners:ve,isDragging:ee,over:P,setActivatorNodeRef:I,transform:H}=s1({id:a,data:j,attributes:{...M1,...n},disabled:g.draggable}),ne=Vy(D,te),L=!!z,U=L&&!b&&kl(h)&&kl(w),se=!x&&ee,le=se&&U?H:null,J=i!=null?i:m,Q=U?le!=null?le:J({rects:v,activeNodeRect:_,activeIndex:h,overIndex:w,index:S}):null,ge=kl(h)&&kl(w)?l({id:a,items:f,activeIndex:h,overIndex:w}):S,pe=z==null?void 0:z.id,q=d.useRef({activeId:pe,items:f,newIndex:ge,containerId:p}),Xe=f!==q.current.items,Ke=t({active:z,containerId:p,isDragging:ee,isSorting:L,id:a,index:S,items:f,newIndex:q.current.newIndex,previousItems:q.current.items,previousContainerId:q.current.containerId,transition:u,wasDragging:q.current.activeId!=null}),gt=_1({disabled:!Ke,index:S,node:C,rect:k});return d.useEffect(()=>{L&&q.current.newIndex!==ge&&(q.current.newIndex=ge),p!==q.current.containerId&&(q.current.containerId=p),f!==q.current.items&&(q.current.items=f)},[L,ge,p,f]),d.useEffect(()=>{if(pe===q.current.activeId)return;if(pe!=null&&q.current.activeId==null){q.current.activeId=pe;return}const st=setTimeout(()=>{q.current.activeId=pe},50);return()=>clearTimeout(st)},[pe]),{active:z,activeIndex:h,attributes:V,data:j,rect:k,index:S,newIndex:ge,items:f,isOver:E,isSorting:L,isDragging:ee,listeners:ve,node:C,overIndex:w,over:P,setNodeRef:ne,setActivatorNodeRef:I,setDroppableNodeRef:D,setDraggableNodeRef:te,transform:gt!=null?gt:Q,transition:ke()};function ke(){if(gt||Xe&&q.current.newIndex===S)return E1;if(!(se&&!Xo(Y)||!u)&&(L||Ke))return hn.Transition.toString({...u,property:Fh})}}function T1(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}he.Down,he.Right,he.Up,he.Left;const me={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},kd={always:{label:"",color:"#6b9b6e",bg:"#e0f0e1"},keyword:{label:"",color:"#9b6b6b",bg:"#f0e0e0"},mood:{label:"",color:"#9b7a3b",bg:"#f0ebd8"},message_mode:{label:"",color:"#6b7b9b",bg:"#e0e6f0"}};function Uh({activation:e}){const t=kd[e]||kd.always;return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:t.color,background:t.bg},children:t.label})}const Sl=80;function D1({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(f,p)=>{const h=n.current,y=r.current;if(!h)return;const b="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=b,h.style.transform=f?`translateX(${f}px)`:"",y){const v=Math.min(1,Math.abs(f)/Sl);y.style.transition=b,y.style.opacity=`${v}`}f||(h.style.willChange="auto"),s.current.current=f},a=()=>l(0),i=f=>{if(f.target.closest(".drag-handle"))return;const p=f.touches[0],h=s.current;h.startX=p.clientX,h.startY=p.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=f=>{const p=s.current;if(!p.dragging)return;const h=f.touches[0],y=h.clientX-p.startX,b=h.clientY-p.startY;if(!p.locked){if(Math.abs(y)<5&&Math.abs(b)<5)return;p.locked=!0,p.isH=Math.abs(y)>Math.abs(b),p.isH&&n.current&&(n.current.style.willChange="transform")}if(!p.isH){p.dragging=!1;return}f.preventDefault();const v=Math.max(-Sl,Math.min(0,p.base+y));n.current&&(n.current.style.transform=`translateX(${v}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(v)/Sl)}`),p.current=v},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Sl):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:me.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(Kr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function R1({book:e,onTap:t,onDelete:n}){var f;const{attributes:r,listeners:s,setNodeRef:l,transform:a,transition:i,isDragging:c}=Bh({id:String(e.id)}),u={transform:hn.Transform.toString(a),transition:i,opacity:c?0:1};return o.jsx("div",{ref:l,style:u,className:"mb-3",children:o.jsx(D1,{onDelete:()=>n(e),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:me.bg,userSelect:"none"},children:[o.jsx("div",{...r,...s,className:"drag-handle shrink-0 cursor-grab touch-none px-1",style:{cursor:c?"grabbing":"grab"},children:o.jsx(qs,{size:18,style:{color:me.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>t(e),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:me.text},children:e.name}),o.jsx(Uh,{activation:e.activation})]}),e.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:me.textMuted},children:e.folder}),e.activation==="keyword"&&((f=e.keywords)==null?void 0:f.length)>0&&o.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[e.keywords.slice(0,3).map((p,h)=>o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(232,160,191,0.15)",color:me.accentDark},children:p},h)),e.keywords.length>3&&o.jsxs("span",{className:"text-[10px]",style:{color:me.textMuted},children:["+",e.keywords.length-3]})]})]}),o.jsx($r,{size:16,style:{color:me.textMuted,flexShrink:0},onClick:()=>t(e)})]})})})}function z1({folder:e,books:t,onDelete:n,onTap:r,onReorder:s}){const[l,a]=d.useState(!0),[i,c]=d.useState(null),u=hh(wo(Ko,{activationConstraint:{distance:5}}),wo(Lc,{activationConstraint:{delay:200,tolerance:5}})),f=({active:h,over:y})=>{if(c(null),!y||h.id===y.id)return;const b=t.findIndex(x=>String(x.id)===String(h.id)),v=t.findIndex(x=>String(x.id)===String(y.id));if(b<0||v<0)return;const w=Go(t,b,v);s(e,w)},p=i?t.find(h=>String(h.id)===String(i)):null;return o.jsxs("div",{className:"mb-4",children:[o.jsxs("button",{className:"mb-2 flex w-full items-center gap-2 px-1",onClick:()=>a(!l),children:[l?o.jsx(Vr,{size:14,style:{color:me.textMuted}}):o.jsx($r,{size:14,style:{color:me.textMuted}}),o.jsx("span",{className:"text-[12px] font-bold tracking-wide",style:{color:me.textMuted},children:e||""}),o.jsx("span",{className:"ml-1 rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.12)",color:me.textMuted},children:t.length})]}),l&&o.jsxs(Rh,{sensors:u,collisionDetection:mh,onDragStart:({active:h})=>c(h.id),onDragEnd:f,children:[o.jsx($h,{items:t.map(h=>String(h.id)),strategy:Lh,children:t.map(h=>o.jsx(R1,{book:h,onTap:r,onDelete:n},h.id))}),o.jsx(Ph,{children:p&&o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:me.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx("div",{className:"shrink-0 px-1",children:o.jsx(qs,{size:18,style:{color:me.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:me.text},children:p.name}),o.jsx(Uh,{activation:p.activation})]}),p.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:me.textMuted},children:p.folder})]}),o.jsx($r,{size:16,style:{color:me.textMuted,flexShrink:0}})]})})]})]})}function P1(){const e=$t(),[t,n]=d.useState([]),[r,s]=d.useState(!0),[l,a]=d.useState(null),[i,c]=d.useState(null),u=v=>{c(v),setTimeout(()=>c(null),2e3)},f=()=>{s(!0),$("/api/world-books").then(v=>n(v.world_books||[])).catch(()=>u("")).finally(()=>s(!1))};d.useEffect(()=>{f()},[]);const p=async v=>{a(null);try{await $(`/api/world-books/${v.id}`,{method:"DELETE"}),n(w=>w.filter(x=>x.id!==v.id)),u("")}catch(w){u("")}},h=(v,w)=>{const x=v||"";n(m=>[...m.filter(S=>(S.folder||"")!==x),...w]),$("/api/world-books/reorder",{method:"PUT",body:{ordered_ids:w.map(m=>m.id)}}).catch(()=>u(""))},y={};for(const v of t){const w=v.folder||"";y[w]||(y[w]=[]),y[w].push(v)}const b=Object.keys(y).sort((v,w)=>v===""?1:w===""?-1:v.localeCompare(w));return o.jsxs("div",{className:"flex h-full flex-col",style:{background:me.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full nm-active",style:{background:me.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:me.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:me.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:me.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books/new"),children:o.jsx(Xr,{size:20,style:{color:me.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-t-transparent",style:{borderColor:me.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(qs,{size:36,style:{color:me.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:me.textMuted},children:" + "})]}):b.map(v=>o.jsx(z1,{folder:v,books:y[v],onDelete:w=>a(w),onTap:w=>e(`/world-books/${w.id}`),onReorder:h},v))}),l&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>a(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:me.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:v=>v.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:me.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:me.textMuted},children:["",l.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:me.bg,boxShadow:"var(--card-shadow-sm)",color:me.text},onClick:()=>a(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>p(l),children:""})]})]})}),i&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const G={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function I1({label:e,value:t,onChange:n,placeholder:r}){return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:G.textMuted},children:e}),o.jsx("input",{type:"text",value:t,onChange:s=>n(s.target.value),placeholder:r,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:G.bg,color:G.text}})]})}function L1({value:e,onChange:t,folders:n}){const[r,s]=d.useState(!1),l=n.filter(a=>a!==e&&a.toLowerCase().includes(e.toLowerCase()));return o.jsxs("div",{className:"relative mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:G.textMuted},children:""}),o.jsx("input",{type:"text",value:e,onChange:a=>{t(a.target.value),s(!0)},onFocus:()=>s(!0),onBlur:()=>setTimeout(()=>s(!1),150),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:G.bg,color:G.text}}),r&&l.length>0&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[160px] overflow-y-auto rounded-[14px]",style:{background:G.bg,boxShadow:"var(--card-shadow)"},children:l.map(a=>o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:G.text},onMouseDown:()=>{t(a),s(!1)},children:a},a))})]})}function O1({value:e,onChange:t}){const n=[{value:"always",label:""},{value:"keyword",label:""},{value:"mood",label:""},{value:"message_mode",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:G.textMuted},children:""}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:G.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:e===r.value?G.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?G.accentDark:G.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})]})}function A1({selected:e,onChange:t}){const n=[{value:"long",label:""},{value:"short",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:G.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:G.bg,minHeight:48},children:n.map(r=>{const s=e===r.value;return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?G.accentDark:G.bg,color:s?"white":G.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>t(r.value),children:r.label},r.value)})})]})}const $1=[{value:"happy",label:""},{value:"sad",label:""},{value:"angry",label:""},{value:"anxious",label:""},{value:"tired",label:""},{value:"emo",label:""},{value:"flirty",label:""},{value:"proud",label:""},{value:"calm",label:""}];function F1({selected:e,onChange:t}){const n=r=>{e.includes(r)?t(e.filter(s=>s!==r)):t([...e,r])};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:G.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:G.bg,minHeight:48},children:$1.map(r=>{const s=e.includes(r.value);return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?G.accentDark:G.bg,color:s?"white":G.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>n(r.value),children:r.label},r.value)})})]})}function B1({keywords:e,onChange:t}){const[n,r]=d.useState(""),s=()=>{const l=n.trim();if(!l||e.includes(l)){r("");return}t([...e,l]),r("")};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:G.textMuted},children:""}),o.jsxs("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:G.bg,minHeight:48},children:[e.map(l=>o.jsxs("span",{className:"flex items-center gap-1 rounded-full px-2.5 py-1 text-[12px] font-medium",style:{background:"rgba(232,160,191,0.2)",color:G.accentDark},children:[l,o.jsx("button",{onClick:()=>t(e.filter(a=>a!==l)),children:o.jsx(el,{size:10})})]},l)),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),onKeyDown:l=>{(l.key==="Enter"||l.key===",")&&(l.preventDefault(),s())},placeholder:"...",className:"w-24 bg-transparent text-[12px] outline-none",style:{color:G.text}}),n.trim()&&o.jsx("button",{className:"flex h-5 w-5 items-center justify-center rounded-full",style:{background:G.accentDark},onClick:s,children:o.jsx(Xr,{size:10,color:"white"})})]})]}),o.jsx("p",{className:"mt-1 text-[10px]",style:{color:G.textMuted},children:" Enter "})]})}function U1({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:G.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:G.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Fr,{size:18,style:{color:G.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:G.bg,color:G.text},placeholder:"..."})]})}function jd(){const e=$t(),{id:t}=eh(),n=!t,[r,s]=d.useState(""),[l,a]=d.useState(""),[i,c]=d.useState("always"),[u,f]=d.useState([]),[p,h]=d.useState("long"),[y,b]=d.useState(""),[v,w]=d.useState(!1),[x,m]=d.useState(!n),[g,S]=d.useState(null),[j,N]=d.useState([]),[k,C]=d.useState(!1),E=d.useRef(null),D=_=>{var ve;const V=(ve=_.target.files)==null?void 0:ve[0];if(!V)return;const te=new FileReader;te.onload=ee=>b(ee.target.result||""),te.readAsText(V),_.target.value=""},z=_=>{S(_),setTimeout(()=>S(null),2e3)};d.useEffect(()=>{$("/api/world-books").then(_=>{const V=_.world_books||[];if(N([...new Set(V.map(te=>te.folder).filter(Boolean))]),!n){const te=V.find(ve=>String(ve.id)===String(t));te&&(s(te.name),a(te.folder||""),c(te.activation),f(te.keywords||[]),h(te.message_mode||"long"),b(te.content))}}).catch(()=>z("")).finally(()=>m(!1))},[t,n]);const Y=async()=>{if(!r.trim()){z("");return}w(!0);try{const _={name:r.trim(),folder:l.trim()||null,activation:i,keywords:i==="keyword"||i==="mood"?u:[],message_mode:i==="message_mode"?p:null,content:y};n?(await $("/api/world-books",{method:"POST",body:_}),z("")):(await $(`/api/world-books/${t}`,{method:"PUT",body:_}),z(""))}catch(_){z(": "+_.message)}finally{w(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:G.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:G.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:G.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:v?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:Y,disabled:v,children:o.jsx(Ho,{size:18,style:{color:G.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:x?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:G.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"rounded-[20px] p-5 mb-4",style:{background:G.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(I1,{label:"",value:r,onChange:s,placeholder:""}),o.jsx(L1,{value:l,onChange:a,folders:j}),o.jsx(O1,{value:i,onChange:c}),i==="keyword"&&o.jsx(B1,{keywords:u,onChange:f}),i==="mood"&&o.jsx(F1,{selected:u,onChange:f}),i==="message_mode"&&o.jsx(A1,{selected:p,onChange:h})]}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:G.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:G.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:G.bg},onClick:()=>{var _;return(_=E.current)==null?void 0:_.click()},title:"",children:o.jsx(Uo,{size:13,style:{color:G.textMuted}})}),o.jsx("input",{ref:E,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:D}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:G.bg},onClick:()=>C(!0),title:"",children:o.jsx(Zs,{size:13,style:{color:G.accentDark}})})]})]}),o.jsx("textarea",{value:y,onChange:_=>b(_.target.value),placeholder:"...",rows:10,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:G.bg,color:G.text}})]})]})}),k&&o.jsx(U1,{value:y,onChange:b,onClose:()=>C(!1)}),g&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:g})})]})}const Pe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Nl=80;function H1({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(f,p)=>{const h=n.current,y=r.current;if(!h)return;const b="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=b,h.style.transform=f?`translateX(${f}px)`:"",y){const v=Math.min(1,Math.abs(f)/Nl);y.style.transition=b,y.style.opacity=`${v}`}f||(h.style.willChange="auto"),s.current.current=f},a=()=>l(0),i=f=>{const p=f.touches[0],h=s.current;h.startX=p.clientX,h.startY=p.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=f=>{const p=s.current;if(!p.dragging)return;const h=f.touches[0],y=h.clientX-p.startX,b=h.clientY-p.startY;if(!p.locked){if(Math.abs(y)<5&&Math.abs(b)<5)return;p.locked=!0,p.isH=Math.abs(y)>Math.abs(b),p.isH&&n.current&&(n.current.style.willChange="transform")}if(!p.isH){p.dragging=!1;return}f.preventDefault();const v=Math.max(-Nl,Math.min(0,p.base+y));n.current&&(n.current.style.transform=`translateX(${v}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(v)/Nl)}`),p.current=v},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Nl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Pe.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(Kr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function W1({assistant:e,localAvatar:t,onTap:n}){var s;const r=t||null;return o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Pe.bg,userSelect:"none"},onClick:()=>n(e),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:48,height:48,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Pe.bg},children:r?o.jsx("img",{src:r,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[20px]",style:{color:Pe.accentDark},children:((s=e.name)==null?void 0:s[0])||"?"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[15px] font-bold",style:{color:Pe.text},children:e.name}),e.created_at&&o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:Pe.textMuted},children:e.created_at.slice(0,10)})]}),o.jsx($r,{size:16,style:{color:Pe.textMuted,flexShrink:0}})]})}function V1(){const e=$t(),[t,n]=d.useState([]),[r,s]=d.useState({}),[l,a]=d.useState(!0),[i,c]=d.useState(null),[u,f]=d.useState(null),p=b=>{f(b),setTimeout(()=>f(null),2e3)},h=()=>{a(!0),$("/api/assistants").then(async b=>{const v=b.assistants||[];n(v);const w={};await Promise.all(v.map(async x=>{const m=await Yr(`assistant-avatar-${x.id}`).catch(()=>null);m&&(w[x.id]=m)})),s(w)}).catch(()=>p("")).finally(()=>a(!1))};d.useEffect(()=>{h()},[]);const y=async b=>{c(null);try{await $(`/api/assistants/${b.id}`,{method:"DELETE"}),n(v=>v.filter(w=>w.id!==b.id)),p("")}catch(v){p("")}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Pe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Pe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:Pe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Pe.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Pe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants/new"),children:o.jsx(Xr,{size:20,style:{color:Pe.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Pe.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(lh,{size:36,style:{color:Pe.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:Pe.textMuted},children:" + "})]}):t.map(b=>o.jsx(H1,{onDelete:()=>c(b),children:o.jsx(W1,{assistant:b,localAvatar:r[b.id],onTap:v=>e(`/assistants/${v.id}`)})},b.id))}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>c(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Pe.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:b=>b.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Pe.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Pe.textMuted},children:["",i.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Pe.bg,boxShadow:"var(--card-shadow-sm)",color:Pe.text},onClick:()=>c(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>y(i),children:""})]})]})}),u&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:u})})]})}const T={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Sd({label:e,value:t,onChange:n,placeholder:r,rows:s,onExpand:l,onHistory:a}){const i=d.useRef(null),c=u=>{var h;const f=(h=u.target.files)==null?void 0:h[0];if(!f)return;const p=new FileReader;p.onload=y=>n(y.target.result||""),p.readAsText(f),u.target.value=""};return o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:T.textMuted},children:e}),o.jsxs("div",{className:"flex items-center gap-2",children:[a&&o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:T.bg},onClick:a,children:o.jsx(zy,{size:13,style:{color:T.textMuted}})}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:T.bg},onClick:()=>{var u;return(u=i.current)==null?void 0:u.click()},children:o.jsx(Uo,{size:13,style:{color:T.textMuted}})}),o.jsx("input",{ref:i,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:c}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:T.bg},onClick:l,children:o.jsx(Zs,{size:13,style:{color:T.accentDark}})})]})]}),o.jsx("textarea",{value:t,onChange:u=>n(u.target.value),placeholder:r,rows:s||6,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:T.bg,color:T.text}})]})}function Da({label:e,value:t,onChange:n,presets:r}){const[s,l]=d.useState(!1),a=r.find(i=>i.id===t);return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:T.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:T.bg,color:T.text},onClick:()=>l(!s),children:[o.jsx("span",{style:{color:a?T.text:T.textMuted},children:a?a.name:""}),o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:T.textMuted,transform:s?"rotate(180deg)":"none",transition:"transform 0.2s"},children:o.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&o.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:T.bg,boxShadow:"var(--card-shadow)",zIndex:40},children:[o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:T.textMuted},onClick:()=>{n(null),l(!1)},children:""}),r.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[14px]",style:{color:T.text},onClick:()=>{n(i.id),l(!1)},children:[o.jsx("span",{children:i.name}),i.id===t&&o.jsx(Ws,{size:14,style:{color:T.accentDark}})]},i.id))]})]})]})}function Ra({value:e,onChange:t,onClose:n,title:r,placeholder:s}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:T.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:T.text},children:r||""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Fr,{size:18,style:{color:T.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:l=>t(l.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:T.bg,color:T.text},placeholder:s||""})]})}function X1({items:e,currentContent:t,onApply:n,onClose:r}){const[s,l]=d.useState("current"),[a,i]=d.useState(null),c=f=>f?new Date(f).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",u=async()=>{if(s==="current"){r();return}const f=e.find(p=>p.id===s);f&&await n(f.content),r()};return a?o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:T.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsxs("span",{className:"text-[15px] font-bold",style:{color:T.text},children:[" ",a.version]}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>i(null),children:o.jsx(Fr,{size:18,style:{color:T.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:o.jsx("div",{className:"rounded-[14px] p-4",style:{boxShadow:"var(--inset-shadow)",background:T.bg},children:o.jsx("p",{className:"whitespace-pre-wrap text-[13px] leading-relaxed",style:{color:T.text},children:a.content})})})]}):o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:T.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:T.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},onClick:r,children:o.jsx(Fr,{size:18,style:{color:T.accentDark}})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[o.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:s==="current"?"var(--inset-shadow)":"var(--card-shadow-sm)",background:T.bg},children:[o.jsx("button",{onClick:()=>l("current"),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:s==="current"?T.accentDark:T.bg,boxShadow:s==="current"?"none":"var(--icon-inset)"},children:s==="current"&&o.jsx(Ws,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[13px] font-semibold",style:{color:T.text},children:""}),o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#2a9d5c",background:"rgba(42,157,92,0.12)"},children:""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:T.textMuted},children:t})]})]}),e.length===0&&o.jsx("p",{className:"py-8 text-center text-[13px]",style:{color:T.textMuted},children:""}),e.map(f=>o.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:s===f.id?"var(--inset-shadow)":"var(--card-shadow-sm)",background:T.bg},children:[o.jsx("button",{onClick:()=>l(f.id),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:s===f.id?T.accentDark:T.bg,boxShadow:s===f.id?"none":"var(--icon-inset)"},children:s===f.id&&o.jsx(Ws,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>i(f),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-[13px] font-semibold",style:{color:T.text},children:[" ",f.version]}),o.jsx("span",{className:"text-[10px]",style:{color:T.textMuted},children:c(f.created_at)})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:T.textMuted},children:f.content})]})]},f.id))]}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsx("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:u,children:""})})]})}function Hh(e){return e==="always"?"":e==="keyword"?"":e==="message_mode"?"":""}function Wh(e){return!e||!Array.isArray(e)?[]:e.map((t,n)=>typeof t=="object"&&t!==null?t:{id:t,position:"after",sort_order:n})}function K1({item:e,book:t,position:n,sectionList:r,onRemove:s,onChangePosition:l}){const{attributes:a,listeners:i,setNodeRef:c,transform:u,transition:f,isDragging:p}=Bh({id:String(e.id)}),h={transform:hn.Transform.toString(u),transition:f,opacity:p?0:1};return t?o.jsxs("div",{ref:c,style:h,className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",children:[o.jsx("div",{...a,...i,className:"cursor-grab touch-none p-1",style:{cursor:p?"grabbing":"grab"},children:o.jsx(qs,{size:14,style:{color:T.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:T.text},children:t.name}),o.jsxs("div",{className:"text-[10px]",style:{color:T.textMuted},children:[Hh(t.activation),t.folder?`  ${t.folder}`:""]})]}),o.jsx("button",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(136,136,160,0.1)",color:T.textMuted},onClick:()=>l(e.id,n==="before"?"after":"before"),children:n==="before"?"":""}),o.jsx("button",{onClick:()=>s(e.id),children:o.jsx(el,{size:14,style:{color:T.textMuted}})})]}):null}function Y1({allBooks:e,mountedIds:t,onClose:n,onConfirm:r}){const[s,l]=d.useState(new Set(t)),a={};e.forEach(u=>{const f=u.folder||"";a[f]||(a[f]=[]),a[f].push(u)});const i=u=>{l(f=>{const p=new Set(f);return p.has(u)?p.delete(u):p.add(u),p})},c=u=>{const f=u.every(p=>s.has(p.id));l(p=>{const h=new Set(p);return f?u.forEach(y=>h.delete(y.id)):u.forEach(y=>h.add(y.id)),h})};return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-end",style:{background:"rgba(0,0,0,0.4)"},children:o.jsxs("div",{className:"flex w-full flex-col rounded-t-[24px]",style:{background:T.bg,maxHeight:"82vh"},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between p-5 pb-3",children:[o.jsx("h3",{className:"text-[16px] font-bold",style:{color:T.text},children:""}),o.jsx("button",{onClick:n,children:o.jsx(el,{size:20,style:{color:T.textMuted}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5",children:Object.entries(a).map(([u,f])=>{const p=f.every(h=>s.has(h.id));return o.jsxs("div",{className:"mb-5",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:T.textMuted},children:u}),o.jsx("button",{className:"rounded-full px-2.5 py-1 text-[11px] font-semibold",style:{background:p?"rgba(201,98,138,0.15)":"rgba(136,136,160,0.1)",color:p?T.accentDark:T.textMuted},onClick:()=>c(f),children:p?"":""})]}),o.jsx("div",{className:"space-y-2",children:f.map(h=>{const y=s.has(h.id);return o.jsxs("button",{className:"flex w-full items-center gap-3 rounded-[14px] p-3",style:{background:T.bg,boxShadow:y?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>i(h.id),children:[o.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:y?T.accentDark:T.bg,boxShadow:y?"none":"var(--icon-inset)"},children:y&&o.jsx(Ws,{size:12,color:"white"})}),o.jsx("div",{className:"flex-1 min-w-0 text-left",children:o.jsx("div",{className:"truncate text-[13px] font-medium",style:{color:y?T.accentDark:T.text},children:h.name})}),o.jsx("span",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.1)",color:T.textMuted},children:Hh(h.activation)})]},h.id)})})]},u)})}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsxs("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>r([...s]),children:[" ",s.size,""]})})]})})}function Q1({ruleSetIds:e,onChange:t,allBooks:n}){const[r,s]=d.useState(!1),[l,a]=d.useState(null),i=Wh(e),c=i.filter(j=>j.position==="before").sort((j,N)=>j.sort_order-N.sort_order),u=i.filter(j=>j.position==="after").sort((j,N)=>j.sort_order-N.sort_order),f=j=>n.find(N=>N.id===j||N.id===Number(j)),p=hh(wo(Ko,{activationConstraint:{distance:5}}),wo(Lc,{activationConstraint:{delay:150,tolerance:5}})),h=({active:j})=>a(j.id),y=({active:j,over:N})=>{if(!N)return;const k=i.find(E=>String(E.id)===String(j.id)),C=i.find(E=>String(E.id)===String(N.id));if(!(!k||!C)&&k.position!==C.position){const E=i.map(D=>String(D.id)===String(k.id)?{...D,position:C.position}:D);t(E)}},b=({active:j,over:N})=>{if(a(null),!N||j.id===N.id)return;const k=i.find(V=>String(V.id)===String(j.id)),C=i.find(V=>String(V.id)===String(N.id));if(!k||!C||k.position!==C.position)return;const E=k.position==="before"?[...c]:[...u],D=E.findIndex(V=>String(V.id)===String(j.id)),z=E.findIndex(V=>String(V.id)===String(N.id)),Y=Go(E,D,z).map((V,te)=>({...V,sort_order:te})),_=i.filter(V=>V.position!==k.position);t([..._,...Y])},v=j=>t(i.filter(N=>N.id!==j)),w=(j,N)=>{const C=(N==="before"?c:u).length;t(i.map(E=>E.id===j?{...E,position:N,sort_order:C}:E))},x=j=>{const N=i.map(z=>z.id),C=j.filter(z=>!N.includes(z)).map((z,Y)=>({id:z,position:"after",sort_order:u.length+Y})),E=new Set(N.filter(z=>!j.includes(z))),D=i.filter(z=>!E.has(z.id));t([...D,...C])},m=(j,N)=>j.length===0?o.jsx("div",{className:"py-3 text-center text-[12px]",style:{color:T.textMuted},children:""}):o.jsx($h,{items:j.map(k=>String(k.id)),strategy:Lh,children:o.jsx("div",{className:"rounded-[14px] px-2 pt-1",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},children:j.map((k,C)=>o.jsxs("div",{children:[C>0&&o.jsx("div",{className:"mx-2",style:{height:1,background:"rgba(0,0,0,0.06)"}}),o.jsx(K1,{item:k,book:f(k.id),position:N,sectionList:j,onRemove:v,onChangePosition:w})]},k.id))})}),g=l?i.find(j=>String(j.id)===String(l)):null,S=g?f(g.id):null;return o.jsxs(Rh,{sensors:p,collisionDetection:mh,onDragStart:h,onDragOver:y,onDragEnd:b,children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:T.textMuted},children:"System Prompt "}),m(c,"before")]}),o.jsxs("div",{className:"my-4 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}}),o.jsx("span",{className:"rounded-full px-3 py-1 text-[11px] font-bold",style:{background:"rgba(232,160,191,0.15)",color:T.accentDark},children:"System Prompt"}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:T.textMuted},children:"System Prompt "}),m(u,"after")]}),o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-3 text-[14px] font-semibold",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)",color:T.accentDark},onClick:()=>s(!0),children:[o.jsx(Xr,{size:16})," "]}),o.jsx(Ph,{children:S&&o.jsxs("div",{className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",style:{background:T.bg,boxShadow:"var(--card-shadow)",opacity:.9},children:[o.jsx(qs,{size:14,style:{color:T.textMuted}}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:T.accentDark},children:S.name})})]})}),r&&o.jsx(Y1,{allBooks:n,mountedIds:i.map(j=>j.id),onClose:()=>s(!1),onConfirm:j=>{x(j),s(!1)}})]})}function Nd(){const e=$t(),{id:t}=eh(),n=!t,[r,s]=d.useState("basic"),[l,a]=d.useState(""),[i,c]=d.useState(""),[u,f]=d.useState(""),[p,h]=d.useState(null),[y,b]=d.useState(null),[v,w]=d.useState(null),[x,m]=d.useState(""),[g,S]=d.useState(""),[j,N]=d.useState(null),[k,C]=d.useState(null),[E,D]=d.useState([]),[z,Y]=d.useState([]),[_,V]=d.useState([]),[te,ve]=d.useState(!1),[ee,P]=d.useState(!n),[I,H]=d.useState(null),[ne,L]=d.useState(!1),[U,se]=d.useState(!1),[le,J]=d.useState(!1),[Q,ge]=d.useState(null),[pe,q]=d.useState([]),Xe=d.useRef(null),Ke=d.useRef(null),gt=Z=>{var De;const ue=(De=Z.target.files)==null?void 0:De[0];if(!ue)return;const Ce=new FileReader;Ce.onload=_t=>f(_t.target.result||""),Ce.readAsText(ue),Z.target.value=""},ke=Z=>{H(Z),setTimeout(()=>H(null),2500)},st=async Z=>{const ue=Z==="human"?j:k;if(!ue){ke("");return}try{const Ce=await $(`/api/core-blocks/${ue}/history`);q(Ce.history||[]),ge(Z)}catch(Ce){ke("")}};d.useEffect(()=>{(async()=>{const[ue,Ce]=await Promise.all([$("/api/presets").catch(()=>({presets:[]})),$("/api/world-books").catch(()=>({world_books:[]}))]);if(Y(ue.presets||[]),V(Ce.world_books||[]),n)P(!1);else try{const[De,_t]=await Promise.all([$(`/api/assistants/${t}`),$(`/api/core-blocks?assistant_id=${t}`).catch(()=>({blocks:[]}))]);a(De.name||""),Yr(`assistant-avatar-${t}`).then(Oe=>{Oe&&c(Oe)}).catch(function(){}),f(De.system_prompt||""),h(De.model_preset_id||null),b(De.summary_model_preset_id||null),w(De.summary_fallback_preset_id||null),D(De.rule_set_ids||[]);for(const Oe of _t.blocks||[])Oe.block_type==="human"?(m(Oe.content||""),N(Oe.id)):Oe.block_type==="persona"&&(S(Oe.content||""),C(Oe.id))}catch(De){ke(": "+De.message)}finally{P(!1)}})()},[t,n]);const we=Z=>{var De;const ue=(De=Z.target.files)==null?void 0:De[0];if(!ue)return;const Ce=new FileReader;Ce.onload=async _t=>{const Oe=_t.target.result,Un=`assistant-avatar-${t||"new"}`;try{await Ti(Un,Oe),c(Oe)}catch(M){ke("")}},Ce.readAsDataURL(ue),Z.target.value=""},Mt=async()=>{if(!l.trim()){ke("");return}ve(!0);try{const Z={name:l.trim(),avatar_url:i?`assistant-avatar-${t||"new"}`:null,system_prompt:u,model_preset_id:p,summary_model_preset_id:y,summary_fallback_preset_id:v,rule_set_ids:Wh(E)};let ue=t;if(n?(ue=(await $("/api/assistants",{method:"POST",body:{name:l.trim()}})).id,i&&(await Ti(`assistant-avatar-${ue}`,i),Z.avatar_url=`assistant-avatar-${ue}`),await $(`/api/assistants/${ue}`,{method:"PUT",body:Z})):await $(`/api/assistants/${t}`,{method:"PUT",body:Z}),j)await $(`/api/core-blocks/${j}`,{method:"PUT",body:{content:x}});else if(x.trim()){const Ce=await $("/api/core-blocks",{method:"POST",body:{block_type:"human",assistant_id:Number(ue),content:x}});N(Ce.id)}if(k)await $(`/api/core-blocks/${k}`,{method:"PUT",body:{content:g}});else if(g.trim()){const Ce=await $("/api/core-blocks",{method:"POST",body:{block_type:"persona",assistant_id:Number(ue),content:g}});C(Ce.id)}ke("")}catch(Z){ke(": "+Z.message)}finally{ve(!1)}},xn=[{key:"basic",label:""},{key:"about",label:"Core Blocks"},{key:"books",label:""}];return o.jsxs("div",{className:"flex h-full flex-col",style:{background:T.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:T.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:T.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:T.bg,boxShadow:te?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:Mt,disabled:te,children:o.jsx(Ho,{size:18,style:{color:T.accentDark}})})]}),o.jsx("div",{className:"flex shrink-0 gap-1 px-5 pb-3",children:xn.map(Z=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2.5 text-[13px] font-semibold transition-all",style:{background:r===Z.key?T.bg:"transparent",boxShadow:r===Z.key?"var(--card-shadow-sm)":"none",color:r===Z.key?T.accentDark:T.textMuted},onClick:()=>s(Z.key),children:Z.label},Z.key))}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px",children:ee?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:T.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[r==="basic"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-4 flex items-center gap-4 rounded-[20px] p-4",style:{background:T.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var Z;return(Z=Xe.current)==null?void 0:Z.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:T.bg},children:i?o.jsx("img",{src:i,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[24px]",style:{color:T.accentDark},children:(l==null?void 0:l[0])||"?"})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:T.accentDark},children:o.jsx(oh,{size:9,color:"white"})})]}),o.jsx("input",{ref:Xe,type:"file",accept:"image/*",className:"hidden",onChange:we}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:T.textMuted},children:""}),o.jsx("input",{type:"text",value:l,onChange:Z=>a(Z.target.value),placeholder:"",className:"w-full rounded-[12px] px-4 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:T.bg,color:T.text}})]})]}),o.jsxs("div",{className:"mb-4 rounded-[20px] p-4",style:{background:T.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:T.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:T.bg},onClick:()=>{var Z;return(Z=Ke.current)==null?void 0:Z.click()},title:"",children:o.jsx(Uo,{size:13,style:{color:T.textMuted}})}),o.jsx("input",{ref:Ke,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:gt}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:T.bg},onClick:()=>L(!0),title:"",children:o.jsx(Zs,{size:13,style:{color:T.accentDark}})})]})]}),o.jsx("textarea",{value:u,onChange:Z=>f(Z.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:T.bg,color:T.text}})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:T.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(Da,{label:"",value:p,onChange:h,presets:z}),o.jsx(Da,{label:"",value:y,onChange:b,presets:z}),o.jsx(Da,{label:"",value:v,onChange:w,presets:z})]})]}),r==="about"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-4 rounded-[20px] p-4",style:{background:T.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Sd,{label:"human block",value:x,onChange:m,placeholder:" AI ...",rows:7,onExpand:()=>se(!0),onHistory:()=>st("human")})}),o.jsx("div",{className:"rounded-[20px] p-4",style:{background:T.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Sd,{label:"persona block",value:g,onChange:S,placeholder:"AI ...",rows:7,onExpand:()=>J(!0),onHistory:()=>st("persona")})})]}),r==="books"&&o.jsx("div",{className:"rounded-[20px] p-4",style:{background:T.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Q1,{ruleSetIds:E,onChange:D,allBooks:_})})]})}),ne&&o.jsx(Ra,{value:u,onChange:f,onClose:()=>L(!1),title:"",placeholder:"..."}),U&&o.jsx(Ra,{value:x,onChange:m,onClose:()=>se(!1),title:"human block",placeholder:" AI ..."}),le&&o.jsx(Ra,{value:g,onChange:S,onClose:()=>J(!1),title:"persona block",placeholder:"AI ..."}),Q&&o.jsx(X1,{items:pe,currentContent:Q==="human"?x:g,onApply:async Z=>{const ue=Q==="human"?j:k;try{await $(`/api/core-blocks/${ue}`,{method:"PUT",body:{content:Z}}),Q==="human"?m(Z):S(Z),ke("")}catch(Ce){ke("")}},onClose:()=>ge(null)}),I&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:I})})]})}const re={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function G1({on:e,onToggle:t}){return o.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full transition-all",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":re.bg},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function Cd({icon:e,label:t,hint:n,onClick:r}){return o.jsxs("button",{className:"flex w-full items-center gap-4 px-4 py-4",onClick:r,children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:re.bg},children:e}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:re.text},children:t}),n&&o.jsx("div",{className:"text-[11px]",style:{color:re.textMuted},children:n})]}),o.jsx($r,{size:16,style:{color:re.textMuted}})]})}function Ed(){return o.jsx("div",{className:"mx-4 h-px",style:{background:"rgba(136,136,160,0.15)"}})}function cr({value:e,onChange:t,min:n,max:r}){const[s,l]=d.useState(String(e));d.useEffect(()=>l(String(e)),[e]);const a=()=>{let i=parseInt(s);isNaN(i)&&(i=n),i=Math.max(n,Math.min(r,i)),l(String(i)),t(i)};return o.jsx("input",{type:"number",value:s,onChange:i=>l(i.target.value),onBlur:a,onKeyDown:i=>i.key==="Enter"&&a(),className:"w-20 rounded-[10px] py-2 text-center text-[14px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:re.bg,color:re.text},min:n,max:r})}function J1(){const e=$t(),[t,n]=d.useState(()=>{var k;return((k=JSON.parse(localStorage.getItem("app-settings")||"{}"))==null?void 0:k.autoMessage)||!1}),[r,s]=d.useState(()=>{var k;return((k=JSON.parse(localStorage.getItem("app-settings")||"{}"))==null?void 0:k.autoMessageIntervalMin)||30}),[l,a]=d.useState(()=>{var k;return((k=JSON.parse(localStorage.getItem("app-settings")||"{}"))==null?void 0:k.autoMessageIntervalMax)||60}),[i,c]=d.useState(()=>parseInt(localStorage.getItem("telegram_buffer_seconds")||"15")),[u,f]=d.useState(8),[p,h]=d.useState(8e3),[y,b]=d.useState(16e3),[v,w]=d.useState(!1),[x,m]=d.useState(!1),[g,S]=d.useState(null),j=k=>{S(k),setTimeout(()=>S(null),2e3)};d.useEffect(()=>{$("/api/settings/context-budget").then(k=>{h(k.retain_budget),b(k.trigger_threshold),w(!0)}).catch(()=>w(!0))},[]),d.useEffect(()=>{const k=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({...k,autoMessage:t,autoMessageIntervalMin:r,autoMessageIntervalMax:l}))},[t,r,l]),d.useEffect(()=>{localStorage.setItem("telegram_buffer_seconds",String(i)),$("/api/settings/buffer-seconds",{method:"PUT",body:{seconds:i}}).catch(()=>{})},[i]),d.useEffect(()=>{$("/api/settings/short-msg-max").then(k=>f(k.max_count||8)).catch(()=>{})},[]),d.useEffect(()=>{$("/api/settings/short-msg-max",{method:"PUT",body:{max_count:u}}).catch(()=>{})},[u]);const N=async()=>{m(!0);try{await $("/api/settings/context-budget",{method:"PUT",body:{retain_budget:p,trigger_threshold:y}}),j("")}catch(k){j("")}finally{m(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:re.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:re.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:re.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:re.text},children:""}),o.jsx("div",{className:"w-10"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px space-y-4",children:[o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:re.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(Cd,{icon:o.jsx(Ay,{size:18,style:{color:re.text}}),label:"API ",hint:"  ",onClick:()=>e("/settings/api")}),o.jsx(Ed,{}),o.jsx(Cd,{icon:o.jsx(Ly,{size:18,style:{color:re.textMuted}}),label:"",hint:"",onClick:()=>j("")})]}),o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:re.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:re.bg},children:o.jsx(Iy,{size:18,style:{color:re.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:re.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:re.textMuted},children:" AI "})]}),o.jsx(G1,{on:t,onToggle:()=>n(!t)})]}),t&&o.jsx("div",{className:"px-4 pb-4",children:o.jsxs("div",{className:"flex items-center justify-between rounded-[12px] px-4 py-3",style:{boxShadow:"var(--inset-shadow)",background:re.bg},children:[o.jsx("span",{className:"text-[12px] font-medium",style:{color:re.textMuted},children:" ()"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(cr,{value:r,onChange:s,min:1,max:999}),o.jsx("span",{style:{color:re.textMuted},children:"~"}),o.jsx(cr,{value:l,onChange:a,min:1,max:999})]})]})})]}),o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:re.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:re.bg},children:o.jsx(By,{size:18,style:{color:re.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:re.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:re.textMuted},children:" ()"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(cr,{value:i,onChange:c,min:1,max:120}),o.jsx("span",{className:"text-[12px]",style:{color:re.textMuted},children:""})]})]}),o.jsx(Ed,{}),o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:re.bg},children:o.jsx(Dy,{size:18,style:{color:re.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:re.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:re.textMuted},children:""})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(cr,{value:u,onChange:f,min:2,max:20}),o.jsx("span",{className:"text-[12px]",style:{color:re.textMuted},children:""})]})]})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:re.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:re.bg},children:o.jsx(My,{size:18,style:{color:re.text}})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:re.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:re.textMuted},children:""})]})]}),v?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:re.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:re.textMuted},children:" token "})]}),o.jsx(cr,{value:p,onChange:h,min:1e3,max:1e5})]}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:re.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:re.textMuted},children:""})]}),o.jsx(cr,{value:y,onChange:b,min:1e3,max:2e5})]}),o.jsx("button",{className:"w-full rounded-[14px] py-3 text-[14px] font-bold text-white",style:{background:x?"rgba(201,98,138,0.5)":"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"3px 3px 8px rgba(201,98,138,0.3)"},onClick:N,disabled:x,children:x?"...":""})]}):o.jsx("div",{className:"flex justify-center py-4",children:o.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2",style:{borderColor:re.accent,borderTopColor:"transparent"}})})]})]}),g&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:g})})]})}const A={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},q1=["claude-opus-4-6","claude-opus-4-5-20251101","claude-sonnet-4-6","claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001"];function Z1(e){try{return new URL(e).hostname}catch(t){return e}}function Md({label:e,value:t,onChange:n,placeholder:r,password:s,disabled:l}){const[a,i]=d.useState(!1);return o.jsxs("div",{className:"mb-4",children:[e&&o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:A.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:s&&!a?"password":"text",value:t,onChange:c=>n(c.target.value),placeholder:r,disabled:l,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none pr-12",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:l?A.textMuted:A.text,opacity:l?.5:1}}),s&&o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>i(!a),children:a?o.jsx(Ty,{size:16,style:{color:A.textMuted}}):o.jsx(_y,{size:16,style:{color:A.textMuted}})})]})]})}function e0({value:e,onChange:t,options:n}){return o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:A.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[12px] font-semibold transition-all",style:{background:e===r.value?A.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?A.accentDark:A.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})}function t0({value:e,onChange:t,options:n,placeholder:r}){const[s,l]=d.useState(!1),a=d.useRef(null);return d.useEffect(()=>{if(!s)return;const i=c=>{a.current&&!a.current.contains(c.target)&&l(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[s]),o.jsxs("div",{className:"relative",ref:a,children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:e?A.text:A.textMuted},onClick:()=>l(!s),children:[o.jsx("span",{className:"truncate",children:e||r||""}),o.jsx(Vr,{size:16,style:{color:A.textMuted,flexShrink:0,transform:s?"rotate(180deg)":"none"}})]}),s&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:A.bg,boxShadow:"var(--card-shadow)"},children:n.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[13px]",style:{color:A.text},onClick:()=>{t(i),l(!1)},children:[o.jsx("span",{className:"truncate",children:i}),i===e&&o.jsx(Ws,{size:12,style:{color:A.accentDark,flexShrink:0}})]},i))})]})}function n0({value:e,onChange:t}){const[n,r]=d.useState(!1),s=d.useRef(null);return d.useEffect(()=>{if(!n)return;const l=a=>{s.current&&!s.current.contains(a.target)&&r(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[n]),o.jsxs("div",{className:"relative",ref:s,children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"",value:e,onChange:l=>t(l.target.value),className:"w-full rounded-[14px] px-4 py-3 pr-10 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:A.text}}),o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>r(!n),children:o.jsx(Vr,{size:16,style:{color:A.textMuted}})})]}),n&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:A.bg,boxShadow:"var(--card-shadow)"},children:q1.map(l=>o.jsx("button",{className:"flex w-full px-4 py-3 text-left text-[13px]",style:{color:A.text},onClick:()=>{t(l),r(!1)},children:l},l))})]})}function za({value:e,onChange:t,min:n,max:r,step:s}){const[l,a]=d.useState(String(e));d.useEffect(()=>a(String(e)),[e]);const i=()=>{let c=parseFloat(l);isNaN(c)&&(c=n),c=Math.max(n,Math.min(r,c)),c=Math.round(c/s)*s,c=parseFloat(c.toFixed(4)),a(String(c)),t(c)};return o.jsx("input",{type:"number",value:l,onChange:c=>a(c.target.value),onBlur:i,onKeyDown:c=>c.key==="Enter"&&i(),step:s,min:n,max:r,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:A.text}})}function _d({on:e,onToggle:t}){return o.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":A.bg,transition:"background 0.2s"},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function Pa({children:e,className:t=""}){return o.jsx("div",{className:`rounded-[20px] p-5 mb-4 space-y-4 ${t}`,style:{background:A.bg,boxShadow:"var(--card-shadow)"},children:e})}function r0(){const e=$t(),[t,n]=d.useState([]),[r,s]=d.useState([]),[l,a]=d.useState(!0),[i,c]=d.useState(""),[u,f]=d.useState(""),[p,h]=d.useState("api_key"),[y,b]=d.useState(""),[v,w]=d.useState([]),[x,m]=d.useState(!1),[g,S]=d.useState(1),[j,N]=d.useState(!1),[k,C]=d.useState(1),[E,D]=d.useState(!1),[z,Y]=d.useState(4096),[_,V]=d.useState(null),[te,ve]=d.useState(null),[ee,P]=d.useState(!1),[I,H]=d.useState(!1),[ne,L]=d.useState(""),[U,se]=d.useState(!1),[le,J]=d.useState(!1),[Q,ge]=d.useState(null),[pe,q]=d.useState(null),[Xe,Ke]=d.useState(""),gt=d.useRef(null),ke=d.useRef(!1),st=d.useRef({});st.current={baseUrl:i,apiKey:u,authType:p,modelName:y,temperature:g,tempEnabled:j,topP:k,topPEnabled:E,maxTokens:z,editingPreset:_,providers:t};const we=d.useCallback(O=>{ve(O),setTimeout(()=>ve(null),2500)},[]),Mt=d.useCallback(async()=>{try{const[O,de]=await Promise.all([$("/api/providers"),$("/api/presets")]);n(O.providers||[]),s(de.presets||[])}catch(O){we(": "+O.message)}finally{a(!1)}},[we]);d.useEffect(()=>{Mt()},[Mt]);const xn=O=>{var ie,Re;V(O),b(O.model_name),N(O.temperature!=null),S((ie=O.temperature)!=null?ie:1),D(O.top_p!=null),C((Re=O.top_p)!=null?Re:1),Y(O.max_tokens);const de=t.find(Tt=>Tt.id===O.api_provider_id);de&&(c(de.base_url),f(de.api_key),h(de.auth_type||"api_key"))},Z=()=>{V(null),c(""),f(""),h("api_key"),b(""),S(1),N(!1),C(1),D(!1),Y(4096),w([])},ue=async()=>{if(!i.trim()||!u.trim()){we(" API  Key");return}m(!0);try{const O=await fetch(`${i.trim().replace(/\/+$/,"")}/models`,{headers:{Authorization:`Bearer ${u.trim()}`}});if(!O.ok)throw new Error(`HTTP ${O.status}`);const ie=((await O.json()).data||[]).map(Re=>Re.id).sort();w(ie),we(ie.length?` ${ie.length} `:"")}catch(O){we(": "+O.message)}finally{m(!1)}},Ce=async()=>{var O;if(!i.trim()||!u.trim()||!y.trim()){we(" API Key ");return}P(!0);try{const de=i.trim().replace(/\/+$/,""),ie={"Content-Type":"application/json",Authorization:`Bearer ${u.trim()}`};p==="oauth_token"&&(ie["anthropic-beta"]="claude-code-20250219,oauth-2025-04-20,fine-grained-tool-streaming-2025-05-14",ie["anthropic-dangerous-direct-browser-access"]="true",ie["x-app"]="cli");const Re=await fetch(`${de}/chat/completions`,{method:"POST",headers:ie,body:JSON.stringify({model:y.trim(),max_tokens:10,messages:[{role:"user",content:"Hi"}]})});if(!Re.ok){const Tt=await Re.json().catch(()=>({}));throw new Error(((O=Tt.error)==null?void 0:O.message)||`HTTP ${Re.status}`)}we(" ")}catch(de){we(": "+de.message)}finally{P(!1)}},De=async O=>{const de=st.current,ie=de.baseUrl.trim(),Re=de.apiKey.trim(),Tt=de.authType,nn=O.find(qo=>qo.base_url===ie);return nn?((nn.api_key!==Re||nn.auth_type!==Tt)&&await $(`/api/providers/${nn.id}`,{method:"PUT",body:{api_key:Re,auth_type:Tt}}),nn.id):(await $("/api/providers",{method:"POST",body:{name:Z1(ie),base_url:ie,api_key:Re,auth_type:Tt}})).id},_t=async(O,de)=>{const ie=st.current;if(!ie.baseUrl.trim()||!ie.apiKey.trim()||!ie.modelName.trim()){we("");return}J(!0);try{const Re=await De(ie.providers),Tt={name:O,model_name:ie.modelName.trim(),temperature:ie.tempEnabled?ie.temperature:null,top_p:ie.topPEnabled?ie.topP:null,max_tokens:Number(ie.maxTokens)||4096,api_provider_id:Re};ie.editingPreset&&!de?(await $(`/api/presets/${ie.editingPreset.id}`,{method:"PUT",body:Tt}),we("")):(await $("/api/presets",{method:"POST",body:Tt}),we("")),await Mt()}catch(Re){we(": "+Re.message)}finally{J(!1)}},Oe=()=>{const O=ne.trim();O&&(H(!1),_t(O,U))},Un=()=>{_&&_t(_.name,!1)},M=async()=>{if(Q){try{await $(`/api/presets/${Q.id}`,{method:"DELETE"}),we(""),(_==null?void 0:_.id)===Q.id&&Z(),Mt()}catch(O){we(": "+O.message)}ge(null)}},F=async()=>{const O=Xe.trim();if(!(!O||!pe)){try{await $(`/api/presets/${pe.id}`,{method:"PUT",body:{name:O}}),we(""),Mt()}catch(de){we("")}q(null)}},X=(O,de)=>{ke.current=!1,O.touches?O.touches[0].clientX:O.clientX,O.touches?O.touches[0].clientY:O.clientY,gt.current=setTimeout(()=>{ke.current=!0,ge(de)},600)},qe=()=>clearTimeout(gt.current);return o.jsxs("div",{className:"flex h-full flex-col",style:{background:A.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:A.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:A.text},children:"API "}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px",children:l?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:A.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs(Pa,{children:[o.jsx(Md,{label:"API ",value:i,onChange:c,placeholder:"https://api.openai.com/v1",disabled:p==="oauth_token"}),o.jsx(Md,{label:"API Key",value:u,onChange:f,placeholder:p==="oauth_token"?"sk-ant-oat01-...":"sk-...",password:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:A.textMuted},children:""}),o.jsx(e0,{value:p,onChange:O=>{h(O),O==="oauth_token"&&c("https://api.anthropic.com/v1")},options:[{value:"api_key",label:" API Key"},{value:"oauth_token",label:"Setup Token"}]})]})]}),o.jsxs(Pa,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:A.textMuted},children:""}),p==="oauth_token"?o.jsx(n0,{value:y,onChange:b}):o.jsx(t0,{value:y,onChange:b,options:v})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text},onClick:Ce,disabled:ee,children:[ee?o.jsx(od,{size:14,className:"animate-spin"}):null,""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text,opacity:p==="oauth_token"?.4:1},onClick:ue,disabled:x||p==="oauth_token",children:[x?o.jsx(od,{size:14,className:"animate-spin"}):o.jsx(Tc,{size:14}),""]})]})]}),o.jsxs(Pa,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:A.text},children:" (0-2)"}),o.jsx("div",{className:"text-[11px]",style:{color:A.textMuted},children:""})]}),o.jsx(_d,{on:j,onToggle:()=>N(!j)})]}),j&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:A.textMuted},children:""}),o.jsx(za,{value:g,onChange:S,min:0,max:2,step:.1})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:A.text},children:"Top P (0-1)"}),o.jsx(_d,{on:E,onToggle:()=>D(!E)})]}),E&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:A.textMuted},children:""}),o.jsx(za,{value:k,onChange:C,min:0,max:1,step:.05})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:A.text},children:"Max Tokens"}),o.jsx(za,{value:z,onChange:Y,min:128,max:2e5,step:1})]})]}),o.jsxs("div",{className:"mb-4 space-y-3",children:[_?o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:Un,disabled:le,children:[o.jsx(Ho,{size:14}),le?"...":""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text},onClick:()=>{se(!0),L(""),H(!0)},disabled:le,children:[o.jsx(Ey,{size:14}),""]})]}):o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>{se(!0),L(""),H(!0)},disabled:le,children:[o.jsx(Xr,{size:14}),""]}),_&&o.jsx("button",{className:"w-full py-1 text-center text-[12px]",style:{color:A.textMuted},onClick:Z,children:""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"mb-3 text-[12px] font-bold uppercase tracking-wide",style:{color:A.textMuted},children:""}),r.length===0?o.jsx("div",{className:"rounded-[20px] py-8 text-center text-[13px]",style:{background:A.bg,boxShadow:"var(--card-shadow)",color:A.textMuted},children:""}):o.jsx("div",{className:"space-y-3",children:r.map(O=>{var de,ie;return o.jsxs("div",{className:"rounded-[18px] p-4",style:{background:A.bg,boxShadow:(_==null?void 0:_.id)===O.id?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{ke.current||xn(O)},onTouchStart:Re=>X(Re,O),onTouchEnd:qe,onMouseDown:Re=>X(Re,O),onMouseUp:qe,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-[14px] font-bold truncate",style:{color:(_==null?void 0:_.id)===O.id?A.accentDark:A.text},children:O.name}),o.jsx(ih,{size:12,style:{color:A.textMuted,flexShrink:0,marginLeft:8}})]}),o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:A.textMuted},children:O.model_name}),o.jsxs("div",{className:"mt-1 text-[10px] font-mono",style:{color:A.textMuted},children:["T: ",(de=O.temperature)!=null?de:""," | Top-P: ",(ie=O.top_p)!=null?ie:""," | Max: ",O.max_tokens]})]},O.id)})})]})]})}),I&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>H(!1),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:A.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:O=>O.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:A.text},children:""}),o.jsx("input",{type:"text",value:ne,onChange:O=>L(O.target.value),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:A.text},autoFocus:!0,onKeyDown:O=>O.key==="Enter"&&Oe()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text},onClick:()=>H(!1),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:ne.trim()?"linear-gradient(135deg, var(--accent), var(--accent-dark))":"rgba(201,98,138,0.3)"},onClick:Oe,disabled:!ne.trim(),children:""})]})]})}),Q&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>ge(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:A.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:O=>O.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:A.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:A.textMuted},children:["",Q.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text},onClick:()=>ge(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:M,children:""})]})]})}),pe&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>q(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:A.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:O=>O.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:A.text},children:""}),o.jsx("input",{autoFocus:!0,type:"text",value:Xe,onChange:O=>Ke(O.target.value),className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:A.text},onKeyDown:O=>O.key==="Enter"&&F()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text},onClick:()=>q(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))"},onClick:F,children:""})]})]})}),te&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:te})})]})}const fe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Ac={thinking:{bg:"rgba(168,130,200,0.12)",color:"#8860c8",label:""},tool_use:{bg:"rgba(232,160,60,0.12)",color:"#b8820a",label:""},tool_result:{bg:"rgba(80,160,200,0.12)",color:"#1a7ab0",label:""},injected_memories:{bg:"rgba(80,180,120,0.12)",color:"#3a8a5f",label:""}},s0=[{key:"short",label:""},{key:"long",label:""},{key:"theater",label:""}],l0=[{key:"happy",label:""},{key:"sad",label:""},{key:"angry",label:""},{key:"anxious",label:""},{key:"tired",label:""},{key:"emo",label:""},{key:"flirty",label:""},{key:"proud",label:""},{key:"calm",label:""}],Td=300;function Vh({block_type:e}){const t=Ac[e]||{bg:"rgba(136,136,160,0.1)",color:fe.textMuted,label:e};return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:t.bg,color:t.color},children:t.label})}function o0({content:e,blockType:t}){const[n,r]=d.useState(!1),[s,l]=d.useState(null),[a,i]=d.useState(!1),[c,u]=d.useState(!1),f=e.length>Td,p=async y=>{if(y.stopPropagation(),s){i(!a);return}u(!0);try{const b=await $("/api/cot/translate",{method:"POST",body:{text:e}});l(b.translated),i(!0)}catch(b){console.error("Translation failed:",b)}finally{u(!1)}},h=a&&s?s:e;return o.jsxs(o.Fragment,{children:[t==="thinking"&&o.jsx("div",{className:"mb-1 flex justify-end",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#8860c8",background:"rgba(168,130,200,0.18)"},onClick:p,disabled:c,children:c?"...":a?"":""})}),o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:fe.text},children:f&&!n?h.slice(0,Td)+"...":h}),f&&o.jsx("div",{className:"mt-1.5 flex justify-center",children:o.jsx("button",{className:"rounded-full px-3 py-0.5 text-[11px]",style:{color:fe.accentDark,background:"rgba(232,160,191,0.12)"},onClick:y=>{y.stopPropagation(),r(!n)},children:n?"":""})})]})}function a0({avatarUrl:e}){return o.jsx("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full overflow-hidden",style:{boxShadow:"var(--icon-inset)",background:fe.bg},children:e?o.jsx("img",{src:e,alt:"",className:"h-full w-full object-cover"}):o.jsx("span",{style:{fontSize:16},children:""})})}function Dd(e){return e?e>=1e3?`${(e/1e3).toFixed(1)}k`:String(e):"0"}function i0(e){if(!e)return null;const t=e/1e3;return t>=100?`${Math.round(t)}s`:`${t.toFixed(1)}s`}function c0({prompt:e,completion:t,elapsedMs:n}){return!e&&!t&&!n?null:o.jsxs(o.Fragment,{children:[e||t?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(80,160,120,0.12)",color:"#3a8a5f"},children:["",Dd(e)]}),o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(160,100,220,0.12)",color:"#8a5abf"},children:["",Dd(t)]})]}):null,n?o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(200,140,60,0.12)",color:"#b8820a"},children:i0(n)}):null]})}function u0(e){const t=[],n=[],r=[],s=[];for(const a of e)a.block_type==="thinking"?t.push(a):a.block_type==="tool_use"?n.push(a):a.block_type==="tool_result"?r.push(a):s.push(a);const l=[];for(let a=0;a<n.length;a++)l.push(n[a]),a<r.length&&l.push(r[a]);for(let a=n.length;a<r.length;a++)l.push(r[a]);return[...t,...l,...s]}function d0({memories:e}){const[t,n]=d.useState(!1);if(!e||e.length===0)return null;const r=Ac.injected_memories;return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:r.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-2",onClick:()=>n(!t),children:[o.jsx(Vh,{block_type:"injected_memories"}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:r.color},children:["(",e.length,")"]}),t?o.jsx(ah,{size:12,style:{color:r.color}}):o.jsx(Vr,{size:12,style:{color:r.color}})]}),t&&o.jsx("div",{className:"mt-2 space-y-1",children:e.map(s=>o.jsxs("p",{className:"text-[11px] leading-relaxed",style:{color:fe.text},children:[o.jsxs("span",{style:{color:r.color,fontWeight:600},children:["#",s.id]})," ",s.content]},s.id))})]})}function f0({item:e,expanded:t,onToggle:n,live:r,avatarUrl:s}){const l=e.rounds.map(i=>({...i,blocks:u0(i.blocks.filter(c=>c.block_type!=="text"&&c.block_type!=="usage"))})).filter(i=>i.blocks.length>0),a=l.length>0||e.injectedMemories&&e.injectedMemories.length>0||r&&e.textPreview;return o.jsxs("div",{className:"rounded-[18px] overflow-hidden",style:{background:fe.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-3 p-4",onClick:n,children:[o.jsx(a0,{avatarUrl:s}),o.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r&&o.jsx("span",{className:"inline-block h-3 w-3 animate-spin rounded-full border-[1.5px]",style:{borderColor:fe.accentDark,borderTopColor:"transparent"}}),e.has_tool_calls&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold",style:{background:"rgba(232,160,60,0.15)",color:"#b8820a"},children:""}),o.jsx(c0,{prompt:e.prompt_tokens||0,completion:e.completion_tokens||0,elapsedMs:e.elapsed_ms||0}),o.jsx("span",{className:"text-[10px]",style:{color:fe.textMuted},children:e.created_at||""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[13px]",style:{color:fe.text},children:e.preview||"()"})]}),t?o.jsx(ah,{size:16,style:{color:fe.textMuted,flexShrink:0}}):o.jsx(Vr,{size:16,style:{color:fe.textMuted,flexShrink:0}})]}),t&&a&&o.jsxs("div",{className:"px-4 pb-4",children:[o.jsx(d0,{memories:e.injectedMemories}),l.map(i=>o.jsxs("div",{className:"mb-3",children:[l.length>1&&o.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:fe.textMuted},children:[" ",i.round_index+1]}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}})]}),i.blocks.map((c,u)=>{const f=Ac[c.block_type]||{bg:"rgba(136,136,160,0.08)",color:fe.textMuted,label:c.block_type};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:f.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(Vh,{block_type:c.block_type}),c.tool_name&&o.jsx("span",{className:"text-[10px] font-mono",style:{color:f.color},children:c.tool_name})]}),o.jsx(o0,{content:c.content,blockType:c.block_type})]},u)})]},i.round_index)),r&&e.textPreview&&o.jsxs("div",{className:"rounded-[12px] p-3",style:{background:"rgba(232,160,191,0.08)"},children:[o.jsx("div",{className:"mb-1",children:o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(232,160,191,0.15)",color:fe.accentDark},children:""})}),o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:fe.text},children:e.textPreview})]})]})]})}function p0(){const e=$t(),[t,n]=d.useState([]),[r,s]=d.useState(!0),[l,a]=d.useState(null),[i,c]=d.useState(()=>localStorage.getItem("chat_mode")||"long"),[u,f]=d.useState(!1),[p,h]=d.useState(new Set),[y,b]=d.useState(null),[v,w]=d.useState(null),x=d.useRef(null),[m,g]=d.useState(null),[S,j]=d.useState(!1),N=d.useRef(null),k=()=>{s(!0),b(null),$("/api/cot?limit=30").then(E=>{n(Array.isArray(E)?E:[])}).catch(E=>{console.error("COT load error:",E),b(E.message||"")}).finally(()=>s(!1))};d.useEffect(()=>{k()},[]),d.useEffect(()=>{$("/api/sessions?limit=1").then(E=>{var z;const D=(z=E.sessions)==null?void 0:z[0];D!=null&&D.assistant_id&&Yr(`assistant-avatar-${D.assistant_id}`).then(Y=>{Y&&w(Y)}).catch(()=>{})}).catch(()=>{})},[]),d.useEffect(()=>{$("/api/settings/mood").then(E=>g(E.mood||"calm")).catch(()=>g("calm"))},[]),d.useEffect(()=>{if(!S)return;const E=D=>{N.current&&!N.current.contains(D.target)&&j(!1)};return document.addEventListener("pointerdown",E),()=>document.removeEventListener("pointerdown",E)},[S]),d.useEffect(()=>{const E=localStorage.getItem("whisper_token");if(!E)return;const z=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/cot?token=${encodeURIComponent(E)}`;let Y,_,V=!1;const te=()=>{V||(Y=new WebSocket(z),x.current=Y,Y.onopen=()=>f(!0),Y.onmessage=ve=>{try{const ee=JSON.parse(ve.data),{type:P,request_id:I}=ee,H=L=>{const U=L.findIndex(Q=>Q.request_id===I);return U>=0?[L,U]:[[{request_id:I,created_at:new Date().toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),preview:"...",has_tool_calls:!1,rounds:[],injectedMemories:[],textPreview:""},...L],0]},ne=(L,U)=>{const se=L.findIndex(J=>J.round_index===U);if(se>=0)return[L,se];const le=[...L,{round_index:U,blocks:[]}];return le.sort((J,Q)=>J.round_index-Q.round_index),[le,le.findIndex(J=>J.round_index===U)]};if(P==="done"){h(L=>{const U=new Set(L);return U.delete(I),U}),n(L=>L.map(U=>U.request_id===I?{...U,prompt_tokens:ee.prompt_tokens||0,completion_tokens:ee.completion_tokens||0,elapsed_ms:ee.elapsed_ms||0,textPreview:""}:U));return}if(P==="injected_memories"){n(L=>{let[U,se]=H(L);return U=[...U],U[se]={...U[se],injectedMemories:ee.memories||[]},U}),h(L=>new Set(L).add(I)),a(I);return}if(P==="thinking_delta"){n(L=>{let[U,se]=H(L);U=[...U];const le={...U[se]};let[J,Q]=ne([...le.rounds],ee.round_index);const ge={...J[Q],blocks:[...J[Q].blocks]};let pe=-1;for(let q=ge.blocks.length-1;q>=0;q--)if(ge.blocks[q].block_type==="thinking"){pe=q;break}return pe>=0?ge.blocks[pe]={...ge.blocks[pe],content:ge.blocks[pe].content+ee.content}:ge.blocks.push({block_type:"thinking",content:ee.content,tool_name:null}),J[Q]=ge,le.rounds=J,U[se]=le,U}),h(L=>new Set(L).add(I)),a(I);return}if(P==="text_delta"){n(L=>{let[U,se]=H(L);U=[...U];const le={...U[se]};return le.textPreview=(le.textPreview||"")+ee.content,(!le.preview||le.preview==="...")&&(le.preview=le.textPreview.slice(0,80)),U[se]=le,U}),h(L=>new Set(L).add(I)),a(I);return}if(P==="tool_use"||P==="tool_result"){n(L=>{let[U,se]=H(L);U=[...U];const le={...U[se]};let[J,Q]=ne([...le.rounds],ee.round_index);return J[Q]={...J[Q],blocks:[...J[Q].blocks,{block_type:P,content:ee.content,tool_name:ee.tool_name}]},le.rounds=J,P==="tool_use"&&(le.has_tool_calls=!0),U[se]=le,U}),h(L=>new Set(L).add(I)),a(I);return}if(ee.block_type){const{round_index:L,block_type:U,content:se,tool_name:le}=ee;n(J=>{let[Q,ge]=H(J);Q=[...Q];const pe={...Q[ge]};let[q,Xe]=ne([...pe.rounds],L);return q[Xe]={...q[Xe],blocks:[...q[Xe].blocks,{block_type:U,content:se,tool_name:le}]},pe.rounds=q,U==="tool_use"&&(pe.has_tool_calls=!0),U==="text"&&(!pe.preview||pe.preview==="...")&&(pe.preview=se.slice(0,80)),Q[ge]=pe,Q}),h(J=>new Set(J).add(I)),a(I)}}catch(ee){}},Y.onclose=()=>{f(!1),x.current=null,V||(_=setTimeout(te,3e3))},Y.onerror=()=>Y.close())};return te(),()=>{V=!0,clearTimeout(_),x.current&&(x.current.onclose=null,x.current.close())}},[]),d.useEffect(()=>{localStorage.setItem("chat_mode",i);const E=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({...E,shortMode:i==="short",theaterMode:i==="theater"})),$("/api/settings/chat-mode",{method:"PUT",body:{mode:i}}).catch(()=>{})},[i]);const C=E=>{g(E),j(!1),$("/api/settings/mood",{method:"PUT",body:{mood:E}}).catch(()=>{})};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:fe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:fe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:fe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:fe.text},children:"COT "}),o.jsxs("div",{className:"flex items-center gap-2",children:[u&&o.jsx("div",{className:"h-2 w-2 rounded-full",style:{background:"#2a9d5c"},title:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:fe.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:k,disabled:r,children:o.jsx(Tc,{size:16,style:{color:fe.accentDark},className:r?"animate-spin":""})})]})]}),o.jsx("div",{className:"shrink-0 pb-3",style:{paddingLeft:20,paddingRight:20},children:o.jsxs("div",{className:"flex items-stretch gap-4 justify-center",children:[o.jsxs("div",{className:"relative flex",ref:N,children:[o.jsx("button",{className:"flex w-[42px] shrink-0 items-center justify-center rounded-[14px]",style:{background:fe.bg,boxShadow:"var(--inset-shadow)"},onClick:()=>m&&j(!S),children:m?o.jsx("img",{src:`/miniapp/assets/mood/${m}.png`,alt:m,className:"h-6 w-6",style:{imageRendering:"pixelated"}}):o.jsx("div",{className:"h-6 w-6"})}),S&&o.jsx("div",{className:"absolute left-0 top-12 z-50 rounded-[16px] overflow-hidden",style:{background:fe.bg,boxShadow:"var(--card-shadow-sm)",width:174},children:l0.map((E,D)=>{const z=Math.floor(D/3),Y=D%3,_=m===E.key;return o.jsxs("button",{className:"inline-flex flex-col items-center justify-center",style:{width:"calc(100% / 3)",padding:"8px 0 6px",background:_?"rgba(232,160,191,0.18)":"transparent",boxShadow:[Y<2?"inset -1px 0 0 rgba(136,136,160,0.12)":"",z<2?"inset 0 -1px 0 rgba(136,136,160,0.12)":""].filter(Boolean).join(", ")||"none"},onClick:()=>C(E.key),children:[o.jsx("img",{src:`/miniapp/assets/mood/${E.key}.png`,alt:E.label,className:"h-7 w-7",style:{imageRendering:"pixelated",filter:_?"drop-shadow(0 0 3px #e8a0bf)":"none"}}),o.jsx("span",{className:"text-[10px] mt-0.5",style:{color:_?"#d48aab":fe.textMuted},children:E.label})]},E.key)})})]}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:fe.bg,width:240},children:s0.map(E=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:i===E.key?fe.bg:"transparent",boxShadow:i===E.key?"var(--card-shadow-sm)":"none",color:i===E.key?fe.accentDark:fe.textMuted},onClick:()=>c(E.key),children:E.label},E.key))})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:fe.accent,borderTopColor:"transparent"}})}):y?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(ld,{size:36,style:{color:"#ef4444",opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:"#ef4444"},children:y})]}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(ld,{size:36,style:{color:fe.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:fe.textMuted},children:" COT "})]}):t.map(E=>o.jsx("div",{className:"mb-3 rounded-[18px]",style:{background:fe.bg,boxShadow:"var(--card-shadow-sm)"},children:o.jsx(f0,{item:E,expanded:l===E.request_id,onToggle:()=>a(l===E.request_id?null:E.request_id),live:p.has(E.request_id),avatarUrl:v})},E.request_id))})]})}const Ue={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Cl=80;function h0({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({sx:0,sy:0,base:0,cur:0,drag:!1,locked:!1,horiz:!1}),l=d.useCallback((i,c)=>{const u=n.current,f=r.current;if(!u)return;const p=c?"all .25s ease":"none";if(u.style.transition=p,u.style.transform=i?`translateX(${i}px)`:"",f){const h=Math.min(1,Math.abs(i)/Cl);f.style.transition=p,f.style.opacity=`${h}`}i||(u.style.willChange="auto"),s.current.cur=i},[]),a=d.useCallback(()=>l(0,!0),[l]);return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Ue.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{onClick:()=>{a(),t()},className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},children:[o.jsx(Kr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",style:{},onTouchStart:i=>{const c=i.touches[0],u=s.current;u.sx=c.clientX,u.sy=c.clientY,u.base=u.cur,u.drag=!0,u.locked=!1,u.horiz=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},onTouchMove:i=>{const c=s.current;if(!c.drag)return;const u=i.touches[0],f=u.clientX-c.sx,p=u.clientY-c.sy;if(!c.locked){if(Math.abs(f)<5&&Math.abs(p)<5)return;c.locked=!0,c.horiz=Math.abs(f)>Math.abs(p),c.horiz&&n.current&&(n.current.style.willChange="transform")}if(!c.horiz){c.drag=!1;return}i.preventDefault();const h=Math.max(-Cl,Math.min(0,c.base+f));n.current&&(n.current.style.transform=`translateX(${h}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(h)/Cl)}`),c.cur=h},onTouchEnd:()=>{s.current.drag=!1,l(s.current.cur<-40?-Cl:0,!0)},children:e})]})}function m0({msg:e,roleLabel:t,roleColor:n,fmtTime:r,onDelete:s}){const[l,a]=d.useState(!1),[i,c]=d.useState(!1),u=d.useRef(null);return d.useLayoutEffect(()=>{const f=u.current;f&&!l&&c(f.scrollHeight>f.clientHeight+1)},[e.content,l]),o.jsx(h0,{onDelete:s,children:o.jsxs("div",{className:"rounded-[18px] p-3",style:{background:Ue.bg},children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:n(e.role)},children:t(e.role)}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[e.summarized&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px] font-semibold",style:{background:"rgba(58,138,95,0.15)",color:"#2d7a4a"},children:""}),o.jsx("span",{className:"text-[10px]",style:{color:Ue.textMuted},children:r(e.created_at)})]})]}),o.jsx("div",{ref:u,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:Ue.text}:{color:Ue.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:e.content}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:"#d48aab",background:"rgba(232,160,191,0.1)"},onClick:f=>{f.stopPropagation(),a(!l)},children:l?"":""})})]})})}function x0(){const e=$t(),[t,n]=d.useState([]),[r,s]=d.useState(null),[l,a]=d.useState(!0),[i,c]=d.useState(!1),u=async()=>{var v;a(!0);try{const x=(v=(await $("/api/sessions?limit=1")).sessions)==null?void 0:v[0];if(!x){a(!1);return}s(x.id);const m=await $(`/api/sessions/${x.id}/messages?limit=50`);n((m.messages||[]).reverse()),c(m.has_more||!1)}catch(w){console.error(w)}a(!1)};d.useEffect(()=>{u()},[]);const f=async v=>{if(r)try{await $(`/api/sessions/${r}/messages/${v}`,{method:"DELETE"}),n(w=>w.filter(x=>x.id!==v))}catch(w){console.error("Delete failed",w)}},p=async()=>{if(!r||!i||l)return;const v=t[t.length-1];if(v){a(!0);try{const w=await $(`/api/sessions/${r}/messages?limit=50&before_id=${v.id}`),x=(w.messages||[]).reverse();n(m=>[...m,...x]),c(w.has_more||!1)}catch(w){console.error(w)}a(!1)}},h=v=>{if(!v)return"";const w=new Date(v),x=new Date;return w.toDateString()===x.toDateString()?w.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):w.toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})},y=v=>v==="user"?"":v==="assistant"?"AI":"",b=v=>v==="user"?Ue.accentDark:v==="assistant"?"#3a9b5c":Ue.textMuted;return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ue.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ue.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:Ue.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ue.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ue.bg,boxShadow:l?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:u,disabled:l,children:o.jsx(Tc,{size:16,style:{color:Ue.accentDark},className:l?"animate-spin":""})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("p",{className:"text-[11px]",style:{color:Ue.textMuted},children:""})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l&&t.length===0?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ue.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:Ue.textMuted},children:""}):o.jsxs(o.Fragment,{children:[t.map(v=>o.jsx(m0,{msg:v,roleLabel:y,roleColor:b,fmtTime:h,onDelete:()=>f(v.id)},v.id)),i&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:Ue.bg,boxShadow:"var(--card-shadow-sm)",color:Ue.accentDark},onClick:p,disabled:l,children:l?"...":""})]})})]})}const W={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},g0=[{key:"memories",label:""},{key:"summaries",label:""},{key:"messages",label:""}],El=80,Rd={identity:{color:"#7b5ea7",bg:"#ede4f7"},relationship:{color:"#c26a8a",bg:"#f7e0ea"},bond:{color:"#d48aab",bg:"#fce8f0"},conflict:{color:"#b5454a",bg:"#f5dede"},fact:{color:"#4a8ab5",bg:"#deedf5"},preference:{color:"#9b7a3b",bg:"#f0ebd8"},health:{color:"#4a9b6e",bg:"#ddf0e5"},task:{color:"#6b7b9b",bg:"#e0e6f0"},ephemeral:{color:"#9b9b9b",bg:"#ececec"},other:{color:"#8a7a6a",bg:"#efe8df"}};function Sr(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function $c({text:e,keyword:t}){if(!t||!e)return o.jsx(o.Fragment,{children:e});const n=e.toLowerCase(),r=t.toLowerCase(),s=[];let l=0,a=n.indexOf(r,l);for(;a!==-1;)a>l&&s.push(o.jsx("span",{children:e.slice(l,a)},l)),s.push(o.jsx("span",{style:{color:W.accentDark,fontWeight:600},children:e.slice(a,a+r.length)},`h${a}`)),l=a+r.length,a=n.indexOf(r,l);return l<e.length&&s.push(o.jsx("span",{children:e.slice(l)},l)),o.jsx(o.Fragment,{children:s})}function y0({message:e,onConfirm:t,onCancel:n}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:W.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:W.text},children:""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:W.textMuted},children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.text},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function v0({initialText:e,onSave:t,onCancel:n}){const[r,s]=d.useState(e);return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-5 w-full max-w-[340px] rounded-[18px] p-4",style:{background:W.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:l=>l.stopPropagation(),children:[o.jsx("textarea",{className:"w-full rounded-[12px] p-3 text-[12px] leading-relaxed resize-none outline-none",style:{background:W.bg,boxShadow:"var(--inset-shadow)",color:W.text,minHeight:140,maxHeight:280},value:r,onChange:l=>s(l.target.value),autoFocus:!0}),o.jsxs("div",{className:"mt-3 flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.textMuted},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.accentDark},onClick:()=>t(r),disabled:!r.trim(),children:""})]})]})})}function Xh({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({sx:0,sy:0,base:0,cur:0,drag:!1,locked:!1,horiz:!1}),l=d.useCallback((i,c)=>{const u=n.current,f=r.current;if(!u)return;const p=c?"all .25s ease":"none";u.style.transition=p,u.style.transform=i?`translateX(${i}px)`:"",f&&(f.style.transition=p,f.style.opacity=`${Math.min(1,Math.abs(i)/El)}`),i||(u.style.willChange="auto"),s.current.cur=i},[]),a=d.useCallback(()=>l(0,!0),[l]);return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{onClick:()=>{a(),t()},className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},children:[o.jsx(Kr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i=>{const c=i.touches[0],u=s.current;u.sx=c.clientX,u.sy=c.clientY,u.base=u.cur,u.drag=!0,u.locked=!1,u.horiz=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},onTouchMove:i=>{const c=s.current;if(!c.drag)return;const u=i.touches[0],f=u.clientX-c.sx,p=u.clientY-c.sy;if(!c.locked){if(Math.abs(f)<5&&Math.abs(p)<5)return;c.locked=!0,c.horiz=Math.abs(f)>Math.abs(p),c.horiz&&n.current&&(n.current.style.willChange="transform")}if(!c.horiz){c.drag=!1;return}i.preventDefault();const h=Math.max(-El,Math.min(0,c.base+f));n.current&&(n.current.style.transform=`translateX(${h}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(h)/El)}`),c.cur=h},onTouchEnd:()=>{s.current.drag=!1,l(s.current.cur<-40?-El:0,!0)},children:e})]})}function zd({children:e,time:t,badge:n,keyword:r,onSwipeDelete:s,onEdit:l}){const[a,i]=d.useState(!1),[c,u]=d.useState(!1),f=d.useRef(null),p=typeof e=="string"?e:"",h=!!s;d.useLayoutEffect(()=>{const b=f.current;b&&!a&&u(b.scrollHeight>b.clientHeight+1)},[p,a]);const y=o.jsxs("div",{className:h?"rounded-[18px] p-3":"mb-3 rounded-[18px] p-3",style:{background:W.bg,boxShadow:h?"none":"var(--card-shadow-sm)"},children:[o.jsxs("div",{className:"flex items-start justify-between gap-1",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[n,o.jsx("div",{ref:f,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:a?{color:W.text}:{color:W.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>i(!a),children:o.jsx($c,{text:p,keyword:r})})]}),l&&o.jsx("button",{className:"mt-0.5 flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)"},onClick:b=>{b.stopPropagation(),l()},children:o.jsx(ih,{size:11,style:{color:W.accentDark}})})]}),o.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:W.textMuted},children:t||""}),(c||a)&&o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:W.accentDark,background:"rgba(232,160,191,0.1)"},onClick:b=>{b.stopPropagation(),i(!a)},children:a?"":""})]})]});return s?o.jsx(Xh,{onDelete:s,children:y}):y}function w0({content:e,deletedAt:t,keyword:n,onRestore:r,onPermanentDelete:s}){const[l,a]=d.useState(!1),[i,c]=d.useState(!1),u=d.useRef(null);return d.useLayoutEffect(()=>{const f=u.current;f&&!l&&c(f.scrollHeight>f.clientHeight+1)},[e,l]),o.jsxs("div",{className:"mb-2 rounded-[14px] p-3",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",opacity:.75},children:[o.jsx("div",{ref:u,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:W.text}:{color:W.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:o.jsx($c,{text:e,keyword:n})}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:W.accentDark,background:"rgba(232,160,191,0.1)"},onClick:f=>{f.stopPropagation(),a(!l)},children:l?"":""})}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:W.textMuted},children:t?` ${Sr(t)}`:""}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(59,130,246,0.1)",color:"#3b82f6"},onClick:r,children:""}),o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(239,68,68,0.1)",color:"#ef4444"},onClick:s,children:""})]})]})]})}function b0({msg:e,keyword:t,roleLabel:n,roleColor:r,onDelete:s}){const[l,a]=d.useState(!1),[i,c]=d.useState(!1),u=d.useRef(null);return d.useLayoutEffect(()=>{const f=u.current;f&&!l&&c(f.scrollHeight>f.clientHeight+1)},[e.content,l]),o.jsx(Xh,{onDelete:s,children:o.jsxs("div",{className:"rounded-[18px] p-3",style:{background:W.bg},children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:r(e.role)},children:n(e.role)}),e.summary_group_id&&o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(74,138,181,0.1)",color:"#4a8ab5"},children:["",e.summary_group_id]})]}),o.jsx("span",{className:"text-[10px]",style:{color:W.textMuted},children:Sr(e.created_at)})]}),o.jsx("div",{ref:u,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:W.text}:{color:W.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:o.jsx($c,{text:e.content,keyword:t})}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:W.accentDark,background:"rgba(232,160,191,0.1)"},onClick:f=>{f.stopPropagation(),a(!l)},children:l?"":""})})]})})}function k0(){const e=$t(),[t,n]=d.useState("memories"),[r,s]=d.useState(!1),[l,a]=d.useState(null),[i,c]=d.useState([]),[u,f]=d.useState(null),[p,h]=d.useState(""),[y,b]=d.useState(null),[v,w]=d.useState(null),[x,m]=d.useState([]),[g,S]=d.useState([]),[j,N]=d.useState([]),[k,C]=d.useState([]),[E,D]=d.useState([]),[z,Y]=d.useState(!0),[_,V]=d.useState(!1),[te,ve]=d.useState(!1),[ee,P]=d.useState(!1);d.useEffect(()=>{$("/api/sessions?limit=50").then(M=>{const F=M.sessions||[];c(F),F.length>0&&!l&&a(F[0].id)}).catch(()=>{})},[]),d.useEffect(()=>{l&&$(`/api/sessions/${l}/info`).then(M=>f(M.assistant_name||null)).catch(()=>f(null))},[l]);const I=50,H=d.useRef(""),ne=d.useRef(null);d.useEffect(()=>{l&&U()},[l,r]),d.useEffect(()=>{l&&!r&&U()},[t]),d.useEffect(()=>(ne.current&&clearTimeout(ne.current),ne.current=setTimeout(()=>{const M=p.trim();M!==H.current&&(H.current=M,l&&U(M))},400),()=>{ne.current&&clearTimeout(ne.current)}),[p]);const L=M=>{const F=(M!=null?M:H.current||"").trim();return F?`&search=${encodeURIComponent(F)}`:""},U=async M=>{if(!l)return;Y(!0);const F=L(M);try{if(r){const[X,qe]=await Promise.all([$("/api/memories/trash?limit=100"),$(`/api/sessions/${l}/summaries/trash`)]);C(X.memories||[]),D(qe.summaries||[])}else if(t==="memories"){const X=await $(`/api/memories?limit=${I}&offset=0${F}`);m(X.memories||[]),V((X.total||0)>(X.memories||[]).length)}else if(t==="summaries"){const X=await $(`/api/sessions/${l}/summaries?limit=${I}&offset=0${F}`);S(X.summaries||[]),ve((X.total||0)>(X.summaries||[]).length)}else{const X=await $(`/api/sessions/${l}/messages?limit=50${F}`);N((X.messages||[]).reverse()),P(X.has_more||!1)}}catch(X){console.error(X)}Y(!1)},se=async()=>{if(!_||z)return;Y(!0);const M=L();try{const F=await $(`/api/memories?limit=${I}&offset=${x.length}${M}`),X=F.memories||[];m(qe=>[...qe,...X]),V((F.total||0)>x.length+X.length)}catch(F){console.error(F)}Y(!1)},le=async()=>{if(!l||!te||z)return;Y(!0);const M=L();try{const F=await $(`/api/sessions/${l}/summaries?limit=${I}&offset=${g.length}${M}`),X=F.summaries||[];S(qe=>[...qe,...X]),ve((F.total||0)>g.length+X.length)}catch(F){console.error(F)}Y(!1)},J=async()=>{if(!l||!ee||z)return;const M=j[j.length-1];if(!M)return;Y(!0);const F=L();try{const X=await $(`/api/sessions/${l}/messages?limit=50&before_id=${M.id}${F}`);N(qe=>[...qe,...(X.messages||[]).reverse()]),P(X.has_more||!1)}catch(X){console.error(X)}Y(!1)},Q=p.trim(),ge=d.useMemo(()=>Q?k.filter(M=>M.content.toLowerCase().includes(Q.toLowerCase())):k,[k,Q]),pe=d.useMemo(()=>Q?E.filter(M=>(M.summary_content||"").toLowerCase().includes(Q.toLowerCase())):E,[E,Q]),q=(M,F)=>b({message:M,action:F}),Xe=M=>q("",async()=>{await $(`/api/memories/${M}`,{method:"DELETE"}),m(F=>F.filter(X=>X.id!==M))}),Ke=M=>q("",async()=>{await $(`/api/sessions/${l}/summaries/${M}`,{method:"DELETE"}),S(F=>F.filter(X=>X.id!==M))}),gt=M=>q("",async()=>{await $(`/api/sessions/${l}/messages/${M}`,{method:"DELETE"}),N(F=>F.filter(X=>X.id!==M))}),ke=async M=>{await $(`/api/memories/${M}/restore`,{method:"POST"}),C(F=>F.filter(X=>X.id!==M))},st=M=>q("",async()=>{await $(`/api/memories/${M}/permanent`,{method:"DELETE"}),C(F=>F.filter(X=>X.id!==M))}),we=async M=>{await $(`/api/sessions/${l}/summaries/${M}/restore`,{method:"POST"}),D(F=>F.filter(X=>X.id!==M))},Mt=M=>q("",async()=>{await $(`/api/sessions/${l}/summaries/${M}/permanent`,{method:"DELETE"}),D(F=>F.filter(X=>X.id!==M))}),xn=async M=>{if(v){try{v.type==="memory"?(await $(`/api/memories/${v.id}`,{method:"PUT",body:{content:M}}),m(F=>F.map(X=>X.id===v.id?{...X,content:M}:X))):(await $(`/api/sessions/${l}/summaries/${v.id}`,{method:"PATCH",body:{summary_content:M}}),S(F=>F.map(X=>X.id===v.id?{...X,summary_content:M}:X)))}catch(F){console.error(F)}w(null)}},Z=M=>M==="user"?"":M==="assistant"?u||"":"",ue=M=>M==="user"?W.accentDark:M==="assistant"?"#8d68c4":W.textMuted,Un=r?(()=>{if(z)return o.jsx(Ml,{});const M=t==="memories"?ge:pe;return M.length===0?o.jsx(_l,{text:Q?"":""}):M.map(F=>o.jsx(w0,{content:F.content||F.summary_content||"()",deletedAt:F.deleted_at,keyword:Q,onRestore:()=>t==="memories"?ke(F.id):we(F.id),onPermanentDelete:()=>t==="memories"?st(F.id):Mt(F.id)},F.id))})():t==="memories"?z&&x.length===0?o.jsx(Ml,{}):x.length===0?o.jsx(_l,{text:Q?"":""}):o.jsxs(o.Fragment,{children:[x.map(M=>o.jsx(zd,{time:M.updated_at?`${Sr(M.created_at)}   ${Sr(M.updated_at)}`:Sr(M.created_at),keyword:Q,onSwipeDelete:()=>Xe(M.id),onEdit:()=>w({type:"memory",id:M.id,text:M.content}),badge:(()=>{const F=Rd[M.klass]||Rd.other;return o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:F.bg,color:F.color},children:M.klass}),o.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:W.textMuted},children:["#",M.id]})]})})(),children:M.content},M.id)),_&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.accentDark},onClick:se,disabled:z,children:z?"...":""})]}):t==="summaries"?z&&g.length===0?o.jsx(Ml,{}):g.length===0?o.jsx(_l,{text:Q?"":""}):o.jsxs(o.Fragment,{children:[g.map(M=>o.jsx(zd,{time:Sr(M.created_at),keyword:Q,onSwipeDelete:()=>Ke(M.id),onEdit:()=>w({type:"summary",id:M.id,text:M.summary_content}),badge:o.jsxs(o.Fragment,{children:[M.mood_tag&&o.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:"rgba(232,160,191,0.15)",color:W.accentDark},children:M.mood_tag}),o.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:W.textMuted},children:["#",M.id]})]}),children:M.summary_content||"()"},M.id)),te&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.accentDark},onClick:le,disabled:z,children:z?"...":""})]}):z&&j.length===0?o.jsx(Ml,{}):j.length===0?o.jsx(_l,{text:Q?"":""}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"mb-2 text-[11px]",style:{color:W.textMuted},children:""}),j.map(M=>o.jsx(b0,{msg:M,keyword:Q,roleLabel:Z,roleColor:ue,onDelete:()=>gt(M.id)},M.id)),ee&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.accentDark},onClick:J,disabled:z,children:z?"...":""})]});return o.jsxs("div",{className:"flex h-full flex-col",style:{background:W.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:W.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:W.text},children:r?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:W.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>s(!r),children:o.jsx(Kr,{size:16,style:{color:r?"#ef4444":W.accentDark}})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:W.bg,boxShadow:"var(--inset-shadow)"},children:g0.map(M=>{const F=r&&M.key==="messages",X=t===M.key;return o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:F?{color:W.textMuted,opacity:.35,cursor:"default"}:X?{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.accentDark}:{color:W.textMuted},disabled:F,onClick:()=>!F&&n(M.key),children:M.label},M.key)})})}),o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative",style:{width:"33%"},children:[o.jsx("select",{className:"w-full appearance-none rounded-[12px] py-2 pl-3 pr-7 text-[11px] font-medium outline-none truncate",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.text,WebkitAppearance:"none"},value:l!=null?l:"",onChange:M=>a(Number(M.target.value)),children:i.map(M=>o.jsxs("option",{value:M.id,children:["#",M.id," ",M.title||""]},M.id))}),o.jsx(Vr,{size:12,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2",style:{color:W.textMuted}})]}),o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Oy,{size:13,className:"absolute left-2.5 top-1/2 -translate-y-1/2",style:{color:W.textMuted}}),o.jsx("input",{className:"w-full rounded-[12px] py-2 pl-8 pr-7 text-[11px] outline-none",style:{background:W.bg,boxShadow:"var(--inset-shadow)",color:W.text},placeholder:"...",value:p,onChange:M=>h(M.target.value)}),p&&o.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>h(""),children:o.jsx(el,{size:13,style:{color:W.textMuted}})})]})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:Un}),y&&o.jsx(y0,{message:y.message,onConfirm:async()=>{try{await y.action()}catch(M){console.error(M)}b(null)},onCancel:()=>b(null)}),v&&o.jsx(v0,{initialText:v.text,onSave:xn,onCancel:()=>w(null)})]})}function Ml(){return o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:W.accent,borderTopColor:"transparent"}})})}function _l({text:e}){return o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:W.textMuted},children:e})}const K={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},j0=[{key:"theirs",label:""},{key:"mine",label:""}],Tl=80;function Kh(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function S0({message:e,onConfirm:t,onCancel:n}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:K.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:K.text},children:""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:K.textMuted},children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:K.bg,boxShadow:"var(--card-shadow-sm)",color:K.text},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function N0({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({sx:0,sy:0,base:0,cur:0,drag:!1,locked:!1,horiz:!1}),l=d.useCallback((i,c)=>{const u=n.current,f=r.current;if(!u)return;const p=c?"all 0.25s cubic-bezier(.4,0,.2,1)":"none";u.style.transition=p,u.style.transform=i?`translateX(${i}px)`:"",f&&(f.style.transition=p,f.style.opacity=`${Math.min(1,Math.abs(i)/Tl)}`),i||(u.style.willChange="auto"),s.current.cur=i},[]),a=d.useCallback(()=>l(0,!0),[l]);return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:K.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{onClick:()=>{a(),t()},className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},children:[o.jsx(Kr,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i=>{const c=i.touches[0],u=s.current;u.sx=c.clientX,u.sy=c.clientY,u.base=u.cur,u.drag=!0,u.locked=!1,u.horiz=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},onTouchMove:i=>{const c=s.current;if(!c.drag)return;const u=i.touches[0],f=u.clientX-c.sx,p=u.clientY-c.sy;if(!c.locked){if(Math.abs(f)<5&&Math.abs(p)<5)return;c.locked=!0,c.horiz=Math.abs(f)>Math.abs(p),c.horiz&&n.current&&(n.current.style.willChange="transform")}if(!c.horiz){c.drag=!1;return}i.preventDefault();const h=Math.max(-Tl,Math.min(0,c.base+f));n.current&&(n.current.style.transform=`translateX(${h}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(h)/Tl)}`),c.cur=h},onTouchEnd:()=>{s.current.drag=!1,l(s.current.cur<-40?-Tl:0,!0)},children:e})]})}function C0({unlockAt:e}){const[t,n]=d.useState(Date.now());d.useEffect(()=>{const u=setInterval(()=>n(Date.now()),1e3);return()=>clearInterval(u)},[]);const r=new Date(e).getTime()-t;if(r<=0)return null;const s=Math.floor(r/864e5),l=Math.floor(r%864e5/36e5),a=Math.floor(r%36e5/6e4),i=Math.floor(r%6e4/1e3);let c="";return s>0&&(c+=`${s}`),(l>0||s>0)&&(c+=`${l}`),c+=`${a}${i}`,o.jsxs("div",{className:"flex items-center gap-1.5 text-[12px]",style:{color:K.accentDark},children:[o.jsx(Py,{size:12}),o.jsx("span",{children:c})]})}function E0({assistants:e,avatarMap:t,currentId:n,onSelect:r,onClose:s}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:s,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-5",style:{background:K.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:l=>l.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:K.text},children:""}),o.jsx("button",{onClick:s,children:o.jsx(el,{size:18,style:{color:K.textMuted}})})]}),o.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:e.map(l=>{var i;const a=t[l.id]||l.avatar_url;return o.jsxs("button",{className:"mb-2 flex w-full items-center gap-3 rounded-[14px] p-3 text-left",style:{background:K.bg,boxShadow:l.id===n?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{r(l.id),s()},children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:36,height:36,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:2},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:K.bg},children:a?o.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:K.accentDark},children:((i=l.name)==null?void 0:i[0])||"?"})})}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:K.text},children:l.name})]},l.id)})})]})})}function M0({diary:e,onBack:t,onMarkRead:n}){return d.useEffect(()=>{e&&!e.is_read&&e.author==="assistant"&&(!e.unlock_at||new Date(e.unlock_at)<=new Date)&&n(e.id)},[e]),o.jsxs("div",{className:"flex h-full flex-col",style:{background:K.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:K.bg,boxShadow:"var(--card-shadow-sm)"},onClick:t,children:o.jsx(Et,{size:22,style:{color:K.text}})}),o.jsx("h1",{className:"text-[15px] font-bold truncate max-w-[60%]",style:{color:K.text},children:e.title||""}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:o.jsxs("div",{className:"rounded-[18px] p-5",style:{background:K.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{className:"mb-3 text-[10px]",style:{color:K.textMuted},children:Kh(e.created_at)}),o.jsx("div",{className:"text-[13px] leading-[28px]",style:{color:K.text},children:e.content.split(`
`).map((r,s)=>o.jsx("div",{style:{borderBottom:"1px solid rgba(0,0,0,0.06)",minHeight:28},children:r||""},s))})]})})]})}function _0({assistantId:e,onSave:t,onCancel:n}){const[r,s]=d.useState(""),[l,a]=d.useState(""),[i,c]=d.useState(!1),[u,f]=d.useState(""),[p,h]=d.useState(!1),[y,b]=d.useState(!1),v=async()=>{if(!(!l.trim()||p)){h(!0);try{const w={assistant_id:e,author:"user",title:r.trim(),content:l.trim()};i&&u&&(w.unlock_at=new Date(u).toISOString()),await t(w)}finally{h(!1)}}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:K.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:K.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Et,{size:22,style:{color:K.text}})}),o.jsx("h1",{className:"text-[15px] font-bold",style:{color:K.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:K.bg,boxShadow:l.trim()?"var(--card-shadow-sm)":"var(--inset-shadow)"},onClick:v,disabled:!l.trim()||p,children:o.jsx("span",{className:"text-[12px] font-bold",style:{color:l.trim()?K.accentDark:K.textMuted},children:""})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[!y&&o.jsx("input",{className:"mb-3 w-full rounded-[12px] px-3 py-2.5 text-[13px] font-medium outline-none",style:{background:K.bg,boxShadow:"var(--inset-shadow)",color:K.text},placeholder:"",value:r,onChange:w=>s(w.target.value)}),o.jsxs("div",{className:"relative mb-3",children:[o.jsx("textarea",{className:"w-full rounded-[14px] p-3 text-[13px] leading-[28px] resize-none outline-none",style:{background:K.bg,boxShadow:"var(--inset-shadow)",color:K.text,minHeight:y?"calc(100vh - 120px)":200,backgroundImage:"repeating-linear-gradient(transparent, transparent 27px, rgba(0,0,0,0.05) 27px, rgba(0,0,0,0.05) 28px)",backgroundPositionY:9},placeholder:"...",value:l,onChange:w=>a(w.target.value),autoFocus:!0}),o.jsx("button",{className:"absolute top-2 right-2 flex h-7 w-7 items-center justify-center rounded-full",style:{background:K.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>b(!y),children:y?o.jsx(Fr,{size:13,style:{color:K.accentDark}}):o.jsx(Zs,{size:13,style:{color:K.accentDark}})})]}),!y&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-[14px] px-4 py-3",style:{background:K.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-[13px] font-medium",style:{color:K.text},children:""}),o.jsx("p",{className:"text-[10px]",style:{color:K.textMuted},children:""})]}),o.jsx("button",{className:"relative h-7 w-12 rounded-full transition-colors",style:{background:i?K.accent:"rgba(0,0,0,0.1)"},onClick:()=>{if(!i&&!u){const w=new Date;w.setDate(w.getDate()+1),w.setHours(9,0,0,0);const x=m=>String(m).padStart(2,"0");f(`${w.getFullYear()}-${x(w.getMonth()+1)}-${x(w.getDate())}T${x(w.getHours())}:${x(w.getMinutes())}`)}c(!i)},children:o.jsx("div",{className:"absolute top-0.5 h-6 w-6 rounded-full transition-transform",style:{background:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",transform:i?"translateX(22px)":"translateX(2px)"}})})]}),i&&o.jsxs("div",{className:"rounded-[14px] px-4 py-3",style:{background:K.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("p",{className:"mb-2 text-[12px] font-medium",style:{color:K.text},children:""}),o.jsx("input",{type:"datetime-local",className:"w-full rounded-[10px] px-3 py-2 text-[13px] outline-none",style:{background:K.bg,boxShadow:"var(--inset-shadow)",color:K.text},value:u,onChange:w=>f(w.target.value)})]})]})]})]})}function T0(){var Y;const e=$t(),[t,n]=d.useState("theirs"),[r,s]=d.useState([]),[l,a]=d.useState({}),[i,c]=d.useState(null),[u,f]=d.useState(!1),[p,h]=d.useState([]),[y,b]=d.useState(!0),[v,w]=d.useState(null),[x,m]=d.useState(null),[g,S]=d.useState(!1);d.useEffect(()=>{$("/api/assistants").then(async _=>{const V=_.assistants||[];s(V),V.length>0&&!i&&c(V[0].id);const te={};await Promise.all(V.map(async ve=>{const ee=await Yr(`assistant-avatar-${ve.id}`).catch(()=>null);ee&&(te[ve.id]=ee)})),a(te)}).catch(()=>{})},[]);const j=r.find(_=>_.id===i),N=i&&l[i]||(j==null?void 0:j.avatar_url);d.useEffect(()=>{i!=null&&k()},[i,t]);const k=async()=>{b(!0);try{const V=await $(`/api/diary?assistant_id=${i}&author=${t==="theirs"?"assistant":"user"}&limit=100`);h(V.diary||[])}catch(_){console.error(_)}b(!1)},C=_=>{w({message:"",action:async()=>{await $(`/api/diary/${_}`,{method:"DELETE"}),h(V=>V.filter(te=>te.id!==_))}})},E=async _=>{try{await $(`/api/diary/${_}/read`,{method:"POST"}),h(V=>V.map(te=>te.id===_?{...te,is_read:!0}:te))}catch(V){console.error(V)}},D=async _=>{await $("/api/diary",{method:"POST",body:_}),S(!1),k()},z=_=>{_.unlock_at&&new Date(_.unlock_at)>new Date||m(_)};return x?o.jsx(M0,{diary:x,onBack:()=>{m(null),k()},onMarkRead:E}):g?o.jsx(_0,{assistantId:i,onSave:D,onCancel:()=>S(!1)}):o.jsxs("div",{className:"flex h-full flex-col",style:{background:K.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:K.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:K.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:K.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{border:"2px solid #e8a0bf",padding:2},onClick:()=>f(!0),children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:K.bg},children:N?o.jsx("img",{src:N,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:K.accentDark},children:((Y=j==null?void 0:j.name)==null?void 0:Y[0])||"?"})})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:K.bg,boxShadow:"var(--inset-shadow)"},children:j0.map(_=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:t===_.key?{background:K.bg,boxShadow:"var(--card-shadow-sm)",color:K.accentDark}:{color:K.textMuted},onClick:()=>n(_.key),children:_.label},_.key))})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24",children:y?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:K.accent,borderTopColor:"transparent"}})}):p.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:K.textMuted},children:t==="theirs"?"":""}):p.map(_=>{const V=_.unlock_at&&new Date(_.unlock_at)>new Date;return o.jsx(N0,{onDelete:()=>C(_.id),children:o.jsxs("div",{className:"p-4 rounded-[18px]",style:{background:K.bg,userSelect:"none"},onClick:()=>z(_),children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[!_.is_read&&_.author==="assistant"&&!V&&o.jsx("div",{className:"h-2 w-2 shrink-0 rounded-full",style:{background:"#ef4444"}}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:K.text},children:_.title||""})]}),o.jsx("span",{className:"text-[10px] shrink-0 ml-2",style:{color:K.textMuted},children:Kh(_.created_at)})]}),V?o.jsx(C0,{unlockAt:_.unlock_at}):o.jsx("p",{className:"text-[12px] leading-relaxed break-words",style:{color:K.textMuted,maxHeight:40,overflow:"hidden"},children:_.content.length>60?_.content.slice(0,60)+"...":_.content})]})},_.id)})}),t==="mine"&&o.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center",style:{zIndex:30},children:o.jsx("button",{className:"flex h-12 w-12 items-center justify-center rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",boxShadow:"0 4px 14px rgba(232,160,191,0.4)"},onClick:()=>S(!0),children:o.jsx(Xr,{size:22,color:"white"})})}),u&&o.jsx(E0,{assistants:r,avatarMap:l,currentId:i,onSelect:c,onClose:()=>f(!1)}),v&&o.jsx(S0,{message:v.message,onConfirm:async()=>{try{await v.action()}catch(_){console.error(_)}w(null)},onCancel:()=>w(null)})]})}const xe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function D0({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:xe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:xe.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:xe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Fr,{size:18,style:{color:xe.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:xe.bg,color:xe.text},placeholder:"..."})]})}function R0(){const e=$t(),[t,n]=d.useState(""),[r,s]=d.useState(""),[l,a]=d.useState(""),[i,c]=d.useState(""),[u,f]=d.useState(!1),[p,h]=d.useState(!0),[y,b]=d.useState(null),[v,w]=d.useState(!1),x=d.useRef(null),m=d.useRef(null),g=k=>{b(k),setTimeout(()=>b(null),2e3)};d.useEffect(()=>{$("/api/user/profile").then(k=>{n(k.nickname||""),s(k.background_url||""),a(k.basic_info||"")}).catch(()=>{}).finally(()=>h(!1)),Yr("user-avatar").then(k=>{k&&c(k)}).catch(function(){})},[]);const S=k=>{var D;const C=(D=k.target.files)==null?void 0:D[0];if(!C)return;const E=new FileReader;E.onload=async z=>{const Y=z.target.result;try{await Ti("user-avatar",Y),c(Y)}catch(_){g("")}},E.readAsDataURL(C),k.target.value=""},j=k=>{var D;const C=(D=k.target.files)==null?void 0:D[0];if(!C)return;const E=new FileReader;E.onload=z=>a(z.target.result||""),E.readAsText(C),k.target.value=""},N=async()=>{f(!0);try{const k={nickname:t.trim()||null,background_url:r||null,basic_info:l||null,avatar_url:i?"user-avatar":null};await $("/api/user/profile",{method:"PUT",body:k});try{const C=JSON.parse(localStorage.getItem("whisper_profile")||"{}");localStorage.setItem("whisper_profile",JSON.stringify({...C,...k}))}catch(C){}g("")}catch(k){g("")}finally{f(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:xe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:xe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:xe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:xe.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:xe.bg,boxShadow:u?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:N,disabled:u,children:o.jsx(Ho,{size:18,style:{color:xe.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px space-y-4",children:p?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:xe.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-[20px] p-5",style:{background:xe.bg,boxShadow:"var(--card-shadow)"},children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var k;return(k=x.current)==null?void 0:k.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:xe.bg},children:i?o.jsx("img",{src:i,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:24},children:""})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:xe.accentDark},children:o.jsx(oh,{size:9,color:"white"})})]}),o.jsx("input",{ref:x,type:"file",accept:"image/*",className:"hidden",onChange:S}),o.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:xe.textMuted},children:""}),o.jsx("input",{type:"text",value:t,onChange:k=>n(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:xe.bg,color:xe.text}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:xe.textMuted},children:""}),o.jsx("input",{type:"text",value:r,onChange:k=>s(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2 text-[13px] italic outline-none",style:{boxShadow:"var(--inset-shadow)",background:xe.bg,color:xe.text}})]})]})]})}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:xe.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:xe.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:xe.bg},onClick:()=>{var k;return(k=m.current)==null?void 0:k.click()},title:"",children:o.jsx(Uo,{size:13,style:{color:xe.textMuted}})}),o.jsx("input",{ref:m,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:j}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:xe.bg},onClick:()=>w(!0),title:"",children:o.jsx(Zs,{size:13,style:{color:xe.accentDark}})})]})]}),o.jsx("textarea",{value:l,onChange:k=>a(k.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:xe.bg,color:xe.text}})]})]})}),v&&o.jsx(D0,{value:l,onChange:a,onClose:()=>w(!1)}),y&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:y})})]})}function ur(){var n;const e=(n=window.Telegram)==null?void 0:n.WebApp,t=Math.max((e==null?void 0:e.viewportHeight)||0,window.innerHeight);document.documentElement.style.setProperty("--tg-viewport-height",t+"px")}function z0(){const e=_c();return d.useEffect(()=>{var n;const t=(n=window.Telegram)==null?void 0:n.WebApp;t&&!e.pathname.startsWith("/cot")&&t.expand(),ur()},[e.pathname]),o.jsxs(gy,{children:[o.jsx(lt,{path:"/",element:o.jsx(Wy,{})}),o.jsx(lt,{path:"/profile",element:o.jsx(R0,{})}),o.jsx(lt,{path:"/world-books",element:o.jsx(P1,{})}),o.jsx(lt,{path:"/world-books/new",element:o.jsx(jd,{})}),o.jsx(lt,{path:"/world-books/:id",element:o.jsx(jd,{})}),o.jsx(lt,{path:"/assistants",element:o.jsx(V1,{})}),o.jsx(lt,{path:"/assistants/new",element:o.jsx(Nd,{})}),o.jsx(lt,{path:"/assistants/:id",element:o.jsx(Nd,{})}),o.jsx(lt,{path:"/settings",element:o.jsx(J1,{})}),o.jsx(lt,{path:"/settings/api",element:o.jsx(r0,{})}),o.jsx(lt,{path:"/cot",element:o.jsx(p0,{})}),o.jsx(lt,{path:"/memories",element:o.jsx(k0,{})}),o.jsx(lt,{path:"/diary",element:o.jsx(T0,{})}),o.jsx(lt,{path:"/messages",element:o.jsx(x0,{})})]})}function P0(){return d.useEffect(()=>{var t;const e=(t=window.Telegram)==null?void 0:t.WebApp;return e&&(e.ready(),window.location.hash.startsWith("#/cot")||e.expand()),ur(),e&&e.onEvent("viewportChanged",ur),window.addEventListener("resize",ur),()=>{e&&e.offEvent("viewportChanged",ur),window.removeEventListener("resize",ur)}},[]),o.jsx(wy,{children:o.jsx(z0,{})})}Ia.createRoot(document.getElementById("root")).render(o.jsx(Se.StrictMode,{children:o.jsx(P0,{})}));
