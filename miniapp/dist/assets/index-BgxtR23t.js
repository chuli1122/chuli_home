function gx(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function yx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sf={exports:{}},Wo={},lf={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dl=Symbol.for("react.element"),vx=Symbol.for("react.portal"),wx=Symbol.for("react.fragment"),bx=Symbol.for("react.strict_mode"),kx=Symbol.for("react.profiler"),jx=Symbol.for("react.provider"),Sx=Symbol.for("react.context"),Nx=Symbol.for("react.forward_ref"),Cx=Symbol.for("react.suspense"),Ex=Symbol.for("react.memo"),Mx=Symbol.for("react.lazy"),cu=Symbol.iterator;function _x(e){return e===null||typeof e!="object"?null:(e=cu&&e[cu]||e["@@iterator"],typeof e=="function"?e:null)}var of={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},af=Object.assign,cf={};function is(e,t,n){this.props=e,this.context=t,this.refs=cf,this.updater=n||of}is.prototype.isReactComponent={};is.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};is.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function uf(){}uf.prototype=is.prototype;function tc(e,t,n){this.props=e,this.context=t,this.refs=cf,this.updater=n||of}var nc=tc.prototype=new uf;nc.constructor=tc;af(nc,is.prototype);nc.isPureReactComponent=!0;var uu=Array.isArray,df=Object.prototype.hasOwnProperty,rc={current:null},ff={key:!0,ref:!0,__self:!0,__source:!0};function pf(e,t,n){var r,s={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)df.call(t,r)&&!ff.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:dl,type:e,key:l,ref:a,props:s,_owner:rc.current}}function Tx(e,t){return{$$typeof:dl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function sc(e){return typeof e=="object"&&e!==null&&e.$$typeof===dl}function Dx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var du=/\/+/g;function wa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Dx(""+e.key):t.toString(36)}function Zl(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case dl:case vx:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+wa(a,0):r,uu(s)?(n="",e!=null&&(n=e.replace(du,"$&/")+"/"),Zl(s,t,n,"",function(d){return d})):s!=null&&(sc(s)&&(s=Tx(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(du,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",uu(e))for(var i=0;i<e.length;i++){l=e[i];var c=r+wa(l,i);a+=Zl(l,t,n,c,s)}else if(c=_x(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=r+wa(l,i++),a+=Zl(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Nl(e,t,n){if(e==null)return e;var r=[],s=0;return Zl(e,r,"","",function(l){return t.call(n,l,s++)}),r}function Rx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vt={current:null},eo={transition:null},Px={ReactCurrentDispatcher:vt,ReactCurrentBatchConfig:eo,ReactCurrentOwner:rc};function hf(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Nl,forEach:function(e,t,n){Nl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Nl(e,function(){t++}),t},toArray:function(e){return Nl(e,function(t){return t})||[]},only:function(e){if(!sc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xe.Component=is;xe.Fragment=wx;xe.Profiler=kx;xe.PureComponent=tc;xe.StrictMode=bx;xe.Suspense=Cx;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Px;xe.act=hf;xe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=af({},e.props),s=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=rc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)df.call(t,c)&&!ff.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];r.children=i}return{$$typeof:dl,type:e.type,key:s,ref:l,props:r,_owner:a}};xe.createContext=function(e){return e={$$typeof:Sx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:jx,_context:e},e.Consumer=e};xe.createElement=pf;xe.createFactory=function(e){var t=pf.bind(null,e);return t.type=e,t};xe.createRef=function(){return{current:null}};xe.forwardRef=function(e){return{$$typeof:Nx,render:e}};xe.isValidElement=sc;xe.lazy=function(e){return{$$typeof:Mx,_payload:{_status:-1,_result:e},_init:Rx}};xe.memo=function(e,t){return{$$typeof:Ex,type:e,compare:t===void 0?null:t}};xe.startTransition=function(e){var t=eo.transition;eo.transition={};try{e()}finally{eo.transition=t}};xe.unstable_act=hf;xe.useCallback=function(e,t){return vt.current.useCallback(e,t)};xe.useContext=function(e){return vt.current.useContext(e)};xe.useDebugValue=function(){};xe.useDeferredValue=function(e){return vt.current.useDeferredValue(e)};xe.useEffect=function(e,t){return vt.current.useEffect(e,t)};xe.useId=function(){return vt.current.useId()};xe.useImperativeHandle=function(e,t,n){return vt.current.useImperativeHandle(e,t,n)};xe.useInsertionEffect=function(e,t){return vt.current.useInsertionEffect(e,t)};xe.useLayoutEffect=function(e,t){return vt.current.useLayoutEffect(e,t)};xe.useMemo=function(e,t){return vt.current.useMemo(e,t)};xe.useReducer=function(e,t,n){return vt.current.useReducer(e,t,n)};xe.useRef=function(e){return vt.current.useRef(e)};xe.useState=function(e){return vt.current.useState(e)};xe.useSyncExternalStore=function(e,t,n){return vt.current.useSyncExternalStore(e,t,n)};xe.useTransition=function(){return vt.current.useTransition()};xe.version="18.3.1";lf.exports=xe;var u=lf.exports;const Re=yx(u),zx=gx({__proto__:null,default:Re},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ix=u,Lx=Symbol.for("react.element"),Ox=Symbol.for("react.fragment"),$x=Object.prototype.hasOwnProperty,Ax=Ix.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fx={key:!0,ref:!0,__self:!0,__source:!0};function xf(e,t,n){var r,s={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)$x.call(t,r)&&!Fx.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Lx,type:e,key:l,ref:a,props:s,_owner:Ax.current}}Wo.Fragment=Ox;Wo.jsx=xf;Wo.jsxs=xf;sf.exports=Wo;var o=sf.exports,ni={},mf={exports:{}},Ot={},gf={exports:{}},yf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,K){var _=O.length;O.push(K);e:for(;0<_;){var ee=_-1>>>1,V=O[ee];if(0<s(V,K))O[ee]=K,O[_]=V,_=ee;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var K=O[0],_=O.pop();if(_!==K){O[0]=_;e:for(var ee=0,V=O.length,je=V>>>1;ee<je;){var ye=2*(ee+1)-1,Ze=O[ye],ve=ye+1,X=O[ve];if(0>s(Ze,_))ve<V&&0>s(X,Ze)?(O[ee]=X,O[ve]=_,ee=ve):(O[ee]=Ze,O[ye]=_,ee=ye);else if(ve<V&&0>s(X,_))O[ee]=X,O[ve]=_,ee=ve;else break e}}return K}function s(O,K){var _=O.sortIndex-K.sortIndex;return _!==0?_:O.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],d=[],p=1,f=null,h=3,x=!1,w=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=O)r(d),K.sortIndex=K.expirationTime,t(c,K);else break;K=n(d)}}function S(O){if(y=!1,v(O),!w)if(n(c)!==null)w=!0,he(j);else{var K=n(d);K!==null&&de(S,K.startTime-O)}}function j(O,K){w=!1,y&&(y=!1,g(E),E=-1),x=!0;var _=h;try{for(v(K),f=n(c);f!==null&&(!(f.expirationTime>K)||O&&!L());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,h=f.priorityLevel;var V=ee(f.expirationTime<=K);K=e.unstable_now(),typeof V=="function"?f.callback=V:f===n(c)&&r(c),v(K)}else r(c);f=n(c)}if(f!==null)var je=!0;else{var ye=n(d);ye!==null&&de(S,ye.startTime-K),je=!1}return je}finally{f=null,h=_,x=!1}}var N=!1,k=null,E=-1,T=5,P=-1;function L(){return!(e.unstable_now()-P<T)}function oe(){if(k!==null){var O=e.unstable_now();P=O;var K=!0;try{K=k(!0,O)}finally{K?W():(N=!1,k=null)}}else N=!1}var W;if(typeof m=="function")W=function(){m(oe)};else if(typeof MessageChannel!="undefined"){var z=new MessageChannel,q=z.port2;z.port1.onmessage=oe,W=function(){q.postMessage(null)}}else W=function(){b(oe,0)};function he(O){k=O,N||(N=!0,W())}function de(O,K){E=b(function(){O(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,he(j))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(O){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var _=h;h=K;try{return O()}finally{h=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,K){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var _=h;h=O;try{return K()}finally{h=_}},e.unstable_scheduleCallback=function(O,K,_){var ee=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?ee+_:ee):_=ee,O){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=_+V,O={id:p++,callback:K,priorityLevel:O,startTime:_,expirationTime:V,sortIndex:-1},_>ee?(O.sortIndex=_,t(d,O),n(c)===null&&O===n(d)&&(y?(g(E),E=-1):y=!0,de(S,_-ee))):(O.sortIndex=V,t(c,O),w||x||(w=!0,he(j))),O},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(O){var K=h;return function(){var _=h;h=K;try{return O.apply(this,arguments)}finally{h=_}}}})(yf);gf.exports=yf;var Bx=gf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux=u,Lt=Bx;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vf=new Set,Ws={};function vr(e,t){Jr(e,t),Jr(e+"Capture",t)}function Jr(e,t){for(Ws[e]=t,e=0;e<t.length;e++)vf.add(t[e])}var Sn=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),ri=Object.prototype.hasOwnProperty,Hx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fu={},pu={};function Wx(e){return ri.call(pu,e)?!0:ri.call(fu,e)?!1:Hx.test(e)?pu[e]=!0:(fu[e]=!0,!1)}function Vx(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Xx(e,t,n,r){if(t===null||typeof t=="undefined"||Vx(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wt(e,t,n,r,s,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){at[e]=new wt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];at[t]=new wt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){at[e]=new wt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){at[e]=new wt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){at[e]=new wt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){at[e]=new wt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){at[e]=new wt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){at[e]=new wt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){at[e]=new wt(e,5,!1,e.toLowerCase(),null,!1,!1)});var lc=/[\-:]([a-z])/g;function oc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lc,oc);at[t]=new wt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lc,oc);at[t]=new wt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lc,oc);at[t]=new wt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){at[e]=new wt(e,1,!1,e.toLowerCase(),null,!1,!1)});at.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){at[e]=new wt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ac(e,t,n,r){var s=at.hasOwnProperty(t)?at[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Xx(t,n,s,r)&&(n=null),r||s===null?Wx(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var _n=Ux.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cl=Symbol.for("react.element"),Rr=Symbol.for("react.portal"),Pr=Symbol.for("react.fragment"),ic=Symbol.for("react.strict_mode"),si=Symbol.for("react.profiler"),wf=Symbol.for("react.provider"),bf=Symbol.for("react.context"),cc=Symbol.for("react.forward_ref"),li=Symbol.for("react.suspense"),oi=Symbol.for("react.suspense_list"),uc=Symbol.for("react.memo"),Rn=Symbol.for("react.lazy"),kf=Symbol.for("react.offscreen"),hu=Symbol.iterator;function ys(e){return e===null||typeof e!="object"?null:(e=hu&&e[hu]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,ba;function Ms(e){if(ba===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ba=t&&t[1]||""}return`
`+ba+e}var ka=!1;function ja(e,t){if(!e||ka)return"";ka=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),l=r.stack.split(`
`),a=s.length-1,i=l.length-1;1<=a&&0<=i&&s[a]!==l[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==l[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==l[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{ka=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ms(e):""}function Yx(e){switch(e.tag){case 5:return Ms(e.type);case 16:return Ms("Lazy");case 13:return Ms("Suspense");case 19:return Ms("SuspenseList");case 0:case 2:case 15:return e=ja(e.type,!1),e;case 11:return e=ja(e.type.render,!1),e;case 1:return e=ja(e.type,!0),e;default:return""}}function ai(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pr:return"Fragment";case Rr:return"Portal";case si:return"Profiler";case ic:return"StrictMode";case li:return"Suspense";case oi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case bf:return(e.displayName||"Context")+".Consumer";case wf:return(e._context.displayName||"Context")+".Provider";case cc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case uc:return t=e.displayName||null,t!==null?t:ai(e.type)||"Memo";case Rn:t=e._payload,e=e._init;try{return ai(e(t))}catch(n){}}return null}function Kx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ai(t);case 8:return t===ic?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Kn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function jf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qx(e){var t=jf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function El(e){e._valueTracker||(e._valueTracker=Qx(e))}function Sf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=jf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function po(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function ii(e,t){var n=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function xu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Kn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nf(e,t){t=t.checked,t!=null&&ac(e,"checked",t,!1)}function ci(e,t){Nf(e,t);var n=Kn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ui(e,t.type,n):t.hasOwnProperty("defaultValue")&&ui(e,t.type,Kn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ui(e,t,n){(t!=="number"||po(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var _s=Array.isArray;function Vr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Kn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function di(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(R(92));if(_s(n)){if(1<n.length)throw Error(R(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Kn(n)}}function Cf(e,t){var n=Kn(t.value),r=Kn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function yu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ef(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ef(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ml,Mf=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ml=Ml||document.createElement("div"),Ml.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ml.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gx=["Webkit","ms","Moz","O"];Object.keys(Rs).forEach(function(e){Gx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Rs[t]=Rs[e]})});function _f(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Rs.hasOwnProperty(e)&&Rs[e]?(""+t).trim():t+"px"}function Tf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=_f(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var qx=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pi(e,t){if(t){if(qx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function hi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xi=null;function dc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mi=null,Xr=null,Yr=null;function vu(e){if(e=hl(e)){if(typeof mi!="function")throw Error(R(280));var t=e.stateNode;t&&(t=Qo(t),mi(e.stateNode,e.type,t))}}function Df(e){Xr?Yr?Yr.push(e):Yr=[e]:Xr=e}function Rf(){if(Xr){var e=Xr,t=Yr;if(Yr=Xr=null,vu(e),t)for(e=0;e<t.length;e++)vu(t[e])}}function Pf(e,t){return e(t)}function zf(){}var Sa=!1;function If(e,t,n){if(Sa)return e(t,n);Sa=!0;try{return Pf(e,t,n)}finally{Sa=!1,(Xr!==null||Yr!==null)&&(zf(),Rf())}}function Xs(e,t){var n=e.stateNode;if(n===null)return null;var r=Qo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(R(231,t,typeof n));return n}var gi=!1;if(Sn)try{var vs={};Object.defineProperty(vs,"passive",{get:function(){gi=!0}}),window.addEventListener("test",vs,vs),window.removeEventListener("test",vs,vs)}catch(e){gi=!1}function Jx(e,t,n,r,s,l,a,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(p){this.onError(p)}}var Ps=!1,ho=null,xo=!1,yi=null,Zx={onError:function(e){Ps=!0,ho=e}};function em(e,t,n,r,s,l,a,i,c){Ps=!1,ho=null,Jx.apply(Zx,arguments)}function tm(e,t,n,r,s,l,a,i,c){if(em.apply(this,arguments),Ps){if(Ps){var d=ho;Ps=!1,ho=null}else throw Error(R(198));xo||(xo=!0,yi=d)}}function wr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Lf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wu(e){if(wr(e)!==e)throw Error(R(188))}function nm(e){var t=e.alternate;if(!t){if(t=wr(e),t===null)throw Error(R(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return wu(s),e;if(l===r)return wu(s),t;l=l.sibling}throw Error(R(188))}if(n.return!==r.return)n=s,r=l;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=l;break}if(i===r){a=!0,r=s,n=l;break}i=i.sibling}if(!a){for(i=l.child;i;){if(i===n){a=!0,n=l,r=s;break}if(i===r){a=!0,r=l,n=s;break}i=i.sibling}if(!a)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?e:t}function Of(e){return e=nm(e),e!==null?$f(e):null}function $f(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$f(e);if(t!==null)return t;e=e.sibling}return null}var Af=Lt.unstable_scheduleCallback,bu=Lt.unstable_cancelCallback,rm=Lt.unstable_shouldYield,sm=Lt.unstable_requestPaint,We=Lt.unstable_now,lm=Lt.unstable_getCurrentPriorityLevel,fc=Lt.unstable_ImmediatePriority,Ff=Lt.unstable_UserBlockingPriority,mo=Lt.unstable_NormalPriority,om=Lt.unstable_LowPriority,Bf=Lt.unstable_IdlePriority,Vo=null,hn=null;function am(e){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Vo,e,void 0,(e.current.flags&128)===128)}catch(t){}}var tn=Math.clz32?Math.clz32:um,im=Math.log,cm=Math.LN2;function um(e){return e>>>=0,e===0?32:31-(im(e)/cm|0)|0}var _l=64,Tl=4194304;function Ts(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function go(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=Ts(i):(l&=a,l!==0&&(r=Ts(l)))}else a=n&~s,a!==0?r=Ts(a):l!==0&&(r=Ts(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-tn(t),s=1<<n,r|=e[n],t&=~s;return r}function dm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-tn(l),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=dm(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function vi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Uf(){var e=_l;return _l<<=1,!(_l&4194240)&&(_l=64),e}function Na(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function fl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tn(t),e[t]=n}function pm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-tn(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function pc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-tn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ee=0;function Hf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Wf,hc,Vf,Xf,Yf,wi=!1,Dl=[],Fn=null,Bn=null,Un=null,Ys=new Map,Ks=new Map,In=[],hm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ku(e,t){switch(e){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":Ys.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ks.delete(t.pointerId)}}function ws(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=hl(t),t!==null&&hc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function xm(e,t,n,r,s){switch(t){case"focusin":return Fn=ws(Fn,e,t,n,r,s),!0;case"dragenter":return Bn=ws(Bn,e,t,n,r,s),!0;case"mouseover":return Un=ws(Un,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return Ys.set(l,ws(Ys.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,Ks.set(l,ws(Ks.get(l)||null,e,t,n,r,s)),!0}return!1}function Kf(e){var t=ar(e.target);if(t!==null){var n=wr(t);if(n!==null){if(t=n.tag,t===13){if(t=Lf(n),t!==null){e.blockedOn=t,Yf(e.priority,function(){Vf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function to(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=bi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);xi=r,n.target.dispatchEvent(r),xi=null}else return t=hl(n),t!==null&&hc(t),e.blockedOn=n,!1;t.shift()}return!0}function ju(e,t,n){to(e)&&n.delete(t)}function mm(){wi=!1,Fn!==null&&to(Fn)&&(Fn=null),Bn!==null&&to(Bn)&&(Bn=null),Un!==null&&to(Un)&&(Un=null),Ys.forEach(ju),Ks.forEach(ju)}function bs(e,t){e.blockedOn===t&&(e.blockedOn=null,wi||(wi=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,mm)))}function Qs(e){function t(s){return bs(s,e)}if(0<Dl.length){bs(Dl[0],e);for(var n=1;n<Dl.length;n++){var r=Dl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Fn!==null&&bs(Fn,e),Bn!==null&&bs(Bn,e),Un!==null&&bs(Un,e),Ys.forEach(t),Ks.forEach(t),n=0;n<In.length;n++)r=In[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<In.length&&(n=In[0],n.blockedOn===null);)Kf(n),n.blockedOn===null&&In.shift()}var Kr=_n.ReactCurrentBatchConfig,yo=!0;function gm(e,t,n,r){var s=Ee,l=Kr.transition;Kr.transition=null;try{Ee=1,xc(e,t,n,r)}finally{Ee=s,Kr.transition=l}}function ym(e,t,n,r){var s=Ee,l=Kr.transition;Kr.transition=null;try{Ee=4,xc(e,t,n,r)}finally{Ee=s,Kr.transition=l}}function xc(e,t,n,r){if(yo){var s=bi(e,t,n,r);if(s===null)Ia(e,t,r,vo,n),ku(e,r);else if(xm(s,e,t,n,r))r.stopPropagation();else if(ku(e,r),t&4&&-1<hm.indexOf(e)){for(;s!==null;){var l=hl(s);if(l!==null&&Wf(l),l=bi(e,t,n,r),l===null&&Ia(e,t,r,vo,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else Ia(e,t,r,null,n)}}var vo=null;function bi(e,t,n,r){if(vo=null,e=dc(r),e=ar(e),e!==null)if(t=wr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Lf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vo=e,null}function Qf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lm()){case fc:return 1;case Ff:return 4;case mo:case om:return 16;case Bf:return 536870912;default:return 16}default:return 16}}var On=null,mc=null,no=null;function Gf(){if(no)return no;var e,t=mc,n=t.length,r,s="value"in On?On.value:On.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[l-r];r++);return no=s.slice(e,1<r?1-r:void 0)}function ro(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Rl(){return!0}function Su(){return!1}function $t(e){function t(n,r,s,l,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Rl:Su,this.isPropagationStopped=Su,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){},isPersistent:Rl}),t}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gc=$t(cs),pl=Oe({},cs,{view:0,detail:0}),vm=$t(pl),Ca,Ea,ks,Xo=Oe({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ks&&(ks&&e.type==="mousemove"?(Ca=e.screenX-ks.screenX,Ea=e.screenY-ks.screenY):Ea=Ca=0,ks=e),Ca)},movementY:function(e){return"movementY"in e?e.movementY:Ea}}),Nu=$t(Xo),wm=Oe({},Xo,{dataTransfer:0}),bm=$t(wm),km=Oe({},pl,{relatedTarget:0}),Ma=$t(km),jm=Oe({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),Sm=$t(jm),Nm=Oe({},cs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cm=$t(Nm),Em=Oe({},cs,{data:0}),Cu=$t(Em),Mm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_m={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Tm[e])?!!t[e]:!1}function yc(){return Dm}var Rm=Oe({},pl,{key:function(e){if(e.key){var t=Mm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ro(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_m[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yc,charCode:function(e){return e.type==="keypress"?ro(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ro(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pm=$t(Rm),zm=Oe({},Xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eu=$t(zm),Im=Oe({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yc}),Lm=$t(Im),Om=Oe({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),$m=$t(Om),Am=Oe({},Xo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fm=$t(Am),Bm=[9,13,27,32],vc=Sn&&"CompositionEvent"in window,zs=null;Sn&&"documentMode"in document&&(zs=document.documentMode);var Um=Sn&&"TextEvent"in window&&!zs,qf=Sn&&(!vc||zs&&8<zs&&11>=zs),Mu=" ",_u=!1;function Jf(e,t){switch(e){case"keyup":return Bm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zr=!1;function Hm(e,t){switch(e){case"compositionend":return Zf(t);case"keypress":return t.which!==32?null:(_u=!0,Mu);case"textInput":return e=t.data,e===Mu&&_u?null:e;default:return null}}function Wm(e,t){if(zr)return e==="compositionend"||!vc&&Jf(e,t)?(e=Gf(),no=mc=On=null,zr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qf&&t.locale!=="ko"?null:t.data;default:return null}}var Vm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vm[e.type]:t==="textarea"}function ep(e,t,n,r){Df(r),t=wo(t,"onChange"),0<t.length&&(n=new gc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Is=null,Gs=null;function Xm(e){dp(e,0)}function Yo(e){var t=Or(e);if(Sf(t))return e}function Ym(e,t){if(e==="change")return t}var tp=!1;if(Sn){var _a;if(Sn){var Ta="oninput"in document;if(!Ta){var Du=document.createElement("div");Du.setAttribute("oninput","return;"),Ta=typeof Du.oninput=="function"}_a=Ta}else _a=!1;tp=_a&&(!document.documentMode||9<document.documentMode)}function Ru(){Is&&(Is.detachEvent("onpropertychange",np),Gs=Is=null)}function np(e){if(e.propertyName==="value"&&Yo(Gs)){var t=[];ep(t,Gs,e,dc(e)),If(Xm,t)}}function Km(e,t,n){e==="focusin"?(Ru(),Is=t,Gs=n,Is.attachEvent("onpropertychange",np)):e==="focusout"&&Ru()}function Qm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yo(Gs)}function Gm(e,t){if(e==="click")return Yo(t)}function qm(e,t){if(e==="input"||e==="change")return Yo(t)}function Jm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rn=typeof Object.is=="function"?Object.is:Jm;function qs(e,t){if(rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ri.call(t,s)||!rn(e[s],t[s]))return!1}return!0}function Pu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zu(e,t){var n=Pu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pu(n)}}function rp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sp(){for(var e=window,t=po();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=po(e.document)}return t}function wc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Zm(e){var t=sp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&rp(n.ownerDocument.documentElement,n)){if(r!==null&&wc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=zu(n,l);var a=zu(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var eg=Sn&&"documentMode"in document&&11>=document.documentMode,Ir=null,ki=null,Ls=null,ji=!1;function Iu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ji||Ir==null||Ir!==po(r)||(r=Ir,"selectionStart"in r&&wc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ls&&qs(Ls,r)||(Ls=r,r=wo(ki,"onSelect"),0<r.length&&(t=new gc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ir)))}function Pl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Lr={animationend:Pl("Animation","AnimationEnd"),animationiteration:Pl("Animation","AnimationIteration"),animationstart:Pl("Animation","AnimationStart"),transitionend:Pl("Transition","TransitionEnd")},Da={},lp={};Sn&&(lp=document.createElement("div").style,"AnimationEvent"in window||(delete Lr.animationend.animation,delete Lr.animationiteration.animation,delete Lr.animationstart.animation),"TransitionEvent"in window||delete Lr.transitionend.transition);function Ko(e){if(Da[e])return Da[e];if(!Lr[e])return e;var t=Lr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in lp)return Da[e]=t[n];return e}var op=Ko("animationend"),ap=Ko("animationiteration"),ip=Ko("animationstart"),cp=Ko("transitionend"),up=new Map,Lu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gn(e,t){up.set(e,t),vr(t,[e])}for(var Ra=0;Ra<Lu.length;Ra++){var Pa=Lu[Ra],tg=Pa.toLowerCase(),ng=Pa[0].toUpperCase()+Pa.slice(1);Gn(tg,"on"+ng)}Gn(op,"onAnimationEnd");Gn(ap,"onAnimationIteration");Gn(ip,"onAnimationStart");Gn("dblclick","onDoubleClick");Gn("focusin","onFocus");Gn("focusout","onBlur");Gn(cp,"onTransitionEnd");Jr("onMouseEnter",["mouseout","mouseover"]);Jr("onMouseLeave",["mouseout","mouseover"]);Jr("onPointerEnter",["pointerout","pointerover"]);Jr("onPointerLeave",["pointerout","pointerover"]);vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ds));function Ou(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,tm(r,t,void 0,e),e.currentTarget=null}function dp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==l&&s.isPropagationStopped())break e;Ou(s,i,d),l=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,d=i.currentTarget,i=i.listener,c!==l&&s.isPropagationStopped())break e;Ou(s,i,d),l=c}}}if(xo)throw e=yi,xo=!1,yi=null,e}function De(e,t){var n=t[Mi];n===void 0&&(n=t[Mi]=new Set);var r=e+"__bubble";n.has(r)||(fp(t,e,2,!1),n.add(r))}function za(e,t,n){var r=0;t&&(r|=4),fp(n,e,r,t)}var zl="_reactListening"+Math.random().toString(36).slice(2);function Js(e){if(!e[zl]){e[zl]=!0,vf.forEach(function(n){n!=="selectionchange"&&(rg.has(n)||za(n,!1,e),za(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zl]||(t[zl]=!0,za("selectionchange",!1,t))}}function fp(e,t,n,r){switch(Qf(t)){case 1:var s=gm;break;case 4:s=ym;break;default:s=xc}n=s.bind(null,t,n,e),s=void 0,!gi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Ia(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=ar(i),a===null)return;if(c=a.tag,c===5||c===6){r=l=a;continue e}i=i.parentNode}}r=r.return}If(function(){var d=l,p=dc(n),f=[];e:{var h=up.get(e);if(h!==void 0){var x=gc,w=e;switch(e){case"keypress":if(ro(n)===0)break e;case"keydown":case"keyup":x=Pm;break;case"focusin":w="focus",x=Ma;break;case"focusout":w="blur",x=Ma;break;case"beforeblur":case"afterblur":x=Ma;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=bm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Lm;break;case op:case ap:case ip:x=Sm;break;case cp:x=$m;break;case"scroll":x=vm;break;case"wheel":x=Fm;break;case"copy":case"cut":case"paste":x=Cm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Eu}var y=(t&4)!==0,b=!y&&e==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var m=d,v;m!==null;){v=m;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,g!==null&&(S=Xs(m,g),S!=null&&y.push(Zs(m,S,v)))),b)break;m=m.return}0<y.length&&(h=new x(h,w,null,n,p),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==xi&&(w=n.relatedTarget||n.fromElement)&&(ar(w)||w[Nn]))break e;if((x||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,x?(w=n.relatedTarget||n.toElement,x=d,w=w?ar(w):null,w!==null&&(b=wr(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=d),x!==w)){if(y=Nu,S="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(y=Eu,S="onPointerLeave",g="onPointerEnter",m="pointer"),b=x==null?h:Or(x),v=w==null?h:Or(w),h=new y(S,m+"leave",x,n,p),h.target=b,h.relatedTarget=v,S=null,ar(p)===d&&(y=new y(g,m+"enter",w,n,p),y.target=v,y.relatedTarget=b,S=y),b=S,x&&w)t:{for(y=x,g=w,m=0,v=y;v;v=_r(v))m++;for(v=0,S=g;S;S=_r(S))v++;for(;0<m-v;)y=_r(y),m--;for(;0<v-m;)g=_r(g),v--;for(;m--;){if(y===g||g!==null&&y===g.alternate)break t;y=_r(y),g=_r(g)}y=null}else y=null;x!==null&&$u(f,h,x,y,!1),w!==null&&b!==null&&$u(f,b,w,y,!0)}}e:{if(h=d?Or(d):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var j=Ym;else if(Tu(h))if(tp)j=qm;else{j=Qm;var N=Km}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=Gm);if(j&&(j=j(e,d))){ep(f,j,n,p);break e}N&&N(e,h,d),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&ui(h,"number",h.value)}switch(N=d?Or(d):window,e){case"focusin":(Tu(N)||N.contentEditable==="true")&&(Ir=N,ki=d,Ls=null);break;case"focusout":Ls=ki=Ir=null;break;case"mousedown":ji=!0;break;case"contextmenu":case"mouseup":case"dragend":ji=!1,Iu(f,n,p);break;case"selectionchange":if(eg)break;case"keydown":case"keyup":Iu(f,n,p)}var k;if(vc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else zr?Jf(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(qf&&n.locale!=="ko"&&(zr||E!=="onCompositionStart"?E==="onCompositionEnd"&&zr&&(k=Gf()):(On=p,mc="value"in On?On.value:On.textContent,zr=!0)),N=wo(d,E),0<N.length&&(E=new Cu(E,e,null,n,p),f.push({event:E,listeners:N}),k?E.data=k:(k=Zf(n),k!==null&&(E.data=k)))),(k=Um?Hm(e,n):Wm(e,n))&&(d=wo(d,"onBeforeInput"),0<d.length&&(p=new Cu("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:d}),p.data=k))}dp(f,t)})}function Zs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function wo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=Xs(e,n),l!=null&&r.unshift(Zs(e,l,s)),l=Xs(e,t),l!=null&&r.push(Zs(e,l,s))),e=e.return}return r}function _r(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $u(e,t,n,r,s){for(var l=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,d=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&d!==null&&(i=d,s?(c=Xs(n,l),c!=null&&a.unshift(Zs(n,c,i))):s||(c=Xs(n,l),c!=null&&a.push(Zs(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var sg=/\r\n?/g,lg=/\u0000|\uFFFD/g;function Au(e){return(typeof e=="string"?e:""+e).replace(sg,`
`).replace(lg,"")}function Il(e,t,n){if(t=Au(t),Au(e)!==t&&n)throw Error(R(425))}function bo(){}var Si=null,Ni=null;function Ci(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ei=typeof setTimeout=="function"?setTimeout:void 0,og=typeof clearTimeout=="function"?clearTimeout:void 0,Fu=typeof Promise=="function"?Promise:void 0,ag=typeof queueMicrotask=="function"?queueMicrotask:typeof Fu!="undefined"?function(e){return Fu.resolve(null).then(e).catch(ig)}:Ei;function ig(e){setTimeout(function(){throw e})}function La(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Qs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Qs(t)}function Hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Bu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),pn="__reactFiber$"+us,el="__reactProps$"+us,Nn="__reactContainer$"+us,Mi="__reactEvents$"+us,cg="__reactListeners$"+us,ug="__reactHandles$"+us;function ar(e){var t=e[pn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Nn]||n[pn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Bu(e);e!==null;){if(n=e[pn])return n;e=Bu(e)}return t}e=n,n=e.parentNode}return null}function hl(e){return e=e[pn]||e[Nn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Or(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function Qo(e){return e[el]||null}var _i=[],$r=-1;function qn(e){return{current:e}}function Pe(e){0>$r||(e.current=_i[$r],_i[$r]=null,$r--)}function Te(e,t){$r++,_i[$r]=e.current,e.current=t}var Qn={},pt=qn(Qn),Et=qn(!1),pr=Qn;function Zr(e,t){var n=e.type.contextTypes;if(!n)return Qn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Mt(e){return e=e.childContextTypes,e!=null}function ko(){Pe(Et),Pe(pt)}function Uu(e,t,n){if(pt.current!==Qn)throw Error(R(168));Te(pt,t),Te(Et,n)}function pp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(R(108,Kx(e)||"Unknown",s));return Oe({},n,r)}function jo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qn,pr=pt.current,Te(pt,e),Te(Et,Et.current),!0}function Hu(e,t,n){var r=e.stateNode;if(!r)throw Error(R(169));n?(e=pp(e,t,pr),r.__reactInternalMemoizedMergedChildContext=e,Pe(Et),Pe(pt),Te(pt,e)):Pe(Et),Te(Et,n)}var wn=null,Go=!1,Oa=!1;function hp(e){wn===null?wn=[e]:wn.push(e)}function dg(e){Go=!0,hp(e)}function Jn(){if(!Oa&&wn!==null){Oa=!0;var e=0,t=Ee;try{var n=wn;for(Ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}wn=null,Go=!1}catch(s){throw wn!==null&&(wn=wn.slice(e+1)),Af(fc,Jn),s}finally{Ee=t,Oa=!1}}return null}var Ar=[],Fr=0,So=null,No=0,Ut=[],Ht=0,hr=null,bn=1,kn="";function sr(e,t){Ar[Fr++]=No,Ar[Fr++]=So,So=e,No=t}function xp(e,t,n){Ut[Ht++]=bn,Ut[Ht++]=kn,Ut[Ht++]=hr,hr=e;var r=bn;e=kn;var s=32-tn(r)-1;r&=~(1<<s),n+=1;var l=32-tn(t)+s;if(30<l){var a=s-s%5;l=(r&(1<<a)-1).toString(32),r>>=a,s-=a,bn=1<<32-tn(t)+s|n<<s|r,kn=l+e}else bn=1<<l|n<<s|r,kn=e}function bc(e){e.return!==null&&(sr(e,1),xp(e,1,0))}function kc(e){for(;e===So;)So=Ar[--Fr],Ar[Fr]=null,No=Ar[--Fr],Ar[Fr]=null;for(;e===hr;)hr=Ut[--Ht],Ut[Ht]=null,kn=Ut[--Ht],Ut[Ht]=null,bn=Ut[--Ht],Ut[Ht]=null}var It=null,zt=null,ze=!1,en=null;function mp(e,t){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Wu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,It=e,zt=Hn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,It=e,zt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=hr!==null?{id:bn,overflow:kn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,It=e,zt=null,!0):!1;default:return!1}}function Ti(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Di(e){if(ze){var t=zt;if(t){var n=t;if(!Wu(e,t)){if(Ti(e))throw Error(R(418));t=Hn(n.nextSibling);var r=It;t&&Wu(e,t)?mp(r,n):(e.flags=e.flags&-4097|2,ze=!1,It=e)}}else{if(Ti(e))throw Error(R(418));e.flags=e.flags&-4097|2,ze=!1,It=e}}}function Vu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;It=e}function Ll(e){if(e!==It)return!1;if(!ze)return Vu(e),ze=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ci(e.type,e.memoizedProps)),t&&(t=zt)){if(Ti(e))throw gp(),Error(R(418));for(;t;)mp(e,t),t=Hn(t.nextSibling)}if(Vu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zt=Hn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zt=null}}else zt=It?Hn(e.stateNode.nextSibling):null;return!0}function gp(){for(var e=zt;e;)e=Hn(e.nextSibling)}function es(){zt=It=null,ze=!1}function jc(e){en===null?en=[e]:en.push(e)}var fg=_n.ReactCurrentBatchConfig;function js(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var i=s.refs;a===null?delete i[l]:i[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,e))}return e}function Ol(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xu(e){var t=e._init;return t(e._payload)}function yp(e){function t(g,m){if(e){var v=g.deletions;v===null?(g.deletions=[m],g.flags|=16):v.push(m)}}function n(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=Yn(g,m),g.index=0,g.sibling=null,g}function l(g,m,v){return g.index=v,e?(v=g.alternate,v!==null?(v=v.index,v<m?(g.flags|=2,m):v):(g.flags|=2,m)):(g.flags|=1048576,m)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,m,v,S){return m===null||m.tag!==6?(m=Wa(v,g.mode,S),m.return=g,m):(m=s(m,v),m.return=g,m)}function c(g,m,v,S){var j=v.type;return j===Pr?p(g,m,v.props.children,S,v.key):m!==null&&(m.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Rn&&Xu(j)===m.type)?(S=s(m,v.props),S.ref=js(g,m,v),S.return=g,S):(S=uo(v.type,v.key,v.props,null,g.mode,S),S.ref=js(g,m,v),S.return=g,S)}function d(g,m,v,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Va(v,g.mode,S),m.return=g,m):(m=s(m,v.children||[]),m.return=g,m)}function p(g,m,v,S,j){return m===null||m.tag!==7?(m=dr(v,g.mode,S,j),m.return=g,m):(m=s(m,v),m.return=g,m)}function f(g,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Wa(""+m,g.mode,v),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Cl:return v=uo(m.type,m.key,m.props,null,g.mode,v),v.ref=js(g,null,m),v.return=g,v;case Rr:return m=Va(m,g.mode,v),m.return=g,m;case Rn:var S=m._init;return f(g,S(m._payload),v)}if(_s(m)||ys(m))return m=dr(m,g.mode,v,null),m.return=g,m;Ol(g,m)}return null}function h(g,m,v,S){var j=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return j!==null?null:i(g,m,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Cl:return v.key===j?c(g,m,v,S):null;case Rr:return v.key===j?d(g,m,v,S):null;case Rn:return j=v._init,h(g,m,j(v._payload),S)}if(_s(v)||ys(v))return j!==null?null:p(g,m,v,S,null);Ol(g,v)}return null}function x(g,m,v,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(v)||null,i(m,g,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Cl:return g=g.get(S.key===null?v:S.key)||null,c(m,g,S,j);case Rr:return g=g.get(S.key===null?v:S.key)||null,d(m,g,S,j);case Rn:var N=S._init;return x(g,m,v,N(S._payload),j)}if(_s(S)||ys(S))return g=g.get(v)||null,p(m,g,S,j,null);Ol(m,S)}return null}function w(g,m,v,S){for(var j=null,N=null,k=m,E=m=0,T=null;k!==null&&E<v.length;E++){k.index>E?(T=k,k=null):T=k.sibling;var P=h(g,k,v[E],S);if(P===null){k===null&&(k=T);break}e&&k&&P.alternate===null&&t(g,k),m=l(P,m,E),N===null?j=P:N.sibling=P,N=P,k=T}if(E===v.length)return n(g,k),ze&&sr(g,E),j;if(k===null){for(;E<v.length;E++)k=f(g,v[E],S),k!==null&&(m=l(k,m,E),N===null?j=k:N.sibling=k,N=k);return ze&&sr(g,E),j}for(k=r(g,k);E<v.length;E++)T=x(k,g,E,v[E],S),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?E:T.key),m=l(T,m,E),N===null?j=T:N.sibling=T,N=T);return e&&k.forEach(function(L){return t(g,L)}),ze&&sr(g,E),j}function y(g,m,v,S){var j=ys(v);if(typeof j!="function")throw Error(R(150));if(v=j.call(v),v==null)throw Error(R(151));for(var N=j=null,k=m,E=m=0,T=null,P=v.next();k!==null&&!P.done;E++,P=v.next()){k.index>E?(T=k,k=null):T=k.sibling;var L=h(g,k,P.value,S);if(L===null){k===null&&(k=T);break}e&&k&&L.alternate===null&&t(g,k),m=l(L,m,E),N===null?j=L:N.sibling=L,N=L,k=T}if(P.done)return n(g,k),ze&&sr(g,E),j;if(k===null){for(;!P.done;E++,P=v.next())P=f(g,P.value,S),P!==null&&(m=l(P,m,E),N===null?j=P:N.sibling=P,N=P);return ze&&sr(g,E),j}for(k=r(g,k);!P.done;E++,P=v.next())P=x(k,g,E,P.value,S),P!==null&&(e&&P.alternate!==null&&k.delete(P.key===null?E:P.key),m=l(P,m,E),N===null?j=P:N.sibling=P,N=P);return e&&k.forEach(function(oe){return t(g,oe)}),ze&&sr(g,E),j}function b(g,m,v,S){if(typeof v=="object"&&v!==null&&v.type===Pr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Cl:e:{for(var j=v.key,N=m;N!==null;){if(N.key===j){if(j=v.type,j===Pr){if(N.tag===7){n(g,N.sibling),m=s(N,v.props.children),m.return=g,g=m;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Rn&&Xu(j)===N.type){n(g,N.sibling),m=s(N,v.props),m.ref=js(g,N,v),m.return=g,g=m;break e}n(g,N);break}else t(g,N);N=N.sibling}v.type===Pr?(m=dr(v.props.children,g.mode,S,v.key),m.return=g,g=m):(S=uo(v.type,v.key,v.props,null,g.mode,S),S.ref=js(g,m,v),S.return=g,g=S)}return a(g);case Rr:e:{for(N=v.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(g,m.sibling),m=s(m,v.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else t(g,m);m=m.sibling}m=Va(v,g.mode,S),m.return=g,g=m}return a(g);case Rn:return N=v._init,b(g,m,N(v._payload),S)}if(_s(v))return w(g,m,v,S);if(ys(v))return y(g,m,v,S);Ol(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,v),m.return=g,g=m):(n(g,m),m=Wa(v,g.mode,S),m.return=g,g=m),a(g)):n(g,m)}return b}var ts=yp(!0),vp=yp(!1),Co=qn(null),Eo=null,Br=null,Sc=null;function Nc(){Sc=Br=Eo=null}function Cc(e){var t=Co.current;Pe(Co),e._currentValue=t}function Ri(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Qr(e,t){Eo=e,Sc=Br=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ct=!0),e.firstContext=null)}function Xt(e){var t=e._currentValue;if(Sc!==e)if(e={context:e,memoizedValue:t,next:null},Br===null){if(Eo===null)throw Error(R(308));Br=e,Eo.dependencies={lanes:0,firstContext:e}}else Br=Br.next=e;return t}var ir=null;function Ec(e){ir===null?ir=[e]:ir.push(e)}function wp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Ec(t)):(n.next=s.next,s.next=n),t.interleaved=n,Cn(e,r)}function Cn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Pn=!1;function Mc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Cn(e,n)}return s=r.interleaved,s===null?(t.next=t,Ec(r)):(t.next=s.next,s.next=t),r.interleaved=t,Cn(e,n)}function so(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,pc(e,n)}}function Yu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Mo(e,t,n,r){var s=e.updateQueue;Pn=!1;var l=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,d=c.next;c.next=null,a===null?l=d:a.next=d,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,i=p.lastBaseUpdate,i!==a&&(i===null?p.firstBaseUpdate=d:i.next=d,p.lastBaseUpdate=c))}if(l!==null){var f=s.baseState;a=0,p=d=c=null,i=l;do{var h=i.lane,x=i.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var w=e,y=i;switch(h=t,x=n,y.tag){case 1:if(w=y.payload,typeof w=="function"){f=w.call(x,f,h);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,h=typeof w=="function"?w.call(x,f,h):w,h==null)break e;f=Oe({},f,h);break e;case 2:Pn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[i]:h.push(i))}else x={eventTime:x,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},p===null?(d=p=x,c=f):p=p.next=x,a|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;h=i,i=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);mr|=a,e.lanes=a,e.memoizedState=f}}function Ku(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(R(191,s));s.call(r)}}}var xl={},xn=qn(xl),tl=qn(xl),nl=qn(xl);function cr(e){if(e===xl)throw Error(R(174));return e}function _c(e,t){switch(Te(nl,t),Te(tl,e),Te(xn,xl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fi(t,e)}Pe(xn),Te(xn,t)}function ns(){Pe(xn),Pe(tl),Pe(nl)}function kp(e){cr(nl.current);var t=cr(xn.current),n=fi(t,e.type);t!==n&&(Te(tl,e),Te(xn,n))}function Tc(e){tl.current===e&&(Pe(xn),Pe(tl))}var Ie=qn(0);function _o(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $a=[];function Dc(){for(var e=0;e<$a.length;e++)$a[e]._workInProgressVersionPrimary=null;$a.length=0}var lo=_n.ReactCurrentDispatcher,Aa=_n.ReactCurrentBatchConfig,xr=0,Le=null,Qe=null,nt=null,To=!1,Os=!1,rl=0,pg=0;function ct(){throw Error(R(321))}function Rc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rn(e[n],t[n]))return!1;return!0}function Pc(e,t,n,r,s,l){if(xr=l,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lo.current=e===null||e.memoizedState===null?gg:yg,e=n(r,s),Os){l=0;do{if(Os=!1,rl=0,25<=l)throw Error(R(301));l+=1,nt=Qe=null,t.updateQueue=null,lo.current=vg,e=n(r,s)}while(Os)}if(lo.current=Do,t=Qe!==null&&Qe.next!==null,xr=0,nt=Qe=Le=null,To=!1,t)throw Error(R(300));return e}function zc(){var e=rl!==0;return rl=0,e}function fn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?Le.memoizedState=nt=e:nt=nt.next=e,nt}function Yt(){if(Qe===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=nt===null?Le.memoizedState:nt.next;if(t!==null)nt=t,Qe=e;else{if(e===null)throw Error(R(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},nt===null?Le.memoizedState=nt=e:nt=nt.next=e}return nt}function sl(e,t){return typeof t=="function"?t(e):t}function Fa(e){var t=Yt(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=Qe,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var a=s.next;s.next=l.next,l.next=a}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var i=a=null,c=null,d=l;do{var p=d.lane;if((xr&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var f={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=f,a=r):c=c.next=f,Le.lanes|=p,mr|=p}d=d.next}while(d!==null&&d!==l);c===null?a=r:c.next=i,rn(r,t.memoizedState)||(Ct=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,Le.lanes|=l,mr|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ba(e){var t=Yt(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do l=e(l,a.action),a=a.next;while(a!==s);rn(l,t.memoizedState)||(Ct=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function jp(){}function Sp(e,t){var n=Le,r=Yt(),s=t(),l=!rn(r.memoizedState,s);if(l&&(r.memoizedState=s,Ct=!0),r=r.queue,Ic(Ep.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,ll(9,Cp.bind(null,n,r,s,t),void 0,null),st===null)throw Error(R(349));xr&30||Np(n,t,s)}return s}function Np(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Cp(e,t,n,r){t.value=n,t.getSnapshot=r,Mp(t)&&_p(e)}function Ep(e,t,n){return n(function(){Mp(t)&&_p(e)})}function Mp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rn(e,n)}catch(r){return!0}}function _p(e){var t=Cn(e,1);t!==null&&nn(t,e,1,-1)}function Qu(e){var t=fn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:e},t.queue=e,e=e.dispatch=mg.bind(null,Le,e),[t.memoizedState,e]}function ll(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Tp(){return Yt().memoizedState}function oo(e,t,n,r){var s=fn();Le.flags|=e,s.memoizedState=ll(1|t,n,void 0,r===void 0?null:r)}function qo(e,t,n,r){var s=Yt();r=r===void 0?null:r;var l=void 0;if(Qe!==null){var a=Qe.memoizedState;if(l=a.destroy,r!==null&&Rc(r,a.deps)){s.memoizedState=ll(t,n,l,r);return}}Le.flags|=e,s.memoizedState=ll(1|t,n,l,r)}function Gu(e,t){return oo(8390656,8,e,t)}function Ic(e,t){return qo(2048,8,e,t)}function Dp(e,t){return qo(4,2,e,t)}function Rp(e,t){return qo(4,4,e,t)}function Pp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zp(e,t,n){return n=n!=null?n.concat([e]):null,qo(4,4,Pp.bind(null,t,e),n)}function Lc(){}function Ip(e,t){var n=Yt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Rc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Lp(e,t){var n=Yt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Rc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Op(e,t,n){return xr&21?(rn(n,t)||(n=Uf(),Le.lanes|=n,mr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ct=!0),e.memoizedState=n)}function hg(e,t){var n=Ee;Ee=n!==0&&4>n?n:4,e(!0);var r=Aa.transition;Aa.transition={};try{e(!1),t()}finally{Ee=n,Aa.transition=r}}function $p(){return Yt().memoizedState}function xg(e,t,n){var r=Xn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ap(e))Fp(t,n);else if(n=wp(e,t,n,r),n!==null){var s=yt();nn(n,e,r,s),Bp(n,t,r)}}function mg(e,t,n){var r=Xn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ap(e))Fp(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,i=l(a,n);if(s.hasEagerState=!0,s.eagerState=i,rn(i,a)){var c=t.interleaved;c===null?(s.next=s,Ec(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch(d){}finally{}n=wp(e,t,s,r),n!==null&&(s=yt(),nn(n,e,r,s),Bp(n,t,r))}}function Ap(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function Fp(e,t){Os=To=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Bp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,pc(e,n)}}var Do={readContext:Xt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},gg={readContext:Xt,useCallback:function(e,t){return fn().memoizedState=[e,t===void 0?null:t],e},useContext:Xt,useEffect:Gu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,oo(4194308,4,Pp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return oo(4,2,e,t)},useMemo:function(e,t){var n=fn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=fn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xg.bind(null,Le,e),[r.memoizedState,e]},useRef:function(e){var t=fn();return e={current:e},t.memoizedState=e},useState:Qu,useDebugValue:Lc,useDeferredValue:function(e){return fn().memoizedState=e},useTransition:function(){var e=Qu(!1),t=e[0];return e=hg.bind(null,e[1]),fn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Le,s=fn();if(ze){if(n===void 0)throw Error(R(407));n=n()}else{if(n=t(),st===null)throw Error(R(349));xr&30||Np(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,Gu(Ep.bind(null,r,l,e),[e]),r.flags|=2048,ll(9,Cp.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=fn(),t=st.identifierPrefix;if(ze){var n=kn,r=bn;n=(r&~(1<<32-tn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=rl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=pg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yg={readContext:Xt,useCallback:Ip,useContext:Xt,useEffect:Ic,useImperativeHandle:zp,useInsertionEffect:Dp,useLayoutEffect:Rp,useMemo:Lp,useReducer:Fa,useRef:Tp,useState:function(){return Fa(sl)},useDebugValue:Lc,useDeferredValue:function(e){var t=Yt();return Op(t,Qe.memoizedState,e)},useTransition:function(){var e=Fa(sl)[0],t=Yt().memoizedState;return[e,t]},useMutableSource:jp,useSyncExternalStore:Sp,useId:$p,unstable_isNewReconciler:!1},vg={readContext:Xt,useCallback:Ip,useContext:Xt,useEffect:Ic,useImperativeHandle:zp,useInsertionEffect:Dp,useLayoutEffect:Rp,useMemo:Lp,useReducer:Ba,useRef:Tp,useState:function(){return Ba(sl)},useDebugValue:Lc,useDeferredValue:function(e){var t=Yt();return Qe===null?t.memoizedState=e:Op(t,Qe.memoizedState,e)},useTransition:function(){var e=Ba(sl)[0],t=Yt().memoizedState;return[e,t]},useMutableSource:jp,useSyncExternalStore:Sp,useId:$p,unstable_isNewReconciler:!1};function Jt(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Pi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Oe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Jo={isMounted:function(e){return(e=e._reactInternals)?wr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=yt(),s=Xn(e),l=jn(r,s);l.payload=t,n!=null&&(l.callback=n),t=Wn(e,l,s),t!==null&&(nn(t,e,s,r),so(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=yt(),s=Xn(e),l=jn(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Wn(e,l,s),t!==null&&(nn(t,e,s,r),so(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=yt(),r=Xn(e),s=jn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Wn(e,s,r),t!==null&&(nn(t,e,r,n),so(t,e,r))}};function qu(e,t,n,r,s,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!qs(n,r)||!qs(s,l):!0}function Up(e,t,n){var r=!1,s=Qn,l=t.contextType;return typeof l=="object"&&l!==null?l=Xt(l):(s=Mt(t)?pr:pt.current,r=t.contextTypes,l=(r=r!=null)?Zr(e,s):Qn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Jo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function Ju(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Jo.enqueueReplaceState(t,t.state,null)}function zi(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Mc(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Xt(l):(l=Mt(t)?pr:pt.current,s.context=Zr(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Pi(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Jo.enqueueReplaceState(s,s.state,null),Mo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function rs(e,t){try{var n="",r=t;do n+=Yx(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function Ua(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function Ii(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var wg=typeof WeakMap=="function"?WeakMap:Map;function Hp(e,t,n){n=jn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Po||(Po=!0,Vi=r),Ii(e,t)},n}function Wp(e,t,n){n=jn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ii(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Ii(e,t),typeof r!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Zu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new wg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=zg.bind(null,e,t,n),t.then(e,e))}function ed(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function td(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=jn(-1,1),t.tag=2,Wn(n,t,1))),n.lanes|=1),e)}var bg=_n.ReactCurrentOwner,Ct=!1;function gt(e,t,n,r){t.child=e===null?vp(t,null,n,r):ts(t,e.child,n,r)}function nd(e,t,n,r,s){n=n.render;var l=t.ref;return Qr(t,s),r=Pc(e,t,n,r,l,s),n=zc(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,En(e,t,s)):(ze&&n&&bc(t),t.flags|=1,gt(e,t,r,s),t.child)}function rd(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!Wc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Vp(e,t,l,r,s)):(e=uo(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:qs,n(a,r)&&e.ref===t.ref)return En(e,t,s)}return t.flags|=1,e=Yn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Vp(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(qs(l,r)&&e.ref===t.ref)if(Ct=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(Ct=!0);else return t.lanes=e.lanes,En(e,t,s)}return Li(e,t,n,r,s)}function Xp(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Hr,Pt),Pt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(Hr,Pt),Pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Te(Hr,Pt),Pt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,Te(Hr,Pt),Pt|=r;return gt(e,t,s,n),t.child}function Yp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Li(e,t,n,r,s){var l=Mt(n)?pr:pt.current;return l=Zr(t,l),Qr(t,s),n=Pc(e,t,n,r,l,s),r=zc(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,En(e,t,s)):(ze&&r&&bc(t),t.flags|=1,gt(e,t,n,s),t.child)}function sd(e,t,n,r,s){if(Mt(n)){var l=!0;jo(t)}else l=!1;if(Qr(t,s),t.stateNode===null)ao(e,t),Up(t,n,r),zi(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Xt(d):(d=Mt(n)?pr:pt.current,d=Zr(t,d));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==d)&&Ju(t,a,r,d),Pn=!1;var h=t.memoizedState;a.state=h,Mo(t,r,a,s),c=t.memoizedState,i!==r||h!==c||Et.current||Pn?(typeof p=="function"&&(Pi(t,n,p,r),c=t.memoizedState),(i=Pn||qu(t,n,i,r,h,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,bp(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:Jt(t.type,i),a.props=d,f=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Xt(c):(c=Mt(n)?pr:pt.current,c=Zr(t,c));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||h!==c)&&Ju(t,a,r,c),Pn=!1,h=t.memoizedState,a.state=h,Mo(t,r,a,s);var w=t.memoizedState;i!==f||h!==w||Et.current||Pn?(typeof x=="function"&&(Pi(t,n,x,r),w=t.memoizedState),(d=Pn||qu(t,n,d,r,h,w,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Oi(e,t,n,r,l,s)}function Oi(e,t,n,r,s,l){Yp(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Hu(t,n,!1),En(e,t,l);r=t.stateNode,bg.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ts(t,e.child,null,l),t.child=ts(t,null,i,l)):gt(e,t,i,l),t.memoizedState=r.state,s&&Hu(t,n,!0),t.child}function Kp(e){var t=e.stateNode;t.pendingContext?Uu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Uu(e,t.context,!1),_c(e,t.containerInfo)}function ld(e,t,n,r,s){return es(),jc(s),t.flags|=256,gt(e,t,n,r),t.child}var $i={dehydrated:null,treeContext:null,retryLane:0};function Ai(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qp(e,t,n){var r=t.pendingProps,s=Ie.current,l=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Te(Ie,s&1),e===null)return Di(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=ta(a,r,0,null),e=dr(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ai(n),t.memoizedState=$i,e):Oc(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return kg(e,t,a,r,i,s,n);if(l){l=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Yn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?l=Yn(i,l):(l=dr(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?Ai(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=$i,r}return l=e.child,e=l.sibling,r=Yn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Oc(e,t){return t=ta({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function $l(e,t,n,r){return r!==null&&jc(r),ts(t,e.child,null,n),e=Oc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kg(e,t,n,r,s,l,a){if(n)return t.flags&256?(t.flags&=-257,r=Ua(Error(R(422))),$l(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=ta({mode:"visible",children:r.children},s,0,null),l=dr(l,s,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&ts(t,e.child,null,a),t.child.memoizedState=Ai(a),t.memoizedState=$i,l);if(!(t.mode&1))return $l(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(R(419)),r=Ua(l,r,void 0),$l(e,t,a,r)}if(i=(a&e.childLanes)!==0,Ct||i){if(r=st,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,Cn(e,s),nn(r,e,s,-1))}return Hc(),r=Ua(Error(R(421))),$l(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Ig.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,zt=Hn(s.nextSibling),It=t,ze=!0,en=null,e!==null&&(Ut[Ht++]=bn,Ut[Ht++]=kn,Ut[Ht++]=hr,bn=e.id,kn=e.overflow,hr=t),t=Oc(t,r.children),t.flags|=4096,t)}function od(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ri(e.return,t,n)}function Ha(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function Gp(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(gt(e,t,r.children,n),r=Ie.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&od(e,n,t);else if(e.tag===19)od(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Te(Ie,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&_o(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ha(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&_o(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ha(t,!0,n,null,l);break;case"together":Ha(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ao(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function En(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,n=Yn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Yn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jg(e,t,n){switch(t.tag){case 3:Kp(t),es();break;case 5:kp(t);break;case 1:Mt(t.type)&&jo(t);break;case 4:_c(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Te(Co,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Te(Ie,Ie.current&1),t.flags|=128,null):n&t.child.childLanes?Qp(e,t,n):(Te(Ie,Ie.current&1),e=En(e,t,n),e!==null?e.sibling:null);Te(Ie,Ie.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Gp(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Ie,Ie.current),r)break;return null;case 22:case 23:return t.lanes=0,Xp(e,t,n)}return En(e,t,n)}var qp,Fi,Jp,Zp;qp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fi=function(){};Jp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,cr(xn.current);var l=null;switch(n){case"input":s=ii(e,s),r=ii(e,r),l=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),l=[];break;case"textarea":s=di(e,s),r=di(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=bo)}pi(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var i=s[d];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ws.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var c=r[d];if(i=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(l||(l=[]),l.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ws.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&De("scroll",e),l||i===c||(l=[])):(l=l||[]).push(d,c))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};Zp=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ss(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Sg(e,t,n){var r=t.pendingProps;switch(kc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return Mt(t.type)&&ko(),ut(t),null;case 3:return r=t.stateNode,ns(),Pe(Et),Pe(pt),Dc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ll(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,en!==null&&(Ki(en),en=null))),Fi(e,t),ut(t),null;case 5:Tc(t);var s=cr(nl.current);if(n=t.type,e!==null&&t.stateNode!=null)Jp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(R(166));return ut(t),null}if(e=cr(xn.current),Ll(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[pn]=t,r[el]=l,e=(t.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(s=0;s<Ds.length;s++)De(Ds[s],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":xu(r,l),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},De("invalid",r);break;case"textarea":gu(r,l),De("invalid",r)}pi(n,l),s=null;for(var a in l)if(l.hasOwnProperty(a)){var i=l[a];a==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&Il(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&Il(r.textContent,i,e),s=["children",""+i]):Ws.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&De("scroll",r)}switch(n){case"input":El(r),mu(r,l,!0);break;case"textarea":El(r),yu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=bo)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ef(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[pn]=t,e[el]=r,qp(e,t,!1,!1),t.stateNode=e;e:{switch(a=hi(n,r),n){case"dialog":De("cancel",e),De("close",e),s=r;break;case"iframe":case"object":case"embed":De("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ds.length;s++)De(Ds[s],e);s=r;break;case"source":De("error",e),s=r;break;case"img":case"image":case"link":De("error",e),De("load",e),s=r;break;case"details":De("toggle",e),s=r;break;case"input":xu(e,r),s=ii(e,r),De("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),De("invalid",e);break;case"textarea":gu(e,r),s=di(e,r),De("invalid",e);break;default:s=r}pi(n,s),i=s;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?Tf(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Mf(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Vs(e,c):typeof c=="number"&&Vs(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ws.hasOwnProperty(l)?c!=null&&l==="onScroll"&&De("scroll",e):c!=null&&ac(e,l,c,a))}switch(n){case"input":El(e),mu(e,r,!1);break;case"textarea":El(e),yu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Kn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Vr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Vr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=bo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ut(t),null;case 6:if(e&&t.stateNode!=null)Zp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(R(166));if(n=cr(nl.current),cr(xn.current),Ll(t)){if(r=t.stateNode,n=t.memoizedProps,r[pn]=t,(l=r.nodeValue!==n)&&(e=It,e!==null))switch(e.tag){case 3:Il(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Il(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pn]=t,t.stateNode=r}return ut(t),null;case 13:if(Pe(Ie),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ze&&zt!==null&&t.mode&1&&!(t.flags&128))gp(),es(),t.flags|=98560,l=!1;else if(l=Ll(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(R(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(R(317));l[pn]=t}else es(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),l=!1}else en!==null&&(Ki(en),en=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ie.current&1?qe===0&&(qe=3):Hc())),t.updateQueue!==null&&(t.flags|=4),ut(t),null);case 4:return ns(),Fi(e,t),e===null&&Js(t.stateNode.containerInfo),ut(t),null;case 10:return Cc(t.type._context),ut(t),null;case 17:return Mt(t.type)&&ko(),ut(t),null;case 19:if(Pe(Ie),l=t.memoizedState,l===null)return ut(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)Ss(l,!1);else{if(qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=_o(e),a!==null){for(t.flags|=128,Ss(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Te(Ie,Ie.current&1|2),t.child}e=e.sibling}l.tail!==null&&We()>ss&&(t.flags|=128,r=!0,Ss(l,!1),t.lanes=4194304)}else{if(!r)if(e=_o(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ss(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!ze)return ut(t),null}else 2*We()-l.renderingStartTime>ss&&n!==1073741824&&(t.flags|=128,r=!0,Ss(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=We(),t.sibling=null,n=Ie.current,Te(Ie,r?n&1|2:n&1),t):(ut(t),null);case 22:case 23:return Uc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Pt&1073741824&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function Ng(e,t){switch(kc(t),t.tag){case 1:return Mt(t.type)&&ko(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ns(),Pe(Et),Pe(pt),Dc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Tc(t),null;case 13:if(Pe(Ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));es()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(Ie),null;case 4:return ns(),null;case 10:return Cc(t.type._context),null;case 22:case 23:return Uc(),null;case 24:return null;default:return null}}var Al=!1,ft=!1,Cg=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Ur(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(e,t,r)}else n.current=null}function Bi(e,t,n){try{n()}catch(r){Ae(e,t,r)}}var ad=!1;function Eg(e,t){if(Si=yo,e=sp(),wc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch(S){n=null;break e}var a=0,i=-1,c=-1,d=0,p=0,f=e,h=null;t:for(;;){for(var x;f!==n||s!==0&&f.nodeType!==3||(i=a+s),f!==l||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)h=f,f=x;for(;;){if(f===e)break t;if(h===n&&++d===s&&(i=a),h===l&&++p===r&&(c=a),(x=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=x}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ni={focusedElem:e,selectionRange:n},yo=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,b=w.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Jt(t.type,y),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(S){Ae(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return w=ad,ad=!1,w}function $s(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&Bi(t,n,l)}s=s.next}while(s!==r)}}function Zo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ui(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function eh(e){var t=e.alternate;t!==null&&(e.alternate=null,eh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pn],delete t[el],delete t[Mi],delete t[cg],delete t[ug])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function th(e){return e.tag===5||e.tag===3||e.tag===4}function id(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||th(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=bo));else if(r!==4&&(e=e.child,e!==null))for(Hi(e,t,n),e=e.sibling;e!==null;)Hi(e,t,n),e=e.sibling}function Wi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Wi(e,t,n),e=e.sibling;e!==null;)Wi(e,t,n),e=e.sibling}var lt=null,Zt=!1;function Dn(e,t,n){for(n=n.child;n!==null;)nh(e,t,n),n=n.sibling}function nh(e,t,n){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Vo,n)}catch(i){}switch(n.tag){case 5:ft||Ur(n,t);case 6:var r=lt,s=Zt;lt=null,Dn(e,t,n),lt=r,Zt=s,lt!==null&&(Zt?(e=lt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(Zt?(e=lt,n=n.stateNode,e.nodeType===8?La(e.parentNode,n):e.nodeType===1&&La(e,n),Qs(e)):La(lt,n.stateNode));break;case 4:r=lt,s=Zt,lt=n.stateNode.containerInfo,Zt=!0,Dn(e,t,n),lt=r,Zt=s;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&Bi(n,t,a),s=s.next}while(s!==r)}Dn(e,t,n);break;case 1:if(!ft&&(Ur(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Ae(n,t,i)}Dn(e,t,n);break;case 21:Dn(e,t,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,Dn(e,t,n),ft=r):Dn(e,t,n);break;default:Dn(e,t,n)}}function cd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Cg),t.forEach(function(r){var s=Lg.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:lt=i.stateNode,Zt=!1;break e;case 3:lt=i.stateNode.containerInfo,Zt=!0;break e;case 4:lt=i.stateNode.containerInfo,Zt=!0;break e}i=i.return}if(lt===null)throw Error(R(160));nh(l,a,s),lt=null,Zt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ae(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rh(t,e),t=t.sibling}function rh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qt(t,e),dn(e),r&4){try{$s(3,e,e.return),Zo(3,e)}catch(y){Ae(e,e.return,y)}try{$s(5,e,e.return)}catch(y){Ae(e,e.return,y)}}break;case 1:qt(t,e),dn(e),r&512&&n!==null&&Ur(n,n.return);break;case 5:if(qt(t,e),dn(e),r&512&&n!==null&&Ur(n,n.return),e.flags&32){var s=e.stateNode;try{Vs(s,"")}catch(y){Ae(e,e.return,y)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&Nf(s,l),hi(i,a);var d=hi(i,l);for(a=0;a<c.length;a+=2){var p=c[a],f=c[a+1];p==="style"?Tf(s,f):p==="dangerouslySetInnerHTML"?Mf(s,f):p==="children"?Vs(s,f):ac(s,p,f,d)}switch(i){case"input":ci(s,l);break;case"textarea":Cf(s,l);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?Vr(s,!!l.multiple,x,!1):h!==!!l.multiple&&(l.defaultValue!=null?Vr(s,!!l.multiple,l.defaultValue,!0):Vr(s,!!l.multiple,l.multiple?[]:"",!1))}s[el]=l}catch(y){Ae(e,e.return,y)}}break;case 6:if(qt(t,e),dn(e),r&4){if(e.stateNode===null)throw Error(R(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(y){Ae(e,e.return,y)}}break;case 3:if(qt(t,e),dn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qs(t.containerInfo)}catch(y){Ae(e,e.return,y)}break;case 4:qt(t,e),dn(e);break;case 13:qt(t,e),dn(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(Fc=We())),r&4&&cd(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(ft=(d=ft)||p,qt(t,e),ft=d):qt(t,e),dn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(Y=e,p=e.child;p!==null;){for(f=Y=p;Y!==null;){switch(h=Y,x=h.child,h.tag){case 0:case 11:case 14:case 15:$s(4,h,h.return);break;case 1:Ur(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(y){Ae(r,n,y)}}break;case 5:Ur(h,h.return);break;case 22:if(h.memoizedState!==null){dd(f);continue}}x!==null?(x.return=h,Y=x):dd(f)}p=p.sibling}e:for(p=null,f=e;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,d?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=_f("display",a))}catch(y){Ae(e,e.return,y)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){Ae(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qt(t,e),dn(e),r&4&&cd(e);break;case 21:break;default:qt(t,e),dn(e)}}function dn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(th(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Vs(s,""),r.flags&=-33);var l=id(e);Wi(e,l,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=id(e);Hi(e,i,a);break;default:throw Error(R(161))}}catch(c){Ae(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Mg(e,t,n){Y=e,sh(e)}function sh(e,t,n){for(var r=(e.mode&1)!==0;Y!==null;){var s=Y,l=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Al;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||ft;i=Al;var d=ft;if(Al=a,(ft=c)&&!d)for(Y=s;Y!==null;)a=Y,c=a.child,a.tag===22&&a.memoizedState!==null?fd(s):c!==null?(c.return=a,Y=c):fd(s);for(;l!==null;)Y=l,sh(l),l=l.sibling;Y=s,Al=i,ft=d}ud(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,Y=l):ud(e)}}function ud(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ft||Zo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ft)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Jt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Ku(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ku(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&Qs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}ft||t.flags&512&&Ui(t)}catch(h){Ae(t,t.return,h)}}if(t===e){Y=null;break}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}}function dd(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Y=n;break}Y=t.return}}function fd(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Zo(4,t)}catch(c){Ae(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ae(t,s,c)}}var l=t.return;try{Ui(t)}catch(c){Ae(t,l,c)}break;case 5:var a=t.return;try{Ui(t)}catch(c){Ae(t,a,c)}}}catch(c){Ae(t,t.return,c)}if(t===e){Y=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Y=i;break}Y=t.return}}var _g=Math.ceil,Ro=_n.ReactCurrentDispatcher,$c=_n.ReactCurrentOwner,Vt=_n.ReactCurrentBatchConfig,ke=0,st=null,Xe=null,ot=0,Pt=0,Hr=qn(0),qe=0,ol=null,mr=0,ea=0,Ac=0,As=null,Nt=null,Fc=0,ss=1/0,vn=null,Po=!1,Vi=null,Vn=null,Fl=!1,$n=null,zo=0,Fs=0,Xi=null,io=-1,co=0;function yt(){return ke&6?We():io!==-1?io:io=We()}function Xn(e){return e.mode&1?ke&2&&ot!==0?ot&-ot:fg.transition!==null?(co===0&&(co=Uf()),co):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:Qf(e.type)),e):1}function nn(e,t,n,r){if(50<Fs)throw Fs=0,Xi=null,Error(R(185));fl(e,n,r),(!(ke&2)||e!==st)&&(e===st&&(!(ke&2)&&(ea|=n),qe===4&&Ln(e,ot)),_t(e,r),n===1&&ke===0&&!(t.mode&1)&&(ss=We()+500,Go&&Jn()))}function _t(e,t){var n=e.callbackNode;fm(e,t);var r=go(e,e===st?ot:0);if(r===0)n!==null&&bu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&bu(n),t===1)e.tag===0?dg(pd.bind(null,e)):hp(pd.bind(null,e)),ag(function(){!(ke&6)&&Jn()}),n=null;else{switch(Hf(r)){case 1:n=fc;break;case 4:n=Ff;break;case 16:n=mo;break;case 536870912:n=Bf;break;default:n=mo}n=fh(n,lh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function lh(e,t){if(io=-1,co=0,ke&6)throw Error(R(327));var n=e.callbackNode;if(Gr()&&e.callbackNode!==n)return null;var r=go(e,e===st?ot:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Io(e,r);else{t=r;var s=ke;ke|=2;var l=ah();(st!==e||ot!==t)&&(vn=null,ss=We()+500,ur(e,t));do try{Rg();break}catch(i){oh(e,i)}while(!0);Nc(),Ro.current=l,ke=s,Xe!==null?t=0:(st=null,ot=0,t=qe)}if(t!==0){if(t===2&&(s=vi(e),s!==0&&(r=s,t=Yi(e,s))),t===1)throw n=ol,ur(e,0),Ln(e,r),_t(e,We()),n;if(t===6)Ln(e,r);else{if(s=e.current.alternate,!(r&30)&&!Tg(s)&&(t=Io(e,r),t===2&&(l=vi(e),l!==0&&(r=l,t=Yi(e,l))),t===1))throw n=ol,ur(e,0),Ln(e,r),_t(e,We()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(R(345));case 2:lr(e,Nt,vn);break;case 3:if(Ln(e,r),(r&130023424)===r&&(t=Fc+500-We(),10<t)){if(go(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){yt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ei(lr.bind(null,e,Nt,vn),t);break}lr(e,Nt,vn);break;case 4:if(Ln(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-tn(r);l=1<<a,a=t[a],a>s&&(s=a),r&=~l}if(r=s,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_g(r/1960))-r,10<r){e.timeoutHandle=Ei(lr.bind(null,e,Nt,vn),r);break}lr(e,Nt,vn);break;case 5:lr(e,Nt,vn);break;default:throw Error(R(329))}}}return _t(e,We()),e.callbackNode===n?lh.bind(null,e):null}function Yi(e,t){var n=As;return e.current.memoizedState.isDehydrated&&(ur(e,t).flags|=256),e=Io(e,t),e!==2&&(t=Nt,Nt=n,t!==null&&Ki(t)),e}function Ki(e){Nt===null?Nt=e:Nt.push.apply(Nt,e)}function Tg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!rn(l(),s))return!1}catch(a){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ln(e,t){for(t&=~Ac,t&=~ea,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-tn(t),r=1<<n;e[n]=-1,t&=~r}}function pd(e){if(ke&6)throw Error(R(327));Gr();var t=go(e,0);if(!(t&1))return _t(e,We()),null;var n=Io(e,t);if(e.tag!==0&&n===2){var r=vi(e);r!==0&&(t=r,n=Yi(e,r))}if(n===1)throw n=ol,ur(e,0),Ln(e,t),_t(e,We()),n;if(n===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lr(e,Nt,vn),_t(e,We()),null}function Bc(e,t){var n=ke;ke|=1;try{return e(t)}finally{ke=n,ke===0&&(ss=We()+500,Go&&Jn())}}function gr(e){$n!==null&&$n.tag===0&&!(ke&6)&&Gr();var t=ke;ke|=1;var n=Vt.transition,r=Ee;try{if(Vt.transition=null,Ee=1,e)return e()}finally{Ee=r,Vt.transition=n,ke=t,!(ke&6)&&Jn()}}function Uc(){Pt=Hr.current,Pe(Hr)}function ur(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,og(n)),Xe!==null)for(n=Xe.return;n!==null;){var r=n;switch(kc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ko();break;case 3:ns(),Pe(Et),Pe(pt),Dc();break;case 5:Tc(r);break;case 4:ns();break;case 13:Pe(Ie);break;case 19:Pe(Ie);break;case 10:Cc(r.type._context);break;case 22:case 23:Uc()}n=n.return}if(st=e,Xe=e=Yn(e.current,null),ot=Pt=t,qe=0,ol=null,Ac=ea=mr=0,Nt=As=null,ir!==null){for(t=0;t<ir.length;t++)if(n=ir[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=s,r.next=a}n.pending=r}ir=null}return e}function oh(e,t){do{var n=Xe;try{if(Nc(),lo.current=Do,To){for(var r=Le.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}To=!1}if(xr=0,nt=Qe=Le=null,Os=!1,rl=0,$c.current=null,n===null||n.return===null){qe=1,ol=t,Xe=null;break}e:{var l=e,a=n.return,i=n,c=t;if(t=ot,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=i,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=ed(a);if(x!==null){x.flags&=-257,td(x,a,i,l,t),x.mode&1&&Zu(l,d,t),t=x,c=d;var w=t.updateQueue;if(w===null){var y=new Set;y.add(c),t.updateQueue=y}else w.add(c);break e}else{if(!(t&1)){Zu(l,d,t),Hc();break e}c=Error(R(426))}}else if(ze&&i.mode&1){var b=ed(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),td(b,a,i,l,t),jc(rs(c,i));break e}}l=c=rs(c,i),qe!==4&&(qe=2),As===null?As=[l]:As.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var g=Hp(l,c,t);Yu(l,g);break e;case 1:i=c;var m=l.type,v=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Vn===null||!Vn.has(v)))){l.flags|=65536,t&=-t,l.lanes|=t;var S=Wp(l,i,t);Yu(l,S);break e}}l=l.return}while(l!==null)}ch(n)}catch(j){t=j,Xe===n&&n!==null&&(Xe=n=n.return);continue}break}while(!0)}function ah(){var e=Ro.current;return Ro.current=Do,e===null?Do:e}function Hc(){(qe===0||qe===3||qe===2)&&(qe=4),st===null||!(mr&268435455)&&!(ea&268435455)||Ln(st,ot)}function Io(e,t){var n=ke;ke|=2;var r=ah();(st!==e||ot!==t)&&(vn=null,ur(e,t));do try{Dg();break}catch(s){oh(e,s)}while(!0);if(Nc(),ke=n,Ro.current=r,Xe!==null)throw Error(R(261));return st=null,ot=0,qe}function Dg(){for(;Xe!==null;)ih(Xe)}function Rg(){for(;Xe!==null&&!rm();)ih(Xe)}function ih(e){var t=dh(e.alternate,e,Pt);e.memoizedProps=e.pendingProps,t===null?ch(e):Xe=t,$c.current=null}function ch(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ng(n,t),n!==null){n.flags&=32767,Xe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Xe=null;return}}else if(n=Sg(n,t,Pt),n!==null){Xe=n;return}if(t=t.sibling,t!==null){Xe=t;return}Xe=t=e}while(t!==null);qe===0&&(qe=5)}function lr(e,t,n){var r=Ee,s=Vt.transition;try{Vt.transition=null,Ee=1,Pg(e,t,n,r)}finally{Vt.transition=s,Ee=r}return null}function Pg(e,t,n,r){do Gr();while($n!==null);if(ke&6)throw Error(R(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(pm(e,l),e===st&&(Xe=st=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fl||(Fl=!0,fh(mo,function(){return Gr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Vt.transition,Vt.transition=null;var a=Ee;Ee=1;var i=ke;ke|=4,$c.current=null,Eg(e,n),rh(n,e),Zm(Ni),yo=!!Si,Ni=Si=null,e.current=n,Mg(n),sm(),ke=i,Ee=a,Vt.transition=l}else e.current=n;if(Fl&&(Fl=!1,$n=e,zo=s),l=e.pendingLanes,l===0&&(Vn=null),am(n.stateNode),_t(e,We()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Po)throw Po=!1,e=Vi,Vi=null,e;return zo&1&&e.tag!==0&&Gr(),l=e.pendingLanes,l&1?e===Xi?Fs++:(Fs=0,Xi=e):Fs=0,Jn(),null}function Gr(){if($n!==null){var e=Hf(zo),t=Vt.transition,n=Ee;try{if(Vt.transition=null,Ee=16>e?16:e,$n===null)var r=!1;else{if(e=$n,$n=null,zo=0,ke&6)throw Error(R(331));var s=ke;for(ke|=4,Y=e.current;Y!==null;){var l=Y,a=l.child;if(Y.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(Y=d;Y!==null;){var p=Y;switch(p.tag){case 0:case 11:case 15:$s(8,p,l)}var f=p.child;if(f!==null)f.return=p,Y=f;else for(;Y!==null;){p=Y;var h=p.sibling,x=p.return;if(eh(p),p===d){Y=null;break}if(h!==null){h.return=x,Y=h;break}Y=x}}}var w=l.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}Y=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,Y=a;else e:for(;Y!==null;){if(l=Y,l.flags&2048)switch(l.tag){case 0:case 11:case 15:$s(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,Y=g;break e}Y=l.return}}var m=e.current;for(Y=m;Y!==null;){a=Y;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,Y=v;else e:for(a=m;Y!==null;){if(i=Y,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Zo(9,i)}}catch(j){Ae(i,i.return,j)}if(i===a){Y=null;break e}var S=i.sibling;if(S!==null){S.return=i.return,Y=S;break e}Y=i.return}}if(ke=s,Jn(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Vo,e)}catch(j){}r=!0}return r}finally{Ee=n,Vt.transition=t}}return!1}function hd(e,t,n){t=rs(n,t),t=Hp(e,t,1),e=Wn(e,t,1),t=yt(),e!==null&&(fl(e,1,t),_t(e,t))}function Ae(e,t,n){if(e.tag===3)hd(e,e,n);else for(;t!==null;){if(t.tag===3){hd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vn===null||!Vn.has(r))){e=rs(n,e),e=Wp(t,e,1),t=Wn(t,e,1),e=yt(),t!==null&&(fl(t,1,e),_t(t,e));break}}t=t.return}}function zg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=yt(),e.pingedLanes|=e.suspendedLanes&n,st===e&&(ot&n)===n&&(qe===4||qe===3&&(ot&130023424)===ot&&500>We()-Fc?ur(e,0):Ac|=n),_t(e,t)}function uh(e,t){t===0&&(e.mode&1?(t=Tl,Tl<<=1,!(Tl&130023424)&&(Tl=4194304)):t=1);var n=yt();e=Cn(e,t),e!==null&&(fl(e,t,n),_t(e,n))}function Ig(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),uh(e,n)}function Lg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(t),uh(e,n)}var dh;dh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Et.current)Ct=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ct=!1,jg(e,t,n);Ct=!!(e.flags&131072)}else Ct=!1,ze&&t.flags&1048576&&xp(t,No,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ao(e,t),e=t.pendingProps;var s=Zr(t,pt.current);Qr(t,n),s=Pc(null,t,r,e,s,n);var l=zc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mt(r)?(l=!0,jo(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Mc(t),s.updater=Jo,t.stateNode=s,s._reactInternals=t,zi(t,r,e,n),t=Oi(null,t,r,!0,l,n)):(t.tag=0,ze&&l&&bc(t),gt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ao(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=$g(r),e=Jt(r,e),s){case 0:t=Li(null,t,r,e,n);break e;case 1:t=sd(null,t,r,e,n);break e;case 11:t=nd(null,t,r,e,n);break e;case 14:t=rd(null,t,r,Jt(r.type,e),n);break e}throw Error(R(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Jt(r,s),Li(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Jt(r,s),sd(e,t,r,s,n);case 3:e:{if(Kp(t),e===null)throw Error(R(387));r=t.pendingProps,l=t.memoizedState,s=l.element,bp(e,t),Mo(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=rs(Error(R(423)),t),t=ld(e,t,r,n,s);break e}else if(r!==s){s=rs(Error(R(424)),t),t=ld(e,t,r,n,s);break e}else for(zt=Hn(t.stateNode.containerInfo.firstChild),It=t,ze=!0,en=null,n=vp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(es(),r===s){t=En(e,t,n);break e}gt(e,t,r,n)}t=t.child}return t;case 5:return kp(t),e===null&&Di(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,a=s.children,Ci(r,s)?a=null:l!==null&&Ci(r,l)&&(t.flags|=32),Yp(e,t),gt(e,t,a,n),t.child;case 6:return e===null&&Di(t),null;case 13:return Qp(e,t,n);case 4:return _c(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ts(t,null,r,n):gt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Jt(r,s),nd(e,t,r,s,n);case 7:return gt(e,t,t.pendingProps,n),t.child;case 8:return gt(e,t,t.pendingProps.children,n),t.child;case 12:return gt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,a=s.value,Te(Co,r._currentValue),r._currentValue=a,l!==null)if(rn(l.value,a)){if(l.children===s.children&&!Et.current){t=En(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){a=l.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=jn(-1,n&-n),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),Ri(l.return,n,t),i.lanes|=n;break}c=c.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(R(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),Ri(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}gt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Qr(t,n),s=Xt(s),r=r(s),t.flags|=1,gt(e,t,r,n),t.child;case 14:return r=t.type,s=Jt(r,t.pendingProps),s=Jt(r.type,s),rd(e,t,r,s,n);case 15:return Vp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Jt(r,s),ao(e,t),t.tag=1,Mt(r)?(e=!0,jo(t)):e=!1,Qr(t,n),Up(t,r,s),zi(t,r,s,n),Oi(null,t,r,!0,e,n);case 19:return Gp(e,t,n);case 22:return Xp(e,t,n)}throw Error(R(156,t.tag))};function fh(e,t){return Af(e,t)}function Og(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(e,t,n,r){return new Og(e,t,n,r)}function Wc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $g(e){if(typeof e=="function")return Wc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===cc)return 11;if(e===uc)return 14}return 2}function Yn(e,t){var n=e.alternate;return n===null?(n=Wt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function uo(e,t,n,r,s,l){var a=2;if(r=e,typeof e=="function")Wc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Pr:return dr(n.children,s,l,t);case ic:a=8,s|=8;break;case si:return e=Wt(12,n,t,s|2),e.elementType=si,e.lanes=l,e;case li:return e=Wt(13,n,t,s),e.elementType=li,e.lanes=l,e;case oi:return e=Wt(19,n,t,s),e.elementType=oi,e.lanes=l,e;case kf:return ta(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wf:a=10;break e;case bf:a=9;break e;case cc:a=11;break e;case uc:a=14;break e;case Rn:a=16,r=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=Wt(a,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function dr(e,t,n,r){return e=Wt(7,e,r,t),e.lanes=n,e}function ta(e,t,n,r){return e=Wt(22,e,r,t),e.elementType=kf,e.lanes=n,e.stateNode={isHidden:!1},e}function Wa(e,t,n){return e=Wt(6,e,null,t),e.lanes=n,e}function Va(e,t,n){return t=Wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ag(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Na(0),this.expirationTimes=Na(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Na(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,s,l,a,i,c){return e=new Ag(e,t,n,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Wt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mc(l),e}function Fg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ph(e){if(!e)return Qn;e=e._reactInternals;e:{if(wr(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var n=e.type;if(Mt(n))return pp(e,n,t)}return t}function hh(e,t,n,r,s,l,a,i,c){return e=Vc(n,r,!0,e,s,l,a,i,c),e.context=ph(null),n=e.current,r=yt(),s=Xn(n),l=jn(r,s),l.callback=t!=null?t:null,Wn(n,l,s),e.current.lanes=s,fl(e,s,r),_t(e,r),e}function na(e,t,n,r){var s=t.current,l=yt(),a=Xn(s);return n=ph(n),t.context===null?t.context=n:t.pendingContext=n,t=jn(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Wn(s,t,a),e!==null&&(nn(e,s,a,l),so(e,s,a)),a}function Lo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function xd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xc(e,t){xd(e,t),(e=e.alternate)&&xd(e,t)}function Bg(){return null}var xh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}ra.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));na(e,t,null,null)};ra.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gr(function(){na(null,e,null,null)}),t[Nn]=null}};function ra(e){this._internalRoot=e}ra.prototype.unstable_scheduleHydration=function(e){if(e){var t=Xf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<In.length&&t!==0&&t<In[n].priority;n++);In.splice(n,0,e),n===0&&Kf(e)}};function Kc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function sa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function md(){}function Ug(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var d=Lo(a);l.call(d)}}var a=hh(t,r,e,0,null,!1,!1,"",md);return e._reactRootContainer=a,e[Nn]=a.current,Js(e.nodeType===8?e.parentNode:e),gr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var d=Lo(c);i.call(d)}}var c=Vc(e,0,!1,null,null,!1,!1,"",md);return e._reactRootContainer=c,e[Nn]=c.current,Js(e.nodeType===8?e.parentNode:e),gr(function(){na(t,c,n,r)}),c}function la(e,t,n,r,s){var l=n._reactRootContainer;if(l){var a=l;if(typeof s=="function"){var i=s;s=function(){var c=Lo(a);i.call(c)}}na(t,a,e,s)}else a=Ug(n,t,e,s,r);return Lo(a)}Wf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ts(t.pendingLanes);n!==0&&(pc(t,n|1),_t(t,We()),!(ke&6)&&(ss=We()+500,Jn()))}break;case 13:gr(function(){var r=Cn(e,1);if(r!==null){var s=yt();nn(r,e,1,s)}}),Xc(e,1)}};hc=function(e){if(e.tag===13){var t=Cn(e,134217728);if(t!==null){var n=yt();nn(t,e,134217728,n)}Xc(e,134217728)}};Vf=function(e){if(e.tag===13){var t=Xn(e),n=Cn(e,t);if(n!==null){var r=yt();nn(n,e,t,r)}Xc(e,t)}};Xf=function(){return Ee};Yf=function(e,t){var n=Ee;try{return Ee=e,t()}finally{Ee=n}};mi=function(e,t,n){switch(t){case"input":if(ci(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Qo(r);if(!s)throw Error(R(90));Sf(r),ci(r,s)}}}break;case"textarea":Cf(e,n);break;case"select":t=n.value,t!=null&&Vr(e,!!n.multiple,t,!1)}};Pf=Bc;zf=gr;var Hg={usingClientEntryPoint:!1,Events:[hl,Or,Qo,Df,Rf,Bc]},Ns={findFiberByHostInstance:ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wg={bundleType:Ns.bundleType,version:Ns.version,rendererPackageName:Ns.rendererPackageName,rendererConfig:Ns.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Of(e),e===null?null:e.stateNode},findFiberByHostInstance:Ns.findFiberByHostInstance||Bg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{Vo=Bl.inject(Wg),hn=Bl}catch(e){}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hg;Ot.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kc(t))throw Error(R(200));return Fg(e,t,null,n)};Ot.createRoot=function(e,t){if(!Kc(e))throw Error(R(299));var n=!1,r="",s=xh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Vc(e,1,!1,null,null,n,!1,r,s),e[Nn]=t.current,Js(e.nodeType===8?e.parentNode:e),new Yc(t)};Ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=Of(t),e=e===null?null:e.stateNode,e};Ot.flushSync=function(e){return gr(e)};Ot.hydrate=function(e,t,n){if(!sa(t))throw Error(R(200));return la(null,e,t,!0,n)};Ot.hydrateRoot=function(e,t,n){if(!Kc(e))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",a=xh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=hh(t,null,e,1,n!=null?n:null,s,!1,l,a),e[Nn]=t.current,Js(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new ra(t)};Ot.render=function(e,t,n){if(!sa(t))throw Error(R(200));return la(null,e,t,!1,n)};Ot.unmountComponentAtNode=function(e){if(!sa(e))throw Error(R(40));return e._reactRootContainer?(gr(function(){la(null,null,e,!1,function(){e._reactRootContainer=null,e[Nn]=null})}),!0):!1};Ot.unstable_batchedUpdates=Bc;Ot.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!sa(n))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return la(e,t,n,!1,r)};Ot.version="18.3.1-next-f1338f8080-20240426";function mh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mh)}catch(e){console.error(e)}}mh(),mf.exports=Ot;var Wr=mf.exports,gd=Wr;ni.createRoot=gd.createRoot,ni.hydrateRoot=gd.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function al(){return al=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},al.apply(this,arguments)}var An;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(An||(An={}));const yd="popstate";function Vg(e){e===void 0&&(e={});function t(s,l){let{pathname:a="/",search:i="",hash:c=""}=br(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Qi("",{pathname:a,search:i,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(s,l){let a=s.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");i=d===-1?c:c.slice(0,d)}return i+"#"+(typeof l=="string"?l:gh(l))}function r(s,l){oa(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return Yg(t,n,r,e)}function Je(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function oa(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Xg(){return Math.random().toString(36).substr(2,8)}function vd(e,t){return{usr:e.state,key:e.key,idx:t}}function Qi(e,t,n,r){return n===void 0&&(n=null),al({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?br(t):t,{state:n,key:t&&t.key||r||Xg()})}function gh(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function br(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Yg(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,a=s.history,i=An.Pop,c=null,d=p();d==null&&(d=0,a.replaceState(al({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function f(){i=An.Pop;let b=p(),g=b==null?null:b-d;d=b,c&&c({action:i,location:y.location,delta:g})}function h(b,g){i=An.Push;let m=Qi(y.location,b,g);n&&n(m,b),d=p()+1;let v=vd(m,d),S=y.createHref(m);try{a.pushState(v,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}l&&c&&c({action:i,location:y.location,delta:1})}function x(b,g){i=An.Replace;let m=Qi(y.location,b,g);n&&n(m,b),d=p();let v=vd(m,d),S=y.createHref(m);a.replaceState(v,"",S),l&&c&&c({action:i,location:y.location,delta:0})}function w(b){let g=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof b=="string"?b:gh(b);return m=m.replace(/ $/,"%20"),Je(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let y={get action(){return i},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(yd,f),c=b,()=>{s.removeEventListener(yd,f),c=null}},createHref(b){return t(s,b)},createURL:w,encodeLocation(b){let g=w(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:x,go(b){return a.go(b)}};return y}var wd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(wd||(wd={}));function Kg(e,t,n){return n===void 0&&(n="/"),Qg(e,t,n)}function Qg(e,t,n,r){let s=typeof t=="string"?br(t):t,l=wh(s.pathname||"/",n);if(l==null)return null;let a=yh(e);Gg(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let d=iy(l);i=ly(a[c],d)}return i}function yh(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,a,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:a,route:l};c.relativePath.startsWith("/")&&(Je(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=fr([r,c.relativePath]),p=n.concat(c);l.children&&l.children.length>0&&(Je(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),yh(l.children,t,p,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:ry(d,l.index),routesMeta:p})};return e.forEach((l,a)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))s(l,a);else for(let c of vh(l.path))s(l,a,c)}),t}function vh(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let a=vh(r.join("/")),i=[];return i.push(...a.map(c=>c===""?l:[l,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Gg(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:sy(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qg=/^:[\w-]+$/,Jg=3,Zg=2,ey=1,ty=10,ny=-2,bd=e=>e==="*";function ry(e,t){let n=e.split("/"),r=n.length;return n.some(bd)&&(r+=ny),t&&(r+=Zg),n.filter(s=>!bd(s)).reduce((s,l)=>s+(qg.test(l)?Jg:l===""?ey:ty),r)}function sy(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function ly(e,t,n){let{routesMeta:r}=e,s={},l="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],d=i===r.length-1,p=l==="/"?t:t.slice(l.length)||"/",f=oy({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),h=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:fr([l,f.pathname]),pathnameBase:xy(fr([l,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(l=fr([l,f.pathnameBase]))}return a}function oy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=ay(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],a=l.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((d,p,f)=>{let{paramName:h,isOptional:x}=p;if(h==="*"){let y=i[f]||"";a=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const w=i[f];return x&&!w?d[h]=void 0:d[h]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:a,pattern:e}}function ay(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),oa(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function iy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return oa(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function wh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const cy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uy=e=>cy.test(e);function dy(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?br(e):e,l;if(n)if(uy(n))l=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),oa(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?l=kd(n.substring(1),"/"):l=kd(n,t)}else l=t;return{pathname:l,search:my(r),hash:gy(s)}}function kd(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Xa(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fy(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function py(e,t){let n=fy(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function hy(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=br(e):(s=al({},e),Je(!s.pathname||!s.pathname.includes("?"),Xa("?","pathname","search",s)),Je(!s.pathname||!s.pathname.includes("#"),Xa("#","pathname","hash",s)),Je(!s.search||!s.search.includes("#"),Xa("#","search","hash",s)));let l=e===""||s.pathname==="",a=l?"/":s.pathname,i;if(a==null)i=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}i=f>=0?t[f]:"/"}let c=dy(s,i),d=a&&a!=="/"&&a.endsWith("/"),p=(l||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const fr=e=>e.join("/").replace(/\/\/+/g,"/"),xy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),my=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,gy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function yy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const bh=["post","put","patch","delete"];new Set(bh);const vy=["get",...bh];new Set(vy);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},il.apply(this,arguments)}const Qc=u.createContext(null),wy=u.createContext(null),aa=u.createContext(null),ia=u.createContext(null),kr=u.createContext({outlet:null,matches:[],isDataRoute:!1}),kh=u.createContext(null);function ca(){return u.useContext(ia)!=null}function Gc(){return ca()||Je(!1),u.useContext(ia).location}function jh(e){u.useContext(aa).static||u.useLayoutEffect(e)}function At(){let{isDataRoute:e}=u.useContext(kr);return e?Py():by()}function by(){ca()||Je(!1);let e=u.useContext(Qc),{basename:t,future:n,navigator:r}=u.useContext(aa),{matches:s}=u.useContext(kr),{pathname:l}=Gc(),a=JSON.stringify(py(s,n.v7_relativeSplatPath)),i=u.useRef(!1);return jh(()=>{i.current=!0}),u.useCallback(function(d,p){if(p===void 0&&(p={}),!i.current)return;if(typeof d=="number"){r.go(d);return}let f=hy(d,JSON.parse(a),l,p.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:fr([t,f.pathname])),(p.replace?r.replace:r.push)(f,p.state,p)},[t,r,a,l,e])}function Sh(){let{matches:e}=u.useContext(kr),t=e[e.length-1];return t?t.params:{}}function ky(e,t){return jy(e,t)}function jy(e,t,n,r){ca()||Je(!1);let{navigator:s}=u.useContext(aa),{matches:l}=u.useContext(kr),a=l[l.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Gc(),p;if(t){var f;let b=typeof t=="string"?br(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Je(!1),p=b}else p=d;let h=p.pathname||"/",x=h;if(c!=="/"){let b=c.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=Kg(e,{pathname:x}),y=My(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},i,b.params),pathname:fr([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:fr([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,n,r);return t&&y?u.createElement(ia.Provider,{value:{location:il({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:An.Pop}},y):y}function Sy(){let e=Ry(),t=yy(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:s},n):null,null)}const Ny=u.createElement(Sy,null);class Cy extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(kr.Provider,{value:this.props.routeContext},u.createElement(kh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ey(e){let{routeContext:t,match:n,children:r}=e,s=u.useContext(Qc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(kr.Provider,{value:t},r)}function My(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let p=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);p>=0||Je(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let f=a[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=p),f.route.id){let{loaderData:h,errors:x}=n,w=f.route.loader&&h[f.route.id]===void 0&&(!x||x[f.route.id]===void 0);if(f.route.lazy||w){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,f,h)=>{let x,w=!1,y=null,b=null;n&&(x=i&&f.route.id?i[f.route.id]:void 0,y=f.route.errorElement||Ny,c&&(d<0&&h===0?(zy("route-fallback"),w=!0,b=null):d===h&&(w=!0,b=f.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,h+1)),m=()=>{let v;return x?v=y:w?v=b:f.route.Component?v=u.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=p,u.createElement(Ey,{match:f,routeContext:{outlet:p,matches:g,isDataRoute:n!=null},children:v})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?u.createElement(Cy,{location:n.location,revalidation:n.revalidation,component:y,error:x,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var Nh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Nh||{}),Ch=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ch||{});function _y(e){let t=u.useContext(Qc);return t||Je(!1),t}function Ty(e){let t=u.useContext(wy);return t||Je(!1),t}function Dy(e){let t=u.useContext(kr);return t||Je(!1),t}function Eh(e){let t=Dy(),n=t.matches[t.matches.length-1];return n.route.id||Je(!1),n.route.id}function Ry(){var e;let t=u.useContext(kh),n=Ty(),r=Eh();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Py(){let{router:e}=_y(Nh.UseNavigateStable),t=Eh(Ch.UseNavigateStable),n=u.useRef(!1);return jh(()=>{n.current=!0}),u.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,il({fromRouteId:t},l)))},[e,t])}const jd={};function zy(e,t,n){jd[e]||(jd[e]=!0)}function Iy(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function dt(e){Je(!1)}function Ly(e){let{basename:t="/",children:n=null,location:r,navigationType:s=An.Pop,navigator:l,static:a=!1,future:i}=e;ca()&&Je(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:l,static:a,future:il({v7_relativeSplatPath:!1},i)}),[c,i,l,a]);typeof r=="string"&&(r=br(r));let{pathname:p="/",search:f="",hash:h="",state:x=null,key:w="default"}=r,y=u.useMemo(()=>{let b=wh(p,c);return b==null?null:{location:{pathname:b,search:f,hash:h,state:x,key:w},navigationType:s}},[c,p,f,h,x,w,s]);return y==null?null:u.createElement(aa.Provider,{value:d},u.createElement(ia.Provider,{children:n,value:y}))}function Oy(e){let{children:t,location:n}=e;return ky(Gi(t),n)}new Promise(()=>{});function Gi(e,t){t===void 0&&(t=[]);let n=[];return u.Children.forEach(e,(r,s)=>{if(!u.isValidElement(r))return;let l=[...t,s];if(r.type===u.Fragment){n.push.apply(n,Gi(r.props.children,l));return}r.type!==dt&&Je(!1),!r.props.index||!r.props.children||Je(!1);let a={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Gi(r.props.children,l)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const $y="6";try{window.__reactRouterVersion=$y}catch(e){}const Ay="startTransition",Sd=zx[Ay];function Fy(e){let{basename:t,children:n,future:r,window:s}=e,l=u.useRef();l.current==null&&(l.current=Vg({window:s,v5Compat:!0}));let a=l.current,[i,c]=u.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},p=u.useCallback(f=>{d&&Sd?Sd(()=>c(f)):c(f)},[c,d]);return u.useLayoutEffect(()=>a.listen(p),[a,p]),u.useEffect(()=>Iy(r),[r]),u.createElement(Ly,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}var Nd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Nd||(Nd={}));var Cd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Cd||(Cd={}));const qc="";async function Ed(){var r,s;const e=localStorage.getItem("whisper_token");if(e)return e;const t=(s=(r=window.Telegram)==null?void 0:r.WebApp)==null?void 0:s.initData;if(t){const a=await(await fetch(`${qc}/api/auth/telegram`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:t})})).json();if(a.success&&a.token)return localStorage.setItem("whisper_token",a.token),a.token}const n=new Error("need_login");throw n.code="NEED_LOGIN",n}async function A(e,t={}){let n=await Ed();const r=`${qc}${e}`,s=a=>fetch(r,{...t,cache:"no-store",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`,...t.headers},body:t.body?JSON.stringify(t.body):void 0});let l=await s(n);if(l.status===401&&(localStorage.removeItem("whisper_token"),n=await Ed(),l=await s(n)),l.status===204)return null;if(!l.ok){const a=await l.json().catch(()=>({}));throw new Error(a.detail||` (${l.status})`)}return l.json()}async function By(e){const n=await(await fetch(`${qc}/api/auth/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})})).json();if(n.success&&n.token)return localStorage.setItem("whisper_token",n.token),!0;throw new Error(n.detail||"")}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Mh=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:a,...i},c)=>u.createElement("svg",{ref:c,...Hy,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Mh("lucide",s),...i},[...a.map(([d,p])=>u.createElement(d,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(e,t)=>{const n=u.forwardRef(({className:r,...s},l)=>u.createElement(Wy,{ref:l,iconNode:t,className:Mh(`lucide-${Uy(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=me("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=me("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=me("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=me("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=me("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=me("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=me("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=me("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=me("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=me("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=me("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=me("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=me("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=me("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=me("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=me("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=me("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=me("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=me("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=me("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=me("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=me("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=me("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=me("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=me("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),iv="WhisperMiniDB",cv=1,as="avatars",Rh=()=>new Promise((e,t)=>{const n=indexedDB.open(iv,cv);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(as)||r.createObjectStore(as,{keyPath:"key"})}}),qi=async(e,t)=>{const n=await Rh();return new Promise((r,s)=>{const l=n.transaction([as],"readwrite");l.objectStore(as).put({key:e,base64:t}),l.oncomplete=()=>r(),l.onerror=()=>s(l.error)})},ps=async e=>{const t=await Rh();return new Promise((n,r)=>{const l=t.transaction([as],"readonly").objectStore(as).get(e);l.onsuccess=()=>{var a;return n(((a=l.result)==null?void 0:a.base64)||null)},l.onerror=()=>r(l.error)})},St={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function Tr({icon:e,label:t,desc:n,disabled:r,onClick:s,badge:l}){const[a,i]=u.useState(!1),c=()=>!r&&i(!0),d=()=>{i(!1),r||s==null||s()};return o.jsxs("button",{className:"flex flex-col items-start rounded-[18px] gap-2 text-left",style:{padding:"16px 14px",background:St.bg,boxShadow:a?"inset 3px 3px 8px rgba(174,176,182,0.5), inset -3px -3px 8px #ffffff":"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff",opacity:r?.4:1,transform:a?"scale(0.97)":"scale(1)",transition:"transform 0.1s, box-shadow 0.1s",cursor:r?"default":"pointer",WebkitTapHighlightColor:"transparent"},disabled:r,onTouchStart:c,onTouchEnd:d,onMouseDown:c,onMouseUp:d,onMouseLeave:()=>i(!1),children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-[12px]",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))"},children:e}),l&&o.jsx("div",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full",style:{background:"#ef4444",border:"2px solid var(--bg)"}})]}),o.jsxs("div",{className:"pl-1",children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:St.text},children:t}),o.jsx("div",{className:"mt-0.5 text-[10px] leading-snug",style:{color:St.textMuted},children:n})]})]})}function Td({children:e}){return o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-[3px]",style:{color:St.textMuted},children:e})}function uv(){const e=At(),[t,n]=u.useState(()=>{try{return JSON.parse(localStorage.getItem("whisper_profile")||"null")}catch(d){return null}}),[r,s]=u.useState(null),[l,a]=u.useState(!1);u.useEffect(()=>{A("/api/user/profile").then(d=>{n(d),localStorage.setItem("whisper_profile",JSON.stringify(d))}).catch(()=>{}),ps("user-avatar").then(d=>{d&&s(d)}).catch(function(){}),A("/api/diary/unread-count").then(d=>{d.count>0&&a(!0)}).catch(()=>{})},[]);const i=(t==null?void 0:t.nickname)||"",c=(t==null?void 0:t.background_url)||"";return o.jsxs("div",{className:"flex flex-col overflow-y-auto",style:{background:St.bg,height:"100%",paddingBottom:16},children:[o.jsxs("div",{className:"flex flex-col px-5",style:{paddingTop:"max(12px, env(safe-area-inset-top))"},children:[o.jsx("h1",{className:"mb-4 text-center text-[17px] font-medium",style:{color:St.textMuted,letterSpacing:"4px"},children:"W H I S P E R"}),o.jsxs("button",{className:"mb-5 flex w-full items-center gap-4 rounded-[20px] p-5 text-left",style:{background:St.bg,boxShadow:"6px 6px 14px rgba(174,176,182,0.5), -6px -6px 14px #ffffff"},onClick:()=>e("/profile"),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:52,height:52,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:St.bg},children:r?o.jsx("img",{src:r,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:22},children:""})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"text-[17px] font-bold truncate",style:{color:St.text},children:["@",i]}),o.jsxs("div",{className:"mt-0.5 text-[11px] italic",style:{color:St.textMuted},children:['"',c,'"']})]}),o.jsx(ls,{size:16,style:{color:St.textMuted,flexShrink:0}})]}),o.jsx(Td,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(Tr,{icon:o.jsx(Jc,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/world-books")}),o.jsx(Tr,{icon:o.jsx(Xy,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/memories")}),o.jsx(Tr,{icon:o.jsx(_h,{size:18,color:"white"}),label:"",desc:"Core Blocks",onClick:()=>e("/assistants")}),o.jsx(Tr,{icon:o.jsx(lv,{size:18,color:"white"}),label:"",desc:"API",onClick:()=>e("/settings")})]}),o.jsx(Td,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(Tr,{icon:o.jsx(Vy,{size:18,color:"white"}),label:"",desc:"",badge:l,onClick:()=>e("/diary")}),o.jsx(Tr,{icon:o.jsx(ov,{size:18,color:"white"}),label:"",desc:"",disabled:!0})]}),o.jsx("button",{className:"flex w-full items-center justify-center rounded-[18px] py-4",style:{background:St.bg,boxShadow:"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff"},onClick:()=>e("/cot"),children:o.jsx(Jy,{size:32,fill:St.accent,style:{color:St.accent,animation:"heartbeat 2s ease-in-out infinite"}})})]}),o.jsx("style",{children:`
        @keyframes heartbeat {
          0%, 100% { transform: scale(1); }
          15% { transform: scale(1.15); }
          30% { transform: scale(1); }
          45% { transform: scale(1.1); }
          60% { transform: scale(1); }
        }
      `})]})}function dv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const fa=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function hs(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function eu(e){return"nodeType"in e}function bt(e){var t,n;return e?hs(e)?e:eu(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function tu(e){const{Document:t}=bt(e);return e instanceof t}function wl(e){return hs(e)?!1:e instanceof bt(e).HTMLElement}function Ph(e){return e instanceof bt(e).SVGElement}function xs(e){return e?hs(e)?e.document:eu(e)?tu(e)?e:wl(e)||Ph(e)?e.ownerDocument:document:document:document}const sn=fa?u.useLayoutEffect:u.useEffect;function pa(e){const t=u.useRef(e);return sn(()=>{t.current=e}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function fv(){const e=u.useRef(null),t=u.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=u.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function cl(e,t){t===void 0&&(t=[e]);const n=u.useRef(e);return sn(()=>{n.current!==e&&(n.current=e)},t),n}function bl(e,t){const n=u.useRef();return u.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Oo(e){const t=pa(e),n=u.useRef(null),r=u.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function $o(e){const t=u.useRef();return u.useEffect(()=>{t.current=e},[e]),t.current}let Ya={};function kl(e,t){return u.useMemo(()=>{if(t)return t;const n=Ya[e]==null?0:Ya[e]+1;return Ya[e]=n,e+"-"+n},[e,t])}function zh(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const i=Object.entries(a);for(const[c,d]of i){const p=l[c];p!=null&&(l[c]=p+e*d)}return l},{...t})}}const qr=zh(1),Ao=zh(-1);function pv(e){return"clientX"in e&&"clientY"in e}function ha(e){if(!e)return!1;const{KeyboardEvent:t}=bt(e.target);return t&&e instanceof t}function hv(e){if(!e)return!1;const{TouchEvent:t}=bt(e.target);return t&&e instanceof t}function Fo(e){if(hv(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return pv(e)?{x:e.clientX,y:e.clientY}:null}const Mn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Mn.Translate.toString(e),Mn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Dd="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function xv(e){return e.matches(Dd)?e:e.querySelector(Dd)}const mv={display:"none"};function gv(e){let{id:t,value:n}=e;return Re.createElement("div",{id:t,style:mv},n)}function yv(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Re.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function vv(){const[e,t]=u.useState("");return{announce:u.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Ih=u.createContext(null);function wv(e){const t=u.useContext(Ih);u.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function bv(){const[e]=u.useState(()=>new Set),t=u.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[u.useCallback(r=>{let{type:s,event:l}=r;e.forEach(a=>{var i;return(i=a[s])==null?void 0:i.call(a,l)})},[e]),t]}const kv={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},jv={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Sv(e){let{announcements:t=jv,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=kv}=e;const{announce:l,announcement:a}=vv(),i=kl("DndLiveRegion"),[c,d]=u.useState(!1);if(u.useEffect(()=>{d(!0)},[]),wv(u.useMemo(()=>({onDragStart(f){let{active:h}=f;l(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:x}=f;t.onDragMove&&l(t.onDragMove({active:h,over:x}))},onDragOver(f){let{active:h,over:x}=f;l(t.onDragOver({active:h,over:x}))},onDragEnd(f){let{active:h,over:x}=f;l(t.onDragEnd({active:h,over:x}))},onDragCancel(f){let{active:h,over:x}=f;l(t.onDragCancel({active:h,over:x}))}}),[l,t])),!c)return null;const p=Re.createElement(Re.Fragment,null,Re.createElement(gv,{id:r,value:s.draggable}),Re.createElement(yv,{id:i,announcement:a}));return n?Wr.createPortal(p,n):p}var Ge;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ge||(Ge={}));function Bo(){}function Uo(e,t){return u.useMemo(()=>({sensor:e,options:t!=null?t:{}}),[e,t])}function Lh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const ln=Object.freeze({x:0,y:0});function Nv(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Cv(e,t){const n=Fo(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function Ev(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Mv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function _v(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Rd(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Oh=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=Rd(t,t.left,t.top),l=[];for(const a of r){const{id:i}=a,c=n.get(i);if(c){const d=Nv(Rd(c),s);l.push({id:i,data:{droppableContainer:a,value:d}})}}return l.sort(Ev)};function Tv(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height),a=s-r,i=l-n;if(r<s&&n<l){const c=t.width*t.height,d=e.width*e.height,p=a*i,f=p/(c+d-p);return Number(f.toFixed(4))}return 0}const Dv=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const l of r){const{id:a}=l,i=n.get(a);if(i){const c=Tv(i,t);c>0&&s.push({id:a,data:{droppableContainer:l,value:c}})}}return s.sort(Mv)};function Rv(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function $h(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ln}function Pv(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,i)=>({...a,top:a.top+e*i.y,bottom:a.bottom+e*i.y,left:a.left+e*i.x,right:a.right+e*i.x}),{...n})}}const zv=Pv(1);function Ah(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Iv(e,t,n){const r=Ah(t);if(!r)return e;const{scaleX:s,scaleY:l,x:a,y:i}=r,c=e.left-a-(1-s)*parseFloat(n),d=e.top-i-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),p=s?e.width/s:e.width,f=l?e.height/l:e.height;return{width:p,height:f,top:d,right:c+p,bottom:d+f,left:c}}const Lv={ignoreTransform:!1};function ms(e,t){t===void 0&&(t=Lv);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:p}=bt(e).getComputedStyle(e);d&&(n=Iv(n,d,p))}const{top:r,left:s,width:l,height:a,bottom:i,right:c}=n;return{top:r,left:s,width:l,height:a,bottom:i,right:c}}function Pd(e){return ms(e,{ignoreTransform:!0})}function Ov(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function $v(e,t){return t===void 0&&(t=bt(e).getComputedStyle(e)),t.position==="fixed"}function Av(e,t){t===void 0&&(t=bt(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=t[s];return typeof l=="string"?n.test(l):!1})}function nu(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(tu(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!wl(s)||Ph(s)||n.includes(s))return n;const l=bt(e).getComputedStyle(s);return s!==e&&Av(s,l)&&n.push(s),$v(s,l)?n:r(s.parentNode)}return e?r(e):n}function Fh(e){const[t]=nu(e,1);return t!=null?t:null}function Ka(e){return!fa||!e?null:hs(e)?e:eu(e)?tu(e)||e===xs(e).scrollingElement?window:wl(e)?e:null:null}function Bh(e){return hs(e)?e.scrollX:e.scrollLeft}function Uh(e){return hs(e)?e.scrollY:e.scrollTop}function Ji(e){return{x:Bh(e),y:Uh(e)}}var rt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(rt||(rt={}));function Hh(e){return!fa||!e?!1:e===document.scrollingElement}function Wh(e){const t={x:0,y:0},n=Hh(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,l=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:i,maxScroll:r,minScroll:t}}const Fv={x:.2,y:.2};function Bv(e,t,n,r,s){let{top:l,left:a,right:i,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=Fv);const{isTop:d,isBottom:p,isLeft:f,isRight:h}=Wh(e),x={x:0,y:0},w={x:0,y:0},y={height:t.height*s.y,width:t.width*s.x};return!d&&l<=t.top+y.height?(x.y=rt.Backward,w.y=r*Math.abs((t.top+y.height-l)/y.height)):!p&&c>=t.bottom-y.height&&(x.y=rt.Forward,w.y=r*Math.abs((t.bottom-y.height-c)/y.height)),!h&&i>=t.right-y.width?(x.x=rt.Forward,w.x=r*Math.abs((t.right-y.width-i)/y.width)):!f&&a<=t.left+y.width&&(x.x=rt.Backward,w.x=r*Math.abs((t.left+y.width-a)/y.width)),{direction:x,speed:w}}function Uv(e){if(e===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function Vh(e){return e.reduce((t,n)=>qr(t,Ji(n)),ln)}function Hv(e){return e.reduce((t,n)=>t+Bh(n),0)}function Wv(e){return e.reduce((t,n)=>t+Uh(n),0)}function Xh(e,t){if(t===void 0&&(t=ms),!e)return;const{top:n,left:r,bottom:s,right:l}=t(e);Fh(e)&&(s<=0||l<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Vv=[["x",["left","right"],Hv],["y",["top","bottom"],Wv]];class ru{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=nu(n),s=Vh(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[l,a,i]of Vv)for(const c of a)Object.defineProperty(this,c,{get:()=>{const d=i(r),p=s[l]-d;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Bs{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Xv(e){const{EventTarget:t}=bt(e);return e instanceof t?e:xs(e)}function Qa(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Bt;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Bt||(Bt={}));function zd(e){e.preventDefault()}function Yv(e){e.stopPropagation()}var Se;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Se||(Se={}));const Yh={start:[Se.Space,Se.Enter],cancel:[Se.Esc],end:[Se.Space,Se.Enter,Se.Tab]},Kv=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Se.Right:return{...n,x:n.x+25};case Se.Left:return{...n,x:n.x-25};case Se.Down:return{...n,y:n.y+25};case Se.Up:return{...n,y:n.y-25}}};class Kh{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Bs(xs(n)),this.windowListeners=new Bs(bt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Bt.Resize,this.handleCancel),this.windowListeners.add(Bt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Bt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Xh(r),n(ln)}handleKeyDown(t){if(ha(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:l=Yh,coordinateGetter:a=Kv,scrollBehavior:i="smooth"}=s,{code:c}=t;if(l.end.includes(c)){this.handleEnd(t);return}if(l.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:ln;this.referenceCoordinates||(this.referenceCoordinates=p);const f=a(t,{active:n,context:r.current,currentCoordinates:p});if(f){const h=Ao(f,p),x={x:0,y:0},{scrollableAncestors:w}=r.current;for(const y of w){const b=t.code,{isTop:g,isRight:m,isLeft:v,isBottom:S,maxScroll:j,minScroll:N}=Wh(y),k=Uv(y),E={x:Math.min(b===Se.Right?k.right-k.width/2:k.right,Math.max(b===Se.Right?k.left:k.left+k.width/2,f.x)),y:Math.min(b===Se.Down?k.bottom-k.height/2:k.bottom,Math.max(b===Se.Down?k.top:k.top+k.height/2,f.y))},T=b===Se.Right&&!m||b===Se.Left&&!v,P=b===Se.Down&&!S||b===Se.Up&&!g;if(T&&E.x!==f.x){const L=y.scrollLeft+h.x,oe=b===Se.Right&&L<=j.x||b===Se.Left&&L>=N.x;if(oe&&!h.y){y.scrollTo({left:L,behavior:i});return}oe?x.x=y.scrollLeft-L:x.x=b===Se.Right?y.scrollLeft-j.x:y.scrollLeft-N.x,x.x&&y.scrollBy({left:-x.x,behavior:i});break}else if(P&&E.y!==f.y){const L=y.scrollTop+h.y,oe=b===Se.Down&&L<=j.y||b===Se.Up&&L>=N.y;if(oe&&!h.x){y.scrollTo({top:L,behavior:i});return}oe?x.y=y.scrollTop-L:x.y=b===Se.Down?y.scrollTop-j.y:y.scrollTop-N.y,x.y&&y.scrollBy({top:-x.y,behavior:i});break}}this.handleMove(t,qr(Ao(f,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Kh.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Yh,onActivation:s}=t,{active:l}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const i=l.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function Id(e){return!!(e&&"distance"in e)}function Ld(e){return!!(e&&"delay"in e)}class su{constructor(t,n,r){var s;r===void 0&&(r=Xv(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:l}=t,{target:a}=l;this.props=t,this.events=n,this.document=xs(a),this.documentListeners=new Bs(this.document),this.listeners=new Bs(r),this.windowListeners=new Bs(bt(a)),this.initialCoordinates=(s=Fo(l))!=null?s:ln,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Bt.Resize,this.handleCancel),this.windowListeners.add(Bt.DragStart,zd),this.windowListeners.add(Bt.VisibilityChange,this.handleCancel),this.windowListeners.add(Bt.ContextMenu,zd),this.documentListeners.add(Bt.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ld(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Id(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Bt.Click,Yv,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Bt.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:i}}=l;if(!s)return;const c=(n=Fo(t))!=null?n:ln,d=Ao(s,c);if(!r&&i){if(Id(i)){if(i.tolerance!=null&&Qa(d,i.tolerance))return this.handleCancel();if(Qa(d,i.distance))return this.handleStart()}if(Ld(i)&&Qa(d,i.tolerance))return this.handleCancel();this.handlePending(i,d);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Se.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Qv={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class xa extends su{constructor(t){const{event:n}=t,r=xs(n.target);super(t,Qv,r)}}xa.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Gv={move:{name:"mousemove"},end:{name:"mouseup"}};var Zi;(function(e){e[e.RightClick=2]="RightClick"})(Zi||(Zi={}));class qv extends su{constructor(t){super(t,Gv,xs(t.event.target))}}qv.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Zi.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ga={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class lu extends su{constructor(t){super(t,Ga)}static setup(){return window.addEventListener(Ga.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ga.move.name,t)};function t(){}}}lu.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Us;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Us||(Us={}));var Ho;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ho||(Ho={}));function Jv(e){let{acceleration:t,activator:n=Us.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:i=Ho.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:p,delta:f,threshold:h}=e;const x=e1({delta:f,disabled:!l}),[w,y]=fv(),b=u.useRef({x:0,y:0}),g=u.useRef({x:0,y:0}),m=u.useMemo(()=>{switch(n){case Us.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Us.DraggableRect:return s}},[n,s,c]),v=u.useRef(null),S=u.useCallback(()=>{const N=v.current;if(!N)return;const k=b.current.x*g.current.x,E=b.current.y*g.current.y;N.scrollBy(k,E)},[]),j=u.useMemo(()=>i===Ho.TreeOrder?[...d].reverse():d,[i,d]);u.useEffect(()=>{if(!l||!d.length||!m){y();return}for(const N of j){if((r==null?void 0:r(N))===!1)continue;const k=d.indexOf(N),E=p[k];if(!E)continue;const{direction:T,speed:P}=Bv(N,E,m,t,h);for(const L of["x","y"])x[L][T[L]]||(P[L]=0,T[L]=0);if(P.x>0||P.y>0){y(),v.current=N,w(S,a),b.current=P,g.current=T;return}}b.current={x:0,y:0},g.current={x:0,y:0},y()},[t,S,r,y,l,a,JSON.stringify(m),JSON.stringify(x),w,d,j,p,JSON.stringify(h)])}const Zv={x:{[rt.Backward]:!1,[rt.Forward]:!1},y:{[rt.Backward]:!1,[rt.Forward]:!1}};function e1(e){let{delta:t,disabled:n}=e;const r=$o(t);return bl(s=>{if(n||!r||!s)return Zv;const l={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[rt.Backward]:s.x[rt.Backward]||l.x===-1,[rt.Forward]:s.x[rt.Forward]||l.x===1},y:{[rt.Backward]:s.y[rt.Backward]||l.y===-1,[rt.Forward]:s.y[rt.Forward]||l.y===1}}},[n,t,r])}function t1(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return bl(s=>{var l;return t==null?null:(l=r!=null?r:s)!=null?l:null},[r,t])}function n1(e,t){return u.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...l]},[]),[e,t])}var ul;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ul||(ul={}));var ec;(function(e){e.Optimized="optimized"})(ec||(ec={}));const Od=new Map;function r1(e,t){let{dragging:n,dependencies:r,config:s}=t;const[l,a]=u.useState(null),{frequency:i,measure:c,strategy:d}=s,p=u.useRef(e),f=b(),h=cl(f),x=u.useCallback(function(g){g===void 0&&(g=[]),!h.current&&a(m=>m===null?g:m.concat(g.filter(v=>!m.includes(v))))},[h]),w=u.useRef(null),y=bl(g=>{if(f&&!n)return Od;if(!g||g===Od||p.current!==e||l!=null){const m=new Map;for(let v of e){if(!v)continue;if(l&&l.length>0&&!l.includes(v.id)&&v.rect.current){m.set(v.id,v.rect.current);continue}const S=v.node.current,j=S?new ru(c(S),S):null;v.rect.current=j,j&&m.set(v.id,j)}return m}return g},[e,l,n,f,c]);return u.useEffect(()=>{p.current=e},[e]),u.useEffect(()=>{f||x()},[n,f]),u.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),u.useEffect(()=>{f||typeof i!="number"||w.current!==null||(w.current=setTimeout(()=>{x(),w.current=null},i))},[i,f,x,...r]),{droppableRects:y,measureDroppableContainers:x,measuringScheduled:l!=null};function b(){switch(d){case ul.Always:return!1;case ul.BeforeDragging:return n;default:return!n}}}function ou(e,t){return bl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function s1(e,t){return ou(e,t)}function l1(e){let{callback:t,disabled:n}=e;const r=pa(t),s=u.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:l}=window;return new l(r)},[r,n]);return u.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function ma(e){let{callback:t,disabled:n}=e;const r=pa(t),s=u.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:l}=window;return new l(r)},[n]);return u.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function o1(e){return new ru(ms(e),e)}function $d(e,t,n){t===void 0&&(t=o1);const[r,s]=u.useState(null);function l(){s(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c!=null?c:n)!=null?d:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=l1({callback(c){if(e)for(const d of c){const{type:p,target:f}=d;if(p==="childList"&&f instanceof HTMLElement&&f.contains(e)){l();break}}}}),i=ma({callback:l});return sn(()=>{l(),e?(i==null||i.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),a==null||a.disconnect())},[e]),r}function a1(e){const t=ou(e);return $h(e,t)}const Ad=[];function i1(e){const t=u.useRef(e),n=bl(r=>e?r&&r!==Ad&&e&&t.current&&e.parentNode===t.current.parentNode?r:nu(e):Ad,[e]);return u.useEffect(()=>{t.current=e},[e]),n}function c1(e){const[t,n]=u.useState(null),r=u.useRef(e),s=u.useCallback(l=>{const a=Ka(l.target);a&&n(i=>i?(i.set(a,Ji(a)),new Map(i)):null)},[]);return u.useEffect(()=>{const l=r.current;if(e!==l){a(l);const i=e.map(c=>{const d=Ka(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,Ji(d)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=e}return()=>{a(e),a(l)};function a(i){i.forEach(c=>{const d=Ka(c);d==null||d.removeEventListener("scroll",s)})}},[s,e]),u.useMemo(()=>e.length?t?Array.from(t.values()).reduce((l,a)=>qr(l,a),ln):Vh(e):ln,[e,t])}function Fd(e,t){t===void 0&&(t=[]);const n=u.useRef(null);return u.useEffect(()=>{n.current=null},t),u.useEffect(()=>{const r=e!==ln;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Ao(e,n.current):ln}function u1(e){u.useEffect(()=>{if(!fa)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function d1(e,t){return u.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:l}=r;return n[s]=a=>{l(a,t)},n},{}),[e,t])}function Qh(e){return u.useMemo(()=>e?Ov(e):null,[e])}const Bd=[];function f1(e,t){t===void 0&&(t=ms);const[n]=e,r=Qh(n?bt(n):null),[s,l]=u.useState(Bd);function a(){l(()=>e.length?e.map(c=>Hh(c)?r:new ru(t(c),c)):Bd)}const i=ma({callback:a});return sn(()=>{i==null||i.disconnect(),a(),e.forEach(c=>i==null?void 0:i.observe(c))},[e]),s}function Gh(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return wl(t)?t:e}function p1(e){let{measure:t}=e;const[n,r]=u.useState(null),s=u.useCallback(d=>{for(const{target:p}of d)if(wl(p)){r(f=>{const h=t(p);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),l=ma({callback:s}),a=u.useCallback(d=>{const p=Gh(d);l==null||l.disconnect(),p&&(l==null||l.observe(p)),r(p?t(p):null)},[t,l]),[i,c]=Oo(a);return u.useMemo(()=>({nodeRef:i,rect:n,setRef:c}),[n,i,c])}const h1=[{sensor:xa,options:{}},{sensor:Kh,options:{}}],x1={current:{}},fo={draggable:{measure:Pd},droppable:{measure:Pd,strategy:ul.WhileDragging,frequency:ec.Optimized},dragOverlay:{measure:ms}};class Hs extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const m1={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Hs,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Bo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:fo,measureDroppableContainers:Bo,windowRect:null,measuringScheduled:!1},qh={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Bo,draggableNodes:new Map,over:null,measureDroppableContainers:Bo},jl=u.createContext(qh),Jh=u.createContext(m1);function g1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Hs}}}function y1(e,t){switch(t.type){case Ge.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ge.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ge.DragEnd:case Ge.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ge.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Hs(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Ge.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,l=e.droppable.containers.get(n);if(!l||r!==l.key)return e;const a=new Hs(e.droppable.containers);return a.set(n,{...l,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case Ge.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const l=new Hs(e.droppable.containers);return l.delete(n),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function v1(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=u.useContext(jl),l=$o(r),a=$o(n==null?void 0:n.id);return u.useEffect(()=>{if(!t&&!r&&l&&a!=null){if(!ha(l)||document.activeElement===l.target)return;const i=s.get(a);if(!i)return;const{activatorNode:c,node:d}=i;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[c.current,d.current]){if(!p)continue;const f=xv(p);if(f){f.focus();break}}})}},[r,t,s,a,l]),null}function Zh(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,l)=>l({transform:s,...r}),n):n}function w1(e){return u.useMemo(()=>({draggable:{...fo.draggable,...e==null?void 0:e.draggable},droppable:{...fo.droppable,...e==null?void 0:e.droppable},dragOverlay:{...fo.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function b1(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const l=u.useRef(!1),{x:a,y:i}=typeof s=="boolean"?{x:s,y:s}:s;sn(()=>{if(!a&&!i||!t){l.current=!1;return}if(l.current||!r)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const p=n(d),f=$h(p,r);if(a||(f.x=0),i||(f.y=0),l.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=Fh(d);h&&h.scrollBy({top:f.y,left:f.x})}},[t,a,i,r,n])}const ga=u.createContext({...ln,scaleX:1,scaleY:1});var zn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(zn||(zn={}));const ex=u.memo(function(t){var n,r,s,l;let{id:a,accessibility:i,autoScroll:c=!0,children:d,sensors:p=h1,collisionDetection:f=Dv,measuring:h,modifiers:x,...w}=t;const y=u.useReducer(y1,void 0,g1),[b,g]=y,[m,v]=bv(),[S,j]=u.useState(zn.Uninitialized),N=S===zn.Initialized,{draggable:{active:k,nodes:E,translate:T},droppable:{containers:P}}=b,L=k!=null?E.get(k):null,oe=u.useRef({initial:null,translated:null}),W=u.useMemo(()=>{var et;return k!=null?{id:k,data:(et=L==null?void 0:L.data)!=null?et:x1,rect:oe}:null},[k,L]),z=u.useRef(null),[q,he]=u.useState(null),[de,O]=u.useState(null),K=cl(w,Object.values(w)),_=kl("DndDescribedBy",a),ee=u.useMemo(()=>P.getEnabled(),[P]),V=w1(h),{droppableRects:je,measureDroppableContainers:ye,measuringScheduled:Ze}=r1(ee,{dragging:N,dependencies:[T.x,T.y],config:V.droppable}),ve=t1(E,k),X=u.useMemo(()=>de?Fo(de):null,[de]),we=er(),ie=s1(ve,V.draggable.measure);b1({activeNode:k!=null?E.get(k):null,config:we.layoutShiftCompensation,initialRect:ie,measure:V.draggable.measure});const se=$d(ve,V.draggable.measure,ie),Ye=$d(ve?ve.parentElement:null),be=u.useRef({activatorEvent:null,active:null,activeNode:ve,collisionRect:null,collisions:null,droppableRects:je,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Me=P.getNodeFor((n=be.current.over)==null?void 0:n.id),H=p1({measure:V.dragOverlay.measure}),U=(r=H.nodeRef.current)!=null?r:ve,ce=N?(s=H.rect)!=null?s:se:null,ne=!!(H.nodeRef.current&&H.rect),fe=a1(ne?null:se),I=Qh(U?bt(U):null),J=i1(N?Me!=null?Me:ve:null),re=f1(J),ue=Zh(x,{transform:{x:T.x-fe.x,y:T.y-fe.y,scaleX:1,scaleY:1},activatorEvent:de,active:W,activeNodeRect:se,containerNodeRect:Ye,draggingNodeRect:ce,over:be.current.over,overlayNodeRect:H.rect,scrollableAncestors:J,scrollableAncestorRects:re,windowRect:I}),Fe=X?qr(X,T):null,Be=c1(J),Kt=Fd(Be),Tn=Fd(Be,[se]),kt=qr(ue,Kt),Dt=ce?zv(ce,ue):null,mn=W&&Dt?f({active:W,collisionRect:Dt,droppableRects:je,droppableContainers:ee,pointerCoordinates:Fe}):null,Zn=_v(mn,"id"),[Rt,Ve]=u.useState(null),Sr=ne?ue:qr(ue,Tn),$=Rv(Sr,(l=Rt==null?void 0:Rt.rect)!=null?l:null,se),ge=u.useRef(null),ae=u.useCallback((et,it)=>{let{sensor:xt,options:on}=it;if(z.current==null)return;const jt=E.get(z.current);if(!jt)return;const mt=et.nativeEvent,Ft=new xt({active:z.current,activeNode:jt,event:mt,options:on,context:be,onAbort(Ue){if(!E.get(Ue))return;const{onDragAbort:Qt}=K.current,un={id:Ue};Qt==null||Qt(un),m({type:"onDragAbort",event:un})},onPending(Ue,cn,Qt,un){if(!E.get(Ue))return;const{onDragPending:Er}=K.current,yn={id:Ue,constraint:cn,initialCoordinates:Qt,offset:un};Er==null||Er(yn),m({type:"onDragPending",event:yn})},onStart(Ue){const cn=z.current;if(cn==null)return;const Qt=E.get(cn);if(!Qt)return;const{onDragStart:un}=K.current,Cr={activatorEvent:mt,active:{id:cn,data:Qt.data,rect:oe}};Wr.unstable_batchedUpdates(()=>{un==null||un(Cr),j(zn.Initializing),g({type:Ge.DragStart,initialCoordinates:Ue,active:cn}),m({type:"onDragStart",event:Cr}),he(ge.current),O(mt)})},onMove(Ue){g({type:Ge.DragMove,coordinates:Ue})},onEnd:an(Ge.DragEnd),onCancel:an(Ge.DragCancel)});ge.current=Ft;function an(Ue){return async function(){const{active:Qt,collisions:un,over:Cr,scrollAdjustedTranslate:Er}=be.current;let yn=null;if(Qt&&Er){const{cancelDrop:tr}=K.current;yn={activatorEvent:mt,active:Qt,collisions:un,delta:Er,over:Cr},Ue===Ge.DragEnd&&typeof tr=="function"&&await Promise.resolve(tr(yn))&&(Ue=Ge.DragCancel)}z.current=null,Wr.unstable_batchedUpdates(()=>{g({type:Ue}),j(zn.Uninitialized),Ve(null),he(null),O(null),ge.current=null;const tr=Ue===Ge.DragEnd?"onDragEnd":"onDragCancel";if(yn){const Mr=K.current[tr];Mr==null||Mr(yn),m({type:tr,event:yn})}})}}},[E]),_e=u.useCallback((et,it)=>(xt,on)=>{const jt=xt.nativeEvent,mt=E.get(on);if(z.current!==null||!mt||jt.dndKit||jt.defaultPrevented)return;const Ft={active:mt};et(xt,it.options,Ft)===!0&&(jt.dndKit={capturedBy:it.sensor},z.current=on,ae(xt,it))},[E,ae]),ht=n1(p,_e);u1(p),sn(()=>{se&&S===zn.Initializing&&j(zn.Initialized)},[se,S]),u.useEffect(()=>{const{onDragMove:et}=K.current,{active:it,activatorEvent:xt,collisions:on,over:jt}=be.current;if(!it||!xt)return;const mt={active:it,activatorEvent:xt,collisions:on,delta:{x:kt.x,y:kt.y},over:jt};Wr.unstable_batchedUpdates(()=>{et==null||et(mt),m({type:"onDragMove",event:mt})})},[kt.x,kt.y]),u.useEffect(()=>{const{active:et,activatorEvent:it,collisions:xt,droppableContainers:on,scrollAdjustedTranslate:jt}=be.current;if(!et||z.current==null||!it||!jt)return;const{onDragOver:mt}=K.current,Ft=on.get(Zn),an=Ft&&Ft.rect.current?{id:Ft.id,rect:Ft.rect.current,data:Ft.data,disabled:Ft.disabled}:null,Ue={active:et,activatorEvent:it,collisions:xt,delta:{x:jt.x,y:jt.y},over:an};Wr.unstable_batchedUpdates(()=>{Ve(an),mt==null||mt(Ue),m({type:"onDragOver",event:Ue})})},[Zn]),sn(()=>{be.current={activatorEvent:de,active:W,activeNode:ve,collisionRect:Dt,collisions:mn,droppableRects:je,draggableNodes:E,draggingNode:U,draggingNodeRect:ce,droppableContainers:P,over:Rt,scrollableAncestors:J,scrollAdjustedTranslate:kt},oe.current={initial:ce,translated:Dt}},[W,ve,mn,Dt,E,U,ce,je,P,Rt,J,kt]),Jv({...we,delta:T,draggingRect:Dt,pointerCoordinates:Fe,scrollableAncestors:J,scrollableAncestorRects:re});const gn=u.useMemo(()=>({active:W,activeNode:ve,activeNodeRect:se,activatorEvent:de,collisions:mn,containerNodeRect:Ye,dragOverlay:H,draggableNodes:E,droppableContainers:P,droppableRects:je,over:Rt,measureDroppableContainers:ye,scrollableAncestors:J,scrollableAncestorRects:re,measuringConfiguration:V,measuringScheduled:Ze,windowRect:I}),[W,ve,se,de,mn,Ye,H,E,P,je,Rt,ye,J,re,V,Ze,I]),Nr=u.useMemo(()=>({activatorEvent:de,activators:ht,active:W,activeNodeRect:se,ariaDescribedById:{draggable:_},dispatch:g,draggableNodes:E,over:Rt,measureDroppableContainers:ye}),[de,ht,W,se,g,_,E,Rt,ye]);return Re.createElement(Ih.Provider,{value:v},Re.createElement(jl.Provider,{value:Nr},Re.createElement(Jh.Provider,{value:gn},Re.createElement(ga.Provider,{value:$},d)),Re.createElement(v1,{disabled:(i==null?void 0:i.restoreFocus)===!1})),Re.createElement(Sv,{...i,hiddenTextDescribedById:_}));function er(){const et=(q==null?void 0:q.autoScrollEnabled)===!1,it=typeof c=="object"?c.enabled===!1:c===!1,xt=N&&!et&&!it;return typeof c=="object"?{...c,enabled:xt}:{enabled:xt}}}),k1=u.createContext(null),Ud="button",j1="Draggable";function S1(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const l=kl(j1),{activators:a,activatorEvent:i,active:c,activeNodeRect:d,ariaDescribedById:p,draggableNodes:f,over:h}=u.useContext(jl),{role:x=Ud,roleDescription:w="draggable",tabIndex:y=0}=s!=null?s:{},b=(c==null?void 0:c.id)===t,g=u.useContext(b?ga:k1),[m,v]=Oo(),[S,j]=Oo(),N=d1(a,t),k=cl(n);sn(()=>(f.set(t,{id:t,key:l,node:m,activatorNode:S,data:k}),()=>{const T=f.get(t);T&&T.key===l&&f.delete(t)}),[f,t]);const E=u.useMemo(()=>({role:x,tabIndex:y,"aria-disabled":r,"aria-pressed":b&&x===Ud?!0:void 0,"aria-roledescription":w,"aria-describedby":p.draggable}),[r,x,y,b,w,p.draggable]);return{active:c,activatorEvent:i,activeNodeRect:d,attributes:E,isDragging:b,listeners:r?void 0:N,node:m,over:h,setNodeRef:v,setActivatorNodeRef:j,transform:g}}function tx(){return u.useContext(Jh)}const N1="Droppable",C1={timeout:25};function E1(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const l=kl(N1),{active:a,dispatch:i,over:c,measureDroppableContainers:d}=u.useContext(jl),p=u.useRef({disabled:n}),f=u.useRef(!1),h=u.useRef(null),x=u.useRef(null),{disabled:w,updateMeasurementsFor:y,timeout:b}={...C1,...s},g=cl(y!=null?y:r),m=u.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(g.current)?g.current:[g.current]),x.current=null},b)},[b]),v=ma({callback:m,disabled:w||!a}),S=u.useCallback((E,T)=>{v&&(T&&(v.unobserve(T),f.current=!1),E&&v.observe(E))},[v]),[j,N]=Oo(S),k=cl(t);return u.useEffect(()=>{!v||!j.current||(v.disconnect(),f.current=!1,v.observe(j.current))},[j,v]),u.useEffect(()=>(i({type:Ge.RegisterDroppable,element:{id:r,key:l,disabled:n,node:j,rect:h,data:k}}),()=>i({type:Ge.UnregisterDroppable,key:l,id:r})),[r]),u.useEffect(()=>{n!==p.current.disabled&&(i({type:Ge.SetDroppableDisabled,id:r,key:l,disabled:n}),p.current.disabled=n)},[r,l,n,i]),{active:a,rect:h,isOver:(c==null?void 0:c.id)===r,node:j,over:c,setNodeRef:N}}function M1(e){let{animation:t,children:n}=e;const[r,s]=u.useState(null),[l,a]=u.useState(null),i=$o(n);return!n&&!r&&i&&s(i),sn(()=>{if(!l)return;const c=r==null?void 0:r.key,d=r==null?void 0:r.props.id;if(c==null||d==null){s(null);return}Promise.resolve(t(d,l)).then(()=>{s(null)})},[t,r,l]),Re.createElement(Re.Fragment,null,n,r?u.cloneElement(r,{ref:a}):null)}const _1={x:0,y:0,scaleX:1,scaleY:1};function T1(e){let{children:t}=e;return Re.createElement(jl.Provider,{value:qh},Re.createElement(ga.Provider,{value:_1},t))}const D1={position:"fixed",touchAction:"none"},R1=e=>ha(e)?"transform 250ms ease":void 0,P1=u.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:l,className:a,rect:i,style:c,transform:d,transition:p=R1}=e;if(!i)return null;const f=s?d:{...d,scaleX:1,scaleY:1},h={...D1,width:i.width,height:i.height,top:i.top,left:i.left,transform:Mn.Transform.toString(f),transformOrigin:s&&r?Cv(r,i):void 0,transition:typeof p=="function"?p(r):p,...c};return Re.createElement(n,{className:a,style:h,ref:t},l)}),z1=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:l,className:a}=e;if(l!=null&&l.active)for(const[i,c]of Object.entries(l.active))c!==void 0&&(s[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,c));if(l!=null&&l.dragOverlay)for(const[i,c]of Object.entries(l.dragOverlay))c!==void 0&&r.node.style.setProperty(i,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,d]of Object.entries(s))n.node.style.setProperty(c,d);a!=null&&a.active&&n.node.classList.remove(a.active)}},I1=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Mn.Transform.toString(t)},{transform:Mn.Transform.toString(n)}]},L1={duration:250,easing:"ease",keyframes:I1,sideEffects:z1({styles:{active:{opacity:"0"}}})};function O1(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return pa((l,a)=>{if(t===null)return;const i=n.get(l);if(!i)return;const c=i.node.current;if(!c)return;const d=Gh(a);if(!d)return;const{transform:p}=bt(a).getComputedStyle(a),f=Ah(p);if(!f)return;const h=typeof t=="function"?t:$1(t);return Xh(c,s.draggable.measure),h({active:{id:l,data:i.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function $1(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...L1,...e};return l=>{let{active:a,dragOverlay:i,transform:c,...d}=l;if(!t)return;const p={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},f={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/i.rect.height:1},h={x:c.x-p.x,y:c.y-p.y,...f},x=s({...d,active:a,dragOverlay:i,transform:{initial:c,final:h}}),[w]=x,y=x[x.length-1];if(JSON.stringify(w)===JSON.stringify(y))return;const b=r==null?void 0:r({active:a,dragOverlay:i,...d}),g=i.node.animate(x,{duration:t,easing:n,fill:"forwards"});return new Promise(m=>{g.onfinish=()=>{b==null||b(),m()}})}}let Hd=0;function A1(e){return u.useMemo(()=>{if(e!=null)return Hd++,Hd},[e])}const nx=Re.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:l,modifiers:a,wrapperElement:i="div",className:c,zIndex:d=999}=e;const{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggableNodes:w,droppableContainers:y,dragOverlay:b,over:g,measuringConfiguration:m,scrollableAncestors:v,scrollableAncestorRects:S,windowRect:j}=tx(),N=u.useContext(ga),k=A1(f==null?void 0:f.id),E=Zh(a,{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggingNodeRect:b.rect,over:g,overlayNodeRect:b.rect,scrollableAncestors:v,scrollableAncestorRects:S,transform:N,windowRect:j}),T=ou(h),P=O1({config:r,draggableNodes:w,droppableContainers:y,measuringConfiguration:m}),L=T?b.setRef:void 0;return Re.createElement(T1,null,Re.createElement(M1,{animation:P},f&&k?Re.createElement(P1,{key:k,id:f.id,ref:L,as:i,activatorEvent:p,adjustScale:t,className:c,transition:l,rect:T,style:{zIndex:d,...s},transform:E},n):null))});function ya(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function F1(e,t){return e.reduce((n,r,s)=>{const l=t.get(r);return l&&(n[s]=l),n},Array(e.length))}function Ul(e){return e!==null&&e>=0}function B1(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function U1(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const rx=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const l=ya(t,r,n),a=t[s],i=l[s];return!i||!a?null:{x:i.left-a.left,y:i.top-a.top,scaleX:i.width/a.width,scaleY:i.height/a.height}},Hl={scaleX:1,scaleY:1},sx=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:l,overIndex:a}=e;const i=(t=l[n])!=null?t:r;if(!i)return null;if(s===n){const d=l[a];return d?{x:0,y:n<a?d.top+d.height-(i.top+i.height):d.top-i.top,...Hl}:null}const c=H1(l,s,n);return s>n&&s<=a?{x:0,y:-i.height-c,...Hl}:s<n&&s>=a?{x:0,y:i.height+c,...Hl}:{x:0,y:0,...Hl}};function H1(e,t,n){const r=e[t],s=e[t-1],l=e[t+1];return r?n<t?s?r.top-(s.top+s.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const lx="Sortable",ox=Re.createContext({activeIndex:-1,containerId:lx,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rx,disabled:{draggable:!1,droppable:!1}});function ax(e){let{children:t,id:n,items:r,strategy:s=rx,disabled:l=!1}=e;const{active:a,dragOverlay:i,droppableRects:c,over:d,measureDroppableContainers:p}=tx(),f=kl(lx,n),h=i.rect!==null,x=u.useMemo(()=>r.map(N=>typeof N=="object"&&"id"in N?N.id:N),[r]),w=a!=null,y=a?x.indexOf(a.id):-1,b=d?x.indexOf(d.id):-1,g=u.useRef(x),m=!B1(x,g.current),v=b!==-1&&y===-1||m,S=U1(l);sn(()=>{m&&w&&p(x)},[m,x,w,p]),u.useEffect(()=>{g.current=x},[x]);const j=u.useMemo(()=>({activeIndex:y,containerId:f,disabled:S,disableTransforms:v,items:x,overIndex:b,useDragOverlay:h,sortedRects:F1(x,c),strategy:s}),[y,f,S.draggable,S.droppable,v,x,b,c,h,s]);return Re.createElement(ox.Provider,{value:j},t)}const W1=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return ya(n,r,s).indexOf(t)},V1=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:l,newIndex:a,previousItems:i,previousContainerId:c,transition:d}=e;return!d||!r||i!==l&&s===a?!1:n?!0:a!==s&&t===c},X1={duration:200,easing:"ease"},ix="transform",Y1=Mn.Transition.toString({property:ix,duration:0,easing:"linear"}),K1={roleDescription:"sortable"};function Q1(e){let{disabled:t,index:n,node:r,rect:s}=e;const[l,a]=u.useState(null),i=u.useRef(n);return sn(()=>{if(!t&&n!==i.current&&r.current){const c=s.current;if(c){const d=ms(r.current,{ignoreTransform:!0}),p={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(p.x||p.y)&&a(p)}}n!==i.current&&(i.current=n)},[t,n,r,s]),u.useEffect(()=>{l&&a(null)},[l]),l}function cx(e){let{animateLayoutChanges:t=V1,attributes:n,disabled:r,data:s,getNewIndex:l=W1,id:a,strategy:i,resizeObserverConfig:c,transition:d=X1}=e;const{items:p,containerId:f,activeIndex:h,disabled:x,disableTransforms:w,sortedRects:y,overIndex:b,useDragOverlay:g,strategy:m}=u.useContext(ox),v=G1(r,x),S=p.indexOf(a),j=u.useMemo(()=>({sortable:{containerId:f,index:S,items:p},...s}),[f,s,S,p]),N=u.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:k,node:E,isOver:T,setNodeRef:P}=E1({id:a,data:j,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...c}}),{active:L,activatorEvent:oe,activeNodeRect:W,attributes:z,setNodeRef:q,listeners:he,isDragging:de,over:O,setActivatorNodeRef:K,transform:_}=S1({id:a,data:j,attributes:{...K1,...n},disabled:v.draggable}),ee=dv(P,q),V=!!L,je=V&&!w&&Ul(h)&&Ul(b),ye=!g&&de,Ze=ye&&je?_:null,ve=i!=null?i:m,X=je?Ze!=null?Ze:ve({rects:y,activeNodeRect:W,activeIndex:h,overIndex:b,index:S}):null,we=Ul(h)&&Ul(b)?l({id:a,items:p,activeIndex:h,overIndex:b}):S,ie=L==null?void 0:L.id,se=u.useRef({activeId:ie,items:p,newIndex:we,containerId:f}),Ye=p!==se.current.items,be=t({active:L,containerId:f,isDragging:de,isSorting:V,id:a,index:S,items:p,newIndex:se.current.newIndex,previousItems:se.current.items,previousContainerId:se.current.containerId,transition:d,wasDragging:se.current.activeId!=null}),Me=Q1({disabled:!be,index:S,node:E,rect:k});return u.useEffect(()=>{V&&se.current.newIndex!==we&&(se.current.newIndex=we),f!==se.current.containerId&&(se.current.containerId=f),p!==se.current.items&&(se.current.items=p)},[V,we,f,p]),u.useEffect(()=>{if(ie===se.current.activeId)return;if(ie!=null&&se.current.activeId==null){se.current.activeId=ie;return}const U=setTimeout(()=>{se.current.activeId=ie},50);return()=>clearTimeout(U)},[ie]),{active:L,activeIndex:h,attributes:z,data:j,rect:k,index:S,newIndex:we,items:p,isOver:T,isSorting:V,isDragging:de,listeners:he,node:E,overIndex:b,over:O,setNodeRef:ee,setActivatorNodeRef:K,setDroppableNodeRef:P,setDraggableNodeRef:q,transform:Me!=null?Me:X,transition:H()};function H(){if(Me||Ye&&se.current.newIndex===S)return Y1;if(!(ye&&!ha(oe)||!d)&&(V||be))return Mn.Transition.toString({...d,property:ix})}}function G1(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}Se.Down,Se.Right,Se.Up,Se.Left;const Ne={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Wd={always:{label:"",color:"#6b9b6e",bg:"#e0f0e1"},keyword:{label:"",color:"#9b6b6b",bg:"#f0e0e0"},mood:{label:"",color:"#9b7a3b",bg:"#f0ebd8"},message_mode:{label:"",color:"#6b7b9b",bg:"#e0e6f0"}};function ux({activation:e}){const t=Wd[e]||Wd.always;return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:t.color,background:t.bg},children:t.label})}const Wl=80;function q1({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Wl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{if(p.target.closest(".drag-handle"))return;const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Wl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Wl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Wl):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(fs,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function J1({book:e,onTap:t,onDelete:n}){var p;const{attributes:r,listeners:s,setNodeRef:l,transform:a,transition:i,isDragging:c}=cx({id:String(e.id)}),d={transform:Mn.Transform.toString(a),transition:i,opacity:c?0:1};return o.jsx("div",{ref:l,style:d,className:"mb-3",children:o.jsx(q1,{onDelete:()=>n(e),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Ne.bg,userSelect:"none"},children:[o.jsx("div",{...r,...s,className:"drag-handle shrink-0 cursor-grab touch-none px-1",style:{cursor:c?"grabbing":"grab"},children:o.jsx(ml,{size:18,style:{color:Ne.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>t(e),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:Ne.text},children:e.name}),o.jsx(ux,{activation:e.activation})]}),e.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:Ne.textMuted},children:e.folder}),e.activation==="keyword"&&((p=e.keywords)==null?void 0:p.length)>0&&o.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[e.keywords.slice(0,3).map((f,h)=>o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(232,160,191,0.15)",color:Ne.accentDark},children:f},h)),e.keywords.length>3&&o.jsxs("span",{className:"text-[10px]",style:{color:Ne.textMuted},children:["+",e.keywords.length-3]})]})]}),o.jsx(ls,{size:16,style:{color:Ne.textMuted,flexShrink:0},onClick:()=>t(e)})]})})})}function Z1({folder:e,books:t,onDelete:n,onTap:r,onReorder:s}){const[l,a]=u.useState(!0),[i,c]=u.useState(null),d=Lh(Uo(xa,{activationConstraint:{distance:5}}),Uo(lu,{activationConstraint:{delay:200,tolerance:5}})),p=({active:h,over:x})=>{if(c(null),!x||h.id===x.id)return;const w=t.findIndex(g=>String(g.id)===String(h.id)),y=t.findIndex(g=>String(g.id)===String(x.id));if(w<0||y<0)return;const b=ya(t,w,y);s(e,b)},f=i?t.find(h=>String(h.id)===String(i)):null;return o.jsxs("div",{className:"mb-4",children:[o.jsxs("button",{className:"mb-2 flex w-full items-center gap-2 px-1",onClick:()=>a(!l),children:[l?o.jsx(jr,{size:14,style:{color:Ne.textMuted}}):o.jsx(ls,{size:14,style:{color:Ne.textMuted}}),o.jsx("span",{className:"text-[12px] font-bold tracking-wide",style:{color:Ne.textMuted},children:e||""}),o.jsx("span",{className:"ml-1 rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.12)",color:Ne.textMuted},children:t.length})]}),l&&o.jsxs(ex,{sensors:d,collisionDetection:Oh,onDragStart:({active:h})=>c(h.id),onDragEnd:p,children:[o.jsx(ax,{items:t.map(h=>String(h.id)),strategy:sx,children:t.map(h=>o.jsx(J1,{book:h,onTap:r,onDelete:n},h.id))}),o.jsx(nx,{children:f&&o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Ne.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx("div",{className:"shrink-0 px-1",children:o.jsx(ml,{size:18,style:{color:Ne.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:Ne.text},children:f.name}),o.jsx(ux,{activation:f.activation})]}),f.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:Ne.textMuted},children:f.folder})]}),o.jsx(ls,{size:16,style:{color:Ne.textMuted,flexShrink:0}})]})})]})]})}function e0(){const e=At(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[l,a]=u.useState(null),[i,c]=u.useState(null),d=y=>{c(y),setTimeout(()=>c(null),2e3)},p=()=>{s(!0),A("/api/world-books").then(y=>n(y.world_books||[])).catch(()=>d("")).finally(()=>s(!1))};u.useEffect(()=>{p()},[]);const f=async y=>{a(null);try{await A(`/api/world-books/${y.id}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==y.id)),d("")}catch(b){d("")}},h=(y,b)=>{const g=y||"";n(m=>[...m.filter(S=>(S.folder||"")!==g),...b]),A("/api/world-books/reorder",{method:"PUT",body:{ordered_ids:b.map(m=>m.id)}}).catch(()=>d(""))},x={};for(const y of t){const b=y.folder||"";x[b]||(x[b]=[]),x[b].push(y)}const w=Object.keys(x).sort((y,b)=>y===""?1:b===""?-1:y.localeCompare(b));return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ne.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full nm-active",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:Ne.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ne.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books/new"),children:o.jsx(ds,{size:20,style:{color:Ne.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-t-transparent",style:{borderColor:Ne.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(ml,{size:36,style:{color:Ne.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:Ne.textMuted},children:" + "})]}):w.map(y=>o.jsx(Z1,{folder:y,books:x[y],onDelete:b=>a(b),onTap:b=>e(`/world-books/${b.id}`),onReorder:h},y))}),l&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>a(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Ne.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:y=>y.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Ne.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Ne.textMuted},children:["",l.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)",color:Ne.text},onClick:()=>a(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>f(l),children:""})]})]})}),i&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const te={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function t0({label:e,value:t,onChange:n,placeholder:r}){return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:te.textMuted},children:e}),o.jsx("input",{type:"text",value:t,onChange:s=>n(s.target.value),placeholder:r,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:te.bg,color:te.text}})]})}function n0({value:e,onChange:t,folders:n}){const[r,s]=u.useState(!1),l=n.filter(a=>a!==e&&a.toLowerCase().includes(e.toLowerCase()));return o.jsxs("div",{className:"relative mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:te.textMuted},children:""}),o.jsx("input",{type:"text",value:e,onChange:a=>{t(a.target.value),s(!0)},onFocus:()=>s(!0),onBlur:()=>setTimeout(()=>s(!1),150),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:te.bg,color:te.text}}),r&&l.length>0&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[160px] overflow-y-auto rounded-[14px]",style:{background:te.bg,boxShadow:"var(--card-shadow)"},children:l.map(a=>o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:te.text},onMouseDown:()=>{t(a),s(!1)},children:a},a))})]})}function r0({value:e,onChange:t}){const n=[{value:"always",label:""},{value:"keyword",label:""},{value:"mood",label:""},{value:"message_mode",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:te.textMuted},children:""}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:te.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:e===r.value?te.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?te.accentDark:te.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})]})}function s0({selected:e,onChange:t}){const n=[{value:"long",label:""},{value:"short",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:te.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:te.bg,minHeight:48},children:n.map(r=>{const s=e===r.value;return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?te.accentDark:te.bg,color:s?"white":te.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>t(r.value),children:r.label},r.value)})})]})}const l0=[{value:"happy",label:""},{value:"sad",label:""},{value:"angry",label:""},{value:"anxious",label:""},{value:"tired",label:""},{value:"emo",label:""},{value:"flirty",label:""},{value:"proud",label:""},{value:"calm",label:""}];function o0({selected:e,onChange:t}){const n=r=>{e.includes(r)?t(e.filter(s=>s!==r)):t([...e,r])};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:te.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:te.bg,minHeight:48},children:l0.map(r=>{const s=e.includes(r.value);return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?te.accentDark:te.bg,color:s?"white":te.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>n(r.value),children:r.label},r.value)})})]})}function a0({keywords:e,onChange:t}){const[n,r]=u.useState(""),s=()=>{const l=n.trim();if(!l||e.includes(l)){r("");return}t([...e,l]),r("")};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:te.textMuted},children:""}),o.jsxs("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:te.bg,minHeight:48},children:[e.map(l=>o.jsxs("span",{className:"flex items-center gap-1 rounded-full px-2.5 py-1 text-[12px] font-medium",style:{background:"rgba(232,160,191,0.2)",color:te.accentDark},children:[l,o.jsx("button",{onClick:()=>t(e.filter(a=>a!==l)),children:o.jsx(vl,{size:10})})]},l)),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),onKeyDown:l=>{(l.key==="Enter"||l.key===",")&&(l.preventDefault(),s())},placeholder:"...",className:"w-24 bg-transparent text-[12px] outline-none",style:{color:te.text}}),n.trim()&&o.jsx("button",{className:"flex h-5 w-5 items-center justify-center rounded-full",style:{background:te.accentDark},onClick:s,children:o.jsx(ds,{size:10,color:"white"})})]})]}),o.jsx("p",{className:"mt-1 text-[10px]",style:{color:te.textMuted},children:" Enter "})]})}function i0({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:te.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:te.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:te.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(os,{size:18,style:{color:te.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:te.bg,color:te.text},placeholder:"..."})]})}function Vd(){const e=At(),{id:t}=Sh(),n=!t,[r,s]=u.useState(""),[l,a]=u.useState(""),[i,c]=u.useState("always"),[d,p]=u.useState([]),[f,h]=u.useState("long"),[x,w]=u.useState(""),[y,b]=u.useState(!1),[g,m]=u.useState(!n),[v,S]=u.useState(null),[j,N]=u.useState([]),[k,E]=u.useState(!1),T=u.useRef(null),P=W=>{var he;const z=(he=W.target.files)==null?void 0:he[0];if(!z)return;const q=new FileReader;q.onload=de=>w(de.target.result||""),q.readAsText(z),W.target.value=""},L=W=>{S(W),setTimeout(()=>S(null),2e3)};u.useEffect(()=>{A("/api/world-books").then(W=>{const z=W.world_books||[];if(N([...new Set(z.map(q=>q.folder).filter(Boolean))]),!n){const q=z.find(he=>String(he.id)===String(t));q&&(s(q.name),a(q.folder||""),c(q.activation),p(q.keywords||[]),h(q.message_mode||"long"),w(q.content))}}).catch(()=>L("")).finally(()=>m(!1))},[t,n]);const oe=async()=>{if(!r.trim()){L("");return}b(!0);try{const W={name:r.trim(),folder:l.trim()||null,activation:i,keywords:i==="keyword"||i==="mood"?d:[],message_mode:i==="message_mode"?f:null,content:x};n?(await A("/api/world-books",{method:"POST",body:W}),L("")):(await A(`/api/world-books/${t}`,{method:"PUT",body:W}),L(""))}catch(W){L(": "+W.message)}finally{b(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:te.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:te.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:te.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:te.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:te.bg,boxShadow:y?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:oe,disabled:y,children:o.jsx(yl,{size:18,style:{color:te.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:g?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:te.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"rounded-[20px] p-5 mb-4",style:{background:te.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(t0,{label:"",value:r,onChange:s,placeholder:""}),o.jsx(n0,{value:l,onChange:a,folders:j}),o.jsx(r0,{value:i,onChange:c}),i==="keyword"&&o.jsx(a0,{keywords:d,onChange:p}),i==="mood"&&o.jsx(o0,{selected:d,onChange:p}),i==="message_mode"&&o.jsx(s0,{selected:f,onChange:h})]}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:te.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:te.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:te.bg},onClick:()=>{var W;return(W=T.current)==null?void 0:W.click()},title:"",children:o.jsx(ua,{size:13,style:{color:te.textMuted}})}),o.jsx("input",{ref:T,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:P}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:te.bg},onClick:()=>E(!0),title:"",children:o.jsx(gl,{size:13,style:{color:te.accentDark}})})]})]}),o.jsx("textarea",{value:x,onChange:W=>w(W.target.value),placeholder:"...",rows:10,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:te.bg,color:te.text}})]})]})}),k&&o.jsx(i0,{value:x,onChange:w,onClose:()=>E(!1)}),v&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:v})})]})}const He={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Vl=80;function c0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Vl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Vl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Vl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Vl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:He.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(fs,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function u0({assistant:e,localAvatar:t,onTap:n}){var s;const r=t||null;return o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:He.bg,userSelect:"none"},onClick:()=>n(e),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:48,height:48,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:He.bg},children:r?o.jsx("img",{src:r,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[20px]",style:{color:He.accentDark},children:((s=e.name)==null?void 0:s[0])||"?"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[15px] font-bold",style:{color:He.text},children:e.name}),e.created_at&&o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:He.textMuted},children:e.created_at.slice(0,10)})]}),o.jsx(ls,{size:16,style:{color:He.textMuted,flexShrink:0}})]})}function d0(){const e=At(),[t,n]=u.useState([]),[r,s]=u.useState({}),[l,a]=u.useState(!0),[i,c]=u.useState(null),[d,p]=u.useState(null),f=w=>{p(w),setTimeout(()=>p(null),2e3)},h=()=>{a(!0),A("/api/assistants").then(async w=>{const y=w.assistants||[];n(y);const b={};await Promise.all(y.map(async g=>{const m=await ps(`assistant-avatar-${g.id}`).catch(()=>null);m&&(b[g.id]=m)})),s(b)}).catch(()=>f("")).finally(()=>a(!1))};u.useEffect(()=>{h()},[]);const x=async w=>{c(null);try{await A(`/api/assistants/${w.id}`,{method:"DELETE"}),n(y=>y.filter(b=>b.id!==w.id)),f("")}catch(y){f("")}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:He.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:He.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:He.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:He.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:He.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants/new"),children:o.jsx(ds,{size:20,style:{color:He.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8 pt-5",children:l?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:He.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(_h,{size:36,style:{color:He.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:He.textMuted},children:" + "})]}):t.map(w=>o.jsx(c0,{onDelete:()=>c(w),children:o.jsx(u0,{assistant:w,localAvatar:r[w.id],onTap:y=>e(`/assistants/${y.id}`)})},w.id))}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>c(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:He.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:w=>w.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:He.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:He.textMuted},children:["",i.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:He.bg,boxShadow:"var(--card-shadow-sm)",color:He.text},onClick:()=>c(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>x(i),children:""})]})]})}),d&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:d})})]})}const M={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Xd({label:e,value:t,onChange:n,placeholder:r,rows:s,onExpand:l,onHistory:a}){const i=u.useRef(null),c=d=>{var h;const p=(h=d.target.files)==null?void 0:h[0];if(!p)return;const f=new FileReader;f.onload=x=>n(x.target.result||""),f.readAsText(p),d.target.value=""};return o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),o.jsxs("div",{className:"flex items-center gap-2",children:[a&&o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:a,children:o.jsx(Zy,{size:13,style:{color:M.textMuted}})}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var d;return(d=i.current)==null?void 0:d.click()},children:o.jsx(ua,{size:13,style:{color:M.textMuted}})}),o.jsx("input",{ref:i,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:c}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:l,children:o.jsx(gl,{size:13,style:{color:M.accentDark}})})]})]}),o.jsx("textarea",{value:t,onChange:d=>n(d.target.value),placeholder:r,rows:s||6,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})}function qa({label:e,value:t,onChange:n,presets:r}){const[s,l]=u.useState(!1),a=r.find(i=>i.id===t);return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text},onClick:()=>l(!s),children:[o.jsx("span",{style:{color:a?M.text:M.textMuted},children:a?a.name:""}),o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:M.textMuted,transform:s?"rotate(180deg)":"none",transition:"transform 0.2s"},children:o.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&o.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:M.bg,boxShadow:"var(--card-shadow)",zIndex:40},children:[o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:M.textMuted},onClick:()=>{n(null),l(!1)},children:""}),r.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[14px]",style:{color:M.text},onClick:()=>{n(i.id),l(!1)},children:[o.jsx("span",{children:i.name}),i.id===t&&o.jsx(yr,{size:14,style:{color:M.accentDark}})]},i.id))]})]})]})}function Ja({value:e,onChange:t,onClose:n,title:r,placeholder:s}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:r||""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(os,{size:18,style:{color:M.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:l=>t(l.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:M.bg,color:M.text},placeholder:s||""})]})}const Xl=80;function f0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Xl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Xl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Xl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Xl):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(fs,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function p0({title:e,message:t,onConfirm:n,onCancel:r}){return o.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:r,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:M.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:s=>s.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:M.text},children:e||""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:M.textMuted},children:t}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.text},onClick:r,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:n,children:""})]})]})})}function h0({items:e,currentContent:t,onApply:n,onClose:r,onDelete:s}){const[l,a]=u.useState("current"),[i,c]=u.useState(null),[d,p]=u.useState(null),f=x=>x?new Date(x).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",h=async()=>{if(l==="current"){r();return}const x=e.find(w=>w.id===l);x&&await n(x.content),r()};return i?o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsxs("span",{className:"text-[15px] font-bold",style:{color:M.text},children:[" ",i.version]}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>c(null),children:o.jsx(os,{size:18,style:{color:M.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:o.jsx("div",{className:"rounded-[14px] p-4",style:{boxShadow:"var(--inset-shadow)",background:M.bg},children:o.jsx("p",{className:"whitespace-pre-wrap text-[13px] leading-relaxed",style:{color:M.text},children:i.content})})})]}):o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:r,children:o.jsx(os,{size:18,style:{color:M.accentDark}})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[o.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:l==="current"?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[o.jsx("button",{onClick:()=>a("current"),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:l==="current"?M.accentDark:M.bg,boxShadow:l==="current"?"none":"var(--icon-inset)"},children:l==="current"&&o.jsx(yr,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:""}),o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#2a9d5c",background:"rgba(42,157,92,0.12)"},children:""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:t})]})]}),e.length===0&&o.jsx("p",{className:"py-8 text-center text-[13px]",style:{color:M.textMuted},children:""}),e.map(x=>o.jsx("div",{className:"mb-2",children:o.jsx(f0,{onDelete:()=>p(x.id),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:l===x.id?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[o.jsx("button",{onClick:()=>a(x.id),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:l===x.id?M.accentDark:M.bg,boxShadow:l===x.id?"none":"var(--icon-inset)"},children:l===x.id&&o.jsx(yr,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>c(x),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:[" ",x.version]}),o.jsx("span",{className:"text-[10px]",style:{color:M.textMuted},children:f(x.created_at)})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:x.content})]})]})})},x.id))]}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsx("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:h,children:""})}),d&&o.jsx(p0,{message:"",onCancel:()=>p(null),onConfirm:()=>{s(d),p(null)}})]})}function dx(e){return e==="always"?"":e==="keyword"?"":e==="message_mode"?"":""}function fx(e){return!e||!Array.isArray(e)?[]:e.map((t,n)=>typeof t=="object"&&t!==null?t:{id:t,position:"after",sort_order:n})}function x0({item:e,book:t,position:n,sectionList:r,onRemove:s,onChangePosition:l}){const{attributes:a,listeners:i,setNodeRef:c,transform:d,transition:p,isDragging:f}=cx({id:String(e.id)}),h={transform:Mn.Transform.toString(d),transition:p,opacity:f?0:1};return t?o.jsxs("div",{ref:c,style:h,className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",children:[o.jsx("div",{...a,...i,className:"cursor-grab touch-none p-1",style:{cursor:f?"grabbing":"grab"},children:o.jsx(ml,{size:14,style:{color:M.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.text},children:t.name}),o.jsxs("div",{className:"text-[10px]",style:{color:M.textMuted},children:[dx(t.activation),t.folder?`  ${t.folder}`:""]})]}),o.jsx("button",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},onClick:()=>l(e.id,n==="before"?"after":"before"),children:n==="before"?"":""}),o.jsx("button",{onClick:()=>s(e.id),children:o.jsx(vl,{size:14,style:{color:M.textMuted}})})]}):null}function m0({allBooks:e,mountedIds:t,onClose:n,onConfirm:r}){const[s,l]=u.useState(new Set(t)),a={};e.forEach(d=>{const p=d.folder||"";a[p]||(a[p]=[]),a[p].push(d)});const i=d=>{l(p=>{const f=new Set(p);return f.has(d)?f.delete(d):f.add(d),f})},c=d=>{const p=d.every(f=>s.has(f.id));l(f=>{const h=new Set(f);return p?d.forEach(x=>h.delete(x.id)):d.forEach(x=>h.add(x.id)),h})};return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-end",style:{background:"rgba(0,0,0,0.4)"},children:o.jsxs("div",{className:"flex w-full flex-col rounded-t-[24px]",style:{background:M.bg,maxHeight:"82vh"},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between p-5 pb-3",children:[o.jsx("h3",{className:"text-[16px] font-bold",style:{color:M.text},children:""}),o.jsx("button",{onClick:n,children:o.jsx(vl,{size:20,style:{color:M.textMuted}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5",children:Object.entries(a).map(([d,p])=>{const f=p.every(h=>s.has(h.id));return o.jsxs("div",{className:"mb-5",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:d}),o.jsx("button",{className:"rounded-full px-2.5 py-1 text-[11px] font-semibold",style:{background:f?"rgba(201,98,138,0.15)":"rgba(136,136,160,0.1)",color:f?M.accentDark:M.textMuted},onClick:()=>c(p),children:f?"":""})]}),o.jsx("div",{className:"space-y-2",children:p.map(h=>{const x=s.has(h.id);return o.jsxs("button",{className:"flex w-full items-center gap-3 rounded-[14px] p-3",style:{background:M.bg,boxShadow:x?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>i(h.id),children:[o.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:x?M.accentDark:M.bg,boxShadow:x?"none":"var(--icon-inset)"},children:x&&o.jsx(yr,{size:12,color:"white"})}),o.jsx("div",{className:"flex-1 min-w-0 text-left",children:o.jsx("div",{className:"truncate text-[13px] font-medium",style:{color:x?M.accentDark:M.text},children:h.name})}),o.jsx("span",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},children:dx(h.activation)})]},h.id)})})]},d)})}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsxs("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>r([...s]),children:[" ",s.size,""]})})]})})}function g0({ruleSetIds:e,onChange:t,allBooks:n}){const[r,s]=u.useState(!1),[l,a]=u.useState(null),i=fx(e),c=i.filter(j=>j.position==="before").sort((j,N)=>j.sort_order-N.sort_order),d=i.filter(j=>j.position==="after").sort((j,N)=>j.sort_order-N.sort_order),p=j=>n.find(N=>N.id===j||N.id===Number(j)),f=Lh(Uo(xa,{activationConstraint:{distance:5}}),Uo(lu,{activationConstraint:{delay:150,tolerance:5}})),h=({active:j})=>a(j.id),x=({active:j,over:N})=>{if(!N)return;const k=i.find(T=>String(T.id)===String(j.id)),E=i.find(T=>String(T.id)===String(N.id));if(!(!k||!E)&&k.position!==E.position){const T=i.map(P=>String(P.id)===String(k.id)?{...P,position:E.position}:P);t(T)}},w=({active:j,over:N})=>{if(a(null),!N||j.id===N.id)return;const k=i.find(z=>String(z.id)===String(j.id)),E=i.find(z=>String(z.id)===String(N.id));if(!k||!E||k.position!==E.position)return;const T=k.position==="before"?[...c]:[...d],P=T.findIndex(z=>String(z.id)===String(j.id)),L=T.findIndex(z=>String(z.id)===String(N.id)),oe=ya(T,P,L).map((z,q)=>({...z,sort_order:q})),W=i.filter(z=>z.position!==k.position);t([...W,...oe])},y=j=>t(i.filter(N=>N.id!==j)),b=(j,N)=>{const E=(N==="before"?c:d).length;t(i.map(T=>T.id===j?{...T,position:N,sort_order:E}:T))},g=j=>{const N=i.map(L=>L.id),E=j.filter(L=>!N.includes(L)).map((L,oe)=>({id:L,position:"after",sort_order:d.length+oe})),T=new Set(N.filter(L=>!j.includes(L))),P=i.filter(L=>!T.has(L.id));t([...P,...E])},m=(j,N)=>j.length===0?o.jsx("div",{className:"py-3 text-center text-[12px]",style:{color:M.textMuted},children:""}):o.jsx(ax,{items:j.map(k=>String(k.id)),strategy:sx,children:o.jsx("div",{className:"rounded-[14px] px-2 pt-1",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:j.map((k,E)=>o.jsxs("div",{children:[E>0&&o.jsx("div",{className:"mx-2",style:{height:1,background:"rgba(0,0,0,0.06)"}}),o.jsx(x0,{item:k,book:p(k.id),position:N,sectionList:j,onRemove:y,onChangePosition:b})]},k.id))})}),v=l?i.find(j=>String(j.id)===String(l)):null,S=v?p(v.id):null;return o.jsxs(ex,{sensors:f,collisionDetection:Oh,onDragStart:h,onDragOver:x,onDragEnd:w,children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(c,"before")]}),o.jsxs("div",{className:"my-4 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}}),o.jsx("span",{className:"rounded-full px-3 py-1 text-[11px] font-bold",style:{background:"rgba(232,160,191,0.15)",color:M.accentDark},children:"System Prompt"}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(d,"after")]}),o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-3 text-[14px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.accentDark},onClick:()=>s(!0),children:[o.jsx(ds,{size:16})," "]}),o.jsx(nx,{children:S&&o.jsxs("div",{className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",style:{background:M.bg,boxShadow:"var(--card-shadow)",opacity:.9},children:[o.jsx(ml,{size:14,style:{color:M.textMuted}}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.accentDark},children:S.name})})]})}),r&&o.jsx(m0,{allBooks:n,mountedIds:i.map(j=>j.id),onClose:()=>s(!1),onConfirm:j=>{g(j),s(!1)}})]})}function Yd(){const e=At(),{id:t}=Sh(),n=!t,[r,s]=u.useState("basic"),[l,a]=u.useState(""),[i,c]=u.useState(""),[d,p]=u.useState(""),[f,h]=u.useState(null),[x,w]=u.useState(null),[y,b]=u.useState(null),[g,m]=u.useState(""),[v,S]=u.useState(""),[j,N]=u.useState(null),[k,E]=u.useState(null),[T,P]=u.useState([]),[L,oe]=u.useState([]),[W,z]=u.useState([]),[q,he]=u.useState(!1),[de,O]=u.useState(!n),[K,_]=u.useState(null),[ee,V]=u.useState(!1),[je,ye]=u.useState(!1),[Ze,ve]=u.useState(!1),[X,we]=u.useState(null),[ie,se]=u.useState([]),Ye=u.useRef(null),be=u.useRef(null),Me=I=>{var ue;const J=(ue=I.target.files)==null?void 0:ue[0];if(!J)return;const re=new FileReader;re.onload=Fe=>p(Fe.target.result||""),re.readAsText(J),I.target.value=""},H=I=>{_(I),setTimeout(()=>_(null),2500)},U=async I=>{const J=I==="human"?j:k;if(!J){H("");return}try{const re=await A(`/api/core-blocks/${J}/history`);se(re.history||[]),we(I)}catch(re){H("")}};u.useEffect(()=>{(async()=>{const[J,re]=await Promise.all([A("/api/presets").catch(()=>({presets:[]})),A("/api/world-books").catch(()=>({world_books:[]}))]);if(oe(J.presets||[]),z(re.world_books||[]),n)O(!1);else try{const[ue,Fe]=await Promise.all([A(`/api/assistants/${t}`),A(`/api/core-blocks?assistant_id=${t}`).catch(()=>({blocks:[]}))]);a(ue.name||""),ps(`assistant-avatar-${t}`).then(Be=>{Be&&c(Be)}).catch(function(){}),p(ue.system_prompt||""),h(ue.model_preset_id||null),w(ue.summary_model_preset_id||null),b(ue.summary_fallback_preset_id||null),P(ue.rule_set_ids||[]);for(const Be of Fe.blocks||[])Be.block_type==="human"?(m(Be.content||""),N(Be.id)):Be.block_type==="persona"&&(S(Be.content||""),E(Be.id))}catch(ue){H(": "+ue.message)}finally{O(!1)}})()},[t,n]);const ce=I=>{var ue;const J=(ue=I.target.files)==null?void 0:ue[0];if(!J)return;const re=new FileReader;re.onload=async Fe=>{const Be=Fe.target.result,Kt=`assistant-avatar-${t||"new"}`;try{await qi(Kt,Be),c(Be)}catch(Tn){H("")}},re.readAsDataURL(J),I.target.value=""},ne=async()=>{if(!l.trim()){H("");return}he(!0);try{const I={name:l.trim(),avatar_url:i?`assistant-avatar-${t||"new"}`:null,system_prompt:d,model_preset_id:f,summary_model_preset_id:x,summary_fallback_preset_id:y,rule_set_ids:fx(T)};let J=t;if(n?(J=(await A("/api/assistants",{method:"POST",body:{name:l.trim()}})).id,i&&(await qi(`assistant-avatar-${J}`,i),I.avatar_url=`assistant-avatar-${J}`),await A(`/api/assistants/${J}`,{method:"PUT",body:I})):await A(`/api/assistants/${t}`,{method:"PUT",body:I}),j)await A(`/api/core-blocks/${j}`,{method:"PUT",body:{content:g}});else if(g.trim()){const re=await A("/api/core-blocks",{method:"POST",body:{block_type:"human",assistant_id:Number(J),content:g}});N(re.id)}if(k)await A(`/api/core-blocks/${k}`,{method:"PUT",body:{content:v}});else if(v.trim()){const re=await A("/api/core-blocks",{method:"POST",body:{block_type:"persona",assistant_id:Number(J),content:v}});E(re.id)}H("")}catch(I){H(": "+I.message)}finally{he(!1)}},fe=[{key:"basic",label:""},{key:"about",label:"Core Blocks"},{key:"books",label:""}];return o.jsxs("div",{className:"flex h-full flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:M.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:M.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:q?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:ne,disabled:q,children:o.jsx(yl,{size:18,style:{color:M.accentDark}})})]}),o.jsx("div",{className:"flex shrink-0 gap-1 px-5 pb-3",children:fe.map(I=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2.5 text-[13px] font-semibold transition-all",style:{background:r===I.key?M.bg:"transparent",boxShadow:r===I.key?"var(--card-shadow-sm)":"none",color:r===I.key?M.accentDark:M.textMuted},onClick:()=>s(I.key),children:I.label},I.key))}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:de?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:M.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[r==="basic"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-4 flex items-center gap-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var I;return(I=Ye.current)==null?void 0:I.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:M.bg},children:i?o.jsx("img",{src:i,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[24px]",style:{color:M.accentDark},children:(l==null?void 0:l[0])||"?"})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:M.accentDark},children:o.jsx(Th,{size:9,color:"white"})})]}),o.jsx("input",{ref:Ye,type:"file",accept:"image/*",className:"hidden",onChange:ce}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),o.jsx("input",{type:"text",value:l,onChange:I=>a(I.target.value),placeholder:"",className:"w-full rounded-[12px] px-4 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})]}),o.jsxs("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var I;return(I=be.current)==null?void 0:I.click()},title:"",children:o.jsx(ua,{size:13,style:{color:M.textMuted}})}),o.jsx("input",{ref:be,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:Me}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>V(!0),title:"",children:o.jsx(gl,{size:13,style:{color:M.accentDark}})})]})]}),o.jsx("textarea",{value:d,onChange:I=>p(I.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(qa,{label:"",value:f,onChange:h,presets:L}),o.jsx(qa,{label:"",value:x,onChange:w,presets:L}),o.jsx(qa,{label:"",value:y,onChange:b,presets:L})]})]}),r==="about"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Xd,{label:"human block",value:g,onChange:m,placeholder:" AI ...",rows:7,onExpand:()=>ye(!0),onHistory:()=>U("human")})}),o.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Xd,{label:"persona block",value:v,onChange:S,placeholder:"AI ...",rows:7,onExpand:()=>ve(!0),onHistory:()=>U("persona")})})]}),r==="books"&&o.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(g0,{ruleSetIds:T,onChange:P,allBooks:W})})]})}),ee&&o.jsx(Ja,{value:d,onChange:p,onClose:()=>V(!1),title:"",placeholder:"..."}),je&&o.jsx(Ja,{value:g,onChange:m,onClose:()=>ye(!1),title:"human block",placeholder:" AI ..."}),Ze&&o.jsx(Ja,{value:v,onChange:S,onClose:()=>ve(!1),title:"persona block",placeholder:"AI ..."}),X&&o.jsx(h0,{items:ie,currentContent:X==="human"?g:v,onApply:async I=>{const J=X==="human"?j:k;try{await A(`/api/core-blocks/${J}`,{method:"PUT",body:{content:I}}),X==="human"?m(I):S(I),H("")}catch(re){H("")}},onDelete:async I=>{try{await A(`/api/core-blocks/history/${I}`,{method:"DELETE"}),se(J=>J.filter(re=>re.id!==I)),H("")}catch(J){H("")}},onClose:()=>we(null)}),K&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:K})})]})}const le={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function Za({icon:e,label:t,hint:n,onClick:r}){return o.jsxs("button",{className:"flex w-full items-center gap-4 px-4 py-4",onClick:r,children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:e}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:t}),n&&o.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:n})]}),o.jsx(ls,{size:16,style:{color:le.textMuted}})]})}function Kd(){return o.jsx("div",{className:"mx-4 h-px",style:{background:"rgba(136,136,160,0.15)"}})}function rr({value:e,onChange:t,min:n,max:r}){const[s,l]=u.useState(String(e));u.useEffect(()=>l(String(e)),[e]);const a=()=>{let i=parseInt(s);isNaN(i)&&(i=n),i=Math.max(n,Math.min(r,i)),l(String(i)),t(i)};return o.jsx("input",{type:"number",value:s,onChange:i=>l(i.target.value),onBlur:a,onKeyDown:i=>i.key==="Enter"&&a(),className:"w-20 rounded-[10px] py-2 text-center text-[14px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:le.bg,color:le.text},min:n,max:r})}function y0(){const e=At(),[t,n]=u.useState(()=>parseInt(localStorage.getItem("telegram_buffer_seconds")||"15")),[r,s]=u.useState(8),[l,a]=u.useState(8e3),[i,c]=u.useState(16e3),[d,p]=u.useState(800),[f,h]=u.useState(800),[x,w]=u.useState(2e3),[y,b]=u.useState(!1),[g,m]=u.useState(!1),[v,S]=u.useState(null),j=k=>{S(k),setTimeout(()=>S(null),2e3)};u.useEffect(()=>{A("/api/settings/context-budget").then(k=>{a(k.retain_budget),c(k.trigger_threshold),p(k.summary_budget_longterm),h(k.summary_budget_daily),w(k.summary_budget_recent),b(!0)}).catch(()=>b(!0))},[]),u.useEffect(()=>{localStorage.setItem("telegram_buffer_seconds",String(t)),A("/api/settings/buffer-seconds",{method:"PUT",body:{seconds:t}}).catch(()=>{})},[t]),u.useEffect(()=>{A("/api/settings/short-msg-max").then(k=>s(k.max_count||8)).catch(()=>{})},[]),u.useEffect(()=>{A("/api/settings/short-msg-max",{method:"PUT",body:{max_count:r}}).catch(()=>{})},[r]);const N=async()=>{m(!0);try{await A("/api/settings/context-budget",{method:"PUT",body:{retain_budget:l,trigger_threshold:i,summary_budget_longterm:d,summary_budget_daily:f,summary_budget_recent:x}}),j("")}catch(k){j("")}finally{m(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:le.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:le.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:le.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:le.text},children:""}),o.jsx("div",{className:"w-10"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5 space-y-4",children:[o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(Za,{icon:o.jsx(sv,{size:18,style:{color:le.text}}),label:"API ",hint:"  ",onClick:()=>e("/settings/api")}),o.jsx(Kd,{}),o.jsx(Za,{icon:o.jsx(nv,{size:18,style:{color:le.textMuted}}),label:"",hint:"",onClick:()=>j("")})]}),o.jsx("div",{className:"rounded-[20px] overflow-hidden",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Za,{icon:o.jsx(tv,{size:18,style:{color:le.text}}),label:"",hint:" AI ",onClick:()=>e("/settings/proactive")})}),o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:o.jsx(av,{size:18,style:{color:le.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:" ()"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(rr,{value:t,onChange:n,min:1,max:120}),o.jsx("span",{className:"text-[12px]",style:{color:le.textMuted},children:""})]})]}),o.jsx(Kd,{}),o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:o.jsx(qy,{size:18,style:{color:le.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:""})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(rr,{value:r,onChange:s,min:2,max:20}),o.jsx("span",{className:"text-[12px]",style:{color:le.textMuted},children:""})]})]})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:o.jsx(Ky,{size:18,style:{color:le.text}})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:""})]})]}),y?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:" token "})]}),o.jsx(rr,{value:l,onChange:a,min:1e3,max:1e5})]}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),o.jsx(rr,{value:i,onChange:c,min:1e3,max:2e5})]}),o.jsx("div",{className:"h-px mb-4",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:o.jsx(Jc,{size:18,style:{color:le.text}})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:""})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),o.jsx(rr,{value:d,onChange:p,min:200,max:5e3})]}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),o.jsx(rr,{value:f,onChange:h,min:200,max:5e3})]}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),o.jsx(rr,{value:x,onChange:w,min:500,max:2e4})]}),o.jsx("button",{className:"w-full rounded-[14px] py-3 text-[14px] font-bold text-white",style:{background:g?"rgba(201,98,138,0.5)":"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"3px 3px 8px rgba(201,98,138,0.3)"},onClick:N,disabled:g,children:g?"...":""})]}):o.jsx("div",{className:"flex justify-center py-4",children:o.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2",style:{borderColor:le.accent,borderTopColor:"transparent"}})})]})]}),v&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:v})})]})}const B={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},v0=["claude-opus-4-6","claude-opus-4-5-20251101","claude-sonnet-4-6","claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001"];function w0(e){try{return new URL(e).hostname}catch(t){return e}}function Qd({label:e,value:t,onChange:n,placeholder:r,password:s,disabled:l}){const[a,i]=u.useState(!1);return o.jsxs("div",{className:"mb-4",children:[e&&o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:B.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:s&&!a?"password":"text",value:t,onChange:c=>n(c.target.value),placeholder:r,disabled:l,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none pr-12",style:{boxShadow:"var(--inset-shadow)",background:B.bg,color:l?B.textMuted:B.text,opacity:l?.5:1}}),s&&o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>i(!a),children:a?o.jsx(Gy,{size:16,style:{color:B.textMuted}}):o.jsx(Qy,{size:16,style:{color:B.textMuted}})})]})]})}function b0({value:e,onChange:t,options:n}){return o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:B.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[12px] font-semibold transition-all",style:{background:e===r.value?B.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?B.accentDark:B.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})}function k0({value:e,onChange:t,options:n,placeholder:r}){const[s,l]=u.useState(!1),a=u.useRef(null);return u.useEffect(()=>{if(!s)return;const i=c=>{a.current&&!a.current.contains(c.target)&&l(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[s]),o.jsxs("div",{className:"relative",ref:a,children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:B.bg,color:e?B.text:B.textMuted},onClick:()=>l(!s),children:[o.jsx("span",{className:"truncate",children:e||r||""}),o.jsx(jr,{size:16,style:{color:B.textMuted,flexShrink:0,transform:s?"rotate(180deg)":"none"}})]}),s&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:B.bg,boxShadow:"var(--card-shadow)"},children:n.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[13px]",style:{color:B.text},onClick:()=>{t(i),l(!1)},children:[o.jsx("span",{className:"truncate",children:i}),i===e&&o.jsx(yr,{size:12,style:{color:B.accentDark,flexShrink:0}})]},i))})]})}function j0({value:e,onChange:t}){const[n,r]=u.useState(!1),s=u.useRef(null);return u.useEffect(()=>{if(!n)return;const l=a=>{s.current&&!s.current.contains(a.target)&&r(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[n]),o.jsxs("div",{className:"relative",ref:s,children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"",value:e,onChange:l=>t(l.target.value),className:"w-full rounded-[14px] px-4 py-3 pr-10 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:B.bg,color:B.text}}),o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>r(!n),children:o.jsx(jr,{size:16,style:{color:B.textMuted}})})]}),n&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:B.bg,boxShadow:"var(--card-shadow)"},children:v0.map(l=>o.jsx("button",{className:"flex w-full px-4 py-3 text-left text-[13px]",style:{color:B.text},onClick:()=>{t(l),r(!1)},children:l},l))})]})}function ei({value:e,onChange:t,min:n,max:r,step:s}){const[l,a]=u.useState(String(e));u.useEffect(()=>a(String(e)),[e]);const i=()=>{let c=parseFloat(l);isNaN(c)&&(c=n),c=Math.max(n,Math.min(r,c)),c=Math.round(c/s)*s,c=parseFloat(c.toFixed(4)),a(String(c)),t(c)};return o.jsx("input",{type:"number",value:l,onChange:c=>a(c.target.value),onBlur:i,onKeyDown:c=>c.key==="Enter"&&i(),step:s,min:n,max:r,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:B.bg,color:B.text}})}function Gd({on:e,onToggle:t}){return o.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":B.bg,transition:"background 0.2s"},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function ti({children:e,className:t=""}){return o.jsx("div",{className:`rounded-[20px] p-5 mb-4 space-y-4 ${t}`,style:{background:B.bg,boxShadow:"var(--card-shadow)"},children:e})}function S0(){const e=At(),[t,n]=u.useState([]),[r,s]=u.useState([]),[l,a]=u.useState(!0),[i,c]=u.useState(""),[d,p]=u.useState(""),[f,h]=u.useState("api_key"),[x,w]=u.useState(""),[y,b]=u.useState([]),[g,m]=u.useState(!1),[v,S]=u.useState(1),[j,N]=u.useState(!1),[k,E]=u.useState(1),[T,P]=u.useState(!1),[L,oe]=u.useState(4096),[W,z]=u.useState(null),[q,he]=u.useState(0),[de,O]=u.useState(null),[K,_]=u.useState(!1),[ee,V]=u.useState(!1),[je,ye]=u.useState(""),[Ze,ve]=u.useState(!1),[X,we]=u.useState(!1),[ie,se]=u.useState(null),[Ye,be]=u.useState(null),[Me,H]=u.useState(""),U=u.useRef(null),ce=u.useRef(!1),ne=u.useRef(null),fe=u.useRef({});fe.current={baseUrl:i,apiKey:d,authType:f,modelName:x,temperature:v,tempEnabled:j,topP:k,topPEnabled:T,maxTokens:L,thinkingBudget:q,editingPreset:W,providers:t};const I=u.useCallback($=>{O($),setTimeout(()=>O(null),2500)},[]),J=u.useCallback(async()=>{try{const[$,ge]=await Promise.all([A("/api/providers"),A("/api/presets")]);n($.providers||[]),s(ge.presets||[])}catch($){I(": "+$.message)}finally{a(!1)}},[I]);u.useEffect(()=>{J()},[J]);const re=$=>{var ae,_e;z($),w($.model_name),N($.temperature!=null),S((ae=$.temperature)!=null?ae:1),P($.top_p!=null),E((_e=$.top_p)!=null?_e:1),oe($.max_tokens),he($.thinking_budget||0);const ge=t.find(ht=>ht.id===$.api_provider_id);ge&&(c(ge.base_url),p(ge.api_key),h(ge.auth_type||"api_key"))},ue=()=>{z(null),c(""),p(""),h("api_key"),w(""),S(1),N(!1),E(1),P(!1),oe(4096),he(0),b([])},Fe=async()=>{if(!i.trim()||!d.trim()){I(" API  Key");return}m(!0);try{const $=await fetch(`${i.trim().replace(/\/+$/,"")}/models`,{headers:{Authorization:`Bearer ${d.trim()}`}});if(!$.ok)throw new Error(`HTTP ${$.status}`);const ae=((await $.json()).data||[]).map(_e=>_e.id).sort();b(ae),I(ae.length?` ${ae.length} `:"")}catch($){I(": "+$.message)}finally{m(!1)}},Be=async()=>{var $;if(!i.trim()||!d.trim()||!x.trim()){I(" API Key ");return}_(!0);try{const ge=i.trim().replace(/\/+$/,""),ae={"Content-Type":"application/json",Authorization:`Bearer ${d.trim()}`};f==="oauth_token"&&(ae["anthropic-beta"]="claude-code-20250219,oauth-2025-04-20,fine-grained-tool-streaming-2025-05-14",ae["anthropic-dangerous-direct-browser-access"]="true",ae["x-app"]="cli");const _e=await fetch(`${ge}/chat/completions`,{method:"POST",headers:ae,body:JSON.stringify({model:x.trim(),max_tokens:10,messages:[{role:"user",content:"Hi"}]})});if(!_e.ok){const ht=await _e.json().catch(()=>({}));throw new Error((($=ht.error)==null?void 0:$.message)||`HTTP ${_e.status}`)}I(" ")}catch(ge){I(": "+ge.message)}finally{_(!1)}},Kt=async $=>{const ge=fe.current,ae=ge.baseUrl.trim(),_e=ge.apiKey.trim(),ht=ge.authType,gn=$.find(er=>er.base_url===ae);return gn?((gn.api_key!==_e||gn.auth_type!==ht)&&await A(`/api/providers/${gn.id}`,{method:"PUT",body:{api_key:_e,auth_type:ht}}),gn.id):(await A("/api/providers",{method:"POST",body:{name:w0(ae),base_url:ae,api_key:_e,auth_type:ht}})).id},Tn=async($,ge)=>{const ae=fe.current;if(!ae.baseUrl.trim()||!ae.apiKey.trim()||!ae.modelName.trim()){I("");return}we(!0);try{const _e=await Kt(ae.providers),ht={name:$,model_name:ae.modelName.trim(),temperature:ae.tempEnabled?ae.temperature:null,top_p:ae.topPEnabled?ae.topP:null,max_tokens:Number(ae.maxTokens)||4096,thinking_budget:Number(ae.thinkingBudget)||0,api_provider_id:_e};ae.editingPreset&&!ge?(await A(`/api/presets/${ae.editingPreset.id}`,{method:"PUT",body:ht}),I("")):(await A("/api/presets",{method:"POST",body:ht}),I("")),await J()}catch(_e){I(": "+_e.message)}finally{we(!1)}},kt=()=>{const $=je.trim();$&&(V(!1),Tn($,Ze))},Dt=()=>{W&&Tn(W.name,!1)},mn=async()=>{if(ie){try{await A(`/api/presets/${ie.id}`,{method:"DELETE"}),I(""),(W==null?void 0:W.id)===ie.id&&ue(),J()}catch($){I(": "+$.message)}se(null)}},Zn=async()=>{const $=Me.trim();if(!(!$||!Ye)){try{await A(`/api/presets/${Ye.id}`,{method:"PUT",body:{name:$}}),I(""),J()}catch(ge){I("")}be(null)}},Rt=($,ge)=>{ce.current=!1;const ae=$.touches?$.touches[0]:$;ne.current={x:ae.clientX,y:ae.clientY},U.current=setTimeout(()=>{ce.current=!0,se(ge)},600)},Ve=$=>{if(!ne.current||!U.current)return;const ge=$.touches?$.touches[0]:$,ae=ge.clientX-ne.current.x,_e=ge.clientY-ne.current.y;ae*ae+_e*_e>100&&(clearTimeout(U.current),U.current=null)},Sr=()=>clearTimeout(U.current);return o.jsxs("div",{className:"flex h-full flex-col",style:{background:B.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:B.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:B.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:B.text},children:"API "}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:l?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:B.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs(ti,{children:[o.jsx(Qd,{label:"API ",value:i,onChange:c,placeholder:"https://api.openai.com/v1",disabled:f==="oauth_token"}),o.jsx(Qd,{label:"API Key",value:d,onChange:p,placeholder:f==="oauth_token"?"sk-ant-oat01-...":"sk-...",password:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:B.textMuted},children:""}),o.jsx(b0,{value:f,onChange:$=>{h($),$==="oauth_token"&&c("https://api.anthropic.com/v1")},options:[{value:"api_key",label:" API Key"},{value:"oauth_token",label:"Setup Token"}]})]})]}),o.jsxs(ti,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:B.textMuted},children:""}),f==="oauth_token"?o.jsx(j0,{value:x,onChange:w}):o.jsx(k0,{value:x,onChange:w,options:y})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:B.bg,boxShadow:"var(--card-shadow-sm)",color:B.text},onClick:Be,disabled:K,children:[K?o.jsx(_d,{size:14,className:"animate-spin"}):null,""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:B.bg,boxShadow:"var(--card-shadow-sm)",color:B.text,opacity:f==="oauth_token"?.4:1},onClick:Fe,disabled:g||f==="oauth_token",children:[g?o.jsx(_d,{size:14,className:"animate-spin"}):o.jsx(da,{size:14}),""]})]})]}),o.jsxs(ti,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:B.text},children:" (0-2)"}),o.jsx("div",{className:"text-[11px]",style:{color:B.textMuted},children:""})]}),o.jsx(Gd,{on:j,onToggle:()=>N(!j)})]}),j&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:B.textMuted},children:""}),o.jsx(ei,{value:v,onChange:S,min:0,max:2,step:.1})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:B.text},children:"Top P (0-1)"}),o.jsx(Gd,{on:T,onToggle:()=>P(!T)})]}),T&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:B.textMuted},children:""}),o.jsx(ei,{value:k,onChange:E,min:0,max:1,step:.05})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:B.text},children:"Max Tokens"}),o.jsx(ei,{value:L,onChange:oe,min:128,max:2e5,step:1})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:B.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:B.textMuted},children:"Extended Thinking tokens"})]}),o.jsxs("select",{className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none appearance-none",style:{boxShadow:"var(--inset-shadow)",background:B.bg,color:B.text,WebkitAppearance:"none",textAlignLast:"center"},value:q,onChange:$=>he(Number($.target.value)),children:[o.jsx("option",{value:0,children:""}),o.jsx("option",{value:1024,children:"1024"}),o.jsx("option",{value:2048,children:"2048"}),o.jsx("option",{value:4096,children:"4096"}),o.jsx("option",{value:8192,children:"8192"}),o.jsx("option",{value:16384,children:"16384"})]})]})]}),o.jsxs("div",{className:"mb-4 space-y-3",children:[W?o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:Dt,disabled:X,children:[o.jsx(yl,{size:14}),X?"...":""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold",style:{background:B.bg,boxShadow:"var(--card-shadow-sm)",color:B.text},onClick:()=>{ve(!0),ye(""),V(!0)},disabled:X,children:[o.jsx(Yy,{size:14}),""]})]}):o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>{ve(!0),ye(""),V(!0)},disabled:X,children:[o.jsx(ds,{size:14}),""]}),W&&o.jsx("button",{className:"w-full py-1 text-center text-[12px]",style:{color:B.textMuted},onClick:ue,children:""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"mb-3 text-[12px] font-bold uppercase tracking-wide",style:{color:B.textMuted},children:""}),r.length===0?o.jsx("div",{className:"rounded-[20px] py-8 text-center text-[13px]",style:{background:B.bg,boxShadow:"var(--card-shadow)",color:B.textMuted},children:""}):o.jsx("div",{className:"space-y-3",children:r.map($=>{var ge,ae;return o.jsxs("div",{className:"rounded-[18px] p-4",style:{background:B.bg,boxShadow:(W==null?void 0:W.id)===$.id?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{ce.current||re($)},onTouchStart:_e=>Rt(_e,$),onTouchMove:Ve,onTouchEnd:Sr,onMouseDown:_e=>Rt(_e,$),onMouseMove:Ve,onMouseUp:Sr,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-[14px] font-bold truncate",style:{color:(W==null?void 0:W.id)===$.id?B.accentDark:B.text},children:$.name}),o.jsx(Zc,{size:12,style:{color:B.textMuted,flexShrink:0,marginLeft:8}})]}),o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:B.textMuted},children:$.model_name}),o.jsxs("div",{className:"mt-1 text-[10px] font-mono",style:{color:B.textMuted},children:["T: ",(ge=$.temperature)!=null?ge:""," | Top-P: ",(ae=$.top_p)!=null?ae:""," | Max: ",$.max_tokens,$.thinking_budget?` | Think: ${$.thinking_budget}`:""]})]},$.id)})})]})]})}),ee&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>V(!1),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:B.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:$=>$.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:B.text},children:""}),o.jsx("input",{type:"text",value:je,onChange:$=>ye($.target.value),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:B.bg,color:B.text},autoFocus:!0,onKeyDown:$=>$.key==="Enter"&&kt()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:B.bg,boxShadow:"var(--card-shadow-sm)",color:B.text},onClick:()=>V(!1),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:je.trim()?"linear-gradient(135deg, var(--accent), var(--accent-dark))":"rgba(201,98,138,0.3)"},onClick:kt,disabled:!je.trim(),children:""})]})]})}),ie&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>se(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:B.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:$=>$.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:B.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:B.textMuted},children:["",ie.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:B.bg,boxShadow:"var(--card-shadow-sm)",color:B.text},onClick:()=>se(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:mn,children:""})]})]})}),Ye&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>be(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:B.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:$=>$.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:B.text},children:""}),o.jsx("input",{autoFocus:!0,type:"text",value:Me,onChange:$=>H($.target.value),className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:B.bg,color:B.text},onKeyDown:$=>$.key==="Enter"&&Zn()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:B.bg,boxShadow:"var(--card-shadow-sm)",color:B.text},onClick:()=>be(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))"},onClick:Zn,children:""})]})]})}),de&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:de})})]})}const Ke={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Yl({on:e,onToggle:t,disabled:n}){return o.jsx("button",{onClick:()=>!n&&t(),className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":Ke.bg,transition:"background 0.2s",opacity:n?.4:1,cursor:n?"not-allowed":"pointer"},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function Cs({label:e,hint:t,value:n,onChange:r,min:s,max:l,step:a=1,disabled:i}){const[c,d]=u.useState(String(n));u.useEffect(()=>d(String(n)),[n]);const p=()=>{let f=parseFloat(c);isNaN(f)&&(f=s),f=Math.max(s,Math.min(l,f)),f=Math.round(f/a)*a,f=parseFloat(f.toFixed(a<1?1:0)),d(String(f)),r(f)};return o.jsxs("div",{className:"flex items-center justify-between",style:{opacity:i?.4:1,pointerEvents:i?"none":"auto"},children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ke.text},children:e}),t&&o.jsx("div",{className:"text-[11px]",style:{color:Ke.textMuted},children:t})]}),o.jsx("input",{type:"number",value:c,onChange:f=>d(f.target.value),onBlur:p,onKeyDown:f=>f.key==="Enter"&&p(),step:a,min:s,max:l,disabled:i,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ke.bg,color:Ke.text}})]})}function Kl({children:e}){return o.jsx("div",{className:"rounded-[20px] p-5 mb-4 space-y-4",style:{background:Ke.bg,boxShadow:"var(--card-shadow)"},children:e})}function Ql(){return o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}})}function N0(){const e=At(),[t,n]=u.useState(!0),[r,s]=u.useState(!1),[l,a]=u.useState({enabled:!1,random_mode:!1,interval:30,min_gap:30,retry_enabled:!0,retry_gap:1.5,max_retries:8,voice_enabled:!1,voice_chance:30}),[i,c]=u.useState(null),d=u.useCallback(w=>{c(w),setTimeout(()=>c(null),2e3)},[]);u.useEffect(()=>{(async()=>{try{const w=await A("/api/settings/proactive");a(w)}catch(w){d(": "+w.message)}finally{n(!1)}})()},[d]);const p=async()=>{s(!0);try{await A("/api/settings/proactive",{method:"PUT",body:l}),d("")}catch(w){d(": "+w.message)}finally{s(!1)}},f=w=>a(y=>({...y,...w})),h=!l.enabled,x=l.random_mode&&l.enabled;return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ke.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ke.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:Ke.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ke.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ke.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:p,disabled:r,children:o.jsx(yl,{size:18,style:{color:Ke.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:t?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ke.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs(Kl,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:Ke.text},children:""}),o.jsx(Yl,{on:l.enabled,onToggle:()=>f({enabled:!l.enabled})})]}),l.enabled&&o.jsxs(o.Fragment,{children:[o.jsx(Ql,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ke.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:Ke.textMuted},children:""})]}),o.jsx(Yl,{on:l.random_mode,onToggle:()=>f({random_mode:!l.random_mode})})]})]})]}),o.jsxs(Kl,{children:[o.jsx(Cs,{label:" ()",hint:" (10-60)",value:x?10:l.interval,onChange:w=>f({interval:w}),min:10,max:60,disabled:h||x}),o.jsx(Ql,{}),o.jsx(Cs,{label:" ()",hint:" (15-120)",value:l.min_gap,onChange:w=>f({min_gap:w}),min:15,max:120,disabled:h||x})]}),o.jsxs(Kl,{children:[o.jsxs("div",{className:"flex items-center justify-between",style:{opacity:h?.4:1,pointerEvents:h?"none":"auto"},children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ke.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:Ke.textMuted},children:" = "})]}),o.jsx(Yl,{on:l.retry_enabled,onToggle:()=>f({retry_enabled:!l.retry_enabled}),disabled:h})]}),l.retry_enabled&&!h&&o.jsxs(o.Fragment,{children:[o.jsx(Ql,{}),o.jsx(Cs,{label:" ()",hint:"0.5-4.0",value:l.retry_gap,onChange:w=>f({retry_gap:w}),min:.5,max:4,step:.1,disabled:x}),o.jsx(Cs,{label:"",hint:"1-15",value:l.max_retries,onChange:w=>f({max_retries:w}),min:1,max:15})]})]}),o.jsxs(Kl,{children:[o.jsxs("div",{className:"flex items-center justify-between",style:{opacity:h?.4:1,pointerEvents:h?"none":"auto"},children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ke.text},children:""}),o.jsx(Yl,{on:l.voice_enabled,onToggle:()=>f({voice_enabled:!l.voice_enabled}),disabled:h})]}),l.voice_enabled&&!h&&o.jsxs(o.Fragment,{children:[o.jsx(Ql,{}),o.jsx(Cs,{label:" (%)",hint:"0-100",value:l.voice_chance,onChange:w=>f({voice_chance:w}),min:0,max:100})]})]})]})}),i&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const pe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},va={thinking:{bg:"rgba(168,130,200,0.12)",color:"#8860c8",label:""},tool_use:{bg:"rgba(232,160,60,0.12)",color:"#b8820a",label:""},tool_result:{bg:"rgba(80,160,200,0.12)",color:"#1a7ab0",label:""},injected_memories:{bg:"rgba(80,180,120,0.12)",color:"#3a8a5f",label:""}},qd=[{key:"short",label:""},{key:"long",label:""}],C0=[{key:"happy",label:""},{key:"sad",label:""},{key:"angry",label:""},{key:"anxious",label:""},{key:"tired",label:""},{key:"emo",label:""},{key:"flirty",label:""},{key:"proud",label:""},{key:"calm",label:""}],Jd=300;function au({block_type:e}){const t=va[e]||{bg:"rgba(136,136,160,0.1)",color:pe.textMuted,label:e};return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:t.bg,color:t.color},children:t.label})}function px({content:e}){const[t,n]=u.useState(!1),r=e.length>Jd;return o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:pe.text},children:r&&!t?e.slice(0,Jd)+"...":e}),r&&o.jsx("div",{className:"mt-1.5 flex justify-center",children:o.jsx("button",{className:"rounded-full px-3 py-0.5 text-[11px]",style:{color:pe.accentDark,background:"rgba(232,160,191,0.12)"},onClick:s=>{s.stopPropagation(),n(!t)},children:t?"":""})})]})}function E0({block:e,cacheKey:t,translateCache:n}){const r=n.current.get(t),[s,l]=u.useState(r||null),[a,i]=u.useState(!!r),[c,d]=u.useState(!1),p=va.thinking,f=async h=>{if(h.stopPropagation(),s){i(!a);return}d(!0);try{const x=await A("/api/cot/translate",{method:"POST",body:{text:e.content}});l(x.translated),i(!0),n.current.set(t,x.translated)}catch(x){console.error("Translation failed:",x),alert("")}finally{d(!1)}};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:p.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(au,{block_type:"thinking"}),o.jsx("span",{className:"flex-1"}),o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#1a7ab0",background:"rgba(80,160,200,0.15)"},onClick:f,disabled:c,children:c?"...":a?"":""})]}),o.jsx(px,{content:a&&s?s:e.content})]})}function M0({avatarUrl:e}){return o.jsx("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full overflow-hidden",style:{boxShadow:"var(--icon-inset)",background:pe.bg},children:e?o.jsx("img",{src:e,alt:"",className:"h-full w-full object-cover"}):o.jsx("span",{style:{fontSize:16},children:""})})}function Zd(e){return e?e>=1e3?`${(e/1e3).toFixed(1)}k`:String(e):"0"}function _0(e){if(!e)return null;const t=e/1e3;return t>=100?`${Math.round(t)}s`:`${t.toFixed(1)}s`}function T0({prompt:e,completion:t,elapsedMs:n,hasToolCalls:r,cacheHit:s}){if(!(e||t||n)&&!r)return null;const a=s?"rgba(220,120,160,0.12)":"rgba(80,160,120,0.12)",i=s?"#d478a0":"#3a8a5f";return o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:a,color:i},children:["",Zd(e)]}),o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(160,100,220,0.12)",color:"#8a5abf"},children:["",Zd(t)]}),n?o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(200,140,60,0.12)",color:"#b8820a"},children:_0(n)}):null]})}function D0(e){const t=[],n=[],r=[],s=[];for(const a of e)a.block_type==="thinking"?t.push(a):a.block_type==="tool_use"?n.push(a):a.block_type==="tool_result"?r.push(a):s.push(a);const l=[];for(let a=0;a<n.length;a++)l.push(n[a]),a<r.length&&l.push(r[a]);for(let a=n.length;a<r.length;a++)l.push(r[a]);return[...t,...l,...s]}function R0({memories:e}){const[t,n]=u.useState(!1);if(!e||e.length===0)return null;const r=va.injected_memories;return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:r.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-2",onClick:()=>n(!t),children:[o.jsx(au,{block_type:"injected_memories"}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:r.color},children:["(",e.length,")"]}),t?o.jsx(Dh,{size:12,style:{color:r.color}}):o.jsx(jr,{size:12,style:{color:r.color}})]}),t&&o.jsx("div",{className:"mt-2 space-y-1",children:e.map(s=>o.jsxs("p",{className:"text-[11px] leading-relaxed",style:{color:pe.text},children:[o.jsxs("span",{style:{color:r.color,fontWeight:600},children:["#",s.id]})," ",s.content]},s.id))})]})}function P0({item:e,expanded:t,onToggle:n,live:r,avatarUrl:s,translateCache:l}){const a=e.rounds.map(c=>({...c,blocks:D0(c.blocks.filter(d=>d.block_type!=="text"&&d.block_type!=="usage"))})).filter(c=>c.blocks.length>0),i=a.length>0||e.injectedMemories&&e.injectedMemories.length>0||r&&e.textPreview;return o.jsxs("div",{className:"rounded-[18px] overflow-hidden",style:{background:pe.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-3 p-4",onClick:n,children:[o.jsx(M0,{avatarUrl:s}),o.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r&&o.jsx("span",{className:"inline-block h-3 w-3 animate-spin rounded-full border-[1.5px]",style:{borderColor:pe.accentDark,borderTopColor:"transparent"}}),e.has_tool_calls&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold",style:{background:"rgba(232,160,60,0.15)",color:"#b8820a"},children:""}),o.jsx(T0,{prompt:e.prompt_tokens||0,completion:e.completion_tokens||0,elapsedMs:e.elapsed_ms||0,hasToolCalls:e.has_tool_calls,cacheHit:e.cache_hit}),o.jsx("span",{className:"text-[10px]",style:{color:pe.textMuted},children:e.created_at||""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[13px]",style:{color:pe.text},children:e.preview||"()"})]}),t?o.jsx(Dh,{size:16,style:{color:pe.textMuted,flexShrink:0}}):o.jsx(jr,{size:16,style:{color:pe.textMuted,flexShrink:0}})]}),t&&i&&o.jsxs("div",{className:"px-4 pb-4",children:[o.jsx(R0,{memories:e.injectedMemories}),a.map(c=>o.jsxs("div",{className:"mb-3",children:[a.length>1&&o.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:pe.textMuted},children:[" ",c.round_index+1]}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}})]}),c.blocks.map((d,p)=>{if(d.block_type==="thinking")return o.jsx(E0,{block:d,cacheKey:`${e.request_id}:${c.round_index}:${p}`,translateCache:l},p);const f=va[d.block_type]||{bg:"rgba(136,136,160,0.08)",color:pe.textMuted,label:d.block_type};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:f.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(au,{block_type:d.block_type}),d.tool_name&&o.jsx("span",{className:"text-[10px] font-mono",style:{color:f.color},children:d.tool_name})]}),o.jsx(px,{content:d.content})]},p)})]},c.round_index)),r&&e.textPreview&&o.jsxs("div",{className:"rounded-[12px] p-3",style:{background:"rgba(232,160,191,0.08)"},children:[o.jsx("div",{className:"mb-1",children:o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(232,160,191,0.15)",color:pe.accentDark},children:""})}),o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:pe.text},children:e.textPreview})]})]})]})}function z0(){var K;const e=At(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[l,a]=u.useState(new Set),[i,c]=u.useState(()=>localStorage.getItem("chat_mode")||"long"),[d,p]=u.useState(null),[f,h]=u.useState(!1),[x,w]=u.useState(new Set),[y,b]=u.useState(null),[g,m]=u.useState(null),v=u.useRef(null),S=u.useRef(new Map),[j,N]=u.useState(null),[k,E]=u.useState(!1),T=u.useRef(null),P=u.useRef(new Set),L=u.useRef(!1),oe=u.useRef([]),[W,z]=u.useState(()=>localStorage.getItem("whisper_token")),q=u.useRef(null),he=()=>{s(!0),b(null),L.current=!1,A("/api/cot?limit=100").then(_=>{n(Array.isArray(_)?_:[]),L.current=!0;const ee=oe.current;if(oe.current=[],ee.length>0&&q.current)for(const V of ee)q.current(V)}).catch(_=>{console.error("COT load error:",_),b(_.message||""),L.current=!0}).finally(()=>{s(!1);const _=localStorage.getItem("whisper_token");_&&_!==W&&z(_)})};u.useEffect(()=>{he()},[]),u.useEffect(()=>{A("/api/sessions?limit=1").then(_=>{var V;const ee=(V=_.sessions)==null?void 0:V[0];ee!=null&&ee.assistant_id&&ps(`assistant-avatar-${ee.assistant_id}`).then(je=>{je&&m(je)}).catch(()=>{})}).catch(()=>{})},[]),u.useEffect(()=>{A("/api/settings/mood").then(_=>N(_.mood||"calm")).catch(()=>N("calm"))},[]),u.useEffect(()=>{if(!k)return;const _=ee=>{T.current&&!T.current.contains(ee.target)&&E(!1)};return document.addEventListener("pointerdown",_),()=>document.removeEventListener("pointerdown",_)},[k]),u.useEffect(()=>{if(!W){console.log("[COT WS] No token yet, waiting...");return}const ee=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/cot?token=${encodeURIComponent(W)}`;console.log("[COT WS] Connecting to",ee);let V,je,ye=!1;const Ze=()=>{if(ye)return;V=new WebSocket(ee),v.current=V,V.onopen=()=>{console.log("[COT WS] Connected"),h(!0)};const ve=X=>{var Me;const{type:we,request_id:ie}=X,se=H=>{const U=H.findIndex(I=>I.request_id===ie);return U>=0?[H,U]:[[{request_id:ie,created_at:new Date().toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),preview:"...",has_tool_calls:!1,rounds:[],injectedMemories:[],textPreview:""},...H],0]},Ye=(H,U)=>{const ce=H.findIndex(fe=>fe.round_index===U);if(ce>=0)return[H,ce];const ne=[...H,{round_index:U,blocks:[]}];return ne.sort((fe,I)=>fe.round_index-I.round_index),[ne,ne.findIndex(fe=>fe.round_index===U)]},be=H=>{P.current.has(H)||a(U=>{if(U.has(H))return U;const ce=new Set(U);return ce.add(H),ce})};if(we==="tokens_update"){n(H=>H.map(U=>U.request_id===ie?{...U,prompt_tokens:X.prompt_tokens||0,completion_tokens:X.completion_tokens||0,cache_hit:X.cache_hit||!1}:U));return}if(we==="replay_snapshot"){console.log("[COT] replay_snapshot",ie,"thinking_rounds:",(Me=X.rounds)==null?void 0:Me.length,"text_len:",(X.text_preview||"").length),n(H=>{let[U,ce]=se(H);U=[...U];const ne={...U[ce]};if(X.rounds)for(const fe of X.rounds){if(!fe.thinking)continue;let[I,J]=Ye([...ne.rounds],fe.round_index);const re={...I[J],blocks:[...I[J].blocks]},ue=re.blocks.findIndex(Fe=>Fe.block_type==="thinking");ue>=0?fe.thinking.length>re.blocks[ue].content.length&&(re.blocks[ue]={...re.blocks[ue],content:fe.thinking}):re.blocks.push({block_type:"thinking",content:fe.thinking,tool_name:null}),I[J]=re,ne.rounds=I}return X.text_preview&&X.text_preview.length>(ne.textPreview||"").length&&(ne.textPreview=X.text_preview,(!ne.preview||ne.preview==="...")&&(ne.preview=X.text_preview.slice(0,80))),X.injected_memories&&(ne.injectedMemories=X.injected_memories),X.prompt_tokens&&(ne.prompt_tokens=X.prompt_tokens),X.completion_tokens&&(ne.completion_tokens=X.completion_tokens),X.cache_hit&&(ne.cache_hit=X.cache_hit),U[ce]=ne,U}),w(H=>new Set(H).add(ie)),be(ie);return}if(we==="done"){w(H=>{const U=new Set(H);return U.delete(ie),U}),P.current.delete(ie),n(H=>H.map(U=>U.request_id===ie?{...U,prompt_tokens:X.prompt_tokens||0,completion_tokens:X.completion_tokens||0,elapsed_ms:X.elapsed_ms||0,cache_hit:X.cache_hit||!1,textPreview:""}:U));return}if(we==="injected_memories"){n(H=>{let[U,ce]=se(H);return U=[...U],U[ce]={...U[ce],injectedMemories:X.memories||[]},U}),w(H=>new Set(H).add(ie)),be(ie);return}if(we==="thinking_delta"){n(H=>{let[U,ce]=se(H);U=[...U];const ne={...U[ce]};let[fe,I]=Ye([...ne.rounds],X.round_index);const J={...fe[I],blocks:[...fe[I].blocks]};let re=-1;for(let ue=J.blocks.length-1;ue>=0;ue--)if(J.blocks[ue].block_type==="thinking"){re=ue;break}return re>=0?J.blocks[re]={...J.blocks[re],content:J.blocks[re].content+X.content}:J.blocks.push({block_type:"thinking",content:X.content,tool_name:null}),fe[I]=J,ne.rounds=fe,U[ce]=ne,U}),w(H=>new Set(H).add(ie)),be(ie);return}if(we==="text_delta"){n(H=>{let[U,ce]=se(H);U=[...U];const ne={...U[ce]};return ne.textPreview=(ne.textPreview||"")+X.content,(!ne.preview||ne.preview==="...")&&(ne.preview=ne.textPreview.slice(0,80)),U[ce]=ne,U}),w(H=>new Set(H).add(ie)),be(ie);return}if(we==="tool_use"||we==="tool_result"){n(H=>{let[U,ce]=se(H);U=[...U];const ne={...U[ce]};let[fe,I]=Ye([...ne.rounds],X.round_index);return fe[I]={...fe[I],blocks:[...fe[I].blocks,{block_type:we,content:X.content,tool_name:X.tool_name}]},ne.rounds=fe,we==="tool_use"&&(ne.has_tool_calls=!0),U[ce]=ne,U}),w(H=>new Set(H).add(ie)),be(ie);return}if(X.block_type){const{round_index:H,block_type:U,content:ce,tool_name:ne}=X;n(fe=>{let[I,J]=se(fe);I=[...I];const re={...I[J]};let[ue,Fe]=Ye([...re.rounds],H);return ue[Fe]={...ue[Fe],blocks:[...ue[Fe].blocks,{block_type:U,content:ce,tool_name:ne}]},re.rounds=ue,U==="tool_use"&&(re.has_tool_calls=!0),U==="text"&&(!re.preview||re.preview==="...")&&(re.preview=ce.slice(0,80)),I[J]=re,I}),w(fe=>new Set(fe).add(ie)),be(ie)}};q.current=ve,V.onmessage=X=>{try{const we=JSON.parse(X.data);if(!L.current){oe.current.push(we);return}ve(we)}catch(we){}},V.onclose=X=>{console.log("[COT WS] Disconnected, code:",X.code,"reason:",X.reason),h(!1),v.current=null,ye||(je=setTimeout(Ze,3e3))},V.onerror=X=>{console.error("[COT WS] Error:",X),V.close()}};return Ze(),()=>{ye=!0,clearTimeout(je),v.current&&(v.current.onclose=null,v.current.close())}},[W]);const de=u.useRef(!0);u.useEffect(()=>{if(de.current){de.current=!1;return}localStorage.setItem("chat_mode",i);const _=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({..._,shortMode:i==="short"})),A("/api/settings/chat-mode",{method:"PUT",body:{mode:i}}).catch(()=>{})},[i]);const O=_=>{N(_),E(!1),A("/api/settings/mood",{method:"PUT",body:{mood:_}}).catch(()=>{})};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:pe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:pe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:pe.text},children:"COT "}),o.jsxs("div",{className:"flex items-center gap-2",children:[f&&o.jsx("div",{className:"h-2 w-2 rounded-full",style:{background:"#2a9d5c"},title:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:pe.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:he,disabled:r,children:o.jsx(da,{size:16,style:{color:pe.accentDark},className:r?"animate-spin":""})})]})]}),o.jsx("div",{className:"shrink-0 pb-3",style:{paddingLeft:20,paddingRight:20},children:o.jsxs("div",{className:"flex items-stretch gap-4 justify-center",children:[o.jsxs("div",{className:"relative flex",ref:T,children:[o.jsx("button",{className:"flex w-[42px] shrink-0 items-center justify-center rounded-[14px]",style:{background:pe.bg,boxShadow:"var(--inset-shadow)"},onClick:()=>j&&E(!k),children:j?o.jsx("img",{src:`/miniapp/assets/mood/${j}.png`,alt:j,className:"h-6 w-6",style:{imageRendering:"pixelated"}}):o.jsx("div",{className:"h-6 w-6"})}),k&&o.jsx("div",{className:"absolute left-0 top-12 z-50 rounded-[16px] overflow-hidden",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)",width:174},children:C0.map((_,ee)=>{const V=Math.floor(ee/3),je=ee%3,ye=j===_.key;return o.jsxs("button",{className:"inline-flex flex-col items-center justify-center",style:{width:"calc(100% / 3)",padding:"8px 0 6px",background:ye?"rgba(232,160,191,0.18)":"transparent",boxShadow:[je<2?"inset -1px 0 0 rgba(136,136,160,0.12)":"",V<2?"inset 0 -1px 0 rgba(136,136,160,0.12)":""].filter(Boolean).join(", ")||"none"},onClick:()=>O(_.key),children:[o.jsx("img",{src:`/miniapp/assets/mood/${_.key}.png`,alt:_.label,className:"h-7 w-7",style:{imageRendering:"pixelated",filter:ye?"drop-shadow(0 0 3px #e8a0bf)":"none"}}),o.jsx("span",{className:"text-[10px] mt-0.5",style:{color:ye?"#d48aab":pe.textMuted},children:_.label})]},_.key)})})]}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:pe.bg,width:160},children:qd.map(_=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:i===_.key?pe.bg:"transparent",boxShadow:i===_.key?"var(--card-shadow-sm)":"none",color:i===_.key?pe.accentDark:pe.textMuted},onClick:()=>{_.key!==i&&p(_.key)},children:_.label},_.key))})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8 pt-5",children:r?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:pe.accent,borderTopColor:"transparent"}})}):y?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(Md,{size:36,style:{color:"#ef4444",opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:"#ef4444"},children:y})]}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(Md,{size:36,style:{color:pe.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:pe.textMuted},children:" COT "})]}):t.map(_=>o.jsx("div",{className:"mb-3 rounded-[18px]",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)"},children:o.jsx(P0,{item:_,expanded:l.has(_.request_id),onToggle:()=>{a(ee=>{const V=new Set(ee);return V.has(_.request_id)?(V.delete(_.request_id),P.current.add(_.request_id)):(V.add(_.request_id),P.current.delete(_.request_id)),V})},live:x.has(_.request_id),avatarUrl:g,translateCache:S})},_.request_id))}),d&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>p(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:pe.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:_=>_.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:pe.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:pe.textMuted},children:["",((K=qd.find(_=>_.key===d))==null?void 0:K.label)||d,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)",color:pe.text},onClick:()=>p(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:pe.accentDark,boxShadow:"4px 4px 10px rgba(201,98,138,0.4)"},onClick:()=>{c(d),p(null)},children:""})]})]})})]})}const tt={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Gl=80;function I0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Gl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Gl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Gl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Gl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:tt.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(fs,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function L0({msg:e,roleLabel:t,roleColor:n,fmtTime:r,onDelete:s}){const[l,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);return u.useLayoutEffect(()=>{const p=d.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e.content,l]),o.jsx(I0,{onDelete:s,children:o.jsxs("div",{className:"rounded-[18px] p-3",style:{background:tt.bg},children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:n(e.role)},children:t(e.role)}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[e.summarized&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px] font-semibold",style:{background:"rgba(58,138,95,0.15)",color:"#2d7a4a"},children:""}),o.jsx("span",{className:"text-[10px]",style:{color:tt.textMuted},children:r(e.created_at)})]})]}),o.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:tt.text}:{color:tt.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:e.content}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:"#d48aab",background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})})]})})}function O0(){const e=At(),[t,n]=u.useState([]),[r,s]=u.useState(null),[l,a]=u.useState(!0),[i,c]=u.useState(!1),d=async()=>{var y;a(!0);try{const g=(y=(await A("/api/sessions?limit=1")).sessions)==null?void 0:y[0];if(!g){a(!1);return}s(g.id);const m=await A(`/api/sessions/${g.id}/messages?limit=50`);n((m.messages||[]).reverse()),c(m.has_more||!1)}catch(b){console.error(b)}a(!1)};u.useEffect(()=>{d()},[]);const p=async y=>{if(r)try{await A(`/api/sessions/${r}/messages/${y}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==y))}catch(b){console.error("Delete failed",b)}},f=async()=>{if(!r||!i||l)return;const y=t[t.length-1];if(y){a(!0);try{const b=await A(`/api/sessions/${r}/messages?limit=50&before_id=${y.id}`),g=(b.messages||[]).reverse();n(m=>[...m,...g]),c(b.has_more||!1)}catch(b){console.error(b)}a(!1)}},h=y=>{if(!y)return"";const b=new Date(y),g=new Date;return b.toDateString()===g.toDateString()?b.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):b.toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})},x=y=>y==="user"?"":y==="assistant"?"AI":"",w=y=>y==="user"?tt.accentDark:y==="assistant"?"#3a9b5c":tt.textMuted;return o.jsxs("div",{className:"flex h-full flex-col",style:{background:tt.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:tt.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:tt.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:tt.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:tt.bg,boxShadow:l?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:d,disabled:l,children:o.jsx(da,{size:16,style:{color:tt.accentDark},className:l?"animate-spin":""})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("p",{className:"text-[11px]",style:{color:tt.textMuted},children:""})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l&&t.length===0?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:tt.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:tt.textMuted},children:""}):o.jsxs(o.Fragment,{children:[t.map(y=>o.jsx(L0,{msg:y,roleLabel:x,roleColor:w,fmtTime:h,onDelete:()=>p(y.id)},y.id)),i&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:tt.bg,boxShadow:"var(--card-shadow-sm)",color:tt.accentDark},onClick:f,disabled:l,children:l?"...":""})]})})]})}const D={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},$0=[{key:"memories",label:""},{key:"summaries",label:""},{key:"messages",label:""}],ef={identity:{color:"#7b5ea7",bg:"#ede4f7"},relationship:{color:"#c26a8a",bg:"#f7e0ea"},bond:{color:"#d48aab",bg:"#fce8f0"},conflict:{color:"#b5454a",bg:"#f5dede"},fact:{color:"#4a8ab5",bg:"#deedf5"},preference:{color:"#9b7a3b",bg:"#f0ebd8"},health:{color:"#4a9b6e",bg:"#ddf0e5"},task:{color:"#6b7b9b",bg:"#e0e6f0"},ephemeral:{color:"#9b9b9b",bg:"#ececec"},other:{color:"#8a7a6a",bg:"#efe8df"}},hx=[{value:"",label:""},{value:"identity",label:"identity"},{value:"relationship",label:"relationship"},{value:"bond",label:"bond"},{value:"conflict",label:"conflict"},{value:"fact",label:"fact"},{value:"preference",label:"preference"},{value:"health",label:"health"},{value:"task",label:"task"},{value:"ephemeral",label:"ephemeral"},{value:"other",label:"other"}],A0=[{value:"",label:""},{value:"sad",label:"sad"},{value:"angry",label:"angry"},{value:"anxious",label:"anxious"},{value:"tired",label:"tired"},{value:"emo",label:"emo"},{value:"happy",label:"happy"},{value:"flirty",label:"flirty"},{value:"proud",label:"proud"},{value:"calm",label:"calm"}],F0=[{value:"",label:""},{value:"user",label:""},{value:"assistant",label:""},{value:"system",label:""}];function or(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function iu({text:e,keyword:t}){if(!t||!e)return o.jsx(o.Fragment,{children:e});const n=e.toLowerCase(),r=t.toLowerCase(),s=[];let l=0,a=n.indexOf(r,l);for(;a!==-1;)a>l&&s.push(o.jsx("span",{children:e.slice(l,a)},l)),s.push(o.jsx("span",{style:{color:D.accentDark,fontWeight:600},children:e.slice(a,a+r.length)},`h${a}`)),l=a+r.length,a=n.indexOf(r,l);return l<e.length&&s.push(o.jsx("span",{children:e.slice(l)},l)),o.jsx(o.Fragment,{children:s})}function xx({selected:e}){return o.jsx("div",{className:"flex h-5 w-5 shrink-0 items-center justify-center rounded-full",style:e?{background:D.accentDark,boxShadow:"0 2px 6px rgba(201,98,138,0.3)"}:{background:D.bg,boxShadow:"var(--inset-shadow)"},children:e&&o.jsx(yr,{size:12,color:"white",strokeWidth:3})})}function B0({title:e="",message:t,confirmLabel:n="",confirmColor:r="#ff4d6d",onConfirm:s,onCancel:l}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:l,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:D.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:a=>a.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:D.text},children:e}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:D.textMuted},children:t}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.text},onClick:l,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:r,boxShadow:`4px 4px 10px ${r}66`},onClick:s,children:n})]})]})})}function tf({initialText:e,onSave:t,onCancel:n,memoryData:r}){var h;const[s,l]=u.useState(e),[a,i]=u.useState((r==null?void 0:r.klass)||"other"),[c,d]=u.useState((((h=r==null?void 0:r.tags)==null?void 0:h.topic)||[]).join(", ")),p=!!r,f=hx.filter(x=>x.value);return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-5 w-full max-w-[340px] rounded-[18px] p-4",style:{background:D.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:x=>x.stopPropagation(),children:[o.jsx("textarea",{className:"w-full rounded-[12px] p-3 text-[12px] leading-relaxed resize-none outline-none",style:{background:D.bg,boxShadow:"var(--inset-shadow)",color:D.text,minHeight:p?100:140,maxHeight:280},value:s,onChange:x=>l(x.target.value),autoFocus:!0}),p&&o.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:D.textMuted},children:""}),o.jsxs("div",{className:"relative flex-1",children:[o.jsx("select",{className:"w-full appearance-none rounded-[10px] px-3 py-1.5 text-[11px] font-medium outline-none",style:{background:D.bg,boxShadow:"var(--inset-shadow)",color:D.text,WebkitAppearance:"none"},value:a,onChange:x=>i(x.target.value),children:f.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))}),o.jsx(jr,{size:10,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2",style:{color:D.textMuted}})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:D.textMuted},children:""}),o.jsx("input",{className:"flex-1 rounded-[10px] px-3 py-1.5 text-[11px] outline-none",style:{background:D.bg,boxShadow:"var(--inset-shadow)",color:D.text},placeholder:", ",value:c,onChange:x=>d(x.target.value)})]})]}),o.jsxs("div",{className:"mt-3 flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.textMuted},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.accentDark},onClick:()=>{if(p){const x=c.split(/[,]/).map(w=>w.trim()).filter(Boolean);t(s,a,{topic:x})}else t(s)},disabled:!s.trim(),children:""})]})]})})}function nf({value:e,rawValue:t,onChange:n,options:r,width:s,active:l}){var p;const[a,i]=u.useState(!1),c=u.useRef(null);u.useEffect(()=>{if(!a)return;const f=h=>{c.current&&!c.current.contains(h.target)&&i(!1)};return document.addEventListener("mousedown",f),document.addEventListener("touchstart",f),()=>{document.removeEventListener("mousedown",f),document.removeEventListener("touchstart",f)}},[a]);const d=((p=r.find(f=>f.value===String(t)))==null?void 0:p.label)||e||"";return o.jsxs("div",{className:"relative",style:{width:s},ref:c,children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[12px] px-2.5 py-2 text-[11px] font-medium text-left",style:{boxShadow:"var(--card-shadow-sm)",background:D.bg,color:l?D.accentDark:D.text},onClick:()=>i(!a),children:[o.jsx("span",{className:"truncate flex-1",children:d}),o.jsx(jr,{size:10,style:{color:D.textMuted,flexShrink:0,marginLeft:2,transform:a?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),a&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[12px]",style:{background:D.bg,boxShadow:"var(--card-shadow)"},children:r.map(f=>o.jsxs("button",{className:"flex w-full items-center justify-between px-3 py-2 text-[11px]",style:{color:D.text},onClick:()=>{n(f.value),i(!1)},children:[o.jsx("span",{className:"truncate",children:f.label}),String(t)===f.value&&o.jsx(yr,{size:10,style:{color:D.accentDark,flexShrink:0}})]},f.value))})]})}function rf({children:e,time:t,badge:n,keyword:r,onEdit:s,selectMode:l,selected:a,onToggle:i,onLongPress:c}){const[d,p]=u.useState(!1),[f,h]=u.useState(!1),x=u.useRef(null),w=typeof e=="string"?e:"",y=u.useRef(null),b=u.useRef(!1),g=u.useRef(null);u.useLayoutEffect(()=>{const N=x.current;N&&!d&&h(N.scrollHeight>N.clientHeight+1)},[w,d]);const m=N=>{if(l)return;const k=N.touches[0];g.current={x:k.clientX,y:k.clientY},b.current=!1,y.current=setTimeout(()=>{b.current=!0,c==null||c()},600)},v=N=>{if(!g.current||!y.current)return;const k=N.touches[0],E=k.clientX-g.current.x,T=k.clientY-g.current.y;E*E+T*T>100&&(clearTimeout(y.current),y.current=null)},S=()=>{clearTimeout(y.current)},j=()=>{if(!b.current&&l){i==null||i();return}};return o.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:m,onTouchMove:v,onTouchEnd:S,onTouchCancel:S,onClick:j,children:[l&&o.jsx("div",{className:"mt-1",children:o.jsx(xx,{selected:a})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between gap-1",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[n,o.jsx("div",{ref:x,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:d?{color:D.text}:{color:D.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:N=>{l||(N.stopPropagation(),p(!d))},children:o.jsx(iu,{text:w,keyword:r})})]}),!l&&s&&o.jsx("button",{className:"mt-0.5 flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},onClick:N=>{N.stopPropagation(),s()},children:o.jsx(Zc,{size:11,style:{color:D.accentDark}})})]}),o.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:D.textMuted},children:t||""}),!l&&(f||d)&&o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:D.accentDark,background:"rgba(232,160,191,0.1)"},onClick:N=>{N.stopPropagation(),p(!d)},children:d?"":""})]})]})]})}function U0({content:e,deletedAt:t,keyword:n,onRestore:r,onPermanentDelete:s}){const[l,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);return u.useLayoutEffect(()=>{const p=d.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e,l]),o.jsxs("div",{className:"mb-2 rounded-[14px] p-3",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",opacity:.75},children:[o.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:D.text}:{color:D.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:o.jsx(iu,{text:e,keyword:n})}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:D.accentDark,background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:D.textMuted},children:t?(()=>{const p=Math.max(0,30-Math.floor((Date.now()-new Date(t).getTime())/864e5));return` ${or(t)}  ${p}`})():""}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(59,130,246,0.1)",color:"#3b82f6"},onClick:r,children:""}),o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(239,68,68,0.1)",color:"#ef4444"},onClick:s,children:""})]})]})]})}function H0({msg:e,keyword:t,roleLabel:n,roleColor:r,selectMode:s,selected:l,onToggle:a,onLongPress:i}){const[c,d]=u.useState(!1),[p,f]=u.useState(!1),h=u.useRef(null),x=u.useRef(null),w=u.useRef(!1),y=u.useRef(null);u.useLayoutEffect(()=>{const S=h.current;S&&!c&&f(S.scrollHeight>S.clientHeight+1)},[e.content,c]);const b=S=>{if(s)return;const j=S.touches[0];y.current={x:j.clientX,y:j.clientY},w.current=!1,x.current=setTimeout(()=>{w.current=!0,i==null||i()},600)},g=S=>{if(!y.current||!x.current)return;const j=S.touches[0],N=j.clientX-y.current.x,k=j.clientY-y.current.y;N*N+k*k>100&&(clearTimeout(x.current),x.current=null)},m=()=>{clearTimeout(x.current)},v=()=>{if(!w.current&&s){a==null||a();return}};return o.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:b,onTouchMove:g,onTouchEnd:m,onTouchCancel:m,onClick:v,children:[s&&o.jsx("div",{className:"mt-1",children:o.jsx(xx,{selected:l})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:r(e.role)},children:n(e.role)}),e.summary_group_id&&o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-medium",style:{background:"rgba(74,138,181,0.1)",color:"#4a8ab5"},children:["",e.summary_group_id]})]}),o.jsx("span",{className:"text-[10px]",style:{color:D.textMuted},children:or(e.created_at)})]}),o.jsx("div",{ref:h,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:c?{color:D.text}:{color:D.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:S=>{s||(S.stopPropagation(),d(!c))},children:o.jsx(iu,{text:e.content,keyword:t})}),!s&&(p||c)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:D.accentDark,background:"rgba(232,160,191,0.1)"},onClick:S=>{S.stopPropagation(),d(!c)},children:c?"":""})})]})]})}function W0(){var Mr;const e=At(),[t,n]=u.useState("memories"),[r,s]=u.useState(!1),[l,a]=u.useState(!1),[i,c]=u.useState(null),[d,p]=u.useState([]),[f,h]=u.useState(null),[x,w]=u.useState(""),[y,b]=u.useState(null),[g,m]=u.useState(null),[v,S]=u.useState(""),[j,N]=u.useState(""),[k,E]=u.useState(""),[T,P]=u.useState(!1),[L,oe]=u.useState(new Set),[W,z]=u.useState([]),[q,he]=u.useState([]),[de,O]=u.useState([]),[K,_]=u.useState([]),[ee,V]=u.useState([]),[je,ye]=u.useState({longterm:null,daily:null}),[Ze,ve]=u.useState(!1),[X,we]=u.useState(null),[ie,se]=u.useState(!1),[Ye,be]=u.useState(null),[Me,H]=u.useState(!0),[U,ce]=u.useState(!1),[ne,fe]=u.useState(!1),[I,J]=u.useState(!1);u.useEffect(()=>{P(!1),oe(new Set)},[t,r]);const re=()=>{ve(!0),A("/api/settings/summary-layers").then(C=>ye({longterm:C.longterm,daily:C.daily})).catch(C=>console.error(C)).finally(()=>ve(!1))};u.useEffect(()=>{t!=="messages"||!r||re()},[t,r]);const ue=async()=>{try{const C=await A("/api/settings/summary-layers/flush-status"),{pending_flush:F,pending_merge:Q,already_merged:Z}=C,$e=[];if(F>0&&$e.push(`${F} `),Q!=null&&Q.length&&$e.push(`${Q.join("")} `),Z!=null&&Z.length&&$e.push(`${Z.join("")} `),!$e.length){be(""),setTimeout(()=>be(null),3e3);return}b({title:"",message:$e.join(""),confirmLabel:"",confirmColor:D.accentDark,action:async()=>{var Gt,gs;se(!0),be(null);try{const nr=await A("/api/settings/summary-layers/flush",{method:"POST"}),Sl=[];nr.flushed&&Sl.push(` ${nr.flushed} `),(Gt=nr.merge_triggered)!=null&&Gt.length&&Sl.push(` ${nr.merge_triggered.join("+")}`),be(Sl.length?Sl.join(""):""),(nr.flushed||(gs=nr.merge_triggered)!=null&&gs.length)&&setTimeout(re,5e3)}catch(nr){be("")}finally{se(!1),setTimeout(()=>be(null),4e3)}}})}catch(C){be(""),setTimeout(()=>be(null),3e3)}};u.useEffect(()=>{A("/api/sessions?limit=50").then(C=>{const F=C.sessions||[];p(F),F.length>0&&!i&&c(F[0].id)}).catch(()=>{})},[]),u.useEffect(()=>{i&&A(`/api/sessions/${i}/info`).then(C=>h(C.assistant_name||null)).catch(()=>h(null))},[i]);const Fe=50,Be=u.useRef(""),Kt=u.useRef(null),Tn=u.useRef({klass:"",mood:"",role:""});Tn.current={klass:v,mood:j,role:k},u.useEffect(()=>{i&&Dt()},[i,l]),u.useEffect(()=>{i&&!l&&Dt()},[t]),u.useEffect(()=>{i&&!l&&Dt()},[v,j,k]),u.useEffect(()=>(Kt.current&&clearTimeout(Kt.current),Kt.current=setTimeout(()=>{const C=x.trim();C!==Be.current&&(Be.current=C,i&&Dt(C))},400),()=>{Kt.current&&clearTimeout(Kt.current)}),[x]);const kt=C=>{const F=[],Q=(C!=null?C:Be.current||"").trim();Q&&F.push(`search=${encodeURIComponent(Q)}`);const Z=Tn.current;return t==="memories"&&Z.klass&&F.push(`klass=${encodeURIComponent(Z.klass)}`),t==="summaries"&&Z.mood&&F.push(`mood_tag=${encodeURIComponent(Z.mood)}`),t==="messages"&&Z.role&&F.push(`role=${encodeURIComponent(Z.role)}`),F.length?`&${F.join("&")}`:""},Dt=async C=>{if(!i)return;H(!0);const F=kt(C);try{if(l){const[Q,Z]=await Promise.all([A("/api/memories/trash?limit=100"),A(`/api/sessions/${i}/summaries/trash`)]);_(Q.memories||[]),V(Z.summaries||[])}else if(t==="memories"){const Q=await A(`/api/memories?limit=${Fe}&offset=0${F}`);z(Q.memories||[]),ce((Q.total||0)>(Q.memories||[]).length)}else if(t==="summaries"){const Q=await A(`/api/sessions/${i}/summaries?limit=${Fe}&offset=0${F}`);he(Q.summaries||[]),fe((Q.total||0)>(Q.summaries||[]).length)}else{const Q=await A(`/api/sessions/${i}/messages?limit=50${F}`);O((Q.messages||[]).reverse()),J(Q.has_more||!1)}}catch(Q){console.error(Q)}H(!1)},mn=async()=>{if(!U||Me)return;H(!0);const C=kt();try{const F=await A(`/api/memories?limit=${Fe}&offset=${W.length}${C}`),Q=F.memories||[];z(Z=>[...Z,...Q]),ce((F.total||0)>W.length+Q.length)}catch(F){console.error(F)}H(!1)},Zn=async()=>{if(!i||!ne||Me)return;H(!0);const C=kt();try{const F=await A(`/api/sessions/${i}/summaries?limit=${Fe}&offset=${q.length}${C}`),Q=F.summaries||[];he(Z=>[...Z,...Q]),fe((F.total||0)>q.length+Q.length)}catch(F){console.error(F)}H(!1)},Rt=async()=>{if(!i||!I||Me)return;const C=de[de.length-1];if(!C)return;H(!0);const F=kt();try{const Q=await A(`/api/sessions/${i}/messages?limit=50&before_id=${C.id}${F}`);O(Z=>[...Z,...(Q.messages||[]).reverse()]),J(Q.has_more||!1)}catch(Q){console.error(Q)}H(!1)},Ve=x.trim(),Sr=u.useMemo(()=>Ve?K.filter(C=>C.content.toLowerCase().includes(Ve.toLowerCase())):K,[K,Ve]),$=u.useMemo(()=>Ve?ee.filter(C=>(C.summary_content||"").toLowerCase().includes(Ve.toLowerCase())):ee,[ee,Ve]),ge=(C,F)=>b({message:C,action:F}),ae=async C=>{await A(`/api/memories/${C}/restore`,{method:"POST"}),_(F=>F.filter(Q=>Q.id!==C))},_e=C=>ge("",async()=>{await A(`/api/memories/${C}/permanent`,{method:"DELETE"}),_(F=>F.filter(Q=>Q.id!==C))}),ht=async C=>{await A(`/api/sessions/${i}/summaries/${C}/restore`,{method:"POST"}),V(F=>F.filter(Q=>Q.id!==C))},gn=C=>ge("",async()=>{await A(`/api/sessions/${i}/summaries/${C}/permanent`,{method:"DELETE"}),V(F=>F.filter(Q=>Q.id!==C))}),Nr=C=>{oe(F=>{const Q=new Set(F);return Q.has(C)?Q.delete(C):Q.add(C),Q})},er=C=>{P(!0),oe(new Set([C]))},et=()=>{let C=[];t==="memories"?C=W.map(F=>F.id):t==="summaries"?C=q.map(F=>F.id):C=de.map(F=>F.id),oe(new Set(C))},it=()=>{P(!1),oe(new Set)},xt=()=>{if(L.size===0)return;const C=L.size,F=t==="messages"?` ${C} `:` ${C} ${t==="memories"?"":""}`;ge(F,async()=>{const Q=[...L];t==="memories"?(await A("/api/memories/batch",{method:"DELETE",body:{ids:Q}}),z(Z=>Z.filter($e=>!L.has($e.id)))):t==="summaries"?(await A(`/api/sessions/${i}/summaries/batch`,{method:"DELETE",body:{ids:Q}}),he(Z=>Z.filter($e=>!L.has($e.id)))):(await A(`/api/sessions/${i}/messages/batch`,{method:"DELETE",body:{ids:Q}}),O(Z=>Z.filter($e=>!L.has($e.id)))),it()})},on=async(C,F,Q)=>{if(g){try{if(g.type==="memory"){const Z={content:C};F!==void 0&&(Z.klass=F),Q!==void 0&&(Z.tags=Q),await A(`/api/memories/${g.id}`,{method:"PUT",body:Z}),z($e=>$e.map(Gt=>Gt.id===g.id?{...Gt,content:C,...F!==void 0?{klass:F}:{},...Q!==void 0?{tags:Q}:{}}:Gt))}else await A(`/api/sessions/${i}/summaries/${g.id}`,{method:"PATCH",body:{summary_content:C}}),he(Z=>Z.map($e=>$e.id===g.id?{...$e,summary_content:C}:$e))}catch(Z){console.error(Z)}m(null)}},jt=C=>{if(!X)return;const F=X.type;we(null),b({title:"",message:"",confirmLabel:"",confirmColor:D.accentDark,action:async()=>{await A(`/api/settings/summary-layers/${F}`,{method:"PUT",body:{content:C}}),ye(Q=>({...Q,[F]:{...Q[F]||{},content:C}}))}})},mt=C=>C==="user"?"":C==="assistant"?f||"":"",Ft=C=>C==="user"?D.accentDark:C==="assistant"?"#8d68c4":D.textMuted,an=t==="memories"?hx:t==="summaries"?A0:F0,Ue=t==="memories"?v:t==="summaries"?j:k,cn=C=>{t==="memories"?S(C):t==="summaries"?N(C):E(C)},tr=l?(()=>{if(Me)return o.jsx(Es,{});const C=t==="memories"?Sr:$;return C.length===0?o.jsx(ql,{text:Ve?"":""}):C.map(F=>o.jsx(U0,{content:F.content||F.summary_content||"()",deletedAt:F.deleted_at,keyword:Ve,onRestore:()=>t==="memories"?ae(F.id):ht(F.id),onPermanentDelete:()=>t==="memories"?_e(F.id):gn(F.id)},F.id))})():t==="memories"?Me&&W.length===0?o.jsx(Es,{}):W.length===0?o.jsx(ql,{text:Ve?"":""}):o.jsxs(o.Fragment,{children:[!T&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:D.textMuted},children:""}),W.map(C=>o.jsx(rf,{time:C.updated_at?`${or(C.created_at)}   ${or(C.updated_at)}`:or(C.created_at),keyword:Ve,onEdit:()=>m({type:"memory",id:C.id,text:C.content,klass:C.klass,tags:C.tags}),selectMode:T,selected:L.has(C.id),onToggle:()=>Nr(C.id),onLongPress:()=>er(C.id),badge:(()=>{var Z;const F=ef[C.klass]||ef.other,Q=((Z=C.tags)==null?void 0:Z.topic)||[];return o.jsxs("div",{className:"flex flex-wrap items-center gap-1 mb-1",children:[o.jsx("span",{className:"inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:F.bg,color:F.color},children:C.klass}),o.jsxs("span",{className:"inline-block text-[10px]",style:{color:D.textMuted},children:["#",C.id]}),Q.map(($e,Gt)=>o.jsx("span",{className:"inline-block rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(136,136,160,0.1)",color:D.textMuted},children:$e},Gt))]})})(),children:C.content},C.id)),U&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.accentDark},onClick:mn,disabled:Me,children:Me?"...":""})]}):t==="summaries"?Me&&q.length===0?o.jsx(Es,{}):q.length===0?o.jsx(ql,{text:Ve?"":""}):o.jsxs(o.Fragment,{children:[!T&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:D.textMuted},children:""}),q.map(C=>o.jsx(rf,{time:or(C.created_at),keyword:Ve,onEdit:()=>m({type:"summary",id:C.id,text:C.summary_content}),selectMode:T,selected:L.has(C.id),onToggle:()=>Nr(C.id),onLongPress:()=>er(C.id),badge:o.jsxs(o.Fragment,{children:[C.mood_tag&&o.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:"rgba(232,160,191,0.15)",color:D.accentDark},children:C.mood_tag}),C.merged_into&&o.jsxs("span",{className:"mb-1 ml-1 inline-block rounded-full px-1.5 py-0.5 text-[9px] font-medium",style:{background:"rgba(155,120,200,0.12)",color:"#8b6abf"},children:["",C.merged_into==="daily"?"":""]}),o.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:D.textMuted},children:["#",C.id]})]}),children:C.summary_content||"()"},C.id)),ne&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.accentDark},onClick:Zn,disabled:Me,children:Me?"...":""})]}):r?Ze?o.jsx(Es,{}):o.jsxs("div",{className:"space-y-4",children:[[{type:"daily",label:"",hint:""},{type:"longterm",label:"",hint:""}].map(({type:C,label:F,hint:Q})=>{var Gt,gs;const Z=je[C],$e=(Gt=Z==null?void 0:Z.content)==null?void 0:Gt.trim();return o.jsxs("div",{className:"rounded-[18px] p-4",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:D.text},children:F}),o.jsx("div",{className:"text-[11px]",style:{color:D.textMuted},children:Q})]}),o.jsx("button",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>we({type:C,content:(Z==null?void 0:Z.content)||""}),children:o.jsx(Zc,{size:11,style:{color:D.accentDark}})})]}),o.jsx("div",{className:"text-[12px] leading-relaxed whitespace-pre-wrap break-words",style:{color:$e?D.text:D.textMuted},children:$e?Z.content:""}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:D.textMuted},children:Z!=null&&Z.updated_at?` ${or(Z.updated_at)}`:""}),o.jsxs("span",{className:"text-[10px]",style:{color:D.textMuted},children:[((gs=Z==null?void 0:Z.content)==null?void 0:gs.length)||0," "]})]})]},C)}),o.jsxs("button",{className:"mt-2 flex w-full items-center justify-center gap-2 rounded-[14px] py-2.5 text-[13px] font-medium text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:ue,disabled:ie,children:[o.jsx(da,{size:13,className:ie?"animate-spin":""}),Ye||(ie?"...":"")]})]}):Me&&de.length===0?o.jsx(Es,{}):de.length===0?o.jsx(ql,{text:Ve?"":""}):o.jsxs(o.Fragment,{children:[!T&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:D.textMuted},children:""}),de.map(C=>o.jsx(H0,{msg:C,keyword:Ve,roleLabel:mt,roleColor:Ft,selectMode:T,selected:L.has(C.id),onToggle:()=>Nr(C.id),onLongPress:()=>er(C.id)},C.id)),I&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.accentDark},onClick:Rt,disabled:Me,children:Me?"...":""})]});return o.jsxs("div",{className:"flex h-full flex-col",style:{background:D.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:D.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:D.text},children:l?"":""}),t==="messages"?o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:D.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>s(!r),children:o.jsx(Jc,{size:16,style:{color:r?D.accentDark:D.textMuted}})}):o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:D.bg,boxShadow:l?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>a(!l),children:o.jsx(fs,{size:16,style:{color:l?"#ef4444":D.accentDark}})})]}),T&&o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsxs("div",{className:"flex items-center justify-between rounded-[14px] px-4 py-2.5",style:{background:D.bg,boxShadow:"var(--inset-shadow)"},children:[o.jsxs("span",{className:"text-[12px] font-semibold",style:{color:D.accentDark},children:[" ",L.size," "]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:"rgba(59,130,246,0.15)",color:"#3b82f6"},onClick:et,children:""}),o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.textMuted},onClick:it,children:""}),o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold text-white",style:{background:L.size>0?"#ff4d6d":"rgba(255,77,109,0.3)"},onClick:xt,disabled:L.size===0,children:""})]})]})}),!T&&o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:D.bg,boxShadow:"var(--inset-shadow)"},children:$0.map(C=>{const F=l&&C.key==="messages",Q=t===C.key,Z=C.key==="messages"&&r?"":C.label;return o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:F?{color:D.textMuted,opacity:.35,cursor:"default"}:Q?{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.accentDark}:{color:D.textMuted},disabled:F,onClick:()=>!F&&n(C.key),children:Z},C.key)})})}),!T&&!(t==="messages"&&r)&&o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(nf,{value:i?`#${i}`:"",rawValue:i!=null?i:"",onChange:C=>c(Number(C)),options:d.map(C=>({value:String(C.id),label:`#${C.id} ${C.title||""}`})),width:"22%"}),o.jsx(nf,{value:((Mr=an.find(C=>C.value===Ue))==null?void 0:Mr.label)||an[0].label,rawValue:Ue,onChange:cn,options:an.map(C=>({value:C.value,label:C.label})),width:"22%",active:!!Ue}),o.jsxs("div",{className:"relative flex-1",children:[o.jsx(rv,{size:13,className:"absolute left-2.5 top-1/2 -translate-y-1/2",style:{color:D.textMuted}}),o.jsx("input",{className:"w-full rounded-[12px] py-2 pl-8 pr-7 text-[11px] outline-none",style:{background:D.bg,boxShadow:"var(--inset-shadow)",color:D.text},placeholder:"...",value:x,onChange:C=>w(C.target.value)}),x&&o.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>w(""),children:o.jsx(vl,{size:13,style:{color:D.textMuted}})})]})]})}),o.jsx("div",{className:`flex-1 overflow-y-auto px-5 pb-8${t==="messages"&&r?" pt-5":""}`,children:tr}),y&&o.jsx(B0,{title:y.title,message:y.message,confirmLabel:y.confirmLabel,confirmColor:y.confirmColor,onConfirm:async()=>{try{await y.action()}catch(C){console.error(C)}b(null)},onCancel:()=>b(null)}),g&&o.jsx(tf,{initialText:g.text,onSave:on,onCancel:()=>m(null),memoryData:g.type==="memory"?{klass:g.klass,tags:g.tags}:null}),X&&o.jsx(tf,{initialText:X.content,onSave:jt,onCancel:()=>we(null)})]})}function Es(){return o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:D.accent,borderTopColor:"transparent"}})})}function ql({text:e}){return o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:D.textMuted},children:e})}const G={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},V0=[{key:"theirs",label:""},{key:"mine",label:""}],Jl=80;function mx(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function X0({message:e,onConfirm:t,onCancel:n}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:G.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:G.text},children:""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:G.textMuted},children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)",color:G.text},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function Y0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Jl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Jl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Jl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Jl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(fs,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function K0({unlockAt:e}){const[t,n]=u.useState(Date.now());u.useEffect(()=>{const d=setInterval(()=>n(Date.now()),1e3);return()=>clearInterval(d)},[]);const r=new Date(e).getTime()-t;if(r<=0)return null;const s=Math.floor(r/864e5),l=Math.floor(r%864e5/36e5),a=Math.floor(r%36e5/6e4),i=Math.floor(r%6e4/1e3);let c="";return s>0&&(c+=`${s}`),(l>0||s>0)&&(c+=`${l}`),c+=`${a}${i}`,o.jsxs("div",{className:"flex items-center gap-1.5 text-[12px]",style:{color:G.accentDark},children:[o.jsx(ev,{size:12}),o.jsx("span",{children:c})]})}function Q0({assistants:e,avatarMap:t,currentId:n,onSelect:r,onClose:s}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:s,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-5",style:{background:G.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:l=>l.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:G.text},children:""}),o.jsx("button",{onClick:s,children:o.jsx(vl,{size:18,style:{color:G.textMuted}})})]}),o.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:e.map(l=>{var i;const a=t[l.id]||l.avatar_url;return o.jsxs("button",{className:"mb-2 flex w-full items-center gap-3 rounded-[14px] p-3 text-left",style:{background:G.bg,boxShadow:l.id===n?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{r(l.id),s()},children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:36,height:36,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:2},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:G.bg},children:a?o.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:G.accentDark},children:((i=l.name)==null?void 0:i[0])||"?"})})}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:G.text},children:l.name})]},l.id)})})]})})}function G0({diary:e,onBack:t,onMarkRead:n}){return u.useEffect(()=>{e&&!e.is_read&&e.author==="assistant"&&(!e.unlock_at||new Date(e.unlock_at)<=new Date)&&n(e.id)},[e]),o.jsxs("div",{className:"flex h-full flex-col",style:{background:G.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:t,children:o.jsx(Tt,{size:22,style:{color:G.text}})}),o.jsx("h1",{className:"text-[15px] font-bold truncate max-w-[60%]",style:{color:G.text},children:e.title||""}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:o.jsxs("div",{className:"rounded-[18px] p-5",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{className:"mb-3 text-[10px]",style:{color:G.textMuted},children:mx(e.created_at)}),o.jsx("div",{className:"text-[13px] leading-[28px]",style:{color:G.text},children:e.content.split(`
`).map((r,s)=>o.jsx("div",{style:{borderBottom:"1px solid rgba(0,0,0,0.06)",minHeight:28},children:r||""},s))})]})})]})}function q0({assistantId:e,onSave:t,onCancel:n}){const[r,s]=u.useState(""),[l,a]=u.useState(""),[i,c]=u.useState(!1),[d,p]=u.useState(""),[f,h]=u.useState(!1),[x,w]=u.useState(!1),y=async()=>{if(!(!l.trim()||f)){h(!0);try{const b={assistant_id:e,author:"user",title:r.trim(),content:l.trim()};i&&d&&(b.unlock_at=new Date(d).toISOString()),await t(b)}finally{h(!1)}}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:G.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Tt,{size:22,style:{color:G.text}})}),o.jsx("h1",{className:"text-[15px] font-bold",style:{color:G.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:l.trim()?"var(--card-shadow-sm)":"var(--inset-shadow)"},onClick:y,disabled:!l.trim()||f,children:o.jsx("span",{className:"text-[12px] font-bold",style:{color:l.trim()?G.accentDark:G.textMuted},children:""})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[!x&&o.jsx("input",{className:"mb-3 w-full rounded-[12px] px-3 py-2.5 text-[13px] font-medium outline-none",style:{background:G.bg,boxShadow:"var(--inset-shadow)",color:G.text},placeholder:"",value:r,onChange:b=>s(b.target.value)}),o.jsxs("div",{className:"relative mb-3",children:[o.jsx("textarea",{className:"w-full rounded-[14px] p-3 text-[13px] leading-[28px] resize-none outline-none",style:{background:G.bg,boxShadow:"var(--inset-shadow)",color:G.text,minHeight:x?"calc(100vh - 120px)":200,backgroundImage:"repeating-linear-gradient(transparent, transparent 27px, rgba(0,0,0,0.05) 27px, rgba(0,0,0,0.05) 28px)",backgroundPositionY:9},placeholder:"...",value:l,onChange:b=>a(b.target.value),autoFocus:!0}),o.jsx("button",{className:"absolute top-2 right-2 flex h-7 w-7 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>w(!x),children:x?o.jsx(os,{size:13,style:{color:G.accentDark}}):o.jsx(gl,{size:13,style:{color:G.accentDark}})})]}),!x&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-[14px] px-4 py-3",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-[13px] font-medium",style:{color:G.text},children:""}),o.jsx("p",{className:"text-[10px]",style:{color:G.textMuted},children:""})]}),o.jsx("button",{className:"relative h-7 w-12 rounded-full transition-colors",style:{background:i?G.accent:"rgba(0,0,0,0.1)"},onClick:()=>{if(!i&&!d){const b=new Date;b.setDate(b.getDate()+1),b.setHours(9,0,0,0);const g=m=>String(m).padStart(2,"0");p(`${b.getFullYear()}-${g(b.getMonth()+1)}-${g(b.getDate())}T${g(b.getHours())}:${g(b.getMinutes())}`)}c(!i)},children:o.jsx("div",{className:"absolute top-0.5 h-6 w-6 rounded-full transition-transform",style:{background:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",transform:i?"translateX(22px)":"translateX(2px)"}})})]}),i&&o.jsxs("div",{className:"rounded-[14px] px-4 py-3",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("p",{className:"mb-2 text-[12px] font-medium",style:{color:G.text},children:""}),o.jsx("input",{type:"datetime-local",className:"w-full rounded-[10px] px-3 py-2 text-[13px] outline-none",style:{background:G.bg,boxShadow:"var(--inset-shadow)",color:G.text},value:d,onChange:b=>p(b.target.value)})]})]})]})]})}function J0(){var W;const e=At(),[t,n]=u.useState("theirs"),[r,s]=u.useState([]),[l,a]=u.useState({}),[i,c]=u.useState(()=>{const z=localStorage.getItem("diary_assistant_id");return z?Number(z):null}),d=z=>{c(z),z!=null&&localStorage.setItem("diary_assistant_id",String(z))},[p,f]=u.useState(!1),[h,x]=u.useState([]),[w,y]=u.useState(!0),[b,g]=u.useState(null),[m,v]=u.useState(null),[S,j]=u.useState(!1);u.useEffect(()=>{A("/api/assistants").then(async z=>{const q=z.assistants||[];s(q),q.length>0&&(i&&q.some(O=>O.id===i)||d(q[0].id));const he={};await Promise.all(q.map(async de=>{const O=await ps(`assistant-avatar-${de.id}`).catch(()=>null);O&&(he[de.id]=O)})),a(he)}).catch(()=>{})},[]);const N=r.find(z=>z.id===i),k=i&&l[i]||(N==null?void 0:N.avatar_url);u.useEffect(()=>{i!=null&&E()},[i,t]);const E=async()=>{y(!0);try{const q=await A(`/api/diary?assistant_id=${i}&author=${t==="theirs"?"assistant":"user"}&limit=100`);x(q.diary||[])}catch(z){console.error(z)}y(!1)},T=z=>{g({message:"",action:async()=>{await A(`/api/diary/${z}`,{method:"DELETE"}),x(q=>q.filter(he=>he.id!==z))}})},P=async z=>{try{await A(`/api/diary/${z}/read`,{method:"POST"}),x(q=>q.map(he=>he.id===z?{...he,is_read:!0}:he))}catch(q){console.error(q)}},L=async z=>{await A("/api/diary",{method:"POST",body:z}),j(!1),E()},oe=z=>{z.unlock_at&&new Date(z.unlock_at)>new Date||v(z)};return m?o.jsx(G0,{diary:m,onBack:()=>{v(null),E()},onMarkRead:P}):S?o.jsx(q0,{assistantId:i,onSave:L,onCancel:()=>j(!1)}):o.jsxs("div",{className:"flex h-full flex-col",style:{background:G.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:G.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:G.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{border:"2px solid #e8a0bf",padding:2},onClick:()=>f(!0),children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:G.bg},children:k?o.jsx("img",{src:k,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:G.accentDark},children:((W=N==null?void 0:N.name)==null?void 0:W[0])||"?"})})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:G.bg,boxShadow:"var(--inset-shadow)"},children:V0.map(z=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:t===z.key?{background:G.bg,boxShadow:"var(--card-shadow-sm)",color:G.accentDark}:{color:G.textMuted},onClick:()=>n(z.key),children:z.label},z.key))})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24 pt-5",children:w?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:G.accent,borderTopColor:"transparent"}})}):h.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:G.textMuted},children:t==="theirs"?"":""}):h.map(z=>{const q=z.unlock_at&&new Date(z.unlock_at)>new Date;return o.jsx(Y0,{onDelete:()=>T(z.id),children:o.jsxs("div",{className:"p-4 rounded-[18px]",style:{background:G.bg,userSelect:"none"},onClick:()=>oe(z),children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[!z.is_read&&z.author==="assistant"&&!q&&o.jsx("div",{className:"h-2 w-2 shrink-0 rounded-full",style:{background:"#ef4444"}}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:G.text},children:z.title||""})]}),o.jsx("span",{className:"text-[10px] shrink-0 ml-2",style:{color:G.textMuted},children:mx(z.created_at)})]}),q?o.jsx(K0,{unlockAt:z.unlock_at}):o.jsx("p",{className:"text-[12px] leading-relaxed break-words",style:{color:G.textMuted,maxHeight:40,overflow:"hidden"},children:z.content.length>60?z.content.slice(0,60)+"...":z.content})]})},z.id)})}),t==="mine"&&o.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center",style:{zIndex:30},children:o.jsx("button",{className:"flex h-12 w-12 items-center justify-center rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",boxShadow:"0 4px 14px rgba(232,160,191,0.4)"},onClick:()=>j(!0),children:o.jsx(ds,{size:22,color:"white"})})}),p&&o.jsx(Q0,{assistants:r,avatarMap:l,currentId:i,onSelect:d,onClose:()=>f(!1)}),b&&o.jsx(X0,{message:b.message,onConfirm:async()=>{try{await b.action()}catch(z){console.error(z)}g(null)},onCancel:()=>g(null)})]})}const Ce={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Z0({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:Ce.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:Ce.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ce.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(os,{size:18,style:{color:Ce.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:Ce.bg,color:Ce.text},placeholder:"..."})]})}function ew(){const e=At(),[t,n]=u.useState(""),[r,s]=u.useState(""),[l,a]=u.useState(""),[i,c]=u.useState(""),[d,p]=u.useState(!1),[f,h]=u.useState(!0),[x,w]=u.useState(null),[y,b]=u.useState(!1),g=u.useRef(null),m=u.useRef(null),v=k=>{w(k),setTimeout(()=>w(null),2e3)};u.useEffect(()=>{A("/api/user/profile").then(k=>{n(k.nickname||""),s(k.background_url||""),a(k.basic_info||"")}).catch(()=>{}).finally(()=>h(!1)),ps("user-avatar").then(k=>{k&&c(k)}).catch(function(){})},[]);const S=k=>{var P;const E=(P=k.target.files)==null?void 0:P[0];if(!E)return;const T=new FileReader;T.onload=async L=>{const oe=L.target.result;try{await qi("user-avatar",oe),c(oe)}catch(W){v("")}},T.readAsDataURL(E),k.target.value=""},j=k=>{var P;const E=(P=k.target.files)==null?void 0:P[0];if(!E)return;const T=new FileReader;T.onload=L=>a(L.target.result||""),T.readAsText(E),k.target.value=""},N=async()=>{p(!0);try{const k={nickname:t.trim()||null,background_url:r||null,basic_info:l||null,avatar_url:i?"user-avatar":null};await A("/api/user/profile",{method:"PUT",body:k});try{const E=JSON.parse(localStorage.getItem("whisper_profile")||"{}");localStorage.setItem("whisper_profile",JSON.stringify({...E,...k}))}catch(E){}v("")}catch(k){v("")}finally{p(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ce.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ce.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:Ce.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ce.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ce.bg,boxShadow:d?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:N,disabled:d,children:o.jsx(yl,{size:18,style:{color:Ce.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5 space-y-4",children:f?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ce.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-[20px] p-5",style:{background:Ce.bg,boxShadow:"var(--card-shadow)"},children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var k;return(k=g.current)==null?void 0:k.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Ce.bg},children:i?o.jsx("img",{src:i,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:24},children:""})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:Ce.accentDark},children:o.jsx(Th,{size:9,color:"white"})})]}),o.jsx("input",{ref:g,type:"file",accept:"image/*",className:"hidden",onChange:S}),o.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Ce.textMuted},children:""}),o.jsx("input",{type:"text",value:t,onChange:k=>n(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ce.bg,color:Ce.text}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Ce.textMuted},children:""}),o.jsx("input",{type:"text",value:r,onChange:k=>s(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2 text-[13px] italic outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ce.bg,color:Ce.text}})]})]})]})}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:Ce.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:Ce.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Ce.bg},onClick:()=>{var k;return(k=m.current)==null?void 0:k.click()},title:"",children:o.jsx(ua,{size:13,style:{color:Ce.textMuted}})}),o.jsx("input",{ref:m,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:j}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Ce.bg},onClick:()=>b(!0),title:"",children:o.jsx(gl,{size:13,style:{color:Ce.accentDark}})})]})]}),o.jsx("textarea",{value:l,onChange:k=>a(k.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ce.bg,color:Ce.text}})]})]})}),y&&o.jsx(Z0,{value:l,onChange:a,onClose:()=>b(!1)}),x&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:x})})]})}function Dr(){var n;const e=(n=window.Telegram)==null?void 0:n.WebApp,t=Math.max((e==null?void 0:e.viewportHeight)||0,window.innerHeight);document.documentElement.style.setProperty("--tg-viewport-height",t+"px")}function tw({onSuccess:e}){const[t,n]=u.useState(""),[r,s]=u.useState(""),[l,a]=u.useState(!1),i=async c=>{if(c.preventDefault(),!!t.trim()){a(!0),s("");try{await By(t),e()}catch(d){s(d.message||"")}finally{a(!1)}}};return o.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--bg)",padding:"2rem"},children:o.jsxs("div",{style:{width:"100%",maxWidth:320,borderRadius:24,padding:"2rem 1.5rem",background:"var(--bg)",boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontSize:36,marginBottom:8},children:""}),o.jsx("h1",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--text)",margin:0},children:"WHISPER"}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:4},children:""})]}),o.jsxs("form",{onSubmit:i,children:[o.jsx("input",{type:"password",value:t,onChange:c=>n(c.target.value),placeholder:"",autoFocus:!0,style:{width:"100%",padding:"12px 16px",borderRadius:14,border:"none",outline:"none",fontSize:14,color:"var(--text)",background:"var(--bg)",boxShadow:"var(--inset-shadow)",boxSizing:"border-box"}}),r&&o.jsx("p",{style:{color:"#ef4444",fontSize:"0.75rem",textAlign:"center",marginTop:8,marginBottom:0},children:r}),o.jsx("button",{type:"submit",disabled:l||!t.trim(),style:{width:"100%",marginTop:16,padding:"12px 0",borderRadius:14,border:"none",fontSize:14,fontWeight:600,color:"#fff",background:l||!t.trim()?"var(--text-muted)":"linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%)",cursor:l||!t.trim()?"not-allowed":"pointer",boxShadow:"var(--card-shadow-sm)"},children:l?"...":""})]})]})})}function nw(){const e=Gc();return u.useEffect(()=>{var n;const t=(n=window.Telegram)==null?void 0:n.WebApp;t&&!e.pathname.startsWith("/cot")&&t.expand(),Dr()},[e.pathname]),o.jsxs(Oy,{children:[o.jsx(dt,{path:"/",element:o.jsx(uv,{})}),o.jsx(dt,{path:"/profile",element:o.jsx(ew,{})}),o.jsx(dt,{path:"/world-books",element:o.jsx(e0,{})}),o.jsx(dt,{path:"/world-books/new",element:o.jsx(Vd,{})}),o.jsx(dt,{path:"/world-books/:id",element:o.jsx(Vd,{})}),o.jsx(dt,{path:"/assistants",element:o.jsx(d0,{})}),o.jsx(dt,{path:"/assistants/new",element:o.jsx(Yd,{})}),o.jsx(dt,{path:"/assistants/:id",element:o.jsx(Yd,{})}),o.jsx(dt,{path:"/settings",element:o.jsx(y0,{})}),o.jsx(dt,{path:"/settings/api",element:o.jsx(S0,{})}),o.jsx(dt,{path:"/settings/proactive",element:o.jsx(N0,{})}),o.jsx(dt,{path:"/cot",element:o.jsx(z0,{})}),o.jsx(dt,{path:"/memories",element:o.jsx(W0,{})}),o.jsx(dt,{path:"/diary",element:o.jsx(J0,{})}),o.jsx(dt,{path:"/messages",element:o.jsx(O0,{})})]})}function rw(){const[e,t]=u.useState(null);return u.useEffect(()=>{var r;const n=(r=window.Telegram)==null?void 0:r.WebApp;return localStorage.getItem("whisper_token")||n&&n.initData&&n.initData.length>0?t("ok"):t("login"),n&&(n.ready(),window.location.hash.startsWith("#/cot")||n.expand()),Dr(),n&&n.onEvent("viewportChanged",Dr),window.addEventListener("resize",Dr),()=>{n&&n.offEvent("viewportChanged",Dr),window.removeEventListener("resize",Dr)}},[]),e===null?null:e==="login"?o.jsx(tw,{onSuccess:()=>t("ok")}):o.jsx(Fy,{children:o.jsx(nw,{})})}window.location.hash&&!window.location.hash.startsWith("#/")&&history.replaceState(null,"",window.location.pathname+"#/cot");ni.createRoot(document.getElementById("root")).render(o.jsx(Re.StrictMode,{children:o.jsx(rw,{})}));
