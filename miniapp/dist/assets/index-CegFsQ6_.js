function xx(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function mx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nf={exports:{}},Bo={},rf={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=Symbol.for("react.element"),gx=Symbol.for("react.portal"),yx=Symbol.for("react.fragment"),vx=Symbol.for("react.strict_mode"),wx=Symbol.for("react.profiler"),bx=Symbol.for("react.provider"),kx=Symbol.for("react.context"),jx=Symbol.for("react.forward_ref"),Sx=Symbol.for("react.suspense"),Nx=Symbol.for("react.memo"),Cx=Symbol.for("react.lazy"),au=Symbol.iterator;function Ex(e){return e===null||typeof e!="object"?null:(e=au&&e[au]||e["@@iterator"],typeof e=="function"?e:null)}var sf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lf=Object.assign,of={};function as(e,t,n){this.props=e,this.context=t,this.refs=of,this.updater=n||sf}as.prototype.isReactComponent={};as.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};as.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function af(){}af.prototype=as.prototype;function Ji(e,t,n){this.props=e,this.context=t,this.refs=of,this.updater=n||sf}var Zi=Ji.prototype=new af;Zi.constructor=Ji;lf(Zi,as.prototype);Zi.isPureReactComponent=!0;var iu=Array.isArray,cf=Object.prototype.hasOwnProperty,ec={current:null},uf={key:!0,ref:!0,__self:!0,__source:!0};function df(e,t,n){var r,s={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)cf.call(t,r)&&!uf.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:cl,type:e,key:l,ref:a,props:s,_owner:ec.current}}function Mx(e,t){return{$$typeof:cl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function tc(e){return typeof e=="object"&&e!==null&&e.$$typeof===cl}function _x(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var cu=/\/+/g;function ga(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_x(""+e.key):t.toString(36)}function Gl(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case cl:case gx:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+ga(a,0):r,iu(s)?(n="",e!=null&&(n=e.replace(cu,"$&/")+"/"),Gl(s,t,n,"",function(d){return d})):s!=null&&(tc(s)&&(s=Mx(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(cu,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",iu(e))for(var i=0;i<e.length;i++){l=e[i];var c=r+ga(l,i);a+=Gl(l,t,n,c,s)}else if(c=Ex(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=r+ga(l,i++),a+=Gl(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function kl(e,t,n){if(e==null)return e;var r=[],s=0;return Gl(e,r,"","",function(l){return t.call(n,l,s++)}),r}function Tx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vt={current:null},ql={transition:null},Dx={ReactCurrentDispatcher:vt,ReactCurrentBatchConfig:ql,ReactCurrentOwner:ec};function ff(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:kl,forEach:function(e,t,n){kl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return kl(e,function(){t++}),t},toArray:function(e){return kl(e,function(t){return t})||[]},only:function(e){if(!tc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xe.Component=as;xe.Fragment=yx;xe.Profiler=wx;xe.PureComponent=Ji;xe.StrictMode=vx;xe.Suspense=Sx;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dx;xe.act=ff;xe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=lf({},e.props),s=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=ec.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)cf.call(t,c)&&!uf.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];r.children=i}return{$$typeof:cl,type:e.type,key:s,ref:l,props:r,_owner:a}};xe.createContext=function(e){return e={$$typeof:kx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:bx,_context:e},e.Consumer=e};xe.createElement=df;xe.createFactory=function(e){var t=df.bind(null,e);return t.type=e,t};xe.createRef=function(){return{current:null}};xe.forwardRef=function(e){return{$$typeof:jx,render:e}};xe.isValidElement=tc;xe.lazy=function(e){return{$$typeof:Cx,_payload:{_status:-1,_result:e},_init:Tx}};xe.memo=function(e,t){return{$$typeof:Nx,type:e,compare:t===void 0?null:t}};xe.startTransition=function(e){var t=ql.transition;ql.transition={};try{e()}finally{ql.transition=t}};xe.unstable_act=ff;xe.useCallback=function(e,t){return vt.current.useCallback(e,t)};xe.useContext=function(e){return vt.current.useContext(e)};xe.useDebugValue=function(){};xe.useDeferredValue=function(e){return vt.current.useDeferredValue(e)};xe.useEffect=function(e,t){return vt.current.useEffect(e,t)};xe.useId=function(){return vt.current.useId()};xe.useImperativeHandle=function(e,t,n){return vt.current.useImperativeHandle(e,t,n)};xe.useInsertionEffect=function(e,t){return vt.current.useInsertionEffect(e,t)};xe.useLayoutEffect=function(e,t){return vt.current.useLayoutEffect(e,t)};xe.useMemo=function(e,t){return vt.current.useMemo(e,t)};xe.useReducer=function(e,t,n){return vt.current.useReducer(e,t,n)};xe.useRef=function(e){return vt.current.useRef(e)};xe.useState=function(e){return vt.current.useState(e)};xe.useSyncExternalStore=function(e,t,n){return vt.current.useSyncExternalStore(e,t,n)};xe.useTransition=function(){return vt.current.useTransition()};xe.version="18.3.1";rf.exports=xe;var u=rf.exports;const Re=mx(u),Rx=xx({__proto__:null,default:Re},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Px=u,zx=Symbol.for("react.element"),Ix=Symbol.for("react.fragment"),Lx=Object.prototype.hasOwnProperty,Ox=Px.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$x={key:!0,ref:!0,__self:!0,__source:!0};function pf(e,t,n){var r,s={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Lx.call(t,r)&&!$x.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:zx,type:e,key:l,ref:a,props:s,_owner:Ox.current}}Bo.Fragment=Ix;Bo.jsx=pf;Bo.jsxs=pf;nf.exports=Bo;var o=nf.exports,Za={},hf={exports:{}},Ot={},xf={exports:{}},mf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,K){var _=O.length;O.push(K);e:for(;0<_;){var Z=_-1>>>1,V=O[Z];if(0<s(V,K))O[Z]=K,O[_]=V,_=Z;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var K=O[0],_=O.pop();if(_!==K){O[0]=_;e:for(var Z=0,V=O.length,ke=V>>>1;Z<ke;){var ye=2*(Z+1)-1,Je=O[ye],ve=ye+1,X=O[ve];if(0>s(Je,_))ve<V&&0>s(X,Je)?(O[Z]=X,O[ve]=_,Z=ve):(O[Z]=Je,O[ye]=_,Z=ye);else if(ve<V&&0>s(X,_))O[Z]=X,O[ve]=_,Z=ve;else break e}}return K}function s(O,K){var _=O.sortIndex-K.sortIndex;return _!==0?_:O.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],d=[],p=1,f=null,h=3,x=!1,w=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=O)r(d),K.sortIndex=K.expirationTime,t(c,K);else break;K=n(d)}}function S(O){if(y=!1,v(O),!w)if(n(c)!==null)w=!0,he(j);else{var K=n(d);K!==null&&de(S,K.startTime-O)}}function j(O,K){w=!1,y&&(y=!1,g(E),E=-1),x=!0;var _=h;try{for(v(K),f=n(c);f!==null&&(!(f.expirationTime>K)||O&&!L());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,h=f.priorityLevel;var V=Z(f.expirationTime<=K);K=e.unstable_now(),typeof V=="function"?f.callback=V:f===n(c)&&r(c),v(K)}else r(c);f=n(c)}if(f!==null)var ke=!0;else{var ye=n(d);ye!==null&&de(S,ye.startTime-K),ke=!1}return ke}finally{f=null,h=_,x=!1}}var N=!1,k=null,E=-1,T=5,P=-1;function L(){return!(e.unstable_now()-P<T)}function oe(){if(k!==null){var O=e.unstable_now();P=O;var K=!0;try{K=k(!0,O)}finally{K?W():(N=!1,k=null)}}else N=!1}var W;if(typeof m=="function")W=function(){m(oe)};else if(typeof MessageChannel!="undefined"){var z=new MessageChannel,q=z.port2;z.port1.onmessage=oe,W=function(){q.postMessage(null)}}else W=function(){b(oe,0)};function he(O){k=O,N||(N=!0,W())}function de(O,K){E=b(function(){O(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,he(j))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(O){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var _=h;h=K;try{return O()}finally{h=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,K){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var _=h;h=O;try{return K()}finally{h=_}},e.unstable_scheduleCallback=function(O,K,_){var Z=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?Z+_:Z):_=Z,O){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=_+V,O={id:p++,callback:K,priorityLevel:O,startTime:_,expirationTime:V,sortIndex:-1},_>Z?(O.sortIndex=_,t(d,O),n(c)===null&&O===n(d)&&(y?(g(E),E=-1):y=!0,de(S,_-Z))):(O.sortIndex=V,t(c,O),w||x||(w=!0,he(j))),O},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(O){var K=h;return function(){var _=h;h=K;try{return O.apply(this,arguments)}finally{h=_}}}})(mf);xf.exports=mf;var Ax=xf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fx=u,Lt=Ax;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gf=new Set,Us={};function yr(e,t){qr(e,t),qr(e+"Capture",t)}function qr(e,t){for(Us[e]=t,e=0;e<t.length;e++)gf.add(t[e])}var jn=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),ei=Object.prototype.hasOwnProperty,Bx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uu={},du={};function Ux(e){return ei.call(du,e)?!0:ei.call(uu,e)?!1:Bx.test(e)?du[e]=!0:(uu[e]=!0,!1)}function Hx(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wx(e,t,n,r){if(t===null||typeof t=="undefined"||Hx(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wt(e,t,n,r,s,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ot[e]=new wt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ot[t]=new wt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ot[e]=new wt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ot[e]=new wt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ot[e]=new wt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ot[e]=new wt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ot[e]=new wt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ot[e]=new wt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ot[e]=new wt(e,5,!1,e.toLowerCase(),null,!1,!1)});var nc=/[\-:]([a-z])/g;function rc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(nc,rc);ot[t]=new wt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(nc,rc);ot[t]=new wt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(nc,rc);ot[t]=new wt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ot[e]=new wt(e,1,!1,e.toLowerCase(),null,!1,!1)});ot.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ot[e]=new wt(e,1,!1,e.toLowerCase(),null,!0,!0)});function sc(e,t,n,r){var s=ot.hasOwnProperty(t)?ot[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wx(t,n,s,r)&&(n=null),r||s===null?Ux(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Mn=Fx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jl=Symbol.for("react.element"),Dr=Symbol.for("react.portal"),Rr=Symbol.for("react.fragment"),lc=Symbol.for("react.strict_mode"),ti=Symbol.for("react.profiler"),yf=Symbol.for("react.provider"),vf=Symbol.for("react.context"),oc=Symbol.for("react.forward_ref"),ni=Symbol.for("react.suspense"),ri=Symbol.for("react.suspense_list"),ac=Symbol.for("react.memo"),Rn=Symbol.for("react.lazy"),wf=Symbol.for("react.offscreen"),fu=Symbol.iterator;function ms(e){return e===null||typeof e!="object"?null:(e=fu&&e[fu]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,ya;function Cs(e){if(ya===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ya=t&&t[1]||""}return`
`+ya+e}var va=!1;function wa(e,t){if(!e||va)return"";va=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),l=r.stack.split(`
`),a=s.length-1,i=l.length-1;1<=a&&0<=i&&s[a]!==l[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==l[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==l[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{va=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Cs(e):""}function Vx(e){switch(e.tag){case 5:return Cs(e.type);case 16:return Cs("Lazy");case 13:return Cs("Suspense");case 19:return Cs("SuspenseList");case 0:case 2:case 15:return e=wa(e.type,!1),e;case 11:return e=wa(e.type.render,!1),e;case 1:return e=wa(e.type,!0),e;default:return""}}function si(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Rr:return"Fragment";case Dr:return"Portal";case ti:return"Profiler";case lc:return"StrictMode";case ni:return"Suspense";case ri:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vf:return(e.displayName||"Context")+".Consumer";case yf:return(e._context.displayName||"Context")+".Provider";case oc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ac:return t=e.displayName||null,t!==null?t:si(e.type)||"Memo";case Rn:t=e._payload,e=e._init;try{return si(e(t))}catch(n){}}return null}function Xx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return si(t);case 8:return t===lc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Kn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yx(e){var t=bf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Sl(e){e._valueTracker||(e._valueTracker=Yx(e))}function kf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=bf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function co(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function li(e,t){var n=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function pu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Kn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jf(e,t){t=t.checked,t!=null&&sc(e,"checked",t,!1)}function oi(e,t){jf(e,t);var n=Kn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ai(e,t.type,n):t.hasOwnProperty("defaultValue")&&ai(e,t.type,Kn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function hu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ai(e,t,n){(t!=="number"||co(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Es=Array.isArray;function Wr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Kn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ii(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(R(92));if(Es(n)){if(1<n.length)throw Error(R(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Kn(n)}}function Sf(e,t){var n=Kn(t.value),r=Kn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function mu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Nf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ci(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Nf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Nl,Cf=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Nl=Nl||document.createElement("div"),Nl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Nl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ts={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kx=["Webkit","ms","Moz","O"];Object.keys(Ts).forEach(function(e){Kx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ts[t]=Ts[e]})});function Ef(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ts.hasOwnProperty(e)&&Ts[e]?(""+t).trim():t+"px"}function Mf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ef(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Qx=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ui(e,t){if(t){if(Qx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function di(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fi=null;function ic(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pi=null,Vr=null,Xr=null;function gu(e){if(e=fl(e)){if(typeof pi!="function")throw Error(R(280));var t=e.stateNode;t&&(t=Xo(t),pi(e.stateNode,e.type,t))}}function _f(e){Vr?Xr?Xr.push(e):Xr=[e]:Vr=e}function Tf(){if(Vr){var e=Vr,t=Xr;if(Xr=Vr=null,gu(e),t)for(e=0;e<t.length;e++)gu(t[e])}}function Df(e,t){return e(t)}function Rf(){}var ba=!1;function Pf(e,t,n){if(ba)return e(t,n);ba=!0;try{return Df(e,t,n)}finally{ba=!1,(Vr!==null||Xr!==null)&&(Rf(),Tf())}}function Ws(e,t){var n=e.stateNode;if(n===null)return null;var r=Xo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(R(231,t,typeof n));return n}var hi=!1;if(jn)try{var gs={};Object.defineProperty(gs,"passive",{get:function(){hi=!0}}),window.addEventListener("test",gs,gs),window.removeEventListener("test",gs,gs)}catch(e){hi=!1}function Gx(e,t,n,r,s,l,a,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(p){this.onError(p)}}var Ds=!1,uo=null,fo=!1,xi=null,qx={onError:function(e){Ds=!0,uo=e}};function Jx(e,t,n,r,s,l,a,i,c){Ds=!1,uo=null,Gx.apply(qx,arguments)}function Zx(e,t,n,r,s,l,a,i,c){if(Jx.apply(this,arguments),Ds){if(Ds){var d=uo;Ds=!1,uo=null}else throw Error(R(198));fo||(fo=!0,xi=d)}}function vr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function zf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function yu(e){if(vr(e)!==e)throw Error(R(188))}function em(e){var t=e.alternate;if(!t){if(t=vr(e),t===null)throw Error(R(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return yu(s),e;if(l===r)return yu(s),t;l=l.sibling}throw Error(R(188))}if(n.return!==r.return)n=s,r=l;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=l;break}if(i===r){a=!0,r=s,n=l;break}i=i.sibling}if(!a){for(i=l.child;i;){if(i===n){a=!0,n=l,r=s;break}if(i===r){a=!0,r=l,n=s;break}i=i.sibling}if(!a)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?e:t}function If(e){return e=em(e),e!==null?Lf(e):null}function Lf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Lf(e);if(t!==null)return t;e=e.sibling}return null}var Of=Lt.unstable_scheduleCallback,vu=Lt.unstable_cancelCallback,tm=Lt.unstable_shouldYield,nm=Lt.unstable_requestPaint,He=Lt.unstable_now,rm=Lt.unstable_getCurrentPriorityLevel,cc=Lt.unstable_ImmediatePriority,$f=Lt.unstable_UserBlockingPriority,po=Lt.unstable_NormalPriority,sm=Lt.unstable_LowPriority,Af=Lt.unstable_IdlePriority,Uo=null,pn=null;function lm(e){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Uo,e,void 0,(e.current.flags&128)===128)}catch(t){}}var en=Math.clz32?Math.clz32:im,om=Math.log,am=Math.LN2;function im(e){return e>>>=0,e===0?32:31-(om(e)/am|0)|0}var Cl=64,El=4194304;function Ms(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ho(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=Ms(i):(l&=a,l!==0&&(r=Ms(l)))}else a=n&~s,a!==0?r=Ms(a):l!==0&&(r=Ms(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-en(t),s=1<<n,r|=e[n],t&=~s;return r}function cm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function um(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-en(l),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=cm(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function mi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ff(){var e=Cl;return Cl<<=1,!(Cl&4194240)&&(Cl=64),e}function ka(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ul(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-en(t),e[t]=n}function dm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-en(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function uc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-en(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ee=0;function Bf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Uf,dc,Hf,Wf,Vf,gi=!1,Ml=[],Fn=null,Bn=null,Un=null,Vs=new Map,Xs=new Map,In=[],fm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wu(e,t){switch(e){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":Vs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xs.delete(t.pointerId)}}function ys(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=fl(t),t!==null&&dc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function pm(e,t,n,r,s){switch(t){case"focusin":return Fn=ys(Fn,e,t,n,r,s),!0;case"dragenter":return Bn=ys(Bn,e,t,n,r,s),!0;case"mouseover":return Un=ys(Un,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return Vs.set(l,ys(Vs.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,Xs.set(l,ys(Xs.get(l)||null,e,t,n,r,s)),!0}return!1}function Xf(e){var t=or(e.target);if(t!==null){var n=vr(t);if(n!==null){if(t=n.tag,t===13){if(t=zf(n),t!==null){e.blockedOn=t,Vf(e.priority,function(){Hf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=yi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);fi=r,n.target.dispatchEvent(r),fi=null}else return t=fl(n),t!==null&&dc(t),e.blockedOn=n,!1;t.shift()}return!0}function bu(e,t,n){Jl(e)&&n.delete(t)}function hm(){gi=!1,Fn!==null&&Jl(Fn)&&(Fn=null),Bn!==null&&Jl(Bn)&&(Bn=null),Un!==null&&Jl(Un)&&(Un=null),Vs.forEach(bu),Xs.forEach(bu)}function vs(e,t){e.blockedOn===t&&(e.blockedOn=null,gi||(gi=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,hm)))}function Ys(e){function t(s){return vs(s,e)}if(0<Ml.length){vs(Ml[0],e);for(var n=1;n<Ml.length;n++){var r=Ml[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Fn!==null&&vs(Fn,e),Bn!==null&&vs(Bn,e),Un!==null&&vs(Un,e),Vs.forEach(t),Xs.forEach(t),n=0;n<In.length;n++)r=In[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<In.length&&(n=In[0],n.blockedOn===null);)Xf(n),n.blockedOn===null&&In.shift()}var Yr=Mn.ReactCurrentBatchConfig,xo=!0;function xm(e,t,n,r){var s=Ee,l=Yr.transition;Yr.transition=null;try{Ee=1,fc(e,t,n,r)}finally{Ee=s,Yr.transition=l}}function mm(e,t,n,r){var s=Ee,l=Yr.transition;Yr.transition=null;try{Ee=4,fc(e,t,n,r)}finally{Ee=s,Yr.transition=l}}function fc(e,t,n,r){if(xo){var s=yi(e,t,n,r);if(s===null)Ra(e,t,r,mo,n),wu(e,r);else if(pm(s,e,t,n,r))r.stopPropagation();else if(wu(e,r),t&4&&-1<fm.indexOf(e)){for(;s!==null;){var l=fl(s);if(l!==null&&Uf(l),l=yi(e,t,n,r),l===null&&Ra(e,t,r,mo,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else Ra(e,t,r,null,n)}}var mo=null;function yi(e,t,n,r){if(mo=null,e=ic(r),e=or(e),e!==null)if(t=vr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=zf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return mo=e,null}function Yf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rm()){case cc:return 1;case $f:return 4;case po:case sm:return 16;case Af:return 536870912;default:return 16}default:return 16}}var On=null,pc=null,Zl=null;function Kf(){if(Zl)return Zl;var e,t=pc,n=t.length,r,s="value"in On?On.value:On.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[l-r];r++);return Zl=s.slice(e,1<r?1-r:void 0)}function eo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _l(){return!0}function ku(){return!1}function $t(e){function t(n,r,s,l,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?_l:ku,this.isPropagationStopped=ku,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_l)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_l)},persist:function(){},isPersistent:_l}),t}var is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hc=$t(is),dl=Oe({},is,{view:0,detail:0}),gm=$t(dl),ja,Sa,ws,Ho=Oe({},dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ws&&(ws&&e.type==="mousemove"?(ja=e.screenX-ws.screenX,Sa=e.screenY-ws.screenY):Sa=ja=0,ws=e),ja)},movementY:function(e){return"movementY"in e?e.movementY:Sa}}),ju=$t(Ho),ym=Oe({},Ho,{dataTransfer:0}),vm=$t(ym),wm=Oe({},dl,{relatedTarget:0}),Na=$t(wm),bm=Oe({},is,{animationName:0,elapsedTime:0,pseudoElement:0}),km=$t(bm),jm=Oe({},is,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sm=$t(jm),Nm=Oe({},is,{data:0}),Su=$t(Nm),Cm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Em={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _m(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mm[e])?!!t[e]:!1}function xc(){return _m}var Tm=Oe({},dl,{key:function(e){if(e.key){var t=Cm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=eo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Em[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xc,charCode:function(e){return e.type==="keypress"?eo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?eo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Dm=$t(Tm),Rm=Oe({},Ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nu=$t(Rm),Pm=Oe({},dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xc}),zm=$t(Pm),Im=Oe({},is,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lm=$t(Im),Om=Oe({},Ho,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$m=$t(Om),Am=[9,13,27,32],mc=jn&&"CompositionEvent"in window,Rs=null;jn&&"documentMode"in document&&(Rs=document.documentMode);var Fm=jn&&"TextEvent"in window&&!Rs,Qf=jn&&(!mc||Rs&&8<Rs&&11>=Rs),Cu=" ",Eu=!1;function Gf(e,t){switch(e){case"keyup":return Am.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pr=!1;function Bm(e,t){switch(e){case"compositionend":return qf(t);case"keypress":return t.which!==32?null:(Eu=!0,Cu);case"textInput":return e=t.data,e===Cu&&Eu?null:e;default:return null}}function Um(e,t){if(Pr)return e==="compositionend"||!mc&&Gf(e,t)?(e=Kf(),Zl=pc=On=null,Pr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qf&&t.locale!=="ko"?null:t.data;default:return null}}var Hm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Hm[e.type]:t==="textarea"}function Jf(e,t,n,r){_f(r),t=go(t,"onChange"),0<t.length&&(n=new hc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ps=null,Ks=null;function Wm(e){cp(e,0)}function Wo(e){var t=Lr(e);if(kf(t))return e}function Vm(e,t){if(e==="change")return t}var Zf=!1;if(jn){var Ca;if(jn){var Ea="oninput"in document;if(!Ea){var _u=document.createElement("div");_u.setAttribute("oninput","return;"),Ea=typeof _u.oninput=="function"}Ca=Ea}else Ca=!1;Zf=Ca&&(!document.documentMode||9<document.documentMode)}function Tu(){Ps&&(Ps.detachEvent("onpropertychange",ep),Ks=Ps=null)}function ep(e){if(e.propertyName==="value"&&Wo(Ks)){var t=[];Jf(t,Ks,e,ic(e)),Pf(Wm,t)}}function Xm(e,t,n){e==="focusin"?(Tu(),Ps=t,Ks=n,Ps.attachEvent("onpropertychange",ep)):e==="focusout"&&Tu()}function Ym(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wo(Ks)}function Km(e,t){if(e==="click")return Wo(t)}function Qm(e,t){if(e==="input"||e==="change")return Wo(t)}function Gm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nn=typeof Object.is=="function"?Object.is:Gm;function Qs(e,t){if(nn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ei.call(t,s)||!nn(e[s],t[s]))return!1}return!0}function Du(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ru(e,t){var n=Du(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Du(n)}}function tp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function np(){for(var e=window,t=co();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=co(e.document)}return t}function gc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qm(e){var t=np(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&tp(n.ownerDocument.documentElement,n)){if(r!==null&&gc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=Ru(n,l);var a=Ru(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jm=jn&&"documentMode"in document&&11>=document.documentMode,zr=null,vi=null,zs=null,wi=!1;function Pu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wi||zr==null||zr!==co(r)||(r=zr,"selectionStart"in r&&gc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zs&&Qs(zs,r)||(zs=r,r=go(vi,"onSelect"),0<r.length&&(t=new hc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=zr)))}function Tl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ir={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionend:Tl("Transition","TransitionEnd")},Ma={},rp={};jn&&(rp=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);function Vo(e){if(Ma[e])return Ma[e];if(!Ir[e])return e;var t=Ir[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in rp)return Ma[e]=t[n];return e}var sp=Vo("animationend"),lp=Vo("animationiteration"),op=Vo("animationstart"),ap=Vo("transitionend"),ip=new Map,zu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gn(e,t){ip.set(e,t),yr(t,[e])}for(var _a=0;_a<zu.length;_a++){var Ta=zu[_a],Zm=Ta.toLowerCase(),eg=Ta[0].toUpperCase()+Ta.slice(1);Gn(Zm,"on"+eg)}Gn(sp,"onAnimationEnd");Gn(lp,"onAnimationIteration");Gn(op,"onAnimationStart");Gn("dblclick","onDoubleClick");Gn("focusin","onFocus");Gn("focusout","onBlur");Gn(ap,"onTransitionEnd");qr("onMouseEnter",["mouseout","mouseover"]);qr("onMouseLeave",["mouseout","mouseover"]);qr("onPointerEnter",["pointerout","pointerover"]);qr("onPointerLeave",["pointerout","pointerover"]);yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tg=new Set("cancel close invalid load scroll toggle".split(" ").concat(_s));function Iu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Zx(r,t,void 0,e),e.currentTarget=null}function cp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==l&&s.isPropagationStopped())break e;Iu(s,i,d),l=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,d=i.currentTarget,i=i.listener,c!==l&&s.isPropagationStopped())break e;Iu(s,i,d),l=c}}}if(fo)throw e=xi,fo=!1,xi=null,e}function De(e,t){var n=t[Ni];n===void 0&&(n=t[Ni]=new Set);var r=e+"__bubble";n.has(r)||(up(t,e,2,!1),n.add(r))}function Da(e,t,n){var r=0;t&&(r|=4),up(n,e,r,t)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function Gs(e){if(!e[Dl]){e[Dl]=!0,gf.forEach(function(n){n!=="selectionchange"&&(tg.has(n)||Da(n,!1,e),Da(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Dl]||(t[Dl]=!0,Da("selectionchange",!1,t))}}function up(e,t,n,r){switch(Yf(t)){case 1:var s=xm;break;case 4:s=mm;break;default:s=fc}n=s.bind(null,t,n,e),s=void 0,!hi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Ra(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=or(i),a===null)return;if(c=a.tag,c===5||c===6){r=l=a;continue e}i=i.parentNode}}r=r.return}Pf(function(){var d=l,p=ic(n),f=[];e:{var h=ip.get(e);if(h!==void 0){var x=hc,w=e;switch(e){case"keypress":if(eo(n)===0)break e;case"keydown":case"keyup":x=Dm;break;case"focusin":w="focus",x=Na;break;case"focusout":w="blur",x=Na;break;case"beforeblur":case"afterblur":x=Na;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=ju;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=vm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=zm;break;case sp:case lp:case op:x=km;break;case ap:x=Lm;break;case"scroll":x=gm;break;case"wheel":x=$m;break;case"copy":case"cut":case"paste":x=Sm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Nu}var y=(t&4)!==0,b=!y&&e==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var m=d,v;m!==null;){v=m;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,g!==null&&(S=Ws(m,g),S!=null&&y.push(qs(m,S,v)))),b)break;m=m.return}0<y.length&&(h=new x(h,w,null,n,p),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==fi&&(w=n.relatedTarget||n.fromElement)&&(or(w)||w[Sn]))break e;if((x||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,x?(w=n.relatedTarget||n.toElement,x=d,w=w?or(w):null,w!==null&&(b=vr(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=d),x!==w)){if(y=ju,S="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(y=Nu,S="onPointerLeave",g="onPointerEnter",m="pointer"),b=x==null?h:Lr(x),v=w==null?h:Lr(w),h=new y(S,m+"leave",x,n,p),h.target=b,h.relatedTarget=v,S=null,or(p)===d&&(y=new y(g,m+"enter",w,n,p),y.target=v,y.relatedTarget=b,S=y),b=S,x&&w)t:{for(y=x,g=w,m=0,v=y;v;v=Mr(v))m++;for(v=0,S=g;S;S=Mr(S))v++;for(;0<m-v;)y=Mr(y),m--;for(;0<v-m;)g=Mr(g),v--;for(;m--;){if(y===g||g!==null&&y===g.alternate)break t;y=Mr(y),g=Mr(g)}y=null}else y=null;x!==null&&Lu(f,h,x,y,!1),w!==null&&b!==null&&Lu(f,b,w,y,!0)}}e:{if(h=d?Lr(d):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var j=Vm;else if(Mu(h))if(Zf)j=Qm;else{j=Ym;var N=Xm}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=Km);if(j&&(j=j(e,d))){Jf(f,j,n,p);break e}N&&N(e,h,d),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&ai(h,"number",h.value)}switch(N=d?Lr(d):window,e){case"focusin":(Mu(N)||N.contentEditable==="true")&&(zr=N,vi=d,zs=null);break;case"focusout":zs=vi=zr=null;break;case"mousedown":wi=!0;break;case"contextmenu":case"mouseup":case"dragend":wi=!1,Pu(f,n,p);break;case"selectionchange":if(Jm)break;case"keydown":case"keyup":Pu(f,n,p)}var k;if(mc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Pr?Gf(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Qf&&n.locale!=="ko"&&(Pr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Pr&&(k=Kf()):(On=p,pc="value"in On?On.value:On.textContent,Pr=!0)),N=go(d,E),0<N.length&&(E=new Su(E,e,null,n,p),f.push({event:E,listeners:N}),k?E.data=k:(k=qf(n),k!==null&&(E.data=k)))),(k=Fm?Bm(e,n):Um(e,n))&&(d=go(d,"onBeforeInput"),0<d.length&&(p=new Su("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:d}),p.data=k))}cp(f,t)})}function qs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function go(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=Ws(e,n),l!=null&&r.unshift(qs(e,l,s)),l=Ws(e,t),l!=null&&r.push(qs(e,l,s))),e=e.return}return r}function Mr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Lu(e,t,n,r,s){for(var l=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,d=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&d!==null&&(i=d,s?(c=Ws(n,l),c!=null&&a.unshift(qs(n,c,i))):s||(c=Ws(n,l),c!=null&&a.push(qs(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var ng=/\r\n?/g,rg=/\u0000|\uFFFD/g;function Ou(e){return(typeof e=="string"?e:""+e).replace(ng,`
`).replace(rg,"")}function Rl(e,t,n){if(t=Ou(t),Ou(e)!==t&&n)throw Error(R(425))}function yo(){}var bi=null,ki=null;function ji(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Si=typeof setTimeout=="function"?setTimeout:void 0,sg=typeof clearTimeout=="function"?clearTimeout:void 0,$u=typeof Promise=="function"?Promise:void 0,lg=typeof queueMicrotask=="function"?queueMicrotask:typeof $u!="undefined"?function(e){return $u.resolve(null).then(e).catch(og)}:Si;function og(e){setTimeout(function(){throw e})}function Pa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ys(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ys(t)}function Hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Au(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var cs=Math.random().toString(36).slice(2),fn="__reactFiber$"+cs,Js="__reactProps$"+cs,Sn="__reactContainer$"+cs,Ni="__reactEvents$"+cs,ag="__reactListeners$"+cs,ig="__reactHandles$"+cs;function or(e){var t=e[fn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Sn]||n[fn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Au(e);e!==null;){if(n=e[fn])return n;e=Au(e)}return t}e=n,n=e.parentNode}return null}function fl(e){return e=e[fn]||e[Sn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Lr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function Xo(e){return e[Js]||null}var Ci=[],Or=-1;function qn(e){return{current:e}}function Pe(e){0>Or||(e.current=Ci[Or],Ci[Or]=null,Or--)}function Te(e,t){Or++,Ci[Or]=e.current,e.current=t}var Qn={},pt=qn(Qn),Et=qn(!1),fr=Qn;function Jr(e,t){var n=e.type.contextTypes;if(!n)return Qn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Mt(e){return e=e.childContextTypes,e!=null}function vo(){Pe(Et),Pe(pt)}function Fu(e,t,n){if(pt.current!==Qn)throw Error(R(168));Te(pt,t),Te(Et,n)}function dp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(R(108,Xx(e)||"Unknown",s));return Oe({},n,r)}function wo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qn,fr=pt.current,Te(pt,e),Te(Et,Et.current),!0}function Bu(e,t,n){var r=e.stateNode;if(!r)throw Error(R(169));n?(e=dp(e,t,fr),r.__reactInternalMemoizedMergedChildContext=e,Pe(Et),Pe(pt),Te(pt,e)):Pe(Et),Te(Et,n)}var vn=null,Yo=!1,za=!1;function fp(e){vn===null?vn=[e]:vn.push(e)}function cg(e){Yo=!0,fp(e)}function Jn(){if(!za&&vn!==null){za=!0;var e=0,t=Ee;try{var n=vn;for(Ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}vn=null,Yo=!1}catch(s){throw vn!==null&&(vn=vn.slice(e+1)),Of(cc,Jn),s}finally{Ee=t,za=!1}}return null}var $r=[],Ar=0,bo=null,ko=0,Ut=[],Ht=0,pr=null,wn=1,bn="";function rr(e,t){$r[Ar++]=ko,$r[Ar++]=bo,bo=e,ko=t}function pp(e,t,n){Ut[Ht++]=wn,Ut[Ht++]=bn,Ut[Ht++]=pr,pr=e;var r=wn;e=bn;var s=32-en(r)-1;r&=~(1<<s),n+=1;var l=32-en(t)+s;if(30<l){var a=s-s%5;l=(r&(1<<a)-1).toString(32),r>>=a,s-=a,wn=1<<32-en(t)+s|n<<s|r,bn=l+e}else wn=1<<l|n<<s|r,bn=e}function yc(e){e.return!==null&&(rr(e,1),pp(e,1,0))}function vc(e){for(;e===bo;)bo=$r[--Ar],$r[Ar]=null,ko=$r[--Ar],$r[Ar]=null;for(;e===pr;)pr=Ut[--Ht],Ut[Ht]=null,bn=Ut[--Ht],Ut[Ht]=null,wn=Ut[--Ht],Ut[Ht]=null}var It=null,zt=null,ze=!1,Zt=null;function hp(e,t){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Uu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,It=e,zt=Hn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,It=e,zt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=pr!==null?{id:wn,overflow:bn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,It=e,zt=null,!0):!1;default:return!1}}function Ei(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Mi(e){if(ze){var t=zt;if(t){var n=t;if(!Uu(e,t)){if(Ei(e))throw Error(R(418));t=Hn(n.nextSibling);var r=It;t&&Uu(e,t)?hp(r,n):(e.flags=e.flags&-4097|2,ze=!1,It=e)}}else{if(Ei(e))throw Error(R(418));e.flags=e.flags&-4097|2,ze=!1,It=e}}}function Hu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;It=e}function Pl(e){if(e!==It)return!1;if(!ze)return Hu(e),ze=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ji(e.type,e.memoizedProps)),t&&(t=zt)){if(Ei(e))throw xp(),Error(R(418));for(;t;)hp(e,t),t=Hn(t.nextSibling)}if(Hu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zt=Hn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zt=null}}else zt=It?Hn(e.stateNode.nextSibling):null;return!0}function xp(){for(var e=zt;e;)e=Hn(e.nextSibling)}function Zr(){zt=It=null,ze=!1}function wc(e){Zt===null?Zt=[e]:Zt.push(e)}var ug=Mn.ReactCurrentBatchConfig;function bs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var i=s.refs;a===null?delete i[l]:i[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,e))}return e}function zl(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wu(e){var t=e._init;return t(e._payload)}function mp(e){function t(g,m){if(e){var v=g.deletions;v===null?(g.deletions=[m],g.flags|=16):v.push(m)}}function n(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=Yn(g,m),g.index=0,g.sibling=null,g}function l(g,m,v){return g.index=v,e?(v=g.alternate,v!==null?(v=v.index,v<m?(g.flags|=2,m):v):(g.flags|=2,m)):(g.flags|=1048576,m)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,m,v,S){return m===null||m.tag!==6?(m=Ba(v,g.mode,S),m.return=g,m):(m=s(m,v),m.return=g,m)}function c(g,m,v,S){var j=v.type;return j===Rr?p(g,m,v.props.children,S,v.key):m!==null&&(m.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Rn&&Wu(j)===m.type)?(S=s(m,v.props),S.ref=bs(g,m,v),S.return=g,S):(S=ao(v.type,v.key,v.props,null,g.mode,S),S.ref=bs(g,m,v),S.return=g,S)}function d(g,m,v,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Ua(v,g.mode,S),m.return=g,m):(m=s(m,v.children||[]),m.return=g,m)}function p(g,m,v,S,j){return m===null||m.tag!==7?(m=ur(v,g.mode,S,j),m.return=g,m):(m=s(m,v),m.return=g,m)}function f(g,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ba(""+m,g.mode,v),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case jl:return v=ao(m.type,m.key,m.props,null,g.mode,v),v.ref=bs(g,null,m),v.return=g,v;case Dr:return m=Ua(m,g.mode,v),m.return=g,m;case Rn:var S=m._init;return f(g,S(m._payload),v)}if(Es(m)||ms(m))return m=ur(m,g.mode,v,null),m.return=g,m;zl(g,m)}return null}function h(g,m,v,S){var j=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return j!==null?null:i(g,m,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case jl:return v.key===j?c(g,m,v,S):null;case Dr:return v.key===j?d(g,m,v,S):null;case Rn:return j=v._init,h(g,m,j(v._payload),S)}if(Es(v)||ms(v))return j!==null?null:p(g,m,v,S,null);zl(g,v)}return null}function x(g,m,v,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(v)||null,i(m,g,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case jl:return g=g.get(S.key===null?v:S.key)||null,c(m,g,S,j);case Dr:return g=g.get(S.key===null?v:S.key)||null,d(m,g,S,j);case Rn:var N=S._init;return x(g,m,v,N(S._payload),j)}if(Es(S)||ms(S))return g=g.get(v)||null,p(m,g,S,j,null);zl(m,S)}return null}function w(g,m,v,S){for(var j=null,N=null,k=m,E=m=0,T=null;k!==null&&E<v.length;E++){k.index>E?(T=k,k=null):T=k.sibling;var P=h(g,k,v[E],S);if(P===null){k===null&&(k=T);break}e&&k&&P.alternate===null&&t(g,k),m=l(P,m,E),N===null?j=P:N.sibling=P,N=P,k=T}if(E===v.length)return n(g,k),ze&&rr(g,E),j;if(k===null){for(;E<v.length;E++)k=f(g,v[E],S),k!==null&&(m=l(k,m,E),N===null?j=k:N.sibling=k,N=k);return ze&&rr(g,E),j}for(k=r(g,k);E<v.length;E++)T=x(k,g,E,v[E],S),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?E:T.key),m=l(T,m,E),N===null?j=T:N.sibling=T,N=T);return e&&k.forEach(function(L){return t(g,L)}),ze&&rr(g,E),j}function y(g,m,v,S){var j=ms(v);if(typeof j!="function")throw Error(R(150));if(v=j.call(v),v==null)throw Error(R(151));for(var N=j=null,k=m,E=m=0,T=null,P=v.next();k!==null&&!P.done;E++,P=v.next()){k.index>E?(T=k,k=null):T=k.sibling;var L=h(g,k,P.value,S);if(L===null){k===null&&(k=T);break}e&&k&&L.alternate===null&&t(g,k),m=l(L,m,E),N===null?j=L:N.sibling=L,N=L,k=T}if(P.done)return n(g,k),ze&&rr(g,E),j;if(k===null){for(;!P.done;E++,P=v.next())P=f(g,P.value,S),P!==null&&(m=l(P,m,E),N===null?j=P:N.sibling=P,N=P);return ze&&rr(g,E),j}for(k=r(g,k);!P.done;E++,P=v.next())P=x(k,g,E,P.value,S),P!==null&&(e&&P.alternate!==null&&k.delete(P.key===null?E:P.key),m=l(P,m,E),N===null?j=P:N.sibling=P,N=P);return e&&k.forEach(function(oe){return t(g,oe)}),ze&&rr(g,E),j}function b(g,m,v,S){if(typeof v=="object"&&v!==null&&v.type===Rr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case jl:e:{for(var j=v.key,N=m;N!==null;){if(N.key===j){if(j=v.type,j===Rr){if(N.tag===7){n(g,N.sibling),m=s(N,v.props.children),m.return=g,g=m;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Rn&&Wu(j)===N.type){n(g,N.sibling),m=s(N,v.props),m.ref=bs(g,N,v),m.return=g,g=m;break e}n(g,N);break}else t(g,N);N=N.sibling}v.type===Rr?(m=ur(v.props.children,g.mode,S,v.key),m.return=g,g=m):(S=ao(v.type,v.key,v.props,null,g.mode,S),S.ref=bs(g,m,v),S.return=g,g=S)}return a(g);case Dr:e:{for(N=v.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(g,m.sibling),m=s(m,v.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else t(g,m);m=m.sibling}m=Ua(v,g.mode,S),m.return=g,g=m}return a(g);case Rn:return N=v._init,b(g,m,N(v._payload),S)}if(Es(v))return w(g,m,v,S);if(ms(v))return y(g,m,v,S);zl(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,v),m.return=g,g=m):(n(g,m),m=Ba(v,g.mode,S),m.return=g,g=m),a(g)):n(g,m)}return b}var es=mp(!0),gp=mp(!1),jo=qn(null),So=null,Fr=null,bc=null;function kc(){bc=Fr=So=null}function jc(e){var t=jo.current;Pe(jo),e._currentValue=t}function _i(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Kr(e,t){So=e,bc=Fr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ct=!0),e.firstContext=null)}function Xt(e){var t=e._currentValue;if(bc!==e)if(e={context:e,memoizedValue:t,next:null},Fr===null){if(So===null)throw Error(R(308));Fr=e,So.dependencies={lanes:0,firstContext:e}}else Fr=Fr.next=e;return t}var ar=null;function Sc(e){ar===null?ar=[e]:ar.push(e)}function yp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Sc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Nn(e,r)}function Nn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Pn=!1;function Nc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,be&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Nn(e,n)}return s=r.interleaved,s===null?(t.next=t,Sc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Nn(e,n)}function to(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uc(e,n)}}function Vu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function No(e,t,n,r){var s=e.updateQueue;Pn=!1;var l=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,d=c.next;c.next=null,a===null?l=d:a.next=d,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,i=p.lastBaseUpdate,i!==a&&(i===null?p.firstBaseUpdate=d:i.next=d,p.lastBaseUpdate=c))}if(l!==null){var f=s.baseState;a=0,p=d=c=null,i=l;do{var h=i.lane,x=i.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var w=e,y=i;switch(h=t,x=n,y.tag){case 1:if(w=y.payload,typeof w=="function"){f=w.call(x,f,h);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,h=typeof w=="function"?w.call(x,f,h):w,h==null)break e;f=Oe({},f,h);break e;case 2:Pn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[i]:h.push(i))}else x={eventTime:x,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},p===null?(d=p=x,c=f):p=p.next=x,a|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;h=i,i=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);xr|=a,e.lanes=a,e.memoizedState=f}}function Xu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(R(191,s));s.call(r)}}}var pl={},hn=qn(pl),Zs=qn(pl),el=qn(pl);function ir(e){if(e===pl)throw Error(R(174));return e}function Cc(e,t){switch(Te(el,t),Te(Zs,e),Te(hn,pl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ci(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ci(t,e)}Pe(hn),Te(hn,t)}function ts(){Pe(hn),Pe(Zs),Pe(el)}function wp(e){ir(el.current);var t=ir(hn.current),n=ci(t,e.type);t!==n&&(Te(Zs,e),Te(hn,n))}function Ec(e){Zs.current===e&&(Pe(hn),Pe(Zs))}var Ie=qn(0);function Co(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ia=[];function Mc(){for(var e=0;e<Ia.length;e++)Ia[e]._workInProgressVersionPrimary=null;Ia.length=0}var no=Mn.ReactCurrentDispatcher,La=Mn.ReactCurrentBatchConfig,hr=0,Le=null,Ke=null,tt=null,Eo=!1,Is=!1,tl=0,dg=0;function ct(){throw Error(R(321))}function _c(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nn(e[n],t[n]))return!1;return!0}function Tc(e,t,n,r,s,l){if(hr=l,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,no.current=e===null||e.memoizedState===null?xg:mg,e=n(r,s),Is){l=0;do{if(Is=!1,tl=0,25<=l)throw Error(R(301));l+=1,tt=Ke=null,t.updateQueue=null,no.current=gg,e=n(r,s)}while(Is)}if(no.current=Mo,t=Ke!==null&&Ke.next!==null,hr=0,tt=Ke=Le=null,Eo=!1,t)throw Error(R(300));return e}function Dc(){var e=tl!==0;return tl=0,e}function dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Le.memoizedState=tt=e:tt=tt.next=e,tt}function Yt(){if(Ke===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=Ke.next;var t=tt===null?Le.memoizedState:tt.next;if(t!==null)tt=t,Ke=e;else{if(e===null)throw Error(R(310));Ke=e,e={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},tt===null?Le.memoizedState=tt=e:tt=tt.next=e}return tt}function nl(e,t){return typeof t=="function"?t(e):t}function Oa(e){var t=Yt(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=Ke,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var a=s.next;s.next=l.next,l.next=a}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var i=a=null,c=null,d=l;do{var p=d.lane;if((hr&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var f={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=f,a=r):c=c.next=f,Le.lanes|=p,xr|=p}d=d.next}while(d!==null&&d!==l);c===null?a=r:c.next=i,nn(r,t.memoizedState)||(Ct=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,Le.lanes|=l,xr|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function $a(e){var t=Yt(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do l=e(l,a.action),a=a.next;while(a!==s);nn(l,t.memoizedState)||(Ct=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function bp(){}function kp(e,t){var n=Le,r=Yt(),s=t(),l=!nn(r.memoizedState,s);if(l&&(r.memoizedState=s,Ct=!0),r=r.queue,Rc(Np.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,rl(9,Sp.bind(null,n,r,s,t),void 0,null),rt===null)throw Error(R(349));hr&30||jp(n,t,s)}return s}function jp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Sp(e,t,n,r){t.value=n,t.getSnapshot=r,Cp(t)&&Ep(e)}function Np(e,t,n){return n(function(){Cp(t)&&Ep(e)})}function Cp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nn(e,n)}catch(r){return!0}}function Ep(e){var t=Nn(e,1);t!==null&&tn(t,e,1,-1)}function Yu(e){var t=dn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:e},t.queue=e,e=e.dispatch=hg.bind(null,Le,e),[t.memoizedState,e]}function rl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Mp(){return Yt().memoizedState}function ro(e,t,n,r){var s=dn();Le.flags|=e,s.memoizedState=rl(1|t,n,void 0,r===void 0?null:r)}function Ko(e,t,n,r){var s=Yt();r=r===void 0?null:r;var l=void 0;if(Ke!==null){var a=Ke.memoizedState;if(l=a.destroy,r!==null&&_c(r,a.deps)){s.memoizedState=rl(t,n,l,r);return}}Le.flags|=e,s.memoizedState=rl(1|t,n,l,r)}function Ku(e,t){return ro(8390656,8,e,t)}function Rc(e,t){return Ko(2048,8,e,t)}function _p(e,t){return Ko(4,2,e,t)}function Tp(e,t){return Ko(4,4,e,t)}function Dp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rp(e,t,n){return n=n!=null?n.concat([e]):null,Ko(4,4,Dp.bind(null,t,e),n)}function Pc(){}function Pp(e,t){var n=Yt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&_c(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zp(e,t){var n=Yt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&_c(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ip(e,t,n){return hr&21?(nn(n,t)||(n=Ff(),Le.lanes|=n,xr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ct=!0),e.memoizedState=n)}function fg(e,t){var n=Ee;Ee=n!==0&&4>n?n:4,e(!0);var r=La.transition;La.transition={};try{e(!1),t()}finally{Ee=n,La.transition=r}}function Lp(){return Yt().memoizedState}function pg(e,t,n){var r=Xn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Op(e))$p(t,n);else if(n=yp(e,t,n,r),n!==null){var s=yt();tn(n,e,r,s),Ap(n,t,r)}}function hg(e,t,n){var r=Xn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Op(e))$p(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,i=l(a,n);if(s.hasEagerState=!0,s.eagerState=i,nn(i,a)){var c=t.interleaved;c===null?(s.next=s,Sc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch(d){}finally{}n=yp(e,t,s,r),n!==null&&(s=yt(),tn(n,e,r,s),Ap(n,t,r))}}function Op(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function $p(e,t){Is=Eo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ap(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uc(e,n)}}var Mo={readContext:Xt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},xg={readContext:Xt,useCallback:function(e,t){return dn().memoizedState=[e,t===void 0?null:t],e},useContext:Xt,useEffect:Ku,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ro(4194308,4,Dp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return ro(4,2,e,t)},useMemo:function(e,t){var n=dn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=dn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=pg.bind(null,Le,e),[r.memoizedState,e]},useRef:function(e){var t=dn();return e={current:e},t.memoizedState=e},useState:Yu,useDebugValue:Pc,useDeferredValue:function(e){return dn().memoizedState=e},useTransition:function(){var e=Yu(!1),t=e[0];return e=fg.bind(null,e[1]),dn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Le,s=dn();if(ze){if(n===void 0)throw Error(R(407));n=n()}else{if(n=t(),rt===null)throw Error(R(349));hr&30||jp(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,Ku(Np.bind(null,r,l,e),[e]),r.flags|=2048,rl(9,Sp.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=dn(),t=rt.identifierPrefix;if(ze){var n=bn,r=wn;n=(r&~(1<<32-en(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=tl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=dg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mg={readContext:Xt,useCallback:Pp,useContext:Xt,useEffect:Rc,useImperativeHandle:Rp,useInsertionEffect:_p,useLayoutEffect:Tp,useMemo:zp,useReducer:Oa,useRef:Mp,useState:function(){return Oa(nl)},useDebugValue:Pc,useDeferredValue:function(e){var t=Yt();return Ip(t,Ke.memoizedState,e)},useTransition:function(){var e=Oa(nl)[0],t=Yt().memoizedState;return[e,t]},useMutableSource:bp,useSyncExternalStore:kp,useId:Lp,unstable_isNewReconciler:!1},gg={readContext:Xt,useCallback:Pp,useContext:Xt,useEffect:Rc,useImperativeHandle:Rp,useInsertionEffect:_p,useLayoutEffect:Tp,useMemo:zp,useReducer:$a,useRef:Mp,useState:function(){return $a(nl)},useDebugValue:Pc,useDeferredValue:function(e){var t=Yt();return Ke===null?t.memoizedState=e:Ip(t,Ke.memoizedState,e)},useTransition:function(){var e=$a(nl)[0],t=Yt().memoizedState;return[e,t]},useMutableSource:bp,useSyncExternalStore:kp,useId:Lp,unstable_isNewReconciler:!1};function qt(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ti(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Oe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Qo={isMounted:function(e){return(e=e._reactInternals)?vr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=yt(),s=Xn(e),l=kn(r,s);l.payload=t,n!=null&&(l.callback=n),t=Wn(e,l,s),t!==null&&(tn(t,e,s,r),to(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=yt(),s=Xn(e),l=kn(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Wn(e,l,s),t!==null&&(tn(t,e,s,r),to(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=yt(),r=Xn(e),s=kn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Wn(e,s,r),t!==null&&(tn(t,e,r,n),to(t,e,r))}};function Qu(e,t,n,r,s,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!Qs(n,r)||!Qs(s,l):!0}function Fp(e,t,n){var r=!1,s=Qn,l=t.contextType;return typeof l=="object"&&l!==null?l=Xt(l):(s=Mt(t)?fr:pt.current,r=t.contextTypes,l=(r=r!=null)?Jr(e,s):Qn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Qo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function Gu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Qo.enqueueReplaceState(t,t.state,null)}function Di(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Nc(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Xt(l):(l=Mt(t)?fr:pt.current,s.context=Jr(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Ti(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Qo.enqueueReplaceState(s,s.state,null),No(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ns(e,t){try{var n="",r=t;do n+=Vx(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function Aa(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function Ri(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var yg=typeof WeakMap=="function"?WeakMap:Map;function Bp(e,t,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){To||(To=!0,Ui=r),Ri(e,t)},n}function Up(e,t,n){n=kn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ri(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Ri(e,t),typeof r!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function qu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new yg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Rg.bind(null,e,t,n),t.then(e,e))}function Ju(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=kn(-1,1),t.tag=2,Wn(n,t,1))),n.lanes|=1),e)}var vg=Mn.ReactCurrentOwner,Ct=!1;function gt(e,t,n,r){t.child=e===null?gp(t,null,n,r):es(t,e.child,n,r)}function ed(e,t,n,r,s){n=n.render;var l=t.ref;return Kr(t,s),r=Tc(e,t,n,r,l,s),n=Dc(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Cn(e,t,s)):(ze&&n&&yc(t),t.flags|=1,gt(e,t,r,s),t.child)}function td(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!Bc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Hp(e,t,l,r,s)):(e=ao(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:Qs,n(a,r)&&e.ref===t.ref)return Cn(e,t,s)}return t.flags|=1,e=Yn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Hp(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(Qs(l,r)&&e.ref===t.ref)if(Ct=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(Ct=!0);else return t.lanes=e.lanes,Cn(e,t,s)}return Pi(e,t,n,r,s)}function Wp(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Ur,Pt),Pt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(Ur,Pt),Pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Te(Ur,Pt),Pt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,Te(Ur,Pt),Pt|=r;return gt(e,t,s,n),t.child}function Vp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Pi(e,t,n,r,s){var l=Mt(n)?fr:pt.current;return l=Jr(t,l),Kr(t,s),n=Tc(e,t,n,r,l,s),r=Dc(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Cn(e,t,s)):(ze&&r&&yc(t),t.flags|=1,gt(e,t,n,s),t.child)}function nd(e,t,n,r,s){if(Mt(n)){var l=!0;wo(t)}else l=!1;if(Kr(t,s),t.stateNode===null)so(e,t),Fp(t,n,r),Di(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Xt(d):(d=Mt(n)?fr:pt.current,d=Jr(t,d));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==d)&&Gu(t,a,r,d),Pn=!1;var h=t.memoizedState;a.state=h,No(t,r,a,s),c=t.memoizedState,i!==r||h!==c||Et.current||Pn?(typeof p=="function"&&(Ti(t,n,p,r),c=t.memoizedState),(i=Pn||Qu(t,n,i,r,h,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,vp(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:qt(t.type,i),a.props=d,f=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Xt(c):(c=Mt(n)?fr:pt.current,c=Jr(t,c));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||h!==c)&&Gu(t,a,r,c),Pn=!1,h=t.memoizedState,a.state=h,No(t,r,a,s);var w=t.memoizedState;i!==f||h!==w||Et.current||Pn?(typeof x=="function"&&(Ti(t,n,x,r),w=t.memoizedState),(d=Pn||Qu(t,n,d,r,h,w,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return zi(e,t,n,r,l,s)}function zi(e,t,n,r,s,l){Vp(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Bu(t,n,!1),Cn(e,t,l);r=t.stateNode,vg.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=es(t,e.child,null,l),t.child=es(t,null,i,l)):gt(e,t,i,l),t.memoizedState=r.state,s&&Bu(t,n,!0),t.child}function Xp(e){var t=e.stateNode;t.pendingContext?Fu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fu(e,t.context,!1),Cc(e,t.containerInfo)}function rd(e,t,n,r,s){return Zr(),wc(s),t.flags|=256,gt(e,t,n,r),t.child}var Ii={dehydrated:null,treeContext:null,retryLane:0};function Li(e){return{baseLanes:e,cachePool:null,transitions:null}}function Yp(e,t,n){var r=t.pendingProps,s=Ie.current,l=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Te(Ie,s&1),e===null)return Mi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=Jo(a,r,0,null),e=ur(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Li(n),t.memoizedState=Ii,e):zc(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return wg(e,t,a,r,i,s,n);if(l){l=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Yn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?l=Yn(i,l):(l=ur(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?Li(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=Ii,r}return l=e.child,e=l.sibling,r=Yn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function zc(e,t){return t=Jo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Il(e,t,n,r){return r!==null&&wc(r),es(t,e.child,null,n),e=zc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wg(e,t,n,r,s,l,a){if(n)return t.flags&256?(t.flags&=-257,r=Aa(Error(R(422))),Il(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=Jo({mode:"visible",children:r.children},s,0,null),l=ur(l,s,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&es(t,e.child,null,a),t.child.memoizedState=Li(a),t.memoizedState=Ii,l);if(!(t.mode&1))return Il(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(R(419)),r=Aa(l,r,void 0),Il(e,t,a,r)}if(i=(a&e.childLanes)!==0,Ct||i){if(r=rt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,Nn(e,s),tn(r,e,s,-1))}return Fc(),r=Aa(Error(R(421))),Il(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Pg.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,zt=Hn(s.nextSibling),It=t,ze=!0,Zt=null,e!==null&&(Ut[Ht++]=wn,Ut[Ht++]=bn,Ut[Ht++]=pr,wn=e.id,bn=e.overflow,pr=t),t=zc(t,r.children),t.flags|=4096,t)}function sd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),_i(e.return,t,n)}function Fa(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function Kp(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(gt(e,t,r.children,n),r=Ie.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sd(e,n,t);else if(e.tag===19)sd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Te(Ie,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Co(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Fa(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Co(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Fa(t,!0,n,null,l);break;case"together":Fa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function so(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Cn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),xr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,n=Yn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Yn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function bg(e,t,n){switch(t.tag){case 3:Xp(t),Zr();break;case 5:wp(t);break;case 1:Mt(t.type)&&wo(t);break;case 4:Cc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Te(jo,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Te(Ie,Ie.current&1),t.flags|=128,null):n&t.child.childLanes?Yp(e,t,n):(Te(Ie,Ie.current&1),e=Cn(e,t,n),e!==null?e.sibling:null);Te(Ie,Ie.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Kp(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Ie,Ie.current),r)break;return null;case 22:case 23:return t.lanes=0,Wp(e,t,n)}return Cn(e,t,n)}var Qp,Oi,Gp,qp;Qp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Oi=function(){};Gp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ir(hn.current);var l=null;switch(n){case"input":s=li(e,s),r=li(e,r),l=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),l=[];break;case"textarea":s=ii(e,s),r=ii(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=yo)}ui(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var i=s[d];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Us.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var c=r[d];if(i=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(l||(l=[]),l.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Us.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&De("scroll",e),l||i===c||(l=[])):(l=l||[]).push(d,c))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};qp=function(e,t,n,r){n!==r&&(t.flags|=4)};function ks(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function kg(e,t,n){var r=t.pendingProps;switch(vc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return Mt(t.type)&&vo(),ut(t),null;case 3:return r=t.stateNode,ts(),Pe(Et),Pe(pt),Mc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Pl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zt!==null&&(Vi(Zt),Zt=null))),Oi(e,t),ut(t),null;case 5:Ec(t);var s=ir(el.current);if(n=t.type,e!==null&&t.stateNode!=null)Gp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(R(166));return ut(t),null}if(e=ir(hn.current),Pl(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[fn]=t,r[Js]=l,e=(t.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(s=0;s<_s.length;s++)De(_s[s],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":pu(r,l),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},De("invalid",r);break;case"textarea":xu(r,l),De("invalid",r)}ui(n,l),s=null;for(var a in l)if(l.hasOwnProperty(a)){var i=l[a];a==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&Rl(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&Rl(r.textContent,i,e),s=["children",""+i]):Us.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&De("scroll",r)}switch(n){case"input":Sl(r),hu(r,l,!0);break;case"textarea":Sl(r),mu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=yo)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Nf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[fn]=t,e[Js]=r,Qp(e,t,!1,!1),t.stateNode=e;e:{switch(a=di(n,r),n){case"dialog":De("cancel",e),De("close",e),s=r;break;case"iframe":case"object":case"embed":De("load",e),s=r;break;case"video":case"audio":for(s=0;s<_s.length;s++)De(_s[s],e);s=r;break;case"source":De("error",e),s=r;break;case"img":case"image":case"link":De("error",e),De("load",e),s=r;break;case"details":De("toggle",e),s=r;break;case"input":pu(e,r),s=li(e,r),De("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),De("invalid",e);break;case"textarea":xu(e,r),s=ii(e,r),De("invalid",e);break;default:s=r}ui(n,s),i=s;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?Mf(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Cf(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Hs(e,c):typeof c=="number"&&Hs(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Us.hasOwnProperty(l)?c!=null&&l==="onScroll"&&De("scroll",e):c!=null&&sc(e,l,c,a))}switch(n){case"input":Sl(e),hu(e,r,!1);break;case"textarea":Sl(e),mu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Kn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Wr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Wr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=yo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ut(t),null;case 6:if(e&&t.stateNode!=null)qp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(R(166));if(n=ir(el.current),ir(hn.current),Pl(t)){if(r=t.stateNode,n=t.memoizedProps,r[fn]=t,(l=r.nodeValue!==n)&&(e=It,e!==null))switch(e.tag){case 3:Rl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Rl(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=t,t.stateNode=r}return ut(t),null;case 13:if(Pe(Ie),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ze&&zt!==null&&t.mode&1&&!(t.flags&128))xp(),Zr(),t.flags|=98560,l=!1;else if(l=Pl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(R(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(R(317));l[fn]=t}else Zr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),l=!1}else Zt!==null&&(Vi(Zt),Zt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ie.current&1?Ge===0&&(Ge=3):Fc())),t.updateQueue!==null&&(t.flags|=4),ut(t),null);case 4:return ts(),Oi(e,t),e===null&&Gs(t.stateNode.containerInfo),ut(t),null;case 10:return jc(t.type._context),ut(t),null;case 17:return Mt(t.type)&&vo(),ut(t),null;case 19:if(Pe(Ie),l=t.memoizedState,l===null)return ut(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)ks(l,!1);else{if(Ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Co(e),a!==null){for(t.flags|=128,ks(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Te(Ie,Ie.current&1|2),t.child}e=e.sibling}l.tail!==null&&He()>rs&&(t.flags|=128,r=!0,ks(l,!1),t.lanes=4194304)}else{if(!r)if(e=Co(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ks(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!ze)return ut(t),null}else 2*He()-l.renderingStartTime>rs&&n!==1073741824&&(t.flags|=128,r=!0,ks(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=He(),t.sibling=null,n=Ie.current,Te(Ie,r?n&1|2:n&1),t):(ut(t),null);case 22:case 23:return Ac(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Pt&1073741824&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function jg(e,t){switch(vc(t),t.tag){case 1:return Mt(t.type)&&vo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ts(),Pe(Et),Pe(pt),Mc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ec(t),null;case 13:if(Pe(Ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));Zr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(Ie),null;case 4:return ts(),null;case 10:return jc(t.type._context),null;case 22:case 23:return Ac(),null;case 24:return null;default:return null}}var Ll=!1,ft=!1,Sg=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Br(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(e,t,r)}else n.current=null}function $i(e,t,n){try{n()}catch(r){$e(e,t,r)}}var ld=!1;function Ng(e,t){if(bi=xo,e=np(),gc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch(S){n=null;break e}var a=0,i=-1,c=-1,d=0,p=0,f=e,h=null;t:for(;;){for(var x;f!==n||s!==0&&f.nodeType!==3||(i=a+s),f!==l||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)h=f,f=x;for(;;){if(f===e)break t;if(h===n&&++d===s&&(i=a),h===l&&++p===r&&(c=a),(x=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=x}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ki={focusedElem:e,selectionRange:n},xo=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,b=w.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:qt(t.type,y),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(S){$e(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return w=ld,ld=!1,w}function Ls(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&$i(t,n,l)}s=s.next}while(s!==r)}}function Go(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ai(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Jp(e){var t=e.alternate;t!==null&&(e.alternate=null,Jp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fn],delete t[Js],delete t[Ni],delete t[ag],delete t[ig])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zp(e){return e.tag===5||e.tag===3||e.tag===4}function od(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=yo));else if(r!==4&&(e=e.child,e!==null))for(Fi(e,t,n),e=e.sibling;e!==null;)Fi(e,t,n),e=e.sibling}function Bi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Bi(e,t,n),e=e.sibling;e!==null;)Bi(e,t,n),e=e.sibling}var st=null,Jt=!1;function Dn(e,t,n){for(n=n.child;n!==null;)eh(e,t,n),n=n.sibling}function eh(e,t,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Uo,n)}catch(i){}switch(n.tag){case 5:ft||Br(n,t);case 6:var r=st,s=Jt;st=null,Dn(e,t,n),st=r,Jt=s,st!==null&&(Jt?(e=st,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(Jt?(e=st,n=n.stateNode,e.nodeType===8?Pa(e.parentNode,n):e.nodeType===1&&Pa(e,n),Ys(e)):Pa(st,n.stateNode));break;case 4:r=st,s=Jt,st=n.stateNode.containerInfo,Jt=!0,Dn(e,t,n),st=r,Jt=s;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&$i(n,t,a),s=s.next}while(s!==r)}Dn(e,t,n);break;case 1:if(!ft&&(Br(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){$e(n,t,i)}Dn(e,t,n);break;case 21:Dn(e,t,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,Dn(e,t,n),ft=r):Dn(e,t,n);break;default:Dn(e,t,n)}}function ad(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Sg),t.forEach(function(r){var s=zg.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:st=i.stateNode,Jt=!1;break e;case 3:st=i.stateNode.containerInfo,Jt=!0;break e;case 4:st=i.stateNode.containerInfo,Jt=!0;break e}i=i.return}if(st===null)throw Error(R(160));eh(l,a,s),st=null,Jt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){$e(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)th(t,e),t=t.sibling}function th(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gt(t,e),un(e),r&4){try{Ls(3,e,e.return),Go(3,e)}catch(y){$e(e,e.return,y)}try{Ls(5,e,e.return)}catch(y){$e(e,e.return,y)}}break;case 1:Gt(t,e),un(e),r&512&&n!==null&&Br(n,n.return);break;case 5:if(Gt(t,e),un(e),r&512&&n!==null&&Br(n,n.return),e.flags&32){var s=e.stateNode;try{Hs(s,"")}catch(y){$e(e,e.return,y)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&jf(s,l),di(i,a);var d=di(i,l);for(a=0;a<c.length;a+=2){var p=c[a],f=c[a+1];p==="style"?Mf(s,f):p==="dangerouslySetInnerHTML"?Cf(s,f):p==="children"?Hs(s,f):sc(s,p,f,d)}switch(i){case"input":oi(s,l);break;case"textarea":Sf(s,l);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?Wr(s,!!l.multiple,x,!1):h!==!!l.multiple&&(l.defaultValue!=null?Wr(s,!!l.multiple,l.defaultValue,!0):Wr(s,!!l.multiple,l.multiple?[]:"",!1))}s[Js]=l}catch(y){$e(e,e.return,y)}}break;case 6:if(Gt(t,e),un(e),r&4){if(e.stateNode===null)throw Error(R(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(y){$e(e,e.return,y)}}break;case 3:if(Gt(t,e),un(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ys(t.containerInfo)}catch(y){$e(e,e.return,y)}break;case 4:Gt(t,e),un(e);break;case 13:Gt(t,e),un(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(Oc=He())),r&4&&ad(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(ft=(d=ft)||p,Gt(t,e),ft=d):Gt(t,e),un(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(Y=e,p=e.child;p!==null;){for(f=Y=p;Y!==null;){switch(h=Y,x=h.child,h.tag){case 0:case 11:case 14:case 15:Ls(4,h,h.return);break;case 1:Br(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(y){$e(r,n,y)}}break;case 5:Br(h,h.return);break;case 22:if(h.memoizedState!==null){cd(f);continue}}x!==null?(x.return=h,Y=x):cd(f)}p=p.sibling}e:for(p=null,f=e;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,d?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=Ef("display",a))}catch(y){$e(e,e.return,y)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){$e(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Gt(t,e),un(e),r&4&&ad(e);break;case 21:break;default:Gt(t,e),un(e)}}function un(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Zp(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Hs(s,""),r.flags&=-33);var l=od(e);Bi(e,l,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=od(e);Fi(e,i,a);break;default:throw Error(R(161))}}catch(c){$e(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Cg(e,t,n){Y=e,nh(e)}function nh(e,t,n){for(var r=(e.mode&1)!==0;Y!==null;){var s=Y,l=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ll;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||ft;i=Ll;var d=ft;if(Ll=a,(ft=c)&&!d)for(Y=s;Y!==null;)a=Y,c=a.child,a.tag===22&&a.memoizedState!==null?ud(s):c!==null?(c.return=a,Y=c):ud(s);for(;l!==null;)Y=l,nh(l),l=l.sibling;Y=s,Ll=i,ft=d}id(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,Y=l):id(e)}}function id(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ft||Go(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ft)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:qt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Xu(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Xu(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&Ys(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}ft||t.flags&512&&Ai(t)}catch(h){$e(t,t.return,h)}}if(t===e){Y=null;break}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}}function cd(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Y=n;break}Y=t.return}}function ud(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Go(4,t)}catch(c){$e(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){$e(t,s,c)}}var l=t.return;try{Ai(t)}catch(c){$e(t,l,c)}break;case 5:var a=t.return;try{Ai(t)}catch(c){$e(t,a,c)}}}catch(c){$e(t,t.return,c)}if(t===e){Y=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Y=i;break}Y=t.return}}var Eg=Math.ceil,_o=Mn.ReactCurrentDispatcher,Ic=Mn.ReactCurrentOwner,Vt=Mn.ReactCurrentBatchConfig,be=0,rt=null,Ve=null,lt=0,Pt=0,Ur=qn(0),Ge=0,sl=null,xr=0,qo=0,Lc=0,Os=null,Nt=null,Oc=0,rs=1/0,yn=null,To=!1,Ui=null,Vn=null,Ol=!1,$n=null,Do=0,$s=0,Hi=null,lo=-1,oo=0;function yt(){return be&6?He():lo!==-1?lo:lo=He()}function Xn(e){return e.mode&1?be&2&&lt!==0?lt&-lt:ug.transition!==null?(oo===0&&(oo=Ff()),oo):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:Yf(e.type)),e):1}function tn(e,t,n,r){if(50<$s)throw $s=0,Hi=null,Error(R(185));ul(e,n,r),(!(be&2)||e!==rt)&&(e===rt&&(!(be&2)&&(qo|=n),Ge===4&&Ln(e,lt)),_t(e,r),n===1&&be===0&&!(t.mode&1)&&(rs=He()+500,Yo&&Jn()))}function _t(e,t){var n=e.callbackNode;um(e,t);var r=ho(e,e===rt?lt:0);if(r===0)n!==null&&vu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&vu(n),t===1)e.tag===0?cg(dd.bind(null,e)):fp(dd.bind(null,e)),lg(function(){!(be&6)&&Jn()}),n=null;else{switch(Bf(r)){case 1:n=cc;break;case 4:n=$f;break;case 16:n=po;break;case 536870912:n=Af;break;default:n=po}n=uh(n,rh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rh(e,t){if(lo=-1,oo=0,be&6)throw Error(R(327));var n=e.callbackNode;if(Qr()&&e.callbackNode!==n)return null;var r=ho(e,e===rt?lt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ro(e,r);else{t=r;var s=be;be|=2;var l=lh();(rt!==e||lt!==t)&&(yn=null,rs=He()+500,cr(e,t));do try{Tg();break}catch(i){sh(e,i)}while(!0);kc(),_o.current=l,be=s,Ve!==null?t=0:(rt=null,lt=0,t=Ge)}if(t!==0){if(t===2&&(s=mi(e),s!==0&&(r=s,t=Wi(e,s))),t===1)throw n=sl,cr(e,0),Ln(e,r),_t(e,He()),n;if(t===6)Ln(e,r);else{if(s=e.current.alternate,!(r&30)&&!Mg(s)&&(t=Ro(e,r),t===2&&(l=mi(e),l!==0&&(r=l,t=Wi(e,l))),t===1))throw n=sl,cr(e,0),Ln(e,r),_t(e,He()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(R(345));case 2:sr(e,Nt,yn);break;case 3:if(Ln(e,r),(r&130023424)===r&&(t=Oc+500-He(),10<t)){if(ho(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){yt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Si(sr.bind(null,e,Nt,yn),t);break}sr(e,Nt,yn);break;case 4:if(Ln(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-en(r);l=1<<a,a=t[a],a>s&&(s=a),r&=~l}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eg(r/1960))-r,10<r){e.timeoutHandle=Si(sr.bind(null,e,Nt,yn),r);break}sr(e,Nt,yn);break;case 5:sr(e,Nt,yn);break;default:throw Error(R(329))}}}return _t(e,He()),e.callbackNode===n?rh.bind(null,e):null}function Wi(e,t){var n=Os;return e.current.memoizedState.isDehydrated&&(cr(e,t).flags|=256),e=Ro(e,t),e!==2&&(t=Nt,Nt=n,t!==null&&Vi(t)),e}function Vi(e){Nt===null?Nt=e:Nt.push.apply(Nt,e)}function Mg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!nn(l(),s))return!1}catch(a){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ln(e,t){for(t&=~Lc,t&=~qo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-en(t),r=1<<n;e[n]=-1,t&=~r}}function dd(e){if(be&6)throw Error(R(327));Qr();var t=ho(e,0);if(!(t&1))return _t(e,He()),null;var n=Ro(e,t);if(e.tag!==0&&n===2){var r=mi(e);r!==0&&(t=r,n=Wi(e,r))}if(n===1)throw n=sl,cr(e,0),Ln(e,t),_t(e,He()),n;if(n===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sr(e,Nt,yn),_t(e,He()),null}function $c(e,t){var n=be;be|=1;try{return e(t)}finally{be=n,be===0&&(rs=He()+500,Yo&&Jn())}}function mr(e){$n!==null&&$n.tag===0&&!(be&6)&&Qr();var t=be;be|=1;var n=Vt.transition,r=Ee;try{if(Vt.transition=null,Ee=1,e)return e()}finally{Ee=r,Vt.transition=n,be=t,!(be&6)&&Jn()}}function Ac(){Pt=Ur.current,Pe(Ur)}function cr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,sg(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(vc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vo();break;case 3:ts(),Pe(Et),Pe(pt),Mc();break;case 5:Ec(r);break;case 4:ts();break;case 13:Pe(Ie);break;case 19:Pe(Ie);break;case 10:jc(r.type._context);break;case 22:case 23:Ac()}n=n.return}if(rt=e,Ve=e=Yn(e.current,null),lt=Pt=t,Ge=0,sl=null,Lc=qo=xr=0,Nt=Os=null,ar!==null){for(t=0;t<ar.length;t++)if(n=ar[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=s,r.next=a}n.pending=r}ar=null}return e}function sh(e,t){do{var n=Ve;try{if(kc(),no.current=Mo,Eo){for(var r=Le.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Eo=!1}if(hr=0,tt=Ke=Le=null,Is=!1,tl=0,Ic.current=null,n===null||n.return===null){Ge=1,sl=t,Ve=null;break}e:{var l=e,a=n.return,i=n,c=t;if(t=lt,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=i,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=Ju(a);if(x!==null){x.flags&=-257,Zu(x,a,i,l,t),x.mode&1&&qu(l,d,t),t=x,c=d;var w=t.updateQueue;if(w===null){var y=new Set;y.add(c),t.updateQueue=y}else w.add(c);break e}else{if(!(t&1)){qu(l,d,t),Fc();break e}c=Error(R(426))}}else if(ze&&i.mode&1){var b=Ju(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Zu(b,a,i,l,t),wc(ns(c,i));break e}}l=c=ns(c,i),Ge!==4&&(Ge=2),Os===null?Os=[l]:Os.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var g=Bp(l,c,t);Vu(l,g);break e;case 1:i=c;var m=l.type,v=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Vn===null||!Vn.has(v)))){l.flags|=65536,t&=-t,l.lanes|=t;var S=Up(l,i,t);Vu(l,S);break e}}l=l.return}while(l!==null)}ah(n)}catch(j){t=j,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function lh(){var e=_o.current;return _o.current=Mo,e===null?Mo:e}function Fc(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),rt===null||!(xr&268435455)&&!(qo&268435455)||Ln(rt,lt)}function Ro(e,t){var n=be;be|=2;var r=lh();(rt!==e||lt!==t)&&(yn=null,cr(e,t));do try{_g();break}catch(s){sh(e,s)}while(!0);if(kc(),be=n,_o.current=r,Ve!==null)throw Error(R(261));return rt=null,lt=0,Ge}function _g(){for(;Ve!==null;)oh(Ve)}function Tg(){for(;Ve!==null&&!tm();)oh(Ve)}function oh(e){var t=ch(e.alternate,e,Pt);e.memoizedProps=e.pendingProps,t===null?ah(e):Ve=t,Ic.current=null}function ah(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=jg(n,t),n!==null){n.flags&=32767,Ve=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ge=6,Ve=null;return}}else if(n=kg(n,t,Pt),n!==null){Ve=n;return}if(t=t.sibling,t!==null){Ve=t;return}Ve=t=e}while(t!==null);Ge===0&&(Ge=5)}function sr(e,t,n){var r=Ee,s=Vt.transition;try{Vt.transition=null,Ee=1,Dg(e,t,n,r)}finally{Vt.transition=s,Ee=r}return null}function Dg(e,t,n,r){do Qr();while($n!==null);if(be&6)throw Error(R(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(dm(e,l),e===rt&&(Ve=rt=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ol||(Ol=!0,uh(po,function(){return Qr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Vt.transition,Vt.transition=null;var a=Ee;Ee=1;var i=be;be|=4,Ic.current=null,Ng(e,n),th(n,e),qm(ki),xo=!!bi,ki=bi=null,e.current=n,Cg(n),nm(),be=i,Ee=a,Vt.transition=l}else e.current=n;if(Ol&&(Ol=!1,$n=e,Do=s),l=e.pendingLanes,l===0&&(Vn=null),lm(n.stateNode),_t(e,He()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(To)throw To=!1,e=Ui,Ui=null,e;return Do&1&&e.tag!==0&&Qr(),l=e.pendingLanes,l&1?e===Hi?$s++:($s=0,Hi=e):$s=0,Jn(),null}function Qr(){if($n!==null){var e=Bf(Do),t=Vt.transition,n=Ee;try{if(Vt.transition=null,Ee=16>e?16:e,$n===null)var r=!1;else{if(e=$n,$n=null,Do=0,be&6)throw Error(R(331));var s=be;for(be|=4,Y=e.current;Y!==null;){var l=Y,a=l.child;if(Y.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(Y=d;Y!==null;){var p=Y;switch(p.tag){case 0:case 11:case 15:Ls(8,p,l)}var f=p.child;if(f!==null)f.return=p,Y=f;else for(;Y!==null;){p=Y;var h=p.sibling,x=p.return;if(Jp(p),p===d){Y=null;break}if(h!==null){h.return=x,Y=h;break}Y=x}}}var w=l.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}Y=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,Y=a;else e:for(;Y!==null;){if(l=Y,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ls(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,Y=g;break e}Y=l.return}}var m=e.current;for(Y=m;Y!==null;){a=Y;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,Y=v;else e:for(a=m;Y!==null;){if(i=Y,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Go(9,i)}}catch(j){$e(i,i.return,j)}if(i===a){Y=null;break e}var S=i.sibling;if(S!==null){S.return=i.return,Y=S;break e}Y=i.return}}if(be=s,Jn(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Uo,e)}catch(j){}r=!0}return r}finally{Ee=n,Vt.transition=t}}return!1}function fd(e,t,n){t=ns(n,t),t=Bp(e,t,1),e=Wn(e,t,1),t=yt(),e!==null&&(ul(e,1,t),_t(e,t))}function $e(e,t,n){if(e.tag===3)fd(e,e,n);else for(;t!==null;){if(t.tag===3){fd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vn===null||!Vn.has(r))){e=ns(n,e),e=Up(t,e,1),t=Wn(t,e,1),e=yt(),t!==null&&(ul(t,1,e),_t(t,e));break}}t=t.return}}function Rg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=yt(),e.pingedLanes|=e.suspendedLanes&n,rt===e&&(lt&n)===n&&(Ge===4||Ge===3&&(lt&130023424)===lt&&500>He()-Oc?cr(e,0):Lc|=n),_t(e,t)}function ih(e,t){t===0&&(e.mode&1?(t=El,El<<=1,!(El&130023424)&&(El=4194304)):t=1);var n=yt();e=Nn(e,t),e!==null&&(ul(e,t,n),_t(e,n))}function Pg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ih(e,n)}function zg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(t),ih(e,n)}var ch;ch=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Et.current)Ct=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ct=!1,bg(e,t,n);Ct=!!(e.flags&131072)}else Ct=!1,ze&&t.flags&1048576&&pp(t,ko,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;so(e,t),e=t.pendingProps;var s=Jr(t,pt.current);Kr(t,n),s=Tc(null,t,r,e,s,n);var l=Dc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mt(r)?(l=!0,wo(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Nc(t),s.updater=Qo,t.stateNode=s,s._reactInternals=t,Di(t,r,e,n),t=zi(null,t,r,!0,l,n)):(t.tag=0,ze&&l&&yc(t),gt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(so(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Lg(r),e=qt(r,e),s){case 0:t=Pi(null,t,r,e,n);break e;case 1:t=nd(null,t,r,e,n);break e;case 11:t=ed(null,t,r,e,n);break e;case 14:t=td(null,t,r,qt(r.type,e),n);break e}throw Error(R(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),Pi(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),nd(e,t,r,s,n);case 3:e:{if(Xp(t),e===null)throw Error(R(387));r=t.pendingProps,l=t.memoizedState,s=l.element,vp(e,t),No(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=ns(Error(R(423)),t),t=rd(e,t,r,n,s);break e}else if(r!==s){s=ns(Error(R(424)),t),t=rd(e,t,r,n,s);break e}else for(zt=Hn(t.stateNode.containerInfo.firstChild),It=t,ze=!0,Zt=null,n=gp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zr(),r===s){t=Cn(e,t,n);break e}gt(e,t,r,n)}t=t.child}return t;case 5:return wp(t),e===null&&Mi(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,a=s.children,ji(r,s)?a=null:l!==null&&ji(r,l)&&(t.flags|=32),Vp(e,t),gt(e,t,a,n),t.child;case 6:return e===null&&Mi(t),null;case 13:return Yp(e,t,n);case 4:return Cc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=es(t,null,r,n):gt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),ed(e,t,r,s,n);case 7:return gt(e,t,t.pendingProps,n),t.child;case 8:return gt(e,t,t.pendingProps.children,n),t.child;case 12:return gt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,a=s.value,Te(jo,r._currentValue),r._currentValue=a,l!==null)if(nn(l.value,a)){if(l.children===s.children&&!Et.current){t=Cn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){a=l.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=kn(-1,n&-n),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),_i(l.return,n,t),i.lanes|=n;break}c=c.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(R(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),_i(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}gt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Kr(t,n),s=Xt(s),r=r(s),t.flags|=1,gt(e,t,r,n),t.child;case 14:return r=t.type,s=qt(r,t.pendingProps),s=qt(r.type,s),td(e,t,r,s,n);case 15:return Hp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),so(e,t),t.tag=1,Mt(r)?(e=!0,wo(t)):e=!1,Kr(t,n),Fp(t,r,s),Di(t,r,s,n),zi(null,t,r,!0,e,n);case 19:return Kp(e,t,n);case 22:return Wp(e,t,n)}throw Error(R(156,t.tag))};function uh(e,t){return Of(e,t)}function Ig(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(e,t,n,r){return new Ig(e,t,n,r)}function Bc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Lg(e){if(typeof e=="function")return Bc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oc)return 11;if(e===ac)return 14}return 2}function Yn(e,t){var n=e.alternate;return n===null?(n=Wt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ao(e,t,n,r,s,l){var a=2;if(r=e,typeof e=="function")Bc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Rr:return ur(n.children,s,l,t);case lc:a=8,s|=8;break;case ti:return e=Wt(12,n,t,s|2),e.elementType=ti,e.lanes=l,e;case ni:return e=Wt(13,n,t,s),e.elementType=ni,e.lanes=l,e;case ri:return e=Wt(19,n,t,s),e.elementType=ri,e.lanes=l,e;case wf:return Jo(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yf:a=10;break e;case vf:a=9;break e;case oc:a=11;break e;case ac:a=14;break e;case Rn:a=16,r=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=Wt(a,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function ur(e,t,n,r){return e=Wt(7,e,r,t),e.lanes=n,e}function Jo(e,t,n,r){return e=Wt(22,e,r,t),e.elementType=wf,e.lanes=n,e.stateNode={isHidden:!1},e}function Ba(e,t,n){return e=Wt(6,e,null,t),e.lanes=n,e}function Ua(e,t,n){return t=Wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Og(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ka(0),this.expirationTimes=ka(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ka(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,s,l,a,i,c){return e=new Og(e,t,n,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Wt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nc(l),e}function $g(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function dh(e){if(!e)return Qn;e=e._reactInternals;e:{if(vr(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var n=e.type;if(Mt(n))return dp(e,n,t)}return t}function fh(e,t,n,r,s,l,a,i,c){return e=Uc(n,r,!0,e,s,l,a,i,c),e.context=dh(null),n=e.current,r=yt(),s=Xn(n),l=kn(r,s),l.callback=t!=null?t:null,Wn(n,l,s),e.current.lanes=s,ul(e,s,r),_t(e,r),e}function Zo(e,t,n,r){var s=t.current,l=yt(),a=Xn(s);return n=dh(n),t.context===null?t.context=n:t.pendingContext=n,t=kn(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Wn(s,t,a),e!==null&&(tn(e,s,a,l),to(e,s,a)),a}function Po(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Hc(e,t){pd(e,t),(e=e.alternate)&&pd(e,t)}function Ag(){return null}var ph=typeof reportError=="function"?reportError:function(e){console.error(e)};function Wc(e){this._internalRoot=e}ea.prototype.render=Wc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));Zo(e,t,null,null)};ea.prototype.unmount=Wc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;mr(function(){Zo(null,e,null,null)}),t[Sn]=null}};function ea(e){this._internalRoot=e}ea.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<In.length&&t!==0&&t<In[n].priority;n++);In.splice(n,0,e),n===0&&Xf(e)}};function Vc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ta(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hd(){}function Fg(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var d=Po(a);l.call(d)}}var a=fh(t,r,e,0,null,!1,!1,"",hd);return e._reactRootContainer=a,e[Sn]=a.current,Gs(e.nodeType===8?e.parentNode:e),mr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var d=Po(c);i.call(d)}}var c=Uc(e,0,!1,null,null,!1,!1,"",hd);return e._reactRootContainer=c,e[Sn]=c.current,Gs(e.nodeType===8?e.parentNode:e),mr(function(){Zo(t,c,n,r)}),c}function na(e,t,n,r,s){var l=n._reactRootContainer;if(l){var a=l;if(typeof s=="function"){var i=s;s=function(){var c=Po(a);i.call(c)}}Zo(t,a,e,s)}else a=Fg(n,t,e,s,r);return Po(a)}Uf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ms(t.pendingLanes);n!==0&&(uc(t,n|1),_t(t,He()),!(be&6)&&(rs=He()+500,Jn()))}break;case 13:mr(function(){var r=Nn(e,1);if(r!==null){var s=yt();tn(r,e,1,s)}}),Hc(e,1)}};dc=function(e){if(e.tag===13){var t=Nn(e,134217728);if(t!==null){var n=yt();tn(t,e,134217728,n)}Hc(e,134217728)}};Hf=function(e){if(e.tag===13){var t=Xn(e),n=Nn(e,t);if(n!==null){var r=yt();tn(n,e,t,r)}Hc(e,t)}};Wf=function(){return Ee};Vf=function(e,t){var n=Ee;try{return Ee=e,t()}finally{Ee=n}};pi=function(e,t,n){switch(t){case"input":if(oi(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Xo(r);if(!s)throw Error(R(90));kf(r),oi(r,s)}}}break;case"textarea":Sf(e,n);break;case"select":t=n.value,t!=null&&Wr(e,!!n.multiple,t,!1)}};Df=$c;Rf=mr;var Bg={usingClientEntryPoint:!1,Events:[fl,Lr,Xo,_f,Tf,$c]},js={findFiberByHostInstance:or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ug={bundleType:js.bundleType,version:js.version,rendererPackageName:js.rendererPackageName,rendererConfig:js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=If(e),e===null?null:e.stateNode},findFiberByHostInstance:js.findFiberByHostInstance||Ag,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{Uo=$l.inject(Ug),pn=$l}catch(e){}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bg;Ot.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vc(t))throw Error(R(200));return $g(e,t,null,n)};Ot.createRoot=function(e,t){if(!Vc(e))throw Error(R(299));var n=!1,r="",s=ph;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Uc(e,1,!1,null,null,n,!1,r,s),e[Sn]=t.current,Gs(e.nodeType===8?e.parentNode:e),new Wc(t)};Ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=If(t),e=e===null?null:e.stateNode,e};Ot.flushSync=function(e){return mr(e)};Ot.hydrate=function(e,t,n){if(!ta(t))throw Error(R(200));return na(null,e,t,!0,n)};Ot.hydrateRoot=function(e,t,n){if(!Vc(e))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",a=ph;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=fh(t,null,e,1,n!=null?n:null,s,!1,l,a),e[Sn]=t.current,Gs(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new ea(t)};Ot.render=function(e,t,n){if(!ta(t))throw Error(R(200));return na(null,e,t,!1,n)};Ot.unmountComponentAtNode=function(e){if(!ta(e))throw Error(R(40));return e._reactRootContainer?(mr(function(){na(null,null,e,!1,function(){e._reactRootContainer=null,e[Sn]=null})}),!0):!1};Ot.unstable_batchedUpdates=$c;Ot.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ta(n))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return na(e,t,n,!1,r)};Ot.version="18.3.1-next-f1338f8080-20240426";function hh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hh)}catch(e){console.error(e)}}hh(),hf.exports=Ot;var Hr=hf.exports,xd=Hr;Za.createRoot=xd.createRoot,Za.hydrateRoot=xd.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ll(){return ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ll.apply(this,arguments)}var An;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(An||(An={}));const md="popstate";function Hg(e){e===void 0&&(e={});function t(s,l){let{pathname:a="/",search:i="",hash:c=""}=wr(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Xi("",{pathname:a,search:i,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(s,l){let a=s.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");i=d===-1?c:c.slice(0,d)}return i+"#"+(typeof l=="string"?l:xh(l))}function r(s,l){ra(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return Vg(t,n,r,e)}function qe(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function ra(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Wg(){return Math.random().toString(36).substr(2,8)}function gd(e,t){return{usr:e.state,key:e.key,idx:t}}function Xi(e,t,n,r){return n===void 0&&(n=null),ll({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?wr(t):t,{state:n,key:t&&t.key||r||Wg()})}function xh(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function wr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Vg(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,a=s.history,i=An.Pop,c=null,d=p();d==null&&(d=0,a.replaceState(ll({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function f(){i=An.Pop;let b=p(),g=b==null?null:b-d;d=b,c&&c({action:i,location:y.location,delta:g})}function h(b,g){i=An.Push;let m=Xi(y.location,b,g);n&&n(m,b),d=p()+1;let v=gd(m,d),S=y.createHref(m);try{a.pushState(v,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}l&&c&&c({action:i,location:y.location,delta:1})}function x(b,g){i=An.Replace;let m=Xi(y.location,b,g);n&&n(m,b),d=p();let v=gd(m,d),S=y.createHref(m);a.replaceState(v,"",S),l&&c&&c({action:i,location:y.location,delta:0})}function w(b){let g=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof b=="string"?b:xh(b);return m=m.replace(/ $/,"%20"),qe(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let y={get action(){return i},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(md,f),c=b,()=>{s.removeEventListener(md,f),c=null}},createHref(b){return t(s,b)},createURL:w,encodeLocation(b){let g=w(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:x,go(b){return a.go(b)}};return y}var yd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(yd||(yd={}));function Xg(e,t,n){return n===void 0&&(n="/"),Yg(e,t,n)}function Yg(e,t,n,r){let s=typeof t=="string"?wr(t):t,l=yh(s.pathname||"/",n);if(l==null)return null;let a=mh(e);Kg(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let d=oy(l);i=ry(a[c],d)}return i}function mh(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,a,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:a,route:l};c.relativePath.startsWith("/")&&(qe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=dr([r,c.relativePath]),p=n.concat(c);l.children&&l.children.length>0&&(qe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),mh(l.children,t,p,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:ty(d,l.index),routesMeta:p})};return e.forEach((l,a)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))s(l,a);else for(let c of gh(l.path))s(l,a,c)}),t}function gh(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let a=gh(r.join("/")),i=[];return i.push(...a.map(c=>c===""?l:[l,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Kg(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:ny(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Qg=/^:[\w-]+$/,Gg=3,qg=2,Jg=1,Zg=10,ey=-2,vd=e=>e==="*";function ty(e,t){let n=e.split("/"),r=n.length;return n.some(vd)&&(r+=ey),t&&(r+=qg),n.filter(s=>!vd(s)).reduce((s,l)=>s+(Qg.test(l)?Gg:l===""?Jg:Zg),r)}function ny(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function ry(e,t,n){let{routesMeta:r}=e,s={},l="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],d=i===r.length-1,p=l==="/"?t:t.slice(l.length)||"/",f=sy({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),h=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:dr([l,f.pathname]),pathnameBase:py(dr([l,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(l=dr([l,f.pathnameBase]))}return a}function sy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=ly(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],a=l.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((d,p,f)=>{let{paramName:h,isOptional:x}=p;if(h==="*"){let y=i[f]||"";a=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const w=i[f];return x&&!w?d[h]=void 0:d[h]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:a,pattern:e}}function ly(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ra(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function oy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ra(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function yh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const ay=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iy=e=>ay.test(e);function cy(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?wr(e):e,l;if(n)if(iy(n))l=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),ra(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?l=wd(n.substring(1),"/"):l=wd(n,t)}else l=t;return{pathname:l,search:hy(r),hash:xy(s)}}function wd(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ha(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uy(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function dy(e,t){let n=uy(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function fy(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=wr(e):(s=ll({},e),qe(!s.pathname||!s.pathname.includes("?"),Ha("?","pathname","search",s)),qe(!s.pathname||!s.pathname.includes("#"),Ha("#","pathname","hash",s)),qe(!s.search||!s.search.includes("#"),Ha("#","search","hash",s)));let l=e===""||s.pathname==="",a=l?"/":s.pathname,i;if(a==null)i=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}i=f>=0?t[f]:"/"}let c=cy(s,i),d=a&&a!=="/"&&a.endsWith("/"),p=(l||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const dr=e=>e.join("/").replace(/\/\/+/g,"/"),py=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),hy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,xy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function my(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const vh=["post","put","patch","delete"];new Set(vh);const gy=["get",...vh];new Set(gy);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ol.apply(this,arguments)}const Xc=u.createContext(null),yy=u.createContext(null),sa=u.createContext(null),la=u.createContext(null),br=u.createContext({outlet:null,matches:[],isDataRoute:!1}),wh=u.createContext(null);function oa(){return u.useContext(la)!=null}function Yc(){return oa()||qe(!1),u.useContext(la).location}function bh(e){u.useContext(sa).static||u.useLayoutEffect(e)}function At(){let{isDataRoute:e}=u.useContext(br);return e?Dy():vy()}function vy(){oa()||qe(!1);let e=u.useContext(Xc),{basename:t,future:n,navigator:r}=u.useContext(sa),{matches:s}=u.useContext(br),{pathname:l}=Yc(),a=JSON.stringify(dy(s,n.v7_relativeSplatPath)),i=u.useRef(!1);return bh(()=>{i.current=!0}),u.useCallback(function(d,p){if(p===void 0&&(p={}),!i.current)return;if(typeof d=="number"){r.go(d);return}let f=fy(d,JSON.parse(a),l,p.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:dr([t,f.pathname])),(p.replace?r.replace:r.push)(f,p.state,p)},[t,r,a,l,e])}function kh(){let{matches:e}=u.useContext(br),t=e[e.length-1];return t?t.params:{}}function wy(e,t){return by(e,t)}function by(e,t,n,r){oa()||qe(!1);let{navigator:s}=u.useContext(sa),{matches:l}=u.useContext(br),a=l[l.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Yc(),p;if(t){var f;let b=typeof t=="string"?wr(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||qe(!1),p=b}else p=d;let h=p.pathname||"/",x=h;if(c!=="/"){let b=c.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=Xg(e,{pathname:x}),y=Cy(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},i,b.params),pathname:dr([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:dr([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,n,r);return t&&y?u.createElement(la.Provider,{value:{location:ol({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:An.Pop}},y):y}function ky(){let e=Ty(),t=my(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:s},n):null,null)}const jy=u.createElement(ky,null);class Sy extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(br.Provider,{value:this.props.routeContext},u.createElement(wh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ny(e){let{routeContext:t,match:n,children:r}=e,s=u.useContext(Xc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(br.Provider,{value:t},r)}function Cy(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let p=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);p>=0||qe(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let f=a[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=p),f.route.id){let{loaderData:h,errors:x}=n,w=f.route.loader&&h[f.route.id]===void 0&&(!x||x[f.route.id]===void 0);if(f.route.lazy||w){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,f,h)=>{let x,w=!1,y=null,b=null;n&&(x=i&&f.route.id?i[f.route.id]:void 0,y=f.route.errorElement||jy,c&&(d<0&&h===0?(Ry("route-fallback"),w=!0,b=null):d===h&&(w=!0,b=f.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,h+1)),m=()=>{let v;return x?v=y:w?v=b:f.route.Component?v=u.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=p,u.createElement(Ny,{match:f,routeContext:{outlet:p,matches:g,isDataRoute:n!=null},children:v})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?u.createElement(Sy,{location:n.location,revalidation:n.revalidation,component:y,error:x,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var jh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(jh||{}),Sh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Sh||{});function Ey(e){let t=u.useContext(Xc);return t||qe(!1),t}function My(e){let t=u.useContext(yy);return t||qe(!1),t}function _y(e){let t=u.useContext(br);return t||qe(!1),t}function Nh(e){let t=_y(),n=t.matches[t.matches.length-1];return n.route.id||qe(!1),n.route.id}function Ty(){var e;let t=u.useContext(wh),n=My(),r=Nh();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Dy(){let{router:e}=Ey(jh.UseNavigateStable),t=Nh(Sh.UseNavigateStable),n=u.useRef(!1);return bh(()=>{n.current=!0}),u.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ol({fromRouteId:t},l)))},[e,t])}const bd={};function Ry(e,t,n){bd[e]||(bd[e]=!0)}function Py(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function dt(e){qe(!1)}function zy(e){let{basename:t="/",children:n=null,location:r,navigationType:s=An.Pop,navigator:l,static:a=!1,future:i}=e;oa()&&qe(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:l,static:a,future:ol({v7_relativeSplatPath:!1},i)}),[c,i,l,a]);typeof r=="string"&&(r=wr(r));let{pathname:p="/",search:f="",hash:h="",state:x=null,key:w="default"}=r,y=u.useMemo(()=>{let b=yh(p,c);return b==null?null:{location:{pathname:b,search:f,hash:h,state:x,key:w},navigationType:s}},[c,p,f,h,x,w,s]);return y==null?null:u.createElement(sa.Provider,{value:d},u.createElement(la.Provider,{children:n,value:y}))}function Iy(e){let{children:t,location:n}=e;return wy(Yi(t),n)}new Promise(()=>{});function Yi(e,t){t===void 0&&(t=[]);let n=[];return u.Children.forEach(e,(r,s)=>{if(!u.isValidElement(r))return;let l=[...t,s];if(r.type===u.Fragment){n.push.apply(n,Yi(r.props.children,l));return}r.type!==dt&&qe(!1),!r.props.index||!r.props.children||qe(!1);let a={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Yi(r.props.children,l)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Ly="6";try{window.__reactRouterVersion=Ly}catch(e){}const Oy="startTransition",kd=Rx[Oy];function $y(e){let{basename:t,children:n,future:r,window:s}=e,l=u.useRef();l.current==null&&(l.current=Hg({window:s,v5Compat:!0}));let a=l.current,[i,c]=u.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},p=u.useCallback(f=>{d&&kd?kd(()=>c(f)):c(f)},[c,d]);return u.useLayoutEffect(()=>a.listen(p),[a,p]),u.useEffect(()=>Py(r),[r]),u.createElement(zy,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}var jd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(jd||(jd={}));var Sd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Sd||(Sd={}));const Kc="";async function Nd(){var r,s;const e=localStorage.getItem("whisper_token");if(e)return e;const t=(s=(r=window.Telegram)==null?void 0:r.WebApp)==null?void 0:s.initData;if(t){const a=await(await fetch(`${Kc}/api/auth/telegram`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:t})})).json();if(a.success&&a.token)return localStorage.setItem("whisper_token",a.token),a.token}const n=new Error("need_login");throw n.code="NEED_LOGIN",n}async function A(e,t={}){let n=await Nd();const r=`${Kc}${e}`,s=a=>fetch(r,{...t,cache:"no-store",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`,...t.headers},body:t.body?JSON.stringify(t.body):void 0});let l=await s(n);if(l.status===401&&(localStorage.removeItem("whisper_token"),n=await Nd(),l=await s(n)),l.status===204)return null;if(!l.ok){const a=await l.json().catch(()=>({}));throw new Error(a.detail||` (${l.status})`)}return l.json()}async function Ay(e){const n=await(await fetch(`${Kc}/api/auth/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})})).json();if(n.success&&n.token)return localStorage.setItem("whisper_token",n.token),!0;throw new Error(n.detail||"")}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ch=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var By={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:a,...i},c)=>u.createElement("svg",{ref:c,...By,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Ch("lucide",s),...i},[...a.map(([d,p])=>u.createElement(d,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(e,t)=>{const n=u.forwardRef(({className:r,...s},l)=>u.createElement(Uy,{ref:l,iconNode:t,className:Ch(`lucide-${Fy(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=me("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=me("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=me("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=me("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=me("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=me("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=me("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=me("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=me("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=me("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=me("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=me("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=me("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=me("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=me("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=me("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=me("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=me("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=me("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=me("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=me("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=me("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=me("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=me("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=me("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ov="WhisperMiniDB",av=1,os="avatars",Th=()=>new Promise((e,t)=>{const n=indexedDB.open(ov,av);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(os)||r.createObjectStore(os,{keyPath:"key"})}}),Ki=async(e,t)=>{const n=await Th();return new Promise((r,s)=>{const l=n.transaction([os],"readwrite");l.objectStore(os).put({key:e,base64:t}),l.oncomplete=()=>r(),l.onerror=()=>s(l.error)})},fs=async e=>{const t=await Th();return new Promise((n,r)=>{const l=t.transaction([os],"readonly").objectStore(os).get(e);l.onsuccess=()=>{var a;return n(((a=l.result)==null?void 0:a.base64)||null)},l.onerror=()=>r(l.error)})},St={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function _r({icon:e,label:t,desc:n,disabled:r,onClick:s,badge:l}){const[a,i]=u.useState(!1),c=()=>!r&&i(!0),d=()=>{i(!1),r||s==null||s()};return o.jsxs("button",{className:"flex flex-col items-start rounded-[18px] gap-2 text-left",style:{padding:"16px 14px",background:St.bg,boxShadow:a?"inset 3px 3px 8px rgba(174,176,182,0.5), inset -3px -3px 8px #ffffff":"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff",opacity:r?.4:1,transform:a?"scale(0.97)":"scale(1)",transition:"transform 0.1s, box-shadow 0.1s",cursor:r?"default":"pointer",WebkitTapHighlightColor:"transparent"},disabled:r,onTouchStart:c,onTouchEnd:d,onMouseDown:c,onMouseUp:d,onMouseLeave:()=>i(!1),children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-[12px]",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))"},children:e}),l&&o.jsx("div",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full",style:{background:"#ef4444",border:"2px solid var(--bg)"}})]}),o.jsxs("div",{className:"pl-1",children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:St.text},children:t}),o.jsx("div",{className:"mt-0.5 text-[10px] leading-snug",style:{color:St.textMuted},children:n})]})]})}function Md({children:e}){return o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-[3px]",style:{color:St.textMuted},children:e})}function iv(){const e=At(),[t,n]=u.useState(()=>{try{return JSON.parse(localStorage.getItem("whisper_profile")||"null")}catch(d){return null}}),[r,s]=u.useState(null),[l,a]=u.useState(!1);u.useEffect(()=>{A("/api/user/profile").then(d=>{n(d),localStorage.setItem("whisper_profile",JSON.stringify(d))}).catch(()=>{}),fs("user-avatar").then(d=>{d&&s(d)}).catch(function(){}),A("/api/diary/unread-count").then(d=>{d.count>0&&a(!0)}).catch(()=>{})},[]);const i=(t==null?void 0:t.nickname)||"",c=(t==null?void 0:t.background_url)||"";return o.jsxs("div",{className:"flex flex-col overflow-y-auto",style:{background:St.bg,height:"100%",paddingBottom:16},children:[o.jsxs("div",{className:"flex flex-col px-5",style:{paddingTop:"max(12px, env(safe-area-inset-top))"},children:[o.jsx("h1",{className:"mb-4 text-center text-[17px] font-medium",style:{color:St.textMuted,letterSpacing:"4px"},children:"W H I S P E R"}),o.jsxs("button",{className:"mb-5 flex w-full items-center gap-4 rounded-[20px] p-5 text-left",style:{background:St.bg,boxShadow:"6px 6px 14px rgba(174,176,182,0.5), -6px -6px 14px #ffffff"},onClick:()=>e("/profile"),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:52,height:52,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:St.bg},children:r?o.jsx("img",{src:r,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:22},children:""})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"text-[17px] font-bold truncate",style:{color:St.text},children:["@",i]}),o.jsxs("div",{className:"mt-0.5 text-[11px] italic",style:{color:St.textMuted},children:['"',c,'"']})]}),o.jsx(ss,{size:16,style:{color:St.textMuted,flexShrink:0}})]}),o.jsx(Md,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(_r,{icon:o.jsx(Qc,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/world-books")}),o.jsx(_r,{icon:o.jsx(Wy,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/memories")}),o.jsx(_r,{icon:o.jsx(Eh,{size:18,color:"white"}),label:"",desc:"Core Blocks",onClick:()=>e("/assistants")}),o.jsx(_r,{icon:o.jsx(rv,{size:18,color:"white"}),label:"",desc:"API",onClick:()=>e("/settings")})]}),o.jsx(Md,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(_r,{icon:o.jsx(Hy,{size:18,color:"white"}),label:"",desc:"",badge:l,onClick:()=>e("/diary")}),o.jsx(_r,{icon:o.jsx(sv,{size:18,color:"white"}),label:"",desc:"",disabled:!0})]}),o.jsx("button",{className:"flex w-full items-center justify-center rounded-[18px] py-4",style:{background:St.bg,boxShadow:"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff"},onClick:()=>e("/cot"),children:o.jsx(Gy,{size:32,fill:St.accent,style:{color:St.accent,animation:"heartbeat 2s ease-in-out infinite"}})})]}),o.jsx("style",{children:`
        @keyframes heartbeat {
          0%, 100% { transform: scale(1); }
          15% { transform: scale(1.15); }
          30% { transform: scale(1); }
          45% { transform: scale(1.1); }
          60% { transform: scale(1); }
        }
      `})]})}function cv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const ca=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function ps(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function qc(e){return"nodeType"in e}function bt(e){var t,n;return e?ps(e)?e:qc(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Jc(e){const{Document:t}=bt(e);return e instanceof t}function yl(e){return ps(e)?!1:e instanceof bt(e).HTMLElement}function Dh(e){return e instanceof bt(e).SVGElement}function hs(e){return e?ps(e)?e.document:qc(e)?Jc(e)?e:yl(e)||Dh(e)?e.ownerDocument:document:document:document}const rn=ca?u.useLayoutEffect:u.useEffect;function ua(e){const t=u.useRef(e);return rn(()=>{t.current=e}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function uv(){const e=u.useRef(null),t=u.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=u.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function al(e,t){t===void 0&&(t=[e]);const n=u.useRef(e);return rn(()=>{n.current!==e&&(n.current=e)},t),n}function vl(e,t){const n=u.useRef();return u.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function zo(e){const t=ua(e),n=u.useRef(null),r=u.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function Io(e){const t=u.useRef();return u.useEffect(()=>{t.current=e},[e]),t.current}let Wa={};function wl(e,t){return u.useMemo(()=>{if(t)return t;const n=Wa[e]==null?0:Wa[e]+1;return Wa[e]=n,e+"-"+n},[e,t])}function Rh(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const i=Object.entries(a);for(const[c,d]of i){const p=l[c];p!=null&&(l[c]=p+e*d)}return l},{...t})}}const Gr=Rh(1),Lo=Rh(-1);function dv(e){return"clientX"in e&&"clientY"in e}function da(e){if(!e)return!1;const{KeyboardEvent:t}=bt(e.target);return t&&e instanceof t}function fv(e){if(!e)return!1;const{TouchEvent:t}=bt(e.target);return t&&e instanceof t}function Oo(e){if(fv(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return dv(e)?{x:e.clientX,y:e.clientY}:null}const En=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[En.Translate.toString(e),En.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),_d="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function pv(e){return e.matches(_d)?e:e.querySelector(_d)}const hv={display:"none"};function xv(e){let{id:t,value:n}=e;return Re.createElement("div",{id:t,style:hv},n)}function mv(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Re.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function gv(){const[e,t]=u.useState("");return{announce:u.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Ph=u.createContext(null);function yv(e){const t=u.useContext(Ph);u.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function vv(){const[e]=u.useState(()=>new Set),t=u.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[u.useCallback(r=>{let{type:s,event:l}=r;e.forEach(a=>{var i;return(i=a[s])==null?void 0:i.call(a,l)})},[e]),t]}const wv={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},bv={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function kv(e){let{announcements:t=bv,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=wv}=e;const{announce:l,announcement:a}=gv(),i=wl("DndLiveRegion"),[c,d]=u.useState(!1);if(u.useEffect(()=>{d(!0)},[]),yv(u.useMemo(()=>({onDragStart(f){let{active:h}=f;l(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:x}=f;t.onDragMove&&l(t.onDragMove({active:h,over:x}))},onDragOver(f){let{active:h,over:x}=f;l(t.onDragOver({active:h,over:x}))},onDragEnd(f){let{active:h,over:x}=f;l(t.onDragEnd({active:h,over:x}))},onDragCancel(f){let{active:h,over:x}=f;l(t.onDragCancel({active:h,over:x}))}}),[l,t])),!c)return null;const p=Re.createElement(Re.Fragment,null,Re.createElement(xv,{id:r,value:s.draggable}),Re.createElement(mv,{id:i,announcement:a}));return n?Hr.createPortal(p,n):p}var Qe;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Qe||(Qe={}));function $o(){}function Ao(e,t){return u.useMemo(()=>({sensor:e,options:t!=null?t:{}}),[e,t])}function zh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const sn=Object.freeze({x:0,y:0});function jv(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Sv(e,t){const n=Oo(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function Nv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Cv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Ev(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Td(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Ih=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=Td(t,t.left,t.top),l=[];for(const a of r){const{id:i}=a,c=n.get(i);if(c){const d=jv(Td(c),s);l.push({id:i,data:{droppableContainer:a,value:d}})}}return l.sort(Nv)};function Mv(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height),a=s-r,i=l-n;if(r<s&&n<l){const c=t.width*t.height,d=e.width*e.height,p=a*i,f=p/(c+d-p);return Number(f.toFixed(4))}return 0}const _v=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const l of r){const{id:a}=l,i=n.get(a);if(i){const c=Mv(i,t);c>0&&s.push({id:a,data:{droppableContainer:l,value:c}})}}return s.sort(Cv)};function Tv(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Lh(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:sn}function Dv(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,i)=>({...a,top:a.top+e*i.y,bottom:a.bottom+e*i.y,left:a.left+e*i.x,right:a.right+e*i.x}),{...n})}}const Rv=Dv(1);function Oh(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Pv(e,t,n){const r=Oh(t);if(!r)return e;const{scaleX:s,scaleY:l,x:a,y:i}=r,c=e.left-a-(1-s)*parseFloat(n),d=e.top-i-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),p=s?e.width/s:e.width,f=l?e.height/l:e.height;return{width:p,height:f,top:d,right:c+p,bottom:d+f,left:c}}const zv={ignoreTransform:!1};function xs(e,t){t===void 0&&(t=zv);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:p}=bt(e).getComputedStyle(e);d&&(n=Pv(n,d,p))}const{top:r,left:s,width:l,height:a,bottom:i,right:c}=n;return{top:r,left:s,width:l,height:a,bottom:i,right:c}}function Dd(e){return xs(e,{ignoreTransform:!0})}function Iv(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Lv(e,t){return t===void 0&&(t=bt(e).getComputedStyle(e)),t.position==="fixed"}function Ov(e,t){t===void 0&&(t=bt(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=t[s];return typeof l=="string"?n.test(l):!1})}function Zc(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Jc(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!yl(s)||Dh(s)||n.includes(s))return n;const l=bt(e).getComputedStyle(s);return s!==e&&Ov(s,l)&&n.push(s),Lv(s,l)?n:r(s.parentNode)}return e?r(e):n}function $h(e){const[t]=Zc(e,1);return t!=null?t:null}function Va(e){return!ca||!e?null:ps(e)?e:qc(e)?Jc(e)||e===hs(e).scrollingElement?window:yl(e)?e:null:null}function Ah(e){return ps(e)?e.scrollX:e.scrollLeft}function Fh(e){return ps(e)?e.scrollY:e.scrollTop}function Qi(e){return{x:Ah(e),y:Fh(e)}}var nt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(nt||(nt={}));function Bh(e){return!ca||!e?!1:e===document.scrollingElement}function Uh(e){const t={x:0,y:0},n=Bh(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,l=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:i,maxScroll:r,minScroll:t}}const $v={x:.2,y:.2};function Av(e,t,n,r,s){let{top:l,left:a,right:i,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=$v);const{isTop:d,isBottom:p,isLeft:f,isRight:h}=Uh(e),x={x:0,y:0},w={x:0,y:0},y={height:t.height*s.y,width:t.width*s.x};return!d&&l<=t.top+y.height?(x.y=nt.Backward,w.y=r*Math.abs((t.top+y.height-l)/y.height)):!p&&c>=t.bottom-y.height&&(x.y=nt.Forward,w.y=r*Math.abs((t.bottom-y.height-c)/y.height)),!h&&i>=t.right-y.width?(x.x=nt.Forward,w.x=r*Math.abs((t.right-y.width-i)/y.width)):!f&&a<=t.left+y.width&&(x.x=nt.Backward,w.x=r*Math.abs((t.left+y.width-a)/y.width)),{direction:x,speed:w}}function Fv(e){if(e===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function Hh(e){return e.reduce((t,n)=>Gr(t,Qi(n)),sn)}function Bv(e){return e.reduce((t,n)=>t+Ah(n),0)}function Uv(e){return e.reduce((t,n)=>t+Fh(n),0)}function Wh(e,t){if(t===void 0&&(t=xs),!e)return;const{top:n,left:r,bottom:s,right:l}=t(e);$h(e)&&(s<=0||l<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Hv=[["x",["left","right"],Bv],["y",["top","bottom"],Uv]];class eu{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Zc(n),s=Hh(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[l,a,i]of Hv)for(const c of a)Object.defineProperty(this,c,{get:()=>{const d=i(r),p=s[l]-d;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class As{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Wv(e){const{EventTarget:t}=bt(e);return e instanceof t?e:hs(e)}function Xa(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Bt;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Bt||(Bt={}));function Rd(e){e.preventDefault()}function Vv(e){e.stopPropagation()}var je;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(je||(je={}));const Vh={start:[je.Space,je.Enter],cancel:[je.Esc],end:[je.Space,je.Enter,je.Tab]},Xv=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case je.Right:return{...n,x:n.x+25};case je.Left:return{...n,x:n.x-25};case je.Down:return{...n,y:n.y+25};case je.Up:return{...n,y:n.y-25}}};class Xh{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new As(hs(n)),this.windowListeners=new As(bt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Bt.Resize,this.handleCancel),this.windowListeners.add(Bt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Bt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Wh(r),n(sn)}handleKeyDown(t){if(da(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:l=Vh,coordinateGetter:a=Xv,scrollBehavior:i="smooth"}=s,{code:c}=t;if(l.end.includes(c)){this.handleEnd(t);return}if(l.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:sn;this.referenceCoordinates||(this.referenceCoordinates=p);const f=a(t,{active:n,context:r.current,currentCoordinates:p});if(f){const h=Lo(f,p),x={x:0,y:0},{scrollableAncestors:w}=r.current;for(const y of w){const b=t.code,{isTop:g,isRight:m,isLeft:v,isBottom:S,maxScroll:j,minScroll:N}=Uh(y),k=Fv(y),E={x:Math.min(b===je.Right?k.right-k.width/2:k.right,Math.max(b===je.Right?k.left:k.left+k.width/2,f.x)),y:Math.min(b===je.Down?k.bottom-k.height/2:k.bottom,Math.max(b===je.Down?k.top:k.top+k.height/2,f.y))},T=b===je.Right&&!m||b===je.Left&&!v,P=b===je.Down&&!S||b===je.Up&&!g;if(T&&E.x!==f.x){const L=y.scrollLeft+h.x,oe=b===je.Right&&L<=j.x||b===je.Left&&L>=N.x;if(oe&&!h.y){y.scrollTo({left:L,behavior:i});return}oe?x.x=y.scrollLeft-L:x.x=b===je.Right?y.scrollLeft-j.x:y.scrollLeft-N.x,x.x&&y.scrollBy({left:-x.x,behavior:i});break}else if(P&&E.y!==f.y){const L=y.scrollTop+h.y,oe=b===je.Down&&L<=j.y||b===je.Up&&L>=N.y;if(oe&&!h.x){y.scrollTo({top:L,behavior:i});return}oe?x.y=y.scrollTop-L:x.y=b===je.Down?y.scrollTop-j.y:y.scrollTop-N.y,x.y&&y.scrollBy({top:-x.y,behavior:i});break}}this.handleMove(t,Gr(Lo(f,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Xh.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Vh,onActivation:s}=t,{active:l}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const i=l.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function Pd(e){return!!(e&&"distance"in e)}function zd(e){return!!(e&&"delay"in e)}class tu{constructor(t,n,r){var s;r===void 0&&(r=Wv(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:l}=t,{target:a}=l;this.props=t,this.events=n,this.document=hs(a),this.documentListeners=new As(this.document),this.listeners=new As(r),this.windowListeners=new As(bt(a)),this.initialCoordinates=(s=Oo(l))!=null?s:sn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Bt.Resize,this.handleCancel),this.windowListeners.add(Bt.DragStart,Rd),this.windowListeners.add(Bt.VisibilityChange,this.handleCancel),this.windowListeners.add(Bt.ContextMenu,Rd),this.documentListeners.add(Bt.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(zd(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Pd(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Bt.Click,Vv,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Bt.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:i}}=l;if(!s)return;const c=(n=Oo(t))!=null?n:sn,d=Lo(s,c);if(!r&&i){if(Pd(i)){if(i.tolerance!=null&&Xa(d,i.tolerance))return this.handleCancel();if(Xa(d,i.distance))return this.handleStart()}if(zd(i)&&Xa(d,i.tolerance))return this.handleCancel();this.handlePending(i,d);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===je.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Yv={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class fa extends tu{constructor(t){const{event:n}=t,r=hs(n.target);super(t,Yv,r)}}fa.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Kv={move:{name:"mousemove"},end:{name:"mouseup"}};var Gi;(function(e){e[e.RightClick=2]="RightClick"})(Gi||(Gi={}));class Qv extends tu{constructor(t){super(t,Kv,hs(t.event.target))}}Qv.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Gi.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ya={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class nu extends tu{constructor(t){super(t,Ya)}static setup(){return window.addEventListener(Ya.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ya.move.name,t)};function t(){}}}nu.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Fs;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Fs||(Fs={}));var Fo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Fo||(Fo={}));function Gv(e){let{acceleration:t,activator:n=Fs.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:i=Fo.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:p,delta:f,threshold:h}=e;const x=Jv({delta:f,disabled:!l}),[w,y]=uv(),b=u.useRef({x:0,y:0}),g=u.useRef({x:0,y:0}),m=u.useMemo(()=>{switch(n){case Fs.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Fs.DraggableRect:return s}},[n,s,c]),v=u.useRef(null),S=u.useCallback(()=>{const N=v.current;if(!N)return;const k=b.current.x*g.current.x,E=b.current.y*g.current.y;N.scrollBy(k,E)},[]),j=u.useMemo(()=>i===Fo.TreeOrder?[...d].reverse():d,[i,d]);u.useEffect(()=>{if(!l||!d.length||!m){y();return}for(const N of j){if((r==null?void 0:r(N))===!1)continue;const k=d.indexOf(N),E=p[k];if(!E)continue;const{direction:T,speed:P}=Av(N,E,m,t,h);for(const L of["x","y"])x[L][T[L]]||(P[L]=0,T[L]=0);if(P.x>0||P.y>0){y(),v.current=N,w(S,a),b.current=P,g.current=T;return}}b.current={x:0,y:0},g.current={x:0,y:0},y()},[t,S,r,y,l,a,JSON.stringify(m),JSON.stringify(x),w,d,j,p,JSON.stringify(h)])}const qv={x:{[nt.Backward]:!1,[nt.Forward]:!1},y:{[nt.Backward]:!1,[nt.Forward]:!1}};function Jv(e){let{delta:t,disabled:n}=e;const r=Io(t);return vl(s=>{if(n||!r||!s)return qv;const l={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[nt.Backward]:s.x[nt.Backward]||l.x===-1,[nt.Forward]:s.x[nt.Forward]||l.x===1},y:{[nt.Backward]:s.y[nt.Backward]||l.y===-1,[nt.Forward]:s.y[nt.Forward]||l.y===1}}},[n,t,r])}function Zv(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return vl(s=>{var l;return t==null?null:(l=r!=null?r:s)!=null?l:null},[r,t])}function e1(e,t){return u.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...l]},[]),[e,t])}var il;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(il||(il={}));var qi;(function(e){e.Optimized="optimized"})(qi||(qi={}));const Id=new Map;function t1(e,t){let{dragging:n,dependencies:r,config:s}=t;const[l,a]=u.useState(null),{frequency:i,measure:c,strategy:d}=s,p=u.useRef(e),f=b(),h=al(f),x=u.useCallback(function(g){g===void 0&&(g=[]),!h.current&&a(m=>m===null?g:m.concat(g.filter(v=>!m.includes(v))))},[h]),w=u.useRef(null),y=vl(g=>{if(f&&!n)return Id;if(!g||g===Id||p.current!==e||l!=null){const m=new Map;for(let v of e){if(!v)continue;if(l&&l.length>0&&!l.includes(v.id)&&v.rect.current){m.set(v.id,v.rect.current);continue}const S=v.node.current,j=S?new eu(c(S),S):null;v.rect.current=j,j&&m.set(v.id,j)}return m}return g},[e,l,n,f,c]);return u.useEffect(()=>{p.current=e},[e]),u.useEffect(()=>{f||x()},[n,f]),u.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),u.useEffect(()=>{f||typeof i!="number"||w.current!==null||(w.current=setTimeout(()=>{x(),w.current=null},i))},[i,f,x,...r]),{droppableRects:y,measureDroppableContainers:x,measuringScheduled:l!=null};function b(){switch(d){case il.Always:return!1;case il.BeforeDragging:return n;default:return!n}}}function ru(e,t){return vl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function n1(e,t){return ru(e,t)}function r1(e){let{callback:t,disabled:n}=e;const r=ua(t),s=u.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:l}=window;return new l(r)},[r,n]);return u.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function pa(e){let{callback:t,disabled:n}=e;const r=ua(t),s=u.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:l}=window;return new l(r)},[n]);return u.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function s1(e){return new eu(xs(e),e)}function Ld(e,t,n){t===void 0&&(t=s1);const[r,s]=u.useState(null);function l(){s(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c!=null?c:n)!=null?d:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=r1({callback(c){if(e)for(const d of c){const{type:p,target:f}=d;if(p==="childList"&&f instanceof HTMLElement&&f.contains(e)){l();break}}}}),i=pa({callback:l});return rn(()=>{l(),e?(i==null||i.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),a==null||a.disconnect())},[e]),r}function l1(e){const t=ru(e);return Lh(e,t)}const Od=[];function o1(e){const t=u.useRef(e),n=vl(r=>e?r&&r!==Od&&e&&t.current&&e.parentNode===t.current.parentNode?r:Zc(e):Od,[e]);return u.useEffect(()=>{t.current=e},[e]),n}function a1(e){const[t,n]=u.useState(null),r=u.useRef(e),s=u.useCallback(l=>{const a=Va(l.target);a&&n(i=>i?(i.set(a,Qi(a)),new Map(i)):null)},[]);return u.useEffect(()=>{const l=r.current;if(e!==l){a(l);const i=e.map(c=>{const d=Va(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,Qi(d)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=e}return()=>{a(e),a(l)};function a(i){i.forEach(c=>{const d=Va(c);d==null||d.removeEventListener("scroll",s)})}},[s,e]),u.useMemo(()=>e.length?t?Array.from(t.values()).reduce((l,a)=>Gr(l,a),sn):Hh(e):sn,[e,t])}function $d(e,t){t===void 0&&(t=[]);const n=u.useRef(null);return u.useEffect(()=>{n.current=null},t),u.useEffect(()=>{const r=e!==sn;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Lo(e,n.current):sn}function i1(e){u.useEffect(()=>{if(!ca)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function c1(e,t){return u.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:l}=r;return n[s]=a=>{l(a,t)},n},{}),[e,t])}function Yh(e){return u.useMemo(()=>e?Iv(e):null,[e])}const Ad=[];function u1(e,t){t===void 0&&(t=xs);const[n]=e,r=Yh(n?bt(n):null),[s,l]=u.useState(Ad);function a(){l(()=>e.length?e.map(c=>Bh(c)?r:new eu(t(c),c)):Ad)}const i=pa({callback:a});return rn(()=>{i==null||i.disconnect(),a(),e.forEach(c=>i==null?void 0:i.observe(c))},[e]),s}function Kh(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return yl(t)?t:e}function d1(e){let{measure:t}=e;const[n,r]=u.useState(null),s=u.useCallback(d=>{for(const{target:p}of d)if(yl(p)){r(f=>{const h=t(p);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),l=pa({callback:s}),a=u.useCallback(d=>{const p=Kh(d);l==null||l.disconnect(),p&&(l==null||l.observe(p)),r(p?t(p):null)},[t,l]),[i,c]=zo(a);return u.useMemo(()=>({nodeRef:i,rect:n,setRef:c}),[n,i,c])}const f1=[{sensor:fa,options:{}},{sensor:Xh,options:{}}],p1={current:{}},io={draggable:{measure:Dd},droppable:{measure:Dd,strategy:il.WhileDragging,frequency:qi.Optimized},dragOverlay:{measure:xs}};class Bs extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const h1={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Bs,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:$o},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:io,measureDroppableContainers:$o,windowRect:null,measuringScheduled:!1},Qh={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:$o,draggableNodes:new Map,over:null,measureDroppableContainers:$o},bl=u.createContext(Qh),Gh=u.createContext(h1);function x1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Bs}}}function m1(e,t){switch(t.type){case Qe.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Qe.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Qe.DragEnd:case Qe.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Qe.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Bs(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Qe.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,l=e.droppable.containers.get(n);if(!l||r!==l.key)return e;const a=new Bs(e.droppable.containers);return a.set(n,{...l,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case Qe.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const l=new Bs(e.droppable.containers);return l.delete(n),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function g1(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=u.useContext(bl),l=Io(r),a=Io(n==null?void 0:n.id);return u.useEffect(()=>{if(!t&&!r&&l&&a!=null){if(!da(l)||document.activeElement===l.target)return;const i=s.get(a);if(!i)return;const{activatorNode:c,node:d}=i;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[c.current,d.current]){if(!p)continue;const f=pv(p);if(f){f.focus();break}}})}},[r,t,s,a,l]),null}function qh(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,l)=>l({transform:s,...r}),n):n}function y1(e){return u.useMemo(()=>({draggable:{...io.draggable,...e==null?void 0:e.draggable},droppable:{...io.droppable,...e==null?void 0:e.droppable},dragOverlay:{...io.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function v1(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const l=u.useRef(!1),{x:a,y:i}=typeof s=="boolean"?{x:s,y:s}:s;rn(()=>{if(!a&&!i||!t){l.current=!1;return}if(l.current||!r)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const p=n(d),f=Lh(p,r);if(a||(f.x=0),i||(f.y=0),l.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=$h(d);h&&h.scrollBy({top:f.y,left:f.x})}},[t,a,i,r,n])}const ha=u.createContext({...sn,scaleX:1,scaleY:1});var zn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(zn||(zn={}));const Jh=u.memo(function(t){var n,r,s,l;let{id:a,accessibility:i,autoScroll:c=!0,children:d,sensors:p=f1,collisionDetection:f=_v,measuring:h,modifiers:x,...w}=t;const y=u.useReducer(m1,void 0,x1),[b,g]=y,[m,v]=vv(),[S,j]=u.useState(zn.Uninitialized),N=S===zn.Initialized,{draggable:{active:k,nodes:E,translate:T},droppable:{containers:P}}=b,L=k!=null?E.get(k):null,oe=u.useRef({initial:null,translated:null}),W=u.useMemo(()=>{var Ze;return k!=null?{id:k,data:(Ze=L==null?void 0:L.data)!=null?Ze:p1,rect:oe}:null},[k,L]),z=u.useRef(null),[q,he]=u.useState(null),[de,O]=u.useState(null),K=al(w,Object.values(w)),_=wl("DndDescribedBy",a),Z=u.useMemo(()=>P.getEnabled(),[P]),V=y1(h),{droppableRects:ke,measureDroppableContainers:ye,measuringScheduled:Je}=t1(Z,{dragging:N,dependencies:[T.x,T.y],config:V.droppable}),ve=Zv(E,k),X=u.useMemo(()=>de?Oo(de):null,[de]),we=er(),ie=n1(ve,V.draggable.measure);v1({activeNode:k!=null?E.get(k):null,config:we.layoutShiftCompensation,initialRect:ie,measure:V.draggable.measure});const se=Ld(ve,V.draggable.measure,ie),Xe=Ld(ve?ve.parentElement:null),Ce=u.useRef({activatorEvent:null,active:null,activeNode:ve,collisionRect:null,collisions:null,droppableRects:ke,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Me=P.getNodeFor((n=Ce.current.over)==null?void 0:n.id),H=d1({measure:V.dragOverlay.measure}),B=(r=H.nodeRef.current)!=null?r:ve,ce=N?(s=H.rect)!=null?s:se:null,te=!!(H.nodeRef.current&&H.rect),fe=l1(te?null:se),I=Yh(B?bt(B):null),J=o1(N?Me!=null?Me:ve:null),ne=u1(J),ue=qh(x,{transform:{x:T.x-fe.x,y:T.y-fe.y,scaleX:1,scaleY:1},activatorEvent:de,active:W,activeNodeRect:se,containerNodeRect:Xe,draggingNodeRect:ce,over:Ce.current.over,overlayNodeRect:H.rect,scrollableAncestors:J,scrollableAncestorRects:ne,windowRect:I}),Ae=X?Gr(X,T):null,Fe=a1(J),Kt=$d(Fe),_n=$d(Fe,[se]),kt=Gr(ue,Kt),Dt=ce?Rv(ce,ue):null,xn=W&&Dt?f({active:W,collisionRect:Dt,droppableRects:ke,droppableContainers:Z,pointerCoordinates:Ae}):null,Zn=Ev(xn,"id"),[Rt,We]=u.useState(null),jr=te?ue:Gr(ue,_n),$=Tv(jr,(l=Rt==null?void 0:Rt.rect)!=null?l:null,se),ge=u.useRef(null),ae=u.useCallback((Ze,at)=>{let{sensor:xt,options:ln}=at;if(z.current==null)return;const jt=E.get(z.current);if(!jt)return;const mt=Ze.nativeEvent,Ft=new xt({active:z.current,activeNode:jt,event:mt,options:ln,context:Ce,onAbort(Be){if(!E.get(Be))return;const{onDragAbort:Qt}=K.current,cn={id:Be};Qt==null||Qt(cn),m({type:"onDragAbort",event:cn})},onPending(Be,an,Qt,cn){if(!E.get(Be))return;const{onDragPending:Cr}=K.current,gn={id:Be,constraint:an,initialCoordinates:Qt,offset:cn};Cr==null||Cr(gn),m({type:"onDragPending",event:gn})},onStart(Be){const an=z.current;if(an==null)return;const Qt=E.get(an);if(!Qt)return;const{onDragStart:cn}=K.current,Nr={activatorEvent:mt,active:{id:an,data:Qt.data,rect:oe}};Hr.unstable_batchedUpdates(()=>{cn==null||cn(Nr),j(zn.Initializing),g({type:Qe.DragStart,initialCoordinates:Be,active:an}),m({type:"onDragStart",event:Nr}),he(ge.current),O(mt)})},onMove(Be){g({type:Qe.DragMove,coordinates:Be})},onEnd:on(Qe.DragEnd),onCancel:on(Qe.DragCancel)});ge.current=Ft;function on(Be){return async function(){const{active:Qt,collisions:cn,over:Nr,scrollAdjustedTranslate:Cr}=Ce.current;let gn=null;if(Qt&&Cr){const{cancelDrop:tr}=K.current;gn={activatorEvent:mt,active:Qt,collisions:cn,delta:Cr,over:Nr},Be===Qe.DragEnd&&typeof tr=="function"&&await Promise.resolve(tr(gn))&&(Be=Qe.DragCancel)}z.current=null,Hr.unstable_batchedUpdates(()=>{g({type:Be}),j(zn.Uninitialized),We(null),he(null),O(null),ge.current=null;const tr=Be===Qe.DragEnd?"onDragEnd":"onDragCancel";if(gn){const Er=K.current[tr];Er==null||Er(gn),m({type:tr,event:gn})}})}}},[E]),_e=u.useCallback((Ze,at)=>(xt,ln)=>{const jt=xt.nativeEvent,mt=E.get(ln);if(z.current!==null||!mt||jt.dndKit||jt.defaultPrevented)return;const Ft={active:mt};Ze(xt,at.options,Ft)===!0&&(jt.dndKit={capturedBy:at.sensor},z.current=ln,ae(xt,at))},[E,ae]),ht=e1(p,_e);i1(p),rn(()=>{se&&S===zn.Initializing&&j(zn.Initialized)},[se,S]),u.useEffect(()=>{const{onDragMove:Ze}=K.current,{active:at,activatorEvent:xt,collisions:ln,over:jt}=Ce.current;if(!at||!xt)return;const mt={active:at,activatorEvent:xt,collisions:ln,delta:{x:kt.x,y:kt.y},over:jt};Hr.unstable_batchedUpdates(()=>{Ze==null||Ze(mt),m({type:"onDragMove",event:mt})})},[kt.x,kt.y]),u.useEffect(()=>{const{active:Ze,activatorEvent:at,collisions:xt,droppableContainers:ln,scrollAdjustedTranslate:jt}=Ce.current;if(!Ze||z.current==null||!at||!jt)return;const{onDragOver:mt}=K.current,Ft=ln.get(Zn),on=Ft&&Ft.rect.current?{id:Ft.id,rect:Ft.rect.current,data:Ft.data,disabled:Ft.disabled}:null,Be={active:Ze,activatorEvent:at,collisions:xt,delta:{x:jt.x,y:jt.y},over:on};Hr.unstable_batchedUpdates(()=>{We(on),mt==null||mt(Be),m({type:"onDragOver",event:Be})})},[Zn]),rn(()=>{Ce.current={activatorEvent:de,active:W,activeNode:ve,collisionRect:Dt,collisions:xn,droppableRects:ke,draggableNodes:E,draggingNode:B,draggingNodeRect:ce,droppableContainers:P,over:Rt,scrollableAncestors:J,scrollAdjustedTranslate:kt},oe.current={initial:ce,translated:Dt}},[W,ve,xn,Dt,E,B,ce,ke,P,Rt,J,kt]),Gv({...we,delta:T,draggingRect:Dt,pointerCoordinates:Ae,scrollableAncestors:J,scrollableAncestorRects:ne});const mn=u.useMemo(()=>({active:W,activeNode:ve,activeNodeRect:se,activatorEvent:de,collisions:xn,containerNodeRect:Xe,dragOverlay:H,draggableNodes:E,droppableContainers:P,droppableRects:ke,over:Rt,measureDroppableContainers:ye,scrollableAncestors:J,scrollableAncestorRects:ne,measuringConfiguration:V,measuringScheduled:Je,windowRect:I}),[W,ve,se,de,xn,Xe,H,E,P,ke,Rt,ye,J,ne,V,Je,I]),Sr=u.useMemo(()=>({activatorEvent:de,activators:ht,active:W,activeNodeRect:se,ariaDescribedById:{draggable:_},dispatch:g,draggableNodes:E,over:Rt,measureDroppableContainers:ye}),[de,ht,W,se,g,_,E,Rt,ye]);return Re.createElement(Ph.Provider,{value:v},Re.createElement(bl.Provider,{value:Sr},Re.createElement(Gh.Provider,{value:mn},Re.createElement(ha.Provider,{value:$},d)),Re.createElement(g1,{disabled:(i==null?void 0:i.restoreFocus)===!1})),Re.createElement(kv,{...i,hiddenTextDescribedById:_}));function er(){const Ze=(q==null?void 0:q.autoScrollEnabled)===!1,at=typeof c=="object"?c.enabled===!1:c===!1,xt=N&&!Ze&&!at;return typeof c=="object"?{...c,enabled:xt}:{enabled:xt}}}),w1=u.createContext(null),Fd="button",b1="Draggable";function k1(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const l=wl(b1),{activators:a,activatorEvent:i,active:c,activeNodeRect:d,ariaDescribedById:p,draggableNodes:f,over:h}=u.useContext(bl),{role:x=Fd,roleDescription:w="draggable",tabIndex:y=0}=s!=null?s:{},b=(c==null?void 0:c.id)===t,g=u.useContext(b?ha:w1),[m,v]=zo(),[S,j]=zo(),N=c1(a,t),k=al(n);rn(()=>(f.set(t,{id:t,key:l,node:m,activatorNode:S,data:k}),()=>{const T=f.get(t);T&&T.key===l&&f.delete(t)}),[f,t]);const E=u.useMemo(()=>({role:x,tabIndex:y,"aria-disabled":r,"aria-pressed":b&&x===Fd?!0:void 0,"aria-roledescription":w,"aria-describedby":p.draggable}),[r,x,y,b,w,p.draggable]);return{active:c,activatorEvent:i,activeNodeRect:d,attributes:E,isDragging:b,listeners:r?void 0:N,node:m,over:h,setNodeRef:v,setActivatorNodeRef:j,transform:g}}function Zh(){return u.useContext(Gh)}const j1="Droppable",S1={timeout:25};function N1(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const l=wl(j1),{active:a,dispatch:i,over:c,measureDroppableContainers:d}=u.useContext(bl),p=u.useRef({disabled:n}),f=u.useRef(!1),h=u.useRef(null),x=u.useRef(null),{disabled:w,updateMeasurementsFor:y,timeout:b}={...S1,...s},g=al(y!=null?y:r),m=u.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(g.current)?g.current:[g.current]),x.current=null},b)},[b]),v=pa({callback:m,disabled:w||!a}),S=u.useCallback((E,T)=>{v&&(T&&(v.unobserve(T),f.current=!1),E&&v.observe(E))},[v]),[j,N]=zo(S),k=al(t);return u.useEffect(()=>{!v||!j.current||(v.disconnect(),f.current=!1,v.observe(j.current))},[j,v]),u.useEffect(()=>(i({type:Qe.RegisterDroppable,element:{id:r,key:l,disabled:n,node:j,rect:h,data:k}}),()=>i({type:Qe.UnregisterDroppable,key:l,id:r})),[r]),u.useEffect(()=>{n!==p.current.disabled&&(i({type:Qe.SetDroppableDisabled,id:r,key:l,disabled:n}),p.current.disabled=n)},[r,l,n,i]),{active:a,rect:h,isOver:(c==null?void 0:c.id)===r,node:j,over:c,setNodeRef:N}}function C1(e){let{animation:t,children:n}=e;const[r,s]=u.useState(null),[l,a]=u.useState(null),i=Io(n);return!n&&!r&&i&&s(i),rn(()=>{if(!l)return;const c=r==null?void 0:r.key,d=r==null?void 0:r.props.id;if(c==null||d==null){s(null);return}Promise.resolve(t(d,l)).then(()=>{s(null)})},[t,r,l]),Re.createElement(Re.Fragment,null,n,r?u.cloneElement(r,{ref:a}):null)}const E1={x:0,y:0,scaleX:1,scaleY:1};function M1(e){let{children:t}=e;return Re.createElement(bl.Provider,{value:Qh},Re.createElement(ha.Provider,{value:E1},t))}const _1={position:"fixed",touchAction:"none"},T1=e=>da(e)?"transform 250ms ease":void 0,D1=u.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:l,className:a,rect:i,style:c,transform:d,transition:p=T1}=e;if(!i)return null;const f=s?d:{...d,scaleX:1,scaleY:1},h={..._1,width:i.width,height:i.height,top:i.top,left:i.left,transform:En.Transform.toString(f),transformOrigin:s&&r?Sv(r,i):void 0,transition:typeof p=="function"?p(r):p,...c};return Re.createElement(n,{className:a,style:h,ref:t},l)}),R1=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:l,className:a}=e;if(l!=null&&l.active)for(const[i,c]of Object.entries(l.active))c!==void 0&&(s[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,c));if(l!=null&&l.dragOverlay)for(const[i,c]of Object.entries(l.dragOverlay))c!==void 0&&r.node.style.setProperty(i,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,d]of Object.entries(s))n.node.style.setProperty(c,d);a!=null&&a.active&&n.node.classList.remove(a.active)}},P1=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:En.Transform.toString(t)},{transform:En.Transform.toString(n)}]},z1={duration:250,easing:"ease",keyframes:P1,sideEffects:R1({styles:{active:{opacity:"0"}}})};function I1(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return ua((l,a)=>{if(t===null)return;const i=n.get(l);if(!i)return;const c=i.node.current;if(!c)return;const d=Kh(a);if(!d)return;const{transform:p}=bt(a).getComputedStyle(a),f=Oh(p);if(!f)return;const h=typeof t=="function"?t:L1(t);return Wh(c,s.draggable.measure),h({active:{id:l,data:i.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function L1(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...z1,...e};return l=>{let{active:a,dragOverlay:i,transform:c,...d}=l;if(!t)return;const p={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},f={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/i.rect.height:1},h={x:c.x-p.x,y:c.y-p.y,...f},x=s({...d,active:a,dragOverlay:i,transform:{initial:c,final:h}}),[w]=x,y=x[x.length-1];if(JSON.stringify(w)===JSON.stringify(y))return;const b=r==null?void 0:r({active:a,dragOverlay:i,...d}),g=i.node.animate(x,{duration:t,easing:n,fill:"forwards"});return new Promise(m=>{g.onfinish=()=>{b==null||b(),m()}})}}let Bd=0;function O1(e){return u.useMemo(()=>{if(e!=null)return Bd++,Bd},[e])}const ex=Re.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:l,modifiers:a,wrapperElement:i="div",className:c,zIndex:d=999}=e;const{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggableNodes:w,droppableContainers:y,dragOverlay:b,over:g,measuringConfiguration:m,scrollableAncestors:v,scrollableAncestorRects:S,windowRect:j}=Zh(),N=u.useContext(ha),k=O1(f==null?void 0:f.id),E=qh(a,{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggingNodeRect:b.rect,over:g,overlayNodeRect:b.rect,scrollableAncestors:v,scrollableAncestorRects:S,transform:N,windowRect:j}),T=ru(h),P=I1({config:r,draggableNodes:w,droppableContainers:y,measuringConfiguration:m}),L=T?b.setRef:void 0;return Re.createElement(M1,null,Re.createElement(C1,{animation:P},f&&k?Re.createElement(D1,{key:k,id:f.id,ref:L,as:i,activatorEvent:p,adjustScale:t,className:c,transition:l,rect:T,style:{zIndex:d,...s},transform:E},n):null))});function xa(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function $1(e,t){return e.reduce((n,r,s)=>{const l=t.get(r);return l&&(n[s]=l),n},Array(e.length))}function Al(e){return e!==null&&e>=0}function A1(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function F1(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const tx=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const l=xa(t,r,n),a=t[s],i=l[s];return!i||!a?null:{x:i.left-a.left,y:i.top-a.top,scaleX:i.width/a.width,scaleY:i.height/a.height}},Fl={scaleX:1,scaleY:1},nx=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:l,overIndex:a}=e;const i=(t=l[n])!=null?t:r;if(!i)return null;if(s===n){const d=l[a];return d?{x:0,y:n<a?d.top+d.height-(i.top+i.height):d.top-i.top,...Fl}:null}const c=B1(l,s,n);return s>n&&s<=a?{x:0,y:-i.height-c,...Fl}:s<n&&s>=a?{x:0,y:i.height+c,...Fl}:{x:0,y:0,...Fl}};function B1(e,t,n){const r=e[t],s=e[t-1],l=e[t+1];return r?n<t?s?r.top-(s.top+s.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const rx="Sortable",sx=Re.createContext({activeIndex:-1,containerId:rx,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:tx,disabled:{draggable:!1,droppable:!1}});function lx(e){let{children:t,id:n,items:r,strategy:s=tx,disabled:l=!1}=e;const{active:a,dragOverlay:i,droppableRects:c,over:d,measureDroppableContainers:p}=Zh(),f=wl(rx,n),h=i.rect!==null,x=u.useMemo(()=>r.map(N=>typeof N=="object"&&"id"in N?N.id:N),[r]),w=a!=null,y=a?x.indexOf(a.id):-1,b=d?x.indexOf(d.id):-1,g=u.useRef(x),m=!A1(x,g.current),v=b!==-1&&y===-1||m,S=F1(l);rn(()=>{m&&w&&p(x)},[m,x,w,p]),u.useEffect(()=>{g.current=x},[x]);const j=u.useMemo(()=>({activeIndex:y,containerId:f,disabled:S,disableTransforms:v,items:x,overIndex:b,useDragOverlay:h,sortedRects:$1(x,c),strategy:s}),[y,f,S.draggable,S.droppable,v,x,b,c,h,s]);return Re.createElement(sx.Provider,{value:j},t)}const U1=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return xa(n,r,s).indexOf(t)},H1=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:l,newIndex:a,previousItems:i,previousContainerId:c,transition:d}=e;return!d||!r||i!==l&&s===a?!1:n?!0:a!==s&&t===c},W1={duration:200,easing:"ease"},ox="transform",V1=En.Transition.toString({property:ox,duration:0,easing:"linear"}),X1={roleDescription:"sortable"};function Y1(e){let{disabled:t,index:n,node:r,rect:s}=e;const[l,a]=u.useState(null),i=u.useRef(n);return rn(()=>{if(!t&&n!==i.current&&r.current){const c=s.current;if(c){const d=xs(r.current,{ignoreTransform:!0}),p={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(p.x||p.y)&&a(p)}}n!==i.current&&(i.current=n)},[t,n,r,s]),u.useEffect(()=>{l&&a(null)},[l]),l}function ax(e){let{animateLayoutChanges:t=H1,attributes:n,disabled:r,data:s,getNewIndex:l=U1,id:a,strategy:i,resizeObserverConfig:c,transition:d=W1}=e;const{items:p,containerId:f,activeIndex:h,disabled:x,disableTransforms:w,sortedRects:y,overIndex:b,useDragOverlay:g,strategy:m}=u.useContext(sx),v=K1(r,x),S=p.indexOf(a),j=u.useMemo(()=>({sortable:{containerId:f,index:S,items:p},...s}),[f,s,S,p]),N=u.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:k,node:E,isOver:T,setNodeRef:P}=N1({id:a,data:j,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...c}}),{active:L,activatorEvent:oe,activeNodeRect:W,attributes:z,setNodeRef:q,listeners:he,isDragging:de,over:O,setActivatorNodeRef:K,transform:_}=k1({id:a,data:j,attributes:{...X1,...n},disabled:v.draggable}),Z=cv(P,q),V=!!L,ke=V&&!w&&Al(h)&&Al(b),ye=!g&&de,Je=ye&&ke?_:null,ve=i!=null?i:m,X=ke?Je!=null?Je:ve({rects:y,activeNodeRect:W,activeIndex:h,overIndex:b,index:S}):null,we=Al(h)&&Al(b)?l({id:a,items:p,activeIndex:h,overIndex:b}):S,ie=L==null?void 0:L.id,se=u.useRef({activeId:ie,items:p,newIndex:we,containerId:f}),Xe=p!==se.current.items,Ce=t({active:L,containerId:f,isDragging:de,isSorting:V,id:a,index:S,items:p,newIndex:se.current.newIndex,previousItems:se.current.items,previousContainerId:se.current.containerId,transition:d,wasDragging:se.current.activeId!=null}),Me=Y1({disabled:!Ce,index:S,node:E,rect:k});return u.useEffect(()=>{V&&se.current.newIndex!==we&&(se.current.newIndex=we),f!==se.current.containerId&&(se.current.containerId=f),p!==se.current.items&&(se.current.items=p)},[V,we,f,p]),u.useEffect(()=>{if(ie===se.current.activeId)return;if(ie!=null&&se.current.activeId==null){se.current.activeId=ie;return}const B=setTimeout(()=>{se.current.activeId=ie},50);return()=>clearTimeout(B)},[ie]),{active:L,activeIndex:h,attributes:z,data:j,rect:k,index:S,newIndex:we,items:p,isOver:T,isSorting:V,isDragging:de,listeners:he,node:E,overIndex:b,over:O,setNodeRef:Z,setActivatorNodeRef:K,setDroppableNodeRef:P,setDraggableNodeRef:q,transform:Me!=null?Me:X,transition:H()};function H(){if(Me||Xe&&se.current.newIndex===S)return V1;if(!(ye&&!da(oe)||!d)&&(V||Ce))return En.Transition.toString({...d,property:ox})}}function K1(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}je.Down,je.Right,je.Up,je.Left;const Se={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Ud={always:{label:"",color:"#6b9b6e",bg:"#e0f0e1"},keyword:{label:"",color:"#9b6b6b",bg:"#f0e0e0"},mood:{label:"",color:"#9b7a3b",bg:"#f0ebd8"},message_mode:{label:"",color:"#6b7b9b",bg:"#e0e6f0"}};function ix({activation:e}){const t=Ud[e]||Ud.always;return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:t.color,background:t.bg},children:t.label})}const Bl=80;function Q1({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Bl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{if(p.target.closest(".drag-handle"))return;const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Bl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Bl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Bl):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(ds,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function G1({book:e,onTap:t,onDelete:n}){var p;const{attributes:r,listeners:s,setNodeRef:l,transform:a,transition:i,isDragging:c}=ax({id:String(e.id)}),d={transform:En.Transform.toString(a),transition:i,opacity:c?0:1};return o.jsx("div",{ref:l,style:d,className:"mb-3",children:o.jsx(Q1,{onDelete:()=>n(e),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Se.bg,userSelect:"none"},children:[o.jsx("div",{...r,...s,className:"drag-handle shrink-0 cursor-grab touch-none px-1",style:{cursor:c?"grabbing":"grab"},children:o.jsx(hl,{size:18,style:{color:Se.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>t(e),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:Se.text},children:e.name}),o.jsx(ix,{activation:e.activation})]}),e.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:Se.textMuted},children:e.folder}),e.activation==="keyword"&&((p=e.keywords)==null?void 0:p.length)>0&&o.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[e.keywords.slice(0,3).map((f,h)=>o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(232,160,191,0.15)",color:Se.accentDark},children:f},h)),e.keywords.length>3&&o.jsxs("span",{className:"text-[10px]",style:{color:Se.textMuted},children:["+",e.keywords.length-3]})]})]}),o.jsx(ss,{size:16,style:{color:Se.textMuted,flexShrink:0},onClick:()=>t(e)})]})})})}function q1({folder:e,books:t,onDelete:n,onTap:r,onReorder:s}){const[l,a]=u.useState(!0),[i,c]=u.useState(null),d=zh(Ao(fa,{activationConstraint:{distance:5}}),Ao(nu,{activationConstraint:{delay:200,tolerance:5}})),p=({active:h,over:x})=>{if(c(null),!x||h.id===x.id)return;const w=t.findIndex(g=>String(g.id)===String(h.id)),y=t.findIndex(g=>String(g.id)===String(x.id));if(w<0||y<0)return;const b=xa(t,w,y);s(e,b)},f=i?t.find(h=>String(h.id)===String(i)):null;return o.jsxs("div",{className:"mb-4",children:[o.jsxs("button",{className:"mb-2 flex w-full items-center gap-2 px-1",onClick:()=>a(!l),children:[l?o.jsx(kr,{size:14,style:{color:Se.textMuted}}):o.jsx(ss,{size:14,style:{color:Se.textMuted}}),o.jsx("span",{className:"text-[12px] font-bold tracking-wide",style:{color:Se.textMuted},children:e||""}),o.jsx("span",{className:"ml-1 rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.12)",color:Se.textMuted},children:t.length})]}),l&&o.jsxs(Jh,{sensors:d,collisionDetection:Ih,onDragStart:({active:h})=>c(h.id),onDragEnd:p,children:[o.jsx(lx,{items:t.map(h=>String(h.id)),strategy:nx,children:t.map(h=>o.jsx(G1,{book:h,onTap:r,onDelete:n},h.id))}),o.jsx(ex,{children:f&&o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Se.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx("div",{className:"shrink-0 px-1",children:o.jsx(hl,{size:18,style:{color:Se.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:Se.text},children:f.name}),o.jsx(ix,{activation:f.activation})]}),f.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:Se.textMuted},children:f.folder})]}),o.jsx(ss,{size:16,style:{color:Se.textMuted,flexShrink:0}})]})})]})]})}function J1(){const e=At(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[l,a]=u.useState(null),[i,c]=u.useState(null),d=y=>{c(y),setTimeout(()=>c(null),2e3)},p=()=>{s(!0),A("/api/world-books").then(y=>n(y.world_books||[])).catch(()=>d("")).finally(()=>s(!1))};u.useEffect(()=>{p()},[]);const f=async y=>{a(null);try{await A(`/api/world-books/${y.id}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==y.id)),d("")}catch(b){d("")}},h=(y,b)=>{const g=y||"";n(m=>[...m.filter(S=>(S.folder||"")!==g),...b]),A("/api/world-books/reorder",{method:"PUT",body:{ordered_ids:b.map(m=>m.id)}}).catch(()=>d(""))},x={};for(const y of t){const b=y.folder||"";x[b]||(x[b]=[]),x[b].push(y)}const w=Object.keys(x).sort((y,b)=>y===""?1:b===""?-1:y.localeCompare(b));return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Se.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full nm-active",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:Se.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Se.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books/new"),children:o.jsx(us,{size:20,style:{color:Se.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-t-transparent",style:{borderColor:Se.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(hl,{size:36,style:{color:Se.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:Se.textMuted},children:" + "})]}):w.map(y=>o.jsx(q1,{folder:y,books:x[y],onDelete:b=>a(b),onTap:b=>e(`/world-books/${b.id}`),onReorder:h},y))}),l&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>a(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Se.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:y=>y.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Se.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Se.textMuted},children:["",l.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)",color:Se.text},onClick:()=>a(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>f(l),children:""})]})]})}),i&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const ee={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Z1({label:e,value:t,onChange:n,placeholder:r}){return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ee.textMuted},children:e}),o.jsx("input",{type:"text",value:t,onChange:s=>n(s.target.value),placeholder:r,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:ee.bg,color:ee.text}})]})}function e0({value:e,onChange:t,folders:n}){const[r,s]=u.useState(!1),l=n.filter(a=>a!==e&&a.toLowerCase().includes(e.toLowerCase()));return o.jsxs("div",{className:"relative mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ee.textMuted},children:""}),o.jsx("input",{type:"text",value:e,onChange:a=>{t(a.target.value),s(!0)},onFocus:()=>s(!0),onBlur:()=>setTimeout(()=>s(!1),150),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:ee.bg,color:ee.text}}),r&&l.length>0&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[160px] overflow-y-auto rounded-[14px]",style:{background:ee.bg,boxShadow:"var(--card-shadow)"},children:l.map(a=>o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:ee.text},onMouseDown:()=>{t(a),s(!1)},children:a},a))})]})}function t0({value:e,onChange:t}){const n=[{value:"always",label:""},{value:"keyword",label:""},{value:"mood",label:""},{value:"message_mode",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ee.textMuted},children:""}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:ee.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:e===r.value?ee.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?ee.accentDark:ee.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})]})}function n0({selected:e,onChange:t}){const n=[{value:"long",label:""},{value:"short",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ee.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:ee.bg,minHeight:48},children:n.map(r=>{const s=e===r.value;return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?ee.accentDark:ee.bg,color:s?"white":ee.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>t(r.value),children:r.label},r.value)})})]})}const r0=[{value:"happy",label:""},{value:"sad",label:""},{value:"angry",label:""},{value:"anxious",label:""},{value:"tired",label:""},{value:"emo",label:""},{value:"flirty",label:""},{value:"proud",label:""},{value:"calm",label:""}];function s0({selected:e,onChange:t}){const n=r=>{e.includes(r)?t(e.filter(s=>s!==r)):t([...e,r])};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ee.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:ee.bg,minHeight:48},children:r0.map(r=>{const s=e.includes(r.value);return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?ee.accentDark:ee.bg,color:s?"white":ee.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>n(r.value),children:r.label},r.value)})})]})}function l0({keywords:e,onChange:t}){const[n,r]=u.useState(""),s=()=>{const l=n.trim();if(!l||e.includes(l)){r("");return}t([...e,l]),r("")};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ee.textMuted},children:""}),o.jsxs("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:ee.bg,minHeight:48},children:[e.map(l=>o.jsxs("span",{className:"flex items-center gap-1 rounded-full px-2.5 py-1 text-[12px] font-medium",style:{background:"rgba(232,160,191,0.2)",color:ee.accentDark},children:[l,o.jsx("button",{onClick:()=>t(e.filter(a=>a!==l)),children:o.jsx(gl,{size:10})})]},l)),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),onKeyDown:l=>{(l.key==="Enter"||l.key===",")&&(l.preventDefault(),s())},placeholder:"...",className:"w-24 bg-transparent text-[12px] outline-none",style:{color:ee.text}}),n.trim()&&o.jsx("button",{className:"flex h-5 w-5 items-center justify-center rounded-full",style:{background:ee.accentDark},onClick:s,children:o.jsx(us,{size:10,color:"white"})})]})]}),o.jsx("p",{className:"mt-1 text-[10px]",style:{color:ee.textMuted},children:" Enter "})]})}function o0({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:ee.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:ee.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ee.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(ls,{size:18,style:{color:ee.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:ee.bg,color:ee.text},placeholder:"..."})]})}function Hd(){const e=At(),{id:t}=kh(),n=!t,[r,s]=u.useState(""),[l,a]=u.useState(""),[i,c]=u.useState("always"),[d,p]=u.useState([]),[f,h]=u.useState("long"),[x,w]=u.useState(""),[y,b]=u.useState(!1),[g,m]=u.useState(!n),[v,S]=u.useState(null),[j,N]=u.useState([]),[k,E]=u.useState(!1),T=u.useRef(null),P=W=>{var he;const z=(he=W.target.files)==null?void 0:he[0];if(!z)return;const q=new FileReader;q.onload=de=>w(de.target.result||""),q.readAsText(z),W.target.value=""},L=W=>{S(W),setTimeout(()=>S(null),2e3)};u.useEffect(()=>{A("/api/world-books").then(W=>{const z=W.world_books||[];if(N([...new Set(z.map(q=>q.folder).filter(Boolean))]),!n){const q=z.find(he=>String(he.id)===String(t));q&&(s(q.name),a(q.folder||""),c(q.activation),p(q.keywords||[]),h(q.message_mode||"long"),w(q.content))}}).catch(()=>L("")).finally(()=>m(!1))},[t,n]);const oe=async()=>{if(!r.trim()){L("");return}b(!0);try{const W={name:r.trim(),folder:l.trim()||null,activation:i,keywords:i==="keyword"||i==="mood"?d:[],message_mode:i==="message_mode"?f:null,content:x};n?(await A("/api/world-books",{method:"POST",body:W}),L("")):(await A(`/api/world-books/${t}`,{method:"PUT",body:W}),L(""))}catch(W){L(": "+W.message)}finally{b(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:ee.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ee.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:ee.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:ee.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ee.bg,boxShadow:y?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:oe,disabled:y,children:o.jsx(ml,{size:18,style:{color:ee.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:g?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:ee.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"rounded-[20px] p-5 mb-4",style:{background:ee.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(Z1,{label:"",value:r,onChange:s,placeholder:""}),o.jsx(e0,{value:l,onChange:a,folders:j}),o.jsx(t0,{value:i,onChange:c}),i==="keyword"&&o.jsx(l0,{keywords:d,onChange:p}),i==="mood"&&o.jsx(s0,{selected:d,onChange:p}),i==="message_mode"&&o.jsx(n0,{selected:f,onChange:h})]}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:ee.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:ee.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:ee.bg},onClick:()=>{var W;return(W=T.current)==null?void 0:W.click()},title:"",children:o.jsx(aa,{size:13,style:{color:ee.textMuted}})}),o.jsx("input",{ref:T,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:P}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:ee.bg},onClick:()=>E(!0),title:"",children:o.jsx(xl,{size:13,style:{color:ee.accentDark}})})]})]}),o.jsx("textarea",{value:x,onChange:W=>w(W.target.value),placeholder:"...",rows:10,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:ee.bg,color:ee.text}})]})]})}),k&&o.jsx(o0,{value:x,onChange:w,onClose:()=>E(!1)}),v&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:v})})]})}const Ue={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Ul=80;function a0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Ul);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Ul,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Ul)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Ul):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Ue.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(ds,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function i0({assistant:e,localAvatar:t,onTap:n}){var s;const r=t||null;return o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Ue.bg,userSelect:"none"},onClick:()=>n(e),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:48,height:48,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Ue.bg},children:r?o.jsx("img",{src:r,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[20px]",style:{color:Ue.accentDark},children:((s=e.name)==null?void 0:s[0])||"?"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[15px] font-bold",style:{color:Ue.text},children:e.name}),e.created_at&&o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:Ue.textMuted},children:e.created_at.slice(0,10)})]}),o.jsx(ss,{size:16,style:{color:Ue.textMuted,flexShrink:0}})]})}function c0(){const e=At(),[t,n]=u.useState([]),[r,s]=u.useState({}),[l,a]=u.useState(!0),[i,c]=u.useState(null),[d,p]=u.useState(null),f=w=>{p(w),setTimeout(()=>p(null),2e3)},h=()=>{a(!0),A("/api/assistants").then(async w=>{const y=w.assistants||[];n(y);const b={};await Promise.all(y.map(async g=>{const m=await fs(`assistant-avatar-${g.id}`).catch(()=>null);m&&(b[g.id]=m)})),s(b)}).catch(()=>f("")).finally(()=>a(!1))};u.useEffect(()=>{h()},[]);const x=async w=>{c(null);try{await A(`/api/assistants/${w.id}`,{method:"DELETE"}),n(y=>y.filter(b=>b.id!==w.id)),f("")}catch(y){f("")}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ue.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ue.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:Ue.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ue.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ue.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants/new"),children:o.jsx(us,{size:20,style:{color:Ue.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8 pt-5",children:l?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ue.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(Eh,{size:36,style:{color:Ue.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:Ue.textMuted},children:" + "})]}):t.map(w=>o.jsx(a0,{onDelete:()=>c(w),children:o.jsx(i0,{assistant:w,localAvatar:r[w.id],onTap:y=>e(`/assistants/${y.id}`)})},w.id))}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>c(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Ue.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:w=>w.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Ue.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Ue.textMuted},children:["",i.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Ue.bg,boxShadow:"var(--card-shadow-sm)",color:Ue.text},onClick:()=>c(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>x(i),children:""})]})]})}),d&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:d})})]})}const M={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Wd({label:e,value:t,onChange:n,placeholder:r,rows:s,onExpand:l,onHistory:a}){const i=u.useRef(null),c=d=>{var h;const p=(h=d.target.files)==null?void 0:h[0];if(!p)return;const f=new FileReader;f.onload=x=>n(x.target.result||""),f.readAsText(p),d.target.value=""};return o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),o.jsxs("div",{className:"flex items-center gap-2",children:[a&&o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:a,children:o.jsx(qy,{size:13,style:{color:M.textMuted}})}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var d;return(d=i.current)==null?void 0:d.click()},children:o.jsx(aa,{size:13,style:{color:M.textMuted}})}),o.jsx("input",{ref:i,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:c}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:l,children:o.jsx(xl,{size:13,style:{color:M.accentDark}})})]})]}),o.jsx("textarea",{value:t,onChange:d=>n(d.target.value),placeholder:r,rows:s||6,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})}function Ka({label:e,value:t,onChange:n,presets:r}){const[s,l]=u.useState(!1),a=r.find(i=>i.id===t);return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text},onClick:()=>l(!s),children:[o.jsx("span",{style:{color:a?M.text:M.textMuted},children:a?a.name:""}),o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:M.textMuted,transform:s?"rotate(180deg)":"none",transition:"transform 0.2s"},children:o.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&o.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:M.bg,boxShadow:"var(--card-shadow)",zIndex:40},children:[o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:M.textMuted},onClick:()=>{n(null),l(!1)},children:""}),r.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[14px]",style:{color:M.text},onClick:()=>{n(i.id),l(!1)},children:[o.jsx("span",{children:i.name}),i.id===t&&o.jsx(gr,{size:14,style:{color:M.accentDark}})]},i.id))]})]})]})}function Qa({value:e,onChange:t,onClose:n,title:r,placeholder:s}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:r||""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(ls,{size:18,style:{color:M.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:l=>t(l.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:M.bg,color:M.text},placeholder:s||""})]})}const Hl=80;function u0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Hl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Hl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Hl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Hl):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(ds,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function d0({title:e,message:t,onConfirm:n,onCancel:r}){return o.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:r,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:M.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:s=>s.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:M.text},children:e||""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:M.textMuted},children:t}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.text},onClick:r,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:n,children:""})]})]})})}function f0({items:e,currentContent:t,onApply:n,onClose:r,onDelete:s}){const[l,a]=u.useState("current"),[i,c]=u.useState(null),[d,p]=u.useState(null),f=x=>x?new Date(x).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",h=async()=>{if(l==="current"){r();return}const x=e.find(w=>w.id===l);x&&await n(x.content),r()};return i?o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsxs("span",{className:"text-[15px] font-bold",style:{color:M.text},children:[" ",i.version]}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>c(null),children:o.jsx(ls,{size:18,style:{color:M.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:o.jsx("div",{className:"rounded-[14px] p-4",style:{boxShadow:"var(--inset-shadow)",background:M.bg},children:o.jsx("p",{className:"whitespace-pre-wrap text-[13px] leading-relaxed",style:{color:M.text},children:i.content})})})]}):o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:r,children:o.jsx(ls,{size:18,style:{color:M.accentDark}})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[o.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:l==="current"?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[o.jsx("button",{onClick:()=>a("current"),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:l==="current"?M.accentDark:M.bg,boxShadow:l==="current"?"none":"var(--icon-inset)"},children:l==="current"&&o.jsx(gr,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:""}),o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#2a9d5c",background:"rgba(42,157,92,0.12)"},children:""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:t})]})]}),e.length===0&&o.jsx("p",{className:"py-8 text-center text-[13px]",style:{color:M.textMuted},children:""}),e.map(x=>o.jsx("div",{className:"mb-2",children:o.jsx(u0,{onDelete:()=>p(x.id),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:l===x.id?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[o.jsx("button",{onClick:()=>a(x.id),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:l===x.id?M.accentDark:M.bg,boxShadow:l===x.id?"none":"var(--icon-inset)"},children:l===x.id&&o.jsx(gr,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>c(x),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:[" ",x.version]}),o.jsx("span",{className:"text-[10px]",style:{color:M.textMuted},children:f(x.created_at)})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:x.content})]})]})})},x.id))]}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsx("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:h,children:""})}),d&&o.jsx(d0,{message:"",onCancel:()=>p(null),onConfirm:()=>{s(d),p(null)}})]})}function cx(e){return e==="always"?"":e==="keyword"?"":e==="message_mode"?"":""}function ux(e){return!e||!Array.isArray(e)?[]:e.map((t,n)=>typeof t=="object"&&t!==null?t:{id:t,position:"after",sort_order:n})}function p0({item:e,book:t,position:n,sectionList:r,onRemove:s,onChangePosition:l}){const{attributes:a,listeners:i,setNodeRef:c,transform:d,transition:p,isDragging:f}=ax({id:String(e.id)}),h={transform:En.Transform.toString(d),transition:p,opacity:f?0:1};return t?o.jsxs("div",{ref:c,style:h,className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",children:[o.jsx("div",{...a,...i,className:"cursor-grab touch-none p-1",style:{cursor:f?"grabbing":"grab"},children:o.jsx(hl,{size:14,style:{color:M.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.text},children:t.name}),o.jsxs("div",{className:"text-[10px]",style:{color:M.textMuted},children:[cx(t.activation),t.folder?`  ${t.folder}`:""]})]}),o.jsx("button",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},onClick:()=>l(e.id,n==="before"?"after":"before"),children:n==="before"?"":""}),o.jsx("button",{onClick:()=>s(e.id),children:o.jsx(gl,{size:14,style:{color:M.textMuted}})})]}):null}function h0({allBooks:e,mountedIds:t,onClose:n,onConfirm:r}){const[s,l]=u.useState(new Set(t)),a={};e.forEach(d=>{const p=d.folder||"";a[p]||(a[p]=[]),a[p].push(d)});const i=d=>{l(p=>{const f=new Set(p);return f.has(d)?f.delete(d):f.add(d),f})},c=d=>{const p=d.every(f=>s.has(f.id));l(f=>{const h=new Set(f);return p?d.forEach(x=>h.delete(x.id)):d.forEach(x=>h.add(x.id)),h})};return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-end",style:{background:"rgba(0,0,0,0.4)"},children:o.jsxs("div",{className:"flex w-full flex-col rounded-t-[24px]",style:{background:M.bg,maxHeight:"82vh"},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between p-5 pb-3",children:[o.jsx("h3",{className:"text-[16px] font-bold",style:{color:M.text},children:""}),o.jsx("button",{onClick:n,children:o.jsx(gl,{size:20,style:{color:M.textMuted}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5",children:Object.entries(a).map(([d,p])=>{const f=p.every(h=>s.has(h.id));return o.jsxs("div",{className:"mb-5",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:d}),o.jsx("button",{className:"rounded-full px-2.5 py-1 text-[11px] font-semibold",style:{background:f?"rgba(201,98,138,0.15)":"rgba(136,136,160,0.1)",color:f?M.accentDark:M.textMuted},onClick:()=>c(p),children:f?"":""})]}),o.jsx("div",{className:"space-y-2",children:p.map(h=>{const x=s.has(h.id);return o.jsxs("button",{className:"flex w-full items-center gap-3 rounded-[14px] p-3",style:{background:M.bg,boxShadow:x?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>i(h.id),children:[o.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:x?M.accentDark:M.bg,boxShadow:x?"none":"var(--icon-inset)"},children:x&&o.jsx(gr,{size:12,color:"white"})}),o.jsx("div",{className:"flex-1 min-w-0 text-left",children:o.jsx("div",{className:"truncate text-[13px] font-medium",style:{color:x?M.accentDark:M.text},children:h.name})}),o.jsx("span",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},children:cx(h.activation)})]},h.id)})})]},d)})}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsxs("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>r([...s]),children:[" ",s.size,""]})})]})})}function x0({ruleSetIds:e,onChange:t,allBooks:n}){const[r,s]=u.useState(!1),[l,a]=u.useState(null),i=ux(e),c=i.filter(j=>j.position==="before").sort((j,N)=>j.sort_order-N.sort_order),d=i.filter(j=>j.position==="after").sort((j,N)=>j.sort_order-N.sort_order),p=j=>n.find(N=>N.id===j||N.id===Number(j)),f=zh(Ao(fa,{activationConstraint:{distance:5}}),Ao(nu,{activationConstraint:{delay:150,tolerance:5}})),h=({active:j})=>a(j.id),x=({active:j,over:N})=>{if(!N)return;const k=i.find(T=>String(T.id)===String(j.id)),E=i.find(T=>String(T.id)===String(N.id));if(!(!k||!E)&&k.position!==E.position){const T=i.map(P=>String(P.id)===String(k.id)?{...P,position:E.position}:P);t(T)}},w=({active:j,over:N})=>{if(a(null),!N||j.id===N.id)return;const k=i.find(z=>String(z.id)===String(j.id)),E=i.find(z=>String(z.id)===String(N.id));if(!k||!E||k.position!==E.position)return;const T=k.position==="before"?[...c]:[...d],P=T.findIndex(z=>String(z.id)===String(j.id)),L=T.findIndex(z=>String(z.id)===String(N.id)),oe=xa(T,P,L).map((z,q)=>({...z,sort_order:q})),W=i.filter(z=>z.position!==k.position);t([...W,...oe])},y=j=>t(i.filter(N=>N.id!==j)),b=(j,N)=>{const E=(N==="before"?c:d).length;t(i.map(T=>T.id===j?{...T,position:N,sort_order:E}:T))},g=j=>{const N=i.map(L=>L.id),E=j.filter(L=>!N.includes(L)).map((L,oe)=>({id:L,position:"after",sort_order:d.length+oe})),T=new Set(N.filter(L=>!j.includes(L))),P=i.filter(L=>!T.has(L.id));t([...P,...E])},m=(j,N)=>j.length===0?o.jsx("div",{className:"py-3 text-center text-[12px]",style:{color:M.textMuted},children:""}):o.jsx(lx,{items:j.map(k=>String(k.id)),strategy:nx,children:o.jsx("div",{className:"rounded-[14px] px-2 pt-1",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:j.map((k,E)=>o.jsxs("div",{children:[E>0&&o.jsx("div",{className:"mx-2",style:{height:1,background:"rgba(0,0,0,0.06)"}}),o.jsx(p0,{item:k,book:p(k.id),position:N,sectionList:j,onRemove:y,onChangePosition:b})]},k.id))})}),v=l?i.find(j=>String(j.id)===String(l)):null,S=v?p(v.id):null;return o.jsxs(Jh,{sensors:f,collisionDetection:Ih,onDragStart:h,onDragOver:x,onDragEnd:w,children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(c,"before")]}),o.jsxs("div",{className:"my-4 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}}),o.jsx("span",{className:"rounded-full px-3 py-1 text-[11px] font-bold",style:{background:"rgba(232,160,191,0.15)",color:M.accentDark},children:"System Prompt"}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(d,"after")]}),o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-3 text-[14px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.accentDark},onClick:()=>s(!0),children:[o.jsx(us,{size:16})," "]}),o.jsx(ex,{children:S&&o.jsxs("div",{className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",style:{background:M.bg,boxShadow:"var(--card-shadow)",opacity:.9},children:[o.jsx(hl,{size:14,style:{color:M.textMuted}}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.accentDark},children:S.name})})]})}),r&&o.jsx(h0,{allBooks:n,mountedIds:i.map(j=>j.id),onClose:()=>s(!1),onConfirm:j=>{g(j),s(!1)}})]})}function Vd(){const e=At(),{id:t}=kh(),n=!t,[r,s]=u.useState("basic"),[l,a]=u.useState(""),[i,c]=u.useState(""),[d,p]=u.useState(""),[f,h]=u.useState(null),[x,w]=u.useState(null),[y,b]=u.useState(null),[g,m]=u.useState(""),[v,S]=u.useState(""),[j,N]=u.useState(null),[k,E]=u.useState(null),[T,P]=u.useState([]),[L,oe]=u.useState([]),[W,z]=u.useState([]),[q,he]=u.useState(!1),[de,O]=u.useState(!n),[K,_]=u.useState(null),[Z,V]=u.useState(!1),[ke,ye]=u.useState(!1),[Je,ve]=u.useState(!1),[X,we]=u.useState(null),[ie,se]=u.useState([]),Xe=u.useRef(null),Ce=u.useRef(null),Me=I=>{var ue;const J=(ue=I.target.files)==null?void 0:ue[0];if(!J)return;const ne=new FileReader;ne.onload=Ae=>p(Ae.target.result||""),ne.readAsText(J),I.target.value=""},H=I=>{_(I),setTimeout(()=>_(null),2500)},B=async I=>{const J=I==="human"?j:k;if(!J){H("");return}try{const ne=await A(`/api/core-blocks/${J}/history`);se(ne.history||[]),we(I)}catch(ne){H("")}};u.useEffect(()=>{(async()=>{const[J,ne]=await Promise.all([A("/api/presets").catch(()=>({presets:[]})),A("/api/world-books").catch(()=>({world_books:[]}))]);if(oe(J.presets||[]),z(ne.world_books||[]),n)O(!1);else try{const[ue,Ae]=await Promise.all([A(`/api/assistants/${t}`),A(`/api/core-blocks?assistant_id=${t}`).catch(()=>({blocks:[]}))]);a(ue.name||""),fs(`assistant-avatar-${t}`).then(Fe=>{Fe&&c(Fe)}).catch(function(){}),p(ue.system_prompt||""),h(ue.model_preset_id||null),w(ue.summary_model_preset_id||null),b(ue.summary_fallback_preset_id||null),P(ue.rule_set_ids||[]);for(const Fe of Ae.blocks||[])Fe.block_type==="human"?(m(Fe.content||""),N(Fe.id)):Fe.block_type==="persona"&&(S(Fe.content||""),E(Fe.id))}catch(ue){H(": "+ue.message)}finally{O(!1)}})()},[t,n]);const ce=I=>{var ue;const J=(ue=I.target.files)==null?void 0:ue[0];if(!J)return;const ne=new FileReader;ne.onload=async Ae=>{const Fe=Ae.target.result,Kt=`assistant-avatar-${t||"new"}`;try{await Ki(Kt,Fe),c(Fe)}catch(_n){H("")}},ne.readAsDataURL(J),I.target.value=""},te=async()=>{if(!l.trim()){H("");return}he(!0);try{const I={name:l.trim(),avatar_url:i?`assistant-avatar-${t||"new"}`:null,system_prompt:d,model_preset_id:f,summary_model_preset_id:x,summary_fallback_preset_id:y,rule_set_ids:ux(T)};let J=t;if(n?(J=(await A("/api/assistants",{method:"POST",body:{name:l.trim()}})).id,i&&(await Ki(`assistant-avatar-${J}`,i),I.avatar_url=`assistant-avatar-${J}`),await A(`/api/assistants/${J}`,{method:"PUT",body:I})):await A(`/api/assistants/${t}`,{method:"PUT",body:I}),j)await A(`/api/core-blocks/${j}`,{method:"PUT",body:{content:g}});else if(g.trim()){const ne=await A("/api/core-blocks",{method:"POST",body:{block_type:"human",assistant_id:Number(J),content:g}});N(ne.id)}if(k)await A(`/api/core-blocks/${k}`,{method:"PUT",body:{content:v}});else if(v.trim()){const ne=await A("/api/core-blocks",{method:"POST",body:{block_type:"persona",assistant_id:Number(J),content:v}});E(ne.id)}H("")}catch(I){H(": "+I.message)}finally{he(!1)}},fe=[{key:"basic",label:""},{key:"about",label:"Core Blocks"},{key:"books",label:""}];return o.jsxs("div",{className:"flex h-full flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:M.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:M.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:q?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:te,disabled:q,children:o.jsx(ml,{size:18,style:{color:M.accentDark}})})]}),o.jsx("div",{className:"flex shrink-0 gap-1 px-5 pb-3",children:fe.map(I=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2.5 text-[13px] font-semibold transition-all",style:{background:r===I.key?M.bg:"transparent",boxShadow:r===I.key?"var(--card-shadow-sm)":"none",color:r===I.key?M.accentDark:M.textMuted},onClick:()=>s(I.key),children:I.label},I.key))}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:de?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:M.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[r==="basic"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-4 flex items-center gap-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var I;return(I=Xe.current)==null?void 0:I.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:M.bg},children:i?o.jsx("img",{src:i,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[24px]",style:{color:M.accentDark},children:(l==null?void 0:l[0])||"?"})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:M.accentDark},children:o.jsx(Mh,{size:9,color:"white"})})]}),o.jsx("input",{ref:Xe,type:"file",accept:"image/*",className:"hidden",onChange:ce}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),o.jsx("input",{type:"text",value:l,onChange:I=>a(I.target.value),placeholder:"",className:"w-full rounded-[12px] px-4 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})]}),o.jsxs("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var I;return(I=Ce.current)==null?void 0:I.click()},title:"",children:o.jsx(aa,{size:13,style:{color:M.textMuted}})}),o.jsx("input",{ref:Ce,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:Me}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>V(!0),title:"",children:o.jsx(xl,{size:13,style:{color:M.accentDark}})})]})]}),o.jsx("textarea",{value:d,onChange:I=>p(I.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(Ka,{label:"",value:f,onChange:h,presets:L}),o.jsx(Ka,{label:"",value:x,onChange:w,presets:L}),o.jsx(Ka,{label:"",value:y,onChange:b,presets:L})]})]}),r==="about"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Wd,{label:"human block",value:g,onChange:m,placeholder:" AI ...",rows:7,onExpand:()=>ye(!0),onHistory:()=>B("human")})}),o.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Wd,{label:"persona block",value:v,onChange:S,placeholder:"AI ...",rows:7,onExpand:()=>ve(!0),onHistory:()=>B("persona")})})]}),r==="books"&&o.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(x0,{ruleSetIds:T,onChange:P,allBooks:W})})]})}),Z&&o.jsx(Qa,{value:d,onChange:p,onClose:()=>V(!1),title:"",placeholder:"..."}),ke&&o.jsx(Qa,{value:g,onChange:m,onClose:()=>ye(!1),title:"human block",placeholder:" AI ..."}),Je&&o.jsx(Qa,{value:v,onChange:S,onClose:()=>ve(!1),title:"persona block",placeholder:"AI ..."}),X&&o.jsx(f0,{items:ie,currentContent:X==="human"?g:v,onApply:async I=>{const J=X==="human"?j:k;try{await A(`/api/core-blocks/${J}`,{method:"PUT",body:{content:I}}),X==="human"?m(I):S(I),H("")}catch(ne){H("")}},onDelete:async I=>{try{await A(`/api/core-blocks/history/${I}`,{method:"DELETE"}),se(J=>J.filter(ne=>ne.id!==I)),H("")}catch(J){H("")}},onClose:()=>we(null)}),K&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:K})})]})}const le={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function Ga({icon:e,label:t,hint:n,onClick:r}){return o.jsxs("button",{className:"flex w-full items-center gap-4 px-4 py-4",onClick:r,children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:e}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:t}),n&&o.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:n})]}),o.jsx(ss,{size:16,style:{color:le.textMuted}})]})}function Xd(){return o.jsx("div",{className:"mx-4 h-px",style:{background:"rgba(136,136,160,0.15)"}})}function nr({value:e,onChange:t,min:n,max:r}){const[s,l]=u.useState(String(e));u.useEffect(()=>l(String(e)),[e]);const a=()=>{let i=parseInt(s);isNaN(i)&&(i=n),i=Math.max(n,Math.min(r,i)),l(String(i)),t(i)};return o.jsx("input",{type:"number",value:s,onChange:i=>l(i.target.value),onBlur:a,onKeyDown:i=>i.key==="Enter"&&a(),className:"w-20 rounded-[10px] py-2 text-center text-[14px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:le.bg,color:le.text},min:n,max:r})}function m0(){const e=At(),[t,n]=u.useState(()=>parseInt(localStorage.getItem("telegram_buffer_seconds")||"15")),[r,s]=u.useState(8),[l,a]=u.useState(8e3),[i,c]=u.useState(16e3),[d,p]=u.useState(800),[f,h]=u.useState(800),[x,w]=u.useState(2e3),[y,b]=u.useState(!1),[g,m]=u.useState(!1),[v,S]=u.useState(null),j=k=>{S(k),setTimeout(()=>S(null),2e3)};u.useEffect(()=>{A("/api/settings/context-budget").then(k=>{a(k.retain_budget),c(k.trigger_threshold),p(k.summary_budget_longterm),h(k.summary_budget_daily),w(k.summary_budget_recent),b(!0)}).catch(()=>b(!0))},[]),u.useEffect(()=>{localStorage.setItem("telegram_buffer_seconds",String(t)),A("/api/settings/buffer-seconds",{method:"PUT",body:{seconds:t}}).catch(()=>{})},[t]),u.useEffect(()=>{A("/api/settings/short-msg-max").then(k=>s(k.max_count||8)).catch(()=>{})},[]),u.useEffect(()=>{A("/api/settings/short-msg-max",{method:"PUT",body:{max_count:r}}).catch(()=>{})},[r]);const N=async()=>{m(!0);try{await A("/api/settings/context-budget",{method:"PUT",body:{retain_budget:l,trigger_threshold:i,summary_budget_longterm:d,summary_budget_daily:f,summary_budget_recent:x}}),j("")}catch(k){j("")}finally{m(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:le.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:le.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:le.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:le.text},children:""}),o.jsx("div",{className:"w-10"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5 space-y-4",children:[o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(Ga,{icon:o.jsx(nv,{size:18,style:{color:le.text}}),label:"API ",hint:"  ",onClick:()=>e("/settings/api")}),o.jsx(Xd,{}),o.jsx(Ga,{icon:o.jsx(ev,{size:18,style:{color:le.textMuted}}),label:"",hint:"",onClick:()=>j("")})]}),o.jsx("div",{className:"rounded-[20px] overflow-hidden",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Ga,{icon:o.jsx(Zy,{size:18,style:{color:le.text}}),label:"",hint:" AI ",onClick:()=>e("/settings/proactive")})}),o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:o.jsx(lv,{size:18,style:{color:le.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:" ()"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(nr,{value:t,onChange:n,min:1,max:120}),o.jsx("span",{className:"text-[12px]",style:{color:le.textMuted},children:""})]})]}),o.jsx(Xd,{}),o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:o.jsx(Qy,{size:18,style:{color:le.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:""})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(nr,{value:r,onChange:s,min:2,max:20}),o.jsx("span",{className:"text-[12px]",style:{color:le.textMuted},children:""})]})]})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:o.jsx(Xy,{size:18,style:{color:le.text}})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:""})]})]}),y?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:" token "})]}),o.jsx(nr,{value:l,onChange:a,min:1e3,max:1e5})]}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),o.jsx(nr,{value:i,onChange:c,min:1e3,max:2e5})]}),o.jsx("div",{className:"h-px mb-4",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:o.jsx(Qc,{size:18,style:{color:le.text}})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:""})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),o.jsx(nr,{value:d,onChange:p,min:200,max:5e3})]}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),o.jsx(nr,{value:f,onChange:h,min:200,max:5e3})]}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),o.jsx(nr,{value:x,onChange:w,min:500,max:2e4})]}),o.jsx("button",{className:"w-full rounded-[14px] py-3 text-[14px] font-bold text-white",style:{background:g?"rgba(201,98,138,0.5)":"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"3px 3px 8px rgba(201,98,138,0.3)"},onClick:N,disabled:g,children:g?"...":""})]}):o.jsx("div",{className:"flex justify-center py-4",children:o.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2",style:{borderColor:le.accent,borderTopColor:"transparent"}})})]})]}),v&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:v})})]})}const F={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},g0=["claude-opus-4-6","claude-opus-4-5-20251101","claude-sonnet-4-6","claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001"];function y0(e){try{return new URL(e).hostname}catch(t){return e}}function Yd({label:e,value:t,onChange:n,placeholder:r,password:s,disabled:l}){const[a,i]=u.useState(!1);return o.jsxs("div",{className:"mb-4",children:[e&&o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:F.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:s&&!a?"password":"text",value:t,onChange:c=>n(c.target.value),placeholder:r,disabled:l,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none pr-12",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:l?F.textMuted:F.text,opacity:l?.5:1}}),s&&o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>i(!a),children:a?o.jsx(Ky,{size:16,style:{color:F.textMuted}}):o.jsx(Yy,{size:16,style:{color:F.textMuted}})})]})]})}function v0({value:e,onChange:t,options:n}){return o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:F.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[12px] font-semibold transition-all",style:{background:e===r.value?F.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?F.accentDark:F.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})}function w0({value:e,onChange:t,options:n,placeholder:r}){const[s,l]=u.useState(!1),a=u.useRef(null);return u.useEffect(()=>{if(!s)return;const i=c=>{a.current&&!a.current.contains(c.target)&&l(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[s]),o.jsxs("div",{className:"relative",ref:a,children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:e?F.text:F.textMuted},onClick:()=>l(!s),children:[o.jsx("span",{className:"truncate",children:e||r||""}),o.jsx(kr,{size:16,style:{color:F.textMuted,flexShrink:0,transform:s?"rotate(180deg)":"none"}})]}),s&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:F.bg,boxShadow:"var(--card-shadow)"},children:n.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[13px]",style:{color:F.text},onClick:()=>{t(i),l(!1)},children:[o.jsx("span",{className:"truncate",children:i}),i===e&&o.jsx(gr,{size:12,style:{color:F.accentDark,flexShrink:0}})]},i))})]})}function b0({value:e,onChange:t}){const[n,r]=u.useState(!1),s=u.useRef(null);return u.useEffect(()=>{if(!n)return;const l=a=>{s.current&&!s.current.contains(a.target)&&r(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[n]),o.jsxs("div",{className:"relative",ref:s,children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"",value:e,onChange:l=>t(l.target.value),className:"w-full rounded-[14px] px-4 py-3 pr-10 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:F.text}}),o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>r(!n),children:o.jsx(kr,{size:16,style:{color:F.textMuted}})})]}),n&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:F.bg,boxShadow:"var(--card-shadow)"},children:g0.map(l=>o.jsx("button",{className:"flex w-full px-4 py-3 text-left text-[13px]",style:{color:F.text},onClick:()=>{t(l),r(!1)},children:l},l))})]})}function qa({value:e,onChange:t,min:n,max:r,step:s}){const[l,a]=u.useState(String(e));u.useEffect(()=>a(String(e)),[e]);const i=()=>{let c=parseFloat(l);isNaN(c)&&(c=n),c=Math.max(n,Math.min(r,c)),c=Math.round(c/s)*s,c=parseFloat(c.toFixed(4)),a(String(c)),t(c)};return o.jsx("input",{type:"number",value:l,onChange:c=>a(c.target.value),onBlur:i,onKeyDown:c=>c.key==="Enter"&&i(),step:s,min:n,max:r,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:F.text}})}function Kd({on:e,onToggle:t}){return o.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":F.bg,transition:"background 0.2s"},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function Ja({children:e,className:t=""}){return o.jsx("div",{className:`rounded-[20px] p-5 mb-4 space-y-4 ${t}`,style:{background:F.bg,boxShadow:"var(--card-shadow)"},children:e})}function k0(){const e=At(),[t,n]=u.useState([]),[r,s]=u.useState([]),[l,a]=u.useState(!0),[i,c]=u.useState(""),[d,p]=u.useState(""),[f,h]=u.useState("api_key"),[x,w]=u.useState(""),[y,b]=u.useState([]),[g,m]=u.useState(!1),[v,S]=u.useState(1),[j,N]=u.useState(!1),[k,E]=u.useState(1),[T,P]=u.useState(!1),[L,oe]=u.useState(4096),[W,z]=u.useState(null),[q,he]=u.useState(0),[de,O]=u.useState(null),[K,_]=u.useState(!1),[Z,V]=u.useState(!1),[ke,ye]=u.useState(""),[Je,ve]=u.useState(!1),[X,we]=u.useState(!1),[ie,se]=u.useState(null),[Xe,Ce]=u.useState(null),[Me,H]=u.useState(""),B=u.useRef(null),ce=u.useRef(!1),te=u.useRef(null),fe=u.useRef({});fe.current={baseUrl:i,apiKey:d,authType:f,modelName:x,temperature:v,tempEnabled:j,topP:k,topPEnabled:T,maxTokens:L,thinkingBudget:q,editingPreset:W,providers:t};const I=u.useCallback($=>{O($),setTimeout(()=>O(null),2500)},[]),J=u.useCallback(async()=>{try{const[$,ge]=await Promise.all([A("/api/providers"),A("/api/presets")]);n($.providers||[]),s(ge.presets||[])}catch($){I(": "+$.message)}finally{a(!1)}},[I]);u.useEffect(()=>{J()},[J]);const ne=$=>{var ae,_e;z($),w($.model_name),N($.temperature!=null),S((ae=$.temperature)!=null?ae:1),P($.top_p!=null),E((_e=$.top_p)!=null?_e:1),oe($.max_tokens),he($.thinking_budget||0);const ge=t.find(ht=>ht.id===$.api_provider_id);ge&&(c(ge.base_url),p(ge.api_key),h(ge.auth_type||"api_key"))},ue=()=>{z(null),c(""),p(""),h("api_key"),w(""),S(1),N(!1),E(1),P(!1),oe(4096),he(0),b([])},Ae=async()=>{if(!i.trim()||!d.trim()){I(" API  Key");return}m(!0);try{const $=await fetch(`${i.trim().replace(/\/+$/,"")}/models`,{headers:{Authorization:`Bearer ${d.trim()}`}});if(!$.ok)throw new Error(`HTTP ${$.status}`);const ae=((await $.json()).data||[]).map(_e=>_e.id).sort();b(ae),I(ae.length?` ${ae.length} `:"")}catch($){I(": "+$.message)}finally{m(!1)}},Fe=async()=>{var $;if(!i.trim()||!d.trim()||!x.trim()){I(" API Key ");return}_(!0);try{const ge=i.trim().replace(/\/+$/,""),ae={"Content-Type":"application/json",Authorization:`Bearer ${d.trim()}`};f==="oauth_token"&&(ae["anthropic-beta"]="claude-code-20250219,oauth-2025-04-20,fine-grained-tool-streaming-2025-05-14",ae["anthropic-dangerous-direct-browser-access"]="true",ae["x-app"]="cli");const _e=await fetch(`${ge}/chat/completions`,{method:"POST",headers:ae,body:JSON.stringify({model:x.trim(),max_tokens:10,messages:[{role:"user",content:"Hi"}]})});if(!_e.ok){const ht=await _e.json().catch(()=>({}));throw new Error((($=ht.error)==null?void 0:$.message)||`HTTP ${_e.status}`)}I(" ")}catch(ge){I(": "+ge.message)}finally{_(!1)}},Kt=async $=>{const ge=fe.current,ae=ge.baseUrl.trim(),_e=ge.apiKey.trim(),ht=ge.authType,mn=$.find(er=>er.base_url===ae);return mn?((mn.api_key!==_e||mn.auth_type!==ht)&&await A(`/api/providers/${mn.id}`,{method:"PUT",body:{api_key:_e,auth_type:ht}}),mn.id):(await A("/api/providers",{method:"POST",body:{name:y0(ae),base_url:ae,api_key:_e,auth_type:ht}})).id},_n=async($,ge)=>{const ae=fe.current;if(!ae.baseUrl.trim()||!ae.apiKey.trim()||!ae.modelName.trim()){I("");return}we(!0);try{const _e=await Kt(ae.providers),ht={name:$,model_name:ae.modelName.trim(),temperature:ae.tempEnabled?ae.temperature:null,top_p:ae.topPEnabled?ae.topP:null,max_tokens:Number(ae.maxTokens)||4096,thinking_budget:Number(ae.thinkingBudget)||0,api_provider_id:_e};ae.editingPreset&&!ge?(await A(`/api/presets/${ae.editingPreset.id}`,{method:"PUT",body:ht}),I("")):(await A("/api/presets",{method:"POST",body:ht}),I("")),await J()}catch(_e){I(": "+_e.message)}finally{we(!1)}},kt=()=>{const $=ke.trim();$&&(V(!1),_n($,Je))},Dt=()=>{W&&_n(W.name,!1)},xn=async()=>{if(ie){try{await A(`/api/presets/${ie.id}`,{method:"DELETE"}),I(""),(W==null?void 0:W.id)===ie.id&&ue(),J()}catch($){I(": "+$.message)}se(null)}},Zn=async()=>{const $=Me.trim();if(!(!$||!Xe)){try{await A(`/api/presets/${Xe.id}`,{method:"PUT",body:{name:$}}),I(""),J()}catch(ge){I("")}Ce(null)}},Rt=($,ge)=>{ce.current=!1;const ae=$.touches?$.touches[0]:$;te.current={x:ae.clientX,y:ae.clientY},B.current=setTimeout(()=>{ce.current=!0,se(ge)},600)},We=$=>{if(!te.current||!B.current)return;const ge=$.touches?$.touches[0]:$,ae=ge.clientX-te.current.x,_e=ge.clientY-te.current.y;ae*ae+_e*_e>100&&(clearTimeout(B.current),B.current=null)},jr=()=>clearTimeout(B.current);return o.jsxs("div",{className:"flex h-full flex-col",style:{background:F.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:F.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:F.text},children:"API "}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:l?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:F.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs(Ja,{children:[o.jsx(Yd,{label:"API ",value:i,onChange:c,placeholder:"https://api.openai.com/v1",disabled:f==="oauth_token"}),o.jsx(Yd,{label:"API Key",value:d,onChange:p,placeholder:f==="oauth_token"?"sk-ant-oat01-...":"sk-...",password:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:F.textMuted},children:""}),o.jsx(v0,{value:f,onChange:$=>{h($),$==="oauth_token"&&c("https://api.anthropic.com/v1")},options:[{value:"api_key",label:" API Key"},{value:"oauth_token",label:"Setup Token"}]})]})]}),o.jsxs(Ja,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:F.textMuted},children:""}),f==="oauth_token"?o.jsx(b0,{value:x,onChange:w}):o.jsx(w0,{value:x,onChange:w,options:y})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text},onClick:Fe,disabled:K,children:[K?o.jsx(Ed,{size:14,className:"animate-spin"}):null,""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text,opacity:f==="oauth_token"?.4:1},onClick:Ae,disabled:g||f==="oauth_token",children:[g?o.jsx(Ed,{size:14,className:"animate-spin"}):o.jsx(ia,{size:14}),""]})]})]}),o.jsxs(Ja,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:F.text},children:" (0-2)"}),o.jsx("div",{className:"text-[11px]",style:{color:F.textMuted},children:""})]}),o.jsx(Kd,{on:j,onToggle:()=>N(!j)})]}),j&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:F.textMuted},children:""}),o.jsx(qa,{value:v,onChange:S,min:0,max:2,step:.1})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:F.text},children:"Top P (0-1)"}),o.jsx(Kd,{on:T,onToggle:()=>P(!T)})]}),T&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:F.textMuted},children:""}),o.jsx(qa,{value:k,onChange:E,min:0,max:1,step:.05})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:F.text},children:"Max Tokens"}),o.jsx(qa,{value:L,onChange:oe,min:128,max:2e5,step:1})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:F.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:F.textMuted},children:"Extended Thinking tokens"})]}),o.jsxs("select",{className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none appearance-none",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:F.text,WebkitAppearance:"none",textAlignLast:"center"},value:q,onChange:$=>he(Number($.target.value)),children:[o.jsx("option",{value:0,children:""}),o.jsx("option",{value:1024,children:"1024"}),o.jsx("option",{value:2048,children:"2048"}),o.jsx("option",{value:4096,children:"4096"}),o.jsx("option",{value:8192,children:"8192"}),o.jsx("option",{value:16384,children:"16384"})]})]})]}),o.jsxs("div",{className:"mb-4 space-y-3",children:[W?o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:Dt,disabled:X,children:[o.jsx(ml,{size:14}),X?"...":""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text},onClick:()=>{ve(!0),ye(""),V(!0)},disabled:X,children:[o.jsx(Vy,{size:14}),""]})]}):o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>{ve(!0),ye(""),V(!0)},disabled:X,children:[o.jsx(us,{size:14}),""]}),W&&o.jsx("button",{className:"w-full py-1 text-center text-[12px]",style:{color:F.textMuted},onClick:ue,children:""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"mb-3 text-[12px] font-bold uppercase tracking-wide",style:{color:F.textMuted},children:""}),r.length===0?o.jsx("div",{className:"rounded-[20px] py-8 text-center text-[13px]",style:{background:F.bg,boxShadow:"var(--card-shadow)",color:F.textMuted},children:""}):o.jsx("div",{className:"space-y-3",children:r.map($=>{var ge,ae;return o.jsxs("div",{className:"rounded-[18px] p-4",style:{background:F.bg,boxShadow:(W==null?void 0:W.id)===$.id?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{ce.current||ne($)},onTouchStart:_e=>Rt(_e,$),onTouchMove:We,onTouchEnd:jr,onMouseDown:_e=>Rt(_e,$),onMouseMove:We,onMouseUp:jr,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-[14px] font-bold truncate",style:{color:(W==null?void 0:W.id)===$.id?F.accentDark:F.text},children:$.name}),o.jsx(Gc,{size:12,style:{color:F.textMuted,flexShrink:0,marginLeft:8}})]}),o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:F.textMuted},children:$.model_name}),o.jsxs("div",{className:"mt-1 text-[10px] font-mono",style:{color:F.textMuted},children:["T: ",(ge=$.temperature)!=null?ge:""," | Top-P: ",(ae=$.top_p)!=null?ae:""," | Max: ",$.max_tokens,$.thinking_budget?` | Think: ${$.thinking_budget}`:""]})]},$.id)})})]})]})}),Z&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>V(!1),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:F.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:$=>$.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:F.text},children:""}),o.jsx("input",{type:"text",value:ke,onChange:$=>ye($.target.value),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:F.text},autoFocus:!0,onKeyDown:$=>$.key==="Enter"&&kt()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text},onClick:()=>V(!1),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:ke.trim()?"linear-gradient(135deg, var(--accent), var(--accent-dark))":"rgba(201,98,138,0.3)"},onClick:kt,disabled:!ke.trim(),children:""})]})]})}),ie&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>se(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:F.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:$=>$.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:F.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:F.textMuted},children:["",ie.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text},onClick:()=>se(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:xn,children:""})]})]})}),Xe&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>Ce(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:F.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:$=>$.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:F.text},children:""}),o.jsx("input",{autoFocus:!0,type:"text",value:Me,onChange:$=>H($.target.value),className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:F.bg,color:F.text},onKeyDown:$=>$.key==="Enter"&&Zn()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:F.bg,boxShadow:"var(--card-shadow-sm)",color:F.text},onClick:()=>Ce(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))"},onClick:Zn,children:""})]})]})}),de&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:de})})]})}const Ye={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Wl({on:e,onToggle:t,disabled:n}){return o.jsx("button",{onClick:()=>!n&&t(),className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":Ye.bg,transition:"background 0.2s",opacity:n?.4:1,cursor:n?"not-allowed":"pointer"},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function Ss({label:e,hint:t,value:n,onChange:r,min:s,max:l,step:a=1,disabled:i}){const[c,d]=u.useState(String(n));u.useEffect(()=>d(String(n)),[n]);const p=()=>{let f=parseFloat(c);isNaN(f)&&(f=s),f=Math.max(s,Math.min(l,f)),f=Math.round(f/a)*a,f=parseFloat(f.toFixed(a<1?1:0)),d(String(f)),r(f)};return o.jsxs("div",{className:"flex items-center justify-between",style:{opacity:i?.4:1,pointerEvents:i?"none":"auto"},children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ye.text},children:e}),t&&o.jsx("div",{className:"text-[11px]",style:{color:Ye.textMuted},children:t})]}),o.jsx("input",{type:"number",value:c,onChange:f=>d(f.target.value),onBlur:p,onKeyDown:f=>f.key==="Enter"&&p(),step:a,min:s,max:l,disabled:i,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ye.bg,color:Ye.text}})]})}function Vl({children:e}){return o.jsx("div",{className:"rounded-[20px] p-5 mb-4 space-y-4",style:{background:Ye.bg,boxShadow:"var(--card-shadow)"},children:e})}function Xl(){return o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}})}function j0(){const e=At(),[t,n]=u.useState(!0),[r,s]=u.useState(!1),[l,a]=u.useState({enabled:!1,random_mode:!1,interval:30,min_gap:30,retry_enabled:!0,retry_gap:1.5,max_retries:8,voice_enabled:!1,voice_chance:30}),[i,c]=u.useState(null),d=u.useCallback(w=>{c(w),setTimeout(()=>c(null),2e3)},[]);u.useEffect(()=>{(async()=>{try{const w=await A("/api/settings/proactive");a(w)}catch(w){d(": "+w.message)}finally{n(!1)}})()},[d]);const p=async()=>{s(!0);try{await A("/api/settings/proactive",{method:"PUT",body:l}),d("")}catch(w){d(": "+w.message)}finally{s(!1)}},f=w=>a(y=>({...y,...w})),h=!l.enabled,x=l.random_mode&&l.enabled;return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ye.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ye.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:Ye.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ye.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ye.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:p,disabled:r,children:o.jsx(ml,{size:18,style:{color:Ye.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:t?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ye.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs(Vl,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:Ye.text},children:""}),o.jsx(Wl,{on:l.enabled,onToggle:()=>f({enabled:!l.enabled})})]}),l.enabled&&o.jsxs(o.Fragment,{children:[o.jsx(Xl,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ye.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:Ye.textMuted},children:""})]}),o.jsx(Wl,{on:l.random_mode,onToggle:()=>f({random_mode:!l.random_mode})})]})]})]}),o.jsxs(Vl,{children:[o.jsx(Ss,{label:" ()",hint:" (10-60)",value:x?10:l.interval,onChange:w=>f({interval:w}),min:10,max:60,disabled:h||x}),o.jsx(Xl,{}),o.jsx(Ss,{label:" ()",hint:" (15-120)",value:l.min_gap,onChange:w=>f({min_gap:w}),min:15,max:120,disabled:h||x})]}),o.jsxs(Vl,{children:[o.jsxs("div",{className:"flex items-center justify-between",style:{opacity:h?.4:1,pointerEvents:h?"none":"auto"},children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ye.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:Ye.textMuted},children:" = "})]}),o.jsx(Wl,{on:l.retry_enabled,onToggle:()=>f({retry_enabled:!l.retry_enabled}),disabled:h})]}),l.retry_enabled&&!h&&o.jsxs(o.Fragment,{children:[o.jsx(Xl,{}),o.jsx(Ss,{label:" ()",hint:"0.5-4.0",value:l.retry_gap,onChange:w=>f({retry_gap:w}),min:.5,max:4,step:.1,disabled:x}),o.jsx(Ss,{label:"",hint:"1-15",value:l.max_retries,onChange:w=>f({max_retries:w}),min:1,max:15})]})]}),o.jsxs(Vl,{children:[o.jsxs("div",{className:"flex items-center justify-between",style:{opacity:h?.4:1,pointerEvents:h?"none":"auto"},children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ye.text},children:""}),o.jsx(Wl,{on:l.voice_enabled,onToggle:()=>f({voice_enabled:!l.voice_enabled}),disabled:h})]}),l.voice_enabled&&!h&&o.jsxs(o.Fragment,{children:[o.jsx(Xl,{}),o.jsx(Ss,{label:" (%)",hint:"0-100",value:l.voice_chance,onChange:w=>f({voice_chance:w}),min:0,max:100})]})]})]})}),i&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const pe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},ma={thinking:{bg:"rgba(168,130,200,0.12)",color:"#8860c8",label:""},tool_use:{bg:"rgba(232,160,60,0.12)",color:"#b8820a",label:""},tool_result:{bg:"rgba(80,160,200,0.12)",color:"#1a7ab0",label:""},injected_memories:{bg:"rgba(80,180,120,0.12)",color:"#3a8a5f",label:""}},Qd=[{key:"short",label:""},{key:"long",label:""}],S0=[{key:"happy",label:""},{key:"sad",label:""},{key:"angry",label:""},{key:"anxious",label:""},{key:"tired",label:""},{key:"emo",label:""},{key:"flirty",label:""},{key:"proud",label:""},{key:"calm",label:""}],Gd=300;function su({block_type:e}){const t=ma[e]||{bg:"rgba(136,136,160,0.1)",color:pe.textMuted,label:e};return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:t.bg,color:t.color},children:t.label})}function dx({content:e}){const[t,n]=u.useState(!1),r=e.length>Gd;return o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:pe.text},children:r&&!t?e.slice(0,Gd)+"...":e}),r&&o.jsx("div",{className:"mt-1.5 flex justify-center",children:o.jsx("button",{className:"rounded-full px-3 py-0.5 text-[11px]",style:{color:pe.accentDark,background:"rgba(232,160,191,0.12)"},onClick:s=>{s.stopPropagation(),n(!t)},children:t?"":""})})]})}function N0({block:e,cacheKey:t,translateCache:n}){const r=n.current.get(t),[s,l]=u.useState(r||null),[a,i]=u.useState(!!r),[c,d]=u.useState(!1),p=ma.thinking,f=async h=>{if(h.stopPropagation(),s){i(!a);return}d(!0);try{const x=await A("/api/cot/translate",{method:"POST",body:{text:e.content}});l(x.translated),i(!0),n.current.set(t,x.translated)}catch(x){console.error("Translation failed:",x),alert("")}finally{d(!1)}};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:p.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(su,{block_type:"thinking"}),o.jsx("span",{className:"flex-1"}),o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#1a7ab0",background:"rgba(80,160,200,0.15)"},onClick:f,disabled:c,children:c?"...":a?"":""})]}),o.jsx(dx,{content:a&&s?s:e.content})]})}function C0({avatarUrl:e}){return o.jsx("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full overflow-hidden",style:{boxShadow:"var(--icon-inset)",background:pe.bg},children:e?o.jsx("img",{src:e,alt:"",className:"h-full w-full object-cover"}):o.jsx("span",{style:{fontSize:16},children:""})})}function qd(e){return e?e>=1e3?`${(e/1e3).toFixed(1)}k`:String(e):"0"}function E0(e){if(!e)return null;const t=e/1e3;return t>=100?`${Math.round(t)}s`:`${t.toFixed(1)}s`}function M0({prompt:e,completion:t,elapsedMs:n,hasToolCalls:r,cacheHit:s}){if(!(e||t||n)&&!r)return null;const a=s?"rgba(220,120,160,0.12)":"rgba(80,160,120,0.12)",i=s?"#d478a0":"#3a8a5f";return o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:a,color:i},children:["",qd(e)]}),o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(160,100,220,0.12)",color:"#8a5abf"},children:["",qd(t)]}),n?o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(200,140,60,0.12)",color:"#b8820a"},children:E0(n)}):null]})}function _0(e){const t=[],n=[],r=[],s=[];for(const a of e)a.block_type==="thinking"?t.push(a):a.block_type==="tool_use"?n.push(a):a.block_type==="tool_result"?r.push(a):s.push(a);const l=[];for(let a=0;a<n.length;a++)l.push(n[a]),a<r.length&&l.push(r[a]);for(let a=n.length;a<r.length;a++)l.push(r[a]);return[...t,...l,...s]}function T0({memories:e}){const[t,n]=u.useState(!1);if(!e||e.length===0)return null;const r=ma.injected_memories;return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:r.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-2",onClick:()=>n(!t),children:[o.jsx(su,{block_type:"injected_memories"}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:r.color},children:["(",e.length,")"]}),t?o.jsx(_h,{size:12,style:{color:r.color}}):o.jsx(kr,{size:12,style:{color:r.color}})]}),t&&o.jsx("div",{className:"mt-2 space-y-1",children:e.map(s=>o.jsxs("p",{className:"text-[11px] leading-relaxed",style:{color:pe.text},children:[o.jsxs("span",{style:{color:r.color,fontWeight:600},children:["#",s.id]})," ",s.content]},s.id))})]})}function D0({item:e,expanded:t,onToggle:n,live:r,avatarUrl:s,translateCache:l}){const a=e.rounds.map(c=>({...c,blocks:_0(c.blocks.filter(d=>d.block_type!=="text"&&d.block_type!=="usage"))})).filter(c=>c.blocks.length>0),i=a.length>0||e.injectedMemories&&e.injectedMemories.length>0||r&&e.textPreview;return o.jsxs("div",{className:"rounded-[18px] overflow-hidden",style:{background:pe.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-3 p-4",onClick:n,children:[o.jsx(C0,{avatarUrl:s}),o.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r&&o.jsx("span",{className:"inline-block h-3 w-3 animate-spin rounded-full border-[1.5px]",style:{borderColor:pe.accentDark,borderTopColor:"transparent"}}),e.has_tool_calls&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold",style:{background:"rgba(232,160,60,0.15)",color:"#b8820a"},children:""}),o.jsx(M0,{prompt:e.prompt_tokens||0,completion:e.completion_tokens||0,elapsedMs:e.elapsed_ms||0,hasToolCalls:e.has_tool_calls,cacheHit:e.cache_hit}),o.jsx("span",{className:"text-[10px]",style:{color:pe.textMuted},children:e.created_at||""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[13px]",style:{color:pe.text},children:e.preview||"()"})]}),t?o.jsx(_h,{size:16,style:{color:pe.textMuted,flexShrink:0}}):o.jsx(kr,{size:16,style:{color:pe.textMuted,flexShrink:0}})]}),t&&i&&o.jsxs("div",{className:"px-4 pb-4",children:[o.jsx(T0,{memories:e.injectedMemories}),a.map(c=>o.jsxs("div",{className:"mb-3",children:[a.length>1&&o.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:pe.textMuted},children:[" ",c.round_index+1]}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}})]}),c.blocks.map((d,p)=>{if(d.block_type==="thinking")return o.jsx(N0,{block:d,cacheKey:`${e.request_id}:${c.round_index}:${p}`,translateCache:l},p);const f=ma[d.block_type]||{bg:"rgba(136,136,160,0.08)",color:pe.textMuted,label:d.block_type};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:f.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(su,{block_type:d.block_type}),d.tool_name&&o.jsx("span",{className:"text-[10px] font-mono",style:{color:f.color},children:d.tool_name})]}),o.jsx(dx,{content:d.content})]},p)})]},c.round_index)),r&&e.textPreview&&o.jsxs("div",{className:"rounded-[12px] p-3",style:{background:"rgba(232,160,191,0.08)"},children:[o.jsx("div",{className:"mb-1",children:o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(232,160,191,0.15)",color:pe.accentDark},children:""})}),o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:pe.text},children:e.textPreview})]})]})]})}function R0(){var K;const e=At(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[l,a]=u.useState(new Set),[i,c]=u.useState(()=>localStorage.getItem("chat_mode")||"long"),[d,p]=u.useState(null),[f,h]=u.useState(!1),[x,w]=u.useState(new Set),[y,b]=u.useState(null),[g,m]=u.useState(null),v=u.useRef(null),S=u.useRef(new Map),[j,N]=u.useState(null),[k,E]=u.useState(!1),T=u.useRef(null),P=u.useRef(new Set),L=u.useRef(!1),oe=u.useRef([]),[W,z]=u.useState(()=>localStorage.getItem("whisper_token")),q=u.useRef(null),he=()=>{s(!0),b(null),L.current=!1,A("/api/cot?limit=100").then(_=>{n(Array.isArray(_)?_:[]),L.current=!0;const Z=oe.current;if(oe.current=[],Z.length>0&&q.current)for(const V of Z)q.current(V)}).catch(_=>{console.error("COT load error:",_),b(_.message||""),L.current=!0}).finally(()=>{s(!1);const _=localStorage.getItem("whisper_token");_&&_!==W&&z(_)})};u.useEffect(()=>{he()},[]),u.useEffect(()=>{A("/api/sessions?limit=1").then(_=>{var V;const Z=(V=_.sessions)==null?void 0:V[0];Z!=null&&Z.assistant_id&&fs(`assistant-avatar-${Z.assistant_id}`).then(ke=>{ke&&m(ke)}).catch(()=>{})}).catch(()=>{})},[]),u.useEffect(()=>{A("/api/settings/mood").then(_=>N(_.mood||"calm")).catch(()=>N("calm"))},[]),u.useEffect(()=>{if(!k)return;const _=Z=>{T.current&&!T.current.contains(Z.target)&&E(!1)};return document.addEventListener("pointerdown",_),()=>document.removeEventListener("pointerdown",_)},[k]),u.useEffect(()=>{if(!W){console.log("[COT WS] No token yet, waiting...");return}const Z=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/cot?token=${encodeURIComponent(W)}`;console.log("[COT WS] Connecting to",Z);let V,ke,ye=!1;const Je=()=>{if(ye)return;V=new WebSocket(Z),v.current=V,V.onopen=()=>{console.log("[COT WS] Connected"),h(!0)};const ve=X=>{var Me;const{type:we,request_id:ie}=X,se=H=>{const B=H.findIndex(I=>I.request_id===ie);return B>=0?[H,B]:[[{request_id:ie,created_at:new Date().toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),preview:"...",has_tool_calls:!1,rounds:[],injectedMemories:[],textPreview:""},...H],0]},Xe=(H,B)=>{const ce=H.findIndex(fe=>fe.round_index===B);if(ce>=0)return[H,ce];const te=[...H,{round_index:B,blocks:[]}];return te.sort((fe,I)=>fe.round_index-I.round_index),[te,te.findIndex(fe=>fe.round_index===B)]},Ce=H=>{P.current.has(H)||a(B=>{if(B.has(H))return B;const ce=new Set(B);return ce.add(H),ce})};if(we==="tokens_update"){n(H=>H.map(B=>B.request_id===ie?{...B,prompt_tokens:X.prompt_tokens||0,completion_tokens:X.completion_tokens||0,cache_hit:X.cache_hit||!1}:B));return}if(we==="replay_snapshot"){console.log("[COT] replay_snapshot",ie,"thinking_rounds:",(Me=X.rounds)==null?void 0:Me.length,"text_len:",(X.text_preview||"").length),n(H=>{let[B,ce]=se(H);B=[...B];const te={...B[ce]};if(X.rounds)for(const fe of X.rounds){if(!fe.thinking)continue;let[I,J]=Xe([...te.rounds],fe.round_index);const ne={...I[J],blocks:[...I[J].blocks]},ue=ne.blocks.findIndex(Ae=>Ae.block_type==="thinking");ue>=0?fe.thinking.length>ne.blocks[ue].content.length&&(ne.blocks[ue]={...ne.blocks[ue],content:fe.thinking}):ne.blocks.push({block_type:"thinking",content:fe.thinking,tool_name:null}),I[J]=ne,te.rounds=I}return X.text_preview&&X.text_preview.length>(te.textPreview||"").length&&(te.textPreview=X.text_preview,(!te.preview||te.preview==="...")&&(te.preview=X.text_preview.slice(0,80))),X.injected_memories&&(te.injectedMemories=X.injected_memories),X.prompt_tokens&&(te.prompt_tokens=X.prompt_tokens),X.completion_tokens&&(te.completion_tokens=X.completion_tokens),X.cache_hit&&(te.cache_hit=X.cache_hit),B[ce]=te,B}),w(H=>new Set(H).add(ie)),Ce(ie);return}if(we==="done"){w(H=>{const B=new Set(H);return B.delete(ie),B}),P.current.delete(ie),n(H=>H.map(B=>B.request_id===ie?{...B,prompt_tokens:X.prompt_tokens||0,completion_tokens:X.completion_tokens||0,elapsed_ms:X.elapsed_ms||0,cache_hit:X.cache_hit||!1,textPreview:""}:B));return}if(we==="injected_memories"){n(H=>{let[B,ce]=se(H);return B=[...B],B[ce]={...B[ce],injectedMemories:X.memories||[]},B}),w(H=>new Set(H).add(ie)),Ce(ie);return}if(we==="thinking_delta"){n(H=>{let[B,ce]=se(H);B=[...B];const te={...B[ce]};let[fe,I]=Xe([...te.rounds],X.round_index);const J={...fe[I],blocks:[...fe[I].blocks]};let ne=-1;for(let ue=J.blocks.length-1;ue>=0;ue--)if(J.blocks[ue].block_type==="thinking"){ne=ue;break}return ne>=0?J.blocks[ne]={...J.blocks[ne],content:J.blocks[ne].content+X.content}:J.blocks.push({block_type:"thinking",content:X.content,tool_name:null}),fe[I]=J,te.rounds=fe,B[ce]=te,B}),w(H=>new Set(H).add(ie)),Ce(ie);return}if(we==="text_delta"){n(H=>{let[B,ce]=se(H);B=[...B];const te={...B[ce]};return te.textPreview=(te.textPreview||"")+X.content,(!te.preview||te.preview==="...")&&(te.preview=te.textPreview.slice(0,80)),B[ce]=te,B}),w(H=>new Set(H).add(ie)),Ce(ie);return}if(we==="tool_use"||we==="tool_result"){n(H=>{let[B,ce]=se(H);B=[...B];const te={...B[ce]};let[fe,I]=Xe([...te.rounds],X.round_index);return fe[I]={...fe[I],blocks:[...fe[I].blocks,{block_type:we,content:X.content,tool_name:X.tool_name}]},te.rounds=fe,we==="tool_use"&&(te.has_tool_calls=!0),B[ce]=te,B}),w(H=>new Set(H).add(ie)),Ce(ie);return}if(X.block_type){const{round_index:H,block_type:B,content:ce,tool_name:te}=X;n(fe=>{let[I,J]=se(fe);I=[...I];const ne={...I[J]};let[ue,Ae]=Xe([...ne.rounds],H);return ue[Ae]={...ue[Ae],blocks:[...ue[Ae].blocks,{block_type:B,content:ce,tool_name:te}]},ne.rounds=ue,B==="tool_use"&&(ne.has_tool_calls=!0),B==="text"&&(!ne.preview||ne.preview==="...")&&(ne.preview=ce.slice(0,80)),I[J]=ne,I}),w(fe=>new Set(fe).add(ie)),Ce(ie)}};q.current=ve,V.onmessage=X=>{try{const we=JSON.parse(X.data);if(!L.current){oe.current.push(we);return}ve(we)}catch(we){}},V.onclose=X=>{console.log("[COT WS] Disconnected, code:",X.code,"reason:",X.reason),h(!1),v.current=null,ye||(ke=setTimeout(Je,3e3))},V.onerror=X=>{console.error("[COT WS] Error:",X),V.close()}};return Je(),()=>{ye=!0,clearTimeout(ke),v.current&&(v.current.onclose=null,v.current.close())}},[W]);const de=u.useRef(!0);u.useEffect(()=>{if(de.current){de.current=!1;return}localStorage.setItem("chat_mode",i);const _=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({..._,shortMode:i==="short"})),A("/api/settings/chat-mode",{method:"PUT",body:{mode:i}}).catch(()=>{})},[i]);const O=_=>{N(_),E(!1),A("/api/settings/mood",{method:"PUT",body:{mood:_}}).catch(()=>{})};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:pe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:pe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:pe.text},children:"COT "}),o.jsxs("div",{className:"flex items-center gap-2",children:[f&&o.jsx("div",{className:"h-2 w-2 rounded-full",style:{background:"#2a9d5c"},title:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:pe.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:he,disabled:r,children:o.jsx(ia,{size:16,style:{color:pe.accentDark},className:r?"animate-spin":""})})]})]}),o.jsx("div",{className:"shrink-0 pb-3",style:{paddingLeft:20,paddingRight:20},children:o.jsxs("div",{className:"flex items-stretch gap-4 justify-center",children:[o.jsxs("div",{className:"relative flex",ref:T,children:[o.jsx("button",{className:"flex w-[42px] shrink-0 items-center justify-center rounded-[14px]",style:{background:pe.bg,boxShadow:"var(--inset-shadow)"},onClick:()=>j&&E(!k),children:j?o.jsx("img",{src:`/miniapp/assets/mood/${j}.png`,alt:j,className:"h-6 w-6",style:{imageRendering:"pixelated"}}):o.jsx("div",{className:"h-6 w-6"})}),k&&o.jsx("div",{className:"absolute left-0 top-12 z-50 rounded-[16px] overflow-hidden",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)",width:174},children:S0.map((_,Z)=>{const V=Math.floor(Z/3),ke=Z%3,ye=j===_.key;return o.jsxs("button",{className:"inline-flex flex-col items-center justify-center",style:{width:"calc(100% / 3)",padding:"8px 0 6px",background:ye?"rgba(232,160,191,0.18)":"transparent",boxShadow:[ke<2?"inset -1px 0 0 rgba(136,136,160,0.12)":"",V<2?"inset 0 -1px 0 rgba(136,136,160,0.12)":""].filter(Boolean).join(", ")||"none"},onClick:()=>O(_.key),children:[o.jsx("img",{src:`/miniapp/assets/mood/${_.key}.png`,alt:_.label,className:"h-7 w-7",style:{imageRendering:"pixelated",filter:ye?"drop-shadow(0 0 3px #e8a0bf)":"none"}}),o.jsx("span",{className:"text-[10px] mt-0.5",style:{color:ye?"#d48aab":pe.textMuted},children:_.label})]},_.key)})})]}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:pe.bg,width:160},children:Qd.map(_=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:i===_.key?pe.bg:"transparent",boxShadow:i===_.key?"var(--card-shadow-sm)":"none",color:i===_.key?pe.accentDark:pe.textMuted},onClick:()=>{_.key!==i&&p(_.key)},children:_.label},_.key))})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8 pt-5",children:r?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:pe.accent,borderTopColor:"transparent"}})}):y?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(Cd,{size:36,style:{color:"#ef4444",opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:"#ef4444"},children:y})]}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(Cd,{size:36,style:{color:pe.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:pe.textMuted},children:" COT "})]}):t.map(_=>o.jsx("div",{className:"mb-3 rounded-[18px]",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)"},children:o.jsx(D0,{item:_,expanded:l.has(_.request_id),onToggle:()=>{a(Z=>{const V=new Set(Z);return V.has(_.request_id)?(V.delete(_.request_id),P.current.add(_.request_id)):(V.add(_.request_id),P.current.delete(_.request_id)),V})},live:x.has(_.request_id),avatarUrl:g,translateCache:S})},_.request_id))}),d&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>p(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:pe.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:_=>_.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:pe.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:pe.textMuted},children:["",((K=Qd.find(_=>_.key===d))==null?void 0:K.label)||d,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)",color:pe.text},onClick:()=>p(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:pe.accentDark,boxShadow:"4px 4px 10px rgba(201,98,138,0.4)"},onClick:()=>{c(d),p(null)},children:""})]})]})})]})}const et={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Yl=80;function P0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Yl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Yl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Yl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Yl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:et.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(ds,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function z0({msg:e,roleLabel:t,roleColor:n,fmtTime:r,onDelete:s}){const[l,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);return u.useLayoutEffect(()=>{const p=d.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e.content,l]),o.jsx(P0,{onDelete:s,children:o.jsxs("div",{className:"rounded-[18px] p-3",style:{background:et.bg},children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:n(e.role)},children:t(e.role)}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[e.summarized&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px] font-semibold",style:{background:"rgba(58,138,95,0.15)",color:"#2d7a4a"},children:""}),o.jsx("span",{className:"text-[10px]",style:{color:et.textMuted},children:r(e.created_at)})]})]}),o.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:et.text}:{color:et.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:e.content}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:"#d48aab",background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})})]})})}function I0(){const e=At(),[t,n]=u.useState([]),[r,s]=u.useState(null),[l,a]=u.useState(!0),[i,c]=u.useState(!1),d=async()=>{var y;a(!0);try{const g=(y=(await A("/api/sessions?limit=1")).sessions)==null?void 0:y[0];if(!g){a(!1);return}s(g.id);const m=await A(`/api/sessions/${g.id}/messages?limit=50`);n((m.messages||[]).reverse()),c(m.has_more||!1)}catch(b){console.error(b)}a(!1)};u.useEffect(()=>{d()},[]);const p=async y=>{if(r)try{await A(`/api/sessions/${r}/messages/${y}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==y))}catch(b){console.error("Delete failed",b)}},f=async()=>{if(!r||!i||l)return;const y=t[t.length-1];if(y){a(!0);try{const b=await A(`/api/sessions/${r}/messages?limit=50&before_id=${y.id}`),g=(b.messages||[]).reverse();n(m=>[...m,...g]),c(b.has_more||!1)}catch(b){console.error(b)}a(!1)}},h=y=>{if(!y)return"";const b=new Date(y),g=new Date;return b.toDateString()===g.toDateString()?b.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):b.toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})},x=y=>y==="user"?"":y==="assistant"?"AI":"",w=y=>y==="user"?et.accentDark:y==="assistant"?"#3a9b5c":et.textMuted;return o.jsxs("div",{className:"flex h-full flex-col",style:{background:et.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:et.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:et.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:et.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:et.bg,boxShadow:l?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:d,disabled:l,children:o.jsx(ia,{size:16,style:{color:et.accentDark},className:l?"animate-spin":""})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("p",{className:"text-[11px]",style:{color:et.textMuted},children:""})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l&&t.length===0?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:et.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:et.textMuted},children:""}):o.jsxs(o.Fragment,{children:[t.map(y=>o.jsx(z0,{msg:y,roleLabel:x,roleColor:w,fmtTime:h,onDelete:()=>p(y.id)},y.id)),i&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:et.bg,boxShadow:"var(--card-shadow-sm)",color:et.accentDark},onClick:f,disabled:l,children:l?"...":""})]})})]})}const D={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},L0=[{key:"memories",label:""},{key:"summaries",label:""},{key:"messages",label:""}],Jd={identity:{color:"#7b5ea7",bg:"#ede4f7"},relationship:{color:"#c26a8a",bg:"#f7e0ea"},bond:{color:"#d48aab",bg:"#fce8f0"},conflict:{color:"#b5454a",bg:"#f5dede"},fact:{color:"#4a8ab5",bg:"#deedf5"},preference:{color:"#9b7a3b",bg:"#f0ebd8"},health:{color:"#4a9b6e",bg:"#ddf0e5"},task:{color:"#6b7b9b",bg:"#e0e6f0"},ephemeral:{color:"#9b9b9b",bg:"#ececec"},other:{color:"#8a7a6a",bg:"#efe8df"}},fx=[{value:"",label:""},{value:"identity",label:"identity"},{value:"relationship",label:"relationship"},{value:"bond",label:"bond"},{value:"conflict",label:"conflict"},{value:"fact",label:"fact"},{value:"preference",label:"preference"},{value:"health",label:"health"},{value:"task",label:"task"},{value:"ephemeral",label:"ephemeral"},{value:"other",label:"other"}],O0=[{value:"",label:""},{value:"sad",label:"sad"},{value:"angry",label:"angry"},{value:"anxious",label:"anxious"},{value:"tired",label:"tired"},{value:"emo",label:"emo"},{value:"happy",label:"happy"},{value:"flirty",label:"flirty"},{value:"proud",label:"proud"},{value:"calm",label:"calm"}],$0=[{value:"",label:""},{value:"user",label:""},{value:"assistant",label:""},{value:"system",label:""}];function lr(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function lu({text:e,keyword:t}){if(!t||!e)return o.jsx(o.Fragment,{children:e});const n=e.toLowerCase(),r=t.toLowerCase(),s=[];let l=0,a=n.indexOf(r,l);for(;a!==-1;)a>l&&s.push(o.jsx("span",{children:e.slice(l,a)},l)),s.push(o.jsx("span",{style:{color:D.accentDark,fontWeight:600},children:e.slice(a,a+r.length)},`h${a}`)),l=a+r.length,a=n.indexOf(r,l);return l<e.length&&s.push(o.jsx("span",{children:e.slice(l)},l)),o.jsx(o.Fragment,{children:s})}function px({selected:e}){return o.jsx("div",{className:"flex h-5 w-5 shrink-0 items-center justify-center rounded-full",style:e?{background:D.accentDark,boxShadow:"0 2px 6px rgba(201,98,138,0.3)"}:{background:D.bg,boxShadow:"var(--inset-shadow)"},children:e&&o.jsx(gr,{size:12,color:"white",strokeWidth:3})})}function A0({title:e="",message:t,confirmLabel:n="",confirmColor:r="#ff4d6d",onConfirm:s,onCancel:l}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:l,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:D.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:a=>a.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:D.text},children:e}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:D.textMuted},children:t}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.text},onClick:l,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:r,boxShadow:`4px 4px 10px ${r}66`},onClick:s,children:n})]})]})})}function Zd({initialText:e,onSave:t,onCancel:n,memoryData:r}){var h;const[s,l]=u.useState(e),[a,i]=u.useState((r==null?void 0:r.klass)||"other"),[c,d]=u.useState((((h=r==null?void 0:r.tags)==null?void 0:h.topic)||[]).join(", ")),p=!!r,f=fx.filter(x=>x.value);return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-5 w-full max-w-[340px] rounded-[18px] p-4",style:{background:D.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:x=>x.stopPropagation(),children:[o.jsx("textarea",{className:"w-full rounded-[12px] p-3 text-[12px] leading-relaxed resize-none outline-none",style:{background:D.bg,boxShadow:"var(--inset-shadow)",color:D.text,minHeight:p?100:140,maxHeight:280},value:s,onChange:x=>l(x.target.value),autoFocus:!0}),p&&o.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:D.textMuted},children:""}),o.jsxs("div",{className:"relative flex-1",children:[o.jsx("select",{className:"w-full appearance-none rounded-[10px] px-3 py-1.5 text-[11px] font-medium outline-none",style:{background:D.bg,boxShadow:"var(--inset-shadow)",color:D.text,WebkitAppearance:"none"},value:a,onChange:x=>i(x.target.value),children:f.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))}),o.jsx(kr,{size:10,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2",style:{color:D.textMuted}})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:D.textMuted},children:""}),o.jsx("input",{className:"flex-1 rounded-[10px] px-3 py-1.5 text-[11px] outline-none",style:{background:D.bg,boxShadow:"var(--inset-shadow)",color:D.text},placeholder:", ",value:c,onChange:x=>d(x.target.value)})]})]}),o.jsxs("div",{className:"mt-3 flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.textMuted},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.accentDark},onClick:()=>{if(p){const x=c.split(/[,]/).map(w=>w.trim()).filter(Boolean);t(s,a,{topic:x})}else t(s)},disabled:!s.trim(),children:""})]})]})})}function ef({value:e,rawValue:t,onChange:n,options:r,width:s,active:l}){var p;const[a,i]=u.useState(!1),c=u.useRef(null);u.useEffect(()=>{if(!a)return;const f=h=>{c.current&&!c.current.contains(h.target)&&i(!1)};return document.addEventListener("mousedown",f),document.addEventListener("touchstart",f),()=>{document.removeEventListener("mousedown",f),document.removeEventListener("touchstart",f)}},[a]);const d=((p=r.find(f=>f.value===String(t)))==null?void 0:p.label)||e||"";return o.jsxs("div",{className:"relative",style:{width:s},ref:c,children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[12px] px-2.5 py-2 text-[11px] font-medium text-left",style:{boxShadow:"var(--card-shadow-sm)",background:D.bg,color:l?D.accentDark:D.text},onClick:()=>i(!a),children:[o.jsx("span",{className:"truncate flex-1",children:d}),o.jsx(kr,{size:10,style:{color:D.textMuted,flexShrink:0,marginLeft:2,transform:a?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),a&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[12px]",style:{background:D.bg,boxShadow:"var(--card-shadow)"},children:r.map(f=>o.jsxs("button",{className:"flex w-full items-center justify-between px-3 py-2 text-[11px]",style:{color:D.text},onClick:()=>{n(f.value),i(!1)},children:[o.jsx("span",{className:"truncate",children:f.label}),String(t)===f.value&&o.jsx(gr,{size:10,style:{color:D.accentDark,flexShrink:0}})]},f.value))})]})}function tf({children:e,time:t,badge:n,keyword:r,onEdit:s,selectMode:l,selected:a,onToggle:i,onLongPress:c}){const[d,p]=u.useState(!1),[f,h]=u.useState(!1),x=u.useRef(null),w=typeof e=="string"?e:"",y=u.useRef(null),b=u.useRef(!1),g=u.useRef(null);u.useLayoutEffect(()=>{const N=x.current;N&&!d&&h(N.scrollHeight>N.clientHeight+1)},[w,d]);const m=N=>{if(l)return;const k=N.touches[0];g.current={x:k.clientX,y:k.clientY},b.current=!1,y.current=setTimeout(()=>{b.current=!0,c==null||c()},600)},v=N=>{if(!g.current||!y.current)return;const k=N.touches[0],E=k.clientX-g.current.x,T=k.clientY-g.current.y;E*E+T*T>100&&(clearTimeout(y.current),y.current=null)},S=()=>{clearTimeout(y.current)},j=()=>{if(!b.current&&l){i==null||i();return}};return o.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:m,onTouchMove:v,onTouchEnd:S,onTouchCancel:S,onClick:j,children:[l&&o.jsx("div",{className:"mt-1",children:o.jsx(px,{selected:a})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between gap-1",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[n,o.jsx("div",{ref:x,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:d?{color:D.text}:{color:D.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:N=>{l||(N.stopPropagation(),p(!d))},children:o.jsx(lu,{text:w,keyword:r})})]}),!l&&s&&o.jsx("button",{className:"mt-0.5 flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},onClick:N=>{N.stopPropagation(),s()},children:o.jsx(Gc,{size:11,style:{color:D.accentDark}})})]}),o.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:D.textMuted},children:t||""}),!l&&(f||d)&&o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:D.accentDark,background:"rgba(232,160,191,0.1)"},onClick:N=>{N.stopPropagation(),p(!d)},children:d?"":""})]})]})]})}function F0({content:e,deletedAt:t,keyword:n,onRestore:r,onPermanentDelete:s}){const[l,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);return u.useLayoutEffect(()=>{const p=d.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e,l]),o.jsxs("div",{className:"mb-2 rounded-[14px] p-3",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",opacity:.75},children:[o.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:D.text}:{color:D.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:o.jsx(lu,{text:e,keyword:n})}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:D.accentDark,background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:D.textMuted},children:t?(()=>{const p=Math.max(0,30-Math.floor((Date.now()-new Date(t).getTime())/864e5));return` ${lr(t)}  ${p}`})():""}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(59,130,246,0.1)",color:"#3b82f6"},onClick:r,children:""}),o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(239,68,68,0.1)",color:"#ef4444"},onClick:s,children:""})]})]})]})}function B0({msg:e,keyword:t,roleLabel:n,roleColor:r,selectMode:s,selected:l,onToggle:a,onLongPress:i}){const[c,d]=u.useState(!1),[p,f]=u.useState(!1),h=u.useRef(null),x=u.useRef(null),w=u.useRef(!1),y=u.useRef(null);u.useLayoutEffect(()=>{const S=h.current;S&&!c&&f(S.scrollHeight>S.clientHeight+1)},[e.content,c]);const b=S=>{if(s)return;const j=S.touches[0];y.current={x:j.clientX,y:j.clientY},w.current=!1,x.current=setTimeout(()=>{w.current=!0,i==null||i()},600)},g=S=>{if(!y.current||!x.current)return;const j=S.touches[0],N=j.clientX-y.current.x,k=j.clientY-y.current.y;N*N+k*k>100&&(clearTimeout(x.current),x.current=null)},m=()=>{clearTimeout(x.current)},v=()=>{if(!w.current&&s){a==null||a();return}};return o.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:b,onTouchMove:g,onTouchEnd:m,onTouchCancel:m,onClick:v,children:[s&&o.jsx("div",{className:"mt-1",children:o.jsx(px,{selected:l})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:r(e.role)},children:n(e.role)}),e.summary_group_id&&o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(74,138,181,0.1)",color:"#4a8ab5"},children:["",e.summary_group_id]})]}),o.jsx("span",{className:"text-[10px]",style:{color:D.textMuted},children:lr(e.created_at)})]}),o.jsx("div",{ref:h,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:c?{color:D.text}:{color:D.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:S=>{s||(S.stopPropagation(),d(!c))},children:o.jsx(lu,{text:e.content,keyword:t})}),!s&&(p||c)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:D.accentDark,background:"rgba(232,160,191,0.1)"},onClick:S=>{S.stopPropagation(),d(!c)},children:c?"":""})})]})]})}function U0(){var Er;const e=At(),[t,n]=u.useState("memories"),[r,s]=u.useState(!1),[l,a]=u.useState(!1),[i,c]=u.useState(null),[d,p]=u.useState([]),[f,h]=u.useState(null),[x,w]=u.useState(""),[y,b]=u.useState(null),[g,m]=u.useState(null),[v,S]=u.useState(""),[j,N]=u.useState(""),[k,E]=u.useState(""),[T,P]=u.useState(!1),[L,oe]=u.useState(new Set),[W,z]=u.useState([]),[q,he]=u.useState([]),[de,O]=u.useState([]),[K,_]=u.useState([]),[Z,V]=u.useState([]),[ke,ye]=u.useState({longterm:null,daily:null}),[Je,ve]=u.useState(!1),[X,we]=u.useState(null),[ie,se]=u.useState(!1),[Xe,Ce]=u.useState(null),[Me,H]=u.useState(!0),[B,ce]=u.useState(!1),[te,fe]=u.useState(!1),[I,J]=u.useState(!1);u.useEffect(()=>{P(!1),oe(new Set)},[t,r]);const ne=()=>{ve(!0),A("/api/settings/summary-layers").then(C=>ye({longterm:C.longterm,daily:C.daily})).catch(C=>console.error(C)).finally(()=>ve(!1))};u.useEffect(()=>{t!=="messages"||!r||ne()},[t,r]);const ue=async()=>{se(!0),Ce(null);try{const C=await A("/api/settings/summary-layers/flush",{method:"POST"});Ce(C.flushed?` ${C.flushed} `:""),C.flushed&&setTimeout(ne,3e3)}catch(C){Ce("")}finally{se(!1),setTimeout(()=>Ce(null),3e3)}};u.useEffect(()=>{A("/api/sessions?limit=50").then(C=>{const U=C.sessions||[];p(U),U.length>0&&!i&&c(U[0].id)}).catch(()=>{})},[]),u.useEffect(()=>{i&&A(`/api/sessions/${i}/info`).then(C=>h(C.assistant_name||null)).catch(()=>h(null))},[i]);const Ae=50,Fe=u.useRef(""),Kt=u.useRef(null),_n=u.useRef({klass:"",mood:"",role:""});_n.current={klass:v,mood:j,role:k},u.useEffect(()=>{i&&Dt()},[i,l]),u.useEffect(()=>{i&&!l&&Dt()},[t]),u.useEffect(()=>{i&&!l&&Dt()},[v,j,k]),u.useEffect(()=>(Kt.current&&clearTimeout(Kt.current),Kt.current=setTimeout(()=>{const C=x.trim();C!==Fe.current&&(Fe.current=C,i&&Dt(C))},400),()=>{Kt.current&&clearTimeout(Kt.current)}),[x]);const kt=C=>{const U=[],Q=(C!=null?C:Fe.current||"").trim();Q&&U.push(`search=${encodeURIComponent(Q)}`);const re=_n.current;return t==="memories"&&re.klass&&U.push(`klass=${encodeURIComponent(re.klass)}`),t==="summaries"&&re.mood&&U.push(`mood_tag=${encodeURIComponent(re.mood)}`),t==="messages"&&re.role&&U.push(`role=${encodeURIComponent(re.role)}`),U.length?`&${U.join("&")}`:""},Dt=async C=>{if(!i)return;H(!0);const U=kt(C);try{if(l){const[Q,re]=await Promise.all([A("/api/memories/trash?limit=100"),A(`/api/sessions/${i}/summaries/trash`)]);_(Q.memories||[]),V(re.summaries||[])}else if(t==="memories"){const Q=await A(`/api/memories?limit=${Ae}&offset=0${U}`);z(Q.memories||[]),ce((Q.total||0)>(Q.memories||[]).length)}else if(t==="summaries"){const Q=await A(`/api/sessions/${i}/summaries?limit=${Ae}&offset=0${U}`);he(Q.summaries||[]),fe((Q.total||0)>(Q.summaries||[]).length)}else{const Q=await A(`/api/sessions/${i}/messages?limit=50${U}`);O((Q.messages||[]).reverse()),J(Q.has_more||!1)}}catch(Q){console.error(Q)}H(!1)},xn=async()=>{if(!B||Me)return;H(!0);const C=kt();try{const U=await A(`/api/memories?limit=${Ae}&offset=${W.length}${C}`),Q=U.memories||[];z(re=>[...re,...Q]),ce((U.total||0)>W.length+Q.length)}catch(U){console.error(U)}H(!1)},Zn=async()=>{if(!i||!te||Me)return;H(!0);const C=kt();try{const U=await A(`/api/sessions/${i}/summaries?limit=${Ae}&offset=${q.length}${C}`),Q=U.summaries||[];he(re=>[...re,...Q]),fe((U.total||0)>q.length+Q.length)}catch(U){console.error(U)}H(!1)},Rt=async()=>{if(!i||!I||Me)return;const C=de[de.length-1];if(!C)return;H(!0);const U=kt();try{const Q=await A(`/api/sessions/${i}/messages?limit=50&before_id=${C.id}${U}`);O(re=>[...re,...(Q.messages||[]).reverse()]),J(Q.has_more||!1)}catch(Q){console.error(Q)}H(!1)},We=x.trim(),jr=u.useMemo(()=>We?K.filter(C=>C.content.toLowerCase().includes(We.toLowerCase())):K,[K,We]),$=u.useMemo(()=>We?Z.filter(C=>(C.summary_content||"").toLowerCase().includes(We.toLowerCase())):Z,[Z,We]),ge=(C,U)=>b({message:C,action:U}),ae=async C=>{await A(`/api/memories/${C}/restore`,{method:"POST"}),_(U=>U.filter(Q=>Q.id!==C))},_e=C=>ge("",async()=>{await A(`/api/memories/${C}/permanent`,{method:"DELETE"}),_(U=>U.filter(Q=>Q.id!==C))}),ht=async C=>{await A(`/api/sessions/${i}/summaries/${C}/restore`,{method:"POST"}),V(U=>U.filter(Q=>Q.id!==C))},mn=C=>ge("",async()=>{await A(`/api/sessions/${i}/summaries/${C}/permanent`,{method:"DELETE"}),V(U=>U.filter(Q=>Q.id!==C))}),Sr=C=>{oe(U=>{const Q=new Set(U);return Q.has(C)?Q.delete(C):Q.add(C),Q})},er=C=>{P(!0),oe(new Set([C]))},Ze=()=>{let C=[];t==="memories"?C=W.map(U=>U.id):t==="summaries"?C=q.map(U=>U.id):C=de.map(U=>U.id),oe(new Set(C))},at=()=>{P(!1),oe(new Set)},xt=()=>{if(L.size===0)return;const C=L.size,U=t==="messages"?` ${C} `:` ${C} ${t==="memories"?"":""}`;ge(U,async()=>{const Q=[...L];t==="memories"?(await A("/api/memories/batch",{method:"DELETE",body:{ids:Q}}),z(re=>re.filter(it=>!L.has(it.id)))):t==="summaries"?(await A(`/api/sessions/${i}/summaries/batch`,{method:"DELETE",body:{ids:Q}}),he(re=>re.filter(it=>!L.has(it.id)))):(await A(`/api/sessions/${i}/messages/batch`,{method:"DELETE",body:{ids:Q}}),O(re=>re.filter(it=>!L.has(it.id)))),at()})},ln=async(C,U,Q)=>{if(g){try{if(g.type==="memory"){const re={content:C};U!==void 0&&(re.klass=U),Q!==void 0&&(re.tags=Q),await A(`/api/memories/${g.id}`,{method:"PUT",body:re}),z(it=>it.map(Tn=>Tn.id===g.id?{...Tn,content:C,...U!==void 0?{klass:U}:{},...Q!==void 0?{tags:Q}:{}}:Tn))}else await A(`/api/sessions/${i}/summaries/${g.id}`,{method:"PATCH",body:{summary_content:C}}),he(re=>re.map(it=>it.id===g.id?{...it,summary_content:C}:it))}catch(re){console.error(re)}m(null)}},jt=C=>{if(!X)return;const U=X.type;we(null),b({title:"",message:"",confirmLabel:"",confirmColor:D.accentDark,action:async()=>{await A(`/api/settings/summary-layers/${U}`,{method:"PUT",body:{content:C}}),ye(Q=>({...Q,[U]:{...Q[U]||{},content:C}}))}})},mt=C=>C==="user"?"":C==="assistant"?f||"":"",Ft=C=>C==="user"?D.accentDark:C==="assistant"?"#8d68c4":D.textMuted,on=t==="memories"?fx:t==="summaries"?O0:$0,Be=t==="memories"?v:t==="summaries"?j:k,an=C=>{t==="memories"?S(C):t==="summaries"?N(C):E(C)},tr=l?(()=>{if(Me)return o.jsx(Ns,{});const C=t==="memories"?jr:$;return C.length===0?o.jsx(Kl,{text:We?"":""}):C.map(U=>o.jsx(F0,{content:U.content||U.summary_content||"()",deletedAt:U.deleted_at,keyword:We,onRestore:()=>t==="memories"?ae(U.id):ht(U.id),onPermanentDelete:()=>t==="memories"?_e(U.id):mn(U.id)},U.id))})():t==="memories"?Me&&W.length===0?o.jsx(Ns,{}):W.length===0?o.jsx(Kl,{text:We?"":""}):o.jsxs(o.Fragment,{children:[!T&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:D.textMuted},children:""}),W.map(C=>o.jsx(tf,{time:C.updated_at?`${lr(C.created_at)}   ${lr(C.updated_at)}`:lr(C.created_at),keyword:We,onEdit:()=>m({type:"memory",id:C.id,text:C.content,klass:C.klass,tags:C.tags}),selectMode:T,selected:L.has(C.id),onToggle:()=>Sr(C.id),onLongPress:()=>er(C.id),badge:(()=>{var re;const U=Jd[C.klass]||Jd.other,Q=((re=C.tags)==null?void 0:re.topic)||[];return o.jsxs("div",{className:"flex flex-wrap items-center gap-1 mb-1",children:[o.jsx("span",{className:"inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:U.bg,color:U.color},children:C.klass}),o.jsxs("span",{className:"inline-block text-[10px]",style:{color:D.textMuted},children:["#",C.id]}),Q.map((it,Tn)=>o.jsx("span",{className:"inline-block rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(136,136,160,0.1)",color:D.textMuted},children:it},Tn))]})})(),children:C.content},C.id)),B&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.accentDark},onClick:xn,disabled:Me,children:Me?"...":""})]}):t==="summaries"?Me&&q.length===0?o.jsx(Ns,{}):q.length===0?o.jsx(Kl,{text:We?"":""}):o.jsxs(o.Fragment,{children:[!T&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:D.textMuted},children:""}),q.map(C=>o.jsx(tf,{time:lr(C.created_at),keyword:We,onEdit:()=>m({type:"summary",id:C.id,text:C.summary_content}),selectMode:T,selected:L.has(C.id),onToggle:()=>Sr(C.id),onLongPress:()=>er(C.id),badge:o.jsxs(o.Fragment,{children:[C.mood_tag&&o.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:"rgba(232,160,191,0.15)",color:D.accentDark},children:C.mood_tag}),o.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:D.textMuted},children:["#",C.id]})]}),children:C.summary_content||"()"},C.id)),te&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.accentDark},onClick:Zn,disabled:Me,children:Me?"...":""})]}):r?Je?o.jsx(Ns,{}):o.jsxs("div",{className:"space-y-4",children:[[{type:"daily",label:"",hint:""},{type:"longterm",label:"",hint:""}].map(({type:C,label:U,hint:Q})=>{var Tn,ou;const re=ke[C],it=(Tn=re==null?void 0:re.content)==null?void 0:Tn.trim();return o.jsxs("div",{className:"rounded-[18px] p-4",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:D.text},children:U}),o.jsx("div",{className:"text-[11px]",style:{color:D.textMuted},children:Q})]}),o.jsx("button",{className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-full",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>we({type:C,content:(re==null?void 0:re.content)||""}),children:o.jsx(Gc,{size:13,style:{color:D.accentDark}})})]}),o.jsx("div",{className:"text-[12px] leading-relaxed whitespace-pre-wrap break-words",style:{color:it?D.text:D.textMuted},children:it?re.content:""}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:D.textMuted},children:re!=null&&re.updated_at?` ${lr(re.updated_at)}`:""}),o.jsxs("span",{className:"text-[10px]",style:{color:D.textMuted},children:[((ou=re==null?void 0:re.content)==null?void 0:ou.length)||0," "]})]})]},C)}),o.jsxs("button",{className:"mt-2 flex w-full items-center justify-center gap-2 rounded-[14px] py-2.5 text-[13px] font-medium",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.textMuted},onClick:ue,disabled:ie,children:[o.jsx(ia,{size:13,className:ie?"animate-spin":""}),Xe||(ie?"...":"")]})]}):Me&&de.length===0?o.jsx(Ns,{}):de.length===0?o.jsx(Kl,{text:We?"":""}):o.jsxs(o.Fragment,{children:[!T&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:D.textMuted},children:""}),de.map(C=>o.jsx(B0,{msg:C,keyword:We,roleLabel:mt,roleColor:Ft,selectMode:T,selected:L.has(C.id),onToggle:()=>Sr(C.id),onLongPress:()=>er(C.id)},C.id)),I&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.accentDark},onClick:Rt,disabled:Me,children:Me?"...":""})]});return o.jsxs("div",{className:"flex h-full flex-col",style:{background:D.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:D.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:D.text},children:l?"":""}),t==="messages"?o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:D.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>s(!r),children:o.jsx(Qc,{size:16,style:{color:r?D.accentDark:D.textMuted}})}):o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:D.bg,boxShadow:l?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>a(!l),children:o.jsx(ds,{size:16,style:{color:l?"#ef4444":D.accentDark}})})]}),T&&o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsxs("div",{className:"flex items-center justify-between rounded-[14px] px-4 py-2.5",style:{background:D.bg,boxShadow:"var(--inset-shadow)"},children:[o.jsxs("span",{className:"text-[12px] font-semibold",style:{color:D.accentDark},children:[" ",L.size," "]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:"rgba(59,130,246,0.15)",color:"#3b82f6"},onClick:Ze,children:""}),o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.textMuted},onClick:at,children:""}),o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold text-white",style:{background:L.size>0?"#ff4d6d":"rgba(255,77,109,0.3)"},onClick:xt,disabled:L.size===0,children:""})]})]})}),!T&&o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:D.bg,boxShadow:"var(--inset-shadow)"},children:L0.map(C=>{const U=l&&C.key==="messages",Q=t===C.key,re=C.key==="messages"&&r?"":C.label;return o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:U?{color:D.textMuted,opacity:.35,cursor:"default"}:Q?{background:D.bg,boxShadow:"var(--card-shadow-sm)",color:D.accentDark}:{color:D.textMuted},disabled:U,onClick:()=>!U&&n(C.key),children:re},C.key)})})}),!T&&!(t==="messages"&&r)&&o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(ef,{value:i?`#${i}`:"",rawValue:i!=null?i:"",onChange:C=>c(Number(C)),options:d.map(C=>({value:String(C.id),label:`#${C.id} ${C.title||""}`})),width:"22%"}),o.jsx(ef,{value:((Er=on.find(C=>C.value===Be))==null?void 0:Er.label)||on[0].label,rawValue:Be,onChange:an,options:on.map(C=>({value:C.value,label:C.label})),width:"22%",active:!!Be}),o.jsxs("div",{className:"relative flex-1",children:[o.jsx(tv,{size:13,className:"absolute left-2.5 top-1/2 -translate-y-1/2",style:{color:D.textMuted}}),o.jsx("input",{className:"w-full rounded-[12px] py-2 pl-8 pr-7 text-[11px] outline-none",style:{background:D.bg,boxShadow:"var(--inset-shadow)",color:D.text},placeholder:"...",value:x,onChange:C=>w(C.target.value)}),x&&o.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>w(""),children:o.jsx(gl,{size:13,style:{color:D.textMuted}})})]})]})}),o.jsx("div",{className:`flex-1 overflow-y-auto px-5 pb-8${t==="messages"&&r?" pt-5":""}`,children:tr}),y&&o.jsx(A0,{title:y.title,message:y.message,confirmLabel:y.confirmLabel,confirmColor:y.confirmColor,onConfirm:async()=>{try{await y.action()}catch(C){console.error(C)}b(null)},onCancel:()=>b(null)}),g&&o.jsx(Zd,{initialText:g.text,onSave:ln,onCancel:()=>m(null),memoryData:g.type==="memory"?{klass:g.klass,tags:g.tags}:null}),X&&o.jsx(Zd,{initialText:X.content,onSave:jt,onCancel:()=>we(null)})]})}function Ns(){return o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:D.accent,borderTopColor:"transparent"}})})}function Kl({text:e}){return o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:D.textMuted},children:e})}const G={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},H0=[{key:"theirs",label:""},{key:"mine",label:""}],Ql=80;function hx(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function W0({message:e,onConfirm:t,onCancel:n}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:G.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:G.text},children:""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:G.textMuted},children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)",color:G.text},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function V0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Ql);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Ql,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Ql)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Ql):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(ds,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function X0({unlockAt:e}){const[t,n]=u.useState(Date.now());u.useEffect(()=>{const d=setInterval(()=>n(Date.now()),1e3);return()=>clearInterval(d)},[]);const r=new Date(e).getTime()-t;if(r<=0)return null;const s=Math.floor(r/864e5),l=Math.floor(r%864e5/36e5),a=Math.floor(r%36e5/6e4),i=Math.floor(r%6e4/1e3);let c="";return s>0&&(c+=`${s}`),(l>0||s>0)&&(c+=`${l}`),c+=`${a}${i}`,o.jsxs("div",{className:"flex items-center gap-1.5 text-[12px]",style:{color:G.accentDark},children:[o.jsx(Jy,{size:12}),o.jsx("span",{children:c})]})}function Y0({assistants:e,avatarMap:t,currentId:n,onSelect:r,onClose:s}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:s,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-5",style:{background:G.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:l=>l.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:G.text},children:""}),o.jsx("button",{onClick:s,children:o.jsx(gl,{size:18,style:{color:G.textMuted}})})]}),o.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:e.map(l=>{var i;const a=t[l.id]||l.avatar_url;return o.jsxs("button",{className:"mb-2 flex w-full items-center gap-3 rounded-[14px] p-3 text-left",style:{background:G.bg,boxShadow:l.id===n?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{r(l.id),s()},children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:36,height:36,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:2},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:G.bg},children:a?o.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:G.accentDark},children:((i=l.name)==null?void 0:i[0])||"?"})})}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:G.text},children:l.name})]},l.id)})})]})})}function K0({diary:e,onBack:t,onMarkRead:n}){return u.useEffect(()=>{e&&!e.is_read&&e.author==="assistant"&&(!e.unlock_at||new Date(e.unlock_at)<=new Date)&&n(e.id)},[e]),o.jsxs("div",{className:"flex h-full flex-col",style:{background:G.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:t,children:o.jsx(Tt,{size:22,style:{color:G.text}})}),o.jsx("h1",{className:"text-[15px] font-bold truncate max-w-[60%]",style:{color:G.text},children:e.title||""}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:o.jsxs("div",{className:"rounded-[18px] p-5",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{className:"mb-3 text-[10px]",style:{color:G.textMuted},children:hx(e.created_at)}),o.jsx("div",{className:"text-[13px] leading-[28px]",style:{color:G.text},children:e.content.split(`
`).map((r,s)=>o.jsx("div",{style:{borderBottom:"1px solid rgba(0,0,0,0.06)",minHeight:28},children:r||""},s))})]})})]})}function Q0({assistantId:e,onSave:t,onCancel:n}){const[r,s]=u.useState(""),[l,a]=u.useState(""),[i,c]=u.useState(!1),[d,p]=u.useState(""),[f,h]=u.useState(!1),[x,w]=u.useState(!1),y=async()=>{if(!(!l.trim()||f)){h(!0);try{const b={assistant_id:e,author:"user",title:r.trim(),content:l.trim()};i&&d&&(b.unlock_at=new Date(d).toISOString()),await t(b)}finally{h(!1)}}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:G.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Tt,{size:22,style:{color:G.text}})}),o.jsx("h1",{className:"text-[15px] font-bold",style:{color:G.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:l.trim()?"var(--card-shadow-sm)":"var(--inset-shadow)"},onClick:y,disabled:!l.trim()||f,children:o.jsx("span",{className:"text-[12px] font-bold",style:{color:l.trim()?G.accentDark:G.textMuted},children:""})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[!x&&o.jsx("input",{className:"mb-3 w-full rounded-[12px] px-3 py-2.5 text-[13px] font-medium outline-none",style:{background:G.bg,boxShadow:"var(--inset-shadow)",color:G.text},placeholder:"",value:r,onChange:b=>s(b.target.value)}),o.jsxs("div",{className:"relative mb-3",children:[o.jsx("textarea",{className:"w-full rounded-[14px] p-3 text-[13px] leading-[28px] resize-none outline-none",style:{background:G.bg,boxShadow:"var(--inset-shadow)",color:G.text,minHeight:x?"calc(100vh - 120px)":200,backgroundImage:"repeating-linear-gradient(transparent, transparent 27px, rgba(0,0,0,0.05) 27px, rgba(0,0,0,0.05) 28px)",backgroundPositionY:9},placeholder:"...",value:l,onChange:b=>a(b.target.value),autoFocus:!0}),o.jsx("button",{className:"absolute top-2 right-2 flex h-7 w-7 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>w(!x),children:x?o.jsx(ls,{size:13,style:{color:G.accentDark}}):o.jsx(xl,{size:13,style:{color:G.accentDark}})})]}),!x&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-[14px] px-4 py-3",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-[13px] font-medium",style:{color:G.text},children:""}),o.jsx("p",{className:"text-[10px]",style:{color:G.textMuted},children:""})]}),o.jsx("button",{className:"relative h-7 w-12 rounded-full transition-colors",style:{background:i?G.accent:"rgba(0,0,0,0.1)"},onClick:()=>{if(!i&&!d){const b=new Date;b.setDate(b.getDate()+1),b.setHours(9,0,0,0);const g=m=>String(m).padStart(2,"0");p(`${b.getFullYear()}-${g(b.getMonth()+1)}-${g(b.getDate())}T${g(b.getHours())}:${g(b.getMinutes())}`)}c(!i)},children:o.jsx("div",{className:"absolute top-0.5 h-6 w-6 rounded-full transition-transform",style:{background:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",transform:i?"translateX(22px)":"translateX(2px)"}})})]}),i&&o.jsxs("div",{className:"rounded-[14px] px-4 py-3",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("p",{className:"mb-2 text-[12px] font-medium",style:{color:G.text},children:""}),o.jsx("input",{type:"datetime-local",className:"w-full rounded-[10px] px-3 py-2 text-[13px] outline-none",style:{background:G.bg,boxShadow:"var(--inset-shadow)",color:G.text},value:d,onChange:b=>p(b.target.value)})]})]})]})]})}function G0(){var W;const e=At(),[t,n]=u.useState("theirs"),[r,s]=u.useState([]),[l,a]=u.useState({}),[i,c]=u.useState(()=>{const z=localStorage.getItem("diary_assistant_id");return z?Number(z):null}),d=z=>{c(z),z!=null&&localStorage.setItem("diary_assistant_id",String(z))},[p,f]=u.useState(!1),[h,x]=u.useState([]),[w,y]=u.useState(!0),[b,g]=u.useState(null),[m,v]=u.useState(null),[S,j]=u.useState(!1);u.useEffect(()=>{A("/api/assistants").then(async z=>{const q=z.assistants||[];s(q),q.length>0&&(i&&q.some(O=>O.id===i)||d(q[0].id));const he={};await Promise.all(q.map(async de=>{const O=await fs(`assistant-avatar-${de.id}`).catch(()=>null);O&&(he[de.id]=O)})),a(he)}).catch(()=>{})},[]);const N=r.find(z=>z.id===i),k=i&&l[i]||(N==null?void 0:N.avatar_url);u.useEffect(()=>{i!=null&&E()},[i,t]);const E=async()=>{y(!0);try{const q=await A(`/api/diary?assistant_id=${i}&author=${t==="theirs"?"assistant":"user"}&limit=100`);x(q.diary||[])}catch(z){console.error(z)}y(!1)},T=z=>{g({message:"",action:async()=>{await A(`/api/diary/${z}`,{method:"DELETE"}),x(q=>q.filter(he=>he.id!==z))}})},P=async z=>{try{await A(`/api/diary/${z}/read`,{method:"POST"}),x(q=>q.map(he=>he.id===z?{...he,is_read:!0}:he))}catch(q){console.error(q)}},L=async z=>{await A("/api/diary",{method:"POST",body:z}),j(!1),E()},oe=z=>{z.unlock_at&&new Date(z.unlock_at)>new Date||v(z)};return m?o.jsx(K0,{diary:m,onBack:()=>{v(null),E()},onMarkRead:P}):S?o.jsx(Q0,{assistantId:i,onSave:L,onCancel:()=>j(!1)}):o.jsxs("div",{className:"flex h-full flex-col",style:{background:G.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:G.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:G.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{border:"2px solid #e8a0bf",padding:2},onClick:()=>f(!0),children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:G.bg},children:k?o.jsx("img",{src:k,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:G.accentDark},children:((W=N==null?void 0:N.name)==null?void 0:W[0])||"?"})})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:G.bg,boxShadow:"var(--inset-shadow)"},children:H0.map(z=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:t===z.key?{background:G.bg,boxShadow:"var(--card-shadow-sm)",color:G.accentDark}:{color:G.textMuted},onClick:()=>n(z.key),children:z.label},z.key))})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24 pt-5",children:w?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:G.accent,borderTopColor:"transparent"}})}):h.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:G.textMuted},children:t==="theirs"?"":""}):h.map(z=>{const q=z.unlock_at&&new Date(z.unlock_at)>new Date;return o.jsx(V0,{onDelete:()=>T(z.id),children:o.jsxs("div",{className:"p-4 rounded-[18px]",style:{background:G.bg,userSelect:"none"},onClick:()=>oe(z),children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[!z.is_read&&z.author==="assistant"&&!q&&o.jsx("div",{className:"h-2 w-2 shrink-0 rounded-full",style:{background:"#ef4444"}}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:G.text},children:z.title||""})]}),o.jsx("span",{className:"text-[10px] shrink-0 ml-2",style:{color:G.textMuted},children:hx(z.created_at)})]}),q?o.jsx(X0,{unlockAt:z.unlock_at}):o.jsx("p",{className:"text-[12px] leading-relaxed break-words",style:{color:G.textMuted,maxHeight:40,overflow:"hidden"},children:z.content.length>60?z.content.slice(0,60)+"...":z.content})]})},z.id)})}),t==="mine"&&o.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center",style:{zIndex:30},children:o.jsx("button",{className:"flex h-12 w-12 items-center justify-center rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",boxShadow:"0 4px 14px rgba(232,160,191,0.4)"},onClick:()=>j(!0),children:o.jsx(us,{size:22,color:"white"})})}),p&&o.jsx(Y0,{assistants:r,avatarMap:l,currentId:i,onSelect:d,onClose:()=>f(!1)}),b&&o.jsx(W0,{message:b.message,onConfirm:async()=>{try{await b.action()}catch(z){console.error(z)}g(null)},onCancel:()=>g(null)})]})}const Ne={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function q0({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:Ne.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:Ne.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(ls,{size:18,style:{color:Ne.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:Ne.bg,color:Ne.text},placeholder:"..."})]})}function J0(){const e=At(),[t,n]=u.useState(""),[r,s]=u.useState(""),[l,a]=u.useState(""),[i,c]=u.useState(""),[d,p]=u.useState(!1),[f,h]=u.useState(!0),[x,w]=u.useState(null),[y,b]=u.useState(!1),g=u.useRef(null),m=u.useRef(null),v=k=>{w(k),setTimeout(()=>w(null),2e3)};u.useEffect(()=>{A("/api/user/profile").then(k=>{n(k.nickname||""),s(k.background_url||""),a(k.basic_info||"")}).catch(()=>{}).finally(()=>h(!1)),fs("user-avatar").then(k=>{k&&c(k)}).catch(function(){})},[]);const S=k=>{var P;const E=(P=k.target.files)==null?void 0:P[0];if(!E)return;const T=new FileReader;T.onload=async L=>{const oe=L.target.result;try{await Ki("user-avatar",oe),c(oe)}catch(W){v("")}},T.readAsDataURL(E),k.target.value=""},j=k=>{var P;const E=(P=k.target.files)==null?void 0:P[0];if(!E)return;const T=new FileReader;T.onload=L=>a(L.target.result||""),T.readAsText(E),k.target.value=""},N=async()=>{p(!0);try{const k={nickname:t.trim()||null,background_url:r||null,basic_info:l||null,avatar_url:i?"user-avatar":null};await A("/api/user/profile",{method:"PUT",body:k});try{const E=JSON.parse(localStorage.getItem("whisper_profile")||"{}");localStorage.setItem("whisper_profile",JSON.stringify({...E,...k}))}catch(E){}v("")}catch(k){v("")}finally{p(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ne.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Tt,{size:22,style:{color:Ne.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ne.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:d?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:N,disabled:d,children:o.jsx(ml,{size:18,style:{color:Ne.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5 space-y-4",children:f?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ne.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-[20px] p-5",style:{background:Ne.bg,boxShadow:"var(--card-shadow)"},children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var k;return(k=g.current)==null?void 0:k.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Ne.bg},children:i?o.jsx("img",{src:i,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:24},children:""})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:Ne.accentDark},children:o.jsx(Mh,{size:9,color:"white"})})]}),o.jsx("input",{ref:g,type:"file",accept:"image/*",className:"hidden",onChange:S}),o.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Ne.textMuted},children:""}),o.jsx("input",{type:"text",value:t,onChange:k=>n(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ne.bg,color:Ne.text}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Ne.textMuted},children:""}),o.jsx("input",{type:"text",value:r,onChange:k=>s(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2 text-[13px] italic outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ne.bg,color:Ne.text}})]})]})]})}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:Ne.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:Ne.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Ne.bg},onClick:()=>{var k;return(k=m.current)==null?void 0:k.click()},title:"",children:o.jsx(aa,{size:13,style:{color:Ne.textMuted}})}),o.jsx("input",{ref:m,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:j}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Ne.bg},onClick:()=>b(!0),title:"",children:o.jsx(xl,{size:13,style:{color:Ne.accentDark}})})]})]}),o.jsx("textarea",{value:l,onChange:k=>a(k.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ne.bg,color:Ne.text}})]})]})}),y&&o.jsx(q0,{value:l,onChange:a,onClose:()=>b(!1)}),x&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:x})})]})}function Tr(){var n;const e=(n=window.Telegram)==null?void 0:n.WebApp,t=Math.max((e==null?void 0:e.viewportHeight)||0,window.innerHeight);document.documentElement.style.setProperty("--tg-viewport-height",t+"px")}function Z0({onSuccess:e}){const[t,n]=u.useState(""),[r,s]=u.useState(""),[l,a]=u.useState(!1),i=async c=>{if(c.preventDefault(),!!t.trim()){a(!0),s("");try{await Ay(t),e()}catch(d){s(d.message||"")}finally{a(!1)}}};return o.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--bg)",padding:"2rem"},children:o.jsxs("div",{style:{width:"100%",maxWidth:320,borderRadius:24,padding:"2rem 1.5rem",background:"var(--bg)",boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontSize:36,marginBottom:8},children:""}),o.jsx("h1",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--text)",margin:0},children:"WHISPER"}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:4},children:""})]}),o.jsxs("form",{onSubmit:i,children:[o.jsx("input",{type:"password",value:t,onChange:c=>n(c.target.value),placeholder:"",autoFocus:!0,style:{width:"100%",padding:"12px 16px",borderRadius:14,border:"none",outline:"none",fontSize:14,color:"var(--text)",background:"var(--bg)",boxShadow:"var(--inset-shadow)",boxSizing:"border-box"}}),r&&o.jsx("p",{style:{color:"#ef4444",fontSize:"0.75rem",textAlign:"center",marginTop:8,marginBottom:0},children:r}),o.jsx("button",{type:"submit",disabled:l||!t.trim(),style:{width:"100%",marginTop:16,padding:"12px 0",borderRadius:14,border:"none",fontSize:14,fontWeight:600,color:"#fff",background:l||!t.trim()?"var(--text-muted)":"linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%)",cursor:l||!t.trim()?"not-allowed":"pointer",boxShadow:"var(--card-shadow-sm)"},children:l?"...":""})]})]})})}function ew(){const e=Yc();return u.useEffect(()=>{var n;const t=(n=window.Telegram)==null?void 0:n.WebApp;t&&!e.pathname.startsWith("/cot")&&t.expand(),Tr()},[e.pathname]),o.jsxs(Iy,{children:[o.jsx(dt,{path:"/",element:o.jsx(iv,{})}),o.jsx(dt,{path:"/profile",element:o.jsx(J0,{})}),o.jsx(dt,{path:"/world-books",element:o.jsx(J1,{})}),o.jsx(dt,{path:"/world-books/new",element:o.jsx(Hd,{})}),o.jsx(dt,{path:"/world-books/:id",element:o.jsx(Hd,{})}),o.jsx(dt,{path:"/assistants",element:o.jsx(c0,{})}),o.jsx(dt,{path:"/assistants/new",element:o.jsx(Vd,{})}),o.jsx(dt,{path:"/assistants/:id",element:o.jsx(Vd,{})}),o.jsx(dt,{path:"/settings",element:o.jsx(m0,{})}),o.jsx(dt,{path:"/settings/api",element:o.jsx(k0,{})}),o.jsx(dt,{path:"/settings/proactive",element:o.jsx(j0,{})}),o.jsx(dt,{path:"/cot",element:o.jsx(R0,{})}),o.jsx(dt,{path:"/memories",element:o.jsx(U0,{})}),o.jsx(dt,{path:"/diary",element:o.jsx(G0,{})}),o.jsx(dt,{path:"/messages",element:o.jsx(I0,{})})]})}function tw(){const[e,t]=u.useState(null);return u.useEffect(()=>{var r;const n=(r=window.Telegram)==null?void 0:r.WebApp;return localStorage.getItem("whisper_token")||n&&n.initData&&n.initData.length>0?t("ok"):t("login"),n&&(n.ready(),window.location.hash.startsWith("#/cot")||n.expand()),Tr(),n&&n.onEvent("viewportChanged",Tr),window.addEventListener("resize",Tr),()=>{n&&n.offEvent("viewportChanged",Tr),window.removeEventListener("resize",Tr)}},[]),e===null?null:e==="login"?o.jsx(Z0,{onSuccess:()=>t("ok")}):o.jsx($y,{children:o.jsx(ew,{})})}window.location.hash&&!window.location.hash.startsWith("#/")&&history.replaceState(null,"",window.location.pathname+"#/cot");Za.createRoot(document.getElementById("root")).render(o.jsx(Re.StrictMode,{children:o.jsx(tw,{})}));
