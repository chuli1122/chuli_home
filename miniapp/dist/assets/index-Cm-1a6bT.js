function Cx(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Ex(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var df={exports:{}},Ko={},ff={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xl=Symbol.for("react.element"),_x=Symbol.for("react.portal"),Mx=Symbol.for("react.fragment"),Tx=Symbol.for("react.strict_mode"),Dx=Symbol.for("react.profiler"),Rx=Symbol.for("react.provider"),zx=Symbol.for("react.context"),Px=Symbol.for("react.forward_ref"),Lx=Symbol.for("react.suspense"),Ix=Symbol.for("react.memo"),Ox=Symbol.for("react.lazy"),mu=Symbol.iterator;function $x(e){return e===null||typeof e!="object"?null:(e=mu&&e[mu]||e["@@iterator"],typeof e=="function"?e:null)}var pf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hf=Object.assign,xf={};function fs(e,t,n){this.props=e,this.context=t,this.refs=xf,this.updater=n||pf}fs.prototype.isReactComponent={};fs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mf(){}mf.prototype=fs.prototype;function oc(e,t,n){this.props=e,this.context=t,this.refs=xf,this.updater=n||pf}var ac=oc.prototype=new mf;ac.constructor=oc;hf(ac,fs.prototype);ac.isPureReactComponent=!0;var gu=Array.isArray,gf=Object.prototype.hasOwnProperty,ic={current:null},yf={key:!0,ref:!0,__self:!0,__source:!0};function vf(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)gf.call(t,r)&&!yf.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:xl,type:e,key:o,ref:a,props:s,_owner:ic.current}}function Ax(e,t){return{$$typeof:xl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cc(e){return typeof e=="object"&&e!==null&&e.$$typeof===xl}function Fx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var yu=/\/+/g;function Sa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Fx(""+e.key):t.toString(36)}function ro(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case xl:case _x:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Sa(a,0):r,gu(s)?(n="",e!=null&&(n=e.replace(yu,"$&/")+"/"),ro(s,t,n,"",function(d){return d})):s!=null&&(cc(s)&&(s=Ax(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(yu,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",gu(e))for(var i=0;i<e.length;i++){o=e[i];var c=r+Sa(o,i);a+=ro(o,t,n,c,s)}else if(c=$x(e),typeof c=="function")for(e=c.call(e),i=0;!(o=e.next()).done;)o=o.value,c=r+Sa(o,i++),a+=ro(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ml(e,t,n){if(e==null)return e;var r=[],s=0;return ro(e,r,"","",function(o){return t.call(n,o,s++)}),r}function Bx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kt={current:null},so={transition:null},Ux={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:so,ReactCurrentOwner:ic};function wf(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Ml,forEach:function(e,t,n){Ml(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ml(e,function(){t++}),t},toArray:function(e){return Ml(e,function(t){return t})||[]},only:function(e){if(!cc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xe.Component=fs;xe.Fragment=Mx;xe.Profiler=Dx;xe.PureComponent=oc;xe.StrictMode=Tx;xe.Suspense=Lx;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ux;xe.act=wf;xe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=hf({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=ic.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)gf.call(t,c)&&!yf.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];r.children=i}return{$$typeof:xl,type:e.type,key:s,ref:o,props:r,_owner:a}};xe.createContext=function(e){return e={$$typeof:zx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Rx,_context:e},e.Consumer=e};xe.createElement=vf;xe.createFactory=function(e){var t=vf.bind(null,e);return t.type=e,t};xe.createRef=function(){return{current:null}};xe.forwardRef=function(e){return{$$typeof:Px,render:e}};xe.isValidElement=cc;xe.lazy=function(e){return{$$typeof:Ox,_payload:{_status:-1,_result:e},_init:Bx}};xe.memo=function(e,t){return{$$typeof:Ix,type:e,compare:t===void 0?null:t}};xe.startTransition=function(e){var t=so.transition;so.transition={};try{e()}finally{so.transition=t}};xe.unstable_act=wf;xe.useCallback=function(e,t){return kt.current.useCallback(e,t)};xe.useContext=function(e){return kt.current.useContext(e)};xe.useDebugValue=function(){};xe.useDeferredValue=function(e){return kt.current.useDeferredValue(e)};xe.useEffect=function(e,t){return kt.current.useEffect(e,t)};xe.useId=function(){return kt.current.useId()};xe.useImperativeHandle=function(e,t,n){return kt.current.useImperativeHandle(e,t,n)};xe.useInsertionEffect=function(e,t){return kt.current.useInsertionEffect(e,t)};xe.useLayoutEffect=function(e,t){return kt.current.useLayoutEffect(e,t)};xe.useMemo=function(e,t){return kt.current.useMemo(e,t)};xe.useReducer=function(e,t,n){return kt.current.useReducer(e,t,n)};xe.useRef=function(e){return kt.current.useRef(e)};xe.useState=function(e){return kt.current.useState(e)};xe.useSyncExternalStore=function(e,t,n){return kt.current.useSyncExternalStore(e,t,n)};xe.useTransition=function(){return kt.current.useTransition()};xe.version="18.3.1";ff.exports=xe;var u=ff.exports;const De=Ex(u),Hx=Cx({__proto__:null,default:De},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx=u,Vx=Symbol.for("react.element"),Xx=Symbol.for("react.fragment"),Yx=Object.prototype.hasOwnProperty,Kx=Wx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qx={key:!0,ref:!0,__self:!0,__source:!0};function bf(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Yx.call(t,r)&&!Qx.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Vx,type:e,key:o,ref:a,props:s,_owner:Kx.current}}Ko.Fragment=Xx;Ko.jsx=bf;Ko.jsxs=bf;df.exports=Ko;var l=df.exports,ai={},kf={exports:{}},$t={},jf={exports:{}},Sf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,G){var T=$.length;$.push(G);e:for(;0<T;){var te=T-1>>>1,K=$[te];if(0<s(K,G))$[te]=G,$[T]=K,T=te;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var G=$[0],T=$.pop();if(T!==G){$[0]=T;e:for(var te=0,K=$.length,ke=K>>>1;te<ke;){var ye=2*(te+1)-1,Ze=$[ye],ve=ye+1,X=$[ve];if(0>s(Ze,T))ve<K&&0>s(X,Ze)?($[te]=X,$[ve]=T,te=ve):($[te]=Ze,$[ye]=T,te=ye);else if(ve<K&&0>s(X,T))$[te]=X,$[ve]=T,te=ve;else break e}}return G}function s($,G){var T=$.sortIndex-G.sortIndex;return T!==0?T:$.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],d=[],p=1,f=null,h=3,x=!1,w=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v($){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=$)r(d),G.sortIndex=G.expirationTime,t(c,G);else break;G=n(d)}}function S($){if(y=!1,v($),!w)if(n(c)!==null)w=!0,he(j);else{var G=n(d);G!==null&&fe(S,G.startTime-$)}}function j($,G){w=!1,y&&(y=!1,g(E),E=-1),x=!0;var T=h;try{for(v(G),f=n(c);f!==null&&(!(f.expirationTime>G)||$&&!O());){var te=f.callback;if(typeof te=="function"){f.callback=null,h=f.priorityLevel;var K=te(f.expirationTime<=G);G=e.unstable_now(),typeof K=="function"?f.callback=K:f===n(c)&&r(c),v(G)}else r(c);f=n(c)}if(f!==null)var ke=!0;else{var ye=n(d);ye!==null&&fe(S,ye.startTime-G),ke=!1}return ke}finally{f=null,h=T,x=!1}}var C=!1,k=null,E=-1,D=5,z=-1;function O(){return!(e.unstable_now()-z<D)}function oe(){if(k!==null){var $=e.unstable_now();z=$;var G=!0;try{G=k(!0,$)}finally{G?Y():(C=!1,k=null)}}else C=!1}var Y;if(typeof m=="function")Y=function(){m(oe)};else if(typeof MessageChannel!="undefined"){var P=new MessageChannel,Z=P.port2;P.port1.onmessage=oe,Y=function(){Z.postMessage(null)}}else Y=function(){b(oe,0)};function he($){k=$,C||(C=!0,Y())}function fe($,G){E=b(function(){$(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,he(j))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function($){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var T=h;h=G;try{return $()}finally{h=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var T=h;h=$;try{return G()}finally{h=T}},e.unstable_scheduleCallback=function($,G,T){var te=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?te+T:te):T=te,$){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=T+K,$={id:p++,callback:G,priorityLevel:$,startTime:T,expirationTime:K,sortIndex:-1},T>te?($.sortIndex=T,t(d,$),n(c)===null&&$===n(d)&&(y?(g(E),E=-1):y=!0,fe(S,T-te))):($.sortIndex=K,t(c,$),w||x||(w=!0,he(j))),$},e.unstable_shouldYield=O,e.unstable_wrapCallback=function($){var G=h;return function(){var T=h;h=G;try{return $.apply(this,arguments)}finally{h=T}}}})(Sf);jf.exports=Sf;var Gx=jf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qx=u,Ot=Gx;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nf=new Set,Ks={};function _r(e,t){rs(e,t),rs(e+"Capture",t)}function rs(e,t){for(Ks[e]=t,e=0;e<t.length;e++)Nf.add(t[e])}var Tn=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),ii=Object.prototype.hasOwnProperty,Jx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vu={},wu={};function Zx(e){return ii.call(wu,e)?!0:ii.call(vu,e)?!1:Jx.test(e)?wu[e]=!0:(vu[e]=!0,!1)}function em(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function tm(e,t,n,r){if(t===null||typeof t=="undefined"||em(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function jt(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){at[e]=new jt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];at[t]=new jt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){at[e]=new jt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){at[e]=new jt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){at[e]=new jt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){at[e]=new jt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){at[e]=new jt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){at[e]=new jt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){at[e]=new jt(e,5,!1,e.toLowerCase(),null,!1,!1)});var uc=/[\-:]([a-z])/g;function dc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(uc,dc);at[t]=new jt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(uc,dc);at[t]=new jt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(uc,dc);at[t]=new jt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){at[e]=new jt(e,1,!1,e.toLowerCase(),null,!1,!1)});at.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){at[e]=new jt(e,1,!1,e.toLowerCase(),null,!0,!0)});function fc(e,t,n,r){var s=at.hasOwnProperty(t)?at[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(tm(t,n,s,r)&&(n=null),r||s===null?Zx(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var In=qx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tl=Symbol.for("react.element"),Or=Symbol.for("react.portal"),$r=Symbol.for("react.fragment"),pc=Symbol.for("react.strict_mode"),ci=Symbol.for("react.profiler"),Cf=Symbol.for("react.provider"),Ef=Symbol.for("react.context"),hc=Symbol.for("react.forward_ref"),ui=Symbol.for("react.suspense"),di=Symbol.for("react.suspense_list"),xc=Symbol.for("react.memo"),Un=Symbol.for("react.lazy"),_f=Symbol.for("react.offscreen"),bu=Symbol.iterator;function ks(e){return e===null||typeof e!="object"?null:(e=bu&&e[bu]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,Na;function Rs(e){if(Na===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Na=t&&t[1]||""}return`
`+Na+e}var Ca=!1;function Ea(e,t){if(!e||Ca)return"";Ca=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,i=o.length-1;1<=a&&0<=i&&s[a]!==o[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==o[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==o[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{Ca=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Rs(e):""}function nm(e){switch(e.tag){case 5:return Rs(e.type);case 16:return Rs("Lazy");case 13:return Rs("Suspense");case 19:return Rs("SuspenseList");case 0:case 2:case 15:return e=Ea(e.type,!1),e;case 11:return e=Ea(e.type.render,!1),e;case 1:return e=Ea(e.type,!0),e;default:return""}}function fi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $r:return"Fragment";case Or:return"Portal";case ci:return"Profiler";case pc:return"StrictMode";case ui:return"Suspense";case di:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ef:return(e.displayName||"Context")+".Consumer";case Cf:return(e._context.displayName||"Context")+".Provider";case hc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xc:return t=e.displayName||null,t!==null?t:fi(e.type)||"Memo";case Un:t=e._payload,e=e._init;try{return fi(e(t))}catch(n){}}return null}function rm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fi(t);case 8:return t===pc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Mf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sm(e){var t=Mf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Dl(e){e._valueTracker||(e._valueTracker=sm(e))}function Tf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Mf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function go(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function pi(e,t){var n=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function ku(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=sr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Df(e,t){t=t.checked,t!=null&&fc(e,"checked",t,!1)}function hi(e,t){Df(e,t);var n=sr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xi(e,t.type,n):t.hasOwnProperty("defaultValue")&&xi(e,t.type,sr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ju(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function xi(e,t,n){(t!=="number"||go(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var zs=Array.isArray;function Gr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+sr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function mi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Su(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(R(92));if(zs(n)){if(1<n.length)throw Error(R(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:sr(n)}}function Rf(e,t){var n=sr(t.value),r=sr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Nu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function zf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?zf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Rl,Pf=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Rl=Rl||document.createElement("div"),Rl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Rl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Qs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Is={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lm=["Webkit","ms","Moz","O"];Object.keys(Is).forEach(function(e){lm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Is[t]=Is[e]})});function Lf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Is.hasOwnProperty(e)&&Is[e]?(""+t).trim():t+"px"}function If(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Lf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var om=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yi(e,t){if(t){if(om[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function vi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wi=null;function mc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bi=null,qr=null,Jr=null;function Cu(e){if(e=yl(e)){if(typeof bi!="function")throw Error(R(280));var t=e.stateNode;t&&(t=Zo(t),bi(e.stateNode,e.type,t))}}function Of(e){qr?Jr?Jr.push(e):Jr=[e]:qr=e}function $f(){if(qr){var e=qr,t=Jr;if(Jr=qr=null,Cu(e),t)for(e=0;e<t.length;e++)Cu(t[e])}}function Af(e,t){return e(t)}function Ff(){}var _a=!1;function Bf(e,t,n){if(_a)return e(t,n);_a=!0;try{return Af(e,t,n)}finally{_a=!1,(qr!==null||Jr!==null)&&(Ff(),$f())}}function Gs(e,t){var n=e.stateNode;if(n===null)return null;var r=Zo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(R(231,t,typeof n));return n}var ki=!1;if(Tn)try{var js={};Object.defineProperty(js,"passive",{get:function(){ki=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch(e){ki=!1}function am(e,t,n,r,s,o,a,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(p){this.onError(p)}}var Os=!1,yo=null,vo=!1,ji=null,im={onError:function(e){Os=!0,yo=e}};function cm(e,t,n,r,s,o,a,i,c){Os=!1,yo=null,am.apply(im,arguments)}function um(e,t,n,r,s,o,a,i,c){if(cm.apply(this,arguments),Os){if(Os){var d=yo;Os=!1,yo=null}else throw Error(R(198));vo||(vo=!0,ji=d)}}function Mr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Uf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Eu(e){if(Mr(e)!==e)throw Error(R(188))}function dm(e){var t=e.alternate;if(!t){if(t=Mr(e),t===null)throw Error(R(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Eu(s),e;if(o===r)return Eu(s),t;o=o.sibling}throw Error(R(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=o;break}if(i===r){a=!0,r=s,n=o;break}i=i.sibling}if(!a){for(i=o.child;i;){if(i===n){a=!0,n=o,r=s;break}if(i===r){a=!0,r=o,n=s;break}i=i.sibling}if(!a)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?e:t}function Hf(e){return e=dm(e),e!==null?Wf(e):null}function Wf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Wf(e);if(t!==null)return t;e=e.sibling}return null}var Vf=Ot.unstable_scheduleCallback,_u=Ot.unstable_cancelCallback,fm=Ot.unstable_shouldYield,pm=Ot.unstable_requestPaint,Ue=Ot.unstable_now,hm=Ot.unstable_getCurrentPriorityLevel,gc=Ot.unstable_ImmediatePriority,Xf=Ot.unstable_UserBlockingPriority,wo=Ot.unstable_NormalPriority,xm=Ot.unstable_LowPriority,Yf=Ot.unstable_IdlePriority,Qo=null,wn=null;function mm(e){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Qo,e,void 0,(e.current.flags&128)===128)}catch(t){}}var on=Math.clz32?Math.clz32:vm,gm=Math.log,ym=Math.LN2;function vm(e){return e>>>=0,e===0?32:31-(gm(e)/ym|0)|0}var zl=64,Pl=4194304;function Ps(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=Ps(i):(o&=a,o!==0&&(r=Ps(o)))}else a=n&~s,a!==0?r=Ps(a):o!==0&&(r=Ps(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-on(t),s=1<<n,r|=e[n],t&=~s;return r}function wm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-on(o),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=wm(i,t)):c<=t&&(e.expiredLanes|=i),o&=~i}}function Si(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Kf(){var e=zl;return zl<<=1,!(zl&4194240)&&(zl=64),e}function Ma(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ml(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-on(t),e[t]=n}function km(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-on(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function yc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-on(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ce=0;function Qf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Gf,vc,qf,Jf,Zf,Ni=!1,Ll=[],Gn=null,qn=null,Jn=null,qs=new Map,Js=new Map,Vn=[],jm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mu(e,t){switch(e){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":qs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Js.delete(t.pointerId)}}function Ss(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=yl(t),t!==null&&vc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Sm(e,t,n,r,s){switch(t){case"focusin":return Gn=Ss(Gn,e,t,n,r,s),!0;case"dragenter":return qn=Ss(qn,e,t,n,r,s),!0;case"mouseover":return Jn=Ss(Jn,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return qs.set(o,Ss(qs.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Js.set(o,Ss(Js.get(o)||null,e,t,n,r,s)),!0}return!1}function ep(e){var t=gr(e.target);if(t!==null){var n=Mr(t);if(n!==null){if(t=n.tag,t===13){if(t=Uf(n),t!==null){e.blockedOn=t,Zf(e.priority,function(){qf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function lo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ci(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);wi=r,n.target.dispatchEvent(r),wi=null}else return t=yl(n),t!==null&&vc(t),e.blockedOn=n,!1;t.shift()}return!0}function Tu(e,t,n){lo(e)&&n.delete(t)}function Nm(){Ni=!1,Gn!==null&&lo(Gn)&&(Gn=null),qn!==null&&lo(qn)&&(qn=null),Jn!==null&&lo(Jn)&&(Jn=null),qs.forEach(Tu),Js.forEach(Tu)}function Ns(e,t){e.blockedOn===t&&(e.blockedOn=null,Ni||(Ni=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,Nm)))}function Zs(e){function t(s){return Ns(s,e)}if(0<Ll.length){Ns(Ll[0],e);for(var n=1;n<Ll.length;n++){var r=Ll[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gn!==null&&Ns(Gn,e),qn!==null&&Ns(qn,e),Jn!==null&&Ns(Jn,e),qs.forEach(t),Js.forEach(t),n=0;n<Vn.length;n++)r=Vn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Vn.length&&(n=Vn[0],n.blockedOn===null);)ep(n),n.blockedOn===null&&Vn.shift()}var Zr=In.ReactCurrentBatchConfig,ko=!0;function Cm(e,t,n,r){var s=Ce,o=Zr.transition;Zr.transition=null;try{Ce=1,wc(e,t,n,r)}finally{Ce=s,Zr.transition=o}}function Em(e,t,n,r){var s=Ce,o=Zr.transition;Zr.transition=null;try{Ce=4,wc(e,t,n,r)}finally{Ce=s,Zr.transition=o}}function wc(e,t,n,r){if(ko){var s=Ci(e,t,n,r);if(s===null)Aa(e,t,r,jo,n),Mu(e,r);else if(Sm(s,e,t,n,r))r.stopPropagation();else if(Mu(e,r),t&4&&-1<jm.indexOf(e)){for(;s!==null;){var o=yl(s);if(o!==null&&Gf(o),o=Ci(e,t,n,r),o===null&&Aa(e,t,r,jo,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Aa(e,t,r,null,n)}}var jo=null;function Ci(e,t,n,r){if(jo=null,e=mc(r),e=gr(e),e!==null)if(t=Mr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Uf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jo=e,null}function tp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hm()){case gc:return 1;case Xf:return 4;case wo:case xm:return 16;case Yf:return 536870912;default:return 16}default:return 16}}var Yn=null,bc=null,oo=null;function np(){if(oo)return oo;var e,t=bc,n=t.length,r,s="value"in Yn?Yn.value:Yn.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return oo=s.slice(e,1<r?1-r:void 0)}function ao(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Il(){return!0}function Du(){return!1}function At(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(o):o[i]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Il:Du,this.isPropagationStopped=Du,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Il)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Il)},persist:function(){},isPersistent:Il}),t}var ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kc=At(ps),gl=Oe({},ps,{view:0,detail:0}),_m=At(gl),Ta,Da,Cs,Go=Oe({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cs&&(Cs&&e.type==="mousemove"?(Ta=e.screenX-Cs.screenX,Da=e.screenY-Cs.screenY):Da=Ta=0,Cs=e),Ta)},movementY:function(e){return"movementY"in e?e.movementY:Da}}),Ru=At(Go),Mm=Oe({},Go,{dataTransfer:0}),Tm=At(Mm),Dm=Oe({},gl,{relatedTarget:0}),Ra=At(Dm),Rm=Oe({},ps,{animationName:0,elapsedTime:0,pseudoElement:0}),zm=At(Rm),Pm=Oe({},ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Lm=At(Pm),Im=Oe({},ps,{data:0}),zu=At(Im),Om={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$m={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Am={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Am[e])?!!t[e]:!1}function jc(){return Fm}var Bm=Oe({},gl,{key:function(e){if(e.key){var t=Om[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ao(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$m[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jc,charCode:function(e){return e.type==="keypress"?ao(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ao(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Um=At(Bm),Hm=Oe({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pu=At(Hm),Wm=Oe({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jc}),Vm=At(Wm),Xm=Oe({},ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ym=At(Xm),Km=Oe({},Go,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qm=At(Km),Gm=[9,13,27,32],Sc=Tn&&"CompositionEvent"in window,$s=null;Tn&&"documentMode"in document&&($s=document.documentMode);var qm=Tn&&"TextEvent"in window&&!$s,rp=Tn&&(!Sc||$s&&8<$s&&11>=$s),Lu=" ",Iu=!1;function sp(e,t){switch(e){case"keyup":return Gm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ar=!1;function Jm(e,t){switch(e){case"compositionend":return lp(t);case"keypress":return t.which!==32?null:(Iu=!0,Lu);case"textInput":return e=t.data,e===Lu&&Iu?null:e;default:return null}}function Zm(e,t){if(Ar)return e==="compositionend"||!Sc&&sp(e,t)?(e=np(),oo=bc=Yn=null,Ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rp&&t.locale!=="ko"?null:t.data;default:return null}}var eg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ou(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eg[e.type]:t==="textarea"}function op(e,t,n,r){Of(r),t=So(t,"onChange"),0<t.length&&(n=new kc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var As=null,el=null;function tg(e){gp(e,0)}function qo(e){var t=Ur(e);if(Tf(t))return e}function ng(e,t){if(e==="change")return t}var ap=!1;if(Tn){var za;if(Tn){var Pa="oninput"in document;if(!Pa){var $u=document.createElement("div");$u.setAttribute("oninput","return;"),Pa=typeof $u.oninput=="function"}za=Pa}else za=!1;ap=za&&(!document.documentMode||9<document.documentMode)}function Au(){As&&(As.detachEvent("onpropertychange",ip),el=As=null)}function ip(e){if(e.propertyName==="value"&&qo(el)){var t=[];op(t,el,e,mc(e)),Bf(tg,t)}}function rg(e,t,n){e==="focusin"?(Au(),As=t,el=n,As.attachEvent("onpropertychange",ip)):e==="focusout"&&Au()}function sg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qo(el)}function lg(e,t){if(e==="click")return qo(t)}function og(e,t){if(e==="input"||e==="change")return qo(t)}function ag(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:ag;function tl(e,t){if(cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ii.call(t,s)||!cn(e[s],t[s]))return!1}return!0}function Fu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bu(e,t){var n=Fu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fu(n)}}function cp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?cp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function up(){for(var e=window,t=go();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=go(e.document)}return t}function Nc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ig(e){var t=up(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cp(n.ownerDocument.documentElement,n)){if(r!==null&&Nc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=Bu(n,o);var a=Bu(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cg=Tn&&"documentMode"in document&&11>=document.documentMode,Fr=null,Ei=null,Fs=null,_i=!1;function Uu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_i||Fr==null||Fr!==go(r)||(r=Fr,"selectionStart"in r&&Nc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fs&&tl(Fs,r)||(Fs=r,r=So(Ei,"onSelect"),0<r.length&&(t=new kc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Fr)))}function Ol(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Br={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},La={},dp={};Tn&&(dp=document.createElement("div").style,"AnimationEvent"in window||(delete Br.animationend.animation,delete Br.animationiteration.animation,delete Br.animationstart.animation),"TransitionEvent"in window||delete Br.transitionend.transition);function Jo(e){if(La[e])return La[e];if(!Br[e])return e;var t=Br[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in dp)return La[e]=t[n];return e}var fp=Jo("animationend"),pp=Jo("animationiteration"),hp=Jo("animationstart"),xp=Jo("transitionend"),mp=new Map,Hu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ar(e,t){mp.set(e,t),_r(t,[e])}for(var Ia=0;Ia<Hu.length;Ia++){var Oa=Hu[Ia],ug=Oa.toLowerCase(),dg=Oa[0].toUpperCase()+Oa.slice(1);ar(ug,"on"+dg)}ar(fp,"onAnimationEnd");ar(pp,"onAnimationIteration");ar(hp,"onAnimationStart");ar("dblclick","onDoubleClick");ar("focusin","onFocus");ar("focusout","onBlur");ar(xp,"onTransitionEnd");rs("onMouseEnter",["mouseout","mouseover"]);rs("onMouseLeave",["mouseout","mouseover"]);rs("onPointerEnter",["pointerout","pointerover"]);rs("onPointerLeave",["pointerout","pointerover"]);_r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_r("onBeforeInput",["compositionend","keypress","textInput","paste"]);_r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ls));function Wu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,um(r,t,void 0,e),e.currentTarget=null}function gp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==o&&s.isPropagationStopped())break e;Wu(s,i,d),o=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,d=i.currentTarget,i=i.listener,c!==o&&s.isPropagationStopped())break e;Wu(s,i,d),o=c}}}if(vo)throw e=ji,vo=!1,ji=null,e}function Te(e,t){var n=t[zi];n===void 0&&(n=t[zi]=new Set);var r=e+"__bubble";n.has(r)||(yp(t,e,2,!1),n.add(r))}function $a(e,t,n){var r=0;t&&(r|=4),yp(n,e,r,t)}var $l="_reactListening"+Math.random().toString(36).slice(2);function nl(e){if(!e[$l]){e[$l]=!0,Nf.forEach(function(n){n!=="selectionchange"&&(fg.has(n)||$a(n,!1,e),$a(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$l]||(t[$l]=!0,$a("selectionchange",!1,t))}}function yp(e,t,n,r){switch(tp(t)){case 1:var s=Cm;break;case 4:s=Em;break;default:s=wc}n=s.bind(null,t,n,e),s=void 0,!ki||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Aa(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=gr(i),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}i=i.parentNode}}r=r.return}Bf(function(){var d=o,p=mc(n),f=[];e:{var h=mp.get(e);if(h!==void 0){var x=kc,w=e;switch(e){case"keypress":if(ao(n)===0)break e;case"keydown":case"keyup":x=Um;break;case"focusin":w="focus",x=Ra;break;case"focusout":w="blur",x=Ra;break;case"beforeblur":case"afterblur":x=Ra;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Ru;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Tm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Vm;break;case fp:case pp:case hp:x=zm;break;case xp:x=Ym;break;case"scroll":x=_m;break;case"wheel":x=Qm;break;case"copy":case"cut":case"paste":x=Lm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Pu}var y=(t&4)!==0,b=!y&&e==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var m=d,v;m!==null;){v=m;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,g!==null&&(S=Gs(m,g),S!=null&&y.push(rl(m,S,v)))),b)break;m=m.return}0<y.length&&(h=new x(h,w,null,n,p),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==wi&&(w=n.relatedTarget||n.fromElement)&&(gr(w)||w[Dn]))break e;if((x||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,x?(w=n.relatedTarget||n.toElement,x=d,w=w?gr(w):null,w!==null&&(b=Mr(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=d),x!==w)){if(y=Ru,S="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(y=Pu,S="onPointerLeave",g="onPointerEnter",m="pointer"),b=x==null?h:Ur(x),v=w==null?h:Ur(w),h=new y(S,m+"leave",x,n,p),h.target=b,h.relatedTarget=v,S=null,gr(p)===d&&(y=new y(g,m+"enter",w,n,p),y.target=v,y.relatedTarget=b,S=y),b=S,x&&w)t:{for(y=x,g=w,m=0,v=y;v;v=Pr(v))m++;for(v=0,S=g;S;S=Pr(S))v++;for(;0<m-v;)y=Pr(y),m--;for(;0<v-m;)g=Pr(g),v--;for(;m--;){if(y===g||g!==null&&y===g.alternate)break t;y=Pr(y),g=Pr(g)}y=null}else y=null;x!==null&&Vu(f,h,x,y,!1),w!==null&&b!==null&&Vu(f,b,w,y,!0)}}e:{if(h=d?Ur(d):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var j=ng;else if(Ou(h))if(ap)j=og;else{j=sg;var C=rg}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=lg);if(j&&(j=j(e,d))){op(f,j,n,p);break e}C&&C(e,h,d),e==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&xi(h,"number",h.value)}switch(C=d?Ur(d):window,e){case"focusin":(Ou(C)||C.contentEditable==="true")&&(Fr=C,Ei=d,Fs=null);break;case"focusout":Fs=Ei=Fr=null;break;case"mousedown":_i=!0;break;case"contextmenu":case"mouseup":case"dragend":_i=!1,Uu(f,n,p);break;case"selectionchange":if(cg)break;case"keydown":case"keyup":Uu(f,n,p)}var k;if(Sc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ar?sp(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(rp&&n.locale!=="ko"&&(Ar||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ar&&(k=np()):(Yn=p,bc="value"in Yn?Yn.value:Yn.textContent,Ar=!0)),C=So(d,E),0<C.length&&(E=new zu(E,e,null,n,p),f.push({event:E,listeners:C}),k?E.data=k:(k=lp(n),k!==null&&(E.data=k)))),(k=qm?Jm(e,n):Zm(e,n))&&(d=So(d,"onBeforeInput"),0<d.length&&(p=new zu("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:d}),p.data=k))}gp(f,t)})}function rl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function So(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Gs(e,n),o!=null&&r.unshift(rl(e,o,s)),o=Gs(e,t),o!=null&&r.push(rl(e,o,s))),e=e.return}return r}function Pr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vu(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,d=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&d!==null&&(i=d,s?(c=Gs(n,o),c!=null&&a.unshift(rl(n,c,i))):s||(c=Gs(n,o),c!=null&&a.push(rl(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var pg=/\r\n?/g,hg=/\u0000|\uFFFD/g;function Xu(e){return(typeof e=="string"?e:""+e).replace(pg,`
`).replace(hg,"")}function Al(e,t,n){if(t=Xu(t),Xu(e)!==t&&n)throw Error(R(425))}function No(){}var Mi=null,Ti=null;function Di(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ri=typeof setTimeout=="function"?setTimeout:void 0,xg=typeof clearTimeout=="function"?clearTimeout:void 0,Yu=typeof Promise=="function"?Promise:void 0,mg=typeof queueMicrotask=="function"?queueMicrotask:typeof Yu!="undefined"?function(e){return Yu.resolve(null).then(e).catch(gg)}:Ri;function gg(e){setTimeout(function(){throw e})}function Fa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Zs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Zs(t)}function Zn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ku(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),vn="__reactFiber$"+hs,sl="__reactProps$"+hs,Dn="__reactContainer$"+hs,zi="__reactEvents$"+hs,yg="__reactListeners$"+hs,vg="__reactHandles$"+hs;function gr(e){var t=e[vn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Dn]||n[vn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ku(e);e!==null;){if(n=e[vn])return n;e=Ku(e)}return t}e=n,n=e.parentNode}return null}function yl(e){return e=e[vn]||e[Dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ur(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function Zo(e){return e[sl]||null}var Pi=[],Hr=-1;function ir(e){return{current:e}}function Re(e){0>Hr||(e.current=Pi[Hr],Pi[Hr]=null,Hr--)}function Me(e,t){Hr++,Pi[Hr]=e.current,e.current=t}var lr={},ht=ir(lr),Tt=ir(!1),jr=lr;function ss(e,t){var n=e.type.contextTypes;if(!n)return lr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Dt(e){return e=e.childContextTypes,e!=null}function Co(){Re(Tt),Re(ht)}function Qu(e,t,n){if(ht.current!==lr)throw Error(R(168));Me(ht,t),Me(Tt,n)}function vp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(R(108,rm(e)||"Unknown",s));return Oe({},n,r)}function Eo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||lr,jr=ht.current,Me(ht,e),Me(Tt,Tt.current),!0}function Gu(e,t,n){var r=e.stateNode;if(!r)throw Error(R(169));n?(e=vp(e,t,jr),r.__reactInternalMemoizedMergedChildContext=e,Re(Tt),Re(ht),Me(ht,e)):Re(Tt),Me(Tt,n)}var Cn=null,ea=!1,Ba=!1;function wp(e){Cn===null?Cn=[e]:Cn.push(e)}function wg(e){ea=!0,wp(e)}function cr(){if(!Ba&&Cn!==null){Ba=!0;var e=0,t=Ce;try{var n=Cn;for(Ce=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Cn=null,ea=!1}catch(s){throw Cn!==null&&(Cn=Cn.slice(e+1)),Vf(gc,cr),s}finally{Ce=t,Ba=!1}}return null}var Wr=[],Vr=0,_o=null,Mo=0,Wt=[],Vt=0,Sr=null,En=1,_n="";function hr(e,t){Wr[Vr++]=Mo,Wr[Vr++]=_o,_o=e,Mo=t}function bp(e,t,n){Wt[Vt++]=En,Wt[Vt++]=_n,Wt[Vt++]=Sr,Sr=e;var r=En;e=_n;var s=32-on(r)-1;r&=~(1<<s),n+=1;var o=32-on(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,En=1<<32-on(t)+s|n<<s|r,_n=o+e}else En=1<<o|n<<s|r,_n=e}function Cc(e){e.return!==null&&(hr(e,1),bp(e,1,0))}function Ec(e){for(;e===_o;)_o=Wr[--Vr],Wr[Vr]=null,Mo=Wr[--Vr],Wr[Vr]=null;for(;e===Sr;)Sr=Wt[--Vt],Wt[Vt]=null,_n=Wt[--Vt],Wt[Vt]=null,En=Wt[--Vt],Wt[Vt]=null}var It=null,Lt=null,ze=!1,ln=null;function kp(e,t){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function qu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,It=e,Lt=Zn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,It=e,Lt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Sr!==null?{id:En,overflow:_n}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,It=e,Lt=null,!0):!1;default:return!1}}function Li(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ii(e){if(ze){var t=Lt;if(t){var n=t;if(!qu(e,t)){if(Li(e))throw Error(R(418));t=Zn(n.nextSibling);var r=It;t&&qu(e,t)?kp(r,n):(e.flags=e.flags&-4097|2,ze=!1,It=e)}}else{if(Li(e))throw Error(R(418));e.flags=e.flags&-4097|2,ze=!1,It=e}}}function Ju(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;It=e}function Fl(e){if(e!==It)return!1;if(!ze)return Ju(e),ze=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Di(e.type,e.memoizedProps)),t&&(t=Lt)){if(Li(e))throw jp(),Error(R(418));for(;t;)kp(e,t),t=Zn(t.nextSibling)}if(Ju(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Lt=Zn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Lt=null}}else Lt=It?Zn(e.stateNode.nextSibling):null;return!0}function jp(){for(var e=Lt;e;)e=Zn(e.nextSibling)}function ls(){Lt=It=null,ze=!1}function _c(e){ln===null?ln=[e]:ln.push(e)}var bg=In.ReactCurrentBatchConfig;function Es(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var i=s.refs;a===null?delete i[o]:i[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,e))}return e}function Bl(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zu(e){var t=e._init;return t(e._payload)}function Sp(e){function t(g,m){if(e){var v=g.deletions;v===null?(g.deletions=[m],g.flags|=16):v.push(m)}}function n(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=rr(g,m),g.index=0,g.sibling=null,g}function o(g,m,v){return g.index=v,e?(v=g.alternate,v!==null?(v=v.index,v<m?(g.flags|=2,m):v):(g.flags|=2,m)):(g.flags|=1048576,m)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,m,v,S){return m===null||m.tag!==6?(m=Ka(v,g.mode,S),m.return=g,m):(m=s(m,v),m.return=g,m)}function c(g,m,v,S){var j=v.type;return j===$r?p(g,m,v.props.children,S,v.key):m!==null&&(m.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Un&&Zu(j)===m.type)?(S=s(m,v.props),S.ref=Es(g,m,v),S.return=g,S):(S=xo(v.type,v.key,v.props,null,g.mode,S),S.ref=Es(g,m,v),S.return=g,S)}function d(g,m,v,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Qa(v,g.mode,S),m.return=g,m):(m=s(m,v.children||[]),m.return=g,m)}function p(g,m,v,S,j){return m===null||m.tag!==7?(m=br(v,g.mode,S,j),m.return=g,m):(m=s(m,v),m.return=g,m)}function f(g,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ka(""+m,g.mode,v),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Tl:return v=xo(m.type,m.key,m.props,null,g.mode,v),v.ref=Es(g,null,m),v.return=g,v;case Or:return m=Qa(m,g.mode,v),m.return=g,m;case Un:var S=m._init;return f(g,S(m._payload),v)}if(zs(m)||ks(m))return m=br(m,g.mode,v,null),m.return=g,m;Bl(g,m)}return null}function h(g,m,v,S){var j=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return j!==null?null:i(g,m,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Tl:return v.key===j?c(g,m,v,S):null;case Or:return v.key===j?d(g,m,v,S):null;case Un:return j=v._init,h(g,m,j(v._payload),S)}if(zs(v)||ks(v))return j!==null?null:p(g,m,v,S,null);Bl(g,v)}return null}function x(g,m,v,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(v)||null,i(m,g,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Tl:return g=g.get(S.key===null?v:S.key)||null,c(m,g,S,j);case Or:return g=g.get(S.key===null?v:S.key)||null,d(m,g,S,j);case Un:var C=S._init;return x(g,m,v,C(S._payload),j)}if(zs(S)||ks(S))return g=g.get(v)||null,p(m,g,S,j,null);Bl(m,S)}return null}function w(g,m,v,S){for(var j=null,C=null,k=m,E=m=0,D=null;k!==null&&E<v.length;E++){k.index>E?(D=k,k=null):D=k.sibling;var z=h(g,k,v[E],S);if(z===null){k===null&&(k=D);break}e&&k&&z.alternate===null&&t(g,k),m=o(z,m,E),C===null?j=z:C.sibling=z,C=z,k=D}if(E===v.length)return n(g,k),ze&&hr(g,E),j;if(k===null){for(;E<v.length;E++)k=f(g,v[E],S),k!==null&&(m=o(k,m,E),C===null?j=k:C.sibling=k,C=k);return ze&&hr(g,E),j}for(k=r(g,k);E<v.length;E++)D=x(k,g,E,v[E],S),D!==null&&(e&&D.alternate!==null&&k.delete(D.key===null?E:D.key),m=o(D,m,E),C===null?j=D:C.sibling=D,C=D);return e&&k.forEach(function(O){return t(g,O)}),ze&&hr(g,E),j}function y(g,m,v,S){var j=ks(v);if(typeof j!="function")throw Error(R(150));if(v=j.call(v),v==null)throw Error(R(151));for(var C=j=null,k=m,E=m=0,D=null,z=v.next();k!==null&&!z.done;E++,z=v.next()){k.index>E?(D=k,k=null):D=k.sibling;var O=h(g,k,z.value,S);if(O===null){k===null&&(k=D);break}e&&k&&O.alternate===null&&t(g,k),m=o(O,m,E),C===null?j=O:C.sibling=O,C=O,k=D}if(z.done)return n(g,k),ze&&hr(g,E),j;if(k===null){for(;!z.done;E++,z=v.next())z=f(g,z.value,S),z!==null&&(m=o(z,m,E),C===null?j=z:C.sibling=z,C=z);return ze&&hr(g,E),j}for(k=r(g,k);!z.done;E++,z=v.next())z=x(k,g,E,z.value,S),z!==null&&(e&&z.alternate!==null&&k.delete(z.key===null?E:z.key),m=o(z,m,E),C===null?j=z:C.sibling=z,C=z);return e&&k.forEach(function(oe){return t(g,oe)}),ze&&hr(g,E),j}function b(g,m,v,S){if(typeof v=="object"&&v!==null&&v.type===$r&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Tl:e:{for(var j=v.key,C=m;C!==null;){if(C.key===j){if(j=v.type,j===$r){if(C.tag===7){n(g,C.sibling),m=s(C,v.props.children),m.return=g,g=m;break e}}else if(C.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Un&&Zu(j)===C.type){n(g,C.sibling),m=s(C,v.props),m.ref=Es(g,C,v),m.return=g,g=m;break e}n(g,C);break}else t(g,C);C=C.sibling}v.type===$r?(m=br(v.props.children,g.mode,S,v.key),m.return=g,g=m):(S=xo(v.type,v.key,v.props,null,g.mode,S),S.ref=Es(g,m,v),S.return=g,g=S)}return a(g);case Or:e:{for(C=v.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(g,m.sibling),m=s(m,v.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else t(g,m);m=m.sibling}m=Qa(v,g.mode,S),m.return=g,g=m}return a(g);case Un:return C=v._init,b(g,m,C(v._payload),S)}if(zs(v))return w(g,m,v,S);if(ks(v))return y(g,m,v,S);Bl(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,v),m.return=g,g=m):(n(g,m),m=Ka(v,g.mode,S),m.return=g,g=m),a(g)):n(g,m)}return b}var os=Sp(!0),Np=Sp(!1),To=ir(null),Do=null,Xr=null,Mc=null;function Tc(){Mc=Xr=Do=null}function Dc(e){var t=To.current;Re(To),e._currentValue=t}function Oi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function es(e,t){Do=e,Mc=Xr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mt=!0),e.firstContext=null)}function Kt(e){var t=e._currentValue;if(Mc!==e)if(e={context:e,memoizedValue:t,next:null},Xr===null){if(Do===null)throw Error(R(308));Xr=e,Do.dependencies={lanes:0,firstContext:e}}else Xr=Xr.next=e;return t}var yr=null;function Rc(e){yr===null?yr=[e]:yr.push(e)}function Cp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Rc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Rn(e,r)}function Rn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Hn=!1;function zc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ep(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function er(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,be&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Rn(e,n)}return s=r.interleaved,s===null?(t.next=t,Rc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Rn(e,n)}function io(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yc(e,n)}}function ed(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ro(e,t,n,r){var s=e.updateQueue;Hn=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,d=c.next;c.next=null,a===null?o=d:a.next=d,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,i=p.lastBaseUpdate,i!==a&&(i===null?p.firstBaseUpdate=d:i.next=d,p.lastBaseUpdate=c))}if(o!==null){var f=s.baseState;a=0,p=d=c=null,i=o;do{var h=i.lane,x=i.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var w=e,y=i;switch(h=t,x=n,y.tag){case 1:if(w=y.payload,typeof w=="function"){f=w.call(x,f,h);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,h=typeof w=="function"?w.call(x,f,h):w,h==null)break e;f=Oe({},f,h);break e;case 2:Hn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[i]:h.push(i))}else x={eventTime:x,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},p===null?(d=p=x,c=f):p=p.next=x,a|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;h=i,i=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Cr|=a,e.lanes=a,e.memoizedState=f}}function td(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(R(191,s));s.call(r)}}}var vl={},bn=ir(vl),ll=ir(vl),ol=ir(vl);function vr(e){if(e===vl)throw Error(R(174));return e}function Pc(e,t){switch(Me(ol,t),Me(ll,e),Me(bn,vl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:gi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=gi(t,e)}Re(bn),Me(bn,t)}function as(){Re(bn),Re(ll),Re(ol)}function _p(e){vr(ol.current);var t=vr(bn.current),n=gi(t,e.type);t!==n&&(Me(ll,e),Me(bn,n))}function Lc(e){ll.current===e&&(Re(bn),Re(ll))}var Le=ir(0);function zo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=[];function Ic(){for(var e=0;e<Ua.length;e++)Ua[e]._workInProgressVersionPrimary=null;Ua.length=0}var co=In.ReactCurrentDispatcher,Ha=In.ReactCurrentBatchConfig,Nr=0,Ie=null,Qe=null,tt=null,Po=!1,Bs=!1,al=0,kg=0;function ut(){throw Error(R(321))}function Oc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cn(e[n],t[n]))return!1;return!0}function $c(e,t,n,r,s,o){if(Nr=o,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,co.current=e===null||e.memoizedState===null?Cg:Eg,e=n(r,s),Bs){o=0;do{if(Bs=!1,al=0,25<=o)throw Error(R(301));o+=1,tt=Qe=null,t.updateQueue=null,co.current=_g,e=n(r,s)}while(Bs)}if(co.current=Lo,t=Qe!==null&&Qe.next!==null,Nr=0,tt=Qe=Ie=null,Po=!1,t)throw Error(R(300));return e}function Ac(){var e=al!==0;return al=0,e}function yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Ie.memoizedState=tt=e:tt=tt.next=e,tt}function Qt(){if(Qe===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=tt===null?Ie.memoizedState:tt.next;if(t!==null)tt=t,Qe=e;else{if(e===null)throw Error(R(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},tt===null?Ie.memoizedState=tt=e:tt=tt.next=e}return tt}function il(e,t){return typeof t=="function"?t(e):t}function Wa(e){var t=Qt(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=Qe,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var i=a=null,c=null,d=o;do{var p=d.lane;if((Nr&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var f={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=f,a=r):c=c.next=f,Ie.lanes|=p,Cr|=p}d=d.next}while(d!==null&&d!==o);c===null?a=r:c.next=i,cn(r,t.memoizedState)||(Mt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Ie.lanes|=o,Cr|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Va(e){var t=Qt(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);cn(o,t.memoizedState)||(Mt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Mp(){}function Tp(e,t){var n=Ie,r=Qt(),s=t(),o=!cn(r.memoizedState,s);if(o&&(r.memoizedState=s,Mt=!0),r=r.queue,Fc(zp.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,cl(9,Rp.bind(null,n,r,s,t),void 0,null),rt===null)throw Error(R(349));Nr&30||Dp(n,t,s)}return s}function Dp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Rp(e,t,n,r){t.value=n,t.getSnapshot=r,Pp(t)&&Lp(e)}function zp(e,t,n){return n(function(){Pp(t)&&Lp(e)})}function Pp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cn(e,n)}catch(r){return!0}}function Lp(e){var t=Rn(e,1);t!==null&&an(t,e,1,-1)}function nd(e){var t=yn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:e},t.queue=e,e=e.dispatch=Ng.bind(null,Ie,e),[t.memoizedState,e]}function cl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ip(){return Qt().memoizedState}function uo(e,t,n,r){var s=yn();Ie.flags|=e,s.memoizedState=cl(1|t,n,void 0,r===void 0?null:r)}function ta(e,t,n,r){var s=Qt();r=r===void 0?null:r;var o=void 0;if(Qe!==null){var a=Qe.memoizedState;if(o=a.destroy,r!==null&&Oc(r,a.deps)){s.memoizedState=cl(t,n,o,r);return}}Ie.flags|=e,s.memoizedState=cl(1|t,n,o,r)}function rd(e,t){return uo(8390656,8,e,t)}function Fc(e,t){return ta(2048,8,e,t)}function Op(e,t){return ta(4,2,e,t)}function $p(e,t){return ta(4,4,e,t)}function Ap(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Fp(e,t,n){return n=n!=null?n.concat([e]):null,ta(4,4,Ap.bind(null,t,e),n)}function Bc(){}function Bp(e,t){var n=Qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Oc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Up(e,t){var n=Qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Oc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hp(e,t,n){return Nr&21?(cn(n,t)||(n=Kf(),Ie.lanes|=n,Cr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mt=!0),e.memoizedState=n)}function jg(e,t){var n=Ce;Ce=n!==0&&4>n?n:4,e(!0);var r=Ha.transition;Ha.transition={};try{e(!1),t()}finally{Ce=n,Ha.transition=r}}function Wp(){return Qt().memoizedState}function Sg(e,t,n){var r=nr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Vp(e))Xp(t,n);else if(n=Cp(e,t,n,r),n!==null){var s=bt();an(n,e,r,s),Yp(n,t,r)}}function Ng(e,t,n){var r=nr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vp(e))Xp(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,i=o(a,n);if(s.hasEagerState=!0,s.eagerState=i,cn(i,a)){var c=t.interleaved;c===null?(s.next=s,Rc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch(d){}finally{}n=Cp(e,t,s,r),n!==null&&(s=bt(),an(n,e,r,s),Yp(n,t,r))}}function Vp(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function Xp(e,t){Bs=Po=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yc(e,n)}}var Lo={readContext:Kt,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},Cg={readContext:Kt,useCallback:function(e,t){return yn().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:rd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,uo(4194308,4,Ap.bind(null,t,e),n)},useLayoutEffect:function(e,t){return uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return uo(4,2,e,t)},useMemo:function(e,t){var n=yn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Sg.bind(null,Ie,e),[r.memoizedState,e]},useRef:function(e){var t=yn();return e={current:e},t.memoizedState=e},useState:nd,useDebugValue:Bc,useDeferredValue:function(e){return yn().memoizedState=e},useTransition:function(){var e=nd(!1),t=e[0];return e=jg.bind(null,e[1]),yn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ie,s=yn();if(ze){if(n===void 0)throw Error(R(407));n=n()}else{if(n=t(),rt===null)throw Error(R(349));Nr&30||Dp(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,rd(zp.bind(null,r,o,e),[e]),r.flags|=2048,cl(9,Rp.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=yn(),t=rt.identifierPrefix;if(ze){var n=_n,r=En;n=(r&~(1<<32-on(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=al++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=kg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Eg={readContext:Kt,useCallback:Bp,useContext:Kt,useEffect:Fc,useImperativeHandle:Fp,useInsertionEffect:Op,useLayoutEffect:$p,useMemo:Up,useReducer:Wa,useRef:Ip,useState:function(){return Wa(il)},useDebugValue:Bc,useDeferredValue:function(e){var t=Qt();return Hp(t,Qe.memoizedState,e)},useTransition:function(){var e=Wa(il)[0],t=Qt().memoizedState;return[e,t]},useMutableSource:Mp,useSyncExternalStore:Tp,useId:Wp,unstable_isNewReconciler:!1},_g={readContext:Kt,useCallback:Bp,useContext:Kt,useEffect:Fc,useImperativeHandle:Fp,useInsertionEffect:Op,useLayoutEffect:$p,useMemo:Up,useReducer:Va,useRef:Ip,useState:function(){return Va(il)},useDebugValue:Bc,useDeferredValue:function(e){var t=Qt();return Qe===null?t.memoizedState=e:Hp(t,Qe.memoizedState,e)},useTransition:function(){var e=Va(il)[0],t=Qt().memoizedState;return[e,t]},useMutableSource:Mp,useSyncExternalStore:Tp,useId:Wp,unstable_isNewReconciler:!1};function rn(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function $i(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Oe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var na={isMounted:function(e){return(e=e._reactInternals)?Mr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=bt(),s=nr(e),o=Mn(r,s);o.payload=t,n!=null&&(o.callback=n),t=er(e,o,s),t!==null&&(an(t,e,s,r),io(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=bt(),s=nr(e),o=Mn(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=er(e,o,s),t!==null&&(an(t,e,s,r),io(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=bt(),r=nr(e),s=Mn(n,r);s.tag=2,t!=null&&(s.callback=t),t=er(e,s,r),t!==null&&(an(t,e,r,n),io(t,e,r))}};function sd(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!tl(n,r)||!tl(s,o):!0}function Kp(e,t,n){var r=!1,s=lr,o=t.contextType;return typeof o=="object"&&o!==null?o=Kt(o):(s=Dt(t)?jr:ht.current,r=t.contextTypes,o=(r=r!=null)?ss(e,s):lr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=na,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function ld(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&na.enqueueReplaceState(t,t.state,null)}function Ai(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},zc(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Kt(o):(o=Dt(t)?jr:ht.current,s.context=ss(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&($i(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&na.enqueueReplaceState(s,s.state,null),Ro(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function is(e,t){try{var n="",r=t;do n+=nm(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Xa(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function Fi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Mg=typeof WeakMap=="function"?WeakMap:Map;function Qp(e,t,n){n=Mn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Oo||(Oo=!0,Gi=r),Fi(e,t)},n}function Gp(e,t,n){n=Mn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Fi(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Fi(e,t),typeof r!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function od(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Mg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Hg.bind(null,e,t,n),t.then(e,e))}function ad(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function id(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Mn(-1,1),t.tag=2,er(n,t,1))),n.lanes|=1),e)}var Tg=In.ReactCurrentOwner,Mt=!1;function wt(e,t,n,r){t.child=e===null?Np(t,null,n,r):os(t,e.child,n,r)}function cd(e,t,n,r,s){n=n.render;var o=t.ref;return es(t,s),r=$c(e,t,n,r,o,s),n=Ac(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,zn(e,t,s)):(ze&&n&&Cc(t),t.flags|=1,wt(e,t,r,s),t.child)}function ud(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Qc(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,qp(e,t,o,r,s)):(e=xo(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:tl,n(a,r)&&e.ref===t.ref)return zn(e,t,s)}return t.flags|=1,e=rr(o,r),e.ref=t.ref,e.return=t,t.child=e}function qp(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(tl(o,r)&&e.ref===t.ref)if(Mt=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(Mt=!0);else return t.lanes=e.lanes,zn(e,t,s)}return Bi(e,t,n,r,s)}function Jp(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Kr,Pt),Pt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Me(Kr,Pt),Pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Me(Kr,Pt),Pt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Me(Kr,Pt),Pt|=r;return wt(e,t,s,n),t.child}function Zp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Bi(e,t,n,r,s){var o=Dt(n)?jr:ht.current;return o=ss(t,o),es(t,s),n=$c(e,t,n,r,o,s),r=Ac(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,zn(e,t,s)):(ze&&r&&Cc(t),t.flags|=1,wt(e,t,n,s),t.child)}function dd(e,t,n,r,s){if(Dt(n)){var o=!0;Eo(t)}else o=!1;if(es(t,s),t.stateNode===null)fo(e,t),Kp(t,n,r),Ai(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Kt(d):(d=Dt(n)?jr:ht.current,d=ss(t,d));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==d)&&ld(t,a,r,d),Hn=!1;var h=t.memoizedState;a.state=h,Ro(t,r,a,s),c=t.memoizedState,i!==r||h!==c||Tt.current||Hn?(typeof p=="function"&&($i(t,n,p,r),c=t.memoizedState),(i=Hn||sd(t,n,i,r,h,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ep(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:rn(t.type,i),a.props=d,f=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Kt(c):(c=Dt(n)?jr:ht.current,c=ss(t,c));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||h!==c)&&ld(t,a,r,c),Hn=!1,h=t.memoizedState,a.state=h,Ro(t,r,a,s);var w=t.memoizedState;i!==f||h!==w||Tt.current||Hn?(typeof x=="function"&&($i(t,n,x,r),w=t.memoizedState),(d=Hn||sd(t,n,d,r,h,w,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ui(e,t,n,r,o,s)}function Ui(e,t,n,r,s,o){Zp(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Gu(t,n,!1),zn(e,t,o);r=t.stateNode,Tg.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=os(t,e.child,null,o),t.child=os(t,null,i,o)):wt(e,t,i,o),t.memoizedState=r.state,s&&Gu(t,n,!0),t.child}function eh(e){var t=e.stateNode;t.pendingContext?Qu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qu(e,t.context,!1),Pc(e,t.containerInfo)}function fd(e,t,n,r,s){return ls(),_c(s),t.flags|=256,wt(e,t,n,r),t.child}var Hi={dehydrated:null,treeContext:null,retryLane:0};function Wi(e){return{baseLanes:e,cachePool:null,transitions:null}}function th(e,t,n){var r=t.pendingProps,s=Le.current,o=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Me(Le,s&1),e===null)return Ii(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=la(a,r,0,null),e=br(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Wi(n),t.memoizedState=Hi,e):Uc(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return Dg(e,t,a,r,i,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=rr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?o=rr(i,o):(o=br(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?Wi(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Hi,r}return o=e.child,e=o.sibling,r=rr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Uc(e,t){return t=la({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ul(e,t,n,r){return r!==null&&_c(r),os(t,e.child,null,n),e=Uc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Dg(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=Xa(Error(R(422))),Ul(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=la({mode:"visible",children:r.children},s,0,null),o=br(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&os(t,e.child,null,a),t.child.memoizedState=Wi(a),t.memoizedState=Hi,o);if(!(t.mode&1))return Ul(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,o=Error(R(419)),r=Xa(o,r,void 0),Ul(e,t,a,r)}if(i=(a&e.childLanes)!==0,Mt||i){if(r=rt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Rn(e,s),an(r,e,s,-1))}return Kc(),r=Xa(Error(R(421))),Ul(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Wg.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,Lt=Zn(s.nextSibling),It=t,ze=!0,ln=null,e!==null&&(Wt[Vt++]=En,Wt[Vt++]=_n,Wt[Vt++]=Sr,En=e.id,_n=e.overflow,Sr=t),t=Uc(t,r.children),t.flags|=4096,t)}function pd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Oi(e.return,t,n)}function Ya(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function nh(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(wt(e,t,r.children,n),r=Le.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pd(e,n,t);else if(e.tag===19)pd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Me(Le,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&zo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ya(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&zo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ya(t,!0,n,null,o);break;case"together":Ya(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function fo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Cr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,n=rr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=rr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Rg(e,t,n){switch(t.tag){case 3:eh(t),ls();break;case 5:_p(t);break;case 1:Dt(t.type)&&Eo(t);break;case 4:Pc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Me(To,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Me(Le,Le.current&1),t.flags|=128,null):n&t.child.childLanes?th(e,t,n):(Me(Le,Le.current&1),e=zn(e,t,n),e!==null?e.sibling:null);Me(Le,Le.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return nh(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Me(Le,Le.current),r)break;return null;case 22:case 23:return t.lanes=0,Jp(e,t,n)}return zn(e,t,n)}var rh,Vi,sh,lh;rh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vi=function(){};sh=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,vr(bn.current);var o=null;switch(n){case"input":s=pi(e,s),r=pi(e,r),o=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),o=[];break;case"textarea":s=mi(e,s),r=mi(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=No)}yi(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var i=s[d];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ks.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(i=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ks.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Te("scroll",e),o||i===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};lh=function(e,t,n,r){n!==r&&(t.flags|=4)};function _s(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function zg(e,t,n){var r=t.pendingProps;switch(Ec(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return Dt(t.type)&&Co(),dt(t),null;case 3:return r=t.stateNode,as(),Re(Tt),Re(ht),Ic(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Fl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ln!==null&&(Zi(ln),ln=null))),Vi(e,t),dt(t),null;case 5:Lc(t);var s=vr(ol.current);if(n=t.type,e!==null&&t.stateNode!=null)sh(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(R(166));return dt(t),null}if(e=vr(bn.current),Fl(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[vn]=t,r[sl]=o,e=(t.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(s=0;s<Ls.length;s++)Te(Ls[s],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":ku(r,o),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Te("invalid",r);break;case"textarea":Su(r,o),Te("invalid",r)}yi(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var i=o[a];a==="children"?typeof i=="string"?r.textContent!==i&&(o.suppressHydrationWarning!==!0&&Al(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(o.suppressHydrationWarning!==!0&&Al(r.textContent,i,e),s=["children",""+i]):Ks.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Te("scroll",r)}switch(n){case"input":Dl(r),ju(r,o,!0);break;case"textarea":Dl(r),Nu(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=No)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=zf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[vn]=t,e[sl]=r,rh(e,t,!1,!1),t.stateNode=e;e:{switch(a=vi(n,r),n){case"dialog":Te("cancel",e),Te("close",e),s=r;break;case"iframe":case"object":case"embed":Te("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ls.length;s++)Te(Ls[s],e);s=r;break;case"source":Te("error",e),s=r;break;case"img":case"image":case"link":Te("error",e),Te("load",e),s=r;break;case"details":Te("toggle",e),s=r;break;case"input":ku(e,r),s=pi(e,r),Te("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),Te("invalid",e);break;case"textarea":Su(e,r),s=mi(e,r),Te("invalid",e);break;default:s=r}yi(n,s),i=s;for(o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="style"?If(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Pf(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Qs(e,c):typeof c=="number"&&Qs(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ks.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Te("scroll",e):c!=null&&fc(e,o,c,a))}switch(n){case"input":Dl(e),ju(e,r,!1);break;case"textarea":Dl(e),Nu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+sr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Gr(e,!!r.multiple,o,!1):r.defaultValue!=null&&Gr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=No)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)lh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(R(166));if(n=vr(ol.current),vr(bn.current),Fl(t)){if(r=t.stateNode,n=t.memoizedProps,r[vn]=t,(o=r.nodeValue!==n)&&(e=It,e!==null))switch(e.tag){case 3:Al(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Al(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vn]=t,t.stateNode=r}return dt(t),null;case 13:if(Re(Le),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ze&&Lt!==null&&t.mode&1&&!(t.flags&128))jp(),ls(),t.flags|=98560,o=!1;else if(o=Fl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(R(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(R(317));o[vn]=t}else ls(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),o=!1}else ln!==null&&(Zi(ln),ln=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?qe===0&&(qe=3):Kc())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return as(),Vi(e,t),e===null&&nl(t.stateNode.containerInfo),dt(t),null;case 10:return Dc(t.type._context),dt(t),null;case 17:return Dt(t.type)&&Co(),dt(t),null;case 19:if(Re(Le),o=t.memoizedState,o===null)return dt(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)_s(o,!1);else{if(qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=zo(e),a!==null){for(t.flags|=128,_s(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Me(Le,Le.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ue()>cs&&(t.flags|=128,r=!0,_s(o,!1),t.lanes=4194304)}else{if(!r)if(e=zo(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),_s(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ze)return dt(t),null}else 2*Ue()-o.renderingStartTime>cs&&n!==1073741824&&(t.flags|=128,r=!0,_s(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ue(),t.sibling=null,n=Le.current,Me(Le,r?n&1|2:n&1),t):(dt(t),null);case 22:case 23:return Yc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Pt&1073741824&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function Pg(e,t){switch(Ec(t),t.tag){case 1:return Dt(t.type)&&Co(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return as(),Re(Tt),Re(ht),Ic(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Lc(t),null;case 13:if(Re(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));ls()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Re(Le),null;case 4:return as(),null;case 10:return Dc(t.type._context),null;case 22:case 23:return Yc(),null;case 24:return null;default:return null}}var Hl=!1,pt=!1,Lg=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Yr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(e,t,r)}else n.current=null}function Xi(e,t,n){try{n()}catch(r){Ae(e,t,r)}}var hd=!1;function Ig(e,t){if(Mi=ko,e=up(),Nc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(S){n=null;break e}var a=0,i=-1,c=-1,d=0,p=0,f=e,h=null;t:for(;;){for(var x;f!==n||s!==0&&f.nodeType!==3||(i=a+s),f!==o||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)h=f,f=x;for(;;){if(f===e)break t;if(h===n&&++d===s&&(i=a),h===o&&++p===r&&(c=a),(x=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=x}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ti={focusedElem:e,selectionRange:n},ko=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,b=w.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:rn(t.type,y),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(S){Ae(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return w=hd,hd=!1,w}function Us(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Xi(t,n,o)}s=s.next}while(s!==r)}}function ra(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Yi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function oh(e){var t=e.alternate;t!==null&&(e.alternate=null,oh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vn],delete t[sl],delete t[zi],delete t[yg],delete t[vg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ah(e){return e.tag===5||e.tag===3||e.tag===4}function xd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ah(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ki(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=No));else if(r!==4&&(e=e.child,e!==null))for(Ki(e,t,n),e=e.sibling;e!==null;)Ki(e,t,n),e=e.sibling}function Qi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Qi(e,t,n),e=e.sibling;e!==null;)Qi(e,t,n),e=e.sibling}var lt=null,sn=!1;function Bn(e,t,n){for(n=n.child;n!==null;)ih(e,t,n),n=n.sibling}function ih(e,t,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Qo,n)}catch(i){}switch(n.tag){case 5:pt||Yr(n,t);case 6:var r=lt,s=sn;lt=null,Bn(e,t,n),lt=r,sn=s,lt!==null&&(sn?(e=lt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(sn?(e=lt,n=n.stateNode,e.nodeType===8?Fa(e.parentNode,n):e.nodeType===1&&Fa(e,n),Zs(e)):Fa(lt,n.stateNode));break;case 4:r=lt,s=sn,lt=n.stateNode.containerInfo,sn=!0,Bn(e,t,n),lt=r,sn=s;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Xi(n,t,a),s=s.next}while(s!==r)}Bn(e,t,n);break;case 1:if(!pt&&(Yr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Ae(n,t,i)}Bn(e,t,n);break;case 21:Bn(e,t,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,Bn(e,t,n),pt=r):Bn(e,t,n);break;default:Bn(e,t,n)}}function md(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Lg),t.forEach(function(r){var s=Vg.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function nn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:lt=i.stateNode,sn=!1;break e;case 3:lt=i.stateNode.containerInfo,sn=!0;break e;case 4:lt=i.stateNode.containerInfo,sn=!0;break e}i=i.return}if(lt===null)throw Error(R(160));ih(o,a,s),lt=null,sn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ae(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ch(t,e),t=t.sibling}function ch(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nn(t,e),gn(e),r&4){try{Us(3,e,e.return),ra(3,e)}catch(y){Ae(e,e.return,y)}try{Us(5,e,e.return)}catch(y){Ae(e,e.return,y)}}break;case 1:nn(t,e),gn(e),r&512&&n!==null&&Yr(n,n.return);break;case 5:if(nn(t,e),gn(e),r&512&&n!==null&&Yr(n,n.return),e.flags&32){var s=e.stateNode;try{Qs(s,"")}catch(y){Ae(e,e.return,y)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&o.type==="radio"&&o.name!=null&&Df(s,o),vi(i,a);var d=vi(i,o);for(a=0;a<c.length;a+=2){var p=c[a],f=c[a+1];p==="style"?If(s,f):p==="dangerouslySetInnerHTML"?Pf(s,f):p==="children"?Qs(s,f):fc(s,p,f,d)}switch(i){case"input":hi(s,o);break;case"textarea":Rf(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?Gr(s,!!o.multiple,x,!1):h!==!!o.multiple&&(o.defaultValue!=null?Gr(s,!!o.multiple,o.defaultValue,!0):Gr(s,!!o.multiple,o.multiple?[]:"",!1))}s[sl]=o}catch(y){Ae(e,e.return,y)}}break;case 6:if(nn(t,e),gn(e),r&4){if(e.stateNode===null)throw Error(R(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(y){Ae(e,e.return,y)}}break;case 3:if(nn(t,e),gn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zs(t.containerInfo)}catch(y){Ae(e,e.return,y)}break;case 4:nn(t,e),gn(e);break;case 13:nn(t,e),gn(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Vc=Ue())),r&4&&md(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(pt=(d=pt)||p,nn(t,e),pt=d):nn(t,e),gn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(Q=e,p=e.child;p!==null;){for(f=Q=p;Q!==null;){switch(h=Q,x=h.child,h.tag){case 0:case 11:case 14:case 15:Us(4,h,h.return);break;case 1:Yr(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(y){Ae(r,n,y)}}break;case 5:Yr(h,h.return);break;case 22:if(h.memoizedState!==null){yd(f);continue}}x!==null?(x.return=h,Q=x):yd(f)}p=p.sibling}e:for(p=null,f=e;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(i=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=Lf("display",a))}catch(y){Ae(e,e.return,y)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){Ae(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:nn(t,e),gn(e),r&4&&md(e);break;case 21:break;default:nn(t,e),gn(e)}}function gn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ah(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Qs(s,""),r.flags&=-33);var o=xd(e);Qi(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=xd(e);Ki(e,i,a);break;default:throw Error(R(161))}}catch(c){Ae(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Og(e,t,n){Q=e,uh(e)}function uh(e,t,n){for(var r=(e.mode&1)!==0;Q!==null;){var s=Q,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Hl;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||pt;i=Hl;var d=pt;if(Hl=a,(pt=c)&&!d)for(Q=s;Q!==null;)a=Q,c=a.child,a.tag===22&&a.memoizedState!==null?vd(s):c!==null?(c.return=a,Q=c):vd(s);for(;o!==null;)Q=o,uh(o),o=o.sibling;Q=s,Hl=i,pt=d}gd(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Q=o):gd(e)}}function gd(e){for(;Q!==null;){var t=Q;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:pt||ra(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!pt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:rn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&td(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}td(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&Zs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}pt||t.flags&512&&Yi(t)}catch(h){Ae(t,t.return,h)}}if(t===e){Q=null;break}if(n=t.sibling,n!==null){n.return=t.return,Q=n;break}Q=t.return}}function yd(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Q=n;break}Q=t.return}}function vd(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ra(4,t)}catch(c){Ae(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ae(t,s,c)}}var o=t.return;try{Yi(t)}catch(c){Ae(t,o,c)}break;case 5:var a=t.return;try{Yi(t)}catch(c){Ae(t,a,c)}}}catch(c){Ae(t,t.return,c)}if(t===e){Q=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Q=i;break}Q=t.return}}var $g=Math.ceil,Io=In.ReactCurrentDispatcher,Hc=In.ReactCurrentOwner,Yt=In.ReactCurrentBatchConfig,be=0,rt=null,Xe=null,ot=0,Pt=0,Kr=ir(0),qe=0,ul=null,Cr=0,sa=0,Wc=0,Hs=null,_t=null,Vc=0,cs=1/0,Nn=null,Oo=!1,Gi=null,tr=null,Wl=!1,Kn=null,$o=0,Ws=0,qi=null,po=-1,ho=0;function bt(){return be&6?Ue():po!==-1?po:po=Ue()}function nr(e){return e.mode&1?be&2&&ot!==0?ot&-ot:bg.transition!==null?(ho===0&&(ho=Kf()),ho):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:tp(e.type)),e):1}function an(e,t,n,r){if(50<Ws)throw Ws=0,qi=null,Error(R(185));ml(e,n,r),(!(be&2)||e!==rt)&&(e===rt&&(!(be&2)&&(sa|=n),qe===4&&Xn(e,ot)),Rt(e,r),n===1&&be===0&&!(t.mode&1)&&(cs=Ue()+500,ea&&cr()))}function Rt(e,t){var n=e.callbackNode;bm(e,t);var r=bo(e,e===rt?ot:0);if(r===0)n!==null&&_u(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&_u(n),t===1)e.tag===0?wg(wd.bind(null,e)):wp(wd.bind(null,e)),mg(function(){!(be&6)&&cr()}),n=null;else{switch(Qf(r)){case 1:n=gc;break;case 4:n=Xf;break;case 16:n=wo;break;case 536870912:n=Yf;break;default:n=wo}n=yh(n,dh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function dh(e,t){if(po=-1,ho=0,be&6)throw Error(R(327));var n=e.callbackNode;if(ts()&&e.callbackNode!==n)return null;var r=bo(e,e===rt?ot:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ao(e,r);else{t=r;var s=be;be|=2;var o=ph();(rt!==e||ot!==t)&&(Nn=null,cs=Ue()+500,wr(e,t));do try{Bg();break}catch(i){fh(e,i)}while(!0);Tc(),Io.current=o,be=s,Xe!==null?t=0:(rt=null,ot=0,t=qe)}if(t!==0){if(t===2&&(s=Si(e),s!==0&&(r=s,t=Ji(e,s))),t===1)throw n=ul,wr(e,0),Xn(e,r),Rt(e,Ue()),n;if(t===6)Xn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Ag(s)&&(t=Ao(e,r),t===2&&(o=Si(e),o!==0&&(r=o,t=Ji(e,o))),t===1))throw n=ul,wr(e,0),Xn(e,r),Rt(e,Ue()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(R(345));case 2:xr(e,_t,Nn);break;case 3:if(Xn(e,r),(r&130023424)===r&&(t=Vc+500-Ue(),10<t)){if(bo(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){bt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ri(xr.bind(null,e,_t,Nn),t);break}xr(e,_t,Nn);break;case 4:if(Xn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-on(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$g(r/1960))-r,10<r){e.timeoutHandle=Ri(xr.bind(null,e,_t,Nn),r);break}xr(e,_t,Nn);break;case 5:xr(e,_t,Nn);break;default:throw Error(R(329))}}}return Rt(e,Ue()),e.callbackNode===n?dh.bind(null,e):null}function Ji(e,t){var n=Hs;return e.current.memoizedState.isDehydrated&&(wr(e,t).flags|=256),e=Ao(e,t),e!==2&&(t=_t,_t=n,t!==null&&Zi(t)),e}function Zi(e){_t===null?_t=e:_t.push.apply(_t,e)}function Ag(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!cn(o(),s))return!1}catch(a){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xn(e,t){for(t&=~Wc,t&=~sa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-on(t),r=1<<n;e[n]=-1,t&=~r}}function wd(e){if(be&6)throw Error(R(327));ts();var t=bo(e,0);if(!(t&1))return Rt(e,Ue()),null;var n=Ao(e,t);if(e.tag!==0&&n===2){var r=Si(e);r!==0&&(t=r,n=Ji(e,r))}if(n===1)throw n=ul,wr(e,0),Xn(e,t),Rt(e,Ue()),n;if(n===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xr(e,_t,Nn),Rt(e,Ue()),null}function Xc(e,t){var n=be;be|=1;try{return e(t)}finally{be=n,be===0&&(cs=Ue()+500,ea&&cr())}}function Er(e){Kn!==null&&Kn.tag===0&&!(be&6)&&ts();var t=be;be|=1;var n=Yt.transition,r=Ce;try{if(Yt.transition=null,Ce=1,e)return e()}finally{Ce=r,Yt.transition=n,be=t,!(be&6)&&cr()}}function Yc(){Pt=Kr.current,Re(Kr)}function wr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,xg(n)),Xe!==null)for(n=Xe.return;n!==null;){var r=n;switch(Ec(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Co();break;case 3:as(),Re(Tt),Re(ht),Ic();break;case 5:Lc(r);break;case 4:as();break;case 13:Re(Le);break;case 19:Re(Le);break;case 10:Dc(r.type._context);break;case 22:case 23:Yc()}n=n.return}if(rt=e,Xe=e=rr(e.current,null),ot=Pt=t,qe=0,ul=null,Wc=sa=Cr=0,_t=Hs=null,yr!==null){for(t=0;t<yr.length;t++)if(n=yr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}yr=null}return e}function fh(e,t){do{var n=Xe;try{if(Tc(),co.current=Lo,Po){for(var r=Ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Po=!1}if(Nr=0,tt=Qe=Ie=null,Bs=!1,al=0,Hc.current=null,n===null||n.return===null){qe=1,ul=t,Xe=null;break}e:{var o=e,a=n.return,i=n,c=t;if(t=ot,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=i,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=ad(a);if(x!==null){x.flags&=-257,id(x,a,i,o,t),x.mode&1&&od(o,d,t),t=x,c=d;var w=t.updateQueue;if(w===null){var y=new Set;y.add(c),t.updateQueue=y}else w.add(c);break e}else{if(!(t&1)){od(o,d,t),Kc();break e}c=Error(R(426))}}else if(ze&&i.mode&1){var b=ad(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),id(b,a,i,o,t),_c(is(c,i));break e}}o=c=is(c,i),qe!==4&&(qe=2),Hs===null?Hs=[o]:Hs.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=Qp(o,c,t);ed(o,g);break e;case 1:i=c;var m=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(tr===null||!tr.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=Gp(o,i,t);ed(o,S);break e}}o=o.return}while(o!==null)}xh(n)}catch(j){t=j,Xe===n&&n!==null&&(Xe=n=n.return);continue}break}while(!0)}function ph(){var e=Io.current;return Io.current=Lo,e===null?Lo:e}function Kc(){(qe===0||qe===3||qe===2)&&(qe=4),rt===null||!(Cr&268435455)&&!(sa&268435455)||Xn(rt,ot)}function Ao(e,t){var n=be;be|=2;var r=ph();(rt!==e||ot!==t)&&(Nn=null,wr(e,t));do try{Fg();break}catch(s){fh(e,s)}while(!0);if(Tc(),be=n,Io.current=r,Xe!==null)throw Error(R(261));return rt=null,ot=0,qe}function Fg(){for(;Xe!==null;)hh(Xe)}function Bg(){for(;Xe!==null&&!fm();)hh(Xe)}function hh(e){var t=gh(e.alternate,e,Pt);e.memoizedProps=e.pendingProps,t===null?xh(e):Xe=t,Hc.current=null}function xh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Pg(n,t),n!==null){n.flags&=32767,Xe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Xe=null;return}}else if(n=zg(n,t,Pt),n!==null){Xe=n;return}if(t=t.sibling,t!==null){Xe=t;return}Xe=t=e}while(t!==null);qe===0&&(qe=5)}function xr(e,t,n){var r=Ce,s=Yt.transition;try{Yt.transition=null,Ce=1,Ug(e,t,n,r)}finally{Yt.transition=s,Ce=r}return null}function Ug(e,t,n,r){do ts();while(Kn!==null);if(be&6)throw Error(R(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(km(e,o),e===rt&&(Xe=rt=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wl||(Wl=!0,yh(wo,function(){return ts(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Yt.transition,Yt.transition=null;var a=Ce;Ce=1;var i=be;be|=4,Hc.current=null,Ig(e,n),ch(n,e),ig(Ti),ko=!!Mi,Ti=Mi=null,e.current=n,Og(n),pm(),be=i,Ce=a,Yt.transition=o}else e.current=n;if(Wl&&(Wl=!1,Kn=e,$o=s),o=e.pendingLanes,o===0&&(tr=null),mm(n.stateNode),Rt(e,Ue()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Oo)throw Oo=!1,e=Gi,Gi=null,e;return $o&1&&e.tag!==0&&ts(),o=e.pendingLanes,o&1?e===qi?Ws++:(Ws=0,qi=e):Ws=0,cr(),null}function ts(){if(Kn!==null){var e=Qf($o),t=Yt.transition,n=Ce;try{if(Yt.transition=null,Ce=16>e?16:e,Kn===null)var r=!1;else{if(e=Kn,Kn=null,$o=0,be&6)throw Error(R(331));var s=be;for(be|=4,Q=e.current;Q!==null;){var o=Q,a=o.child;if(Q.flags&16){var i=o.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(Q=d;Q!==null;){var p=Q;switch(p.tag){case 0:case 11:case 15:Us(8,p,o)}var f=p.child;if(f!==null)f.return=p,Q=f;else for(;Q!==null;){p=Q;var h=p.sibling,x=p.return;if(oh(p),p===d){Q=null;break}if(h!==null){h.return=x,Q=h;break}Q=x}}}var w=o.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}Q=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Q=a;else e:for(;Q!==null;){if(o=Q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Us(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,Q=g;break e}Q=o.return}}var m=e.current;for(Q=m;Q!==null;){a=Q;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,Q=v;else e:for(a=m;Q!==null;){if(i=Q,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:ra(9,i)}}catch(j){Ae(i,i.return,j)}if(i===a){Q=null;break e}var S=i.sibling;if(S!==null){S.return=i.return,Q=S;break e}Q=i.return}}if(be=s,cr(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Qo,e)}catch(j){}r=!0}return r}finally{Ce=n,Yt.transition=t}}return!1}function bd(e,t,n){t=is(n,t),t=Qp(e,t,1),e=er(e,t,1),t=bt(),e!==null&&(ml(e,1,t),Rt(e,t))}function Ae(e,t,n){if(e.tag===3)bd(e,e,n);else for(;t!==null;){if(t.tag===3){bd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tr===null||!tr.has(r))){e=is(n,e),e=Gp(t,e,1),t=er(t,e,1),e=bt(),t!==null&&(ml(t,1,e),Rt(t,e));break}}t=t.return}}function Hg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=bt(),e.pingedLanes|=e.suspendedLanes&n,rt===e&&(ot&n)===n&&(qe===4||qe===3&&(ot&130023424)===ot&&500>Ue()-Vc?wr(e,0):Wc|=n),Rt(e,t)}function mh(e,t){t===0&&(e.mode&1?(t=Pl,Pl<<=1,!(Pl&130023424)&&(Pl=4194304)):t=1);var n=bt();e=Rn(e,t),e!==null&&(ml(e,t,n),Rt(e,n))}function Wg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),mh(e,n)}function Vg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(t),mh(e,n)}var gh;gh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tt.current)Mt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Mt=!1,Rg(e,t,n);Mt=!!(e.flags&131072)}else Mt=!1,ze&&t.flags&1048576&&bp(t,Mo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;fo(e,t),e=t.pendingProps;var s=ss(t,ht.current);es(t,n),s=$c(null,t,r,e,s,n);var o=Ac();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dt(r)?(o=!0,Eo(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zc(t),s.updater=na,t.stateNode=s,s._reactInternals=t,Ai(t,r,e,n),t=Ui(null,t,r,!0,o,n)):(t.tag=0,ze&&o&&Cc(t),wt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(fo(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Yg(r),e=rn(r,e),s){case 0:t=Bi(null,t,r,e,n);break e;case 1:t=dd(null,t,r,e,n);break e;case 11:t=cd(null,t,r,e,n);break e;case 14:t=ud(null,t,r,rn(r.type,e),n);break e}throw Error(R(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:rn(r,s),Bi(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:rn(r,s),dd(e,t,r,s,n);case 3:e:{if(eh(t),e===null)throw Error(R(387));r=t.pendingProps,o=t.memoizedState,s=o.element,Ep(e,t),Ro(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=is(Error(R(423)),t),t=fd(e,t,r,n,s);break e}else if(r!==s){s=is(Error(R(424)),t),t=fd(e,t,r,n,s);break e}else for(Lt=Zn(t.stateNode.containerInfo.firstChild),It=t,ze=!0,ln=null,n=Np(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ls(),r===s){t=zn(e,t,n);break e}wt(e,t,r,n)}t=t.child}return t;case 5:return _p(t),e===null&&Ii(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,Di(r,s)?a=null:o!==null&&Di(r,o)&&(t.flags|=32),Zp(e,t),wt(e,t,a,n),t.child;case 6:return e===null&&Ii(t),null;case 13:return th(e,t,n);case 4:return Pc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=os(t,null,r,n):wt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:rn(r,s),cd(e,t,r,s,n);case 7:return wt(e,t,t.pendingProps,n),t.child;case 8:return wt(e,t,t.pendingProps.children,n),t.child;case 12:return wt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,Me(To,r._currentValue),r._currentValue=a,o!==null)if(cn(o.value,a)){if(o.children===s.children&&!Tt.current){t=zn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){a=o.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Mn(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Oi(o.return,n,t),i.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(R(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),Oi(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}wt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,es(t,n),s=Kt(s),r=r(s),t.flags|=1,wt(e,t,r,n),t.child;case 14:return r=t.type,s=rn(r,t.pendingProps),s=rn(r.type,s),ud(e,t,r,s,n);case 15:return qp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:rn(r,s),fo(e,t),t.tag=1,Dt(r)?(e=!0,Eo(t)):e=!1,es(t,n),Kp(t,r,s),Ai(t,r,s,n),Ui(null,t,r,!0,e,n);case 19:return nh(e,t,n);case 22:return Jp(e,t,n)}throw Error(R(156,t.tag))};function yh(e,t){return Vf(e,t)}function Xg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(e,t,n,r){return new Xg(e,t,n,r)}function Qc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Yg(e){if(typeof e=="function")return Qc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hc)return 11;if(e===xc)return 14}return 2}function rr(e,t){var n=e.alternate;return n===null?(n=Xt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function xo(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")Qc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case $r:return br(n.children,s,o,t);case pc:a=8,s|=8;break;case ci:return e=Xt(12,n,t,s|2),e.elementType=ci,e.lanes=o,e;case ui:return e=Xt(13,n,t,s),e.elementType=ui,e.lanes=o,e;case di:return e=Xt(19,n,t,s),e.elementType=di,e.lanes=o,e;case _f:return la(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Cf:a=10;break e;case Ef:a=9;break e;case hc:a=11;break e;case xc:a=14;break e;case Un:a=16,r=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=Xt(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function br(e,t,n,r){return e=Xt(7,e,r,t),e.lanes=n,e}function la(e,t,n,r){return e=Xt(22,e,r,t),e.elementType=_f,e.lanes=n,e.stateNode={isHidden:!1},e}function Ka(e,t,n){return e=Xt(6,e,null,t),e.lanes=n,e}function Qa(e,t,n){return t=Xt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Kg(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ma(0),this.expirationTimes=Ma(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ma(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gc(e,t,n,r,s,o,a,i,c){return e=new Kg(e,t,n,i,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Xt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zc(o),e}function Qg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Or,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function vh(e){if(!e)return lr;e=e._reactInternals;e:{if(Mr(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var n=e.type;if(Dt(n))return vp(e,n,t)}return t}function wh(e,t,n,r,s,o,a,i,c){return e=Gc(n,r,!0,e,s,o,a,i,c),e.context=vh(null),n=e.current,r=bt(),s=nr(n),o=Mn(r,s),o.callback=t!=null?t:null,er(n,o,s),e.current.lanes=s,ml(e,s,r),Rt(e,r),e}function oa(e,t,n,r){var s=t.current,o=bt(),a=nr(s);return n=vh(n),t.context===null?t.context=n:t.pendingContext=n,t=Mn(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=er(s,t,a),e!==null&&(an(e,s,a,o),io(e,s,a)),a}function Fo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function kd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function qc(e,t){kd(e,t),(e=e.alternate)&&kd(e,t)}function Gg(){return null}var bh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}aa.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));oa(e,t,null,null)};aa.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Er(function(){oa(null,e,null,null)}),t[Dn]=null}};function aa(e){this._internalRoot=e}aa.prototype.unstable_scheduleHydration=function(e){if(e){var t=Jf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Vn.length&&t!==0&&t<Vn[n].priority;n++);Vn.splice(n,0,e),n===0&&ep(e)}};function Zc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ia(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jd(){}function qg(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var d=Fo(a);o.call(d)}}var a=wh(t,r,e,0,null,!1,!1,"",jd);return e._reactRootContainer=a,e[Dn]=a.current,nl(e.nodeType===8?e.parentNode:e),Er(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var d=Fo(c);i.call(d)}}var c=Gc(e,0,!1,null,null,!1,!1,"",jd);return e._reactRootContainer=c,e[Dn]=c.current,nl(e.nodeType===8?e.parentNode:e),Er(function(){oa(t,c,n,r)}),c}function ca(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var i=s;s=function(){var c=Fo(a);i.call(c)}}oa(t,a,e,s)}else a=qg(n,t,e,s,r);return Fo(a)}Gf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ps(t.pendingLanes);n!==0&&(yc(t,n|1),Rt(t,Ue()),!(be&6)&&(cs=Ue()+500,cr()))}break;case 13:Er(function(){var r=Rn(e,1);if(r!==null){var s=bt();an(r,e,1,s)}}),qc(e,1)}};vc=function(e){if(e.tag===13){var t=Rn(e,134217728);if(t!==null){var n=bt();an(t,e,134217728,n)}qc(e,134217728)}};qf=function(e){if(e.tag===13){var t=nr(e),n=Rn(e,t);if(n!==null){var r=bt();an(n,e,t,r)}qc(e,t)}};Jf=function(){return Ce};Zf=function(e,t){var n=Ce;try{return Ce=e,t()}finally{Ce=n}};bi=function(e,t,n){switch(t){case"input":if(hi(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Zo(r);if(!s)throw Error(R(90));Tf(r),hi(r,s)}}}break;case"textarea":Rf(e,n);break;case"select":t=n.value,t!=null&&Gr(e,!!n.multiple,t,!1)}};Af=Xc;Ff=Er;var Jg={usingClientEntryPoint:!1,Events:[yl,Ur,Zo,Of,$f,Xc]},Ms={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zg={bundleType:Ms.bundleType,version:Ms.version,rendererPackageName:Ms.rendererPackageName,rendererConfig:Ms.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:In.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Hf(e),e===null?null:e.stateNode},findFiberByHostInstance:Ms.findFiberByHostInstance||Gg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vl.isDisabled&&Vl.supportsFiber)try{Qo=Vl.inject(Zg),wn=Vl}catch(e){}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jg;$t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zc(t))throw Error(R(200));return Qg(e,t,null,n)};$t.createRoot=function(e,t){if(!Zc(e))throw Error(R(299));var n=!1,r="",s=bh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Gc(e,1,!1,null,null,n,!1,r,s),e[Dn]=t.current,nl(e.nodeType===8?e.parentNode:e),new Jc(t)};$t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=Hf(t),e=e===null?null:e.stateNode,e};$t.flushSync=function(e){return Er(e)};$t.hydrate=function(e,t,n){if(!ia(t))throw Error(R(200));return ca(null,e,t,!0,n)};$t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=bh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=wh(t,null,e,1,n!=null?n:null,s,!1,o,a),e[Dn]=t.current,nl(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new aa(t)};$t.render=function(e,t,n){if(!ia(t))throw Error(R(200));return ca(null,e,t,!1,n)};$t.unmountComponentAtNode=function(e){if(!ia(e))throw Error(R(40));return e._reactRootContainer?(Er(function(){ca(null,null,e,!1,function(){e._reactRootContainer=null,e[Dn]=null})}),!0):!1};$t.unstable_batchedUpdates=Xc;$t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ia(n))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return ca(e,t,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function kh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kh)}catch(e){console.error(e)}}kh(),kf.exports=$t;var Qr=kf.exports,Sd=Qr;ai.createRoot=Sd.createRoot,ai.hydrateRoot=Sd.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dl(){return dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dl.apply(this,arguments)}var Qn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qn||(Qn={}));const Nd="popstate";function ey(e){e===void 0&&(e={});function t(s,o){let{pathname:a="/",search:i="",hash:c=""}=Tr(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),ec("",{pathname:a,search:i,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let a=s.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");i=d===-1?c:c.slice(0,d)}return i+"#"+(typeof o=="string"?o:jh(o))}function r(s,o){ua(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return ny(t,n,r,e)}function Je(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function ua(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function ty(){return Math.random().toString(36).substr(2,8)}function Cd(e,t){return{usr:e.state,key:e.key,idx:t}}function ec(e,t,n,r){return n===void 0&&(n=null),dl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Tr(t):t,{state:n,key:t&&t.key||r||ty()})}function jh(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Tr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ny(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,i=Qn.Pop,c=null,d=p();d==null&&(d=0,a.replaceState(dl({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function f(){i=Qn.Pop;let b=p(),g=b==null?null:b-d;d=b,c&&c({action:i,location:y.location,delta:g})}function h(b,g){i=Qn.Push;let m=ec(y.location,b,g);n&&n(m,b),d=p()+1;let v=Cd(m,d),S=y.createHref(m);try{a.pushState(v,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}o&&c&&c({action:i,location:y.location,delta:1})}function x(b,g){i=Qn.Replace;let m=ec(y.location,b,g);n&&n(m,b),d=p();let v=Cd(m,d),S=y.createHref(m);a.replaceState(v,"",S),o&&c&&c({action:i,location:y.location,delta:0})}function w(b){let g=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof b=="string"?b:jh(b);return m=m.replace(/ $/,"%20"),Je(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let y={get action(){return i},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Nd,f),c=b,()=>{s.removeEventListener(Nd,f),c=null}},createHref(b){return t(s,b)},createURL:w,encodeLocation(b){let g=w(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:x,go(b){return a.go(b)}};return y}var Ed;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ed||(Ed={}));function ry(e,t,n){return n===void 0&&(n="/"),sy(e,t,n)}function sy(e,t,n,r){let s=typeof t=="string"?Tr(t):t,o=Ch(s.pathname||"/",n);if(o==null)return null;let a=Sh(e);ly(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let d=gy(o);i=hy(a[c],d)}return i}function Sh(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,i)=>{let c={relativePath:i===void 0?o.path||"":i,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(Je(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=kr([r,c.relativePath]),p=n.concat(c);o.children&&o.children.length>0&&(Je(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Sh(o.children,t,p,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:fy(d,o.index),routesMeta:p})};return e.forEach((o,a)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))s(o,a);else for(let c of Nh(o.path))s(o,a,c)}),t}function Nh(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=Nh(r.join("/")),i=[];return i.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function ly(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:py(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const oy=/^:[\w-]+$/,ay=3,iy=2,cy=1,uy=10,dy=-2,_d=e=>e==="*";function fy(e,t){let n=e.split("/"),r=n.length;return n.some(_d)&&(r+=dy),t&&(r+=iy),n.filter(s=>!_d(s)).reduce((s,o)=>s+(oy.test(o)?ay:o===""?cy:uy),r)}function py(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function hy(e,t,n){let{routesMeta:r}=e,s={},o="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],d=i===r.length-1,p=o==="/"?t:t.slice(o.length)||"/",f=xy({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),h=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:kr([o,f.pathname]),pathnameBase:Sy(kr([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=kr([o,f.pathnameBase]))}return a}function xy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=my(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((d,p,f)=>{let{paramName:h,isOptional:x}=p;if(h==="*"){let y=i[f]||"";a=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const w=i[f];return x&&!w?d[h]=void 0:d[h]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:e}}function my(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ua(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function gy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ua(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ch(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const yy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vy=e=>yy.test(e);function wy(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Tr(e):e,o;if(n)if(vy(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),ua(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=Md(n.substring(1),"/"):o=Md(n,t)}else o=t;return{pathname:o,search:Ny(r),hash:Cy(s)}}function Md(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ga(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function by(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ky(e,t){let n=by(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function jy(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Tr(e):(s=dl({},e),Je(!s.pathname||!s.pathname.includes("?"),Ga("?","pathname","search",s)),Je(!s.pathname||!s.pathname.includes("#"),Ga("#","pathname","hash",s)),Je(!s.search||!s.search.includes("#"),Ga("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,i;if(a==null)i=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}i=f>=0?t[f]:"/"}let c=wy(s,i),d=a&&a!=="/"&&a.endsWith("/"),p=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const kr=e=>e.join("/").replace(/\/\/+/g,"/"),Sy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ny=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Cy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ey(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Eh=["post","put","patch","delete"];new Set(Eh);const _y=["get",...Eh];new Set(_y);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fl(){return fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fl.apply(this,arguments)}const eu=u.createContext(null),My=u.createContext(null),da=u.createContext(null),fa=u.createContext(null),Dr=u.createContext({outlet:null,matches:[],isDataRoute:!1}),_h=u.createContext(null);function pa(){return u.useContext(fa)!=null}function tu(){return pa()||Je(!1),u.useContext(fa).location}function Mh(e){u.useContext(da).static||u.useLayoutEffect(e)}function Ft(){let{isDataRoute:e}=u.useContext(Dr);return e?Uy():Ty()}function Ty(){pa()||Je(!1);let e=u.useContext(eu),{basename:t,future:n,navigator:r}=u.useContext(da),{matches:s}=u.useContext(Dr),{pathname:o}=tu(),a=JSON.stringify(ky(s,n.v7_relativeSplatPath)),i=u.useRef(!1);return Mh(()=>{i.current=!0}),u.useCallback(function(d,p){if(p===void 0&&(p={}),!i.current)return;if(typeof d=="number"){r.go(d);return}let f=jy(d,JSON.parse(a),o,p.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:kr([t,f.pathname])),(p.replace?r.replace:r.push)(f,p.state,p)},[t,r,a,o,e])}function Th(){let{matches:e}=u.useContext(Dr),t=e[e.length-1];return t?t.params:{}}function Dy(e,t){return Ry(e,t)}function Ry(e,t,n,r){pa()||Je(!1);let{navigator:s}=u.useContext(da),{matches:o}=u.useContext(Dr),a=o[o.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=tu(),p;if(t){var f;let b=typeof t=="string"?Tr(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Je(!1),p=b}else p=d;let h=p.pathname||"/",x=h;if(c!=="/"){let b=c.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=ry(e,{pathname:x}),y=Oy(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},i,b.params),pathname:kr([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:kr([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,n,r);return t&&y?u.createElement(fa.Provider,{value:{location:fl({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Qn.Pop}},y):y}function zy(){let e=By(),t=Ey(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:s},n):null,null)}const Py=u.createElement(zy,null);class Ly extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(Dr.Provider,{value:this.props.routeContext},u.createElement(_h.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Iy(e){let{routeContext:t,match:n,children:r}=e,s=u.useContext(eu);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(Dr.Provider,{value:t},r)}function Oy(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let p=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);p>=0||Je(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let f=a[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=p),f.route.id){let{loaderData:h,errors:x}=n,w=f.route.loader&&h[f.route.id]===void 0&&(!x||x[f.route.id]===void 0);if(f.route.lazy||w){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,f,h)=>{let x,w=!1,y=null,b=null;n&&(x=i&&f.route.id?i[f.route.id]:void 0,y=f.route.errorElement||Py,c&&(d<0&&h===0?(Hy("route-fallback"),w=!0,b=null):d===h&&(w=!0,b=f.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,h+1)),m=()=>{let v;return x?v=y:w?v=b:f.route.Component?v=u.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=p,u.createElement(Iy,{match:f,routeContext:{outlet:p,matches:g,isDataRoute:n!=null},children:v})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?u.createElement(Ly,{location:n.location,revalidation:n.revalidation,component:y,error:x,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var Dh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Dh||{}),Rh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Rh||{});function $y(e){let t=u.useContext(eu);return t||Je(!1),t}function Ay(e){let t=u.useContext(My);return t||Je(!1),t}function Fy(e){let t=u.useContext(Dr);return t||Je(!1),t}function zh(e){let t=Fy(),n=t.matches[t.matches.length-1];return n.route.id||Je(!1),n.route.id}function By(){var e;let t=u.useContext(_h),n=Ay(),r=zh();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Uy(){let{router:e}=$y(Dh.UseNavigateStable),t=zh(Rh.UseNavigateStable),n=u.useRef(!1);return Mh(()=>{n.current=!0}),u.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,fl({fromRouteId:t},o)))},[e,t])}const Td={};function Hy(e,t,n){Td[e]||(Td[e]=!0)}function Wy(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ft(e){Je(!1)}function Vy(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Qn.Pop,navigator:o,static:a=!1,future:i}=e;pa()&&Je(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:o,static:a,future:fl({v7_relativeSplatPath:!1},i)}),[c,i,o,a]);typeof r=="string"&&(r=Tr(r));let{pathname:p="/",search:f="",hash:h="",state:x=null,key:w="default"}=r,y=u.useMemo(()=>{let b=Ch(p,c);return b==null?null:{location:{pathname:b,search:f,hash:h,state:x,key:w},navigationType:s}},[c,p,f,h,x,w,s]);return y==null?null:u.createElement(da.Provider,{value:d},u.createElement(fa.Provider,{children:n,value:y}))}function Xy(e){let{children:t,location:n}=e;return Dy(tc(t),n)}new Promise(()=>{});function tc(e,t){t===void 0&&(t=[]);let n=[];return u.Children.forEach(e,(r,s)=>{if(!u.isValidElement(r))return;let o=[...t,s];if(r.type===u.Fragment){n.push.apply(n,tc(r.props.children,o));return}r.type!==ft&&Je(!1),!r.props.index||!r.props.children||Je(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=tc(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Yy="6";try{window.__reactRouterVersion=Yy}catch(e){}const Ky="startTransition",Dd=Hx[Ky];function Qy(e){let{basename:t,children:n,future:r,window:s}=e,o=u.useRef();o.current==null&&(o.current=ey({window:s,v5Compat:!0}));let a=o.current,[i,c]=u.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},p=u.useCallback(f=>{d&&Dd?Dd(()=>c(f)):c(f)},[c,d]);return u.useLayoutEffect(()=>a.listen(p),[a,p]),u.useEffect(()=>Wy(r),[r]),u.createElement(Vy,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}var Rd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Rd||(Rd={}));var zd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(zd||(zd={}));const nu="";async function Pd(){var r,s;const e=localStorage.getItem("whisper_token");if(e)return e;const t=(s=(r=window.Telegram)==null?void 0:r.WebApp)==null?void 0:s.initData;if(t){const a=await(await fetch(`${nu}/api/auth/telegram`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:t})})).json();if(a.success&&a.token)return localStorage.setItem("whisper_token",a.token),a.token}const n=new Error("need_login");throw n.code="NEED_LOGIN",n}async function F(e,t={}){let n=await Pd();const r=`${nu}${e}`,s=a=>fetch(r,{...t,cache:"no-store",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`,...t.headers},body:t.body?JSON.stringify(t.body):void 0});let o=await s(n);if(o.status===401&&(localStorage.removeItem("whisper_token"),n=await Pd(),o=await s(n)),o.status===204)return null;if(!o.ok){const a=await o.json().catch(()=>({}));throw new Error(a.detail||` (${o.status})`)}return o.json()}async function Gy(e){const n=await(await fetch(`${nu}/api/auth/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})})).json();if(n.success&&n.token)return localStorage.setItem("whisper_token",n.token),!0;throw new Error(n.detail||"")}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ph=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...i},c)=>u.createElement("svg",{ref:c,...Jy,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Ph("lucide",s),...i},[...a.map(([d,p])=>u.createElement(d,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(e,t)=>{const n=u.forwardRef(({className:r,...s},o)=>u.createElement(Zy,{ref:o,iconNode:t,className:Ph(`lucide-${qy(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=me("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=me("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=me("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=me("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=me("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=me("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=me("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=me("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=me("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=me("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=me("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=me("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=me("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=me("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=me("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=me("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=me("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=me("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=me("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=me("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=me("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=me("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=me("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=me("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=me("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),mv="WhisperMiniDB",gv=1,ds="avatars",Ah=()=>new Promise((e,t)=>{const n=indexedDB.open(mv,gv);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(ds)||r.createObjectStore(ds,{keyPath:"key"})}}),nc=async(e,t)=>{const n=await Ah();return new Promise((r,s)=>{const o=n.transaction([ds],"readwrite");o.objectStore(ds).put({key:e,base64:t}),o.oncomplete=()=>r(),o.onerror=()=>s(o.error)})},ms=async e=>{const t=await Ah();return new Promise((n,r)=>{const o=t.transaction([ds],"readonly").objectStore(ds).get(e);o.onsuccess=()=>{var a;return n(((a=o.result)==null?void 0:a.base64)||null)},o.onerror=()=>r(o.error)})},Et={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function Lr({icon:e,label:t,desc:n,disabled:r,onClick:s,badge:o}){const[a,i]=u.useState(!1),c=()=>!r&&i(!0),d=()=>{i(!1),r||s==null||s()};return l.jsxs("button",{className:"flex flex-col items-start rounded-[18px] gap-2 text-left",style:{padding:"16px 14px",background:Et.bg,boxShadow:a?"inset 3px 3px 8px rgba(174,176,182,0.5), inset -3px -3px 8px #ffffff":"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff",opacity:r?.4:1,transform:a?"scale(0.97)":"scale(1)",transition:"transform 0.1s, box-shadow 0.1s",cursor:r?"default":"pointer",WebkitTapHighlightColor:"transparent"},disabled:r,onTouchStart:c,onTouchEnd:d,onMouseDown:c,onMouseUp:d,onMouseLeave:()=>i(!1),children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-[12px]",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))"},children:e}),o&&l.jsx("div",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full",style:{background:"#ef4444",border:"2px solid var(--bg)"}})]}),l.jsxs("div",{className:"pl-1",children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:Et.text},children:t}),l.jsx("div",{className:"mt-0.5 text-[10px] leading-snug",style:{color:Et.textMuted},children:n})]})]})}function Od({children:e}){return l.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-[3px]",style:{color:Et.textMuted},children:e})}function yv(){const e=Ft(),[t,n]=u.useState(()=>{try{return JSON.parse(localStorage.getItem("whisper_profile")||"null")}catch(d){return null}}),[r,s]=u.useState(null),[o,a]=u.useState(!1);u.useEffect(()=>{F("/api/user/profile").then(d=>{n(d),localStorage.setItem("whisper_profile",JSON.stringify(d))}).catch(()=>{}),ms("user-avatar").then(d=>{d&&s(d)}).catch(function(){}),F("/api/diary/unread-count").then(d=>{d.count>0&&a(!0)}).catch(()=>{})},[]);const i=(t==null?void 0:t.nickname)||"",c=(t==null?void 0:t.background_url)||"";return l.jsxs("div",{className:"flex flex-col overflow-y-auto",style:{background:Et.bg,height:"100%",paddingBottom:16},children:[l.jsxs("div",{className:"flex flex-col px-5",style:{paddingTop:"max(12px, env(safe-area-inset-top))"},children:[l.jsx("h1",{className:"mb-4 text-center text-[17px] font-medium",style:{color:Et.textMuted,letterSpacing:"4px"},children:"W H I S P E R"}),l.jsxs("button",{className:"mb-5 flex w-full items-center gap-4 rounded-[20px] p-5 text-left",style:{background:Et.bg,boxShadow:"6px 6px 14px rgba(174,176,182,0.5), -6px -6px 14px #ffffff"},onClick:()=>e("/profile"),children:[l.jsx("div",{className:"shrink-0 rounded-full",style:{width:52,height:52,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Et.bg},children:r?l.jsx("img",{src:r,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{style:{fontSize:22},children:""})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"text-[17px] font-bold truncate",style:{color:Et.text},children:["@",i]}),l.jsxs("div",{className:"mt-0.5 text-[11px] italic",style:{color:Et.textMuted},children:['"',c,'"']})]}),l.jsx(us,{size:16,style:{color:Et.textMuted,flexShrink:0}})]}),l.jsx(Od,{children:""}),l.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[l.jsx(Lr,{icon:l.jsx(ru,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/world-books")}),l.jsx(Lr,{icon:l.jsx(tv,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/memories")}),l.jsx(Lr,{icon:l.jsx(Lh,{size:18,color:"white"}),label:"",desc:"Core Blocks",onClick:()=>e("/assistants")}),l.jsx(Lr,{icon:l.jsx(pv,{size:18,color:"white"}),label:"",desc:"API",onClick:()=>e("/settings")})]}),l.jsx(Od,{children:""}),l.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[l.jsx(Lr,{icon:l.jsx(ev,{size:18,color:"white"}),label:"",desc:"",badge:o,onClick:()=>e("/diary")}),l.jsx(Lr,{icon:l.jsx(hv,{size:18,color:"white"}),label:"",desc:"",disabled:!0})]}),l.jsx("button",{className:"flex w-full items-center justify-center rounded-[18px] py-4",style:{background:Et.bg,boxShadow:"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff"},onClick:()=>e("/cot"),children:l.jsx(av,{size:32,fill:Et.accent,style:{color:Et.accent,animation:"heartbeat 2s ease-in-out infinite"}})})]}),l.jsx("style",{children:`
        @keyframes heartbeat {
          0%, 100% { transform: scale(1); }
          15% { transform: scale(1.15); }
          30% { transform: scale(1); }
          45% { transform: scale(1.1); }
          60% { transform: scale(1); }
        }
      `})]})}function vv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const ma=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function gs(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function lu(e){return"nodeType"in e}function St(e){var t,n;return e?gs(e)?e:lu(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function ou(e){const{Document:t}=St(e);return e instanceof t}function Sl(e){return gs(e)?!1:e instanceof St(e).HTMLElement}function Fh(e){return e instanceof St(e).SVGElement}function ys(e){return e?gs(e)?e.document:lu(e)?ou(e)?e:Sl(e)||Fh(e)?e.ownerDocument:document:document:document}const un=ma?u.useLayoutEffect:u.useEffect;function ga(e){const t=u.useRef(e);return un(()=>{t.current=e}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function wv(){const e=u.useRef(null),t=u.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=u.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function pl(e,t){t===void 0&&(t=[e]);const n=u.useRef(e);return un(()=>{n.current!==e&&(n.current=e)},t),n}function Nl(e,t){const n=u.useRef();return u.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Bo(e){const t=ga(e),n=u.useRef(null),r=u.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function Uo(e){const t=u.useRef();return u.useEffect(()=>{t.current=e},[e]),t.current}let qa={};function Cl(e,t){return u.useMemo(()=>{if(t)return t;const n=qa[e]==null?0:qa[e]+1;return qa[e]=n,e+"-"+n},[e,t])}function Bh(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,a)=>{const i=Object.entries(a);for(const[c,d]of i){const p=o[c];p!=null&&(o[c]=p+e*d)}return o},{...t})}}const ns=Bh(1),Ho=Bh(-1);function bv(e){return"clientX"in e&&"clientY"in e}function ya(e){if(!e)return!1;const{KeyboardEvent:t}=St(e.target);return t&&e instanceof t}function kv(e){if(!e)return!1;const{TouchEvent:t}=St(e.target);return t&&e instanceof t}function Wo(e){if(kv(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return bv(e)?{x:e.clientX,y:e.clientY}:null}const Ln=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ln.Translate.toString(e),Ln.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),$d="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function jv(e){return e.matches($d)?e:e.querySelector($d)}const Sv={display:"none"};function Nv(e){let{id:t,value:n}=e;return De.createElement("div",{id:t,style:Sv},n)}function Cv(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return De.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Ev(){const[e,t]=u.useState("");return{announce:u.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Uh=u.createContext(null);function _v(e){const t=u.useContext(Uh);u.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Mv(){const[e]=u.useState(()=>new Set),t=u.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[u.useCallback(r=>{let{type:s,event:o}=r;e.forEach(a=>{var i;return(i=a[s])==null?void 0:i.call(a,o)})},[e]),t]}const Tv={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Dv={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Rv(e){let{announcements:t=Dv,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=Tv}=e;const{announce:o,announcement:a}=Ev(),i=Cl("DndLiveRegion"),[c,d]=u.useState(!1);if(u.useEffect(()=>{d(!0)},[]),_v(u.useMemo(()=>({onDragStart(f){let{active:h}=f;o(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:x}=f;t.onDragMove&&o(t.onDragMove({active:h,over:x}))},onDragOver(f){let{active:h,over:x}=f;o(t.onDragOver({active:h,over:x}))},onDragEnd(f){let{active:h,over:x}=f;o(t.onDragEnd({active:h,over:x}))},onDragCancel(f){let{active:h,over:x}=f;o(t.onDragCancel({active:h,over:x}))}}),[o,t])),!c)return null;const p=De.createElement(De.Fragment,null,De.createElement(Nv,{id:r,value:s.draggable}),De.createElement(Cv,{id:i,announcement:a}));return n?Qr.createPortal(p,n):p}var Ge;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ge||(Ge={}));function Vo(){}function Xo(e,t){return u.useMemo(()=>({sensor:e,options:t!=null?t:{}}),[e,t])}function Hh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const dn=Object.freeze({x:0,y:0});function zv(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Pv(e,t){const n=Wo(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function Lv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Iv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Ov(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Ad(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Wh=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=Ad(t,t.left,t.top),o=[];for(const a of r){const{id:i}=a,c=n.get(i);if(c){const d=zv(Ad(c),s);o.push({id:i,data:{droppableContainer:a,value:d}})}}return o.sort(Lv)};function $v(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),a=s-r,i=o-n;if(r<s&&n<o){const c=t.width*t.height,d=e.width*e.height,p=a*i,f=p/(c+d-p);return Number(f.toFixed(4))}return 0}const Av=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const o of r){const{id:a}=o,i=n.get(a);if(i){const c=$v(i,t);c>0&&s.push({id:a,data:{droppableContainer:o,value:c}})}}return s.sort(Iv)};function Fv(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Vh(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:dn}function Bv(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((a,i)=>({...a,top:a.top+e*i.y,bottom:a.bottom+e*i.y,left:a.left+e*i.x,right:a.right+e*i.x}),{...n})}}const Uv=Bv(1);function Xh(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Hv(e,t,n){const r=Xh(t);if(!r)return e;const{scaleX:s,scaleY:o,x:a,y:i}=r,c=e.left-a-(1-s)*parseFloat(n),d=e.top-i-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),p=s?e.width/s:e.width,f=o?e.height/o:e.height;return{width:p,height:f,top:d,right:c+p,bottom:d+f,left:c}}const Wv={ignoreTransform:!1};function vs(e,t){t===void 0&&(t=Wv);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:p}=St(e).getComputedStyle(e);d&&(n=Hv(n,d,p))}const{top:r,left:s,width:o,height:a,bottom:i,right:c}=n;return{top:r,left:s,width:o,height:a,bottom:i,right:c}}function Fd(e){return vs(e,{ignoreTransform:!0})}function Vv(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Xv(e,t){return t===void 0&&(t=St(e).getComputedStyle(e)),t.position==="fixed"}function Yv(e,t){t===void 0&&(t=St(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?n.test(o):!1})}function au(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(ou(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Sl(s)||Fh(s)||n.includes(s))return n;const o=St(e).getComputedStyle(s);return s!==e&&Yv(s,o)&&n.push(s),Xv(s,o)?n:r(s.parentNode)}return e?r(e):n}function Yh(e){const[t]=au(e,1);return t!=null?t:null}function Ja(e){return!ma||!e?null:gs(e)?e:lu(e)?ou(e)||e===ys(e).scrollingElement?window:Sl(e)?e:null:null}function Kh(e){return gs(e)?e.scrollX:e.scrollLeft}function Qh(e){return gs(e)?e.scrollY:e.scrollTop}function rc(e){return{x:Kh(e),y:Qh(e)}}var nt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(nt||(nt={}));function Gh(e){return!ma||!e?!1:e===document.scrollingElement}function qh(e){const t={x:0,y:0},n=Gh(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:a,isRight:i,maxScroll:r,minScroll:t}}const Kv={x:.2,y:.2};function Qv(e,t,n,r,s){let{top:o,left:a,right:i,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=Kv);const{isTop:d,isBottom:p,isLeft:f,isRight:h}=qh(e),x={x:0,y:0},w={x:0,y:0},y={height:t.height*s.y,width:t.width*s.x};return!d&&o<=t.top+y.height?(x.y=nt.Backward,w.y=r*Math.abs((t.top+y.height-o)/y.height)):!p&&c>=t.bottom-y.height&&(x.y=nt.Forward,w.y=r*Math.abs((t.bottom-y.height-c)/y.height)),!h&&i>=t.right-y.width?(x.x=nt.Forward,w.x=r*Math.abs((t.right-y.width-i)/y.width)):!f&&a<=t.left+y.width&&(x.x=nt.Backward,w.x=r*Math.abs((t.left+y.width-a)/y.width)),{direction:x,speed:w}}function Gv(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:a}=window;return{top:0,left:0,right:o,bottom:a,width:o,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function Jh(e){return e.reduce((t,n)=>ns(t,rc(n)),dn)}function qv(e){return e.reduce((t,n)=>t+Kh(n),0)}function Jv(e){return e.reduce((t,n)=>t+Qh(n),0)}function Zh(e,t){if(t===void 0&&(t=vs),!e)return;const{top:n,left:r,bottom:s,right:o}=t(e);Yh(e)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Zv=[["x",["left","right"],qv],["y",["top","bottom"],Jv]];class iu{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=au(n),s=Jh(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,a,i]of Zv)for(const c of a)Object.defineProperty(this,c,{get:()=>{const d=i(r),p=s[o]-d;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Vs{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function e1(e){const{EventTarget:t}=St(e);return e instanceof t?e:ys(e)}function Za(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Ht;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ht||(Ht={}));function Bd(e){e.preventDefault()}function t1(e){e.stopPropagation()}var je;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(je||(je={}));const ex={start:[je.Space,je.Enter],cancel:[je.Esc],end:[je.Space,je.Enter,je.Tab]},n1=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case je.Right:return{...n,x:n.x+25};case je.Left:return{...n,x:n.x-25};case je.Down:return{...n,y:n.y+25};case je.Up:return{...n,y:n.y-25}}};class tx{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Vs(ys(n)),this.windowListeners=new Vs(St(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ht.Resize,this.handleCancel),this.windowListeners.add(Ht.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ht.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Zh(r),n(dn)}handleKeyDown(t){if(ya(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=ex,coordinateGetter:a=n1,scrollBehavior:i="smooth"}=s,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:dn;this.referenceCoordinates||(this.referenceCoordinates=p);const f=a(t,{active:n,context:r.current,currentCoordinates:p});if(f){const h=Ho(f,p),x={x:0,y:0},{scrollableAncestors:w}=r.current;for(const y of w){const b=t.code,{isTop:g,isRight:m,isLeft:v,isBottom:S,maxScroll:j,minScroll:C}=qh(y),k=Gv(y),E={x:Math.min(b===je.Right?k.right-k.width/2:k.right,Math.max(b===je.Right?k.left:k.left+k.width/2,f.x)),y:Math.min(b===je.Down?k.bottom-k.height/2:k.bottom,Math.max(b===je.Down?k.top:k.top+k.height/2,f.y))},D=b===je.Right&&!m||b===je.Left&&!v,z=b===je.Down&&!S||b===je.Up&&!g;if(D&&E.x!==f.x){const O=y.scrollLeft+h.x,oe=b===je.Right&&O<=j.x||b===je.Left&&O>=C.x;if(oe&&!h.y){y.scrollTo({left:O,behavior:i});return}oe?x.x=y.scrollLeft-O:x.x=b===je.Right?y.scrollLeft-j.x:y.scrollLeft-C.x,x.x&&y.scrollBy({left:-x.x,behavior:i});break}else if(z&&E.y!==f.y){const O=y.scrollTop+h.y,oe=b===je.Down&&O<=j.y||b===je.Up&&O>=C.y;if(oe&&!h.x){y.scrollTo({top:O,behavior:i});return}oe?x.y=y.scrollTop-O:x.y=b===je.Down?y.scrollTop-j.y:y.scrollTop-C.y,x.y&&y.scrollBy({top:-x.y,behavior:i});break}}this.handleMove(t,ns(Ho(f,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}tx.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=ex,onActivation:s}=t,{active:o}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const i=o.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function Ud(e){return!!(e&&"distance"in e)}function Hd(e){return!!(e&&"delay"in e)}class cu{constructor(t,n,r){var s;r===void 0&&(r=e1(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:a}=o;this.props=t,this.events=n,this.document=ys(a),this.documentListeners=new Vs(this.document),this.listeners=new Vs(r),this.windowListeners=new Vs(St(a)),this.initialCoordinates=(s=Wo(o))!=null?s:dn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ht.Resize,this.handleCancel),this.windowListeners.add(Ht.DragStart,Bd),this.windowListeners.add(Ht.VisibilityChange,this.handleCancel),this.windowListeners.add(Ht.ContextMenu,Bd),this.documentListeners.add(Ht.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Hd(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Ud(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ht.Click,t1,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ht.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:a,options:{activationConstraint:i}}=o;if(!s)return;const c=(n=Wo(t))!=null?n:dn,d=Ho(s,c);if(!r&&i){if(Ud(i)){if(i.tolerance!=null&&Za(d,i.tolerance))return this.handleCancel();if(Za(d,i.distance))return this.handleStart()}if(Hd(i)&&Za(d,i.tolerance))return this.handleCancel();this.handlePending(i,d);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===je.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const r1={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class va extends cu{constructor(t){const{event:n}=t,r=ys(n.target);super(t,r1,r)}}va.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const s1={move:{name:"mousemove"},end:{name:"mouseup"}};var sc;(function(e){e[e.RightClick=2]="RightClick"})(sc||(sc={}));class l1 extends cu{constructor(t){super(t,s1,ys(t.event.target))}}l1.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===sc.RightClick?!1:(r==null||r({event:n}),!0)}}];const ei={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class uu extends cu{constructor(t){super(t,ei)}static setup(){return window.addEventListener(ei.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(ei.move.name,t)};function t(){}}}uu.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Xs;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Xs||(Xs={}));var Yo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Yo||(Yo={}));function o1(e){let{acceleration:t,activator:n=Xs.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:a=5,order:i=Yo.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:p,delta:f,threshold:h}=e;const x=i1({delta:f,disabled:!o}),[w,y]=wv(),b=u.useRef({x:0,y:0}),g=u.useRef({x:0,y:0}),m=u.useMemo(()=>{switch(n){case Xs.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Xs.DraggableRect:return s}},[n,s,c]),v=u.useRef(null),S=u.useCallback(()=>{const C=v.current;if(!C)return;const k=b.current.x*g.current.x,E=b.current.y*g.current.y;C.scrollBy(k,E)},[]),j=u.useMemo(()=>i===Yo.TreeOrder?[...d].reverse():d,[i,d]);u.useEffect(()=>{if(!o||!d.length||!m){y();return}for(const C of j){if((r==null?void 0:r(C))===!1)continue;const k=d.indexOf(C),E=p[k];if(!E)continue;const{direction:D,speed:z}=Qv(C,E,m,t,h);for(const O of["x","y"])x[O][D[O]]||(z[O]=0,D[O]=0);if(z.x>0||z.y>0){y(),v.current=C,w(S,a),b.current=z,g.current=D;return}}b.current={x:0,y:0},g.current={x:0,y:0},y()},[t,S,r,y,o,a,JSON.stringify(m),JSON.stringify(x),w,d,j,p,JSON.stringify(h)])}const a1={x:{[nt.Backward]:!1,[nt.Forward]:!1},y:{[nt.Backward]:!1,[nt.Forward]:!1}};function i1(e){let{delta:t,disabled:n}=e;const r=Uo(t);return Nl(s=>{if(n||!r||!s)return a1;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[nt.Backward]:s.x[nt.Backward]||o.x===-1,[nt.Forward]:s.x[nt.Forward]||o.x===1},y:{[nt.Backward]:s.y[nt.Backward]||o.y===-1,[nt.Forward]:s.y[nt.Forward]||o.y===1}}},[n,t,r])}function c1(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Nl(s=>{var o;return t==null?null:(o=r!=null?r:s)!=null?o:null},[r,t])}function u1(e,t){return u.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...o]},[]),[e,t])}var hl;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(hl||(hl={}));var lc;(function(e){e.Optimized="optimized"})(lc||(lc={}));const Wd=new Map;function d1(e,t){let{dragging:n,dependencies:r,config:s}=t;const[o,a]=u.useState(null),{frequency:i,measure:c,strategy:d}=s,p=u.useRef(e),f=b(),h=pl(f),x=u.useCallback(function(g){g===void 0&&(g=[]),!h.current&&a(m=>m===null?g:m.concat(g.filter(v=>!m.includes(v))))},[h]),w=u.useRef(null),y=Nl(g=>{if(f&&!n)return Wd;if(!g||g===Wd||p.current!==e||o!=null){const m=new Map;for(let v of e){if(!v)continue;if(o&&o.length>0&&!o.includes(v.id)&&v.rect.current){m.set(v.id,v.rect.current);continue}const S=v.node.current,j=S?new iu(c(S),S):null;v.rect.current=j,j&&m.set(v.id,j)}return m}return g},[e,o,n,f,c]);return u.useEffect(()=>{p.current=e},[e]),u.useEffect(()=>{f||x()},[n,f]),u.useEffect(()=>{o&&o.length>0&&a(null)},[JSON.stringify(o)]),u.useEffect(()=>{f||typeof i!="number"||w.current!==null||(w.current=setTimeout(()=>{x(),w.current=null},i))},[i,f,x,...r]),{droppableRects:y,measureDroppableContainers:x,measuringScheduled:o!=null};function b(){switch(d){case hl.Always:return!1;case hl.BeforeDragging:return n;default:return!n}}}function du(e,t){return Nl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function f1(e,t){return du(e,t)}function p1(e){let{callback:t,disabled:n}=e;const r=ga(t),s=u.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return u.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function wa(e){let{callback:t,disabled:n}=e;const r=ga(t),s=u.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return u.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function h1(e){return new iu(vs(e),e)}function Vd(e,t,n){t===void 0&&(t=h1);const[r,s]=u.useState(null);function o(){s(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c!=null?c:n)!=null?d:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=p1({callback(c){if(e)for(const d of c){const{type:p,target:f}=d;if(p==="childList"&&f instanceof HTMLElement&&f.contains(e)){o();break}}}}),i=wa({callback:o});return un(()=>{o(),e?(i==null||i.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),a==null||a.disconnect())},[e]),r}function x1(e){const t=du(e);return Vh(e,t)}const Xd=[];function m1(e){const t=u.useRef(e),n=Nl(r=>e?r&&r!==Xd&&e&&t.current&&e.parentNode===t.current.parentNode?r:au(e):Xd,[e]);return u.useEffect(()=>{t.current=e},[e]),n}function g1(e){const[t,n]=u.useState(null),r=u.useRef(e),s=u.useCallback(o=>{const a=Ja(o.target);a&&n(i=>i?(i.set(a,rc(a)),new Map(i)):null)},[]);return u.useEffect(()=>{const o=r.current;if(e!==o){a(o);const i=e.map(c=>{const d=Ja(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,rc(d)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=e}return()=>{a(e),a(o)};function a(i){i.forEach(c=>{const d=Ja(c);d==null||d.removeEventListener("scroll",s)})}},[s,e]),u.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,a)=>ns(o,a),dn):Jh(e):dn,[e,t])}function Yd(e,t){t===void 0&&(t=[]);const n=u.useRef(null);return u.useEffect(()=>{n.current=null},t),u.useEffect(()=>{const r=e!==dn;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Ho(e,n.current):dn}function y1(e){u.useEffect(()=>{if(!ma)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function v1(e,t){return u.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=a=>{o(a,t)},n},{}),[e,t])}function nx(e){return u.useMemo(()=>e?Vv(e):null,[e])}const Kd=[];function w1(e,t){t===void 0&&(t=vs);const[n]=e,r=nx(n?St(n):null),[s,o]=u.useState(Kd);function a(){o(()=>e.length?e.map(c=>Gh(c)?r:new iu(t(c),c)):Kd)}const i=wa({callback:a});return un(()=>{i==null||i.disconnect(),a(),e.forEach(c=>i==null?void 0:i.observe(c))},[e]),s}function rx(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Sl(t)?t:e}function b1(e){let{measure:t}=e;const[n,r]=u.useState(null),s=u.useCallback(d=>{for(const{target:p}of d)if(Sl(p)){r(f=>{const h=t(p);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),o=wa({callback:s}),a=u.useCallback(d=>{const p=rx(d);o==null||o.disconnect(),p&&(o==null||o.observe(p)),r(p?t(p):null)},[t,o]),[i,c]=Bo(a);return u.useMemo(()=>({nodeRef:i,rect:n,setRef:c}),[n,i,c])}const k1=[{sensor:va,options:{}},{sensor:tx,options:{}}],j1={current:{}},mo={draggable:{measure:Fd},droppable:{measure:Fd,strategy:hl.WhileDragging,frequency:lc.Optimized},dragOverlay:{measure:vs}};class Ys extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const S1={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ys,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Vo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:mo,measureDroppableContainers:Vo,windowRect:null,measuringScheduled:!1},sx={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Vo,draggableNodes:new Map,over:null,measureDroppableContainers:Vo},El=u.createContext(sx),lx=u.createContext(S1);function N1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ys}}}function C1(e,t){switch(t.type){case Ge.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ge.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ge.DragEnd:case Ge.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ge.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Ys(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Ge.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const a=new Ys(e.droppable.containers);return a.set(n,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case Ge.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new Ys(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function E1(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=u.useContext(El),o=Uo(r),a=Uo(n==null?void 0:n.id);return u.useEffect(()=>{if(!t&&!r&&o&&a!=null){if(!ya(o)||document.activeElement===o.target)return;const i=s.get(a);if(!i)return;const{activatorNode:c,node:d}=i;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[c.current,d.current]){if(!p)continue;const f=jv(p);if(f){f.focus();break}}})}},[r,t,s,a,o]),null}function ox(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...r}),n):n}function _1(e){return u.useMemo(()=>({draggable:{...mo.draggable,...e==null?void 0:e.draggable},droppable:{...mo.droppable,...e==null?void 0:e.droppable},dragOverlay:{...mo.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function M1(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const o=u.useRef(!1),{x:a,y:i}=typeof s=="boolean"?{x:s,y:s}:s;un(()=>{if(!a&&!i||!t){o.current=!1;return}if(o.current||!r)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const p=n(d),f=Vh(p,r);if(a||(f.x=0),i||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=Yh(d);h&&h.scrollBy({top:f.y,left:f.x})}},[t,a,i,r,n])}const ba=u.createContext({...dn,scaleX:1,scaleY:1});var Wn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Wn||(Wn={}));const ax=u.memo(function(t){var n,r,s,o;let{id:a,accessibility:i,autoScroll:c=!0,children:d,sensors:p=k1,collisionDetection:f=Av,measuring:h,modifiers:x,...w}=t;const y=u.useReducer(C1,void 0,N1),[b,g]=y,[m,v]=Mv(),[S,j]=u.useState(Wn.Uninitialized),C=S===Wn.Initialized,{draggable:{active:k,nodes:E,translate:D},droppable:{containers:z}}=b,O=k!=null?E.get(k):null,oe=u.useRef({initial:null,translated:null}),Y=u.useMemo(()=>{var We;return k!=null?{id:k,data:(We=O==null?void 0:O.data)!=null?We:j1,rect:oe}:null},[k,O]),P=u.useRef(null),[Z,he]=u.useState(null),[fe,$]=u.useState(null),G=pl(w,Object.values(w)),T=Cl("DndDescribedBy",a),te=u.useMemo(()=>z.getEnabled(),[z]),K=_1(h),{droppableRects:ke,measureDroppableContainers:ye,measuringScheduled:Ze}=d1(te,{dragging:C,dependencies:[D.x,D.y],config:K.droppable}),ve=c1(E,k),X=u.useMemo(()=>fe?Wo(fe):null,[fe]),we=ws(),ie=f1(ve,K.draggable.measure);M1({activeNode:k!=null?E.get(k):null,config:we.layoutShiftCompensation,initialRect:ie,measure:K.draggable.measure});const se=Vd(ve,K.draggable.measure,ie),Fe=Vd(ve?ve.parentElement:null),Ee=u.useRef({activatorEvent:null,active:null,activeNode:ve,collisionRect:null,collisions:null,droppableRects:ke,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),it=z.getNodeFor((n=Ee.current.over)==null?void 0:n.id),B=b1({measure:K.dragOverlay.measure}),W=(r=B.nodeRef.current)!=null?r:ve,ce=C?(s=B.rect)!=null?s:se:null,q=!!(B.nodeRef.current&&B.rect),ae=x1(q?null:se),I=nx(W?St(W):null),ee=m1(C?it!=null?it:ve:null),re=w1(ee),de=ox(x,{transform:{x:D.x-ae.x,y:D.y-ae.y,scaleX:1,scaleY:1},activatorEvent:fe,active:Y,activeNodeRect:se,containerNodeRect:Fe,draggingNodeRect:ce,over:Ee.current.over,overlayNodeRect:B.rect,scrollableAncestors:ee,scrollableAncestorRects:re,windowRect:I}),Ye=X?ns(X,D):null,He=g1(ee),On=Yd(He),Gt=Yd(He,[se]),qt=ns(de,On),fn=ce?Uv(ce,de):null,Jt=Y&&fn?f({active:Y,collisionRect:fn,droppableRects:ke,droppableContainers:te,pointerCoordinates:Ye}):null,pn=Ov(Jt,"id"),[xt,Zt]=u.useState(null),ur=q?de:ns(de,Gt),A=Fv(ur,(o=xt==null?void 0:xt.rect)!=null?o:null,se),ge=u.useRef(null),ue=u.useCallback((We,gt)=>{let{sensor:yt,options:hn}=gt;if(P.current==null)return;const Nt=E.get(P.current);if(!Nt)return;const st=We.nativeEvent,Ct=new yt({active:P.current,activeNode:Nt,event:st,options:hn,context:Ee,onAbort(Ve){if(!E.get(Ve))return;const{onDragAbort:Bt}=G.current,en={id:Ve};Bt==null||Bt(en),m({type:"onDragAbort",event:en})},onPending(Ve,xn,Bt,en){if(!E.get(Ve))return;const{onDragPending:fr}=G.current,Ut={id:Ve,constraint:xn,initialCoordinates:Bt,offset:en};fr==null||fr(Ut),m({type:"onDragPending",event:Ut})},onStart(Ve){const xn=P.current;if(xn==null)return;const Bt=E.get(xn);if(!Bt)return;const{onDragStart:en}=G.current,dr={activatorEvent:st,active:{id:xn,data:Bt.data,rect:oe}};Qr.unstable_batchedUpdates(()=>{en==null||en(dr),j(Wn.Initializing),g({type:Ge.DragStart,initialCoordinates:Ve,active:xn}),m({type:"onDragStart",event:dr}),he(ge.current),$(st)})},onMove(Ve){g({type:Ge.DragMove,coordinates:Ve})},onEnd:$n(Ge.DragEnd),onCancel:$n(Ge.DragCancel)});ge.current=Ct;function $n(Ve){return async function(){const{active:Bt,collisions:en,over:dr,scrollAdjustedTranslate:fr}=Ee.current;let Ut=null;if(Bt&&fr){const{cancelDrop:kn}=G.current;Ut={activatorEvent:st,active:Bt,collisions:en,delta:fr,over:dr},Ve===Ge.DragEnd&&typeof kn=="function"&&await Promise.resolve(kn(Ut))&&(Ve=Ge.DragCancel)}P.current=null,Qr.unstable_batchedUpdates(()=>{g({type:Ve}),j(Wn.Uninitialized),Zt(null),he(null),$(null),ge.current=null;const kn=Ve===Ge.DragEnd?"onDragEnd":"onDragCancel";if(Ut){const bs=G.current[kn];bs==null||bs(Ut),m({type:kn,event:Ut})}})}}},[E]),_e=u.useCallback((We,gt)=>(yt,hn)=>{const Nt=yt.nativeEvent,st=E.get(hn);if(P.current!==null||!st||Nt.dndKit||Nt.defaultPrevented)return;const Ct={active:st};We(yt,gt.options,Ct)===!0&&(Nt.dndKit={capturedBy:gt.sensor},P.current=hn,ue(yt,gt))},[E,ue]),mt=u1(p,_e);y1(p),un(()=>{se&&S===Wn.Initializing&&j(Wn.Initialized)},[se,S]),u.useEffect(()=>{const{onDragMove:We}=G.current,{active:gt,activatorEvent:yt,collisions:hn,over:Nt}=Ee.current;if(!gt||!yt)return;const st={active:gt,activatorEvent:yt,collisions:hn,delta:{x:qt.x,y:qt.y},over:Nt};Qr.unstable_batchedUpdates(()=>{We==null||We(st),m({type:"onDragMove",event:st})})},[qt.x,qt.y]),u.useEffect(()=>{const{active:We,activatorEvent:gt,collisions:yt,droppableContainers:hn,scrollAdjustedTranslate:Nt}=Ee.current;if(!We||P.current==null||!gt||!Nt)return;const{onDragOver:st}=G.current,Ct=hn.get(pn),$n=Ct&&Ct.rect.current?{id:Ct.id,rect:Ct.rect.current,data:Ct.data,disabled:Ct.disabled}:null,Ve={active:We,activatorEvent:gt,collisions:yt,delta:{x:Nt.x,y:Nt.y},over:$n};Qr.unstable_batchedUpdates(()=>{Zt($n),st==null||st(Ve),m({type:"onDragOver",event:Ve})})},[pn]),un(()=>{Ee.current={activatorEvent:fe,active:Y,activeNode:ve,collisionRect:fn,collisions:Jt,droppableRects:ke,draggableNodes:E,draggingNode:W,draggingNodeRect:ce,droppableContainers:z,over:xt,scrollableAncestors:ee,scrollAdjustedTranslate:qt},oe.current={initial:ce,translated:fn}},[Y,ve,Jt,fn,E,W,ce,ke,z,xt,ee,qt]),o1({...we,delta:D,draggingRect:fn,pointerCoordinates:Ye,scrollableAncestors:ee,scrollableAncestorRects:re});const $e=u.useMemo(()=>({active:Y,activeNode:ve,activeNodeRect:se,activatorEvent:fe,collisions:Jt,containerNodeRect:Fe,dragOverlay:B,draggableNodes:E,droppableContainers:z,droppableRects:ke,over:xt,measureDroppableContainers:ye,scrollableAncestors:ee,scrollableAncestorRects:re,measuringConfiguration:K,measuringScheduled:Ze,windowRect:I}),[Y,ve,se,fe,Jt,Fe,B,E,z,ke,xt,ye,ee,re,K,Ze,I]),_l=u.useMemo(()=>({activatorEvent:fe,activators:mt,active:Y,activeNodeRect:se,ariaDescribedById:{draggable:T},dispatch:g,draggableNodes:E,over:xt,measureDroppableContainers:ye}),[fe,mt,Y,se,g,T,E,xt,ye]);return De.createElement(Uh.Provider,{value:v},De.createElement(El.Provider,{value:_l},De.createElement(lx.Provider,{value:$e},De.createElement(ba.Provider,{value:A},d)),De.createElement(E1,{disabled:(i==null?void 0:i.restoreFocus)===!1})),De.createElement(Rv,{...i,hiddenTextDescribedById:T}));function ws(){const We=(Z==null?void 0:Z.autoScrollEnabled)===!1,gt=typeof c=="object"?c.enabled===!1:c===!1,yt=C&&!We&&!gt;return typeof c=="object"?{...c,enabled:yt}:{enabled:yt}}}),T1=u.createContext(null),Qd="button",D1="Draggable";function R1(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const o=Cl(D1),{activators:a,activatorEvent:i,active:c,activeNodeRect:d,ariaDescribedById:p,draggableNodes:f,over:h}=u.useContext(El),{role:x=Qd,roleDescription:w="draggable",tabIndex:y=0}=s!=null?s:{},b=(c==null?void 0:c.id)===t,g=u.useContext(b?ba:T1),[m,v]=Bo(),[S,j]=Bo(),C=v1(a,t),k=pl(n);un(()=>(f.set(t,{id:t,key:o,node:m,activatorNode:S,data:k}),()=>{const D=f.get(t);D&&D.key===o&&f.delete(t)}),[f,t]);const E=u.useMemo(()=>({role:x,tabIndex:y,"aria-disabled":r,"aria-pressed":b&&x===Qd?!0:void 0,"aria-roledescription":w,"aria-describedby":p.draggable}),[r,x,y,b,w,p.draggable]);return{active:c,activatorEvent:i,activeNodeRect:d,attributes:E,isDragging:b,listeners:r?void 0:C,node:m,over:h,setNodeRef:v,setActivatorNodeRef:j,transform:g}}function ix(){return u.useContext(lx)}const z1="Droppable",P1={timeout:25};function L1(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const o=Cl(z1),{active:a,dispatch:i,over:c,measureDroppableContainers:d}=u.useContext(El),p=u.useRef({disabled:n}),f=u.useRef(!1),h=u.useRef(null),x=u.useRef(null),{disabled:w,updateMeasurementsFor:y,timeout:b}={...P1,...s},g=pl(y!=null?y:r),m=u.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(g.current)?g.current:[g.current]),x.current=null},b)},[b]),v=wa({callback:m,disabled:w||!a}),S=u.useCallback((E,D)=>{v&&(D&&(v.unobserve(D),f.current=!1),E&&v.observe(E))},[v]),[j,C]=Bo(S),k=pl(t);return u.useEffect(()=>{!v||!j.current||(v.disconnect(),f.current=!1,v.observe(j.current))},[j,v]),u.useEffect(()=>(i({type:Ge.RegisterDroppable,element:{id:r,key:o,disabled:n,node:j,rect:h,data:k}}),()=>i({type:Ge.UnregisterDroppable,key:o,id:r})),[r]),u.useEffect(()=>{n!==p.current.disabled&&(i({type:Ge.SetDroppableDisabled,id:r,key:o,disabled:n}),p.current.disabled=n)},[r,o,n,i]),{active:a,rect:h,isOver:(c==null?void 0:c.id)===r,node:j,over:c,setNodeRef:C}}function I1(e){let{animation:t,children:n}=e;const[r,s]=u.useState(null),[o,a]=u.useState(null),i=Uo(n);return!n&&!r&&i&&s(i),un(()=>{if(!o)return;const c=r==null?void 0:r.key,d=r==null?void 0:r.props.id;if(c==null||d==null){s(null);return}Promise.resolve(t(d,o)).then(()=>{s(null)})},[t,r,o]),De.createElement(De.Fragment,null,n,r?u.cloneElement(r,{ref:a}):null)}const O1={x:0,y:0,scaleX:1,scaleY:1};function $1(e){let{children:t}=e;return De.createElement(El.Provider,{value:sx},De.createElement(ba.Provider,{value:O1},t))}const A1={position:"fixed",touchAction:"none"},F1=e=>ya(e)?"transform 250ms ease":void 0,B1=u.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:o,className:a,rect:i,style:c,transform:d,transition:p=F1}=e;if(!i)return null;const f=s?d:{...d,scaleX:1,scaleY:1},h={...A1,width:i.width,height:i.height,top:i.top,left:i.left,transform:Ln.Transform.toString(f),transformOrigin:s&&r?Pv(r,i):void 0,transition:typeof p=="function"?p(r):p,...c};return De.createElement(n,{className:a,style:h,ref:t},o)}),U1=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:o,className:a}=e;if(o!=null&&o.active)for(const[i,c]of Object.entries(o.active))c!==void 0&&(s[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,c));if(o!=null&&o.dragOverlay)for(const[i,c]of Object.entries(o.dragOverlay))c!==void 0&&r.node.style.setProperty(i,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,d]of Object.entries(s))n.node.style.setProperty(c,d);a!=null&&a.active&&n.node.classList.remove(a.active)}},H1=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Ln.Transform.toString(t)},{transform:Ln.Transform.toString(n)}]},W1={duration:250,easing:"ease",keyframes:H1,sideEffects:U1({styles:{active:{opacity:"0"}}})};function V1(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return ga((o,a)=>{if(t===null)return;const i=n.get(o);if(!i)return;const c=i.node.current;if(!c)return;const d=rx(a);if(!d)return;const{transform:p}=St(a).getComputedStyle(a),f=Xh(p);if(!f)return;const h=typeof t=="function"?t:X1(t);return Zh(c,s.draggable.measure),h({active:{id:o,data:i.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function X1(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...W1,...e};return o=>{let{active:a,dragOverlay:i,transform:c,...d}=o;if(!t)return;const p={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},f={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/i.rect.height:1},h={x:c.x-p.x,y:c.y-p.y,...f},x=s({...d,active:a,dragOverlay:i,transform:{initial:c,final:h}}),[w]=x,y=x[x.length-1];if(JSON.stringify(w)===JSON.stringify(y))return;const b=r==null?void 0:r({active:a,dragOverlay:i,...d}),g=i.node.animate(x,{duration:t,easing:n,fill:"forwards"});return new Promise(m=>{g.onfinish=()=>{b==null||b(),m()}})}}let Gd=0;function Y1(e){return u.useMemo(()=>{if(e!=null)return Gd++,Gd},[e])}const cx=De.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:o,modifiers:a,wrapperElement:i="div",className:c,zIndex:d=999}=e;const{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggableNodes:w,droppableContainers:y,dragOverlay:b,over:g,measuringConfiguration:m,scrollableAncestors:v,scrollableAncestorRects:S,windowRect:j}=ix(),C=u.useContext(ba),k=Y1(f==null?void 0:f.id),E=ox(a,{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggingNodeRect:b.rect,over:g,overlayNodeRect:b.rect,scrollableAncestors:v,scrollableAncestorRects:S,transform:C,windowRect:j}),D=du(h),z=V1({config:r,draggableNodes:w,droppableContainers:y,measuringConfiguration:m}),O=D?b.setRef:void 0;return De.createElement($1,null,De.createElement(I1,{animation:z},f&&k?De.createElement(B1,{key:k,id:f.id,ref:O,as:i,activatorEvent:p,adjustScale:t,className:c,transition:o,rect:D,style:{zIndex:d,...s},transform:E},n):null))});function ka(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function K1(e,t){return e.reduce((n,r,s)=>{const o=t.get(r);return o&&(n[s]=o),n},Array(e.length))}function Xl(e){return e!==null&&e>=0}function Q1(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function G1(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const ux=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const o=ka(t,r,n),a=t[s],i=o[s];return!i||!a?null:{x:i.left-a.left,y:i.top-a.top,scaleX:i.width/a.width,scaleY:i.height/a.height}},Yl={scaleX:1,scaleY:1},dx=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:a}=e;const i=(t=o[n])!=null?t:r;if(!i)return null;if(s===n){const d=o[a];return d?{x:0,y:n<a?d.top+d.height-(i.top+i.height):d.top-i.top,...Yl}:null}const c=q1(o,s,n);return s>n&&s<=a?{x:0,y:-i.height-c,...Yl}:s<n&&s>=a?{x:0,y:i.height+c,...Yl}:{x:0,y:0,...Yl}};function q1(e,t,n){const r=e[t],s=e[t-1],o=e[t+1];return r?n<t?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const fx="Sortable",px=De.createContext({activeIndex:-1,containerId:fx,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ux,disabled:{draggable:!1,droppable:!1}});function hx(e){let{children:t,id:n,items:r,strategy:s=ux,disabled:o=!1}=e;const{active:a,dragOverlay:i,droppableRects:c,over:d,measureDroppableContainers:p}=ix(),f=Cl(fx,n),h=i.rect!==null,x=u.useMemo(()=>r.map(C=>typeof C=="object"&&"id"in C?C.id:C),[r]),w=a!=null,y=a?x.indexOf(a.id):-1,b=d?x.indexOf(d.id):-1,g=u.useRef(x),m=!Q1(x,g.current),v=b!==-1&&y===-1||m,S=G1(o);un(()=>{m&&w&&p(x)},[m,x,w,p]),u.useEffect(()=>{g.current=x},[x]);const j=u.useMemo(()=>({activeIndex:y,containerId:f,disabled:S,disableTransforms:v,items:x,overIndex:b,useDragOverlay:h,sortedRects:K1(x,c),strategy:s}),[y,f,S.draggable,S.droppable,v,x,b,c,h,s]);return De.createElement(px.Provider,{value:j},t)}const J1=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return ka(n,r,s).indexOf(t)},Z1=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:o,newIndex:a,previousItems:i,previousContainerId:c,transition:d}=e;return!d||!r||i!==o&&s===a?!1:n?!0:a!==s&&t===c},e0={duration:200,easing:"ease"},xx="transform",t0=Ln.Transition.toString({property:xx,duration:0,easing:"linear"}),n0={roleDescription:"sortable"};function r0(e){let{disabled:t,index:n,node:r,rect:s}=e;const[o,a]=u.useState(null),i=u.useRef(n);return un(()=>{if(!t&&n!==i.current&&r.current){const c=s.current;if(c){const d=vs(r.current,{ignoreTransform:!0}),p={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(p.x||p.y)&&a(p)}}n!==i.current&&(i.current=n)},[t,n,r,s]),u.useEffect(()=>{o&&a(null)},[o]),o}function mx(e){let{animateLayoutChanges:t=Z1,attributes:n,disabled:r,data:s,getNewIndex:o=J1,id:a,strategy:i,resizeObserverConfig:c,transition:d=e0}=e;const{items:p,containerId:f,activeIndex:h,disabled:x,disableTransforms:w,sortedRects:y,overIndex:b,useDragOverlay:g,strategy:m}=u.useContext(px),v=s0(r,x),S=p.indexOf(a),j=u.useMemo(()=>({sortable:{containerId:f,index:S,items:p},...s}),[f,s,S,p]),C=u.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:k,node:E,isOver:D,setNodeRef:z}=L1({id:a,data:j,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...c}}),{active:O,activatorEvent:oe,activeNodeRect:Y,attributes:P,setNodeRef:Z,listeners:he,isDragging:fe,over:$,setActivatorNodeRef:G,transform:T}=R1({id:a,data:j,attributes:{...n0,...n},disabled:v.draggable}),te=vv(z,Z),K=!!O,ke=K&&!w&&Xl(h)&&Xl(b),ye=!g&&fe,Ze=ye&&ke?T:null,ve=i!=null?i:m,X=ke?Ze!=null?Ze:ve({rects:y,activeNodeRect:Y,activeIndex:h,overIndex:b,index:S}):null,we=Xl(h)&&Xl(b)?o({id:a,items:p,activeIndex:h,overIndex:b}):S,ie=O==null?void 0:O.id,se=u.useRef({activeId:ie,items:p,newIndex:we,containerId:f}),Fe=p!==se.current.items,Ee=t({active:O,containerId:f,isDragging:fe,isSorting:K,id:a,index:S,items:p,newIndex:se.current.newIndex,previousItems:se.current.items,previousContainerId:se.current.containerId,transition:d,wasDragging:se.current.activeId!=null}),it=r0({disabled:!Ee,index:S,node:E,rect:k});return u.useEffect(()=>{K&&se.current.newIndex!==we&&(se.current.newIndex=we),f!==se.current.containerId&&(se.current.containerId=f),p!==se.current.items&&(se.current.items=p)},[K,we,f,p]),u.useEffect(()=>{if(ie===se.current.activeId)return;if(ie!=null&&se.current.activeId==null){se.current.activeId=ie;return}const W=setTimeout(()=>{se.current.activeId=ie},50);return()=>clearTimeout(W)},[ie]),{active:O,activeIndex:h,attributes:P,data:j,rect:k,index:S,newIndex:we,items:p,isOver:D,isSorting:K,isDragging:fe,listeners:he,node:E,overIndex:b,over:$,setNodeRef:te,setActivatorNodeRef:G,setDroppableNodeRef:z,setDraggableNodeRef:Z,transform:it!=null?it:X,transition:B()};function B(){if(it||Fe&&se.current.newIndex===S)return t0;if(!(ye&&!ya(oe)||!d)&&(K||Ee))return Ln.Transition.toString({...d,property:xx})}}function s0(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}je.Down,je.Right,je.Up,je.Left;const Se={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},qd={always:{label:"",color:"#6b9b6e",bg:"#e0f0e1"},keyword:{label:"",color:"#9b6b6b",bg:"#f0e0e0"},mood:{label:"",color:"#9b7a3b",bg:"#f0ebd8"},message_mode:{label:"",color:"#6b7b9b",bg:"#e0e6f0"}};function gx({activation:e}){const t=qd[e]||qd.always;return l.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:t.color,background:t.bg},children:t.label})}const Kl=80;function l0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),o=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Kl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>o(0),i=p=>{if(p.target.closest(".drag-handle"))return;const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Kl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Kl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?o(-Kl):o(0)};return l.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:l.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[l.jsx(zr,{size:16,color:"white"}),l.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),l.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function o0({book:e,onTap:t,onDelete:n}){var p;const{attributes:r,listeners:s,setNodeRef:o,transform:a,transition:i,isDragging:c}=mx({id:String(e.id)}),d={transform:Ln.Transform.toString(a),transition:i,opacity:c?0:1};return l.jsx("div",{ref:o,style:d,className:"mb-3",children:l.jsx(l0,{onDelete:()=>n(e),children:l.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Se.bg,userSelect:"none"},children:[l.jsx("div",{...r,...s,className:"drag-handle shrink-0 cursor-grab touch-none px-1",style:{cursor:c?"grabbing":"grab"},children:l.jsx(wl,{size:18,style:{color:Se.textMuted}})}),l.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>t(e),children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:Se.text},children:e.name}),l.jsx(gx,{activation:e.activation})]}),e.folder&&l.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:Se.textMuted},children:e.folder}),e.activation==="keyword"&&((p=e.keywords)==null?void 0:p.length)>0&&l.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[e.keywords.slice(0,3).map((f,h)=>l.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(232,160,191,0.15)",color:Se.accentDark},children:f},h)),e.keywords.length>3&&l.jsxs("span",{className:"text-[10px]",style:{color:Se.textMuted},children:["+",e.keywords.length-3]})]})]}),l.jsx(us,{size:16,style:{color:Se.textMuted,flexShrink:0},onClick:()=>t(e)})]})})})}function a0({folder:e,books:t,onDelete:n,onTap:r,onReorder:s}){const[o,a]=u.useState(!0),[i,c]=u.useState(null),d=Hh(Xo(va,{activationConstraint:{distance:5}}),Xo(uu,{activationConstraint:{delay:200,tolerance:5}})),p=({active:h,over:x})=>{if(c(null),!x||h.id===x.id)return;const w=t.findIndex(g=>String(g.id)===String(h.id)),y=t.findIndex(g=>String(g.id)===String(x.id));if(w<0||y<0)return;const b=ka(t,w,y);s(e,b)},f=i?t.find(h=>String(h.id)===String(i)):null;return l.jsxs("div",{className:"mb-4",children:[l.jsxs("button",{className:"mb-2 flex w-full items-center gap-2 px-1",onClick:()=>a(!o),children:[o?l.jsx(Rr,{size:14,style:{color:Se.textMuted}}):l.jsx(us,{size:14,style:{color:Se.textMuted}}),l.jsx("span",{className:"text-[12px] font-bold tracking-wide",style:{color:Se.textMuted},children:e||""}),l.jsx("span",{className:"ml-1 rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.12)",color:Se.textMuted},children:t.length})]}),o&&l.jsxs(ax,{sensors:d,collisionDetection:Wh,onDragStart:({active:h})=>c(h.id),onDragEnd:p,children:[l.jsx(hx,{items:t.map(h=>String(h.id)),strategy:dx,children:t.map(h=>l.jsx(o0,{book:h,onTap:r,onDelete:n},h.id))}),l.jsx(cx,{children:f&&l.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Se.bg,boxShadow:"var(--card-shadow)"},children:[l.jsx("div",{className:"shrink-0 px-1",children:l.jsx(wl,{size:18,style:{color:Se.textMuted}})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:Se.text},children:f.name}),l.jsx(gx,{activation:f.activation})]}),f.folder&&l.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:Se.textMuted},children:f.folder})]}),l.jsx(us,{size:16,style:{color:Se.textMuted,flexShrink:0}})]})})]})]})}function i0(){const e=Ft(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[o,a]=u.useState(null),[i,c]=u.useState(null),d=y=>{c(y),setTimeout(()=>c(null),2e3)},p=()=>{s(!0),F("/api/world-books").then(y=>n(y.world_books||[])).catch(()=>d("")).finally(()=>s(!1))};u.useEffect(()=>{p()},[]);const f=async y=>{a(null);try{await F(`/api/world-books/${y.id}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==y.id)),d("")}catch(b){d("")}},h=(y,b)=>{const g=y||"";n(m=>[...m.filter(S=>(S.folder||"")!==g),...b]),F("/api/world-books/reorder",{method:"PUT",body:{ordered_ids:b.map(m=>m.id)}}).catch(()=>d(""))},x={};for(const y of t){const b=y.folder||"";x[b]||(x[b]=[]),x[b].push(y)}const w=Object.keys(x).sort((y,b)=>y===""?1:b===""?-1:y.localeCompare(b));return l.jsxs("div",{className:"flex h-full flex-col",style:{background:Se.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full nm-active",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(zt,{size:22,style:{color:Se.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:Se.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books/new"),children:l.jsx(xs,{size:20,style:{color:Se.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?l.jsx("div",{className:"flex items-center justify-center py-20",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-t-transparent",style:{borderColor:Se.accent,borderTopColor:"transparent"}})}):t.length===0?l.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[l.jsx(wl,{size:36,style:{color:Se.textMuted,opacity:.5}}),l.jsx("p",{className:"text-[14px]",style:{color:Se.textMuted},children:" + "})]}):w.map(y=>l.jsx(a0,{folder:y,books:x[y],onDelete:b=>a(b),onTap:b=>e(`/world-books/${b.id}`),onReorder:h},y))}),o&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>a(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Se.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:y=>y.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Se.text},children:""}),l.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Se.textMuted},children:["",o.name,""]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)",color:Se.text},onClick:()=>a(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>f(o),children:""})]})]})}),i&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const ne={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function c0({label:e,value:t,onChange:n,placeholder:r}){return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ne.textMuted},children:e}),l.jsx("input",{type:"text",value:t,onChange:s=>n(s.target.value),placeholder:r,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:ne.bg,color:ne.text}})]})}function u0({value:e,onChange:t,folders:n}){const[r,s]=u.useState(!1),o=n.filter(a=>a!==e&&a.toLowerCase().includes(e.toLowerCase()));return l.jsxs("div",{className:"relative mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ne.textMuted},children:""}),l.jsx("input",{type:"text",value:e,onChange:a=>{t(a.target.value),s(!0)},onFocus:()=>s(!0),onBlur:()=>setTimeout(()=>s(!1),150),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:ne.bg,color:ne.text}}),r&&o.length>0&&l.jsx("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[160px] overflow-y-auto rounded-[14px]",style:{background:ne.bg,boxShadow:"var(--card-shadow)"},children:o.map(a=>l.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:ne.text},onMouseDown:()=>{t(a),s(!1)},children:a},a))})]})}function d0({value:e,onChange:t}){const n=[{value:"always",label:""},{value:"keyword",label:""},{value:"mood",label:""},{value:"message_mode",label:""}];return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ne.textMuted},children:""}),l.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:ne.bg},children:n.map(r=>l.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:e===r.value?ne.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?ne.accentDark:ne.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})]})}function f0({selected:e,onChange:t}){const n=[{value:"long",label:""},{value:"short",label:""}];return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ne.textMuted},children:""}),l.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:ne.bg,minHeight:48},children:n.map(r=>{const s=e===r.value;return l.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?ne.accentDark:ne.bg,color:s?"white":ne.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>t(r.value),children:r.label},r.value)})})]})}const p0=[{value:"happy",label:""},{value:"sad",label:""},{value:"angry",label:""},{value:"anxious",label:""},{value:"tired",label:""},{value:"emo",label:""},{value:"flirty",label:""},{value:"proud",label:""},{value:"calm",label:""}];function h0({selected:e,onChange:t}){const n=r=>{e.includes(r)?t(e.filter(s=>s!==r)):t([...e,r])};return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ne.textMuted},children:""}),l.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:ne.bg,minHeight:48},children:p0.map(r=>{const s=e.includes(r.value);return l.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?ne.accentDark:ne.bg,color:s?"white":ne.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>n(r.value),children:r.label},r.value)})})]})}function x0({keywords:e,onChange:t}){const[n,r]=u.useState(""),s=()=>{const o=n.trim();if(!o||e.includes(o)){r("");return}t([...e,o]),r("")};return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ne.textMuted},children:""}),l.jsxs("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:ne.bg,minHeight:48},children:[e.map(o=>l.jsxs("span",{className:"flex items-center gap-1 rounded-full px-2.5 py-1 text-[12px] font-medium",style:{background:"rgba(232,160,191,0.2)",color:ne.accentDark},children:[o,l.jsx("button",{onClick:()=>t(e.filter(a=>a!==o)),children:l.jsx(jl,{size:10})})]},o)),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"text",value:n,onChange:o=>r(o.target.value),onKeyDown:o=>{(o.key==="Enter"||o.key===",")&&(o.preventDefault(),s())},placeholder:"...",className:"w-24 bg-transparent text-[12px] outline-none",style:{color:ne.text}}),n.trim()&&l.jsx("button",{className:"flex h-5 w-5 items-center justify-center rounded-full",style:{background:ne.accentDark},onClick:s,children:l.jsx(xs,{size:10,color:"white"})})]})]}),l.jsx("p",{className:"mt-1 text-[10px]",style:{color:ne.textMuted},children:" Enter "})]})}function m0({value:e,onChange:t,onClose:n}){return l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:ne.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:ne.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:l.jsx(or,{size:18,style:{color:ne.accentDark}})})]}),l.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:ne.bg,color:ne.text},placeholder:"..."})]})}function Jd(){const e=Ft(),{id:t}=Th(),n=!t,[r,s]=u.useState(""),[o,a]=u.useState(""),[i,c]=u.useState("always"),[d,p]=u.useState([]),[f,h]=u.useState("long"),[x,w]=u.useState(""),[y,b]=u.useState(!1),[g,m]=u.useState(!n),[v,S]=u.useState(null),[j,C]=u.useState([]),[k,E]=u.useState(!1),D=u.useRef(null),z=Y=>{var he;const P=(he=Y.target.files)==null?void 0:he[0];if(!P)return;const Z=new FileReader;Z.onload=fe=>w(fe.target.result||""),Z.readAsText(P),Y.target.value=""},O=Y=>{S(Y),setTimeout(()=>S(null),2e3)};u.useEffect(()=>{F("/api/world-books").then(Y=>{const P=Y.world_books||[];if(C([...new Set(P.map(Z=>Z.folder).filter(Boolean))]),!n){const Z=P.find(he=>String(he.id)===String(t));Z&&(s(Z.name),a(Z.folder||""),c(Z.activation),p(Z.keywords||[]),h(Z.message_mode||"long"),w(Z.content))}}).catch(()=>O("")).finally(()=>m(!1))},[t,n]);const oe=async()=>{if(!r.trim()){O("");return}b(!0);try{const Y={name:r.trim(),folder:o.trim()||null,activation:i,keywords:i==="keyword"||i==="mood"?d:[],message_mode:i==="message_mode"?f:null,content:x};n?(await F("/api/world-books",{method:"POST",body:Y}),O("")):(await F(`/api/world-books/${t}`,{method:"PUT",body:Y}),O(""))}catch(Y){O(": "+Y.message)}finally{b(!1)}};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:ne.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books",{replace:!0}),children:l.jsx(zt,{size:22,style:{color:ne.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:ne.text},children:n?"":""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ne.bg,boxShadow:y?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:oe,disabled:y,children:l.jsx(kl,{size:18,style:{color:ne.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:g?l.jsx("div",{className:"flex h-40 items-center justify-center",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:ne.accent,borderTopColor:"transparent"}})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"rounded-[20px] p-5 mb-4",style:{background:ne.bg,boxShadow:"var(--card-shadow)"},children:[l.jsx(c0,{label:"",value:r,onChange:s,placeholder:""}),l.jsx(u0,{value:o,onChange:a,folders:j}),l.jsx(d0,{value:i,onChange:c}),i==="keyword"&&l.jsx(x0,{keywords:d,onChange:p}),i==="mood"&&l.jsx(h0,{selected:d,onChange:p}),i==="message_mode"&&l.jsx(f0,{selected:f,onChange:h})]}),l.jsxs("div",{className:"rounded-[20px] p-5",style:{background:ne.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[l.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:ne.textMuted},children:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:ne.bg},onClick:()=>{var Y;return(Y=D.current)==null?void 0:Y.click()},title:"",children:l.jsx(ha,{size:13,style:{color:ne.textMuted}})}),l.jsx("input",{ref:D,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:z}),l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:ne.bg},onClick:()=>E(!0),title:"",children:l.jsx(bl,{size:13,style:{color:ne.accentDark}})})]})]}),l.jsx("textarea",{value:x,onChange:Y=>w(Y.target.value),placeholder:"...",rows:10,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:ne.bg,color:ne.text}})]})]})}),k&&l.jsx(m0,{value:x,onChange:w,onClose:()=>E(!1)}),v&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:v})})]})}const Be={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Ql=80;function g0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),o=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Ql);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>o(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Ql,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Ql)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?o(-Ql):o(0)};return l.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Be.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:l.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[l.jsx(zr,{size:16,color:"white"}),l.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),l.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function y0({assistant:e,localAvatar:t,onTap:n}){var s;const r=t||null;return l.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Be.bg,userSelect:"none"},onClick:()=>n(e),children:[l.jsx("div",{className:"shrink-0 rounded-full",style:{width:48,height:48,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Be.bg},children:r?l.jsx("img",{src:r,alt:"",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{className:"text-[20px]",style:{color:Be.accentDark},children:((s=e.name)==null?void 0:s[0])||"?"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"truncate text-[15px] font-bold",style:{color:Be.text},children:e.name}),e.created_at&&l.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:Be.textMuted},children:e.created_at.slice(0,10)})]}),l.jsx(us,{size:16,style:{color:Be.textMuted,flexShrink:0}})]})}function v0(){const e=Ft(),[t,n]=u.useState([]),[r,s]=u.useState({}),[o,a]=u.useState(!0),[i,c]=u.useState(null),[d,p]=u.useState(null),f=w=>{p(w),setTimeout(()=>p(null),2e3)},h=()=>{a(!0),F("/api/assistants").then(async w=>{const y=w.assistants||[];n(y);const b={};await Promise.all(y.map(async g=>{const m=await ms(`assistant-avatar-${g.id}`).catch(()=>null);m&&(b[g.id]=m)})),s(b)}).catch(()=>f("")).finally(()=>a(!1))};u.useEffect(()=>{h()},[]);const x=async w=>{c(null);try{await F(`/api/assistants/${w.id}`,{method:"DELETE"}),n(y=>y.filter(b=>b.id!==w.id)),f("")}catch(y){f("")}};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:Be.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Be.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(zt,{size:22,style:{color:Be.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:Be.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Be.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants/new"),children:l.jsx(xs,{size:20,style:{color:Be.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8 pt-5",children:o?l.jsx("div",{className:"flex items-center justify-center py-20",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Be.accent,borderTopColor:"transparent"}})}):t.length===0?l.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[l.jsx(Lh,{size:36,style:{color:Be.textMuted,opacity:.5}}),l.jsx("p",{className:"text-[14px]",style:{color:Be.textMuted},children:" + "})]}):t.map(w=>l.jsx(g0,{onDelete:()=>c(w),children:l.jsx(y0,{assistant:w,localAvatar:r[w.id],onTap:y=>e(`/assistants/${y.id}`)})},w.id))}),i&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>c(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Be.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:w=>w.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Be.text},children:""}),l.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Be.textMuted},children:["",i.name,""]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Be.bg,boxShadow:"var(--card-shadow-sm)",color:Be.text},onClick:()=>c(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>x(i),children:""})]})]})}),d&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:d})})]})}const M={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Zd({label:e,value:t,onChange:n,placeholder:r,rows:s,onExpand:o,onHistory:a}){const i=u.useRef(null),c=d=>{var h;const p=(h=d.target.files)==null?void 0:h[0];if(!p)return;const f=new FileReader;f.onload=x=>n(x.target.result||""),f.readAsText(p),d.target.value=""};return l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[l.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),l.jsxs("div",{className:"flex items-center gap-2",children:[a&&l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:a,children:l.jsx($h,{size:13,style:{color:M.textMuted}})}),l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var d;return(d=i.current)==null?void 0:d.click()},children:l.jsx(ha,{size:13,style:{color:M.textMuted}})}),l.jsx("input",{ref:i,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:c}),l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:o,children:l.jsx(bl,{size:13,style:{color:M.accentDark}})})]})]}),l.jsx("textarea",{value:t,onChange:d=>n(d.target.value),placeholder:r,rows:s||6,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})}function ti({label:e,value:t,onChange:n,presets:r}){const[s,o]=u.useState(!1),a=r.find(i=>i.id===t);return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text},onClick:()=>o(!s),children:[l.jsx("span",{style:{color:a?M.text:M.textMuted},children:a?a.name:""}),l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:M.textMuted,transform:s?"rotate(180deg)":"none",transition:"transform 0.2s"},children:l.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&l.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:M.bg,boxShadow:"var(--card-shadow)",zIndex:40},children:[l.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:M.textMuted},onClick:()=>{n(null),o(!1)},children:""}),r.map(i=>l.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[14px]",style:{color:M.text},onClick:()=>{n(i.id),o(!1)},children:[l.jsx("span",{children:i.name}),i.id===t&&l.jsx(Pn,{size:14,style:{color:M.accentDark}})]},i.id))]})]})]})}function ni({value:e,onChange:t,onClose:n,title:r,placeholder:s}){return l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:r||""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:l.jsx(or,{size:18,style:{color:M.accentDark}})})]}),l.jsx("textarea",{autoFocus:!0,value:e,onChange:o=>t(o.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:M.bg,color:M.text},placeholder:s||""})]})}const Gl=80;function w0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),o=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Gl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>o(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Gl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Gl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?o(-Gl):o(0)};return l.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:l.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[l.jsx(zr,{size:16,color:"white"}),l.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),l.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function b0({title:e,message:t,onConfirm:n,onCancel:r}){return l.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:r,children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:M.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:s=>s.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:M.text},children:e||""}),l.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:M.textMuted},children:t}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.text},onClick:r,children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:n,children:""})]})]})})}function k0({items:e,currentContent:t,onApply:n,onClose:r,onDelete:s}){const[o,a]=u.useState("current"),[i,c]=u.useState(null),[d,p]=u.useState(null),f=x=>x?new Date(x).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",h=async()=>{if(o==="current"){r();return}const x=e.find(w=>w.id===o);x&&await n(x.content),r()};return i?l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsxs("span",{className:"text-[15px] font-bold",style:{color:M.text},children:[" ",i.version]}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>c(null),children:l.jsx(or,{size:18,style:{color:M.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:l.jsx("div",{className:"rounded-[14px] p-4",style:{boxShadow:"var(--inset-shadow)",background:M.bg},children:l.jsx("p",{className:"whitespace-pre-wrap text-[13px] leading-relaxed",style:{color:M.text},children:i.content})})})]}):l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:r,children:l.jsx(or,{size:18,style:{color:M.accentDark}})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[l.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:o==="current"?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[l.jsx("button",{onClick:()=>a("current"),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:o==="current"?M.accentDark:M.bg,boxShadow:o==="current"?"none":"var(--icon-inset)"},children:o==="current"&&l.jsx(Pn,{size:12,color:"white"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:""}),l.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#2a9d5c",background:"rgba(42,157,92,0.12)"},children:""})]}),l.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:t})]})]}),e.length===0&&l.jsx("p",{className:"py-8 text-center text-[13px]",style:{color:M.textMuted},children:""}),e.map(x=>l.jsx("div",{className:"mb-2",children:l.jsx(w0,{onDelete:()=>p(x.id),children:l.jsxs("div",{className:"flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:o===x.id?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[l.jsx("button",{onClick:()=>a(x.id),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:o===x.id?M.accentDark:M.bg,boxShadow:o===x.id?"none":"var(--icon-inset)"},children:o===x.id&&l.jsx(Pn,{size:12,color:"white"})}),l.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>c(x),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:[" ",x.version]}),l.jsx("span",{className:"text-[10px]",style:{color:M.textMuted},children:f(x.created_at)})]}),l.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:x.content})]})]})})},x.id))]}),l.jsx("div",{className:"shrink-0 p-5",children:l.jsx("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:h,children:""})}),d&&l.jsx(b0,{message:"",onCancel:()=>p(null),onConfirm:()=>{s(d),p(null)}})]})}function yx(e){return e==="always"?"":e==="keyword"?"":e==="message_mode"?"":""}function vx(e){return!e||!Array.isArray(e)?[]:e.map((t,n)=>typeof t=="object"&&t!==null?t:{id:t,position:"after",sort_order:n})}function j0({item:e,book:t,position:n,sectionList:r,onRemove:s,onChangePosition:o}){const{attributes:a,listeners:i,setNodeRef:c,transform:d,transition:p,isDragging:f}=mx({id:String(e.id)}),h={transform:Ln.Transform.toString(d),transition:p,opacity:f?0:1};return t?l.jsxs("div",{ref:c,style:h,className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",children:[l.jsx("div",{...a,...i,className:"cursor-grab touch-none p-1",style:{cursor:f?"grabbing":"grab"},children:l.jsx(wl,{size:14,style:{color:M.textMuted}})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.text},children:t.name}),l.jsxs("div",{className:"text-[10px]",style:{color:M.textMuted},children:[yx(t.activation),t.folder?`  ${t.folder}`:""]})]}),l.jsx("button",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},onClick:()=>o(e.id,n==="before"?"after":"before"),children:n==="before"?"":""}),l.jsx("button",{onClick:()=>s(e.id),children:l.jsx(jl,{size:14,style:{color:M.textMuted}})})]}):null}function S0({allBooks:e,mountedIds:t,onClose:n,onConfirm:r}){const[s,o]=u.useState(new Set(t)),a={};e.forEach(d=>{const p=d.folder||"";a[p]||(a[p]=[]),a[p].push(d)});const i=d=>{o(p=>{const f=new Set(p);return f.has(d)?f.delete(d):f.add(d),f})},c=d=>{const p=d.every(f=>s.has(f.id));o(f=>{const h=new Set(f);return p?d.forEach(x=>h.delete(x.id)):d.forEach(x=>h.add(x.id)),h})};return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-end",style:{background:"rgba(0,0,0,0.4)"},children:l.jsxs("div",{className:"flex w-full flex-col rounded-t-[24px]",style:{background:M.bg,maxHeight:"82vh"},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between p-5 pb-3",children:[l.jsx("h3",{className:"text-[16px] font-bold",style:{color:M.text},children:""}),l.jsx("button",{onClick:n,children:l.jsx(jl,{size:20,style:{color:M.textMuted}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5",children:Object.entries(a).map(([d,p])=>{const f=p.every(h=>s.has(h.id));return l.jsxs("div",{className:"mb-5",children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[l.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:d}),l.jsx("button",{className:"rounded-full px-2.5 py-1 text-[11px] font-semibold",style:{background:f?"rgba(201,98,138,0.15)":"rgba(136,136,160,0.1)",color:f?M.accentDark:M.textMuted},onClick:()=>c(p),children:f?"":""})]}),l.jsx("div",{className:"space-y-2",children:p.map(h=>{const x=s.has(h.id);return l.jsxs("button",{className:"flex w-full items-center gap-3 rounded-[14px] p-3",style:{background:M.bg,boxShadow:x?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>i(h.id),children:[l.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:x?M.accentDark:M.bg,boxShadow:x?"none":"var(--icon-inset)"},children:x&&l.jsx(Pn,{size:12,color:"white"})}),l.jsx("div",{className:"flex-1 min-w-0 text-left",children:l.jsx("div",{className:"truncate text-[13px] font-medium",style:{color:x?M.accentDark:M.text},children:h.name})}),l.jsx("span",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},children:yx(h.activation)})]},h.id)})})]},d)})}),l.jsx("div",{className:"shrink-0 p-5",children:l.jsxs("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>r([...s]),children:[" ",s.size,""]})})]})})}function N0({ruleSetIds:e,onChange:t,allBooks:n}){const[r,s]=u.useState(!1),[o,a]=u.useState(null),i=vx(e),c=i.filter(j=>j.position==="before").sort((j,C)=>j.sort_order-C.sort_order),d=i.filter(j=>j.position==="after").sort((j,C)=>j.sort_order-C.sort_order),p=j=>n.find(C=>C.id===j||C.id===Number(j)),f=Hh(Xo(va,{activationConstraint:{distance:5}}),Xo(uu,{activationConstraint:{delay:150,tolerance:5}})),h=({active:j})=>a(j.id),x=({active:j,over:C})=>{if(!C)return;const k=i.find(D=>String(D.id)===String(j.id)),E=i.find(D=>String(D.id)===String(C.id));if(!(!k||!E)&&k.position!==E.position){const D=i.map(z=>String(z.id)===String(k.id)?{...z,position:E.position}:z);t(D)}},w=({active:j,over:C})=>{if(a(null),!C||j.id===C.id)return;const k=i.find(P=>String(P.id)===String(j.id)),E=i.find(P=>String(P.id)===String(C.id));if(!k||!E||k.position!==E.position)return;const D=k.position==="before"?[...c]:[...d],z=D.findIndex(P=>String(P.id)===String(j.id)),O=D.findIndex(P=>String(P.id)===String(C.id)),oe=ka(D,z,O).map((P,Z)=>({...P,sort_order:Z})),Y=i.filter(P=>P.position!==k.position);t([...Y,...oe])},y=j=>t(i.filter(C=>C.id!==j)),b=(j,C)=>{const E=(C==="before"?c:d).length;t(i.map(D=>D.id===j?{...D,position:C,sort_order:E}:D))},g=j=>{const C=i.map(O=>O.id),E=j.filter(O=>!C.includes(O)).map((O,oe)=>({id:O,position:"after",sort_order:d.length+oe})),D=new Set(C.filter(O=>!j.includes(O))),z=i.filter(O=>!D.has(O.id));t([...z,...E])},m=(j,C)=>j.length===0?l.jsx("div",{className:"py-3 text-center text-[12px]",style:{color:M.textMuted},children:""}):l.jsx(hx,{items:j.map(k=>String(k.id)),strategy:dx,children:l.jsx("div",{className:"rounded-[14px] px-2 pt-1",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:j.map((k,E)=>l.jsxs("div",{children:[E>0&&l.jsx("div",{className:"mx-2",style:{height:1,background:"rgba(0,0,0,0.06)"}}),l.jsx(j0,{item:k,book:p(k.id),position:C,sectionList:j,onRemove:y,onChangePosition:b})]},k.id))})}),v=o?i.find(j=>String(j.id)===String(o)):null,S=v?p(v.id):null;return l.jsxs(ax,{sensors:f,collisionDetection:Wh,onDragStart:h,onDragOver:x,onDragEnd:w,children:[l.jsxs("div",{className:"mb-1",children:[l.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(c,"before")]}),l.jsxs("div",{className:"my-4 flex items-center gap-2",children:[l.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}}),l.jsx("span",{className:"rounded-full px-3 py-1 text-[11px] font-bold",style:{background:"rgba(232,160,191,0.15)",color:M.accentDark},children:"System Prompt"}),l.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(d,"after")]}),l.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-3 text-[14px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.accentDark},onClick:()=>s(!0),children:[l.jsx(xs,{size:16})," "]}),l.jsx(cx,{children:S&&l.jsxs("div",{className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",style:{background:M.bg,boxShadow:"var(--card-shadow)",opacity:.9},children:[l.jsx(wl,{size:14,style:{color:M.textMuted}}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.accentDark},children:S.name})})]})}),r&&l.jsx(S0,{allBooks:n,mountedIds:i.map(j=>j.id),onClose:()=>s(!1),onConfirm:j=>{g(j),s(!1)}})]})}function ef(){const e=Ft(),{id:t}=Th(),n=!t,[r,s]=u.useState("basic"),[o,a]=u.useState(""),[i,c]=u.useState(""),[d,p]=u.useState(""),[f,h]=u.useState(null),[x,w]=u.useState(null),[y,b]=u.useState(null),[g,m]=u.useState(""),[v,S]=u.useState(""),[j,C]=u.useState(null),[k,E]=u.useState(null),[D,z]=u.useState([]),[O,oe]=u.useState([]),[Y,P]=u.useState([]),[Z,he]=u.useState(!1),[fe,$]=u.useState(!n),[G,T]=u.useState(null),[te,K]=u.useState(!1),[ke,ye]=u.useState(!1),[Ze,ve]=u.useState(!1),[X,we]=u.useState(null),[ie,se]=u.useState([]),Fe=u.useRef(null),Ee=u.useRef(null),it=I=>{var de;const ee=(de=I.target.files)==null?void 0:de[0];if(!ee)return;const re=new FileReader;re.onload=Ye=>p(Ye.target.result||""),re.readAsText(ee),I.target.value=""},B=I=>{T(I),setTimeout(()=>T(null),2500)},W=async I=>{const ee=I==="human"?j:k;if(!ee){B("");return}try{const re=await F(`/api/core-blocks/${ee}/history`);se(re.history||[]),we(I)}catch(re){B("")}};u.useEffect(()=>{(async()=>{const[ee,re]=await Promise.all([F("/api/presets").catch(()=>({presets:[]})),F("/api/world-books").catch(()=>({world_books:[]}))]);if(oe(ee.presets||[]),P(re.world_books||[]),n)$(!1);else try{const[de,Ye]=await Promise.all([F(`/api/assistants/${t}`),F(`/api/core-blocks?assistant_id=${t}`).catch(()=>({blocks:[]}))]);a(de.name||""),ms(`assistant-avatar-${t}`).then(He=>{He&&c(He)}).catch(function(){}),p(de.system_prompt||""),h(de.model_preset_id||null),w(de.summary_model_preset_id||null),b(de.summary_fallback_preset_id||null),z(de.rule_set_ids||[]);for(const He of Ye.blocks||[])He.block_type==="human"?(m(He.content||""),C(He.id)):He.block_type==="persona"&&(S(He.content||""),E(He.id))}catch(de){B(": "+de.message)}finally{$(!1)}})()},[t,n]);const ce=I=>{var de;const ee=(de=I.target.files)==null?void 0:de[0];if(!ee)return;const re=new FileReader;re.onload=async Ye=>{const He=Ye.target.result,On=`assistant-avatar-${t||"new"}`;try{await nc(On,He),c(He)}catch(Gt){B("")}},re.readAsDataURL(ee),I.target.value=""},q=async()=>{if(!o.trim()){B("");return}he(!0);try{const I={name:o.trim(),avatar_url:i?`assistant-avatar-${t||"new"}`:null,system_prompt:d,model_preset_id:f,summary_model_preset_id:x,summary_fallback_preset_id:y,rule_set_ids:vx(D)};let ee=t;if(n?(ee=(await F("/api/assistants",{method:"POST",body:{name:o.trim()}})).id,i&&(await nc(`assistant-avatar-${ee}`,i),I.avatar_url=`assistant-avatar-${ee}`),await F(`/api/assistants/${ee}`,{method:"PUT",body:I})):await F(`/api/assistants/${t}`,{method:"PUT",body:I}),j)await F(`/api/core-blocks/${j}`,{method:"PUT",body:{content:g}});else if(g.trim()){const re=await F("/api/core-blocks",{method:"POST",body:{block_type:"human",assistant_id:Number(ee),content:g}});C(re.id)}if(k)await F(`/api/core-blocks/${k}`,{method:"PUT",body:{content:v}});else if(v.trim()){const re=await F("/api/core-blocks",{method:"POST",body:{block_type:"persona",assistant_id:Number(ee),content:v}});E(re.id)}B("")}catch(I){B(": "+I.message)}finally{he(!1)}},ae=[{key:"basic",label:""},{key:"about",label:"Core Blocks"},{key:"books",label:""}];return l.jsxs("div",{className:"flex h-full flex-col",style:{background:M.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants",{replace:!0}),children:l.jsx(zt,{size:22,style:{color:M.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:M.text},children:n?"":""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:Z?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:q,disabled:Z,children:l.jsx(kl,{size:18,style:{color:M.accentDark}})})]}),l.jsx("div",{className:"flex shrink-0 gap-1 px-5 pb-3",children:ae.map(I=>l.jsx("button",{className:"flex-1 rounded-[12px] py-2.5 text-[13px] font-semibold transition-all",style:{background:r===I.key?M.bg:"transparent",boxShadow:r===I.key?"var(--card-shadow-sm)":"none",color:r===I.key?M.accentDark:M.textMuted},onClick:()=>s(I.key),children:I.label},I.key))}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:fe?l.jsx("div",{className:"flex h-40 items-center justify-center",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:M.accent,borderTopColor:"transparent"}})}):l.jsxs(l.Fragment,{children:[r==="basic"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-4 flex items-center gap-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var I;return(I=Fe.current)==null?void 0:I.click()},children:[l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:M.bg},children:i?l.jsx("img",{src:i,alt:"",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{className:"text-[24px]",style:{color:M.accentDark},children:(o==null?void 0:o[0])||"?"})})}),l.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:M.accentDark},children:l.jsx(Ih,{size:9,color:"white"})})]}),l.jsx("input",{ref:Fe,type:"file",accept:"image/*",className:"hidden",onChange:ce}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),l.jsx("input",{type:"text",value:o,onChange:I=>a(I.target.value),placeholder:"",className:"w-full rounded-[12px] px-4 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})]}),l.jsxs("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[l.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var I;return(I=Ee.current)==null?void 0:I.click()},title:"",children:l.jsx(ha,{size:13,style:{color:M.textMuted}})}),l.jsx("input",{ref:Ee,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:it}),l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>K(!0),title:"",children:l.jsx(bl,{size:13,style:{color:M.accentDark}})})]})]}),l.jsx("textarea",{value:d,onChange:I=>p(I.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]}),l.jsxs("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[l.jsx(ti,{label:"",value:f,onChange:h,presets:O}),l.jsx(ti,{label:"",value:x,onChange:w,presets:O}),l.jsx(ti,{label:"",value:y,onChange:b,presets:O})]})]}),r==="about"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:l.jsx(Zd,{label:"human block",value:g,onChange:m,placeholder:" AI ...",rows:7,onExpand:()=>ye(!0),onHistory:()=>W("human")})}),l.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:l.jsx(Zd,{label:"persona block",value:v,onChange:S,placeholder:"AI ...",rows:7,onExpand:()=>ve(!0),onHistory:()=>W("persona")})})]}),r==="books"&&l.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:l.jsx(N0,{ruleSetIds:D,onChange:z,allBooks:Y})})]})}),te&&l.jsx(ni,{value:d,onChange:p,onClose:()=>K(!1),title:"",placeholder:"..."}),ke&&l.jsx(ni,{value:g,onChange:m,onClose:()=>ye(!1),title:"human block",placeholder:" AI ..."}),Ze&&l.jsx(ni,{value:v,onChange:S,onClose:()=>ve(!1),title:"persona block",placeholder:"AI ..."}),X&&l.jsx(k0,{items:ie,currentContent:X==="human"?g:v,onApply:async I=>{const ee=X==="human"?j:k;try{await F(`/api/core-blocks/${ee}`,{method:"PUT",body:{content:I}}),X==="human"?m(I):S(I),B("")}catch(re){B("")}},onDelete:async I=>{try{await F(`/api/core-blocks/history/${I}`,{method:"DELETE"}),se(ee=>ee.filter(re=>re.id!==I)),B("")}catch(ee){B("")}},onClose:()=>we(null)}),G&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:G})})]})}const le={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function ri({icon:e,label:t,hint:n,onClick:r}){return l.jsxs("button",{className:"flex w-full items-center gap-4 px-4 py-4",onClick:r,children:[l.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:e}),l.jsxs("div",{className:"flex-1 text-left",children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:t}),n&&l.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:n})]}),l.jsx(us,{size:16,style:{color:le.textMuted}})]})}function tf(){return l.jsx("div",{className:"mx-4 h-px",style:{background:"rgba(136,136,160,0.15)"}})}function pr({value:e,onChange:t,min:n,max:r}){const[s,o]=u.useState(String(e));u.useEffect(()=>o(String(e)),[e]);const a=()=>{let i=parseInt(s);isNaN(i)&&(i=n),i=Math.max(n,Math.min(r,i)),o(String(i)),t(i)};return l.jsx("input",{type:"number",value:s,onChange:i=>o(i.target.value),onBlur:a,onKeyDown:i=>i.key==="Enter"&&a(),className:"w-20 rounded-[10px] py-2 text-center text-[14px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:le.bg,color:le.text},min:n,max:r})}function C0(){const e=Ft(),[t,n]=u.useState(()=>parseInt(localStorage.getItem("telegram_buffer_seconds")||"15")),[r,s]=u.useState(8),[o,a]=u.useState(8e3),[i,c]=u.useState(16e3),[d,p]=u.useState(800),[f,h]=u.useState(800),[x,w]=u.useState(2e3),[y,b]=u.useState(!1),[g,m]=u.useState(!1),[v,S]=u.useState(null),j=k=>{S(k),setTimeout(()=>S(null),2e3)};u.useEffect(()=>{F("/api/settings/context-budget").then(k=>{a(k.retain_budget),c(k.trigger_threshold),p(k.summary_budget_longterm),h(k.summary_budget_daily),w(k.summary_budget_recent),b(!0)}).catch(()=>b(!0))},[]),u.useEffect(()=>{localStorage.setItem("telegram_buffer_seconds",String(t)),F("/api/settings/buffer-seconds",{method:"PUT",body:{seconds:t}}).catch(()=>{})},[t]),u.useEffect(()=>{F("/api/settings/short-msg-max").then(k=>s(k.max_count||8)).catch(()=>{})},[]),u.useEffect(()=>{F("/api/settings/short-msg-max",{method:"PUT",body:{max_count:r}}).catch(()=>{})},[r]);const C=async()=>{m(!0);try{await F("/api/settings/context-budget",{method:"PUT",body:{retain_budget:o,trigger_threshold:i,summary_budget_longterm:d,summary_budget_daily:f,summary_budget_recent:x}}),j("")}catch(k){j("")}finally{m(!1)}};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:le.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:le.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(zt,{size:22,style:{color:le.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:le.text},children:""}),l.jsx("div",{className:"w-10"})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5 space-y-4",children:[l.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[l.jsx(ri,{icon:l.jsx(fv,{size:18,style:{color:le.text}}),label:"API ",hint:"  ",onClick:()=>e("/settings/api")}),l.jsx(tf,{}),l.jsx(ri,{icon:l.jsx(uv,{size:18,style:{color:le.textMuted}}),label:"",hint:"",onClick:()=>j("")})]}),l.jsx("div",{className:"rounded-[20px] overflow-hidden",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:l.jsx(ri,{icon:l.jsx(cv,{size:18,style:{color:le.text}}),label:"",hint:" AI ",onClick:()=>e("/settings/proactive")})}),l.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[l.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:l.jsx(xv,{size:18,style:{color:le.text}})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:" ()"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(pr,{value:t,onChange:n,min:1,max:120}),l.jsx("span",{className:"text-[12px]",style:{color:le.textMuted},children:""})]})]}),l.jsx(tf,{}),l.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[l.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:l.jsx(ov,{size:18,style:{color:le.text}})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:""})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(pr,{value:r,onChange:s,min:2,max:20}),l.jsx("span",{className:"text-[12px]",style:{color:le.textMuted},children:""})]})]})]}),l.jsxs("div",{className:"rounded-[20px] p-4",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:l.jsx(rv,{size:18,style:{color:le.text}})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:""})]})]}),y?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),l.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:" token "})]}),l.jsx(pr,{value:o,onChange:a,min:1e3,max:1e5})]}),l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),l.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),l.jsx(pr,{value:i,onChange:c,min:1e3,max:2e5})]}),l.jsx("div",{className:"h-px mb-4",style:{background:"rgba(136,136,160,0.15)"}}),l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:l.jsx(ru,{size:18,style:{color:le.text}})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:""})]})]}),l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),l.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),l.jsx(pr,{value:d,onChange:p,min:200,max:5e3})]}),l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),l.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),l.jsx(pr,{value:f,onChange:h,min:200,max:5e3})]}),l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),l.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),l.jsx(pr,{value:x,onChange:w,min:500,max:2e4})]}),l.jsx("button",{className:"w-full rounded-[14px] py-3 text-[14px] font-bold text-white",style:{background:g?"rgba(201,98,138,0.5)":"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"3px 3px 8px rgba(201,98,138,0.3)"},onClick:C,disabled:g,children:g?"...":""})]}):l.jsx("div",{className:"flex justify-center py-4",children:l.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2",style:{borderColor:le.accent,borderTopColor:"transparent"}})})]})]}),v&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:v})})]})}const U={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},E0=["claude-opus-4-6","claude-opus-4-5-20251101","claude-sonnet-4-6","claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001"];function _0(e){try{return new URL(e).hostname}catch(t){return e}}function nf({label:e,value:t,onChange:n,placeholder:r,password:s,disabled:o}){const[a,i]=u.useState(!1);return l.jsxs("div",{className:"mb-4",children:[e&&l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:U.textMuted},children:e}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:s&&!a?"password":"text",value:t,onChange:c=>n(c.target.value),placeholder:r,disabled:o,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none pr-12",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:o?U.textMuted:U.text,opacity:o?.5:1}}),s&&l.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>i(!a),children:a?l.jsx(lv,{size:16,style:{color:U.textMuted}}):l.jsx(sv,{size:16,style:{color:U.textMuted}})})]})]})}function M0({value:e,onChange:t,options:n}){return l.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:U.bg},children:n.map(r=>l.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[12px] font-semibold transition-all",style:{background:e===r.value?U.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?U.accentDark:U.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})}function T0({value:e,onChange:t,options:n,placeholder:r}){const[s,o]=u.useState(!1),a=u.useRef(null);return u.useEffect(()=>{if(!s)return;const i=c=>{a.current&&!a.current.contains(c.target)&&o(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[s]),l.jsxs("div",{className:"relative",ref:a,children:[l.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:e?U.text:U.textMuted},onClick:()=>o(!s),children:[l.jsx("span",{className:"truncate",children:e||r||""}),l.jsx(Rr,{size:16,style:{color:U.textMuted,flexShrink:0,transform:s?"rotate(180deg)":"none"}})]}),s&&l.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:U.bg,boxShadow:"var(--card-shadow)"},children:n.map(i=>l.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[13px]",style:{color:U.text},onClick:()=>{t(i),o(!1)},children:[l.jsx("span",{className:"truncate",children:i}),i===e&&l.jsx(Pn,{size:12,style:{color:U.accentDark,flexShrink:0}})]},i))})]})}function D0({value:e,onChange:t}){const[n,r]=u.useState(!1),s=u.useRef(null);return u.useEffect(()=>{if(!n)return;const o=a=>{s.current&&!s.current.contains(a.target)&&r(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[n]),l.jsxs("div",{className:"relative",ref:s,children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",placeholder:"",value:e,onChange:o=>t(o.target.value),className:"w-full rounded-[14px] px-4 py-3 pr-10 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text}}),l.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>r(!n),children:l.jsx(Rr,{size:16,style:{color:U.textMuted}})})]}),n&&l.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:U.bg,boxShadow:"var(--card-shadow)"},children:E0.map(o=>l.jsx("button",{className:"flex w-full px-4 py-3 text-left text-[13px]",style:{color:U.text},onClick:()=>{t(o),r(!1)},children:o},o))})]})}function si({value:e,onChange:t,min:n,max:r,step:s}){const[o,a]=u.useState(String(e));u.useEffect(()=>a(String(e)),[e]);const i=()=>{let c=parseFloat(o);isNaN(c)&&(c=n),c=Math.max(n,Math.min(r,c)),c=Math.round(c/s)*s,c=parseFloat(c.toFixed(4)),a(String(c)),t(c)};return l.jsx("input",{type:"number",value:o,onChange:c=>a(c.target.value),onBlur:i,onKeyDown:c=>c.key==="Enter"&&i(),step:s,min:n,max:r,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text}})}function rf({on:e,onToggle:t}){return l.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":U.bg,transition:"background 0.2s"},children:l.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function li({children:e,className:t=""}){return l.jsx("div",{className:`rounded-[20px] p-5 mb-4 space-y-4 ${t}`,style:{background:U.bg,boxShadow:"var(--card-shadow)"},children:e})}function R0(){const e=Ft(),[t,n]=u.useState([]),[r,s]=u.useState([]),[o,a]=u.useState(!0),[i,c]=u.useState(""),[d,p]=u.useState(""),[f,h]=u.useState("api_key"),[x,w]=u.useState(""),[y,b]=u.useState([]),[g,m]=u.useState(!1),[v,S]=u.useState(1),[j,C]=u.useState(!1),[k,E]=u.useState(1),[D,z]=u.useState(!1),[O,oe]=u.useState(4096),[Y,P]=u.useState(null),[Z,he]=u.useState(0),[fe,$]=u.useState(null),[G,T]=u.useState(!1),[te,K]=u.useState(!1),[ke,ye]=u.useState(""),[Ze,ve]=u.useState(!1),[X,we]=u.useState(!1),[ie,se]=u.useState(null),[Fe,Ee]=u.useState(null),[it,B]=u.useState(""),W=u.useRef(null),ce=u.useRef(!1),q=u.useRef(null),ae=u.useRef({});ae.current={baseUrl:i,apiKey:d,authType:f,modelName:x,temperature:v,tempEnabled:j,topP:k,topPEnabled:D,maxTokens:O,thinkingBudget:Z,editingPreset:Y,providers:t};const I=u.useCallback(A=>{$(A),setTimeout(()=>$(null),2500)},[]),ee=u.useCallback(async()=>{try{const[A,ge]=await Promise.all([F("/api/providers"),F("/api/presets")]);n(A.providers||[]),s(ge.presets||[])}catch(A){I(": "+A.message)}finally{a(!1)}},[I]);u.useEffect(()=>{ee()},[ee]);const re=A=>{var ue,_e;P(A),w(A.model_name),C(A.temperature!=null),S((ue=A.temperature)!=null?ue:1),z(A.top_p!=null),E((_e=A.top_p)!=null?_e:1),oe(A.max_tokens),he(A.thinking_budget||0);const ge=t.find(mt=>mt.id===A.api_provider_id);ge&&(c(ge.base_url),p(ge.api_key),h(ge.auth_type||"api_key"))},de=()=>{P(null),c(""),p(""),h("api_key"),w(""),S(1),C(!1),E(1),z(!1),oe(4096),he(0),b([])},Ye=async()=>{if(!i.trim()||!d.trim()){I(" API  Key");return}m(!0);try{const A=await fetch(`${i.trim().replace(/\/+$/,"")}/models`,{headers:{Authorization:`Bearer ${d.trim()}`}});if(!A.ok)throw new Error(`HTTP ${A.status}`);const ue=((await A.json()).data||[]).map(_e=>_e.id).sort();b(ue),I(ue.length?` ${ue.length} `:"")}catch(A){I(": "+A.message)}finally{m(!1)}},He=async()=>{var A;if(!i.trim()||!d.trim()||!x.trim()){I(" API Key ");return}T(!0);try{const ge=i.trim().replace(/\/+$/,""),ue={"Content-Type":"application/json",Authorization:`Bearer ${d.trim()}`};f==="oauth_token"&&(ue["anthropic-beta"]="claude-code-20250219,oauth-2025-04-20,fine-grained-tool-streaming-2025-05-14",ue["anthropic-dangerous-direct-browser-access"]="true",ue["x-app"]="cli");const _e=await fetch(`${ge}/chat/completions`,{method:"POST",headers:ue,body:JSON.stringify({model:x.trim(),max_tokens:10,messages:[{role:"user",content:"Hi"}]})});if(!_e.ok){const mt=await _e.json().catch(()=>({}));throw new Error(((A=mt.error)==null?void 0:A.message)||`HTTP ${_e.status}`)}I(" ")}catch(ge){I(": "+ge.message)}finally{T(!1)}},On=async A=>{const ge=ae.current,ue=ge.baseUrl.trim(),_e=ge.apiKey.trim(),mt=ge.authType,$e=A.find(ws=>ws.base_url===ue);return $e?(($e.api_key!==_e||$e.auth_type!==mt)&&await F(`/api/providers/${$e.id}`,{method:"PUT",body:{api_key:_e,auth_type:mt}}),$e.id):(await F("/api/providers",{method:"POST",body:{name:_0(ue),base_url:ue,api_key:_e,auth_type:mt}})).id},Gt=async(A,ge)=>{const ue=ae.current;if(!ue.baseUrl.trim()||!ue.apiKey.trim()||!ue.modelName.trim()){I("");return}we(!0);try{const _e=await On(ue.providers),mt={name:A,model_name:ue.modelName.trim(),temperature:ue.tempEnabled?ue.temperature:null,top_p:ue.topPEnabled?ue.topP:null,max_tokens:Number(ue.maxTokens)||4096,thinking_budget:Number(ue.thinkingBudget)||0,api_provider_id:_e};ue.editingPreset&&!ge?(await F(`/api/presets/${ue.editingPreset.id}`,{method:"PUT",body:mt}),I("")):(await F("/api/presets",{method:"POST",body:mt}),I("")),await ee()}catch(_e){I(": "+_e.message)}finally{we(!1)}},qt=()=>{const A=ke.trim();A&&(K(!1),Gt(A,Ze))},fn=()=>{Y&&Gt(Y.name,!1)},Jt=async()=>{if(ie){try{await F(`/api/presets/${ie.id}`,{method:"DELETE"}),I(""),(Y==null?void 0:Y.id)===ie.id&&de(),ee()}catch(A){I(": "+A.message)}se(null)}},pn=async()=>{const A=it.trim();if(!(!A||!Fe)){try{await F(`/api/presets/${Fe.id}`,{method:"PUT",body:{name:A}}),I(""),ee()}catch(ge){I("")}Ee(null)}},xt=(A,ge)=>{ce.current=!1;const ue=A.touches?A.touches[0]:A;q.current={x:ue.clientX,y:ue.clientY},W.current=setTimeout(()=>{ce.current=!0,se(ge)},600)},Zt=A=>{if(!q.current||!W.current)return;const ge=A.touches?A.touches[0]:A,ue=ge.clientX-q.current.x,_e=ge.clientY-q.current.y;ue*ue+_e*_e>100&&(clearTimeout(W.current),W.current=null)},ur=()=>clearTimeout(W.current);return l.jsxs("div",{className:"flex h-full flex-col",style:{background:U.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:l.jsx(zt,{size:22,style:{color:U.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:U.text},children:"API "}),l.jsx("div",{className:"w-10"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:o?l.jsx("div",{className:"flex justify-center py-20",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:U.accent,borderTopColor:"transparent"}})}):l.jsxs(l.Fragment,{children:[l.jsxs(li,{children:[l.jsx(nf,{label:"API ",value:i,onChange:c,placeholder:"https://api.openai.com/v1",disabled:f==="oauth_token"}),l.jsx(nf,{label:"API Key",value:d,onChange:p,placeholder:f==="oauth_token"?"sk-ant-oat01-...":"sk-...",password:!0}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:U.textMuted},children:""}),l.jsx(M0,{value:f,onChange:A=>{h(A),A==="oauth_token"&&c("https://api.anthropic.com/v1")},options:[{value:"api_key",label:" API Key"},{value:"oauth_token",label:"Setup Token"}]})]})]}),l.jsxs(li,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:U.textMuted},children:""}),f==="oauth_token"?l.jsx(D0,{value:x,onChange:w}):l.jsx(T0,{value:x,onChange:w,options:y})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:He,disabled:G,children:[G?l.jsx(Id,{size:14,className:"animate-spin"}):null,""]}),l.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text,opacity:f==="oauth_token"?.4:1},onClick:Ye,disabled:g||f==="oauth_token",children:[g?l.jsx(Id,{size:14,className:"animate-spin"}):l.jsx(xa,{size:14}),""]})]})]}),l.jsxs(li,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:U.text},children:" (0-2)"}),l.jsx("div",{className:"text-[11px]",style:{color:U.textMuted},children:""})]}),l.jsx(rf,{on:j,onToggle:()=>C(!j)})]}),j&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[12px]",style:{color:U.textMuted},children:""}),l.jsx(si,{value:v,onChange:S,min:0,max:2,step:.1})]}),l.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[14px] font-semibold",style:{color:U.text},children:"Top P (0-1)"}),l.jsx(rf,{on:D,onToggle:()=>z(!D)})]}),D&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[12px]",style:{color:U.textMuted},children:""}),l.jsx(si,{value:k,onChange:E,min:0,max:1,step:.05})]}),l.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[14px] font-semibold",style:{color:U.text},children:"Max Tokens"}),l.jsx(si,{value:O,onChange:oe,min:128,max:2e5,step:1})]}),l.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:U.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:U.textMuted},children:"Extended Thinking tokens"})]}),l.jsxs("select",{className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none appearance-none",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text,WebkitAppearance:"none",textAlignLast:"center"},value:Z,onChange:A=>he(Number(A.target.value)),children:[l.jsx("option",{value:0,children:""}),l.jsx("option",{value:1024,children:"1024"}),l.jsx("option",{value:2048,children:"2048"}),l.jsx("option",{value:4096,children:"4096"}),l.jsx("option",{value:8192,children:"8192"}),l.jsx("option",{value:16384,children:"16384"})]})]})]}),l.jsxs("div",{className:"mb-4 space-y-3",children:[Y?l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:fn,disabled:X,children:[l.jsx(kl,{size:14}),X?"...":""]}),l.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:()=>{ve(!0),ye(""),K(!0)},disabled:X,children:[l.jsx(nv,{size:14}),""]})]}):l.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>{ve(!0),ye(""),K(!0)},disabled:X,children:[l.jsx(xs,{size:14}),""]}),Y&&l.jsx("button",{className:"w-full py-1 text-center text-[12px]",style:{color:U.textMuted},onClick:de,children:""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"mb-3 text-[12px] font-bold uppercase tracking-wide",style:{color:U.textMuted},children:""}),r.length===0?l.jsx("div",{className:"rounded-[20px] py-8 text-center text-[13px]",style:{background:U.bg,boxShadow:"var(--card-shadow)",color:U.textMuted},children:""}):l.jsx("div",{className:"space-y-3",children:r.map(A=>{var ge,ue;return l.jsxs("div",{className:"rounded-[18px] p-4",style:{background:U.bg,boxShadow:(Y==null?void 0:Y.id)===A.id?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{ce.current||re(A)},onTouchStart:_e=>xt(_e,A),onTouchMove:Zt,onTouchEnd:ur,onMouseDown:_e=>xt(_e,A),onMouseMove:Zt,onMouseUp:ur,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-[14px] font-bold truncate",style:{color:(Y==null?void 0:Y.id)===A.id?U.accentDark:U.text},children:A.name}),l.jsx(su,{size:12,style:{color:U.textMuted,flexShrink:0,marginLeft:8}})]}),l.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:U.textMuted},children:A.model_name}),l.jsxs("div",{className:"mt-1 text-[10px] font-mono",style:{color:U.textMuted},children:["T: ",(ge=A.temperature)!=null?ge:""," | Top-P: ",(ue=A.top_p)!=null?ue:""," | Max: ",A.max_tokens,A.thinking_budget?` | Think: ${A.thinking_budget}`:""]})]},A.id)})})]})]})}),te&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>K(!1),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:U.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:A=>A.stopPropagation(),children:[l.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:U.text},children:""}),l.jsx("input",{type:"text",value:ke,onChange:A=>ye(A.target.value),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text},autoFocus:!0,onKeyDown:A=>A.key==="Enter"&&qt()}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:()=>K(!1),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:ke.trim()?"linear-gradient(135deg, var(--accent), var(--accent-dark))":"rgba(201,98,138,0.3)"},onClick:qt,disabled:!ke.trim(),children:""})]})]})}),ie&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>se(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:U.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:A=>A.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:U.text},children:""}),l.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:U.textMuted},children:["",ie.name,""]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:()=>se(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:Jt,children:""})]})]})}),Fe&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>Ee(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:U.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:A=>A.stopPropagation(),children:[l.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:U.text},children:""}),l.jsx("input",{autoFocus:!0,type:"text",value:it,onChange:A=>B(A.target.value),className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text},onKeyDown:A=>A.key==="Enter"&&pn()}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:()=>Ee(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))"},onClick:pn,children:""})]})]})}),fe&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:fe})})]})}const Ke={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function ql({on:e,onToggle:t,disabled:n}){return l.jsx("button",{onClick:()=>!n&&t(),className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":Ke.bg,transition:"background 0.2s",opacity:n?.4:1,cursor:n?"not-allowed":"pointer"},children:l.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function Ts({label:e,hint:t,value:n,onChange:r,min:s,max:o,step:a=1,disabled:i}){const[c,d]=u.useState(String(n));u.useEffect(()=>d(String(n)),[n]);const p=()=>{let f=parseFloat(c);isNaN(f)&&(f=s),f=Math.max(s,Math.min(o,f)),f=Math.round(f/a)*a,f=parseFloat(f.toFixed(a<1?1:0)),d(String(f)),r(f)};return l.jsxs("div",{className:"flex items-center justify-between",style:{opacity:i?.4:1,pointerEvents:i?"none":"auto"},children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ke.text},children:e}),t&&l.jsx("div",{className:"text-[11px]",style:{color:Ke.textMuted},children:t})]}),l.jsx("input",{type:"number",value:c,onChange:f=>d(f.target.value),onBlur:p,onKeyDown:f=>f.key==="Enter"&&p(),step:a,min:s,max:o,disabled:i,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ke.bg,color:Ke.text}})]})}function Jl({children:e}){return l.jsx("div",{className:"rounded-[20px] p-5 mb-4 space-y-4",style:{background:Ke.bg,boxShadow:"var(--card-shadow)"},children:e})}function Zl(){return l.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}})}function z0(){const e=Ft(),[t,n]=u.useState(!0),[r,s]=u.useState(!1),[o,a]=u.useState({enabled:!1,random_mode:!1,interval:30,min_gap:30,retry_enabled:!0,retry_gap:1.5,max_retries:8,voice_enabled:!1,voice_chance:30}),[i,c]=u.useState(null),d=u.useCallback(w=>{c(w),setTimeout(()=>c(null),2e3)},[]);u.useEffect(()=>{(async()=>{try{const w=await F("/api/settings/proactive");a(w)}catch(w){d(": "+w.message)}finally{n(!1)}})()},[d]);const p=async()=>{s(!0);try{await F("/api/settings/proactive",{method:"PUT",body:o}),d("")}catch(w){d(": "+w.message)}finally{s(!1)}},f=w=>a(y=>({...y,...w})),h=!o.enabled,x=o.random_mode&&o.enabled;return l.jsxs("div",{className:"flex h-full flex-col",style:{background:Ke.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ke.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:l.jsx(zt,{size:22,style:{color:Ke.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ke.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ke.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:p,disabled:r,children:l.jsx(kl,{size:18,style:{color:Ke.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:t?l.jsx("div",{className:"flex justify-center py-20",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ke.accent,borderTopColor:"transparent"}})}):l.jsxs(l.Fragment,{children:[l.jsxs(Jl,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:Ke.text},children:""}),l.jsx(ql,{on:o.enabled,onToggle:()=>f({enabled:!o.enabled})})]}),o.enabled&&l.jsxs(l.Fragment,{children:[l.jsx(Zl,{}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ke.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:Ke.textMuted},children:""})]}),l.jsx(ql,{on:o.random_mode,onToggle:()=>f({random_mode:!o.random_mode})})]})]})]}),l.jsxs(Jl,{children:[l.jsx(Ts,{label:" ()",hint:" (10-60)",value:x?10:o.interval,onChange:w=>f({interval:w}),min:10,max:60,disabled:h||x}),l.jsx(Zl,{}),l.jsx(Ts,{label:" ()",hint:" (15-120)",value:o.min_gap,onChange:w=>f({min_gap:w}),min:15,max:120,disabled:h||x})]}),l.jsxs(Jl,{children:[l.jsxs("div",{className:"flex items-center justify-between",style:{opacity:h?.4:1,pointerEvents:h?"none":"auto"},children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ke.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:Ke.textMuted},children:" = "})]}),l.jsx(ql,{on:o.retry_enabled,onToggle:()=>f({retry_enabled:!o.retry_enabled}),disabled:h})]}),o.retry_enabled&&!h&&l.jsxs(l.Fragment,{children:[l.jsx(Zl,{}),l.jsx(Ts,{label:" ()",hint:"0.5-4.0",value:o.retry_gap,onChange:w=>f({retry_gap:w}),min:.5,max:4,step:.1,disabled:x}),l.jsx(Ts,{label:"",hint:"1-15",value:o.max_retries,onChange:w=>f({max_retries:w}),min:1,max:15})]})]}),l.jsxs(Jl,{children:[l.jsxs("div",{className:"flex items-center justify-between",style:{opacity:h?.4:1,pointerEvents:h?"none":"auto"},children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ke.text},children:""}),l.jsx(ql,{on:o.voice_enabled,onToggle:()=>f({voice_enabled:!o.voice_enabled}),disabled:h})]}),o.voice_enabled&&!h&&l.jsxs(l.Fragment,{children:[l.jsx(Zl,{}),l.jsx(Ts,{label:" (%)",hint:"0-100",value:o.voice_chance,onChange:w=>f({voice_chance:w}),min:0,max:100})]})]})]})}),i&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const pe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},ja={thinking:{bg:"rgba(168,130,200,0.12)",color:"#8860c8",label:""},tool_use:{bg:"rgba(232,160,60,0.12)",color:"#b8820a",label:""},tool_result:{bg:"rgba(80,160,200,0.12)",color:"#1a7ab0",label:""},injected_memories:{bg:"rgba(80,180,120,0.12)",color:"#3a8a5f",label:""}},sf=[{key:"short",label:""},{key:"long",label:""}],P0=[{key:"happy",label:""},{key:"sad",label:""},{key:"angry",label:""},{key:"anxious",label:""},{key:"tired",label:""},{key:"emo",label:""},{key:"flirty",label:""},{key:"proud",label:""},{key:"calm",label:""}],lf=300;function fu({block_type:e}){const t=ja[e]||{bg:"rgba(136,136,160,0.1)",color:pe.textMuted,label:e};return l.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:t.bg,color:t.color},children:t.label})}function wx({content:e}){const[t,n]=u.useState(!1),r=e.length>lf;return l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:pe.text},children:r&&!t?e.slice(0,lf)+"...":e}),r&&l.jsx("div",{className:"mt-1.5 flex justify-center",children:l.jsx("button",{className:"rounded-full px-3 py-0.5 text-[11px]",style:{color:pe.accentDark,background:"rgba(232,160,191,0.12)"},onClick:s=>{s.stopPropagation(),n(!t)},children:t?"":""})})]})}function L0({block:e,cacheKey:t,translateCache:n}){const r=n.current.get(t),[s,o]=u.useState(r||null),[a,i]=u.useState(!!r),[c,d]=u.useState(!1),p=ja.thinking,f=async h=>{if(h.stopPropagation(),s){i(!a);return}d(!0);try{const x=await F("/api/cot/translate",{method:"POST",body:{text:e.content}});o(x.translated),i(!0),n.current.set(t,x.translated)}catch(x){console.error("Translation failed:",x),alert("")}finally{d(!1)}};return l.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:p.bg},children:[l.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[l.jsx(fu,{block_type:"thinking"}),l.jsx("span",{className:"flex-1"}),l.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#1a7ab0",background:"rgba(80,160,200,0.15)"},onClick:f,disabled:c,children:c?"...":a?"":""})]}),l.jsx(wx,{content:a&&s?s:e.content})]})}function I0({avatarUrl:e}){return l.jsx("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full overflow-hidden",style:{boxShadow:"var(--icon-inset)",background:pe.bg},children:e?l.jsx("img",{src:e,alt:"",className:"h-full w-full object-cover"}):l.jsx("span",{style:{fontSize:16},children:""})})}function oi(e){return e?e>=1e3?`${(e/1e3).toFixed(1)}k`:String(e):"0"}function O0(e){if(!e)return null;const t=e/1e3;return t>=100?`${Math.round(t)}s`:`${t.toFixed(1)}s`}function $0({prompt:e,completion:t,elapsedMs:n,hasToolCalls:r,cacheHit:s,totalInput:o}){if(!(e||t||n)&&!r)return null;const i=s?"rgba(220,120,160,0.12)":"rgba(80,160,120,0.12)",c=s?"#d478a0":"#3a8a5f";return l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:i,color:c},children:["",oi(e),o>0&&o!==e?`/${oi(o)}`:""]}),l.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(160,100,220,0.12)",color:"#8a5abf"},children:["",oi(t)]}),n?l.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(200,140,60,0.12)",color:"#b8820a"},children:O0(n)}):null]})}function A0(e){const t=[],n=[],r=[],s=[];for(const a of e)a.block_type==="thinking"?t.push(a):a.block_type==="tool_use"?n.push(a):a.block_type==="tool_result"?r.push(a):s.push(a);const o=[];for(let a=0;a<n.length;a++)o.push(n[a]),a<r.length&&o.push(r[a]);for(let a=n.length;a<r.length;a++)o.push(r[a]);return[...t,...o,...s]}function F0({memories:e}){const[t,n]=u.useState(!1);if(!e||e.length===0)return null;const r=ja.injected_memories;return l.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:r.bg},children:[l.jsxs("button",{className:"flex w-full items-center gap-2",onClick:()=>n(!t),children:[l.jsx(fu,{block_type:"injected_memories"}),l.jsxs("span",{className:"text-[10px] font-semibold",style:{color:r.color},children:["(",e.length,")"]}),t?l.jsx(Oh,{size:12,style:{color:r.color}}):l.jsx(Rr,{size:12,style:{color:r.color}})]}),t&&l.jsx("div",{className:"mt-2 space-y-1",children:e.map(s=>l.jsxs("p",{className:"text-[11px] leading-relaxed",style:{color:pe.text},children:[l.jsxs("span",{style:{color:r.color,fontWeight:600},children:["#",s.id]})," ",s.content]},s.id))})]})}function B0({item:e,expanded:t,onToggle:n,live:r,avatarUrl:s,translateCache:o}){const a=e.rounds.map(c=>({...c,blocks:A0(c.blocks.filter(d=>d.block_type!=="text"&&d.block_type!=="usage"))})).filter(c=>c.blocks.length>0),i=a.length>0||e.injectedMemories&&e.injectedMemories.length>0||r&&e.textPreview;return l.jsxs("div",{className:"rounded-[18px] overflow-hidden",style:{background:pe.bg},children:[l.jsxs("button",{className:"flex w-full items-center gap-3 p-4",onClick:n,children:[l.jsx(I0,{avatarUrl:s}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r&&l.jsx("span",{className:"inline-block h-3 w-3 animate-spin rounded-full border-[1.5px]",style:{borderColor:pe.accentDark,borderTopColor:"transparent"}}),e.has_tool_calls&&l.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold",style:{background:"rgba(232,160,60,0.15)",color:"#b8820a"},children:""}),l.jsx($0,{prompt:e.prompt_tokens||0,completion:e.completion_tokens||0,elapsedMs:e.elapsed_ms||0,hasToolCalls:e.has_tool_calls,cacheHit:e.cache_hit,totalInput:e.total_input||0}),l.jsx("span",{className:"text-[10px]",style:{color:pe.textMuted},children:e.created_at||""})]}),l.jsx("p",{className:"mt-0.5 truncate text-[13px]",style:{color:pe.text},children:e.preview||"()"})]}),t?l.jsx(Oh,{size:16,style:{color:pe.textMuted,flexShrink:0}}):l.jsx(Rr,{size:16,style:{color:pe.textMuted,flexShrink:0}})]}),t&&i&&l.jsxs("div",{className:"px-4 pb-4",children:[l.jsx(F0,{memories:e.injectedMemories}),a.map(c=>l.jsxs("div",{className:"mb-3",children:[a.length>1&&l.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[l.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}}),l.jsxs("span",{className:"text-[10px] font-semibold",style:{color:pe.textMuted},children:[" ",c.round_index+1]}),l.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}})]}),c.blocks.map((d,p)=>{if(d.block_type==="thinking")return l.jsx(L0,{block:d,cacheKey:`${e.request_id}:${c.round_index}:${p}`,translateCache:o},p);const f=ja[d.block_type]||{bg:"rgba(136,136,160,0.08)",color:pe.textMuted,label:d.block_type};return l.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:f.bg},children:[l.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[l.jsx(fu,{block_type:d.block_type}),d.tool_name&&l.jsx("span",{className:"text-[10px] font-mono",style:{color:f.color},children:d.tool_name})]}),l.jsx(wx,{content:d.content})]},p)})]},c.round_index)),r&&e.textPreview&&l.jsxs("div",{className:"rounded-[12px] p-3",style:{background:"rgba(232,160,191,0.08)"},children:[l.jsx("div",{className:"mb-1",children:l.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(232,160,191,0.15)",color:pe.accentDark},children:""})}),l.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:pe.text},children:e.textPreview})]})]})]})}function U0(){var G;const e=Ft(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[o,a]=u.useState(new Set),[i,c]=u.useState(()=>localStorage.getItem("chat_mode")||"long"),[d,p]=u.useState(null),[f,h]=u.useState(!1),[x,w]=u.useState(new Set),[y,b]=u.useState(null),[g,m]=u.useState(null),v=u.useRef(null),S=u.useRef(new Map),[j,C]=u.useState(null),[k,E]=u.useState(!1),D=u.useRef(null),z=u.useRef(new Set),O=u.useRef(!1),oe=u.useRef([]),[Y,P]=u.useState(()=>localStorage.getItem("whisper_token")),Z=u.useRef(null),he=()=>{s(!0),b(null),O.current=!1,F("/api/cot?limit=100").then(T=>{n(Array.isArray(T)?T:[]),O.current=!0;const te=oe.current;if(oe.current=[],te.length>0&&Z.current)for(const K of te)Z.current(K)}).catch(T=>{console.error("COT load error:",T),b(T.message||""),O.current=!0}).finally(()=>{s(!1);const T=localStorage.getItem("whisper_token");T&&T!==Y&&P(T)})};u.useEffect(()=>{he()},[]),u.useEffect(()=>{F("/api/sessions?limit=1").then(T=>{var K;const te=(K=T.sessions)==null?void 0:K[0];te!=null&&te.assistant_id&&ms(`assistant-avatar-${te.assistant_id}`).then(ke=>{ke&&m(ke)}).catch(()=>{})}).catch(()=>{})},[]),u.useEffect(()=>{F("/api/settings/mood").then(T=>C(T.mood||"calm")).catch(()=>C("calm"))},[]),u.useEffect(()=>{if(!k)return;const T=te=>{D.current&&!D.current.contains(te.target)&&E(!1)};return document.addEventListener("pointerdown",T),()=>document.removeEventListener("pointerdown",T)},[k]),u.useEffect(()=>{if(!Y){console.log("[COT WS] No token yet, waiting...");return}const te=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/cot?token=${encodeURIComponent(Y)}`;console.log("[COT WS] Connecting to",te);let K,ke,ye=!1;const Ze=()=>{if(ye)return;K=new WebSocket(te),v.current=K,K.onopen=()=>{console.log("[COT WS] Connected"),h(!0)};const ve=X=>{var it;const{type:we,request_id:ie}=X,se=B=>{const W=B.findIndex(I=>I.request_id===ie);return W>=0?[B,W]:[[{request_id:ie,created_at:new Date().toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),preview:"...",has_tool_calls:!1,rounds:[],injectedMemories:[],textPreview:""},...B],0]},Fe=(B,W)=>{const ce=B.findIndex(ae=>ae.round_index===W);if(ce>=0)return[B,ce];const q=[...B,{round_index:W,blocks:[]}];return q.sort((ae,I)=>ae.round_index-I.round_index),[q,q.findIndex(ae=>ae.round_index===W)]},Ee=B=>{z.current.has(B)||a(W=>{if(W.has(B))return W;const ce=new Set(W);return ce.add(B),ce})};if(we==="tokens_update"){n(B=>B.map(W=>W.request_id===ie?{...W,prompt_tokens:X.prompt_tokens||0,completion_tokens:X.completion_tokens||0,cache_hit:X.cache_hit||!1,total_input:X.total_input||0}:W));return}if(we==="replay_snapshot"){console.log("[COT] replay_snapshot",ie,"thinking_rounds:",(it=X.rounds)==null?void 0:it.length,"text_len:",(X.text_preview||"").length),n(B=>{let[W,ce]=se(B);W=[...W];const q={...W[ce]};if(X.rounds)for(const ae of X.rounds){if(!ae.thinking)continue;let[I,ee]=Fe([...q.rounds],ae.round_index);const re={...I[ee],blocks:[...I[ee].blocks]},de=re.blocks.findIndex(Ye=>Ye.block_type==="thinking");de>=0?ae.thinking.length>re.blocks[de].content.length&&(re.blocks[de]={...re.blocks[de],content:ae.thinking}):re.blocks.push({block_type:"thinking",content:ae.thinking,tool_name:null}),I[ee]=re,q.rounds=I}return X.text_preview&&X.text_preview.length>(q.textPreview||"").length&&(q.textPreview=X.text_preview,(!q.preview||q.preview==="...")&&(q.preview=X.text_preview.slice(0,80))),X.injected_memories&&(q.injectedMemories=X.injected_memories),X.prompt_tokens&&(q.prompt_tokens=X.prompt_tokens),X.completion_tokens&&(q.completion_tokens=X.completion_tokens),X.cache_hit&&(q.cache_hit=X.cache_hit),X.total_input&&(q.total_input=X.total_input),W[ce]=q,W}),w(B=>new Set(B).add(ie)),Ee(ie);return}if(we==="done"){w(B=>{const W=new Set(B);return W.delete(ie),W}),z.current.delete(ie),n(B=>B.map(W=>W.request_id===ie?{...W,prompt_tokens:X.prompt_tokens||0,completion_tokens:X.completion_tokens||0,elapsed_ms:X.elapsed_ms||0,cache_hit:X.cache_hit||!1,total_input:X.total_input||0,textPreview:""}:W));return}if(we==="injected_memories"){n(B=>{let[W,ce]=se(B);return W=[...W],W[ce]={...W[ce],injectedMemories:X.memories||[]},W}),w(B=>new Set(B).add(ie)),Ee(ie);return}if(we==="thinking_delta"){n(B=>{let[W,ce]=se(B);W=[...W];const q={...W[ce]};let[ae,I]=Fe([...q.rounds],X.round_index);const ee={...ae[I],blocks:[...ae[I].blocks]};let re=-1;for(let de=ee.blocks.length-1;de>=0;de--)if(ee.blocks[de].block_type==="thinking"){re=de;break}return re>=0?ee.blocks[re]={...ee.blocks[re],content:ee.blocks[re].content+X.content}:ee.blocks.push({block_type:"thinking",content:X.content,tool_name:null}),ae[I]=ee,q.rounds=ae,W[ce]=q,W}),w(B=>new Set(B).add(ie)),Ee(ie);return}if(we==="text_delta"){n(B=>{let[W,ce]=se(B);W=[...W];const q={...W[ce]};return q.textPreview=(q.textPreview||"")+X.content,(!q.preview||q.preview==="...")&&(q.preview=q.textPreview.slice(0,80)),W[ce]=q,W}),w(B=>new Set(B).add(ie)),Ee(ie);return}if(we==="tool_use"||we==="tool_result"){n(B=>{let[W,ce]=se(B);W=[...W];const q={...W[ce]};let[ae,I]=Fe([...q.rounds],X.round_index);return ae[I]={...ae[I],blocks:[...ae[I].blocks,{block_type:we,content:X.content,tool_name:X.tool_name}]},q.rounds=ae,we==="tool_use"&&(q.has_tool_calls=!0),W[ce]=q,W}),w(B=>new Set(B).add(ie)),Ee(ie);return}if(X.block_type){const{round_index:B,block_type:W,content:ce,tool_name:q}=X;n(ae=>{let[I,ee]=se(ae);I=[...I];const re={...I[ee]};let[de,Ye]=Fe([...re.rounds],B);return de[Ye]={...de[Ye],blocks:[...de[Ye].blocks,{block_type:W,content:ce,tool_name:q}]},re.rounds=de,W==="tool_use"&&(re.has_tool_calls=!0),W==="text"&&(!re.preview||re.preview==="...")&&(re.preview=ce.slice(0,80)),I[ee]=re,I}),w(ae=>new Set(ae).add(ie)),Ee(ie)}};Z.current=ve,K.onmessage=X=>{try{const we=JSON.parse(X.data);if(!O.current){oe.current.push(we);return}ve(we)}catch(we){}},K.onclose=X=>{console.log("[COT WS] Disconnected, code:",X.code,"reason:",X.reason),h(!1),v.current=null,ye||(ke=setTimeout(Ze,3e3))},K.onerror=X=>{console.error("[COT WS] Error:",X),K.close()}};return Ze(),()=>{ye=!0,clearTimeout(ke),v.current&&(v.current.onclose=null,v.current.close())}},[Y]);const fe=u.useRef(!0);u.useEffect(()=>{if(fe.current){fe.current=!1;return}localStorage.setItem("chat_mode",i);const T=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({...T,shortMode:i==="short"})),F("/api/settings/chat-mode",{method:"PUT",body:{mode:i}}).catch(()=>{})},[i]);const $=T=>{C(T),E(!1),F("/api/settings/mood",{method:"PUT",body:{mood:T}}).catch(()=>{})};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:pe.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(zt,{size:22,style:{color:pe.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:pe.text},children:"COT "}),l.jsxs("div",{className:"flex items-center gap-2",children:[f&&l.jsx("div",{className:"h-2 w-2 rounded-full",style:{background:"#2a9d5c"},title:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:pe.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:he,disabled:r,children:l.jsx(xa,{size:16,style:{color:pe.accentDark},className:r?"animate-spin":""})})]})]}),l.jsx("div",{className:"shrink-0 pb-3",style:{paddingLeft:20,paddingRight:20},children:l.jsxs("div",{className:"flex items-stretch gap-4 justify-center",children:[l.jsxs("div",{className:"relative flex",ref:D,children:[l.jsx("button",{className:"flex w-[42px] shrink-0 items-center justify-center rounded-[14px]",style:{background:pe.bg,boxShadow:"var(--inset-shadow)"},onClick:()=>j&&E(!k),children:j?l.jsx("img",{src:`/miniapp/assets/mood/${j}.png`,alt:j,className:"h-6 w-6",style:{imageRendering:"pixelated"}}):l.jsx("div",{className:"h-6 w-6"})}),k&&l.jsx("div",{className:"absolute left-0 top-12 z-50 rounded-[16px] overflow-hidden",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)",width:174},children:P0.map((T,te)=>{const K=Math.floor(te/3),ke=te%3,ye=j===T.key;return l.jsxs("button",{className:"inline-flex flex-col items-center justify-center",style:{width:"calc(100% / 3)",padding:"8px 0 6px",background:ye?"rgba(232,160,191,0.18)":"transparent",boxShadow:[ke<2?"inset -1px 0 0 rgba(136,136,160,0.12)":"",K<2?"inset 0 -1px 0 rgba(136,136,160,0.12)":""].filter(Boolean).join(", ")||"none"},onClick:()=>$(T.key),children:[l.jsx("img",{src:`/miniapp/assets/mood/${T.key}.png`,alt:T.label,className:"h-7 w-7",style:{imageRendering:"pixelated",filter:ye?"drop-shadow(0 0 3px #e8a0bf)":"none"}}),l.jsx("span",{className:"text-[10px] mt-0.5",style:{color:ye?"#d48aab":pe.textMuted},children:T.label})]},T.key)})})]}),l.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:pe.bg,width:160},children:sf.map(T=>l.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:i===T.key?pe.bg:"transparent",boxShadow:i===T.key?"var(--card-shadow-sm)":"none",color:i===T.key?pe.accentDark:pe.textMuted},onClick:()=>{T.key!==i&&p(T.key)},children:T.label},T.key))})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8 pt-5",children:r?l.jsx("div",{className:"flex justify-center py-16",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:pe.accent,borderTopColor:"transparent"}})}):y?l.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[l.jsx(Ld,{size:36,style:{color:"#ef4444",opacity:.5}}),l.jsx("p",{className:"text-[14px]",style:{color:"#ef4444"},children:y})]}):t.length===0?l.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[l.jsx(Ld,{size:36,style:{color:pe.textMuted,opacity:.5}}),l.jsx("p",{className:"text-[14px]",style:{color:pe.textMuted},children:" COT "})]}):t.map(T=>l.jsx("div",{className:"mb-3 rounded-[18px]",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)"},children:l.jsx(B0,{item:T,expanded:o.has(T.request_id),onToggle:()=>{a(te=>{const K=new Set(te);return K.has(T.request_id)?(K.delete(T.request_id),z.current.add(T.request_id)):(K.add(T.request_id),z.current.delete(T.request_id)),K})},live:x.has(T.request_id),avatarUrl:g,translateCache:S})},T.request_id))}),d&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>p(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:pe.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:T=>T.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:pe.text},children:""}),l.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:pe.textMuted},children:["",((G=sf.find(T=>T.key===d))==null?void 0:G.label)||d,""]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)",color:pe.text},onClick:()=>p(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:pe.accentDark,boxShadow:"4px 4px 10px rgba(201,98,138,0.4)"},onClick:()=>{c(d),p(null)},children:""})]})]})})]})}const et={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},eo=80;function H0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),o=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/eo);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>o(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-eo,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/eo)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?o(-eo):o(0)};return l.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:et.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:l.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[l.jsx(zr,{size:16,color:"white"}),l.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),l.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function W0({msg:e,roleLabel:t,roleColor:n,fmtTime:r,onDelete:s}){const[o,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);return u.useLayoutEffect(()=>{const p=d.current;p&&!o&&c(p.scrollHeight>p.clientHeight+1)},[e.content,o]),l.jsx(H0,{onDelete:s,children:l.jsxs("div",{className:"rounded-[18px] p-3",style:{background:et.bg},children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:"text-[11px] font-semibold",style:{color:n(e.role)},children:t(e.role)}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[e.summarized&&l.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px] font-semibold",style:{background:"rgba(58,138,95,0.15)",color:"#2d7a4a"},children:""}),l.jsx("span",{className:"text-[10px]",style:{color:et.textMuted},children:r(e.created_at)})]})]}),l.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:o?{color:et.text}:{color:et.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!o),children:e.content}),(i||o)&&l.jsx("div",{className:"mt-1 flex justify-center",children:l.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:"#d48aab",background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!o)},children:o?"":""})})]})})}function V0(){const e=Ft(),[t,n]=u.useState([]),[r,s]=u.useState(null),[o,a]=u.useState(!0),[i,c]=u.useState(!1),d=async()=>{var y;a(!0);try{const g=(y=(await F("/api/sessions?limit=1")).sessions)==null?void 0:y[0];if(!g){a(!1);return}s(g.id);const m=await F(`/api/sessions/${g.id}/messages?limit=50`);n((m.messages||[]).reverse()),c(m.has_more||!1)}catch(b){console.error(b)}a(!1)};u.useEffect(()=>{d()},[]);const p=async y=>{if(r)try{await F(`/api/sessions/${r}/messages/${y}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==y))}catch(b){console.error("Delete failed",b)}},f=async()=>{if(!r||!i||o)return;const y=t[t.length-1];if(y){a(!0);try{const b=await F(`/api/sessions/${r}/messages?limit=50&before_id=${y.id}`),g=(b.messages||[]).reverse();n(m=>[...m,...g]),c(b.has_more||!1)}catch(b){console.error(b)}a(!1)}},h=y=>{if(!y)return"";const b=new Date(y),g=new Date;return b.toDateString()===g.toDateString()?b.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):b.toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})},x=y=>y==="user"?"":y==="assistant"?"AI":"",w=y=>y==="user"?et.accentDark:y==="assistant"?"#3a9b5c":et.textMuted;return l.jsxs("div",{className:"flex h-full flex-col",style:{background:et.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:et.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(zt,{size:22,style:{color:et.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:et.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:et.bg,boxShadow:o?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:d,disabled:o,children:l.jsx(xa,{size:16,style:{color:et.accentDark},className:o?"animate-spin":""})})]}),l.jsx("div",{className:"shrink-0 px-5 pb-2",children:l.jsx("p",{className:"text-[11px]",style:{color:et.textMuted},children:""})}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:o&&t.length===0?l.jsx("div",{className:"flex justify-center py-16",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:et.accent,borderTopColor:"transparent"}})}):t.length===0?l.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:et.textMuted},children:""}):l.jsxs(l.Fragment,{children:[t.map(y=>l.jsx(W0,{msg:y,roleLabel:x,roleColor:w,fmtTime:h,onDelete:()=>p(y.id)},y.id)),i&&l.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:et.bg,boxShadow:"var(--card-shadow-sm)",color:et.accentDark},onClick:f,disabled:o,children:o?"...":""})]})})]})}const _={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},X0=[{key:"memories",label:""},{key:"summaries",label:""},{key:"messages",label:""}],of={identity:{color:"#7b5ea7",bg:"#ede4f7"},relationship:{color:"#c26a8a",bg:"#f7e0ea"},bond:{color:"#d48aab",bg:"#fce8f0"},conflict:{color:"#b5454a",bg:"#f5dede"},fact:{color:"#4a8ab5",bg:"#deedf5"},preference:{color:"#9b7a3b",bg:"#f0ebd8"},health:{color:"#4a9b6e",bg:"#ddf0e5"},task:{color:"#6b7b9b",bg:"#e0e6f0"},ephemeral:{color:"#9b9b9b",bg:"#ececec"},other:{color:"#8a7a6a",bg:"#efe8df"}},bx=[{value:"",label:""},{value:"identity",label:"identity"},{value:"relationship",label:"relationship"},{value:"bond",label:"bond"},{value:"conflict",label:"conflict"},{value:"fact",label:"fact"},{value:"preference",label:"preference"},{value:"health",label:"health"},{value:"task",label:"task"},{value:"ephemeral",label:"ephemeral"},{value:"other",label:"other"}],Y0=[{value:"",label:""},{value:"sad",label:"sad"},{value:"angry",label:"angry"},{value:"anxious",label:"anxious"},{value:"tired",label:"tired"},{value:"emo",label:"emo"},{value:"happy",label:"happy"},{value:"flirty",label:"flirty"},{value:"proud",label:"proud"},{value:"calm",label:"calm"}],K0=[{value:"",label:""},{value:"user",label:""},{value:"assistant",label:""},{value:"system",label:""}];function mr(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),o=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?o:`${t.getMonth()+1}/${t.getDate()} ${o}`}function pu({text:e,keyword:t}){if(!t||!e)return l.jsx(l.Fragment,{children:e});const n=e.toLowerCase(),r=t.toLowerCase(),s=[];let o=0,a=n.indexOf(r,o);for(;a!==-1;)a>o&&s.push(l.jsx("span",{children:e.slice(o,a)},o)),s.push(l.jsx("span",{style:{color:_.accentDark,fontWeight:600},children:e.slice(a,a+r.length)},`h${a}`)),o=a+r.length,a=n.indexOf(r,o);return o<e.length&&s.push(l.jsx("span",{children:e.slice(o)},o)),l.jsx(l.Fragment,{children:s})}function kx({selected:e}){return l.jsx("div",{className:"flex h-5 w-5 shrink-0 items-center justify-center rounded-full",style:e?{background:_.accentDark,boxShadow:"0 2px 6px rgba(201,98,138,0.3)"}:{background:_.bg,boxShadow:"var(--inset-shadow)"},children:e&&l.jsx(Pn,{size:12,color:"white",strokeWidth:3})})}function jx({title:e="",message:t,confirmLabel:n="",confirmColor:r="#ff4d6d",onConfirm:s,onCancel:o}){return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:o,children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:_.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:a=>a.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:_.text},children:e}),l.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:_.textMuted},children:t}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.text},onClick:o,children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:r,boxShadow:`4px 4px 10px ${r}66`},onClick:s,children:n})]})]})})}function Q0({label:e,rawIds:t,dailyGroups:n}){const[r,s]=u.useState(!1),o=u.useRef(null);return u.useEffect(()=>{if(!r)return;const a=i=>{o.current&&!o.current.contains(i.target)&&s(!1)};return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}},[r]),l.jsxs("span",{className:"relative inline-flex items-center",ref:o,children:[l.jsx("span",{className:"inline-block rounded-full px-1.5 py-0.5 text-[9px] font-medium cursor-pointer",style:{background:"rgba(232,160,100,0.15)",color:"#c47a30"},onClick:a=>{a.stopPropagation(),s(!r)},children:e}),r&&l.jsxs("div",{className:"absolute left-0 top-full mt-1 z-30 rounded-[10px] p-2.5 min-w-[140px] max-w-[220px]",style:{background:_.bg,boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},onClick:a=>a.stopPropagation(),children:[t.length>0&&l.jsxs("div",{className:"mb-1.5",children:[l.jsx("p",{className:"text-[10px] font-semibold mb-0.5",style:{color:_.text},children:""}),l.jsx("p",{className:"text-[9px] leading-relaxed",style:{color:_.textMuted},children:t.map(a=>`#${a}`).join(", ")})]}),n.map((a,i)=>l.jsxs("div",{className:i>0||t.length>0?"mt-1.5":"",children:[l.jsxs("p",{className:"text-[10px] font-semibold mb-0.5",style:{color:_.text},children:[" daily v",a.version]}),l.jsx("p",{className:"text-[9px] leading-relaxed",style:{color:_.textMuted},children:a.ids.map(c=>`#${c}`).join(", ")})]},i))]})]})}function G0({items:e,onApply:t,onClose:n,onDelete:r}){var h;const[s,o]=u.useState(null),[a,i]=u.useState(null),[c,d]=u.useState(null),p=x=>x?new Date(x).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",f=async()=>{if(!s)return;const x=e.find(w=>w.id===s);x&&await t(x),n()};return a?l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:_.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsxs("span",{className:"text-[15px] font-bold",style:{color:_.text},children:["v",a.version]}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>i(null),children:l.jsx(or,{size:18,style:{color:_.accentDark}})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:[((h=a.merged_summary_ids)==null?void 0:h.length)>0&&l.jsxs("p",{className:"mb-2 text-[11px]",style:{color:_.textMuted},children:[": ",a.merged_summary_ids.map(x=>`#${x}`).join(", ")]}),l.jsx("div",{className:"rounded-[14px] p-4",style:{boxShadow:"var(--inset-shadow)",background:_.bg},children:l.jsx("p",{className:"whitespace-pre-wrap text-[13px] leading-relaxed",style:{color:_.text},children:a.content})})]})]}):l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:_.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:_.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:l.jsx(or,{size:18,style:{color:_.accentDark}})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[e.length===0&&l.jsx("p",{className:"py-8 text-center text-[13px]",style:{color:_.textMuted},children:""}),e.map(x=>{var w;return l.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:s===x.id?"var(--inset-shadow)":"var(--card-shadow-sm)",background:_.bg},children:[x.is_current?l.jsx("span",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:_.accentDark},children:l.jsx(Pn,{size:12,color:"white"})}):l.jsx("button",{onClick:()=>o(x.id),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:s===x.id?_.accentDark:_.bg,boxShadow:s===x.id?"none":"var(--icon-inset)"},children:s===x.id&&l.jsx(Pn,{size:12,color:"white"})}),l.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>i(x),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsxs("span",{className:"text-[13px] font-semibold",style:{color:_.text},children:["v",x.version]}),x.is_current&&l.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-medium",style:{background:"rgba(155,120,200,0.12)",color:"#8b6abf"},children:""})]}),l.jsx("span",{className:"text-[10px]",style:{color:_.textMuted},children:p(x.created_at)})]}),l.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:_.textMuted},children:x.content}),((w=x.merged_summary_ids)==null?void 0:w.length)>0&&l.jsxs("p",{className:"mt-0.5 text-[10px]",style:{color:_.accent},children:[": ",x.merged_summary_ids.map(y=>`#${y}`).join(", ")]})]}),!x.is_current&&l.jsx("button",{onClick:()=>d(x.id),className:"flex h-5 w-5 shrink-0 items-center justify-center rounded-full",style:{color:"#ccc"},children:l.jsx(zr,{size:11})})]},x.id)})]}),l.jsx("div",{className:"shrink-0 p-5",children:l.jsx("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:s?"linear-gradient(135deg, var(--accent), var(--accent-dark))":"#ccc",boxShadow:s?"4px 4px 10px rgba(201,98,138,0.35)":"none"},onClick:f,disabled:!s,children:""})}),c&&l.jsx(jx,{message:"",onCancel:()=>d(null),onConfirm:()=>{r(c),d(null)}})]})}function af({initialText:e,onSave:t,onCancel:n,memoryData:r}){var h;const[s,o]=u.useState(e),[a,i]=u.useState((r==null?void 0:r.klass)||"other"),[c,d]=u.useState((((h=r==null?void 0:r.tags)==null?void 0:h.topic)||[]).join(", ")),p=!!r,f=bx.filter(x=>x.value);return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:l.jsxs("div",{className:"mx-5 w-full max-w-[340px] rounded-[18px] p-4",style:{background:_.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:x=>x.stopPropagation(),children:[l.jsx("textarea",{className:"w-full rounded-[12px] p-3 text-[12px] leading-relaxed resize-none outline-none overflow-y-auto thin-scrollbar",style:{background:_.bg,boxShadow:"var(--inset-shadow)",color:_.text,minHeight:p?100:140,maxHeight:280},value:s,onChange:x=>o(x.target.value),autoFocus:!0}),p&&l.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:_.textMuted},children:""}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("select",{className:"w-full appearance-none rounded-[10px] px-3 py-1.5 text-[11px] font-medium outline-none",style:{background:_.bg,boxShadow:"var(--inset-shadow)",color:_.text,WebkitAppearance:"none"},value:a,onChange:x=>i(x.target.value),children:f.map(x=>l.jsx("option",{value:x.value,children:x.label},x.value))}),l.jsx(Rr,{size:10,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2",style:{color:_.textMuted}})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:_.textMuted},children:""}),l.jsx("input",{className:"flex-1 rounded-[10px] px-3 py-1.5 text-[11px] outline-none",style:{background:_.bg,boxShadow:"var(--inset-shadow)",color:_.text},placeholder:", ",value:c,onChange:x=>d(x.target.value)})]})]}),l.jsxs("div",{className:"mt-3 flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.textMuted},onClick:n,children:""}),l.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.accentDark},onClick:()=>{if(p){const x=c.split(/[,]/).map(w=>w.trim()).filter(Boolean);t(s,a,{topic:x})}else t(s)},disabled:!s.trim(),children:""})]})]})})}function cf({value:e,rawValue:t,onChange:n,options:r,width:s,active:o}){var p;const[a,i]=u.useState(!1),c=u.useRef(null);u.useEffect(()=>{if(!a)return;const f=h=>{c.current&&!c.current.contains(h.target)&&i(!1)};return document.addEventListener("mousedown",f),document.addEventListener("touchstart",f),()=>{document.removeEventListener("mousedown",f),document.removeEventListener("touchstart",f)}},[a]);const d=((p=r.find(f=>f.value===String(t)))==null?void 0:p.label)||e||"";return l.jsxs("div",{className:"relative",style:{width:s},ref:c,children:[l.jsxs("button",{className:"flex w-full items-center justify-between rounded-[12px] px-2.5 py-2 text-[11px] font-medium text-left",style:{boxShadow:"var(--card-shadow-sm)",background:_.bg,color:o?_.accentDark:_.text},onClick:()=>i(!a),children:[l.jsx("span",{className:"truncate flex-1",children:d}),l.jsx(Rr,{size:10,style:{color:_.textMuted,flexShrink:0,marginLeft:2,transform:a?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),a&&l.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[12px]",style:{background:_.bg,boxShadow:"var(--card-shadow)"},children:r.map(f=>l.jsxs("button",{className:"flex w-full items-center justify-between px-3 py-2 text-[11px]",style:{color:_.text},onClick:()=>{n(f.value),i(!1)},children:[l.jsx("span",{className:"truncate",children:f.label}),String(t)===f.value&&l.jsx(Pn,{size:10,style:{color:_.accentDark,flexShrink:0}})]},f.value))})]})}function uf({children:e,time:t,badge:n,keyword:r,onEdit:s,selectMode:o,selected:a,onToggle:i,onLongPress:c}){const[d,p]=u.useState(!1),[f,h]=u.useState(!1),x=u.useRef(null),w=typeof e=="string"?e:"",y=u.useRef(null),b=u.useRef(!1),g=u.useRef(null);u.useLayoutEffect(()=>{const C=x.current;C&&!d&&h(C.scrollHeight>C.clientHeight+1)},[w,d]);const m=C=>{if(o)return;const k=C.touches[0];g.current={x:k.clientX,y:k.clientY},b.current=!1,y.current=setTimeout(()=>{b.current=!0,c==null||c()},600)},v=C=>{if(!g.current||!y.current)return;const k=C.touches[0],E=k.clientX-g.current.x,D=k.clientY-g.current.y;E*E+D*D>100&&(clearTimeout(y.current),y.current=null)},S=()=>{clearTimeout(y.current)},j=()=>{if(!b.current&&o){i==null||i();return}};return l.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:m,onTouchMove:v,onTouchEnd:S,onTouchCancel:S,onClick:j,children:[o&&l.jsx("div",{className:"mt-1",children:l.jsx(kx,{selected:a})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-start justify-between gap-1",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[n,l.jsx("div",{ref:x,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:d?{color:_.text}:{color:_.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:C=>{o||(C.stopPropagation(),p(!d))},children:l.jsx(pu,{text:w,keyword:r})})]}),!o&&s&&l.jsx("button",{className:"mt-0.5 flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:C=>{C.stopPropagation(),s()},children:l.jsx(su,{size:11,style:{color:_.accentDark}})})]}),l.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[l.jsx("span",{className:"text-[10px]",style:{color:_.textMuted},children:t||""}),!o&&(f||d)&&l.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:_.accentDark,background:"rgba(232,160,191,0.1)"},onClick:C=>{C.stopPropagation(),p(!d)},children:d?"":""})]})]})]})}function q0({content:e,deletedAt:t,keyword:n,onRestore:r,onPermanentDelete:s}){const[o,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);return u.useLayoutEffect(()=>{const p=d.current;p&&!o&&c(p.scrollHeight>p.clientHeight+1)},[e,o]),l.jsxs("div",{className:"mb-2 rounded-[14px] p-3",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",opacity:.75},children:[l.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:o?{color:_.text}:{color:_.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!o),children:l.jsx(pu,{text:e,keyword:n})}),(i||o)&&l.jsx("div",{className:"mt-1 flex justify-center",children:l.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:_.accentDark,background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!o)},children:o?"":""})}),l.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[l.jsx("span",{className:"text-[10px]",style:{color:_.textMuted},children:t?(()=>{const p=Math.max(0,30-Math.floor((Date.now()-new Date(t).getTime())/864e5));return` ${mr(t)}  ${p}`})():""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(59,130,246,0.1)",color:"#3b82f6"},onClick:r,children:""}),l.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(239,68,68,0.1)",color:"#ef4444"},onClick:s,children:""})]})]})]})}function J0({msg:e,keyword:t,roleLabel:n,roleColor:r,selectMode:s,selected:o,onToggle:a,onLongPress:i}){const[c,d]=u.useState(!1),[p,f]=u.useState(!1),h=u.useRef(null),x=u.useRef(null),w=u.useRef(!1),y=u.useRef(null);u.useLayoutEffect(()=>{const S=h.current;S&&!c&&f(S.scrollHeight>S.clientHeight+1)},[e.content,c]);const b=S=>{if(s)return;const j=S.touches[0];y.current={x:j.clientX,y:j.clientY},w.current=!1,x.current=setTimeout(()=>{w.current=!0,i==null||i()},600)},g=S=>{if(!y.current||!x.current)return;const j=S.touches[0],C=j.clientX-y.current.x,k=j.clientY-y.current.y;C*C+k*k>100&&(clearTimeout(x.current),x.current=null)},m=()=>{clearTimeout(x.current)},v=()=>{if(!w.current&&s){a==null||a();return}};return l.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:b,onTouchMove:g,onTouchEnd:m,onTouchCancel:m,onClick:v,children:[s&&l.jsx("div",{className:"mt-1",children:l.jsx(kx,{selected:o})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-[11px] font-semibold",style:{color:r(e.role)},children:n(e.role)}),e.summary_group_id&&l.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-medium",style:{background:"rgba(74,138,181,0.1)",color:"#4a8ab5"},children:["",e.summary_group_id]})]}),l.jsx("span",{className:"text-[10px]",style:{color:_.textMuted},children:mr(e.created_at)})]}),l.jsx("div",{ref:h,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:c?{color:_.text}:{color:_.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:S=>{s||(S.stopPropagation(),d(!c))},children:l.jsx(pu,{text:e.content,keyword:t})}),!s&&(p||c)&&l.jsx("div",{className:"mt-1 flex justify-center",children:l.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:_.accentDark,background:"rgba(232,160,191,0.1)"},onClick:S=>{S.stopPropagation(),d(!c)},children:c?"":""})})]})]})}function Z0(){var hu;const e=Ft(),[t,n]=u.useState("memories"),[r,s]=u.useState(!1),[o,a]=u.useState(!1),[i,c]=u.useState(null),[d,p]=u.useState([]),[f,h]=u.useState(null),[x,w]=u.useState(""),[y,b]=u.useState(null),[g,m]=u.useState(null),[v,S]=u.useState(""),[j,C]=u.useState(""),[k,E]=u.useState(""),[D,z]=u.useState(!1),[O,oe]=u.useState(new Set),[Y,P]=u.useState([]),[Z,he]=u.useState([]),[fe,$]=u.useState([]),[G,T]=u.useState([]),[te,K]=u.useState([]),[ke,ye]=u.useState({longterm:null,daily:null}),[Ze,ve]=u.useState(!1),[X,we]=u.useState(null),[ie,se]=u.useState(null),[Fe,Ee]=u.useState(!1),[it,B]=u.useState(null),[W,ce]=u.useState(null),[q,ae]=u.useState(!0),[I,ee]=u.useState(!1),[re,de]=u.useState(!1),[Ye,He]=u.useState(!1),On=u.useRef(null);u.useEffect(()=>{var N;z(!1),oe(new Set),(N=On.current)==null||N.scrollTo(0,0)},[t,r,o]);const Gt=()=>{ve(!0),F("/api/settings/summary-layers").then(N=>ye({longterm:N.longterm,daily:N.daily})).catch(N=>console.error(N)).finally(()=>ve(!1))};u.useEffect(()=>{t!=="messages"||!r||Gt()},[t,r]);const qt=async N=>{try{const L=await F(`/api/settings/summary-layers/${N}/history`),H=ke[N],V=L.history||[];H&&V.unshift({id:"__current__",version:H.version||1,content:H.content||"",merged_summary_ids:null,created_at:H.updated_at||null,is_current:!0}),se({type:N,items:V})}catch(L){}},fn=async()=>{try{const N=await F("/api/settings/summary-layers/flush-status");ce({...N,grayClicks:0})}catch(N){B(""),setTimeout(()=>B(null),3e3)}},Jt=async(N=!1)=>{var H,V;ce(null),Ee(!0),B(null);let L=!1;try{const Pe="/api/settings/summary-layers/flush"+(N?"?force=true":""),ct=await F(Pe,{method:"POST"}),jn=[];if(ct.flushed&&jn.push(` ${ct.flushed} `),(H=ct.merge_triggered)!=null&&H.length){L=!0,B("...");for(let Sn=0;Sn<40;Sn++){await new Promise(vt=>setTimeout(vt,3e3));try{if(!((V=(await F("/api/settings/summary-layers/flush-status")).pending_merge)!=null&&V.length)){B(""),Gt(),setTimeout(()=>B(null),3e3);return}}catch(vt){}}B(""),setTimeout(()=>B(null),3e3);return}B(jn.length?jn.join(""):""),ct.flushed&&setTimeout(Gt,2e3),setTimeout(()=>B(null),4e3)}catch(Pe){B(""),setTimeout(()=>B(null),4e3)}finally{Ee(!1)}};u.useEffect(()=>{F("/api/sessions?limit=50").then(N=>{const L=N.sessions||[];p(L),L.length>0&&!i&&c(L[0].id)}).catch(()=>{})},[]),u.useEffect(()=>{i&&F(`/api/sessions/${i}/info`).then(N=>h(N.assistant_name||null)).catch(()=>h(null))},[i]);const pn=50,xt=u.useRef(""),Zt=u.useRef(null),ur=u.useRef({klass:"",mood:"",role:""});ur.current={klass:v,mood:j,role:k},u.useEffect(()=>{i&&ge()},[i,o]),u.useEffect(()=>{i&&!o&&ge()},[t]),u.useEffect(()=>{i&&!o&&ge()},[v,j,k]),u.useEffect(()=>(Zt.current&&clearTimeout(Zt.current),Zt.current=setTimeout(()=>{const N=x.trim();N!==xt.current&&(xt.current=N,i&&ge(N))},400),()=>{Zt.current&&clearTimeout(Zt.current)}),[x]);const A=N=>{const L=[],H=(N!=null?N:xt.current||"").trim();H&&L.push(`search=${encodeURIComponent(H)}`);const V=ur.current;return t==="memories"&&V.klass&&L.push(`klass=${encodeURIComponent(V.klass)}`),t==="summaries"&&V.mood&&L.push(`mood_tag=${encodeURIComponent(V.mood)}`),t==="messages"&&V.role&&L.push(`role=${encodeURIComponent(V.role)}`),L.length?`&${L.join("&")}`:""},ge=async N=>{if(!i)return;ae(!0);const L=A(N);try{if(o){const[H,V]=await Promise.all([F("/api/memories/trash?limit=100"),F(`/api/sessions/${i}/summaries/trash`)]);T(H.memories||[]),K(V.summaries||[])}else if(t==="memories"){const H=await F(`/api/memories?limit=${pn}&offset=0${L}`);P(H.memories||[]),ee((H.total||0)>(H.memories||[]).length)}else if(t==="summaries"){const H=await F(`/api/sessions/${i}/summaries?limit=${pn}&offset=0${L}`);he(H.summaries||[]),de((H.total||0)>(H.summaries||[]).length)}else{const H=await F(`/api/sessions/${i}/messages?limit=50${L}`);$((H.messages||[]).reverse()),He(H.has_more||!1)}}catch(H){console.error(H)}ae(!1)},ue=async()=>{if(!I||q)return;ae(!0);const N=A();try{const L=await F(`/api/memories?limit=${pn}&offset=${Y.length}${N}`),H=L.memories||[];P(V=>[...V,...H]),ee((L.total||0)>Y.length+H.length)}catch(L){console.error(L)}ae(!1)},_e=async()=>{if(!i||!re||q)return;ae(!0);const N=A();try{const L=await F(`/api/sessions/${i}/summaries?limit=${pn}&offset=${Z.length}${N}`),H=L.summaries||[];he(V=>[...V,...H]),de((L.total||0)>Z.length+H.length)}catch(L){console.error(L)}ae(!1)},mt=async()=>{if(!i||!Ye||q)return;const N=fe[fe.length-1];if(!N)return;ae(!0);const L=A();try{const H=await F(`/api/sessions/${i}/messages?limit=50&before_id=${N.id}${L}`);$(V=>[...V,...(H.messages||[]).reverse()]),He(H.has_more||!1)}catch(H){console.error(H)}ae(!1)},$e=x.trim(),_l=u.useMemo(()=>$e?G.filter(N=>N.content.toLowerCase().includes($e.toLowerCase())):G,[G,$e]),ws=u.useMemo(()=>$e?te.filter(N=>(N.summary_content||"").toLowerCase().includes($e.toLowerCase())):te,[te,$e]),We=(N,L)=>b({message:N,action:L}),gt=async N=>{await F(`/api/memories/${N}/restore`,{method:"POST"}),T(L=>L.filter(H=>H.id!==N))},yt=N=>We("",async()=>{await F(`/api/memories/${N}/permanent`,{method:"DELETE"}),T(L=>L.filter(H=>H.id!==N))}),hn=async N=>{await F(`/api/sessions/${i}/summaries/${N}/restore`,{method:"POST"}),K(L=>L.filter(H=>H.id!==N))},Nt=N=>We("",async()=>{await F(`/api/sessions/${i}/summaries/${N}/permanent`,{method:"DELETE"}),K(L=>L.filter(H=>H.id!==N))}),st=N=>{oe(L=>{const H=new Set(L);return H.has(N)?H.delete(N):H.add(N),H})},Ct=N=>{z(!0),oe(new Set([N]))},$n=()=>{let N=[];t==="memories"?N=Y.map(L=>L.id):t==="summaries"?N=Z.map(L=>L.id):N=fe.map(L=>L.id),oe(new Set(N))},Ve=()=>{z(!1),oe(new Set)},xn=()=>{if(O.size===0)return;const N=O.size,L=t==="messages"?` ${N} `:` ${N} ${t==="memories"?"":""}`;We(L,async()=>{const H=[...O];t==="memories"?(await F("/api/memories/batch",{method:"DELETE",body:{ids:H}}),P(V=>V.filter(Pe=>!O.has(Pe.id)))):t==="summaries"?(await F(`/api/sessions/${i}/summaries/batch`,{method:"DELETE",body:{ids:H}}),he(V=>V.filter(Pe=>!O.has(Pe.id)))):(await F(`/api/sessions/${i}/messages/batch`,{method:"DELETE",body:{ids:H}}),$(V=>V.filter(Pe=>!O.has(Pe.id)))),Ve()})},Bt=async(N,L,H)=>{if(g){try{if(g.type==="memory"){const V={content:N};L!==void 0&&(V.klass=L),H!==void 0&&(V.tags=H),await F(`/api/memories/${g.id}`,{method:"PUT",body:V}),P(Pe=>Pe.map(ct=>ct.id===g.id?{...ct,content:N,...L!==void 0?{klass:L}:{},...H!==void 0?{tags:H}:{}}:ct))}else await F(`/api/sessions/${i}/summaries/${g.id}`,{method:"PATCH",body:{summary_content:N}}),he(V=>V.map(Pe=>Pe.id===g.id?{...Pe,summary_content:N}:Pe))}catch(V){console.error(V)}m(null)}},en=N=>{if(!X)return;const L=X.type;we(null),b({title:"",message:"",confirmLabel:"",confirmColor:_.accentDark,action:async()=>{await F(`/api/settings/summary-layers/${L}`,{method:"PUT",body:{content:N}}),Gt()}})},dr=N=>N==="user"?"":N==="assistant"?f||"":"",fr=N=>N==="user"?_.accentDark:N==="assistant"?"#8d68c4":_.textMuted,Ut=t==="memories"?bx:t==="summaries"?Y0:K0,kn=t==="memories"?v:t==="summaries"?j:k,bs=N=>{t==="memories"?S(N):t==="summaries"?C(N):E(N)},Nx=o?(()=>{if(q)return l.jsx(Ds,{});const N=t==="memories"?_l:ws;return N.length===0?l.jsx(to,{text:$e?"":""}):N.map(L=>l.jsx(q0,{content:L.content||L.summary_content||"()",deletedAt:L.deleted_at,keyword:$e,onRestore:()=>t==="memories"?gt(L.id):hn(L.id),onPermanentDelete:()=>t==="memories"?yt(L.id):Nt(L.id)},L.id))})():t==="memories"?q&&Y.length===0?l.jsx(Ds,{}):Y.length===0?l.jsx(to,{text:$e?"":""}):l.jsxs(l.Fragment,{children:[!D&&l.jsx("p",{className:"mb-2 text-[11px]",style:{color:_.textMuted},children:""}),Y.map(N=>l.jsx(uf,{time:N.updated_at?`${mr(N.created_at)}   ${mr(N.updated_at)}`:mr(N.created_at),keyword:$e,onEdit:()=>m({type:"memory",id:N.id,text:N.content,klass:N.klass,tags:N.tags}),selectMode:D,selected:O.has(N.id),onToggle:()=>st(N.id),onLongPress:()=>Ct(N.id),badge:(()=>{var V;const L=of[N.klass]||of.other,H=((V=N.tags)==null?void 0:V.topic)||[];return l.jsxs("div",{className:"flex flex-wrap items-center gap-1 mb-1",children:[l.jsx("span",{className:"inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:L.bg,color:L.color},children:N.klass}),l.jsxs("span",{className:"inline-block text-[10px]",style:{color:_.textMuted},children:["#",N.id]}),H.map((Pe,ct)=>l.jsx("span",{className:"inline-block rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(136,136,160,0.1)",color:_.textMuted},children:Pe},ct))]})})(),children:N.content},N.id)),I&&l.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.accentDark},onClick:ue,disabled:q,children:q?"...":""})]}):t==="summaries"?q&&Z.length===0?l.jsx(Ds,{}):Z.length===0?l.jsx(to,{text:$e?"":""}):l.jsxs(l.Fragment,{children:[!D&&l.jsx("p",{className:"mb-2 text-[11px]",style:{color:_.textMuted},children:""}),Z.map(N=>l.jsx(uf,{time:mr(N.created_at),keyword:$e,onEdit:()=>m({type:"summary",id:N.id,text:N.summary_content}),selectMode:D,selected:O.has(N.id),onToggle:()=>st(N.id),onLongPress:()=>Ct(N.id),badge:l.jsxs(l.Fragment,{children:[N.mood_tag&&l.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:"rgba(232,160,191,0.15)",color:_.accentDark},children:N.mood_tag}),N.merged_into&&l.jsxs("span",{className:"mb-1 ml-1 inline-block rounded-full px-1.5 py-0.5 text-[9px] font-medium",style:{background:"rgba(155,120,200,0.12)",color:"#8b6abf"},children:["",N.merged_into==="daily"?"":""]}),l.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:_.textMuted},children:["#",N.id]})]}),children:N.summary_content||"()"},N.id)),re&&l.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.accentDark},onClick:_e,disabled:q,children:q?"...":""})]}):r?Ze?l.jsx(Ds,{}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-2.5 text-[13px] font-medium text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:fn,disabled:Fe,children:[l.jsx(xa,{size:13,className:Fe?"animate-spin":""}),it||(Fe?"...":"")]}),[{type:"daily",label:"",hint:""},{type:"longterm",label:"",hint:""}].map(({type:N,label:L,hint:H})=>{var ct,jn;const V=ke[N],Pe=(ct=V==null?void 0:V.content)==null?void 0:ct.trim();return l.jsxs("div",{className:"rounded-[18px] p-4",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-[15px] font-semibold",style:{color:_.text},children:L}),(()=>{var tn;const Sn=((tn=V==null?void 0:V.pending_ids)==null?void 0:tn.length)||0,vt=((V==null?void 0:V.pending_daily)||[]).reduce((An,Fn)=>An+Fn.ids.length,0);if(!Sn&&!vt)return null;const mn=[];return Sn&&mn.push(`${Sn}`),vt&&mn.push(`${vt}daily`),l.jsx(Q0,{label:mn.join("  "),rawIds:(V==null?void 0:V.pending_ids)||[],dailyGroups:(V==null?void 0:V.pending_daily)||[]})})()]}),l.jsx("div",{className:"text-[11px]",style:{color:_.textMuted},children:H})]}),l.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[l.jsx("button",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>qt(N),children:l.jsx($h,{size:11,style:{color:_.textMuted}})}),l.jsx("button",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>we({type:N,content:(V==null?void 0:V.content)||""}),children:l.jsx(su,{size:11,style:{color:_.accentDark}})})]})]}),l.jsx("div",{className:"text-[12px] leading-relaxed whitespace-pre-wrap break-words",style:{color:Pe?_.text:_.textMuted},children:Pe?V.content:""}),l.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[l.jsx("span",{className:"text-[10px]",style:{color:_.textMuted},children:V!=null&&V.updated_at?` ${mr(V.updated_at)}`:""}),l.jsxs("span",{className:"text-[10px]",style:{color:_.textMuted},children:["v",(V==null?void 0:V.version)||1,"  ",((jn=V==null?void 0:V.content)==null?void 0:jn.length)||0," "]})]})]},N)})]}):q&&fe.length===0?l.jsx(Ds,{}):fe.length===0?l.jsx(to,{text:$e?"":""}):l.jsxs(l.Fragment,{children:[!D&&l.jsx("p",{className:"mb-2 text-[11px]",style:{color:_.textMuted},children:""}),fe.map(N=>l.jsx(J0,{msg:N,keyword:$e,roleLabel:dr,roleColor:fr,selectMode:D,selected:O.has(N.id),onToggle:()=>st(N.id),onLongPress:()=>Ct(N.id)},N.id)),Ye&&l.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.accentDark},onClick:mt,disabled:q,children:q?"...":""})]});return l.jsxs("div",{className:"flex h-full flex-col",style:{background:_.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(zt,{size:22,style:{color:_.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:_.text},children:o?"":""}),t==="messages"?l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>s(!r),children:l.jsx(ru,{size:16,style:{color:r?_.accentDark:_.textMuted}})}):l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:o?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>a(!o),children:l.jsx(zr,{size:16,style:{color:o?"#ef4444":_.accentDark}})})]}),D&&l.jsx("div",{className:"shrink-0 px-5 pb-2",children:l.jsxs("div",{className:"flex items-center justify-between rounded-[14px] px-4 py-2.5",style:{background:_.bg,boxShadow:"var(--inset-shadow)"},children:[l.jsxs("span",{className:"text-[12px] font-semibold",style:{color:_.accentDark},children:[" ",O.size," "]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:"rgba(59,130,246,0.15)",color:"#3b82f6"},onClick:$n,children:""}),l.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.textMuted},onClick:Ve,children:""}),l.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold text-white",style:{background:O.size>0?"#ff4d6d":"rgba(255,77,109,0.3)"},onClick:xn,disabled:O.size===0,children:""})]})]})}),!D&&l.jsx("div",{className:"shrink-0 px-5 pb-2",children:l.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:_.bg,boxShadow:"var(--inset-shadow)"},children:X0.map(N=>{const L=o&&N.key==="messages",H=t===N.key,V=N.key==="messages"&&r?"":N.label;return l.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:L?{color:_.textMuted,opacity:.35,cursor:"default"}:H?{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.accentDark}:{color:_.textMuted},disabled:L,onClick:()=>!L&&n(N.key),children:V},N.key)})})}),!D&&!(t==="messages"&&r)&&l.jsx("div",{className:"shrink-0 px-5 pb-3",children:l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(cf,{value:i?`#${i}`:"",rawValue:i!=null?i:"",onChange:N=>c(Number(N)),options:d.map(N=>({value:String(N.id),label:`#${N.id} ${N.title||""}`})),width:"22%"}),l.jsx(cf,{value:((hu=Ut.find(N=>N.value===kn))==null?void 0:hu.label)||Ut[0].label,rawValue:kn,onChange:bs,options:Ut.map(N=>({value:N.value,label:N.label})),width:"22%",active:!!kn}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx(dv,{size:13,className:"absolute left-2.5 top-1/2 -translate-y-1/2",style:{color:_.textMuted}}),l.jsx("input",{className:"w-full rounded-[12px] py-2 pl-8 pr-7 text-[11px] outline-none",style:{background:_.bg,boxShadow:"var(--inset-shadow)",color:_.text},placeholder:"...",value:x,onChange:N=>w(N.target.value)}),x&&l.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>w(""),children:l.jsx(jl,{size:13,style:{color:_.textMuted}})})]})]})}),l.jsx("div",{ref:On,className:`flex-1 overflow-y-auto px-5 pb-8${t==="messages"&&r?" pt-5":""}`,children:Nx}),y&&l.jsx(jx,{title:y.title,message:y.message,confirmLabel:y.confirmLabel,confirmColor:y.confirmColor,onConfirm:async()=>{try{await y.action()}catch(N){console.error(N)}b(null)},onCancel:()=>b(null)}),g&&l.jsx(af,{initialText:g.text,onSave:Bt,onCancel:()=>m(null),memoryData:g.type==="memory"?{klass:g.klass,tags:g.tags}:null}),X&&l.jsx(af,{initialText:X.content,onSave:en,onCancel:()=>we(null)}),ie&&l.jsx(G0,{items:ie.items,onApply:async N=>{try{const L=await F(`/api/settings/summary-layers/${ie.type}/rollback`,{method:"POST",body:{history_id:N.id}});ye(H=>({...H,[ie.type]:{...H[ie.type],content:L.content,version:L.version}})),Gt()}catch(L){}},onDelete:async N=>{try{await F(`/api/settings/summary-layers/history/${N}`,{method:"DELETE"}),se(L=>L?{...L,items:L.items.filter(H=>H.id!==N)}:null)}catch(L){}},onClose:()=>se(null)}),W&&(()=>{const{pending_flush:N,pending_merge:L,already_merged:H,grayClicks:V}=W,Pe=V>=2,ct=N>0,jn=(L==null?void 0:L.length)>0,Sn=(H==null?void 0:H.length)>0,vt=[];Pe?vt.push(` ${H.join("")} `):(ct&&vt.push(`${N} `),jn&&vt.push(`${L.join("")} `),Sn&&vt.push(`${H.join("")} `),vt.length||vt.push(""));let mn,tn,An;return Pe?(mn="",tn=!1,An=()=>Jt(!0)):ct?(mn="",tn=!1,An=Jt):jn?(mn="",tn=!1,An=Jt):Sn?(mn="",tn=!0,An=()=>ce(Fn=>({...Fn,grayClicks:(Fn.grayClicks||0)+1}))):(mn="",tn=!0,An=()=>{}),l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>ce(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:_.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:Fn=>Fn.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:_.text},children:Pe?"":""}),l.jsx("p",{className:"mb-5 text-center text-[13px] leading-relaxed",style:{color:_.textMuted},children:vt.map((Fn,xu)=>l.jsxs("span",{children:[xu>0&&l.jsx("br",{}),Fn]},xu))}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.text},onClick:()=>ce(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:tn?"#bbb":_.accentDark,boxShadow:tn?"none":"4px 4px 10px rgba(201,98,138,0.4)",opacity:tn?.5:1},onClick:An,children:mn})]})]})})})()]})}function Ds(){return l.jsx("div",{className:"flex justify-center py-16",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:_.accent,borderTopColor:"transparent"}})})}function to({text:e}){return l.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:_.textMuted},children:e})}const J={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},ew=[{key:"theirs",label:""},{key:"mine",label:""}],no=80;function Sx(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),o=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?o:`${t.getMonth()+1}/${t.getDate()} ${o}`}function tw({message:e,onConfirm:t,onCancel:n}){return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:J.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:J.text},children:""}),l.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:J.textMuted},children:e}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:J.bg,boxShadow:"var(--card-shadow-sm)",color:J.text},onClick:n,children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function nw({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),o=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/no);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>o(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-no,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/no)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?o(-no):o(0)};return l.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:J.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:l.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[l.jsx(zr,{size:16,color:"white"}),l.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),l.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function rw({unlockAt:e}){const[t,n]=u.useState(Date.now());u.useEffect(()=>{const d=setInterval(()=>n(Date.now()),1e3);return()=>clearInterval(d)},[]);const r=new Date(e).getTime()-t;if(r<=0)return null;const s=Math.floor(r/864e5),o=Math.floor(r%864e5/36e5),a=Math.floor(r%36e5/6e4),i=Math.floor(r%6e4/1e3);let c="";return s>0&&(c+=`${s}`),(o>0||s>0)&&(c+=`${o}`),c+=`${a}${i}`,l.jsxs("div",{className:"flex items-center gap-1.5 text-[12px]",style:{color:J.accentDark},children:[l.jsx(iv,{size:12}),l.jsx("span",{children:c})]})}function sw({assistants:e,avatarMap:t,currentId:n,onSelect:r,onClose:s}){return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:s,children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-5",style:{background:J.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:o=>o.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:J.text},children:""}),l.jsx("button",{onClick:s,children:l.jsx(jl,{size:18,style:{color:J.textMuted}})})]}),l.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:e.map(o=>{var i;const a=t[o.id]||o.avatar_url;return l.jsxs("button",{className:"mb-2 flex w-full items-center gap-3 rounded-[14px] p-3 text-left",style:{background:J.bg,boxShadow:o.id===n?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{r(o.id),s()},children:[l.jsx("div",{className:"shrink-0 rounded-full",style:{width:36,height:36,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:2},children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:J.bg},children:a?l.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{className:"text-[14px]",style:{color:J.accentDark},children:((i=o.name)==null?void 0:i[0])||"?"})})}),l.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:J.text},children:o.name})]},o.id)})})]})})}function lw({diary:e,onBack:t,onMarkRead:n}){return u.useEffect(()=>{e&&!e.is_read&&e.author==="assistant"&&(!e.unlock_at||new Date(e.unlock_at)<=new Date)&&n(e.id)},[e]),l.jsxs("div",{className:"flex h-full flex-col",style:{background:J.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:J.bg,boxShadow:"var(--card-shadow-sm)"},onClick:t,children:l.jsx(zt,{size:22,style:{color:J.text}})}),l.jsx("h1",{className:"text-[15px] font-bold truncate max-w-[60%]",style:{color:J.text},children:e.title||""}),l.jsx("div",{className:"w-10"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l.jsxs("div",{className:"rounded-[18px] p-5",style:{background:J.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{className:"mb-3 text-[10px]",style:{color:J.textMuted},children:Sx(e.created_at)}),l.jsx("div",{className:"text-[13px] leading-[28px]",style:{color:J.text},children:e.content.split(`
`).map((r,s)=>l.jsx("div",{style:{borderBottom:"1px solid rgba(0,0,0,0.06)",minHeight:28},children:r||""},s))})]})})]})}function ow({assistantId:e,onSave:t,onCancel:n}){const[r,s]=u.useState(""),[o,a]=u.useState(""),[i,c]=u.useState(!1),[d,p]=u.useState(""),[f,h]=u.useState(!1),[x,w]=u.useState(!1),y=async()=>{if(!(!o.trim()||f)){h(!0);try{const b={assistant_id:e,author:"user",title:r.trim(),content:o.trim()};i&&d&&(b.unlock_at=new Date(d).toISOString()),await t(b)}finally{h(!1)}}};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:J.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:J.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:l.jsx(zt,{size:22,style:{color:J.text}})}),l.jsx("h1",{className:"text-[15px] font-bold",style:{color:J.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:J.bg,boxShadow:o.trim()?"var(--card-shadow-sm)":"var(--inset-shadow)"},onClick:y,disabled:!o.trim()||f,children:l.jsx("span",{className:"text-[12px] font-bold",style:{color:o.trim()?J.accentDark:J.textMuted},children:""})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[!x&&l.jsx("input",{className:"mb-3 w-full rounded-[12px] px-3 py-2.5 text-[13px] font-medium outline-none",style:{background:J.bg,boxShadow:"var(--inset-shadow)",color:J.text},placeholder:"",value:r,onChange:b=>s(b.target.value)}),l.jsxs("div",{className:"relative mb-3",children:[l.jsx("textarea",{className:"w-full rounded-[14px] p-3 text-[13px] leading-[28px] resize-none outline-none",style:{background:J.bg,boxShadow:"var(--inset-shadow)",color:J.text,minHeight:x?"calc(100vh - 120px)":200,backgroundImage:"repeating-linear-gradient(transparent, transparent 27px, rgba(0,0,0,0.05) 27px, rgba(0,0,0,0.05) 28px)",backgroundPositionY:9},placeholder:"...",value:o,onChange:b=>a(b.target.value),autoFocus:!0}),l.jsx("button",{className:"absolute top-2 right-2 flex h-7 w-7 items-center justify-center rounded-full",style:{background:J.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>w(!x),children:x?l.jsx(or,{size:13,style:{color:J.accentDark}}):l.jsx(bl,{size:13,style:{color:J.accentDark}})})]}),!x&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-[14px] px-4 py-3",style:{background:J.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-[13px] font-medium",style:{color:J.text},children:""}),l.jsx("p",{className:"text-[10px]",style:{color:J.textMuted},children:""})]}),l.jsx("button",{className:"relative h-7 w-12 rounded-full transition-colors",style:{background:i?J.accent:"rgba(0,0,0,0.1)"},onClick:()=>{if(!i&&!d){const b=new Date;b.setDate(b.getDate()+1),b.setHours(9,0,0,0);const g=m=>String(m).padStart(2,"0");p(`${b.getFullYear()}-${g(b.getMonth()+1)}-${g(b.getDate())}T${g(b.getHours())}:${g(b.getMinutes())}`)}c(!i)},children:l.jsx("div",{className:"absolute top-0.5 h-6 w-6 rounded-full transition-transform",style:{background:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",transform:i?"translateX(22px)":"translateX(2px)"}})})]}),i&&l.jsxs("div",{className:"rounded-[14px] px-4 py-3",style:{background:J.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("p",{className:"mb-2 text-[12px] font-medium",style:{color:J.text},children:""}),l.jsx("input",{type:"datetime-local",className:"w-full rounded-[10px] px-3 py-2 text-[13px] outline-none",style:{background:J.bg,boxShadow:"var(--inset-shadow)",color:J.text},value:d,onChange:b=>p(b.target.value)})]})]})]})]})}function aw(){var Y;const e=Ft(),[t,n]=u.useState("theirs"),[r,s]=u.useState([]),[o,a]=u.useState({}),[i,c]=u.useState(()=>{const P=localStorage.getItem("diary_assistant_id");return P?Number(P):null}),d=P=>{c(P),P!=null&&localStorage.setItem("diary_assistant_id",String(P))},[p,f]=u.useState(!1),[h,x]=u.useState([]),[w,y]=u.useState(!0),[b,g]=u.useState(null),[m,v]=u.useState(null),[S,j]=u.useState(!1);u.useEffect(()=>{F("/api/assistants").then(async P=>{const Z=P.assistants||[];s(Z),Z.length>0&&(i&&Z.some($=>$.id===i)||d(Z[0].id));const he={};await Promise.all(Z.map(async fe=>{const $=await ms(`assistant-avatar-${fe.id}`).catch(()=>null);$&&(he[fe.id]=$)})),a(he)}).catch(()=>{})},[]);const C=r.find(P=>P.id===i),k=i&&o[i]||(C==null?void 0:C.avatar_url);u.useEffect(()=>{i!=null&&E()},[i,t]);const E=async()=>{y(!0);try{const Z=await F(`/api/diary?assistant_id=${i}&author=${t==="theirs"?"assistant":"user"}&limit=100`);x(Z.diary||[])}catch(P){console.error(P)}y(!1)},D=P=>{g({message:"",action:async()=>{await F(`/api/diary/${P}`,{method:"DELETE"}),x(Z=>Z.filter(he=>he.id!==P))}})},z=async P=>{try{await F(`/api/diary/${P}/read`,{method:"POST"}),x(Z=>Z.map(he=>he.id===P?{...he,is_read:!0}:he))}catch(Z){console.error(Z)}},O=async P=>{await F("/api/diary",{method:"POST",body:P}),j(!1),E()},oe=P=>{P.unlock_at&&new Date(P.unlock_at)>new Date||v(P)};return m?l.jsx(lw,{diary:m,onBack:()=>{v(null),E()},onMarkRead:z}):S?l.jsx(ow,{assistantId:i,onSave:O,onCancel:()=>j(!1)}):l.jsxs("div",{className:"flex h-full flex-col",style:{background:J.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:J.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(zt,{size:22,style:{color:J.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:J.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{border:"2px solid #e8a0bf",padding:2},onClick:()=>f(!0),children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:J.bg},children:k?l.jsx("img",{src:k,alt:"",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{className:"text-[14px]",style:{color:J.accentDark},children:((Y=C==null?void 0:C.name)==null?void 0:Y[0])||"?"})})})]}),l.jsx("div",{className:"shrink-0 px-5 pb-3",children:l.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:J.bg,boxShadow:"var(--inset-shadow)"},children:ew.map(P=>l.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:t===P.key?{background:J.bg,boxShadow:"var(--card-shadow-sm)",color:J.accentDark}:{color:J.textMuted},onClick:()=>n(P.key),children:P.label},P.key))})}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24 pt-5",children:w?l.jsx("div",{className:"flex justify-center py-16",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:J.accent,borderTopColor:"transparent"}})}):h.length===0?l.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:J.textMuted},children:t==="theirs"?"":""}):h.map(P=>{const Z=P.unlock_at&&new Date(P.unlock_at)>new Date;return l.jsx(nw,{onDelete:()=>D(P.id),children:l.jsxs("div",{className:"p-4 rounded-[18px]",style:{background:J.bg,userSelect:"none"},onClick:()=>oe(P),children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[!P.is_read&&P.author==="assistant"&&!Z&&l.jsx("div",{className:"h-2 w-2 shrink-0 rounded-full",style:{background:"#ef4444"}}),l.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:J.text},children:P.title||""})]}),l.jsx("span",{className:"text-[10px] shrink-0 ml-2",style:{color:J.textMuted},children:Sx(P.created_at)})]}),Z?l.jsx(rw,{unlockAt:P.unlock_at}):l.jsx("p",{className:"text-[12px] leading-relaxed break-words",style:{color:J.textMuted,maxHeight:40,overflow:"hidden"},children:P.content.length>60?P.content.slice(0,60)+"...":P.content})]})},P.id)})}),t==="mine"&&l.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center",style:{zIndex:30},children:l.jsx("button",{className:"flex h-12 w-12 items-center justify-center rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",boxShadow:"0 4px 14px rgba(232,160,191,0.4)"},onClick:()=>j(!0),children:l.jsx(xs,{size:22,color:"white"})})}),p&&l.jsx(sw,{assistants:r,avatarMap:o,currentId:i,onSelect:d,onClose:()=>f(!1)}),b&&l.jsx(tw,{message:b.message,onConfirm:async()=>{try{await b.action()}catch(P){console.error(P)}g(null)},onCancel:()=>g(null)})]})}const Ne={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function iw({value:e,onChange:t,onClose:n}){return l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:Ne.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:Ne.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:l.jsx(or,{size:18,style:{color:Ne.accentDark}})})]}),l.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:Ne.bg,color:Ne.text},placeholder:"..."})]})}function cw(){const e=Ft(),[t,n]=u.useState(""),[r,s]=u.useState(""),[o,a]=u.useState(""),[i,c]=u.useState(""),[d,p]=u.useState(!1),[f,h]=u.useState(!0),[x,w]=u.useState(null),[y,b]=u.useState(!1),g=u.useRef(null),m=u.useRef(null),v=k=>{w(k),setTimeout(()=>w(null),2e3)};u.useEffect(()=>{F("/api/user/profile").then(k=>{n(k.nickname||""),s(k.background_url||""),a(k.basic_info||"")}).catch(()=>{}).finally(()=>h(!1)),ms("user-avatar").then(k=>{k&&c(k)}).catch(function(){})},[]);const S=k=>{var z;const E=(z=k.target.files)==null?void 0:z[0];if(!E)return;const D=new FileReader;D.onload=async O=>{const oe=O.target.result;try{await nc("user-avatar",oe),c(oe)}catch(Y){v("")}},D.readAsDataURL(E),k.target.value=""},j=k=>{var z;const E=(z=k.target.files)==null?void 0:z[0];if(!E)return;const D=new FileReader;D.onload=O=>a(O.target.result||""),D.readAsText(E),k.target.value=""},C=async()=>{p(!0);try{const k={nickname:t.trim()||null,background_url:r||null,basic_info:o||null,avatar_url:i?"user-avatar":null};await F("/api/user/profile",{method:"PUT",body:k});try{const E=JSON.parse(localStorage.getItem("whisper_profile")||"{}");localStorage.setItem("whisper_profile",JSON.stringify({...E,...k}))}catch(E){}v("")}catch(k){v("")}finally{p(!1)}};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:Ne.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(zt,{size:22,style:{color:Ne.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ne.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:d?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:C,disabled:d,children:l.jsx(kl,{size:18,style:{color:Ne.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5 space-y-4",children:f?l.jsx("div",{className:"flex h-40 items-center justify-center",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ne.accent,borderTopColor:"transparent"}})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"rounded-[20px] p-5",style:{background:Ne.bg,boxShadow:"var(--card-shadow)"},children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var k;return(k=g.current)==null?void 0:k.click()},children:[l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Ne.bg},children:i?l.jsx("img",{src:i,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{style:{fontSize:24},children:""})})}),l.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:Ne.accentDark},children:l.jsx(Ih,{size:9,color:"white"})})]}),l.jsx("input",{ref:g,type:"file",accept:"image/*",className:"hidden",onChange:S}),l.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Ne.textMuted},children:""}),l.jsx("input",{type:"text",value:t,onChange:k=>n(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ne.bg,color:Ne.text}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Ne.textMuted},children:""}),l.jsx("input",{type:"text",value:r,onChange:k=>s(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2 text-[13px] italic outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ne.bg,color:Ne.text}})]})]})]})}),l.jsxs("div",{className:"rounded-[20px] p-5",style:{background:Ne.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[l.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:Ne.textMuted},children:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Ne.bg},onClick:()=>{var k;return(k=m.current)==null?void 0:k.click()},title:"",children:l.jsx(ha,{size:13,style:{color:Ne.textMuted}})}),l.jsx("input",{ref:m,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:j}),l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Ne.bg},onClick:()=>b(!0),title:"",children:l.jsx(bl,{size:13,style:{color:Ne.accentDark}})})]})]}),l.jsx("textarea",{value:o,onChange:k=>a(k.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ne.bg,color:Ne.text}})]})]})}),y&&l.jsx(iw,{value:o,onChange:a,onClose:()=>b(!1)}),x&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:x})})]})}function Ir(){var n;const e=(n=window.Telegram)==null?void 0:n.WebApp,t=Math.max((e==null?void 0:e.viewportHeight)||0,window.innerHeight);document.documentElement.style.setProperty("--tg-viewport-height",t+"px")}function uw({onSuccess:e}){const[t,n]=u.useState(""),[r,s]=u.useState(""),[o,a]=u.useState(!1),i=async c=>{if(c.preventDefault(),!!t.trim()){a(!0),s("");try{await Gy(t),e()}catch(d){s(d.message||"")}finally{a(!1)}}};return l.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--bg)",padding:"2rem"},children:l.jsxs("div",{style:{width:"100%",maxWidth:320,borderRadius:24,padding:"2rem 1.5rem",background:"var(--bg)",boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[l.jsx("div",{style:{fontSize:36,marginBottom:8},children:""}),l.jsx("h1",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--text)",margin:0},children:"WHISPER"}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:4},children:""})]}),l.jsxs("form",{onSubmit:i,children:[l.jsx("input",{type:"password",value:t,onChange:c=>n(c.target.value),placeholder:"",autoFocus:!0,style:{width:"100%",padding:"12px 16px",borderRadius:14,border:"none",outline:"none",fontSize:14,color:"var(--text)",background:"var(--bg)",boxShadow:"var(--inset-shadow)",boxSizing:"border-box"}}),r&&l.jsx("p",{style:{color:"#ef4444",fontSize:"0.75rem",textAlign:"center",marginTop:8,marginBottom:0},children:r}),l.jsx("button",{type:"submit",disabled:o||!t.trim(),style:{width:"100%",marginTop:16,padding:"12px 0",borderRadius:14,border:"none",fontSize:14,fontWeight:600,color:"#fff",background:o||!t.trim()?"var(--text-muted)":"linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%)",cursor:o||!t.trim()?"not-allowed":"pointer",boxShadow:"var(--card-shadow-sm)"},children:o?"...":""})]})]})})}function dw(){const e=tu();return u.useEffect(()=>{var n;const t=(n=window.Telegram)==null?void 0:n.WebApp;t&&!e.pathname.startsWith("/cot")&&t.expand(),Ir()},[e.pathname]),l.jsxs(Xy,{children:[l.jsx(ft,{path:"/",element:l.jsx(yv,{})}),l.jsx(ft,{path:"/profile",element:l.jsx(cw,{})}),l.jsx(ft,{path:"/world-books",element:l.jsx(i0,{})}),l.jsx(ft,{path:"/world-books/new",element:l.jsx(Jd,{})}),l.jsx(ft,{path:"/world-books/:id",element:l.jsx(Jd,{})}),l.jsx(ft,{path:"/assistants",element:l.jsx(v0,{})}),l.jsx(ft,{path:"/assistants/new",element:l.jsx(ef,{})}),l.jsx(ft,{path:"/assistants/:id",element:l.jsx(ef,{})}),l.jsx(ft,{path:"/settings",element:l.jsx(C0,{})}),l.jsx(ft,{path:"/settings/api",element:l.jsx(R0,{})}),l.jsx(ft,{path:"/settings/proactive",element:l.jsx(z0,{})}),l.jsx(ft,{path:"/cot",element:l.jsx(U0,{})}),l.jsx(ft,{path:"/memories",element:l.jsx(Z0,{})}),l.jsx(ft,{path:"/diary",element:l.jsx(aw,{})}),l.jsx(ft,{path:"/messages",element:l.jsx(V0,{})})]})}function fw(){const[e,t]=u.useState(null);return u.useEffect(()=>{var r;const n=(r=window.Telegram)==null?void 0:r.WebApp;return localStorage.getItem("whisper_token")||n&&n.initData&&n.initData.length>0?t("ok"):t("login"),n&&(n.ready(),window.location.hash.startsWith("#/cot")||n.expand()),Ir(),n&&n.onEvent("viewportChanged",Ir),window.addEventListener("resize",Ir),()=>{n&&n.offEvent("viewportChanged",Ir),window.removeEventListener("resize",Ir)}},[]),e===null?null:e==="login"?l.jsx(uw,{onSuccess:()=>t("ok")}):l.jsx(Qy,{children:l.jsx(dw,{})})}window.location.hash&&!window.location.hash.startsWith("#/")&&history.replaceState(null,"",window.location.pathname+"#/cot");ai.createRoot(document.getElementById("root")).render(l.jsx(De.StrictMode,{children:l.jsx(fw,{})}));
