function Zh(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function em(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Od={exports:{}},jo={},$d={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ys=Symbol.for("react.element"),tm=Symbol.for("react.portal"),nm=Symbol.for("react.fragment"),rm=Symbol.for("react.strict_mode"),sm=Symbol.for("react.profiler"),lm=Symbol.for("react.provider"),om=Symbol.for("react.context"),am=Symbol.for("react.forward_ref"),im=Symbol.for("react.suspense"),cm=Symbol.for("react.memo"),um=Symbol.for("react.lazy"),Wc=Symbol.iterator;function dm(e){return e===null||typeof e!="object"?null:(e=Wc&&e[Wc]||e["@@iterator"],typeof e=="function"?e:null)}var Ad={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fd=Object.assign,Bd={};function Hr(e,t,n){this.props=e,this.context=t,this.refs=Bd,this.updater=n||Ad}Hr.prototype.isReactComponent={};Hr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Hr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ud(){}Ud.prototype=Hr.prototype;function Li(e,t,n){this.props=e,this.context=t,this.refs=Bd,this.updater=n||Ad}var Oi=Li.prototype=new Ud;Oi.constructor=Li;Fd(Oi,Hr.prototype);Oi.isPureReactComponent=!0;var Vc=Array.isArray,Hd=Object.prototype.hasOwnProperty,$i={current:null},Wd={key:!0,ref:!0,__self:!0,__source:!0};function Vd(e,t,n){var r,s={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)Hd.call(t,r)&&!Wd.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:Ys,type:e,key:l,ref:a,props:s,_owner:$i.current}}function fm(e,t){return{$$typeof:Ys,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ai(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ys}function pm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Xc=/\/+/g;function na(e,t){return typeof e=="object"&&e!==null&&e.key!=null?pm(""+e.key):t.toString(36)}function Rl(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ys:case tm:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+na(a,0):r,Vc(s)?(n="",e!=null&&(n=e.replace(Xc,"$&/")+"/"),Rl(s,t,n,"",function(u){return u})):s!=null&&(Ai(s)&&(s=fm(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Xc,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Vc(e))for(var i=0;i<e.length;i++){l=e[i];var c=r+na(l,i);a+=Rl(l,t,n,c,s)}else if(c=dm(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=r+na(l,i++),a+=Rl(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ll(e,t,n){if(e==null)return e;var r=[],s=0;return Rl(e,r,"","",function(l){return t.call(n,l,s++)}),r}function hm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ct={current:null},Pl={transition:null},mm={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:Pl,ReactCurrentOwner:$i};function Xd(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:ll,forEach:function(e,t,n){ll(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ll(e,function(){t++}),t},toArray:function(e){return ll(e,function(t){return t})||[]},only:function(e){if(!Ai(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ae.Component=Hr;ae.Fragment=nm;ae.Profiler=sm;ae.PureComponent=Li;ae.StrictMode=rm;ae.Suspense=im;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mm;ae.act=Xd;ae.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Fd({},e.props),s=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=$i.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Hd.call(t,c)&&!Wd.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var u=0;u<c;u++)i[u]=arguments[u+2];r.children=i}return{$$typeof:Ys,type:e.type,key:s,ref:l,props:r,_owner:a}};ae.createContext=function(e){return e={$$typeof:om,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:lm,_context:e},e.Consumer=e};ae.createElement=Vd;ae.createFactory=function(e){var t=Vd.bind(null,e);return t.type=e,t};ae.createRef=function(){return{current:null}};ae.forwardRef=function(e){return{$$typeof:am,render:e}};ae.isValidElement=Ai;ae.lazy=function(e){return{$$typeof:um,_payload:{_status:-1,_result:e},_init:hm}};ae.memo=function(e,t){return{$$typeof:cm,type:e,compare:t===void 0?null:t}};ae.startTransition=function(e){var t=Pl.transition;Pl.transition={};try{e()}finally{Pl.transition=t}};ae.unstable_act=Xd;ae.useCallback=function(e,t){return ct.current.useCallback(e,t)};ae.useContext=function(e){return ct.current.useContext(e)};ae.useDebugValue=function(){};ae.useDeferredValue=function(e){return ct.current.useDeferredValue(e)};ae.useEffect=function(e,t){return ct.current.useEffect(e,t)};ae.useId=function(){return ct.current.useId()};ae.useImperativeHandle=function(e,t,n){return ct.current.useImperativeHandle(e,t,n)};ae.useInsertionEffect=function(e,t){return ct.current.useInsertionEffect(e,t)};ae.useLayoutEffect=function(e,t){return ct.current.useLayoutEffect(e,t)};ae.useMemo=function(e,t){return ct.current.useMemo(e,t)};ae.useReducer=function(e,t,n){return ct.current.useReducer(e,t,n)};ae.useRef=function(e){return ct.current.useRef(e)};ae.useState=function(e){return ct.current.useState(e)};ae.useSyncExternalStore=function(e,t,n){return ct.current.useSyncExternalStore(e,t,n)};ae.useTransition=function(){return ct.current.useTransition()};ae.version="18.3.1";$d.exports=ae;var d=$d.exports;const Ce=em(d),xm=Zh({__proto__:null,default:Ce},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm=d,ym=Symbol.for("react.element"),vm=Symbol.for("react.fragment"),wm=Object.prototype.hasOwnProperty,bm=gm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,km={key:!0,ref:!0,__self:!0,__source:!0};function Yd(e,t,n){var r,s={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)wm.call(t,r)&&!km.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:ym,type:e,key:l,ref:a,props:s,_owner:bm.current}}jo.Fragment=vm;jo.jsx=Yd;jo.jsxs=Yd;Od.exports=jo;var o=Od.exports,Oa={},Kd={exports:{}},Nt={},Qd={exports:{}},Gd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,U){var O=I.length;I.push(U);e:for(;0<O;){var Z=O-1>>>1,X=I[Z];if(0<s(X,U))I[Z]=U,I[O]=X,O=Z;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var U=I[0],O=I.pop();if(O!==U){I[0]=O;e:for(var Z=0,X=I.length,we=X>>>1;Z<we;){var be=2*(Z+1)-1,ee=I[be],F=be+1,G=I[F];if(0>s(ee,O))F<X&&0>s(G,ee)?(I[Z]=G,I[F]=O,Z=F):(I[Z]=ee,I[be]=O,Z=be);else if(F<X&&0>s(G,O))I[Z]=G,I[F]=O,Z=F;else break e}}return U}function s(I,U){var O=I.sortIndex-U.sortIndex;return O!==0?O:I.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],u=[],p=1,f=null,h=3,m=!1,w=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(I){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=I)r(u),U.sortIndex=U.expirationTime,t(c,U);else break;U=n(u)}}function S(I){if(y=!1,v(I),!w)if(n(c)!==null)w=!0,se(j);else{var U=n(u);U!==null&&le(S,U.startTime-I)}}function j(I,U){w=!1,y&&(y=!1,g(C),C=-1),m=!0;var O=h;try{for(v(U),f=n(c);f!==null&&(!(f.expirationTime>U)||I&&!z());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,h=f.priorityLevel;var X=Z(f.expirationTime<=U);U=e.unstable_now(),typeof X=="function"?f.callback=X:f===n(c)&&r(c),v(U)}else r(c);f=n(c)}if(f!==null)var we=!0;else{var be=n(u);be!==null&&le(S,be.startTime-U),we=!1}return we}finally{f=null,h=O,m=!1}}var N=!1,k=null,C=-1,P=5,R=-1;function z(){return!(e.unstable_now()-R<P)}function te(){if(k!==null){var I=e.unstable_now();R=I;var U=!0;try{U=k(!0,I)}finally{U?_():(N=!1,k=null)}}else N=!1}var _;if(typeof x=="function")_=function(){x(te)};else if(typeof MessageChannel!="undefined"){var T=new MessageChannel,V=T.port2;T.port1.onmessage=te,_=function(){V.postMessage(null)}}else _=function(){b(te,0)};function se(I){k=I,N||(N=!0,_())}function le(I,U){C=b(function(){I(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){w||m||(w=!0,se(j))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(I){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var O=h;h=U;try{return I()}finally{h=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,U){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var O=h;h=I;try{return U()}finally{h=O}},e.unstable_scheduleCallback=function(I,U,O){var Z=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?Z+O:Z):O=Z,I){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=O+X,I={id:p++,callback:U,priorityLevel:I,startTime:O,expirationTime:X,sortIndex:-1},O>Z?(I.sortIndex=O,t(u,I),n(c)===null&&I===n(u)&&(y?(g(C),C=-1):y=!0,le(S,O-Z))):(I.sortIndex=X,t(c,I),w||m||(w=!0,se(j))),I},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(I){var U=h;return function(){var O=h;h=U;try{return I.apply(this,arguments)}finally{h=O}}}})(Gd);Qd.exports=Gd;var jm=Qd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm=d,St=jm;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jd=new Set,Ns={};function nr(e,t){Pr(e,t),Pr(e+"Capture",t)}function Pr(e,t){for(Ns[e]=t,e=0;e<t.length;e++)Jd.add(t[e])}var un=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),$a=Object.prototype.hasOwnProperty,Nm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yc={},Kc={};function Cm(e){return $a.call(Kc,e)?!0:$a.call(Yc,e)?!1:Nm.test(e)?Kc[e]=!0:(Yc[e]=!0,!1)}function Em(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Mm(e,t,n,r){if(t===null||typeof t=="undefined"||Em(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ut(e,t,n,r,s,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qe[e]=new ut(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qe[t]=new ut(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qe[e]=new ut(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qe[e]=new ut(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qe[e]=new ut(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qe[e]=new ut(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qe[e]=new ut(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qe[e]=new ut(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qe[e]=new ut(e,5,!1,e.toLowerCase(),null,!1,!1)});var Fi=/[\-:]([a-z])/g;function Bi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Fi,Bi);qe[t]=new ut(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Fi,Bi);qe[t]=new ut(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Fi,Bi);qe[t]=new ut(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qe[e]=new ut(e,1,!1,e.toLowerCase(),null,!1,!1)});qe.xlinkHref=new ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qe[e]=new ut(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ui(e,t,n,r){var s=qe.hasOwnProperty(t)?qe[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Mm(t,n,s,r)&&(n=null),r||s===null?Cm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var mn=Sm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ol=Symbol.for("react.element"),fr=Symbol.for("react.portal"),pr=Symbol.for("react.fragment"),Hi=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),qd=Symbol.for("react.provider"),Zd=Symbol.for("react.context"),Wi=Symbol.for("react.forward_ref"),Fa=Symbol.for("react.suspense"),Ba=Symbol.for("react.suspense_list"),Vi=Symbol.for("react.memo"),bn=Symbol.for("react.lazy"),ef=Symbol.for("react.offscreen"),Qc=Symbol.iterator;function ts(e){return e===null||typeof e!="object"?null:(e=Qc&&e[Qc]||e["@@iterator"],typeof e=="function"?e:null)}var Pe=Object.assign,ra;function cs(e){if(ra===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ra=t&&t[1]||""}return`
`+ra+e}var sa=!1;function la(e,t){if(!e||sa)return"";sa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),l=r.stack.split(`
`),a=s.length-1,i=l.length-1;1<=a&&0<=i&&s[a]!==l[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==l[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==l[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{sa=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?cs(e):""}function _m(e){switch(e.tag){case 5:return cs(e.type);case 16:return cs("Lazy");case 13:return cs("Suspense");case 19:return cs("SuspenseList");case 0:case 2:case 15:return e=la(e.type,!1),e;case 11:return e=la(e.type.render,!1),e;case 1:return e=la(e.type,!0),e;default:return""}}function Ua(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case pr:return"Fragment";case fr:return"Portal";case Aa:return"Profiler";case Hi:return"StrictMode";case Fa:return"Suspense";case Ba:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Zd:return(e.displayName||"Context")+".Consumer";case qd:return(e._context.displayName||"Context")+".Provider";case Wi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Vi:return t=e.displayName||null,t!==null?t:Ua(e.type)||"Memo";case bn:t=e._payload,e=e._init;try{return Ua(e(t))}catch(n){}}return null}function Tm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ua(t);case 8:return t===Hi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function On(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function tf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Dm(e){var t=tf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function al(e){e._valueTracker||(e._valueTracker=Dm(e))}function nf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=tf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Vl(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ha(e,t){var n=t.checked;return Pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function Gc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=On(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function rf(e,t){t=t.checked,t!=null&&Ui(e,"checked",t,!1)}function Wa(e,t){rf(e,t);var n=On(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Va(e,t.type,n):t.hasOwnProperty("defaultValue")&&Va(e,t.type,On(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Va(e,t,n){(t!=="number"||Vl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var us=Array.isArray;function Cr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+On(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Xa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(us(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:On(n)}}function sf(e,t){var n=On(t.value),r=On(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Zc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ya(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var il,of=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(il=il||document.createElement("div"),il.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=il.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rm=["Webkit","ms","Moz","O"];Object.keys(ps).forEach(function(e){Rm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ps[t]=ps[e]})});function af(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ps.hasOwnProperty(e)&&ps[e]?(""+t).trim():t+"px"}function cf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=af(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Pm=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ka(e,t){if(t){if(Pm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Qa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ga=null;function Xi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ja=null,Er=null,Mr=null;function eu(e){if(e=Gs(e)){if(typeof Ja!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Mo(t),Ja(e.stateNode,e.type,t))}}function uf(e){Er?Mr?Mr.push(e):Mr=[e]:Er=e}function df(){if(Er){var e=Er,t=Mr;if(Mr=Er=null,eu(e),t)for(e=0;e<t.length;e++)eu(t[e])}}function ff(e,t){return e(t)}function pf(){}var oa=!1;function hf(e,t,n){if(oa)return e(t,n);oa=!0;try{return ff(e,t,n)}finally{oa=!1,(Er!==null||Mr!==null)&&(pf(),df())}}function Es(e,t){var n=e.stateNode;if(n===null)return null;var r=Mo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var qa=!1;if(un)try{var ns={};Object.defineProperty(ns,"passive",{get:function(){qa=!0}}),window.addEventListener("test",ns,ns),window.removeEventListener("test",ns,ns)}catch(e){qa=!1}function zm(e,t,n,r,s,l,a,i,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(p){this.onError(p)}}var hs=!1,Xl=null,Yl=!1,Za=null,Im={onError:function(e){hs=!0,Xl=e}};function Lm(e,t,n,r,s,l,a,i,c){hs=!1,Xl=null,zm.apply(Im,arguments)}function Om(e,t,n,r,s,l,a,i,c){if(Lm.apply(this,arguments),hs){if(hs){var u=Xl;hs=!1,Xl=null}else throw Error(D(198));Yl||(Yl=!0,Za=u)}}function rr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function mf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function tu(e){if(rr(e)!==e)throw Error(D(188))}function $m(e){var t=e.alternate;if(!t){if(t=rr(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return tu(s),e;if(l===r)return tu(s),t;l=l.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=l;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=l;break}if(i===r){a=!0,r=s,n=l;break}i=i.sibling}if(!a){for(i=l.child;i;){if(i===n){a=!0,n=l,r=s;break}if(i===r){a=!0,r=l,n=s;break}i=i.sibling}if(!a)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function xf(e){return e=$m(e),e!==null?gf(e):null}function gf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gf(e);if(t!==null)return t;e=e.sibling}return null}var yf=St.unstable_scheduleCallback,nu=St.unstable_cancelCallback,Am=St.unstable_shouldYield,Fm=St.unstable_requestPaint,$e=St.unstable_now,Bm=St.unstable_getCurrentPriorityLevel,Yi=St.unstable_ImmediatePriority,vf=St.unstable_UserBlockingPriority,Kl=St.unstable_NormalPriority,Um=St.unstable_LowPriority,wf=St.unstable_IdlePriority,So=null,en=null;function Hm(e){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(So,e,void 0,(e.current.flags&128)===128)}catch(t){}}var Wt=Math.clz32?Math.clz32:Xm,Wm=Math.log,Vm=Math.LN2;function Xm(e){return e>>>=0,e===0?32:31-(Wm(e)/Vm|0)|0}var cl=64,ul=4194304;function ds(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ql(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=ds(i):(l&=a,l!==0&&(r=ds(l)))}else a=n&~s,a!==0?r=ds(a):l!==0&&(r=ds(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Wt(t),s=1<<n,r|=e[n],t&=~s;return r}function Ym(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Km(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-Wt(l),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=Ym(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function ei(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bf(){var e=cl;return cl<<=1,!(cl&4194240)&&(cl=64),e}function aa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ks(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wt(t),e[t]=n}function Qm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Wt(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function Ki(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Wt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ve=0;function kf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var jf,Qi,Sf,Nf,Cf,ti=!1,dl=[],_n=null,Tn=null,Dn=null,Ms=new Map,_s=new Map,Sn=[],Gm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ru(e,t){switch(e){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":Ms.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_s.delete(t.pointerId)}}function rs(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Gs(t),t!==null&&Qi(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Jm(e,t,n,r,s){switch(t){case"focusin":return _n=rs(_n,e,t,n,r,s),!0;case"dragenter":return Tn=rs(Tn,e,t,n,r,s),!0;case"mouseover":return Dn=rs(Dn,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return Ms.set(l,rs(Ms.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,_s.set(l,rs(_s.get(l)||null,e,t,n,r,s)),!0}return!1}function Ef(e){var t=Vn(e.target);if(t!==null){var n=rr(t);if(n!==null){if(t=n.tag,t===13){if(t=mf(n),t!==null){e.blockedOn=t,Cf(e.priority,function(){Sf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ni(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ga=r,n.target.dispatchEvent(r),Ga=null}else return t=Gs(n),t!==null&&Qi(t),e.blockedOn=n,!1;t.shift()}return!0}function su(e,t,n){zl(e)&&n.delete(t)}function qm(){ti=!1,_n!==null&&zl(_n)&&(_n=null),Tn!==null&&zl(Tn)&&(Tn=null),Dn!==null&&zl(Dn)&&(Dn=null),Ms.forEach(su),_s.forEach(su)}function ss(e,t){e.blockedOn===t&&(e.blockedOn=null,ti||(ti=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,qm)))}function Ts(e){function t(s){return ss(s,e)}if(0<dl.length){ss(dl[0],e);for(var n=1;n<dl.length;n++){var r=dl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_n!==null&&ss(_n,e),Tn!==null&&ss(Tn,e),Dn!==null&&ss(Dn,e),Ms.forEach(t),_s.forEach(t),n=0;n<Sn.length;n++)r=Sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Sn.length&&(n=Sn[0],n.blockedOn===null);)Ef(n),n.blockedOn===null&&Sn.shift()}var _r=mn.ReactCurrentBatchConfig,Gl=!0;function Zm(e,t,n,r){var s=ve,l=_r.transition;_r.transition=null;try{ve=1,Gi(e,t,n,r)}finally{ve=s,_r.transition=l}}function ex(e,t,n,r){var s=ve,l=_r.transition;_r.transition=null;try{ve=4,Gi(e,t,n,r)}finally{ve=s,_r.transition=l}}function Gi(e,t,n,r){if(Gl){var s=ni(e,t,n,r);if(s===null)ga(e,t,r,Jl,n),ru(e,r);else if(Jm(s,e,t,n,r))r.stopPropagation();else if(ru(e,r),t&4&&-1<Gm.indexOf(e)){for(;s!==null;){var l=Gs(s);if(l!==null&&jf(l),l=ni(e,t,n,r),l===null&&ga(e,t,r,Jl,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else ga(e,t,r,null,n)}}var Jl=null;function ni(e,t,n,r){if(Jl=null,e=Xi(r),e=Vn(e),e!==null)if(t=rr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=mf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jl=e,null}function Mf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bm()){case Yi:return 1;case vf:return 4;case Kl:case Um:return 16;case wf:return 536870912;default:return 16}default:return 16}}var Cn=null,Ji=null,Il=null;function _f(){if(Il)return Il;var e,t=Ji,n=t.length,r,s="value"in Cn?Cn.value:Cn.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[l-r];r++);return Il=s.slice(e,1<r?1-r:void 0)}function Ll(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fl(){return!0}function lu(){return!1}function Ct(e){function t(n,r,s,l,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?fl:lu,this.isPropagationStopped=lu,this}return Pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fl)},persist:function(){},isPersistent:fl}),t}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qi=Ct(Wr),Qs=Pe({},Wr,{view:0,detail:0}),tx=Ct(Qs),ia,ca,ls,No=Pe({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ls&&(ls&&e.type==="mousemove"?(ia=e.screenX-ls.screenX,ca=e.screenY-ls.screenY):ca=ia=0,ls=e),ia)},movementY:function(e){return"movementY"in e?e.movementY:ca}}),ou=Ct(No),nx=Pe({},No,{dataTransfer:0}),rx=Ct(nx),sx=Pe({},Qs,{relatedTarget:0}),ua=Ct(sx),lx=Pe({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),ox=Ct(lx),ax=Pe({},Wr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ix=Ct(ax),cx=Pe({},Wr,{data:0}),au=Ct(cx),ux={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function px(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fx[e])?!!t[e]:!1}function Zi(){return px}var hx=Pe({},Qs,{key:function(e){if(e.key){var t=ux[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ll(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zi,charCode:function(e){return e.type==="keypress"?Ll(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ll(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mx=Ct(hx),xx=Pe({},No,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iu=Ct(xx),gx=Pe({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zi}),yx=Ct(gx),vx=Pe({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),wx=Ct(vx),bx=Pe({},No,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kx=Ct(bx),jx=[9,13,27,32],ec=un&&"CompositionEvent"in window,ms=null;un&&"documentMode"in document&&(ms=document.documentMode);var Sx=un&&"TextEvent"in window&&!ms,Tf=un&&(!ec||ms&&8<ms&&11>=ms),cu=" ",uu=!1;function Df(e,t){switch(e){case"keyup":return jx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hr=!1;function Nx(e,t){switch(e){case"compositionend":return Rf(t);case"keypress":return t.which!==32?null:(uu=!0,cu);case"textInput":return e=t.data,e===cu&&uu?null:e;default:return null}}function Cx(e,t){if(hr)return e==="compositionend"||!ec&&Df(e,t)?(e=_f(),Il=Ji=Cn=null,hr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tf&&t.locale!=="ko"?null:t.data;default:return null}}var Ex={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function du(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ex[e.type]:t==="textarea"}function Pf(e,t,n,r){uf(r),t=ql(t,"onChange"),0<t.length&&(n=new qi("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var xs=null,Ds=null;function Mx(e){Wf(e,0)}function Co(e){var t=gr(e);if(nf(t))return e}function _x(e,t){if(e==="change")return t}var zf=!1;if(un){var da;if(un){var fa="oninput"in document;if(!fa){var fu=document.createElement("div");fu.setAttribute("oninput","return;"),fa=typeof fu.oninput=="function"}da=fa}else da=!1;zf=da&&(!document.documentMode||9<document.documentMode)}function pu(){xs&&(xs.detachEvent("onpropertychange",If),Ds=xs=null)}function If(e){if(e.propertyName==="value"&&Co(Ds)){var t=[];Pf(t,Ds,e,Xi(e)),hf(Mx,t)}}function Tx(e,t,n){e==="focusin"?(pu(),xs=t,Ds=n,xs.attachEvent("onpropertychange",If)):e==="focusout"&&pu()}function Dx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Co(Ds)}function Rx(e,t){if(e==="click")return Co(t)}function Px(e,t){if(e==="input"||e==="change")return Co(t)}function zx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xt=typeof Object.is=="function"?Object.is:zx;function Rs(e,t){if(Xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!$a.call(t,s)||!Xt(e[s],t[s]))return!1}return!0}function hu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mu(e,t){var n=hu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hu(n)}}function Lf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Lf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Of(){for(var e=window,t=Vl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=Vl(e.document)}return t}function tc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ix(e){var t=Of(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Lf(n.ownerDocument.documentElement,n)){if(r!==null&&tc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=mu(n,l);var a=mu(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Lx=un&&"documentMode"in document&&11>=document.documentMode,mr=null,ri=null,gs=null,si=!1;function xu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;si||mr==null||mr!==Vl(r)||(r=mr,"selectionStart"in r&&tc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gs&&Rs(gs,r)||(gs=r,r=ql(ri,"onSelect"),0<r.length&&(t=new qi("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function pl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:pl("Animation","AnimationEnd"),animationiteration:pl("Animation","AnimationIteration"),animationstart:pl("Animation","AnimationStart"),transitionend:pl("Transition","TransitionEnd")},pa={},$f={};un&&($f=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);function Eo(e){if(pa[e])return pa[e];if(!xr[e])return e;var t=xr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $f)return pa[e]=t[n];return e}var Af=Eo("animationend"),Ff=Eo("animationiteration"),Bf=Eo("animationstart"),Uf=Eo("transitionend"),Hf=new Map,gu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(e,t){Hf.set(e,t),nr(t,[e])}for(var ha=0;ha<gu.length;ha++){var ma=gu[ha],Ox=ma.toLowerCase(),$x=ma[0].toUpperCase()+ma.slice(1);An(Ox,"on"+$x)}An(Af,"onAnimationEnd");An(Ff,"onAnimationIteration");An(Bf,"onAnimationStart");An("dblclick","onDoubleClick");An("focusin","onFocus");An("focusout","onBlur");An(Uf,"onTransitionEnd");Pr("onMouseEnter",["mouseout","mouseover"]);Pr("onMouseLeave",["mouseout","mouseover"]);Pr("onPointerEnter",["pointerout","pointerover"]);Pr("onPointerLeave",["pointerout","pointerover"]);nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nr("onBeforeInput",["compositionend","keypress","textInput","paste"]);nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ax=new Set("cancel close invalid load scroll toggle".split(" ").concat(fs));function yu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Om(r,t,void 0,e),e.currentTarget=null}function Wf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,u=i.currentTarget;if(i=i.listener,c!==l&&s.isPropagationStopped())break e;yu(s,i,u),l=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,u=i.currentTarget,i=i.listener,c!==l&&s.isPropagationStopped())break e;yu(s,i,u),l=c}}}if(Yl)throw e=Za,Yl=!1,Za=null,e}function Ne(e,t){var n=t[ci];n===void 0&&(n=t[ci]=new Set);var r=e+"__bubble";n.has(r)||(Vf(t,e,2,!1),n.add(r))}function xa(e,t,n){var r=0;t&&(r|=4),Vf(n,e,r,t)}var hl="_reactListening"+Math.random().toString(36).slice(2);function Ps(e){if(!e[hl]){e[hl]=!0,Jd.forEach(function(n){n!=="selectionchange"&&(Ax.has(n)||xa(n,!1,e),xa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hl]||(t[hl]=!0,xa("selectionchange",!1,t))}}function Vf(e,t,n,r){switch(Mf(t)){case 1:var s=Zm;break;case 4:s=ex;break;default:s=Gi}n=s.bind(null,t,n,e),s=void 0,!qa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ga(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=Vn(i),a===null)return;if(c=a.tag,c===5||c===6){r=l=a;continue e}i=i.parentNode}}r=r.return}hf(function(){var u=l,p=Xi(n),f=[];e:{var h=Hf.get(e);if(h!==void 0){var m=qi,w=e;switch(e){case"keypress":if(Ll(n)===0)break e;case"keydown":case"keyup":m=mx;break;case"focusin":w="focus",m=ua;break;case"focusout":w="blur",m=ua;break;case"beforeblur":case"afterblur":m=ua;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=ou;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=rx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=yx;break;case Af:case Ff:case Bf:m=ox;break;case Uf:m=wx;break;case"scroll":m=tx;break;case"wheel":m=kx;break;case"copy":case"cut":case"paste":m=ix;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=iu}var y=(t&4)!==0,b=!y&&e==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var x=u,v;x!==null;){v=x;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,g!==null&&(S=Es(x,g),S!=null&&y.push(zs(x,S,v)))),b)break;x=x.return}0<y.length&&(h=new m(h,w,null,n,p),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==Ga&&(w=n.relatedTarget||n.fromElement)&&(Vn(w)||w[dn]))break e;if((m||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=u,w=w?Vn(w):null,w!==null&&(b=rr(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=u),m!==w)){if(y=ou,S="onMouseLeave",g="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=iu,S="onPointerLeave",g="onPointerEnter",x="pointer"),b=m==null?h:gr(m),v=w==null?h:gr(w),h=new y(S,x+"leave",m,n,p),h.target=b,h.relatedTarget=v,S=null,Vn(p)===u&&(y=new y(g,x+"enter",w,n,p),y.target=v,y.relatedTarget=b,S=y),b=S,m&&w)t:{for(y=m,g=w,x=0,v=y;v;v=ir(v))x++;for(v=0,S=g;S;S=ir(S))v++;for(;0<x-v;)y=ir(y),x--;for(;0<v-x;)g=ir(g),v--;for(;x--;){if(y===g||g!==null&&y===g.alternate)break t;y=ir(y),g=ir(g)}y=null}else y=null;m!==null&&vu(f,h,m,y,!1),w!==null&&b!==null&&vu(f,b,w,y,!0)}}e:{if(h=u?gr(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=_x;else if(du(h))if(zf)j=Px;else{j=Dx;var N=Tx}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=Rx);if(j&&(j=j(e,u))){Pf(f,j,n,p);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&Va(h,"number",h.value)}switch(N=u?gr(u):window,e){case"focusin":(du(N)||N.contentEditable==="true")&&(mr=N,ri=u,gs=null);break;case"focusout":gs=ri=mr=null;break;case"mousedown":si=!0;break;case"contextmenu":case"mouseup":case"dragend":si=!1,xu(f,n,p);break;case"selectionchange":if(Lx)break;case"keydown":case"keyup":xu(f,n,p)}var k;if(ec)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else hr?Df(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Tf&&n.locale!=="ko"&&(hr||C!=="onCompositionStart"?C==="onCompositionEnd"&&hr&&(k=_f()):(Cn=p,Ji="value"in Cn?Cn.value:Cn.textContent,hr=!0)),N=ql(u,C),0<N.length&&(C=new au(C,e,null,n,p),f.push({event:C,listeners:N}),k?C.data=k:(k=Rf(n),k!==null&&(C.data=k)))),(k=Sx?Nx(e,n):Cx(e,n))&&(u=ql(u,"onBeforeInput"),0<u.length&&(p=new au("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:u}),p.data=k))}Wf(f,t)})}function zs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ql(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=Es(e,n),l!=null&&r.unshift(zs(e,l,s)),l=Es(e,t),l!=null&&r.push(zs(e,l,s))),e=e.return}return r}function ir(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vu(e,t,n,r,s){for(var l=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,u=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&u!==null&&(i=u,s?(c=Es(n,l),c!=null&&a.unshift(zs(n,c,i))):s||(c=Es(n,l),c!=null&&a.push(zs(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Fx=/\r\n?/g,Bx=/\u0000|\uFFFD/g;function wu(e){return(typeof e=="string"?e:""+e).replace(Fx,`
`).replace(Bx,"")}function ml(e,t,n){if(t=wu(t),wu(e)!==t&&n)throw Error(D(425))}function Zl(){}var li=null,oi=null;function ai(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ii=typeof setTimeout=="function"?setTimeout:void 0,Ux=typeof clearTimeout=="function"?clearTimeout:void 0,bu=typeof Promise=="function"?Promise:void 0,Hx=typeof queueMicrotask=="function"?queueMicrotask:typeof bu!="undefined"?function(e){return bu.resolve(null).then(e).catch(Wx)}:ii;function Wx(e){setTimeout(function(){throw e})}function ya(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ts(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ts(t)}function Rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ku(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Vr=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Vr,Is="__reactProps$"+Vr,dn="__reactContainer$"+Vr,ci="__reactEvents$"+Vr,Vx="__reactListeners$"+Vr,Xx="__reactHandles$"+Vr;function Vn(e){var t=e[Zt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dn]||n[Zt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ku(e);e!==null;){if(n=e[Zt])return n;e=ku(e)}return t}e=n,n=e.parentNode}return null}function Gs(e){return e=e[Zt]||e[dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Mo(e){return e[Is]||null}var ui=[],yr=-1;function Fn(e){return{current:e}}function Ee(e){0>yr||(e.current=ui[yr],ui[yr]=null,yr--)}function Se(e,t){yr++,ui[yr]=e.current,e.current=t}var $n={},st=Fn($n),mt=Fn(!1),Jn=$n;function zr(e,t){var n=e.type.contextTypes;if(!n)return $n;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function xt(e){return e=e.childContextTypes,e!=null}function eo(){Ee(mt),Ee(st)}function ju(e,t,n){if(st.current!==$n)throw Error(D(168));Se(st,t),Se(mt,n)}function Xf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(D(108,Tm(e)||"Unknown",s));return Pe({},n,r)}function to(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$n,Jn=st.current,Se(st,e),Se(mt,mt.current),!0}function Su(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=Xf(e,t,Jn),r.__reactInternalMemoizedMergedChildContext=e,Ee(mt),Ee(st),Se(st,e)):Ee(mt),Se(mt,n)}var ln=null,_o=!1,va=!1;function Yf(e){ln===null?ln=[e]:ln.push(e)}function Yx(e){_o=!0,Yf(e)}function Bn(){if(!va&&ln!==null){va=!0;var e=0,t=ve;try{var n=ln;for(ve=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ln=null,_o=!1}catch(s){throw ln!==null&&(ln=ln.slice(e+1)),yf(Yi,Bn),s}finally{ve=t,va=!1}}return null}var vr=[],wr=0,no=null,ro=0,Pt=[],zt=0,qn=null,on=1,an="";function Hn(e,t){vr[wr++]=ro,vr[wr++]=no,no=e,ro=t}function Kf(e,t,n){Pt[zt++]=on,Pt[zt++]=an,Pt[zt++]=qn,qn=e;var r=on;e=an;var s=32-Wt(r)-1;r&=~(1<<s),n+=1;var l=32-Wt(t)+s;if(30<l){var a=s-s%5;l=(r&(1<<a)-1).toString(32),r>>=a,s-=a,on=1<<32-Wt(t)+s|n<<s|r,an=l+e}else on=1<<l|n<<s|r,an=e}function nc(e){e.return!==null&&(Hn(e,1),Kf(e,1,0))}function rc(e){for(;e===no;)no=vr[--wr],vr[wr]=null,ro=vr[--wr],vr[wr]=null;for(;e===qn;)qn=Pt[--zt],Pt[zt]=null,an=Pt[--zt],Pt[zt]=null,on=Pt[--zt],Pt[zt]=null}var jt=null,kt=null,_e=!1,Ht=null;function Qf(e,t){var n=It(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Nu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jt=e,kt=Rn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jt=e,kt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=qn!==null?{id:on,overflow:an}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=It(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,jt=e,kt=null,!0):!1;default:return!1}}function di(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fi(e){if(_e){var t=kt;if(t){var n=t;if(!Nu(e,t)){if(di(e))throw Error(D(418));t=Rn(n.nextSibling);var r=jt;t&&Nu(e,t)?Qf(r,n):(e.flags=e.flags&-4097|2,_e=!1,jt=e)}}else{if(di(e))throw Error(D(418));e.flags=e.flags&-4097|2,_e=!1,jt=e}}}function Cu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jt=e}function xl(e){if(e!==jt)return!1;if(!_e)return Cu(e),_e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ai(e.type,e.memoizedProps)),t&&(t=kt)){if(di(e))throw Gf(),Error(D(418));for(;t;)Qf(e,t),t=Rn(t.nextSibling)}if(Cu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){kt=Rn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}kt=null}}else kt=jt?Rn(e.stateNode.nextSibling):null;return!0}function Gf(){for(var e=kt;e;)e=Rn(e.nextSibling)}function Ir(){kt=jt=null,_e=!1}function sc(e){Ht===null?Ht=[e]:Ht.push(e)}var Kx=mn.ReactCurrentBatchConfig;function os(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var i=s.refs;a===null?delete i[l]:i[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function gl(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Eu(e){var t=e._init;return t(e._payload)}function Jf(e){function t(g,x){if(e){var v=g.deletions;v===null?(g.deletions=[x],g.flags|=16):v.push(x)}}function n(g,x){if(!e)return null;for(;x!==null;)t(g,x),x=x.sibling;return null}function r(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function s(g,x){return g=Ln(g,x),g.index=0,g.sibling=null,g}function l(g,x,v){return g.index=v,e?(v=g.alternate,v!==null?(v=v.index,v<x?(g.flags|=2,x):v):(g.flags|=2,x)):(g.flags|=1048576,x)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,x,v,S){return x===null||x.tag!==6?(x=Ca(v,g.mode,S),x.return=g,x):(x=s(x,v),x.return=g,x)}function c(g,x,v,S){var j=v.type;return j===pr?p(g,x,v.props.children,S,v.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===bn&&Eu(j)===x.type)?(S=s(x,v.props),S.ref=os(g,x,v),S.return=g,S):(S=Hl(v.type,v.key,v.props,null,g.mode,S),S.ref=os(g,x,v),S.return=g,S)}function u(g,x,v,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=Ea(v,g.mode,S),x.return=g,x):(x=s(x,v.children||[]),x.return=g,x)}function p(g,x,v,S,j){return x===null||x.tag!==7?(x=Qn(v,g.mode,S,j),x.return=g,x):(x=s(x,v),x.return=g,x)}function f(g,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ca(""+x,g.mode,v),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ol:return v=Hl(x.type,x.key,x.props,null,g.mode,v),v.ref=os(g,null,x),v.return=g,v;case fr:return x=Ea(x,g.mode,v),x.return=g,x;case bn:var S=x._init;return f(g,S(x._payload),v)}if(us(x)||ts(x))return x=Qn(x,g.mode,v,null),x.return=g,x;gl(g,x)}return null}function h(g,x,v,S){var j=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return j!==null?null:i(g,x,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ol:return v.key===j?c(g,x,v,S):null;case fr:return v.key===j?u(g,x,v,S):null;case bn:return j=v._init,h(g,x,j(v._payload),S)}if(us(v)||ts(v))return j!==null?null:p(g,x,v,S,null);gl(g,v)}return null}function m(g,x,v,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(v)||null,i(x,g,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ol:return g=g.get(S.key===null?v:S.key)||null,c(x,g,S,j);case fr:return g=g.get(S.key===null?v:S.key)||null,u(x,g,S,j);case bn:var N=S._init;return m(g,x,v,N(S._payload),j)}if(us(S)||ts(S))return g=g.get(v)||null,p(x,g,S,j,null);gl(x,S)}return null}function w(g,x,v,S){for(var j=null,N=null,k=x,C=x=0,P=null;k!==null&&C<v.length;C++){k.index>C?(P=k,k=null):P=k.sibling;var R=h(g,k,v[C],S);if(R===null){k===null&&(k=P);break}e&&k&&R.alternate===null&&t(g,k),x=l(R,x,C),N===null?j=R:N.sibling=R,N=R,k=P}if(C===v.length)return n(g,k),_e&&Hn(g,C),j;if(k===null){for(;C<v.length;C++)k=f(g,v[C],S),k!==null&&(x=l(k,x,C),N===null?j=k:N.sibling=k,N=k);return _e&&Hn(g,C),j}for(k=r(g,k);C<v.length;C++)P=m(k,g,C,v[C],S),P!==null&&(e&&P.alternate!==null&&k.delete(P.key===null?C:P.key),x=l(P,x,C),N===null?j=P:N.sibling=P,N=P);return e&&k.forEach(function(z){return t(g,z)}),_e&&Hn(g,C),j}function y(g,x,v,S){var j=ts(v);if(typeof j!="function")throw Error(D(150));if(v=j.call(v),v==null)throw Error(D(151));for(var N=j=null,k=x,C=x=0,P=null,R=v.next();k!==null&&!R.done;C++,R=v.next()){k.index>C?(P=k,k=null):P=k.sibling;var z=h(g,k,R.value,S);if(z===null){k===null&&(k=P);break}e&&k&&z.alternate===null&&t(g,k),x=l(z,x,C),N===null?j=z:N.sibling=z,N=z,k=P}if(R.done)return n(g,k),_e&&Hn(g,C),j;if(k===null){for(;!R.done;C++,R=v.next())R=f(g,R.value,S),R!==null&&(x=l(R,x,C),N===null?j=R:N.sibling=R,N=R);return _e&&Hn(g,C),j}for(k=r(g,k);!R.done;C++,R=v.next())R=m(k,g,C,R.value,S),R!==null&&(e&&R.alternate!==null&&k.delete(R.key===null?C:R.key),x=l(R,x,C),N===null?j=R:N.sibling=R,N=R);return e&&k.forEach(function(te){return t(g,te)}),_e&&Hn(g,C),j}function b(g,x,v,S){if(typeof v=="object"&&v!==null&&v.type===pr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ol:e:{for(var j=v.key,N=x;N!==null;){if(N.key===j){if(j=v.type,j===pr){if(N.tag===7){n(g,N.sibling),x=s(N,v.props.children),x.return=g,g=x;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===bn&&Eu(j)===N.type){n(g,N.sibling),x=s(N,v.props),x.ref=os(g,N,v),x.return=g,g=x;break e}n(g,N);break}else t(g,N);N=N.sibling}v.type===pr?(x=Qn(v.props.children,g.mode,S,v.key),x.return=g,g=x):(S=Hl(v.type,v.key,v.props,null,g.mode,S),S.ref=os(g,x,v),S.return=g,g=S)}return a(g);case fr:e:{for(N=v.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){n(g,x.sibling),x=s(x,v.children||[]),x.return=g,g=x;break e}else{n(g,x);break}else t(g,x);x=x.sibling}x=Ea(v,g.mode,S),x.return=g,g=x}return a(g);case bn:return N=v._init,b(g,x,N(v._payload),S)}if(us(v))return w(g,x,v,S);if(ts(v))return y(g,x,v,S);gl(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(n(g,x.sibling),x=s(x,v),x.return=g,g=x):(n(g,x),x=Ca(v,g.mode,S),x.return=g,g=x),a(g)):n(g,x)}return b}var Lr=Jf(!0),qf=Jf(!1),so=Fn(null),lo=null,br=null,lc=null;function oc(){lc=br=lo=null}function ac(e){var t=so.current;Ee(so),e._currentValue=t}function pi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Tr(e,t){lo=e,lc=br=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ht=!0),e.firstContext=null)}function Ot(e){var t=e._currentValue;if(lc!==e)if(e={context:e,memoizedValue:t,next:null},br===null){if(lo===null)throw Error(D(308));br=e,lo.dependencies={lanes:0,firstContext:e}}else br=br.next=e;return t}var Xn=null;function ic(e){Xn===null?Xn=[e]:Xn.push(e)}function Zf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ic(t)):(n.next=s.next,s.next=n),t.interleaved=n,fn(e,r)}function fn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var kn=!1;function cc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ep(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,fn(e,n)}return s=r.interleaved,s===null?(t.next=t,ic(r)):(t.next=s.next,s.next=t),r.interleaved=t,fn(e,n)}function Ol(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ki(e,n)}}function Mu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function oo(e,t,n,r){var s=e.updateQueue;kn=!1;var l=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,u=c.next;c.next=null,a===null?l=u:a.next=u,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,i=p.lastBaseUpdate,i!==a&&(i===null?p.firstBaseUpdate=u:i.next=u,p.lastBaseUpdate=c))}if(l!==null){var f=s.baseState;a=0,p=u=c=null,i=l;do{var h=i.lane,m=i.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:m,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var w=e,y=i;switch(h=t,m=n,y.tag){case 1:if(w=y.payload,typeof w=="function"){f=w.call(m,f,h);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,h=typeof w=="function"?w.call(m,f,h):w,h==null)break e;f=Pe({},f,h);break e;case 2:kn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[i]:h.push(i))}else m={eventTime:m,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},p===null?(u=p=m,c=f):p=p.next=m,a|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;h=i,i=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);er|=a,e.lanes=a,e.memoizedState=f}}function _u(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var Js={},tn=Fn(Js),Ls=Fn(Js),Os=Fn(Js);function Yn(e){if(e===Js)throw Error(D(174));return e}function uc(e,t){switch(Se(Os,t),Se(Ls,e),Se(tn,Js),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ya(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ya(t,e)}Ee(tn),Se(tn,t)}function Or(){Ee(tn),Ee(Ls),Ee(Os)}function tp(e){Yn(Os.current);var t=Yn(tn.current),n=Ya(t,e.type);t!==n&&(Se(Ls,e),Se(tn,n))}function dc(e){Ls.current===e&&(Ee(tn),Ee(Ls))}var De=Fn(0);function ao(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var wa=[];function fc(){for(var e=0;e<wa.length;e++)wa[e]._workInProgressVersionPrimary=null;wa.length=0}var $l=mn.ReactCurrentDispatcher,ba=mn.ReactCurrentBatchConfig,Zn=0,Re=null,Be=null,Xe=null,io=!1,ys=!1,$s=0,Qx=0;function tt(){throw Error(D(321))}function pc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xt(e[n],t[n]))return!1;return!0}function hc(e,t,n,r,s,l){if(Zn=l,Re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$l.current=e===null||e.memoizedState===null?Zx:eg,e=n(r,s),ys){l=0;do{if(ys=!1,$s=0,25<=l)throw Error(D(301));l+=1,Xe=Be=null,t.updateQueue=null,$l.current=tg,e=n(r,s)}while(ys)}if($l.current=co,t=Be!==null&&Be.next!==null,Zn=0,Xe=Be=Re=null,io=!1,t)throw Error(D(300));return e}function mc(){var e=$s!==0;return $s=0,e}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Re.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function $t(){if(Be===null){var e=Re.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=Xe===null?Re.memoizedState:Xe.next;if(t!==null)Xe=t,Be=e;else{if(e===null)throw Error(D(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Xe===null?Re.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function As(e,t){return typeof t=="function"?t(e):t}function ka(e){var t=$t(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=Be,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var a=s.next;s.next=l.next,l.next=a}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var i=a=null,c=null,u=l;do{var p=u.lane;if((Zn&p)===p)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(i=c=f,a=r):c=c.next=f,Re.lanes|=p,er|=p}u=u.next}while(u!==null&&u!==l);c===null?a=r:c.next=i,Xt(r,t.memoizedState)||(ht=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,Re.lanes|=l,er|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ja(e){var t=$t(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do l=e(l,a.action),a=a.next;while(a!==s);Xt(l,t.memoizedState)||(ht=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function np(){}function rp(e,t){var n=Re,r=$t(),s=t(),l=!Xt(r.memoizedState,s);if(l&&(r.memoizedState=s,ht=!0),r=r.queue,xc(op.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Fs(9,lp.bind(null,n,r,s,t),void 0,null),Ke===null)throw Error(D(349));Zn&30||sp(n,t,s)}return s}function sp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function lp(e,t,n,r){t.value=n,t.getSnapshot=r,ap(t)&&ip(e)}function op(e,t,n){return n(function(){ap(t)&&ip(e)})}function ap(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xt(e,n)}catch(r){return!0}}function ip(e){var t=fn(e,1);t!==null&&Vt(t,e,1,-1)}function Tu(e){var t=qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:e},t.queue=e,e=e.dispatch=qx.bind(null,Re,e),[t.memoizedState,e]}function Fs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function cp(){return $t().memoizedState}function Al(e,t,n,r){var s=qt();Re.flags|=e,s.memoizedState=Fs(1|t,n,void 0,r===void 0?null:r)}function To(e,t,n,r){var s=$t();r=r===void 0?null:r;var l=void 0;if(Be!==null){var a=Be.memoizedState;if(l=a.destroy,r!==null&&pc(r,a.deps)){s.memoizedState=Fs(t,n,l,r);return}}Re.flags|=e,s.memoizedState=Fs(1|t,n,l,r)}function Du(e,t){return Al(8390656,8,e,t)}function xc(e,t){return To(2048,8,e,t)}function up(e,t){return To(4,2,e,t)}function dp(e,t){return To(4,4,e,t)}function fp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pp(e,t,n){return n=n!=null?n.concat([e]):null,To(4,4,fp.bind(null,t,e),n)}function gc(){}function hp(e,t){var n=$t();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&pc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function mp(e,t){var n=$t();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&pc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function xp(e,t,n){return Zn&21?(Xt(n,t)||(n=bf(),Re.lanes|=n,er|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=n)}function Gx(e,t){var n=ve;ve=n!==0&&4>n?n:4,e(!0);var r=ba.transition;ba.transition={};try{e(!1),t()}finally{ve=n,ba.transition=r}}function gp(){return $t().memoizedState}function Jx(e,t,n){var r=In(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yp(e))vp(t,n);else if(n=Zf(e,t,n,r),n!==null){var s=it();Vt(n,e,r,s),wp(n,t,r)}}function qx(e,t,n){var r=In(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yp(e))vp(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,i=l(a,n);if(s.hasEagerState=!0,s.eagerState=i,Xt(i,a)){var c=t.interleaved;c===null?(s.next=s,ic(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch(u){}finally{}n=Zf(e,t,s,r),n!==null&&(s=it(),Vt(n,e,r,s),wp(n,t,r))}}function yp(e){var t=e.alternate;return e===Re||t!==null&&t===Re}function vp(e,t){ys=io=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function wp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ki(e,n)}}var co={readContext:Ot,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},Zx={readContext:Ot,useCallback:function(e,t){return qt().memoizedState=[e,t===void 0?null:t],e},useContext:Ot,useEffect:Du,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Al(4194308,4,fp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Al(4194308,4,e,t)},useInsertionEffect:function(e,t){return Al(4,2,e,t)},useMemo:function(e,t){var n=qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=qt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Jx.bind(null,Re,e),[r.memoizedState,e]},useRef:function(e){var t=qt();return e={current:e},t.memoizedState=e},useState:Tu,useDebugValue:gc,useDeferredValue:function(e){return qt().memoizedState=e},useTransition:function(){var e=Tu(!1),t=e[0];return e=Gx.bind(null,e[1]),qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Re,s=qt();if(_e){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),Ke===null)throw Error(D(349));Zn&30||sp(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,Du(op.bind(null,r,l,e),[e]),r.flags|=2048,Fs(9,lp.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=qt(),t=Ke.identifierPrefix;if(_e){var n=an,r=on;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=$s++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Qx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eg={readContext:Ot,useCallback:hp,useContext:Ot,useEffect:xc,useImperativeHandle:pp,useInsertionEffect:up,useLayoutEffect:dp,useMemo:mp,useReducer:ka,useRef:cp,useState:function(){return ka(As)},useDebugValue:gc,useDeferredValue:function(e){var t=$t();return xp(t,Be.memoizedState,e)},useTransition:function(){var e=ka(As)[0],t=$t().memoizedState;return[e,t]},useMutableSource:np,useSyncExternalStore:rp,useId:gp,unstable_isNewReconciler:!1},tg={readContext:Ot,useCallback:hp,useContext:Ot,useEffect:xc,useImperativeHandle:pp,useInsertionEffect:up,useLayoutEffect:dp,useMemo:mp,useReducer:ja,useRef:cp,useState:function(){return ja(As)},useDebugValue:gc,useDeferredValue:function(e){var t=$t();return Be===null?t.memoizedState=e:xp(t,Be.memoizedState,e)},useTransition:function(){var e=ja(As)[0],t=$t().memoizedState;return[e,t]},useMutableSource:np,useSyncExternalStore:rp,useId:gp,unstable_isNewReconciler:!1};function Bt(e,t){if(e&&e.defaultProps){t=Pe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Pe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Do={isMounted:function(e){return(e=e._reactInternals)?rr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=it(),s=In(e),l=cn(r,s);l.payload=t,n!=null&&(l.callback=n),t=Pn(e,l,s),t!==null&&(Vt(t,e,s,r),Ol(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=it(),s=In(e),l=cn(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Pn(e,l,s),t!==null&&(Vt(t,e,s,r),Ol(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=it(),r=In(e),s=cn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Pn(e,s,r),t!==null&&(Vt(t,e,r,n),Ol(t,e,r))}};function Ru(e,t,n,r,s,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!Rs(n,r)||!Rs(s,l):!0}function bp(e,t,n){var r=!1,s=$n,l=t.contextType;return typeof l=="object"&&l!==null?l=Ot(l):(s=xt(t)?Jn:st.current,r=t.contextTypes,l=(r=r!=null)?zr(e,s):$n),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Do,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function Pu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Do.enqueueReplaceState(t,t.state,null)}function mi(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},cc(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Ot(l):(l=xt(t)?Jn:st.current,s.context=zr(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(hi(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Do.enqueueReplaceState(s,s.state,null),oo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function $r(e,t){try{var n="",r=t;do n+=_m(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function Sa(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function xi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ng=typeof WeakMap=="function"?WeakMap:Map;function kp(e,t,n){n=cn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){fo||(fo=!0,Ci=r),xi(e,t)},n}function jp(e,t,n){n=cn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){xi(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){xi(e,t),typeof r!="function"&&(zn===null?zn=new Set([this]):zn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function zu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ng;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=xg.bind(null,e,t,n),t.then(e,e))}function Iu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Lu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=cn(-1,1),t.tag=2,Pn(n,t,1))),n.lanes|=1),e)}var rg=mn.ReactCurrentOwner,ht=!1;function at(e,t,n,r){t.child=e===null?qf(t,null,n,r):Lr(t,e.child,n,r)}function Ou(e,t,n,r,s){n=n.render;var l=t.ref;return Tr(t,s),r=hc(e,t,n,r,l,s),n=mc(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pn(e,t,s)):(_e&&n&&nc(t),t.flags|=1,at(e,t,r,s),t.child)}function $u(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!Nc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Sp(e,t,l,r,s)):(e=Hl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:Rs,n(a,r)&&e.ref===t.ref)return pn(e,t,s)}return t.flags|=1,e=Ln(l,r),e.ref=t.ref,e.return=t,t.child=e}function Sp(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(Rs(l,r)&&e.ref===t.ref)if(ht=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(ht=!0);else return t.lanes=e.lanes,pn(e,t,s)}return gi(e,t,n,r,s)}function Np(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(jr,bt),bt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Se(jr,bt),bt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Se(jr,bt),bt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,Se(jr,bt),bt|=r;return at(e,t,s,n),t.child}function Cp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function gi(e,t,n,r,s){var l=xt(n)?Jn:st.current;return l=zr(t,l),Tr(t,s),n=hc(e,t,n,r,l,s),r=mc(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pn(e,t,s)):(_e&&r&&nc(t),t.flags|=1,at(e,t,n,s),t.child)}function Au(e,t,n,r,s){if(xt(n)){var l=!0;to(t)}else l=!1;if(Tr(t,s),t.stateNode===null)Fl(e,t),bp(t,n,r),mi(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ot(u):(u=xt(n)?Jn:st.current,u=zr(t,u));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==u)&&Pu(t,a,r,u),kn=!1;var h=t.memoizedState;a.state=h,oo(t,r,a,s),c=t.memoizedState,i!==r||h!==c||mt.current||kn?(typeof p=="function"&&(hi(t,n,p,r),c=t.memoizedState),(i=kn||Ru(t,n,i,r,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,ep(e,t),i=t.memoizedProps,u=t.type===t.elementType?i:Bt(t.type,i),a.props=u,f=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ot(c):(c=xt(n)?Jn:st.current,c=zr(t,c));var m=n.getDerivedStateFromProps;(p=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||h!==c)&&Pu(t,a,r,c),kn=!1,h=t.memoizedState,a.state=h,oo(t,r,a,s);var w=t.memoizedState;i!==f||h!==w||mt.current||kn?(typeof m=="function"&&(hi(t,n,m,r),w=t.memoizedState),(u=kn||Ru(t,n,u,r,h,w,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return yi(e,t,n,r,l,s)}function yi(e,t,n,r,s,l){Cp(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Su(t,n,!1),pn(e,t,l);r=t.stateNode,rg.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Lr(t,e.child,null,l),t.child=Lr(t,null,i,l)):at(e,t,i,l),t.memoizedState=r.state,s&&Su(t,n,!0),t.child}function Ep(e){var t=e.stateNode;t.pendingContext?ju(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ju(e,t.context,!1),uc(e,t.containerInfo)}function Fu(e,t,n,r,s){return Ir(),sc(s),t.flags|=256,at(e,t,n,r),t.child}var vi={dehydrated:null,treeContext:null,retryLane:0};function wi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mp(e,t,n){var r=t.pendingProps,s=De.current,l=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Se(De,s&1),e===null)return fi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=zo(a,r,0,null),e=Qn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=wi(n),t.memoizedState=vi,e):yc(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return sg(e,t,a,r,i,s,n);if(l){l=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ln(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?l=Ln(i,l):(l=Qn(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?wi(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=vi,r}return l=e.child,e=l.sibling,r=Ln(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function yc(e,t){return t=zo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function yl(e,t,n,r){return r!==null&&sc(r),Lr(t,e.child,null,n),e=yc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sg(e,t,n,r,s,l,a){if(n)return t.flags&256?(t.flags&=-257,r=Sa(Error(D(422))),yl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=zo({mode:"visible",children:r.children},s,0,null),l=Qn(l,s,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Lr(t,e.child,null,a),t.child.memoizedState=wi(a),t.memoizedState=vi,l);if(!(t.mode&1))return yl(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(D(419)),r=Sa(l,r,void 0),yl(e,t,a,r)}if(i=(a&e.childLanes)!==0,ht||i){if(r=Ke,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,fn(e,s),Vt(r,e,s,-1))}return Sc(),r=Sa(Error(D(421))),yl(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=gg.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,kt=Rn(s.nextSibling),jt=t,_e=!0,Ht=null,e!==null&&(Pt[zt++]=on,Pt[zt++]=an,Pt[zt++]=qn,on=e.id,an=e.overflow,qn=t),t=yc(t,r.children),t.flags|=4096,t)}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),pi(e.return,t,n)}function Na(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function _p(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(at(e,t,r.children,n),r=De.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bu(e,n,t);else if(e.tag===19)Bu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Se(De,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ao(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Na(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ao(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Na(t,!0,n,null,l);break;case"together":Na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),er|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=Ln(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ln(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function lg(e,t,n){switch(t.tag){case 3:Ep(t),Ir();break;case 5:tp(t);break;case 1:xt(t.type)&&to(t);break;case 4:uc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Se(so,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Se(De,De.current&1),t.flags|=128,null):n&t.child.childLanes?Mp(e,t,n):(Se(De,De.current&1),e=pn(e,t,n),e!==null?e.sibling:null);Se(De,De.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return _p(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Se(De,De.current),r)break;return null;case 22:case 23:return t.lanes=0,Np(e,t,n)}return pn(e,t,n)}var Tp,bi,Dp,Rp;Tp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bi=function(){};Dp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Yn(tn.current);var l=null;switch(n){case"input":s=Ha(e,s),r=Ha(e,r),l=[];break;case"select":s=Pe({},s,{value:void 0}),r=Pe({},r,{value:void 0}),l=[];break;case"textarea":s=Xa(e,s),r=Xa(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Zl)}Ka(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var i=s[u];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ns.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in r){var c=r[u];if(i=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==i&&(c!=null||i!=null))if(u==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(l||(l=[]),l.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ns.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ne("scroll",e),l||i===c||(l=[])):(l=l||[]).push(u,c))}n&&(l=l||[]).push("style",n);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};Rp=function(e,t,n,r){n!==r&&(t.flags|=4)};function as(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function og(e,t,n){var r=t.pendingProps;switch(rc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return xt(t.type)&&eo(),nt(t),null;case 3:return r=t.stateNode,Or(),Ee(mt),Ee(st),fc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(xl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ht!==null&&(_i(Ht),Ht=null))),bi(e,t),nt(t),null;case 5:dc(t);var s=Yn(Os.current);if(n=t.type,e!==null&&t.stateNode!=null)Dp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return nt(t),null}if(e=Yn(tn.current),xl(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Zt]=t,r[Is]=l,e=(t.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<fs.length;s++)Ne(fs[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Gc(r,l),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ne("invalid",r);break;case"textarea":qc(r,l),Ne("invalid",r)}Ka(n,l),s=null;for(var a in l)if(l.hasOwnProperty(a)){var i=l[a];a==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&ml(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&ml(r.textContent,i,e),s=["children",""+i]):Ns.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Ne("scroll",r)}switch(n){case"input":al(r),Jc(r,l,!0);break;case"textarea":al(r),Zc(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Zl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Zt]=t,e[Is]=r,Tp(e,t,!1,!1),t.stateNode=e;e:{switch(a=Qa(n,r),n){case"dialog":Ne("cancel",e),Ne("close",e),s=r;break;case"iframe":case"object":case"embed":Ne("load",e),s=r;break;case"video":case"audio":for(s=0;s<fs.length;s++)Ne(fs[s],e);s=r;break;case"source":Ne("error",e),s=r;break;case"img":case"image":case"link":Ne("error",e),Ne("load",e),s=r;break;case"details":Ne("toggle",e),s=r;break;case"input":Gc(e,r),s=Ha(e,r),Ne("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Pe({},r,{value:void 0}),Ne("invalid",e);break;case"textarea":qc(e,r),s=Xa(e,r),Ne("invalid",e);break;default:s=r}Ka(n,s),i=s;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?cf(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&of(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Cs(e,c):typeof c=="number"&&Cs(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ns.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Ne("scroll",e):c!=null&&Ui(e,l,c,a))}switch(n){case"input":al(e),Jc(e,r,!1);break;case"textarea":al(e),Zc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+On(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Cr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Cr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Zl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return nt(t),null;case 6:if(e&&t.stateNode!=null)Rp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=Yn(Os.current),Yn(tn.current),xl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Zt]=t,(l=r.nodeValue!==n)&&(e=jt,e!==null))switch(e.tag){case 3:ml(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ml(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zt]=t,t.stateNode=r}return nt(t),null;case 13:if(Ee(De),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_e&&kt!==null&&t.mode&1&&!(t.flags&128))Gf(),Ir(),t.flags|=98560,l=!1;else if(l=xl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(D(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(D(317));l[Zt]=t}else Ir(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;nt(t),l=!1}else Ht!==null&&(_i(Ht),Ht=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||De.current&1?He===0&&(He=3):Sc())),t.updateQueue!==null&&(t.flags|=4),nt(t),null);case 4:return Or(),bi(e,t),e===null&&Ps(t.stateNode.containerInfo),nt(t),null;case 10:return ac(t.type._context),nt(t),null;case 17:return xt(t.type)&&eo(),nt(t),null;case 19:if(Ee(De),l=t.memoizedState,l===null)return nt(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)as(l,!1);else{if(He!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=ao(e),a!==null){for(t.flags|=128,as(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Se(De,De.current&1|2),t.child}e=e.sibling}l.tail!==null&&$e()>Ar&&(t.flags|=128,r=!0,as(l,!1),t.lanes=4194304)}else{if(!r)if(e=ao(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),as(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!_e)return nt(t),null}else 2*$e()-l.renderingStartTime>Ar&&n!==1073741824&&(t.flags|=128,r=!0,as(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=$e(),t.sibling=null,n=De.current,Se(De,r?n&1|2:n&1),t):(nt(t),null);case 22:case 23:return jc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?bt&1073741824&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function ag(e,t){switch(rc(t),t.tag){case 1:return xt(t.type)&&eo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Or(),Ee(mt),Ee(st),fc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return dc(t),null;case 13:if(Ee(De),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Ir()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ee(De),null;case 4:return Or(),null;case 10:return ac(t.type._context),null;case 22:case 23:return jc(),null;case 24:return null;default:return null}}var vl=!1,rt=!1,ig=typeof WeakSet=="function"?WeakSet:Set,H=null;function kr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(e,t,r)}else n.current=null}function ki(e,t,n){try{n()}catch(r){Le(e,t,r)}}var Uu=!1;function cg(e,t){if(li=Gl,e=Of(),tc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch(S){n=null;break e}var a=0,i=-1,c=-1,u=0,p=0,f=e,h=null;t:for(;;){for(var m;f!==n||s!==0&&f.nodeType!==3||(i=a+s),f!==l||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===n&&++u===s&&(i=a),h===l&&++p===r&&(c=a),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(oi={focusedElem:e,selectionRange:n},Gl=!1,H=t;H!==null;)if(t=H,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,H=e;else for(;H!==null;){t=H;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,b=w.memoizedState,g=t.stateNode,x=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Bt(t.type,y),b);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(S){Le(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,H=e;break}H=t.return}return w=Uu,Uu=!1,w}function vs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&ki(t,n,l)}s=s.next}while(s!==r)}}function Ro(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ji(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Pp(e){var t=e.alternate;t!==null&&(e.alternate=null,Pp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Zt],delete t[Is],delete t[ci],delete t[Vx],delete t[Xx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zp(e){return e.tag===5||e.tag===3||e.tag===4}function Hu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Si(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Zl));else if(r!==4&&(e=e.child,e!==null))for(Si(e,t,n),e=e.sibling;e!==null;)Si(e,t,n),e=e.sibling}function Ni(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ni(e,t,n),e=e.sibling;e!==null;)Ni(e,t,n),e=e.sibling}var Ge=null,Ut=!1;function wn(e,t,n){for(n=n.child;n!==null;)Ip(e,t,n),n=n.sibling}function Ip(e,t,n){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(So,n)}catch(i){}switch(n.tag){case 5:rt||kr(n,t);case 6:var r=Ge,s=Ut;Ge=null,wn(e,t,n),Ge=r,Ut=s,Ge!==null&&(Ut?(e=Ge,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(Ut?(e=Ge,n=n.stateNode,e.nodeType===8?ya(e.parentNode,n):e.nodeType===1&&ya(e,n),Ts(e)):ya(Ge,n.stateNode));break;case 4:r=Ge,s=Ut,Ge=n.stateNode.containerInfo,Ut=!0,wn(e,t,n),Ge=r,Ut=s;break;case 0:case 11:case 14:case 15:if(!rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&ki(n,t,a),s=s.next}while(s!==r)}wn(e,t,n);break;case 1:if(!rt&&(kr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Le(n,t,i)}wn(e,t,n);break;case 21:wn(e,t,n);break;case 22:n.mode&1?(rt=(r=rt)||n.memoizedState!==null,wn(e,t,n),rt=r):wn(e,t,n);break;default:wn(e,t,n)}}function Wu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ig),t.forEach(function(r){var s=yg.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ft(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:Ge=i.stateNode,Ut=!1;break e;case 3:Ge=i.stateNode.containerInfo,Ut=!0;break e;case 4:Ge=i.stateNode.containerInfo,Ut=!0;break e}i=i.return}if(Ge===null)throw Error(D(160));Ip(l,a,s),Ge=null,Ut=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Le(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Lp(t,e),t=t.sibling}function Lp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ft(t,e),Jt(e),r&4){try{vs(3,e,e.return),Ro(3,e)}catch(y){Le(e,e.return,y)}try{vs(5,e,e.return)}catch(y){Le(e,e.return,y)}}break;case 1:Ft(t,e),Jt(e),r&512&&n!==null&&kr(n,n.return);break;case 5:if(Ft(t,e),Jt(e),r&512&&n!==null&&kr(n,n.return),e.flags&32){var s=e.stateNode;try{Cs(s,"")}catch(y){Le(e,e.return,y)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&rf(s,l),Qa(i,a);var u=Qa(i,l);for(a=0;a<c.length;a+=2){var p=c[a],f=c[a+1];p==="style"?cf(s,f):p==="dangerouslySetInnerHTML"?of(s,f):p==="children"?Cs(s,f):Ui(s,p,f,u)}switch(i){case"input":Wa(s,l);break;case"textarea":sf(s,l);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var m=l.value;m!=null?Cr(s,!!l.multiple,m,!1):h!==!!l.multiple&&(l.defaultValue!=null?Cr(s,!!l.multiple,l.defaultValue,!0):Cr(s,!!l.multiple,l.multiple?[]:"",!1))}s[Is]=l}catch(y){Le(e,e.return,y)}}break;case 6:if(Ft(t,e),Jt(e),r&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(y){Le(e,e.return,y)}}break;case 3:if(Ft(t,e),Jt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ts(t.containerInfo)}catch(y){Le(e,e.return,y)}break;case 4:Ft(t,e),Jt(e);break;case 13:Ft(t,e),Jt(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(bc=$e())),r&4&&Wu(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(rt=(u=rt)||p,Ft(t,e),rt=u):Ft(t,e),Jt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!p&&e.mode&1)for(H=e,p=e.child;p!==null;){for(f=H=p;H!==null;){switch(h=H,m=h.child,h.tag){case 0:case 11:case 14:case 15:vs(4,h,h.return);break;case 1:kr(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(y){Le(r,n,y)}}break;case 5:kr(h,h.return);break;case 22:if(h.memoizedState!==null){Xu(f);continue}}m!==null?(m.return=h,H=m):Xu(f)}p=p.sibling}e:for(p=null,f=e;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,u?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=af("display",a))}catch(y){Le(e,e.return,y)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){Le(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ft(t,e),Jt(e),r&4&&Wu(e);break;case 21:break;default:Ft(t,e),Jt(e)}}function Jt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(zp(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Cs(s,""),r.flags&=-33);var l=Hu(e);Ni(e,l,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=Hu(e);Si(e,i,a);break;default:throw Error(D(161))}}catch(c){Le(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ug(e,t,n){H=e,Op(e)}function Op(e,t,n){for(var r=(e.mode&1)!==0;H!==null;){var s=H,l=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||vl;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||rt;i=vl;var u=rt;if(vl=a,(rt=c)&&!u)for(H=s;H!==null;)a=H,c=a.child,a.tag===22&&a.memoizedState!==null?Yu(s):c!==null?(c.return=a,H=c):Yu(s);for(;l!==null;)H=l,Op(l),l=l.sibling;H=s,vl=i,rt=u}Vu(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,H=l):Vu(e)}}function Vu(e){for(;H!==null;){var t=H;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rt||Ro(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!rt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Bt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&_u(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}_u(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&Ts(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}rt||t.flags&512&&ji(t)}catch(h){Le(t,t.return,h)}}if(t===e){H=null;break}if(n=t.sibling,n!==null){n.return=t.return,H=n;break}H=t.return}}function Xu(e){for(;H!==null;){var t=H;if(t===e){H=null;break}var n=t.sibling;if(n!==null){n.return=t.return,H=n;break}H=t.return}}function Yu(e){for(;H!==null;){var t=H;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ro(4,t)}catch(c){Le(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Le(t,s,c)}}var l=t.return;try{ji(t)}catch(c){Le(t,l,c)}break;case 5:var a=t.return;try{ji(t)}catch(c){Le(t,a,c)}}}catch(c){Le(t,t.return,c)}if(t===e){H=null;break}var i=t.sibling;if(i!==null){i.return=t.return,H=i;break}H=t.return}}var dg=Math.ceil,uo=mn.ReactCurrentDispatcher,vc=mn.ReactCurrentOwner,Lt=mn.ReactCurrentBatchConfig,de=0,Ke=null,Ae=null,Je=0,bt=0,jr=Fn(0),He=0,Bs=null,er=0,Po=0,wc=0,ws=null,pt=null,bc=0,Ar=1/0,sn=null,fo=!1,Ci=null,zn=null,wl=!1,En=null,po=0,bs=0,Ei=null,Bl=-1,Ul=0;function it(){return de&6?$e():Bl!==-1?Bl:Bl=$e()}function In(e){return e.mode&1?de&2&&Je!==0?Je&-Je:Kx.transition!==null?(Ul===0&&(Ul=bf()),Ul):(e=ve,e!==0||(e=window.event,e=e===void 0?16:Mf(e.type)),e):1}function Vt(e,t,n,r){if(50<bs)throw bs=0,Ei=null,Error(D(185));Ks(e,n,r),(!(de&2)||e!==Ke)&&(e===Ke&&(!(de&2)&&(Po|=n),He===4&&Nn(e,Je)),gt(e,r),n===1&&de===0&&!(t.mode&1)&&(Ar=$e()+500,_o&&Bn()))}function gt(e,t){var n=e.callbackNode;Km(e,t);var r=Ql(e,e===Ke?Je:0);if(r===0)n!==null&&nu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&nu(n),t===1)e.tag===0?Yx(Ku.bind(null,e)):Yf(Ku.bind(null,e)),Hx(function(){!(de&6)&&Bn()}),n=null;else{switch(kf(r)){case 1:n=Yi;break;case 4:n=vf;break;case 16:n=Kl;break;case 536870912:n=wf;break;default:n=Kl}n=Vp(n,$p.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $p(e,t){if(Bl=-1,Ul=0,de&6)throw Error(D(327));var n=e.callbackNode;if(Dr()&&e.callbackNode!==n)return null;var r=Ql(e,e===Ke?Je:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ho(e,r);else{t=r;var s=de;de|=2;var l=Fp();(Ke!==e||Je!==t)&&(sn=null,Ar=$e()+500,Kn(e,t));do try{hg();break}catch(i){Ap(e,i)}while(!0);oc(),uo.current=l,de=s,Ae!==null?t=0:(Ke=null,Je=0,t=He)}if(t!==0){if(t===2&&(s=ei(e),s!==0&&(r=s,t=Mi(e,s))),t===1)throw n=Bs,Kn(e,0),Nn(e,r),gt(e,$e()),n;if(t===6)Nn(e,r);else{if(s=e.current.alternate,!(r&30)&&!fg(s)&&(t=ho(e,r),t===2&&(l=ei(e),l!==0&&(r=l,t=Mi(e,l))),t===1))throw n=Bs,Kn(e,0),Nn(e,r),gt(e,$e()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:Wn(e,pt,sn);break;case 3:if(Nn(e,r),(r&130023424)===r&&(t=bc+500-$e(),10<t)){if(Ql(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){it(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ii(Wn.bind(null,e,pt,sn),t);break}Wn(e,pt,sn);break;case 4:if(Nn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Wt(r);l=1<<a,a=t[a],a>s&&(s=a),r&=~l}if(r=s,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dg(r/1960))-r,10<r){e.timeoutHandle=ii(Wn.bind(null,e,pt,sn),r);break}Wn(e,pt,sn);break;case 5:Wn(e,pt,sn);break;default:throw Error(D(329))}}}return gt(e,$e()),e.callbackNode===n?$p.bind(null,e):null}function Mi(e,t){var n=ws;return e.current.memoizedState.isDehydrated&&(Kn(e,t).flags|=256),e=ho(e,t),e!==2&&(t=pt,pt=n,t!==null&&_i(t)),e}function _i(e){pt===null?pt=e:pt.push.apply(pt,e)}function fg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!Xt(l(),s))return!1}catch(a){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nn(e,t){for(t&=~wc,t&=~Po,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function Ku(e){if(de&6)throw Error(D(327));Dr();var t=Ql(e,0);if(!(t&1))return gt(e,$e()),null;var n=ho(e,t);if(e.tag!==0&&n===2){var r=ei(e);r!==0&&(t=r,n=Mi(e,r))}if(n===1)throw n=Bs,Kn(e,0),Nn(e,t),gt(e,$e()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wn(e,pt,sn),gt(e,$e()),null}function kc(e,t){var n=de;de|=1;try{return e(t)}finally{de=n,de===0&&(Ar=$e()+500,_o&&Bn())}}function tr(e){En!==null&&En.tag===0&&!(de&6)&&Dr();var t=de;de|=1;var n=Lt.transition,r=ve;try{if(Lt.transition=null,ve=1,e)return e()}finally{ve=r,Lt.transition=n,de=t,!(de&6)&&Bn()}}function jc(){bt=jr.current,Ee(jr)}function Kn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Ux(n)),Ae!==null)for(n=Ae.return;n!==null;){var r=n;switch(rc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&eo();break;case 3:Or(),Ee(mt),Ee(st),fc();break;case 5:dc(r);break;case 4:Or();break;case 13:Ee(De);break;case 19:Ee(De);break;case 10:ac(r.type._context);break;case 22:case 23:jc()}n=n.return}if(Ke=e,Ae=e=Ln(e.current,null),Je=bt=t,He=0,Bs=null,wc=Po=er=0,pt=ws=null,Xn!==null){for(t=0;t<Xn.length;t++)if(n=Xn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=s,r.next=a}n.pending=r}Xn=null}return e}function Ap(e,t){do{var n=Ae;try{if(oc(),$l.current=co,io){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}io=!1}if(Zn=0,Xe=Be=Re=null,ys=!1,$s=0,vc.current=null,n===null||n.return===null){He=1,Bs=t,Ae=null;break}e:{var l=e,a=n.return,i=n,c=t;if(t=Je,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,p=i,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var m=Iu(a);if(m!==null){m.flags&=-257,Lu(m,a,i,l,t),m.mode&1&&zu(l,u,t),t=m,c=u;var w=t.updateQueue;if(w===null){var y=new Set;y.add(c),t.updateQueue=y}else w.add(c);break e}else{if(!(t&1)){zu(l,u,t),Sc();break e}c=Error(D(426))}}else if(_e&&i.mode&1){var b=Iu(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Lu(b,a,i,l,t),sc($r(c,i));break e}}l=c=$r(c,i),He!==4&&(He=2),ws===null?ws=[l]:ws.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var g=kp(l,c,t);Mu(l,g);break e;case 1:i=c;var x=l.type,v=l.stateNode;if(!(l.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(zn===null||!zn.has(v)))){l.flags|=65536,t&=-t,l.lanes|=t;var S=jp(l,i,t);Mu(l,S);break e}}l=l.return}while(l!==null)}Up(n)}catch(j){t=j,Ae===n&&n!==null&&(Ae=n=n.return);continue}break}while(!0)}function Fp(){var e=uo.current;return uo.current=co,e===null?co:e}function Sc(){(He===0||He===3||He===2)&&(He=4),Ke===null||!(er&268435455)&&!(Po&268435455)||Nn(Ke,Je)}function ho(e,t){var n=de;de|=2;var r=Fp();(Ke!==e||Je!==t)&&(sn=null,Kn(e,t));do try{pg();break}catch(s){Ap(e,s)}while(!0);if(oc(),de=n,uo.current=r,Ae!==null)throw Error(D(261));return Ke=null,Je=0,He}function pg(){for(;Ae!==null;)Bp(Ae)}function hg(){for(;Ae!==null&&!Am();)Bp(Ae)}function Bp(e){var t=Wp(e.alternate,e,bt);e.memoizedProps=e.pendingProps,t===null?Up(e):Ae=t,vc.current=null}function Up(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ag(n,t),n!==null){n.flags&=32767,Ae=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{He=6,Ae=null;return}}else if(n=og(n,t,bt),n!==null){Ae=n;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);He===0&&(He=5)}function Wn(e,t,n){var r=ve,s=Lt.transition;try{Lt.transition=null,ve=1,mg(e,t,n,r)}finally{Lt.transition=s,ve=r}return null}function mg(e,t,n,r){do Dr();while(En!==null);if(de&6)throw Error(D(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Qm(e,l),e===Ke&&(Ae=Ke=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wl||(wl=!0,Vp(Kl,function(){return Dr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Lt.transition,Lt.transition=null;var a=ve;ve=1;var i=de;de|=4,vc.current=null,cg(e,n),Lp(n,e),Ix(oi),Gl=!!li,oi=li=null,e.current=n,ug(n),Fm(),de=i,ve=a,Lt.transition=l}else e.current=n;if(wl&&(wl=!1,En=e,po=s),l=e.pendingLanes,l===0&&(zn=null),Hm(n.stateNode),gt(e,$e()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(fo)throw fo=!1,e=Ci,Ci=null,e;return po&1&&e.tag!==0&&Dr(),l=e.pendingLanes,l&1?e===Ei?bs++:(bs=0,Ei=e):bs=0,Bn(),null}function Dr(){if(En!==null){var e=kf(po),t=Lt.transition,n=ve;try{if(Lt.transition=null,ve=16>e?16:e,En===null)var r=!1;else{if(e=En,En=null,po=0,de&6)throw Error(D(331));var s=de;for(de|=4,H=e.current;H!==null;){var l=H,a=l.child;if(H.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var u=i[c];for(H=u;H!==null;){var p=H;switch(p.tag){case 0:case 11:case 15:vs(8,p,l)}var f=p.child;if(f!==null)f.return=p,H=f;else for(;H!==null;){p=H;var h=p.sibling,m=p.return;if(Pp(p),p===u){H=null;break}if(h!==null){h.return=m,H=h;break}H=m}}}var w=l.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}H=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,H=a;else e:for(;H!==null;){if(l=H,l.flags&2048)switch(l.tag){case 0:case 11:case 15:vs(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,H=g;break e}H=l.return}}var x=e.current;for(H=x;H!==null;){a=H;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,H=v;else e:for(a=x;H!==null;){if(i=H,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Ro(9,i)}}catch(j){Le(i,i.return,j)}if(i===a){H=null;break e}var S=i.sibling;if(S!==null){S.return=i.return,H=S;break e}H=i.return}}if(de=s,Bn(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(So,e)}catch(j){}r=!0}return r}finally{ve=n,Lt.transition=t}}return!1}function Qu(e,t,n){t=$r(n,t),t=kp(e,t,1),e=Pn(e,t,1),t=it(),e!==null&&(Ks(e,1,t),gt(e,t))}function Le(e,t,n){if(e.tag===3)Qu(e,e,n);else for(;t!==null;){if(t.tag===3){Qu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zn===null||!zn.has(r))){e=$r(n,e),e=jp(t,e,1),t=Pn(t,e,1),e=it(),t!==null&&(Ks(t,1,e),gt(t,e));break}}t=t.return}}function xg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&n,Ke===e&&(Je&n)===n&&(He===4||He===3&&(Je&130023424)===Je&&500>$e()-bc?Kn(e,0):wc|=n),gt(e,t)}function Hp(e,t){t===0&&(e.mode&1?(t=ul,ul<<=1,!(ul&130023424)&&(ul=4194304)):t=1);var n=it();e=fn(e,t),e!==null&&(Ks(e,t,n),gt(e,n))}function gg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Hp(e,n)}function yg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),Hp(e,n)}var Wp;Wp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)ht=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ht=!1,lg(e,t,n);ht=!!(e.flags&131072)}else ht=!1,_e&&t.flags&1048576&&Kf(t,ro,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Fl(e,t),e=t.pendingProps;var s=zr(t,st.current);Tr(t,n),s=hc(null,t,r,e,s,n);var l=mc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xt(r)?(l=!0,to(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,cc(t),s.updater=Do,t.stateNode=s,s._reactInternals=t,mi(t,r,e,n),t=yi(null,t,r,!0,l,n)):(t.tag=0,_e&&l&&nc(t),at(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Fl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=wg(r),e=Bt(r,e),s){case 0:t=gi(null,t,r,e,n);break e;case 1:t=Au(null,t,r,e,n);break e;case 11:t=Ou(null,t,r,e,n);break e;case 14:t=$u(null,t,r,Bt(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),gi(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),Au(e,t,r,s,n);case 3:e:{if(Ep(t),e===null)throw Error(D(387));r=t.pendingProps,l=t.memoizedState,s=l.element,ep(e,t),oo(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=$r(Error(D(423)),t),t=Fu(e,t,r,n,s);break e}else if(r!==s){s=$r(Error(D(424)),t),t=Fu(e,t,r,n,s);break e}else for(kt=Rn(t.stateNode.containerInfo.firstChild),jt=t,_e=!0,Ht=null,n=qf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ir(),r===s){t=pn(e,t,n);break e}at(e,t,r,n)}t=t.child}return t;case 5:return tp(t),e===null&&fi(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,a=s.children,ai(r,s)?a=null:l!==null&&ai(r,l)&&(t.flags|=32),Cp(e,t),at(e,t,a,n),t.child;case 6:return e===null&&fi(t),null;case 13:return Mp(e,t,n);case 4:return uc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Lr(t,null,r,n):at(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),Ou(e,t,r,s,n);case 7:return at(e,t,t.pendingProps,n),t.child;case 8:return at(e,t,t.pendingProps.children,n),t.child;case 12:return at(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,a=s.value,Se(so,r._currentValue),r._currentValue=a,l!==null)if(Xt(l.value,a)){if(l.children===s.children&&!mt.current){t=pn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){a=l.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=cn(-1,n&-n),c.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?c.next=c:(c.next=p.next,p.next=c),u.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),pi(l.return,n,t),i.lanes|=n;break}c=c.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(D(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),pi(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}at(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Tr(t,n),s=Ot(s),r=r(s),t.flags|=1,at(e,t,r,n),t.child;case 14:return r=t.type,s=Bt(r,t.pendingProps),s=Bt(r.type,s),$u(e,t,r,s,n);case 15:return Sp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),Fl(e,t),t.tag=1,xt(r)?(e=!0,to(t)):e=!1,Tr(t,n),bp(t,r,s),mi(t,r,s,n),yi(null,t,r,!0,e,n);case 19:return _p(e,t,n);case 22:return Np(e,t,n)}throw Error(D(156,t.tag))};function Vp(e,t){return yf(e,t)}function vg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,t,n,r){return new vg(e,t,n,r)}function Nc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wg(e){if(typeof e=="function")return Nc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wi)return 11;if(e===Vi)return 14}return 2}function Ln(e,t){var n=e.alternate;return n===null?(n=It(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hl(e,t,n,r,s,l){var a=2;if(r=e,typeof e=="function")Nc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case pr:return Qn(n.children,s,l,t);case Hi:a=8,s|=8;break;case Aa:return e=It(12,n,t,s|2),e.elementType=Aa,e.lanes=l,e;case Fa:return e=It(13,n,t,s),e.elementType=Fa,e.lanes=l,e;case Ba:return e=It(19,n,t,s),e.elementType=Ba,e.lanes=l,e;case ef:return zo(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qd:a=10;break e;case Zd:a=9;break e;case Wi:a=11;break e;case Vi:a=14;break e;case bn:a=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=It(a,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function Qn(e,t,n,r){return e=It(7,e,r,t),e.lanes=n,e}function zo(e,t,n,r){return e=It(22,e,r,t),e.elementType=ef,e.lanes=n,e.stateNode={isHidden:!1},e}function Ca(e,t,n){return e=It(6,e,null,t),e.lanes=n,e}function Ea(e,t,n){return t=It(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bg(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aa(0),this.expirationTimes=aa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aa(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Cc(e,t,n,r,s,l,a,i,c){return e=new bg(e,t,n,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=It(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cc(l),e}function kg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Xp(e){if(!e)return $n;e=e._reactInternals;e:{if(rr(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(xt(n))return Xf(e,n,t)}return t}function Yp(e,t,n,r,s,l,a,i,c){return e=Cc(n,r,!0,e,s,l,a,i,c),e.context=Xp(null),n=e.current,r=it(),s=In(n),l=cn(r,s),l.callback=t!=null?t:null,Pn(n,l,s),e.current.lanes=s,Ks(e,s,r),gt(e,r),e}function Io(e,t,n,r){var s=t.current,l=it(),a=In(s);return n=Xp(n),t.context===null?t.context=n:t.pendingContext=n,t=cn(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Pn(s,t,a),e!==null&&(Vt(e,s,a,l),Ol(e,s,a)),a}function mo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ec(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}function jg(){return null}var Kp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Mc(e){this._internalRoot=e}Lo.prototype.render=Mc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));Io(e,t,null,null)};Lo.prototype.unmount=Mc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tr(function(){Io(null,e,null,null)}),t[dn]=null}};function Lo(e){this._internalRoot=e}Lo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sn.length&&t!==0&&t<Sn[n].priority;n++);Sn.splice(n,0,e),n===0&&Ef(e)}};function _c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Oo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ju(){}function Sg(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var u=mo(a);l.call(u)}}var a=Yp(t,r,e,0,null,!1,!1,"",Ju);return e._reactRootContainer=a,e[dn]=a.current,Ps(e.nodeType===8?e.parentNode:e),tr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var u=mo(c);i.call(u)}}var c=Cc(e,0,!1,null,null,!1,!1,"",Ju);return e._reactRootContainer=c,e[dn]=c.current,Ps(e.nodeType===8?e.parentNode:e),tr(function(){Io(t,c,n,r)}),c}function $o(e,t,n,r,s){var l=n._reactRootContainer;if(l){var a=l;if(typeof s=="function"){var i=s;s=function(){var c=mo(a);i.call(c)}}Io(t,a,e,s)}else a=Sg(n,t,e,s,r);return mo(a)}jf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ds(t.pendingLanes);n!==0&&(Ki(t,n|1),gt(t,$e()),!(de&6)&&(Ar=$e()+500,Bn()))}break;case 13:tr(function(){var r=fn(e,1);if(r!==null){var s=it();Vt(r,e,1,s)}}),Ec(e,1)}};Qi=function(e){if(e.tag===13){var t=fn(e,134217728);if(t!==null){var n=it();Vt(t,e,134217728,n)}Ec(e,134217728)}};Sf=function(e){if(e.tag===13){var t=In(e),n=fn(e,t);if(n!==null){var r=it();Vt(n,e,t,r)}Ec(e,t)}};Nf=function(){return ve};Cf=function(e,t){var n=ve;try{return ve=e,t()}finally{ve=n}};Ja=function(e,t,n){switch(t){case"input":if(Wa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Mo(r);if(!s)throw Error(D(90));nf(r),Wa(r,s)}}}break;case"textarea":sf(e,n);break;case"select":t=n.value,t!=null&&Cr(e,!!n.multiple,t,!1)}};ff=kc;pf=tr;var Ng={usingClientEntryPoint:!1,Events:[Gs,gr,Mo,uf,df,kc]},is={findFiberByHostInstance:Vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cg={bundleType:is.bundleType,version:is.version,rendererPackageName:is.rendererPackageName,rendererConfig:is.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xf(e),e===null?null:e.stateNode},findFiberByHostInstance:is.findFiberByHostInstance||jg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bl.isDisabled&&bl.supportsFiber)try{So=bl.inject(Cg),en=bl}catch(e){}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ng;Nt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_c(t))throw Error(D(200));return kg(e,t,null,n)};Nt.createRoot=function(e,t){if(!_c(e))throw Error(D(299));var n=!1,r="",s=Kp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Cc(e,1,!1,null,null,n,!1,r,s),e[dn]=t.current,Ps(e.nodeType===8?e.parentNode:e),new Mc(t)};Nt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=xf(t),e=e===null?null:e.stateNode,e};Nt.flushSync=function(e){return tr(e)};Nt.hydrate=function(e,t,n){if(!Oo(t))throw Error(D(200));return $o(null,e,t,!0,n)};Nt.hydrateRoot=function(e,t,n){if(!_c(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",a=Kp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Yp(t,null,e,1,n!=null?n:null,s,!1,l,a),e[dn]=t.current,Ps(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Lo(t)};Nt.render=function(e,t,n){if(!Oo(t))throw Error(D(200));return $o(null,e,t,!1,n)};Nt.unmountComponentAtNode=function(e){if(!Oo(e))throw Error(D(40));return e._reactRootContainer?(tr(function(){$o(null,null,e,!1,function(){e._reactRootContainer=null,e[dn]=null})}),!0):!1};Nt.unstable_batchedUpdates=kc;Nt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Oo(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return $o(e,t,n,!1,r)};Nt.version="18.3.1-next-f1338f8080-20240426";function Qp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qp)}catch(e){console.error(e)}}Qp(),Kd.exports=Nt;var Sr=Kd.exports,qu=Sr;Oa.createRoot=qu.createRoot,Oa.hydrateRoot=qu.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Us(){return Us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Us.apply(this,arguments)}var Mn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Mn||(Mn={}));const Zu="popstate";function Eg(e){e===void 0&&(e={});function t(s,l){let{pathname:a="/",search:i="",hash:c=""}=sr(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Ti("",{pathname:a,search:i,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(s,l){let a=s.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");i=u===-1?c:c.slice(0,u)}return i+"#"+(typeof l=="string"?l:Gp(l))}function r(s,l){Ao(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return _g(t,n,r,e)}function We(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function Ao(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Mg(){return Math.random().toString(36).substr(2,8)}function ed(e,t){return{usr:e.state,key:e.key,idx:t}}function Ti(e,t,n,r){return n===void 0&&(n=null),Us({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?sr(t):t,{state:n,key:t&&t.key||r||Mg()})}function Gp(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function sr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function _g(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,a=s.history,i=Mn.Pop,c=null,u=p();u==null&&(u=0,a.replaceState(Us({},a.state,{idx:u}),""));function p(){return(a.state||{idx:null}).idx}function f(){i=Mn.Pop;let b=p(),g=b==null?null:b-u;u=b,c&&c({action:i,location:y.location,delta:g})}function h(b,g){i=Mn.Push;let x=Ti(y.location,b,g);n&&n(x,b),u=p()+1;let v=ed(x,u),S=y.createHref(x);try{a.pushState(v,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}l&&c&&c({action:i,location:y.location,delta:1})}function m(b,g){i=Mn.Replace;let x=Ti(y.location,b,g);n&&n(x,b),u=p();let v=ed(x,u),S=y.createHref(x);a.replaceState(v,"",S),l&&c&&c({action:i,location:y.location,delta:0})}function w(b){let g=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof b=="string"?b:Gp(b);return x=x.replace(/ $/,"%20"),We(g,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,g)}let y={get action(){return i},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Zu,f),c=b,()=>{s.removeEventListener(Zu,f),c=null}},createHref(b){return t(s,b)},createURL:w,encodeLocation(b){let g=w(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:m,go(b){return a.go(b)}};return y}var td;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(td||(td={}));function Tg(e,t,n){return n===void 0&&(n="/"),Dg(e,t,n)}function Dg(e,t,n,r){let s=typeof t=="string"?sr(t):t,l=Zp(s.pathname||"/",n);if(l==null)return null;let a=Jp(e);Rg(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let u=Wg(l);i=Bg(a[c],u)}return i}function Jp(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,a,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:a,route:l};c.relativePath.startsWith("/")&&(We(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Gn([r,c.relativePath]),p=n.concat(c);l.children&&l.children.length>0&&(We(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Jp(l.children,t,p,u)),!(l.path==null&&!l.index)&&t.push({path:u,score:Ag(u,l.index),routesMeta:p})};return e.forEach((l,a)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))s(l,a);else for(let c of qp(l.path))s(l,a,c)}),t}function qp(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let a=qp(r.join("/")),i=[];return i.push(...a.map(c=>c===""?l:[l,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Rg(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Fg(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Pg=/^:[\w-]+$/,zg=3,Ig=2,Lg=1,Og=10,$g=-2,nd=e=>e==="*";function Ag(e,t){let n=e.split("/"),r=n.length;return n.some(nd)&&(r+=$g),t&&(r+=Ig),n.filter(s=>!nd(s)).reduce((s,l)=>s+(Pg.test(l)?zg:l===""?Lg:Og),r)}function Fg(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Bg(e,t,n){let{routesMeta:r}=e,s={},l="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],u=i===r.length-1,p=l==="/"?t:t.slice(l.length)||"/",f=Ug({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},p),h=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Gn([l,f.pathname]),pathnameBase:Jg(Gn([l,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(l=Gn([l,f.pathnameBase]))}return a}function Ug(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Hg(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],a=l.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((u,p,f)=>{let{paramName:h,isOptional:m}=p;if(h==="*"){let y=i[f]||"";a=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const w=i[f];return m&&!w?u[h]=void 0:u[h]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:a,pattern:e}}function Hg(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ao(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Wg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ao(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Zp(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const Vg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xg=e=>Vg.test(e);function Yg(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?sr(e):e,l;if(n)if(Xg(n))l=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Ao(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?l=rd(n.substring(1),"/"):l=rd(n,t)}else l=t;return{pathname:l,search:qg(r),hash:Zg(s)}}function rd(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ma(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Kg(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Qg(e,t){let n=Kg(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Gg(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=sr(e):(s=Us({},e),We(!s.pathname||!s.pathname.includes("?"),Ma("?","pathname","search",s)),We(!s.pathname||!s.pathname.includes("#"),Ma("#","pathname","hash",s)),We(!s.search||!s.search.includes("#"),Ma("#","search","hash",s)));let l=e===""||s.pathname==="",a=l?"/":s.pathname,i;if(a==null)i=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}i=f>=0?t[f]:"/"}let c=Yg(s,i),u=a&&a!=="/"&&a.endsWith("/"),p=(l||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||p)&&(c.pathname+="/"),c}const Gn=e=>e.join("/").replace(/\/\/+/g,"/"),Jg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),qg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Zg=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ey(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const eh=["post","put","patch","delete"];new Set(eh);const ty=["get",...eh];new Set(ty);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hs(){return Hs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hs.apply(this,arguments)}const Tc=d.createContext(null),ny=d.createContext(null),Fo=d.createContext(null),Bo=d.createContext(null),lr=d.createContext({outlet:null,matches:[],isDataRoute:!1}),th=d.createContext(null);function Uo(){return d.useContext(Bo)!=null}function Dc(){return Uo()||We(!1),d.useContext(Bo).location}function nh(e){d.useContext(Fo).static||d.useLayoutEffect(e)}function At(){let{isDataRoute:e}=d.useContext(lr);return e?my():ry()}function ry(){Uo()||We(!1);let e=d.useContext(Tc),{basename:t,future:n,navigator:r}=d.useContext(Fo),{matches:s}=d.useContext(lr),{pathname:l}=Dc(),a=JSON.stringify(Qg(s,n.v7_relativeSplatPath)),i=d.useRef(!1);return nh(()=>{i.current=!0}),d.useCallback(function(u,p){if(p===void 0&&(p={}),!i.current)return;if(typeof u=="number"){r.go(u);return}let f=Gg(u,JSON.parse(a),l,p.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Gn([t,f.pathname])),(p.replace?r.replace:r.push)(f,p.state,p)},[t,r,a,l,e])}function rh(){let{matches:e}=d.useContext(lr),t=e[e.length-1];return t?t.params:{}}function sy(e,t){return ly(e,t)}function ly(e,t,n,r){Uo()||We(!1);let{navigator:s}=d.useContext(Fo),{matches:l}=d.useContext(lr),a=l[l.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Dc(),p;if(t){var f;let b=typeof t=="string"?sr(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||We(!1),p=b}else p=u;let h=p.pathname||"/",m=h;if(c!=="/"){let b=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=Tg(e,{pathname:m}),y=uy(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},i,b.params),pathname:Gn([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Gn([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,n,r);return t&&y?d.createElement(Bo.Provider,{value:{location:Hs({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Mn.Pop}},y):y}function oy(){let e=hy(),t=ey(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},t),n?d.createElement("pre",{style:s},n):null,null)}const ay=d.createElement(oy,null);class iy extends d.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?d.createElement(lr.Provider,{value:this.props.routeContext},d.createElement(th.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cy(e){let{routeContext:t,match:n,children:r}=e,s=d.useContext(Tc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),d.createElement(lr.Provider,{value:t},r)}function uy(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let p=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);p>=0||We(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let f=a[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=p),f.route.id){let{loaderData:h,errors:m}=n,w=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||w){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((p,f,h)=>{let m,w=!1,y=null,b=null;n&&(m=i&&f.route.id?i[f.route.id]:void 0,y=f.route.errorElement||ay,c&&(u<0&&h===0?(xy("route-fallback"),w=!0,b=null):u===h&&(w=!0,b=f.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,h+1)),x=()=>{let v;return m?v=y:w?v=b:f.route.Component?v=d.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=p,d.createElement(cy,{match:f,routeContext:{outlet:p,matches:g,isDataRoute:n!=null},children:v})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?d.createElement(iy,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):x()},null)}var sh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(sh||{}),lh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(lh||{});function dy(e){let t=d.useContext(Tc);return t||We(!1),t}function fy(e){let t=d.useContext(ny);return t||We(!1),t}function py(e){let t=d.useContext(lr);return t||We(!1),t}function oh(e){let t=py(),n=t.matches[t.matches.length-1];return n.route.id||We(!1),n.route.id}function hy(){var e;let t=d.useContext(th),n=fy(),r=oh();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function my(){let{router:e}=dy(sh.UseNavigateStable),t=oh(lh.UseNavigateStable),n=d.useRef(!1);return nh(()=>{n.current=!0}),d.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Hs({fromRouteId:t},l)))},[e,t])}const sd={};function xy(e,t,n){sd[e]||(sd[e]=!0)}function gy(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ot(e){We(!1)}function yy(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Mn.Pop,navigator:l,static:a=!1,future:i}=e;Uo()&&We(!1);let c=t.replace(/^\/*/,"/"),u=d.useMemo(()=>({basename:c,navigator:l,static:a,future:Hs({v7_relativeSplatPath:!1},i)}),[c,i,l,a]);typeof r=="string"&&(r=sr(r));let{pathname:p="/",search:f="",hash:h="",state:m=null,key:w="default"}=r,y=d.useMemo(()=>{let b=Zp(p,c);return b==null?null:{location:{pathname:b,search:f,hash:h,state:m,key:w},navigationType:s}},[c,p,f,h,m,w,s]);return y==null?null:d.createElement(Fo.Provider,{value:u},d.createElement(Bo.Provider,{children:n,value:y}))}function vy(e){let{children:t,location:n}=e;return sy(Di(t),n)}new Promise(()=>{});function Di(e,t){t===void 0&&(t=[]);let n=[];return d.Children.forEach(e,(r,s)=>{if(!d.isValidElement(r))return;let l=[...t,s];if(r.type===d.Fragment){n.push.apply(n,Di(r.props.children,l));return}r.type!==ot&&We(!1),!r.props.index||!r.props.children||We(!1);let a={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Di(r.props.children,l)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const wy="6";try{window.__reactRouterVersion=wy}catch(e){}const by="startTransition",ld=xm[by];function ky(e){let{basename:t,children:n,future:r,window:s}=e,l=d.useRef();l.current==null&&(l.current=Eg({window:s,v5Compat:!0}));let a=l.current,[i,c]=d.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},p=d.useCallback(f=>{u&&ld?ld(()=>c(f)):c(f)},[c,u]);return d.useLayoutEffect(()=>a.listen(p),[a,p]),d.useEffect(()=>gy(r),[r]),d.createElement(yy,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}var od;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(od||(od={}));var ad;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ad||(ad={}));const Rc="";async function id(){var r,s;const e=localStorage.getItem("whisper_token");if(e)return e;const t=(s=(r=window.Telegram)==null?void 0:r.WebApp)==null?void 0:s.initData;if(t){const a=await(await fetch(`${Rc}/api/auth/telegram`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:t})})).json();if(a.success&&a.token)return localStorage.setItem("whisper_token",a.token),a.token}const n=new Error("need_login");throw n.code="NEED_LOGIN",n}async function $(e,t={}){let n=await id();const r=`${Rc}${e}`,s=a=>fetch(r,{...t,cache:"no-store",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`,...t.headers},body:t.body?JSON.stringify(t.body):void 0});let l=await s(n);if(l.status===401&&(localStorage.removeItem("whisper_token"),n=await id(),l=await s(n)),l.status===204)return null;if(!l.ok){const a=await l.json().catch(()=>({}));throw new Error(a.detail||` (${l.status})`)}return l.json()}async function jy(e){const n=await(await fetch(`${Rc}/api/auth/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})})).json();if(n.success&&n.token)return localStorage.setItem("whisper_token",n.token),!0;throw new Error(n.detail||"")}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ah=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ny={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:a,...i},c)=>d.createElement("svg",{ref:c,...Ny,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:ah("lucide",s),...i},[...a.map(([u,p])=>d.createElement(u,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(e,t)=>{const n=d.forwardRef(({className:r,...s},l)=>d.createElement(Cy,{ref:l,iconNode:t,className:ah(`lucide-${Sy(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=ie("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=ie("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=ie("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=ie("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=ie("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=ie("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=ie("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=ie("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=ie("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=ie("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=ie("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=ie("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=ie("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=ie("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=ie("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=ie("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=ie("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=ie("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=ie("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Vy="WhisperMiniDB",Xy=1,Ur="avatars",fh=()=>new Promise((e,t)=>{const n=indexedDB.open(Vy,Xy);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(Ur)||r.createObjectStore(Ur,{keyPath:"key"})}}),Ri=async(e,t)=>{const n=await fh();return new Promise((r,s)=>{const l=n.transaction([Ur],"readwrite");l.objectStore(Ur).put({key:e,base64:t}),l.oncomplete=()=>r(),l.onerror=()=>s(l.error)})},Kr=async e=>{const t=await fh();return new Promise((n,r)=>{const l=t.transaction([Ur],"readonly").objectStore(Ur).get(e);l.onsuccess=()=>{var a;return n(((a=l.result)==null?void 0:a.base64)||null)},l.onerror=()=>r(l.error)})},ft={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function cr({icon:e,label:t,desc:n,disabled:r,onClick:s,badge:l}){const[a,i]=d.useState(!1),c=()=>!r&&i(!0),u=()=>{i(!1),r||s==null||s()};return o.jsxs("button",{className:"flex flex-col items-start rounded-[18px] gap-2 text-left",style:{padding:"16px 14px",background:ft.bg,boxShadow:a?"inset 3px 3px 8px rgba(174,176,182,0.5), inset -3px -3px 8px #ffffff":"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff",opacity:r?.4:1,transform:a?"scale(0.97)":"scale(1)",transition:"transform 0.1s, box-shadow 0.1s",cursor:r?"default":"pointer",WebkitTapHighlightColor:"transparent"},disabled:r,onTouchStart:c,onTouchEnd:u,onMouseDown:c,onMouseUp:u,onMouseLeave:()=>i(!1),children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-[12px]",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))"},children:e}),l&&o.jsx("div",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full",style:{background:"#ef4444",border:"2px solid var(--bg)"}})]}),o.jsxs("div",{className:"pl-1",children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:ft.text},children:t}),o.jsx("div",{className:"mt-0.5 text-[10px] leading-snug",style:{color:ft.textMuted},children:n})]})]})}function dd({children:e}){return o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-[3px]",style:{color:ft.textMuted},children:e})}function Yy(){const e=At(),[t,n]=d.useState(()=>{try{return JSON.parse(localStorage.getItem("whisper_profile")||"null")}catch(u){return null}}),[r,s]=d.useState(null),[l,a]=d.useState(!1);d.useEffect(()=>{$("/api/user/profile").then(u=>{n(u),localStorage.setItem("whisper_profile",JSON.stringify(u))}).catch(()=>{}),Kr("user-avatar").then(u=>{u&&s(u)}).catch(function(){}),$("/api/diary/unread-count").then(u=>{u.count>0&&a(!0)}).catch(()=>{})},[]);const i=(t==null?void 0:t.nickname)||"",c=(t==null?void 0:t.background_url)||"";return o.jsxs("div",{className:"flex flex-col overflow-y-auto",style:{background:ft.bg,height:"100%",paddingBottom:16},children:[o.jsxs("div",{className:"flex flex-col px-5",style:{paddingTop:"max(12px, env(safe-area-inset-top))"},children:[o.jsx("h1",{className:"mb-4 text-center text-[17px] font-medium",style:{color:ft.textMuted,letterSpacing:"4px"},children:"W H I S P E R"}),o.jsxs("button",{className:"mb-5 flex w-full items-center gap-4 rounded-[20px] p-5 text-left",style:{background:ft.bg,boxShadow:"6px 6px 14px rgba(174,176,182,0.5), -6px -6px 14px #ffffff"},onClick:()=>e("/profile"),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:52,height:52,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:ft.bg},children:r?o.jsx("img",{src:r,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:22},children:""})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"text-[17px] font-bold truncate",style:{color:ft.text},children:["@",i]}),o.jsxs("div",{className:"mt-0.5 text-[11px] italic",style:{color:ft.textMuted},children:['"',c,'"']})]}),o.jsx(Fr,{size:16,style:{color:ft.textMuted,flexShrink:0}})]}),o.jsx(dd,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(cr,{icon:o.jsx(My,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/world-books")}),o.jsx(cr,{icon:o.jsx(_y,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/memories")}),o.jsx(cr,{icon:o.jsx(ih,{size:18,color:"white"}),label:"",desc:"Core Blocks",onClick:()=>e("/assistants")}),o.jsx(cr,{icon:o.jsx(Uy,{size:18,color:"white"}),label:"",desc:"API",onClick:()=>e("/settings")})]}),o.jsx(dd,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(cr,{icon:o.jsx(Ey,{size:18,color:"white"}),label:"",desc:"",badge:l,onClick:()=>e("/diary")}),o.jsx(cr,{icon:o.jsx(Hy,{size:18,color:"white"}),label:"",desc:"",disabled:!0})]}),o.jsx("button",{className:"flex w-full items-center justify-center rounded-[18px] py-4",style:{background:ft.bg,boxShadow:"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff"},onClick:()=>e("/cot"),children:o.jsx(Iy,{size:32,fill:ft.accent,style:{color:ft.accent,animation:"heartbeat 2s ease-in-out infinite"}})})]}),o.jsx("style",{children:`
        @keyframes heartbeat {
          0%, 100% { transform: scale(1); }
          15% { transform: scale(1.15); }
          30% { transform: scale(1); }
          45% { transform: scale(1.1); }
          60% { transform: scale(1); }
        }
      `})]})}function Ky(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const Vo=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function Qr(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function zc(e){return"nodeType"in e}function dt(e){var t,n;return e?Qr(e)?e:zc(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Ic(e){const{Document:t}=dt(e);return e instanceof t}function tl(e){return Qr(e)?!1:e instanceof dt(e).HTMLElement}function ph(e){return e instanceof dt(e).SVGElement}function Gr(e){return e?Qr(e)?e.document:zc(e)?Ic(e)?e:tl(e)||ph(e)?e.ownerDocument:document:document:document}const Yt=Vo?d.useLayoutEffect:d.useEffect;function Xo(e){const t=d.useRef(e);return Yt(()=>{t.current=e}),d.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function Qy(){const e=d.useRef(null),t=d.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=d.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Vs(e,t){t===void 0&&(t=[e]);const n=d.useRef(e);return Yt(()=>{n.current!==e&&(n.current=e)},t),n}function nl(e,t){const n=d.useRef();return d.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function xo(e){const t=Xo(e),n=d.useRef(null),r=d.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function go(e){const t=d.useRef();return d.useEffect(()=>{t.current=e},[e]),t.current}let _a={};function rl(e,t){return d.useMemo(()=>{if(t)return t;const n=_a[e]==null?0:_a[e]+1;return _a[e]=n,e+"-"+n},[e,t])}function hh(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const i=Object.entries(a);for(const[c,u]of i){const p=l[c];p!=null&&(l[c]=p+e*u)}return l},{...t})}}const Rr=hh(1),yo=hh(-1);function Gy(e){return"clientX"in e&&"clientY"in e}function Yo(e){if(!e)return!1;const{KeyboardEvent:t}=dt(e.target);return t&&e instanceof t}function Jy(e){if(!e)return!1;const{TouchEvent:t}=dt(e.target);return t&&e instanceof t}function vo(e){if(Jy(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Gy(e)?{x:e.clientX,y:e.clientY}:null}const hn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[hn.Translate.toString(e),hn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),fd="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function qy(e){return e.matches(fd)?e:e.querySelector(fd)}const Zy={display:"none"};function ev(e){let{id:t,value:n}=e;return Ce.createElement("div",{id:t,style:Zy},n)}function tv(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ce.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function nv(){const[e,t]=d.useState("");return{announce:d.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const mh=d.createContext(null);function rv(e){const t=d.useContext(mh);d.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function sv(){const[e]=d.useState(()=>new Set),t=d.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[d.useCallback(r=>{let{type:s,event:l}=r;e.forEach(a=>{var i;return(i=a[s])==null?void 0:i.call(a,l)})},[e]),t]}const lv={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ov={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function av(e){let{announcements:t=ov,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=lv}=e;const{announce:l,announcement:a}=nv(),i=rl("DndLiveRegion"),[c,u]=d.useState(!1);if(d.useEffect(()=>{u(!0)},[]),rv(d.useMemo(()=>({onDragStart(f){let{active:h}=f;l(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:m}=f;t.onDragMove&&l(t.onDragMove({active:h,over:m}))},onDragOver(f){let{active:h,over:m}=f;l(t.onDragOver({active:h,over:m}))},onDragEnd(f){let{active:h,over:m}=f;l(t.onDragEnd({active:h,over:m}))},onDragCancel(f){let{active:h,over:m}=f;l(t.onDragCancel({active:h,over:m}))}}),[l,t])),!c)return null;const p=Ce.createElement(Ce.Fragment,null,Ce.createElement(ev,{id:r,value:s.draggable}),Ce.createElement(tv,{id:i,announcement:a}));return n?Sr.createPortal(p,n):p}var Ue;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ue||(Ue={}));function wo(){}function bo(e,t){return d.useMemo(()=>({sensor:e,options:t!=null?t:{}}),[e,t])}function xh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Kt=Object.freeze({x:0,y:0});function iv(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function cv(e,t){const n=vo(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function uv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function dv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function fv(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function pd(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const gh=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=pd(t,t.left,t.top),l=[];for(const a of r){const{id:i}=a,c=n.get(i);if(c){const u=iv(pd(c),s);l.push({id:i,data:{droppableContainer:a,value:u}})}}return l.sort(uv)};function pv(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height),a=s-r,i=l-n;if(r<s&&n<l){const c=t.width*t.height,u=e.width*e.height,p=a*i,f=p/(c+u-p);return Number(f.toFixed(4))}return 0}const hv=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const l of r){const{id:a}=l,i=n.get(a);if(i){const c=pv(i,t);c>0&&s.push({id:a,data:{droppableContainer:l,value:c}})}}return s.sort(dv)};function mv(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function yh(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Kt}function xv(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,i)=>({...a,top:a.top+e*i.y,bottom:a.bottom+e*i.y,left:a.left+e*i.x,right:a.right+e*i.x}),{...n})}}const gv=xv(1);function vh(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function yv(e,t,n){const r=vh(t);if(!r)return e;const{scaleX:s,scaleY:l,x:a,y:i}=r,c=e.left-a-(1-s)*parseFloat(n),u=e.top-i-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),p=s?e.width/s:e.width,f=l?e.height/l:e.height;return{width:p,height:f,top:u,right:c+p,bottom:u+f,left:c}}const vv={ignoreTransform:!1};function Jr(e,t){t===void 0&&(t=vv);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:p}=dt(e).getComputedStyle(e);u&&(n=yv(n,u,p))}const{top:r,left:s,width:l,height:a,bottom:i,right:c}=n;return{top:r,left:s,width:l,height:a,bottom:i,right:c}}function hd(e){return Jr(e,{ignoreTransform:!0})}function wv(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function bv(e,t){return t===void 0&&(t=dt(e).getComputedStyle(e)),t.position==="fixed"}function kv(e,t){t===void 0&&(t=dt(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=t[s];return typeof l=="string"?n.test(l):!1})}function Lc(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Ic(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!tl(s)||ph(s)||n.includes(s))return n;const l=dt(e).getComputedStyle(s);return s!==e&&kv(s,l)&&n.push(s),bv(s,l)?n:r(s.parentNode)}return e?r(e):n}function wh(e){const[t]=Lc(e,1);return t!=null?t:null}function Ta(e){return!Vo||!e?null:Qr(e)?e:zc(e)?Ic(e)||e===Gr(e).scrollingElement?window:tl(e)?e:null:null}function bh(e){return Qr(e)?e.scrollX:e.scrollLeft}function kh(e){return Qr(e)?e.scrollY:e.scrollTop}function Pi(e){return{x:bh(e),y:kh(e)}}var Ye;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ye||(Ye={}));function jh(e){return!Vo||!e?!1:e===document.scrollingElement}function Sh(e){const t={x:0,y:0},n=jh(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,l=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:i,maxScroll:r,minScroll:t}}const jv={x:.2,y:.2};function Sv(e,t,n,r,s){let{top:l,left:a,right:i,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=jv);const{isTop:u,isBottom:p,isLeft:f,isRight:h}=Sh(e),m={x:0,y:0},w={x:0,y:0},y={height:t.height*s.y,width:t.width*s.x};return!u&&l<=t.top+y.height?(m.y=Ye.Backward,w.y=r*Math.abs((t.top+y.height-l)/y.height)):!p&&c>=t.bottom-y.height&&(m.y=Ye.Forward,w.y=r*Math.abs((t.bottom-y.height-c)/y.height)),!h&&i>=t.right-y.width?(m.x=Ye.Forward,w.x=r*Math.abs((t.right-y.width-i)/y.width)):!f&&a<=t.left+y.width&&(m.x=Ye.Backward,w.x=r*Math.abs((t.left+y.width-a)/y.width)),{direction:m,speed:w}}function Nv(e){if(e===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function Nh(e){return e.reduce((t,n)=>Rr(t,Pi(n)),Kt)}function Cv(e){return e.reduce((t,n)=>t+bh(n),0)}function Ev(e){return e.reduce((t,n)=>t+kh(n),0)}function Ch(e,t){if(t===void 0&&(t=Jr),!e)return;const{top:n,left:r,bottom:s,right:l}=t(e);wh(e)&&(s<=0||l<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Mv=[["x",["left","right"],Cv],["y",["top","bottom"],Ev]];class Oc{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Lc(n),s=Nh(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[l,a,i]of Mv)for(const c of a)Object.defineProperty(this,c,{get:()=>{const u=i(r),p=s[l]-u;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ks{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function _v(e){const{EventTarget:t}=dt(e);return e instanceof t?e:Gr(e)}function Da(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Rt;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Rt||(Rt={}));function md(e){e.preventDefault()}function Tv(e){e.stopPropagation()}var xe;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(xe||(xe={}));const Eh={start:[xe.Space,xe.Enter],cancel:[xe.Esc],end:[xe.Space,xe.Enter,xe.Tab]},Dv=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case xe.Right:return{...n,x:n.x+25};case xe.Left:return{...n,x:n.x-25};case xe.Down:return{...n,y:n.y+25};case xe.Up:return{...n,y:n.y-25}}};class Mh{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new ks(Gr(n)),this.windowListeners=new ks(dt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Rt.Resize,this.handleCancel),this.windowListeners.add(Rt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Rt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Ch(r),n(Kt)}handleKeyDown(t){if(Yo(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:l=Eh,coordinateGetter:a=Dv,scrollBehavior:i="smooth"}=s,{code:c}=t;if(l.end.includes(c)){this.handleEnd(t);return}if(l.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=r.current,p=u?{x:u.left,y:u.top}:Kt;this.referenceCoordinates||(this.referenceCoordinates=p);const f=a(t,{active:n,context:r.current,currentCoordinates:p});if(f){const h=yo(f,p),m={x:0,y:0},{scrollableAncestors:w}=r.current;for(const y of w){const b=t.code,{isTop:g,isRight:x,isLeft:v,isBottom:S,maxScroll:j,minScroll:N}=Sh(y),k=Nv(y),C={x:Math.min(b===xe.Right?k.right-k.width/2:k.right,Math.max(b===xe.Right?k.left:k.left+k.width/2,f.x)),y:Math.min(b===xe.Down?k.bottom-k.height/2:k.bottom,Math.max(b===xe.Down?k.top:k.top+k.height/2,f.y))},P=b===xe.Right&&!x||b===xe.Left&&!v,R=b===xe.Down&&!S||b===xe.Up&&!g;if(P&&C.x!==f.x){const z=y.scrollLeft+h.x,te=b===xe.Right&&z<=j.x||b===xe.Left&&z>=N.x;if(te&&!h.y){y.scrollTo({left:z,behavior:i});return}te?m.x=y.scrollLeft-z:m.x=b===xe.Right?y.scrollLeft-j.x:y.scrollLeft-N.x,m.x&&y.scrollBy({left:-m.x,behavior:i});break}else if(R&&C.y!==f.y){const z=y.scrollTop+h.y,te=b===xe.Down&&z<=j.y||b===xe.Up&&z>=N.y;if(te&&!h.x){y.scrollTo({top:z,behavior:i});return}te?m.y=y.scrollTop-z:m.y=b===xe.Down?y.scrollTop-j.y:y.scrollTop-N.y,m.y&&y.scrollBy({top:-m.y,behavior:i});break}}this.handleMove(t,Rr(yo(f,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Mh.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Eh,onActivation:s}=t,{active:l}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const i=l.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function xd(e){return!!(e&&"distance"in e)}function gd(e){return!!(e&&"delay"in e)}class $c{constructor(t,n,r){var s;r===void 0&&(r=_v(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:l}=t,{target:a}=l;this.props=t,this.events=n,this.document=Gr(a),this.documentListeners=new ks(this.document),this.listeners=new ks(r),this.windowListeners=new ks(dt(a)),this.initialCoordinates=(s=vo(l))!=null?s:Kt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Rt.Resize,this.handleCancel),this.windowListeners.add(Rt.DragStart,md),this.windowListeners.add(Rt.VisibilityChange,this.handleCancel),this.windowListeners.add(Rt.ContextMenu,md),this.documentListeners.add(Rt.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(gd(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(xd(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Rt.Click,Tv,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Rt.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:i}}=l;if(!s)return;const c=(n=vo(t))!=null?n:Kt,u=yo(s,c);if(!r&&i){if(xd(i)){if(i.tolerance!=null&&Da(u,i.tolerance))return this.handleCancel();if(Da(u,i.distance))return this.handleStart()}if(gd(i)&&Da(u,i.tolerance))return this.handleCancel();this.handlePending(i,u);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===xe.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Rv={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ko extends $c{constructor(t){const{event:n}=t,r=Gr(n.target);super(t,Rv,r)}}Ko.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Pv={move:{name:"mousemove"},end:{name:"mouseup"}};var zi;(function(e){e[e.RightClick=2]="RightClick"})(zi||(zi={}));class zv extends $c{constructor(t){super(t,Pv,Gr(t.event.target))}}zv.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===zi.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ra={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ac extends $c{constructor(t){super(t,Ra)}static setup(){return window.addEventListener(Ra.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ra.move.name,t)};function t(){}}}Ac.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var js;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(js||(js={}));var ko;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(ko||(ko={}));function Iv(e){let{acceleration:t,activator:n=js.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:i=ko.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:p,delta:f,threshold:h}=e;const m=Ov({delta:f,disabled:!l}),[w,y]=Qy(),b=d.useRef({x:0,y:0}),g=d.useRef({x:0,y:0}),x=d.useMemo(()=>{switch(n){case js.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case js.DraggableRect:return s}},[n,s,c]),v=d.useRef(null),S=d.useCallback(()=>{const N=v.current;if(!N)return;const k=b.current.x*g.current.x,C=b.current.y*g.current.y;N.scrollBy(k,C)},[]),j=d.useMemo(()=>i===ko.TreeOrder?[...u].reverse():u,[i,u]);d.useEffect(()=>{if(!l||!u.length||!x){y();return}for(const N of j){if((r==null?void 0:r(N))===!1)continue;const k=u.indexOf(N),C=p[k];if(!C)continue;const{direction:P,speed:R}=Sv(N,C,x,t,h);for(const z of["x","y"])m[z][P[z]]||(R[z]=0,P[z]=0);if(R.x>0||R.y>0){y(),v.current=N,w(S,a),b.current=R,g.current=P;return}}b.current={x:0,y:0},g.current={x:0,y:0},y()},[t,S,r,y,l,a,JSON.stringify(x),JSON.stringify(m),w,u,j,p,JSON.stringify(h)])}const Lv={x:{[Ye.Backward]:!1,[Ye.Forward]:!1},y:{[Ye.Backward]:!1,[Ye.Forward]:!1}};function Ov(e){let{delta:t,disabled:n}=e;const r=go(t);return nl(s=>{if(n||!r||!s)return Lv;const l={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Ye.Backward]:s.x[Ye.Backward]||l.x===-1,[Ye.Forward]:s.x[Ye.Forward]||l.x===1},y:{[Ye.Backward]:s.y[Ye.Backward]||l.y===-1,[Ye.Forward]:s.y[Ye.Forward]||l.y===1}}},[n,t,r])}function $v(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return nl(s=>{var l;return t==null?null:(l=r!=null?r:s)!=null?l:null},[r,t])}function Av(e,t){return d.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...l]},[]),[e,t])}var Xs;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Xs||(Xs={}));var Ii;(function(e){e.Optimized="optimized"})(Ii||(Ii={}));const yd=new Map;function Fv(e,t){let{dragging:n,dependencies:r,config:s}=t;const[l,a]=d.useState(null),{frequency:i,measure:c,strategy:u}=s,p=d.useRef(e),f=b(),h=Vs(f),m=d.useCallback(function(g){g===void 0&&(g=[]),!h.current&&a(x=>x===null?g:x.concat(g.filter(v=>!x.includes(v))))},[h]),w=d.useRef(null),y=nl(g=>{if(f&&!n)return yd;if(!g||g===yd||p.current!==e||l!=null){const x=new Map;for(let v of e){if(!v)continue;if(l&&l.length>0&&!l.includes(v.id)&&v.rect.current){x.set(v.id,v.rect.current);continue}const S=v.node.current,j=S?new Oc(c(S),S):null;v.rect.current=j,j&&x.set(v.id,j)}return x}return g},[e,l,n,f,c]);return d.useEffect(()=>{p.current=e},[e]),d.useEffect(()=>{f||m()},[n,f]),d.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),d.useEffect(()=>{f||typeof i!="number"||w.current!==null||(w.current=setTimeout(()=>{m(),w.current=null},i))},[i,f,m,...r]),{droppableRects:y,measureDroppableContainers:m,measuringScheduled:l!=null};function b(){switch(u){case Xs.Always:return!1;case Xs.BeforeDragging:return n;default:return!n}}}function Fc(e,t){return nl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Bv(e,t){return Fc(e,t)}function Uv(e){let{callback:t,disabled:n}=e;const r=Xo(t),s=d.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:l}=window;return new l(r)},[r,n]);return d.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Qo(e){let{callback:t,disabled:n}=e;const r=Xo(t),s=d.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:l}=window;return new l(r)},[n]);return d.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Hv(e){return new Oc(Jr(e),e)}function vd(e,t,n){t===void 0&&(t=Hv);const[r,s]=d.useState(null);function l(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c!=null?c:n)!=null?u:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=Uv({callback(c){if(e)for(const u of c){const{type:p,target:f}=u;if(p==="childList"&&f instanceof HTMLElement&&f.contains(e)){l();break}}}}),i=Qo({callback:l});return Yt(()=>{l(),e?(i==null||i.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),a==null||a.disconnect())},[e]),r}function Wv(e){const t=Fc(e);return yh(e,t)}const wd=[];function Vv(e){const t=d.useRef(e),n=nl(r=>e?r&&r!==wd&&e&&t.current&&e.parentNode===t.current.parentNode?r:Lc(e):wd,[e]);return d.useEffect(()=>{t.current=e},[e]),n}function Xv(e){const[t,n]=d.useState(null),r=d.useRef(e),s=d.useCallback(l=>{const a=Ta(l.target);a&&n(i=>i?(i.set(a,Pi(a)),new Map(i)):null)},[]);return d.useEffect(()=>{const l=r.current;if(e!==l){a(l);const i=e.map(c=>{const u=Ta(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Pi(u)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=e}return()=>{a(e),a(l)};function a(i){i.forEach(c=>{const u=Ta(c);u==null||u.removeEventListener("scroll",s)})}},[s,e]),d.useMemo(()=>e.length?t?Array.from(t.values()).reduce((l,a)=>Rr(l,a),Kt):Nh(e):Kt,[e,t])}function bd(e,t){t===void 0&&(t=[]);const n=d.useRef(null);return d.useEffect(()=>{n.current=null},t),d.useEffect(()=>{const r=e!==Kt;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?yo(e,n.current):Kt}function Yv(e){d.useEffect(()=>{if(!Vo)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Kv(e,t){return d.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:l}=r;return n[s]=a=>{l(a,t)},n},{}),[e,t])}function _h(e){return d.useMemo(()=>e?wv(e):null,[e])}const kd=[];function Qv(e,t){t===void 0&&(t=Jr);const[n]=e,r=_h(n?dt(n):null),[s,l]=d.useState(kd);function a(){l(()=>e.length?e.map(c=>jh(c)?r:new Oc(t(c),c)):kd)}const i=Qo({callback:a});return Yt(()=>{i==null||i.disconnect(),a(),e.forEach(c=>i==null?void 0:i.observe(c))},[e]),s}function Th(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return tl(t)?t:e}function Gv(e){let{measure:t}=e;const[n,r]=d.useState(null),s=d.useCallback(u=>{for(const{target:p}of u)if(tl(p)){r(f=>{const h=t(p);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),l=Qo({callback:s}),a=d.useCallback(u=>{const p=Th(u);l==null||l.disconnect(),p&&(l==null||l.observe(p)),r(p?t(p):null)},[t,l]),[i,c]=xo(a);return d.useMemo(()=>({nodeRef:i,rect:n,setRef:c}),[n,i,c])}const Jv=[{sensor:Ko,options:{}},{sensor:Mh,options:{}}],qv={current:{}},Wl={draggable:{measure:hd},droppable:{measure:hd,strategy:Xs.WhileDragging,frequency:Ii.Optimized},dragOverlay:{measure:Jr}};class Ss extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Zv={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ss,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:wo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Wl,measureDroppableContainers:wo,windowRect:null,measuringScheduled:!1},Dh={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:wo,draggableNodes:new Map,over:null,measureDroppableContainers:wo},sl=d.createContext(Dh),Rh=d.createContext(Zv);function e1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ss}}}function t1(e,t){switch(t.type){case Ue.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ue.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ue.DragEnd:case Ue.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ue.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Ss(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Ue.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,l=e.droppable.containers.get(n);if(!l||r!==l.key)return e;const a=new Ss(e.droppable.containers);return a.set(n,{...l,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case Ue.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const l=new Ss(e.droppable.containers);return l.delete(n),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function n1(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=d.useContext(sl),l=go(r),a=go(n==null?void 0:n.id);return d.useEffect(()=>{if(!t&&!r&&l&&a!=null){if(!Yo(l)||document.activeElement===l.target)return;const i=s.get(a);if(!i)return;const{activatorNode:c,node:u}=i;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const p of[c.current,u.current]){if(!p)continue;const f=qy(p);if(f){f.focus();break}}})}},[r,t,s,a,l]),null}function Ph(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,l)=>l({transform:s,...r}),n):n}function r1(e){return d.useMemo(()=>({draggable:{...Wl.draggable,...e==null?void 0:e.draggable},droppable:{...Wl.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Wl.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function s1(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const l=d.useRef(!1),{x:a,y:i}=typeof s=="boolean"?{x:s,y:s}:s;Yt(()=>{if(!a&&!i||!t){l.current=!1;return}if(l.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const p=n(u),f=yh(p,r);if(a||(f.x=0),i||(f.y=0),l.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=wh(u);h&&h.scrollBy({top:f.y,left:f.x})}},[t,a,i,r,n])}const Go=d.createContext({...Kt,scaleX:1,scaleY:1});var jn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(jn||(jn={}));const zh=d.memo(function(t){var n,r,s,l;let{id:a,accessibility:i,autoScroll:c=!0,children:u,sensors:p=Jv,collisionDetection:f=hv,measuring:h,modifiers:m,...w}=t;const y=d.useReducer(t1,void 0,e1),[b,g]=y,[x,v]=sv(),[S,j]=d.useState(jn.Uninitialized),N=S===jn.Initialized,{draggable:{active:k,nodes:C,translate:P},droppable:{containers:R}}=b,z=k!=null?C.get(k):null,te=d.useRef({initial:null,translated:null}),_=d.useMemo(()=>{var et;return k!=null?{id:k,data:(et=z==null?void 0:z.data)!=null?et:qv,rect:te}:null},[k,z]),T=d.useRef(null),[V,se]=d.useState(null),[le,I]=d.useState(null),U=Vs(w,Object.values(w)),O=rl("DndDescribedBy",a),Z=d.useMemo(()=>R.getEnabled(),[R]),X=r1(h),{droppableRects:we,measureDroppableContainers:be,measuringScheduled:ee}=Fv(Z,{dragging:N,dependencies:[P.x,P.y],config:X.droppable}),F=$v(C,k),G=d.useMemo(()=>le?vo(le):null,[le]),re=qh(),oe=Bv(F,X.draggable.measure);s1({activeNode:k!=null?C.get(k):null,config:re.layoutShiftCompensation,initialRect:oe,measure:X.draggable.measure});const Y=vd(F,X.draggable.measure,oe),Me=vd(F?F.parentElement:null),he=d.useRef({activatorEvent:null,active:null,activeNode:F,collisionRect:null,collisions:null,droppableRects:we,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Te=R.getNodeFor((n=he.current.over)==null?void 0:n.id),me=Gv({measure:X.dragOverlay.measure}),lt=(r=me.nodeRef.current)!=null?r:F,ke=N?(s=me.rect)!=null?s:Y:null,Mt=!!(me.nodeRef.current&&me.rect),xn=Wv(Mt?null:Y),q=_h(lt?dt(lt):null),ce=Vv(N?Te!=null?Te:F:null),je=Qv(ce),ze=Ph(m,{transform:{x:P.x-xn.x,y:P.y-xn.y,scaleX:1,scaleY:1},activatorEvent:le,active:_,activeNodeRect:Y,containerNodeRect:Me,draggingNodeRect:ke,over:he.current.over,overlayNodeRect:me.rect,scrollableAncestors:ce,scrollableAncestorRects:je,windowRect:q}),_t=G?Rr(G,P):null,Fe=Xv(ce),Un=bd(Fe),E=bd(Fe,[Y]),B=Rr(ze,Un),K=ke?gv(ke,ze):null,Ze=_&&K?f({active:_,collisionRect:K,droppableRects:we,droppableContainers:Z,pointerCoordinates:_t}):null,L=fv(Ze,"id"),[fe,ue]=d.useState(null),Ie=Mt?ze:Rr(ze,E),Tt=mv(Ie,(l=fe==null?void 0:fe.rect)!=null?l:null,Y),nn=d.useRef(null),Zo=d.useCallback((et,yt)=>{let{sensor:vt,options:gn}=yt;if(T.current==null)return;const Dt=C.get(T.current);if(!Dt)return;const wt=et.nativeEvent,Qt=new vt({active:T.current,activeNode:Dt,event:wt,options:gn,context:he,onAbort(Qe){if(!C.get(Qe))return;const{onDragAbort:Gt}=U.current,rn={id:Qe};Gt==null||Gt(rn),x({type:"onDragAbort",event:rn})},onPending(Qe,yn,Gt,rn){if(!C.get(Qe))return;const{onDragPending:Zr}=U.current,vn={id:Qe,constraint:yn,initialCoordinates:Gt,offset:rn};Zr==null||Zr(vn),x({type:"onDragPending",event:vn})},onStart(Qe){const yn=T.current;if(yn==null)return;const Gt=C.get(yn);if(!Gt)return;const{onDragStart:rn}=U.current,qr={activatorEvent:wt,active:{id:yn,data:Gt.data,rect:te}};Sr.unstable_batchedUpdates(()=>{rn==null||rn(qr),j(jn.Initializing),g({type:Ue.DragStart,initialCoordinates:Qe,active:yn}),x({type:"onDragStart",event:qr}),se(nn.current),I(wt)})},onMove(Qe){g({type:Ue.DragMove,coordinates:Qe})},onEnd:ar(Ue.DragEnd),onCancel:ar(Ue.DragCancel)});nn.current=Qt;function ar(Qe){return async function(){const{active:Gt,collisions:rn,over:qr,scrollAdjustedTranslate:Zr}=he.current;let vn=null;if(Gt&&Zr){const{cancelDrop:es}=U.current;vn={activatorEvent:wt,active:Gt,collisions:rn,delta:Zr,over:qr},Qe===Ue.DragEnd&&typeof es=="function"&&await Promise.resolve(es(vn))&&(Qe=Ue.DragCancel)}T.current=null,Sr.unstable_batchedUpdates(()=>{g({type:Qe}),j(jn.Uninitialized),ue(null),se(null),I(null),nn.current=null;const es=Qe===Ue.DragEnd?"onDragEnd":"onDragCancel";if(vn){const ta=U.current[es];ta==null||ta(vn),x({type:es,event:vn})}})}}},[C]),ea=d.useCallback((et,yt)=>(vt,gn)=>{const Dt=vt.nativeEvent,wt=C.get(gn);if(T.current!==null||!wt||Dt.dndKit||Dt.defaultPrevented)return;const Qt={active:wt};et(vt,yt.options,Qt)===!0&&(Dt.dndKit={capturedBy:yt.sensor},T.current=gn,Zo(vt,yt))},[C,Zo]),Hc=Av(p,ea);Yv(p),Yt(()=>{Y&&S===jn.Initializing&&j(jn.Initialized)},[Y,S]),d.useEffect(()=>{const{onDragMove:et}=U.current,{active:yt,activatorEvent:vt,collisions:gn,over:Dt}=he.current;if(!yt||!vt)return;const wt={active:yt,activatorEvent:vt,collisions:gn,delta:{x:B.x,y:B.y},over:Dt};Sr.unstable_batchedUpdates(()=>{et==null||et(wt),x({type:"onDragMove",event:wt})})},[B.x,B.y]),d.useEffect(()=>{const{active:et,activatorEvent:yt,collisions:vt,droppableContainers:gn,scrollAdjustedTranslate:Dt}=he.current;if(!et||T.current==null||!yt||!Dt)return;const{onDragOver:wt}=U.current,Qt=gn.get(L),ar=Qt&&Qt.rect.current?{id:Qt.id,rect:Qt.rect.current,data:Qt.data,disabled:Qt.disabled}:null,Qe={active:et,activatorEvent:yt,collisions:vt,delta:{x:Dt.x,y:Dt.y},over:ar};Sr.unstable_batchedUpdates(()=>{ue(ar),wt==null||wt(Qe),x({type:"onDragOver",event:Qe})})},[L]),Yt(()=>{he.current={activatorEvent:le,active:_,activeNode:F,collisionRect:K,collisions:Ze,droppableRects:we,draggableNodes:C,draggingNode:lt,draggingNodeRect:ke,droppableContainers:R,over:fe,scrollableAncestors:ce,scrollAdjustedTranslate:B},te.current={initial:ke,translated:K}},[_,F,Ze,K,C,lt,ke,we,R,fe,ce,B]),Iv({...re,delta:P,draggingRect:K,pointerCoordinates:_t,scrollableAncestors:ce,scrollableAncestorRects:je});const Gh=d.useMemo(()=>({active:_,activeNode:F,activeNodeRect:Y,activatorEvent:le,collisions:Ze,containerNodeRect:Me,dragOverlay:me,draggableNodes:C,droppableContainers:R,droppableRects:we,over:fe,measureDroppableContainers:be,scrollableAncestors:ce,scrollableAncestorRects:je,measuringConfiguration:X,measuringScheduled:ee,windowRect:q}),[_,F,Y,le,Ze,Me,me,C,R,we,fe,be,ce,je,X,ee,q]),Jh=d.useMemo(()=>({activatorEvent:le,activators:Hc,active:_,activeNodeRect:Y,ariaDescribedById:{draggable:O},dispatch:g,draggableNodes:C,over:fe,measureDroppableContainers:be}),[le,Hc,_,Y,g,O,C,fe,be]);return Ce.createElement(mh.Provider,{value:v},Ce.createElement(sl.Provider,{value:Jh},Ce.createElement(Rh.Provider,{value:Gh},Ce.createElement(Go.Provider,{value:Tt},u)),Ce.createElement(n1,{disabled:(i==null?void 0:i.restoreFocus)===!1})),Ce.createElement(av,{...i,hiddenTextDescribedById:O}));function qh(){const et=(V==null?void 0:V.autoScrollEnabled)===!1,yt=typeof c=="object"?c.enabled===!1:c===!1,vt=N&&!et&&!yt;return typeof c=="object"?{...c,enabled:vt}:{enabled:vt}}}),l1=d.createContext(null),jd="button",o1="Draggable";function a1(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const l=rl(o1),{activators:a,activatorEvent:i,active:c,activeNodeRect:u,ariaDescribedById:p,draggableNodes:f,over:h}=d.useContext(sl),{role:m=jd,roleDescription:w="draggable",tabIndex:y=0}=s!=null?s:{},b=(c==null?void 0:c.id)===t,g=d.useContext(b?Go:l1),[x,v]=xo(),[S,j]=xo(),N=Kv(a,t),k=Vs(n);Yt(()=>(f.set(t,{id:t,key:l,node:x,activatorNode:S,data:k}),()=>{const P=f.get(t);P&&P.key===l&&f.delete(t)}),[f,t]);const C=d.useMemo(()=>({role:m,tabIndex:y,"aria-disabled":r,"aria-pressed":b&&m===jd?!0:void 0,"aria-roledescription":w,"aria-describedby":p.draggable}),[r,m,y,b,w,p.draggable]);return{active:c,activatorEvent:i,activeNodeRect:u,attributes:C,isDragging:b,listeners:r?void 0:N,node:x,over:h,setNodeRef:v,setActivatorNodeRef:j,transform:g}}function Ih(){return d.useContext(Rh)}const i1="Droppable",c1={timeout:25};function u1(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const l=rl(i1),{active:a,dispatch:i,over:c,measureDroppableContainers:u}=d.useContext(sl),p=d.useRef({disabled:n}),f=d.useRef(!1),h=d.useRef(null),m=d.useRef(null),{disabled:w,updateMeasurementsFor:y,timeout:b}={...c1,...s},g=Vs(y!=null?y:r),x=d.useCallback(()=>{if(!f.current){f.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{u(Array.isArray(g.current)?g.current:[g.current]),m.current=null},b)},[b]),v=Qo({callback:x,disabled:w||!a}),S=d.useCallback((C,P)=>{v&&(P&&(v.unobserve(P),f.current=!1),C&&v.observe(C))},[v]),[j,N]=xo(S),k=Vs(t);return d.useEffect(()=>{!v||!j.current||(v.disconnect(),f.current=!1,v.observe(j.current))},[j,v]),d.useEffect(()=>(i({type:Ue.RegisterDroppable,element:{id:r,key:l,disabled:n,node:j,rect:h,data:k}}),()=>i({type:Ue.UnregisterDroppable,key:l,id:r})),[r]),d.useEffect(()=>{n!==p.current.disabled&&(i({type:Ue.SetDroppableDisabled,id:r,key:l,disabled:n}),p.current.disabled=n)},[r,l,n,i]),{active:a,rect:h,isOver:(c==null?void 0:c.id)===r,node:j,over:c,setNodeRef:N}}function d1(e){let{animation:t,children:n}=e;const[r,s]=d.useState(null),[l,a]=d.useState(null),i=go(n);return!n&&!r&&i&&s(i),Yt(()=>{if(!l)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(t(u,l)).then(()=>{s(null)})},[t,r,l]),Ce.createElement(Ce.Fragment,null,n,r?d.cloneElement(r,{ref:a}):null)}const f1={x:0,y:0,scaleX:1,scaleY:1};function p1(e){let{children:t}=e;return Ce.createElement(sl.Provider,{value:Dh},Ce.createElement(Go.Provider,{value:f1},t))}const h1={position:"fixed",touchAction:"none"},m1=e=>Yo(e)?"transform 250ms ease":void 0,x1=d.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:l,className:a,rect:i,style:c,transform:u,transition:p=m1}=e;if(!i)return null;const f=s?u:{...u,scaleX:1,scaleY:1},h={...h1,width:i.width,height:i.height,top:i.top,left:i.left,transform:hn.Transform.toString(f),transformOrigin:s&&r?cv(r,i):void 0,transition:typeof p=="function"?p(r):p,...c};return Ce.createElement(n,{className:a,style:h,ref:t},l)}),g1=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:l,className:a}=e;if(l!=null&&l.active)for(const[i,c]of Object.entries(l.active))c!==void 0&&(s[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,c));if(l!=null&&l.dragOverlay)for(const[i,c]of Object.entries(l.dragOverlay))c!==void 0&&r.node.style.setProperty(i,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);a!=null&&a.active&&n.node.classList.remove(a.active)}},y1=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:hn.Transform.toString(t)},{transform:hn.Transform.toString(n)}]},v1={duration:250,easing:"ease",keyframes:y1,sideEffects:g1({styles:{active:{opacity:"0"}}})};function w1(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return Xo((l,a)=>{if(t===null)return;const i=n.get(l);if(!i)return;const c=i.node.current;if(!c)return;const u=Th(a);if(!u)return;const{transform:p}=dt(a).getComputedStyle(a),f=vh(p);if(!f)return;const h=typeof t=="function"?t:b1(t);return Ch(c,s.draggable.measure),h({active:{id:l,data:i.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function b1(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...v1,...e};return l=>{let{active:a,dragOverlay:i,transform:c,...u}=l;if(!t)return;const p={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},f={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/i.rect.height:1},h={x:c.x-p.x,y:c.y-p.y,...f},m=s({...u,active:a,dragOverlay:i,transform:{initial:c,final:h}}),[w]=m,y=m[m.length-1];if(JSON.stringify(w)===JSON.stringify(y))return;const b=r==null?void 0:r({active:a,dragOverlay:i,...u}),g=i.node.animate(m,{duration:t,easing:n,fill:"forwards"});return new Promise(x=>{g.onfinish=()=>{b==null||b(),x()}})}}let Sd=0;function k1(e){return d.useMemo(()=>{if(e!=null)return Sd++,Sd},[e])}const Lh=Ce.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:l,modifiers:a,wrapperElement:i="div",className:c,zIndex:u=999}=e;const{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:m,draggableNodes:w,droppableContainers:y,dragOverlay:b,over:g,measuringConfiguration:x,scrollableAncestors:v,scrollableAncestorRects:S,windowRect:j}=Ih(),N=d.useContext(Go),k=k1(f==null?void 0:f.id),C=Ph(a,{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:m,draggingNodeRect:b.rect,over:g,overlayNodeRect:b.rect,scrollableAncestors:v,scrollableAncestorRects:S,transform:N,windowRect:j}),P=Fc(h),R=w1({config:r,draggableNodes:w,droppableContainers:y,measuringConfiguration:x}),z=P?b.setRef:void 0;return Ce.createElement(p1,null,Ce.createElement(d1,{animation:R},f&&k?Ce.createElement(x1,{key:k,id:f.id,ref:z,as:i,activatorEvent:p,adjustScale:t,className:c,transition:l,rect:P,style:{zIndex:u,...s},transform:C},n):null))});function Jo(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function j1(e,t){return e.reduce((n,r,s)=>{const l=t.get(r);return l&&(n[s]=l),n},Array(e.length))}function kl(e){return e!==null&&e>=0}function S1(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function N1(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Oh=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const l=Jo(t,r,n),a=t[s],i=l[s];return!i||!a?null:{x:i.left-a.left,y:i.top-a.top,scaleX:i.width/a.width,scaleY:i.height/a.height}},jl={scaleX:1,scaleY:1},$h=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:l,overIndex:a}=e;const i=(t=l[n])!=null?t:r;if(!i)return null;if(s===n){const u=l[a];return u?{x:0,y:n<a?u.top+u.height-(i.top+i.height):u.top-i.top,...jl}:null}const c=C1(l,s,n);return s>n&&s<=a?{x:0,y:-i.height-c,...jl}:s<n&&s>=a?{x:0,y:i.height+c,...jl}:{x:0,y:0,...jl}};function C1(e,t,n){const r=e[t],s=e[t-1],l=e[t+1];return r?n<t?s?r.top-(s.top+s.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Ah="Sortable",Fh=Ce.createContext({activeIndex:-1,containerId:Ah,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Oh,disabled:{draggable:!1,droppable:!1}});function Bh(e){let{children:t,id:n,items:r,strategy:s=Oh,disabled:l=!1}=e;const{active:a,dragOverlay:i,droppableRects:c,over:u,measureDroppableContainers:p}=Ih(),f=rl(Ah,n),h=i.rect!==null,m=d.useMemo(()=>r.map(N=>typeof N=="object"&&"id"in N?N.id:N),[r]),w=a!=null,y=a?m.indexOf(a.id):-1,b=u?m.indexOf(u.id):-1,g=d.useRef(m),x=!S1(m,g.current),v=b!==-1&&y===-1||x,S=N1(l);Yt(()=>{x&&w&&p(m)},[x,m,w,p]),d.useEffect(()=>{g.current=m},[m]);const j=d.useMemo(()=>({activeIndex:y,containerId:f,disabled:S,disableTransforms:v,items:m,overIndex:b,useDragOverlay:h,sortedRects:j1(m,c),strategy:s}),[y,f,S.draggable,S.droppable,v,m,b,c,h,s]);return Ce.createElement(Fh.Provider,{value:j},t)}const E1=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return Jo(n,r,s).indexOf(t)},M1=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:l,newIndex:a,previousItems:i,previousContainerId:c,transition:u}=e;return!u||!r||i!==l&&s===a?!1:n?!0:a!==s&&t===c},_1={duration:200,easing:"ease"},Uh="transform",T1=hn.Transition.toString({property:Uh,duration:0,easing:"linear"}),D1={roleDescription:"sortable"};function R1(e){let{disabled:t,index:n,node:r,rect:s}=e;const[l,a]=d.useState(null),i=d.useRef(n);return Yt(()=>{if(!t&&n!==i.current&&r.current){const c=s.current;if(c){const u=Jr(r.current,{ignoreTransform:!0}),p={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(p.x||p.y)&&a(p)}}n!==i.current&&(i.current=n)},[t,n,r,s]),d.useEffect(()=>{l&&a(null)},[l]),l}function Hh(e){let{animateLayoutChanges:t=M1,attributes:n,disabled:r,data:s,getNewIndex:l=E1,id:a,strategy:i,resizeObserverConfig:c,transition:u=_1}=e;const{items:p,containerId:f,activeIndex:h,disabled:m,disableTransforms:w,sortedRects:y,overIndex:b,useDragOverlay:g,strategy:x}=d.useContext(Fh),v=P1(r,m),S=p.indexOf(a),j=d.useMemo(()=>({sortable:{containerId:f,index:S,items:p},...s}),[f,s,S,p]),N=d.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:k,node:C,isOver:P,setNodeRef:R}=u1({id:a,data:j,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...c}}),{active:z,activatorEvent:te,activeNodeRect:_,attributes:T,setNodeRef:V,listeners:se,isDragging:le,over:I,setActivatorNodeRef:U,transform:O}=a1({id:a,data:j,attributes:{...D1,...n},disabled:v.draggable}),Z=Ky(R,V),X=!!z,we=X&&!w&&kl(h)&&kl(b),be=!g&&le,ee=be&&we?O:null,F=i!=null?i:x,G=we?ee!=null?ee:F({rects:y,activeNodeRect:_,activeIndex:h,overIndex:b,index:S}):null,re=kl(h)&&kl(b)?l({id:a,items:p,activeIndex:h,overIndex:b}):S,oe=z==null?void 0:z.id,Y=d.useRef({activeId:oe,items:p,newIndex:re,containerId:f}),Me=p!==Y.current.items,he=t({active:z,containerId:f,isDragging:le,isSorting:X,id:a,index:S,items:p,newIndex:Y.current.newIndex,previousItems:Y.current.items,previousContainerId:Y.current.containerId,transition:u,wasDragging:Y.current.activeId!=null}),Te=R1({disabled:!he,index:S,node:C,rect:k});return d.useEffect(()=>{X&&Y.current.newIndex!==re&&(Y.current.newIndex=re),f!==Y.current.containerId&&(Y.current.containerId=f),p!==Y.current.items&&(Y.current.items=p)},[X,re,f,p]),d.useEffect(()=>{if(oe===Y.current.activeId)return;if(oe!=null&&Y.current.activeId==null){Y.current.activeId=oe;return}const lt=setTimeout(()=>{Y.current.activeId=oe},50);return()=>clearTimeout(lt)},[oe]),{active:z,activeIndex:h,attributes:T,data:j,rect:k,index:S,newIndex:re,items:p,isOver:P,isSorting:X,isDragging:le,listeners:se,node:C,overIndex:b,over:I,setNodeRef:Z,setActivatorNodeRef:U,setDroppableNodeRef:R,setDraggableNodeRef:V,transform:Te!=null?Te:G,transition:me()};function me(){if(Te||Me&&Y.current.newIndex===S)return T1;if(!(be&&!Yo(te)||!u)&&(X||he))return hn.Transition.toString({...u,property:Uh})}}function P1(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}xe.Down,xe.Right,xe.Up,xe.Left;const ge={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Nd={always:{label:"",color:"#6b9b6e",bg:"#e0f0e1"},keyword:{label:"",color:"#9b6b6b",bg:"#f0e0e0"},mood:{label:"",color:"#9b7a3b",bg:"#f0ebd8"},message_mode:{label:"",color:"#6b7b9b",bg:"#e0e6f0"}};function Wh({activation:e}){const t=Nd[e]||Nd.always;return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:t.color,background:t.bg},children:t.label})}const Sl=80;function z1({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,m=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",m){const y=Math.min(1,Math.abs(p)/Sl);m.style.transition=w,m.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{if(p.target.closest(".drag-handle"))return;const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],m=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(m)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(m)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Sl,Math.min(0,f.base+m));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Sl)}`),f.current=y},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Sl):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:ge.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(or,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function I1({book:e,onTap:t,onDelete:n}){var p;const{attributes:r,listeners:s,setNodeRef:l,transform:a,transition:i,isDragging:c}=Hh({id:String(e.id)}),u={transform:hn.Transform.toString(a),transition:i,opacity:c?0:1};return o.jsx("div",{ref:l,style:u,className:"mb-3",children:o.jsx(z1,{onDelete:()=>n(e),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:ge.bg,userSelect:"none"},children:[o.jsx("div",{...r,...s,className:"drag-handle shrink-0 cursor-grab touch-none px-1",style:{cursor:c?"grabbing":"grab"},children:o.jsx(qs,{size:18,style:{color:ge.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>t(e),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:ge.text},children:e.name}),o.jsx(Wh,{activation:e.activation})]}),e.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:ge.textMuted},children:e.folder}),e.activation==="keyword"&&((p=e.keywords)==null?void 0:p.length)>0&&o.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[e.keywords.slice(0,3).map((f,h)=>o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(232,160,191,0.15)",color:ge.accentDark},children:f},h)),e.keywords.length>3&&o.jsxs("span",{className:"text-[10px]",style:{color:ge.textMuted},children:["+",e.keywords.length-3]})]})]}),o.jsx(Fr,{size:16,style:{color:ge.textMuted,flexShrink:0},onClick:()=>t(e)})]})})})}function L1({folder:e,books:t,onDelete:n,onTap:r,onReorder:s}){const[l,a]=d.useState(!0),[i,c]=d.useState(null),u=xh(bo(Ko,{activationConstraint:{distance:5}}),bo(Ac,{activationConstraint:{delay:200,tolerance:5}})),p=({active:h,over:m})=>{if(c(null),!m||h.id===m.id)return;const w=t.findIndex(g=>String(g.id)===String(h.id)),y=t.findIndex(g=>String(g.id)===String(m.id));if(w<0||y<0)return;const b=Jo(t,w,y);s(e,b)},f=i?t.find(h=>String(h.id)===String(i)):null;return o.jsxs("div",{className:"mb-4",children:[o.jsxs("button",{className:"mb-2 flex w-full items-center gap-2 px-1",onClick:()=>a(!l),children:[l?o.jsx(Xr,{size:14,style:{color:ge.textMuted}}):o.jsx(Fr,{size:14,style:{color:ge.textMuted}}),o.jsx("span",{className:"text-[12px] font-bold tracking-wide",style:{color:ge.textMuted},children:e||""}),o.jsx("span",{className:"ml-1 rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.12)",color:ge.textMuted},children:t.length})]}),l&&o.jsxs(zh,{sensors:u,collisionDetection:gh,onDragStart:({active:h})=>c(h.id),onDragEnd:p,children:[o.jsx(Bh,{items:t.map(h=>String(h.id)),strategy:$h,children:t.map(h=>o.jsx(I1,{book:h,onTap:r,onDelete:n},h.id))}),o.jsx(Lh,{children:f&&o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:ge.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx("div",{className:"shrink-0 px-1",children:o.jsx(qs,{size:18,style:{color:ge.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:ge.text},children:f.name}),o.jsx(Wh,{activation:f.activation})]}),f.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:ge.textMuted},children:f.folder})]}),o.jsx(Fr,{size:16,style:{color:ge.textMuted,flexShrink:0}})]})})]})]})}function O1(){const e=At(),[t,n]=d.useState([]),[r,s]=d.useState(!0),[l,a]=d.useState(null),[i,c]=d.useState(null),u=y=>{c(y),setTimeout(()=>c(null),2e3)},p=()=>{s(!0),$("/api/world-books").then(y=>n(y.world_books||[])).catch(()=>u("")).finally(()=>s(!1))};d.useEffect(()=>{p()},[]);const f=async y=>{a(null);try{await $(`/api/world-books/${y.id}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==y.id)),u("")}catch(b){u("")}},h=(y,b)=>{const g=y||"";n(x=>[...x.filter(S=>(S.folder||"")!==g),...b]),$("/api/world-books/reorder",{method:"PUT",body:{ordered_ids:b.map(x=>x.id)}}).catch(()=>u(""))},m={};for(const y of t){const b=y.folder||"";m[b]||(m[b]=[]),m[b].push(y)}const w=Object.keys(m).sort((y,b)=>y===""?1:b===""?-1:y.localeCompare(b));return o.jsxs("div",{className:"flex h-full flex-col",style:{background:ge.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full nm-active",style:{background:ge.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:ge.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:ge.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ge.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books/new"),children:o.jsx(Yr,{size:20,style:{color:ge.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-t-transparent",style:{borderColor:ge.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(qs,{size:36,style:{color:ge.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:ge.textMuted},children:" + "})]}):w.map(y=>o.jsx(L1,{folder:y,books:m[y],onDelete:b=>a(b),onTap:b=>e(`/world-books/${b.id}`),onReorder:h},y))}),l&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>a(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:ge.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:y=>y.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:ge.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:ge.textMuted},children:["",l.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:ge.bg,boxShadow:"var(--card-shadow-sm)",color:ge.text},onClick:()=>a(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>f(l),children:""})]})]})}),i&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const J={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function $1({label:e,value:t,onChange:n,placeholder:r}){return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:J.textMuted},children:e}),o.jsx("input",{type:"text",value:t,onChange:s=>n(s.target.value),placeholder:r,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:J.bg,color:J.text}})]})}function A1({value:e,onChange:t,folders:n}){const[r,s]=d.useState(!1),l=n.filter(a=>a!==e&&a.toLowerCase().includes(e.toLowerCase()));return o.jsxs("div",{className:"relative mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:J.textMuted},children:""}),o.jsx("input",{type:"text",value:e,onChange:a=>{t(a.target.value),s(!0)},onFocus:()=>s(!0),onBlur:()=>setTimeout(()=>s(!1),150),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:J.bg,color:J.text}}),r&&l.length>0&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[160px] overflow-y-auto rounded-[14px]",style:{background:J.bg,boxShadow:"var(--card-shadow)"},children:l.map(a=>o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:J.text},onMouseDown:()=>{t(a),s(!1)},children:a},a))})]})}function F1({value:e,onChange:t}){const n=[{value:"always",label:""},{value:"keyword",label:""},{value:"mood",label:""},{value:"message_mode",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:J.textMuted},children:""}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:J.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:e===r.value?J.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?J.accentDark:J.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})]})}function B1({selected:e,onChange:t}){const n=[{value:"long",label:""},{value:"short",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:J.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:J.bg,minHeight:48},children:n.map(r=>{const s=e===r.value;return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?J.accentDark:J.bg,color:s?"white":J.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>t(r.value),children:r.label},r.value)})})]})}const U1=[{value:"happy",label:""},{value:"sad",label:""},{value:"angry",label:""},{value:"anxious",label:""},{value:"tired",label:""},{value:"emo",label:""},{value:"flirty",label:""},{value:"proud",label:""},{value:"calm",label:""}];function H1({selected:e,onChange:t}){const n=r=>{e.includes(r)?t(e.filter(s=>s!==r)):t([...e,r])};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:J.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:J.bg,minHeight:48},children:U1.map(r=>{const s=e.includes(r.value);return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?J.accentDark:J.bg,color:s?"white":J.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>n(r.value),children:r.label},r.value)})})]})}function W1({keywords:e,onChange:t}){const[n,r]=d.useState(""),s=()=>{const l=n.trim();if(!l||e.includes(l)){r("");return}t([...e,l]),r("")};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:J.textMuted},children:""}),o.jsxs("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:J.bg,minHeight:48},children:[e.map(l=>o.jsxs("span",{className:"flex items-center gap-1 rounded-full px-2.5 py-1 text-[12px] font-medium",style:{background:"rgba(232,160,191,0.2)",color:J.accentDark},children:[l,o.jsx("button",{onClick:()=>t(e.filter(a=>a!==l)),children:o.jsx(el,{size:10})})]},l)),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),onKeyDown:l=>{(l.key==="Enter"||l.key===",")&&(l.preventDefault(),s())},placeholder:"...",className:"w-24 bg-transparent text-[12px] outline-none",style:{color:J.text}}),n.trim()&&o.jsx("button",{className:"flex h-5 w-5 items-center justify-center rounded-full",style:{background:J.accentDark},onClick:s,children:o.jsx(Yr,{size:10,color:"white"})})]})]}),o.jsx("p",{className:"mt-1 text-[10px]",style:{color:J.textMuted},children:" Enter "})]})}function V1({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:J.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:J.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:J.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Br,{size:18,style:{color:J.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:J.bg,color:J.text},placeholder:"..."})]})}function Cd(){const e=At(),{id:t}=rh(),n=!t,[r,s]=d.useState(""),[l,a]=d.useState(""),[i,c]=d.useState("always"),[u,p]=d.useState([]),[f,h]=d.useState("long"),[m,w]=d.useState(""),[y,b]=d.useState(!1),[g,x]=d.useState(!n),[v,S]=d.useState(null),[j,N]=d.useState([]),[k,C]=d.useState(!1),P=d.useRef(null),R=_=>{var se;const T=(se=_.target.files)==null?void 0:se[0];if(!T)return;const V=new FileReader;V.onload=le=>w(le.target.result||""),V.readAsText(T),_.target.value=""},z=_=>{S(_),setTimeout(()=>S(null),2e3)};d.useEffect(()=>{$("/api/world-books").then(_=>{const T=_.world_books||[];if(N([...new Set(T.map(V=>V.folder).filter(Boolean))]),!n){const V=T.find(se=>String(se.id)===String(t));V&&(s(V.name),a(V.folder||""),c(V.activation),p(V.keywords||[]),h(V.message_mode||"long"),w(V.content))}}).catch(()=>z("")).finally(()=>x(!1))},[t,n]);const te=async()=>{if(!r.trim()){z("");return}b(!0);try{const _={name:r.trim(),folder:l.trim()||null,activation:i,keywords:i==="keyword"||i==="mood"?u:[],message_mode:i==="message_mode"?f:null,content:m};n?(await $("/api/world-books",{method:"POST",body:_}),z("")):(await $(`/api/world-books/${t}`,{method:"PUT",body:_}),z(""))}catch(_){z(": "+_.message)}finally{b(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:J.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:J.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:J.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:J.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:J.bg,boxShadow:y?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:te,disabled:y,children:o.jsx(Wo,{size:18,style:{color:J.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:g?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:J.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"rounded-[20px] p-5 mb-4",style:{background:J.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx($1,{label:"",value:r,onChange:s,placeholder:""}),o.jsx(A1,{value:l,onChange:a,folders:j}),o.jsx(F1,{value:i,onChange:c}),i==="keyword"&&o.jsx(W1,{keywords:u,onChange:p}),i==="mood"&&o.jsx(H1,{selected:u,onChange:p}),i==="message_mode"&&o.jsx(B1,{selected:f,onChange:h})]}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:J.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:J.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:J.bg},onClick:()=>{var _;return(_=P.current)==null?void 0:_.click()},title:"",children:o.jsx(Ho,{size:13,style:{color:J.textMuted}})}),o.jsx("input",{ref:P,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:R}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:J.bg},onClick:()=>C(!0),title:"",children:o.jsx(Zs,{size:13,style:{color:J.accentDark}})})]})]}),o.jsx("textarea",{value:m,onChange:_=>w(_.target.value),placeholder:"...",rows:10,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:J.bg,color:J.text}})]})]})}),k&&o.jsx(V1,{value:m,onChange:w,onClose:()=>C(!1)}),v&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:v})})]})}const Oe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Nl=80;function X1({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,m=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",m){const y=Math.min(1,Math.abs(p)/Nl);m.style.transition=w,m.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],m=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(m)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(m)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Nl,Math.min(0,f.base+m));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Nl)}`),f.current=y},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Nl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Oe.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(or,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function Y1({assistant:e,localAvatar:t,onTap:n}){var s;const r=t||null;return o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Oe.bg,userSelect:"none"},onClick:()=>n(e),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:48,height:48,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Oe.bg},children:r?o.jsx("img",{src:r,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[20px]",style:{color:Oe.accentDark},children:((s=e.name)==null?void 0:s[0])||"?"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[15px] font-bold",style:{color:Oe.text},children:e.name}),e.created_at&&o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:Oe.textMuted},children:e.created_at.slice(0,10)})]}),o.jsx(Fr,{size:16,style:{color:Oe.textMuted,flexShrink:0}})]})}function K1(){const e=At(),[t,n]=d.useState([]),[r,s]=d.useState({}),[l,a]=d.useState(!0),[i,c]=d.useState(null),[u,p]=d.useState(null),f=w=>{p(w),setTimeout(()=>p(null),2e3)},h=()=>{a(!0),$("/api/assistants").then(async w=>{const y=w.assistants||[];n(y);const b={};await Promise.all(y.map(async g=>{const x=await Kr(`assistant-avatar-${g.id}`).catch(()=>null);x&&(b[g.id]=x)})),s(b)}).catch(()=>f("")).finally(()=>a(!1))};d.useEffect(()=>{h()},[]);const m=async w=>{c(null);try{await $(`/api/assistants/${w.id}`,{method:"DELETE"}),n(y=>y.filter(b=>b.id!==w.id)),f("")}catch(y){f("")}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Oe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Oe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:Oe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Oe.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Oe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants/new"),children:o.jsx(Yr,{size:20,style:{color:Oe.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Oe.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(ih,{size:36,style:{color:Oe.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:Oe.textMuted},children:" + "})]}):t.map(w=>o.jsx(X1,{onDelete:()=>c(w),children:o.jsx(Y1,{assistant:w,localAvatar:r[w.id],onTap:y=>e(`/assistants/${y.id}`)})},w.id))}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>c(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Oe.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:w=>w.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Oe.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Oe.textMuted},children:["",i.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Oe.bg,boxShadow:"var(--card-shadow-sm)",color:Oe.text},onClick:()=>c(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>m(i),children:""})]})]})}),u&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:u})})]})}const M={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Ed({label:e,value:t,onChange:n,placeholder:r,rows:s,onExpand:l,onHistory:a}){const i=d.useRef(null),c=u=>{var h;const p=(h=u.target.files)==null?void 0:h[0];if(!p)return;const f=new FileReader;f.onload=m=>n(m.target.result||""),f.readAsText(p),u.target.value=""};return o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),o.jsxs("div",{className:"flex items-center gap-2",children:[a&&o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:a,children:o.jsx(Ly,{size:13,style:{color:M.textMuted}})}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var u;return(u=i.current)==null?void 0:u.click()},children:o.jsx(Ho,{size:13,style:{color:M.textMuted}})}),o.jsx("input",{ref:i,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:c}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:l,children:o.jsx(Zs,{size:13,style:{color:M.accentDark}})})]})]}),o.jsx("textarea",{value:t,onChange:u=>n(u.target.value),placeholder:r,rows:s||6,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})}function Pa({label:e,value:t,onChange:n,presets:r}){const[s,l]=d.useState(!1),a=r.find(i=>i.id===t);return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text},onClick:()=>l(!s),children:[o.jsx("span",{style:{color:a?M.text:M.textMuted},children:a?a.name:""}),o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:M.textMuted,transform:s?"rotate(180deg)":"none",transition:"transform 0.2s"},children:o.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&o.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:M.bg,boxShadow:"var(--card-shadow)",zIndex:40},children:[o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:M.textMuted},onClick:()=>{n(null),l(!1)},children:""}),r.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[14px]",style:{color:M.text},onClick:()=>{n(i.id),l(!1)},children:[o.jsx("span",{children:i.name}),i.id===t&&o.jsx(Ws,{size:14,style:{color:M.accentDark}})]},i.id))]})]})]})}function za({value:e,onChange:t,onClose:n,title:r,placeholder:s}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:r||""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Br,{size:18,style:{color:M.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:l=>t(l.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:M.bg,color:M.text},placeholder:s||""})]})}const Cl=80;function Q1({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,m=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",m){const y=Math.min(1,Math.abs(p)/Cl);m.style.transition=w,m.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],m=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(m)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(m)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Cl,Math.min(0,f.base+m));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Cl)}`),f.current=y},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Cl):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(or,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function G1({title:e,message:t,onConfirm:n,onCancel:r}){return o.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:r,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:M.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:s=>s.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:M.text},children:e||""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:M.textMuted},children:t}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.text},onClick:r,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:n,children:""})]})]})})}function J1({items:e,currentContent:t,onApply:n,onClose:r,onDelete:s}){const[l,a]=d.useState("current"),[i,c]=d.useState(null),[u,p]=d.useState(null),f=m=>m?new Date(m).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",h=async()=>{if(l==="current"){r();return}const m=e.find(w=>w.id===l);m&&await n(m.content),r()};return i?o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsxs("span",{className:"text-[15px] font-bold",style:{color:M.text},children:[" ",i.version]}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>c(null),children:o.jsx(Br,{size:18,style:{color:M.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:o.jsx("div",{className:"rounded-[14px] p-4",style:{boxShadow:"var(--inset-shadow)",background:M.bg},children:o.jsx("p",{className:"whitespace-pre-wrap text-[13px] leading-relaxed",style:{color:M.text},children:i.content})})})]}):o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:r,children:o.jsx(Br,{size:18,style:{color:M.accentDark}})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[o.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:l==="current"?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[o.jsx("button",{onClick:()=>a("current"),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:l==="current"?M.accentDark:M.bg,boxShadow:l==="current"?"none":"var(--icon-inset)"},children:l==="current"&&o.jsx(Ws,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:""}),o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#2a9d5c",background:"rgba(42,157,92,0.12)"},children:""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:t})]})]}),e.length===0&&o.jsx("p",{className:"py-8 text-center text-[13px]",style:{color:M.textMuted},children:""}),e.map(m=>o.jsx("div",{className:"mb-2",children:o.jsx(Q1,{onDelete:()=>p(m.id),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:l===m.id?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[o.jsx("button",{onClick:()=>a(m.id),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:l===m.id?M.accentDark:M.bg,boxShadow:l===m.id?"none":"var(--icon-inset)"},children:l===m.id&&o.jsx(Ws,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>c(m),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:[" ",m.version]}),o.jsx("span",{className:"text-[10px]",style:{color:M.textMuted},children:f(m.created_at)})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:m.content})]})]})})},m.id))]}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsx("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:h,children:""})}),u&&o.jsx(G1,{message:"",onCancel:()=>p(null),onConfirm:()=>{s(u),p(null)}})]})}function Vh(e){return e==="always"?"":e==="keyword"?"":e==="message_mode"?"":""}function Xh(e){return!e||!Array.isArray(e)?[]:e.map((t,n)=>typeof t=="object"&&t!==null?t:{id:t,position:"after",sort_order:n})}function q1({item:e,book:t,position:n,sectionList:r,onRemove:s,onChangePosition:l}){const{attributes:a,listeners:i,setNodeRef:c,transform:u,transition:p,isDragging:f}=Hh({id:String(e.id)}),h={transform:hn.Transform.toString(u),transition:p,opacity:f?0:1};return t?o.jsxs("div",{ref:c,style:h,className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",children:[o.jsx("div",{...a,...i,className:"cursor-grab touch-none p-1",style:{cursor:f?"grabbing":"grab"},children:o.jsx(qs,{size:14,style:{color:M.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.text},children:t.name}),o.jsxs("div",{className:"text-[10px]",style:{color:M.textMuted},children:[Vh(t.activation),t.folder?`  ${t.folder}`:""]})]}),o.jsx("button",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},onClick:()=>l(e.id,n==="before"?"after":"before"),children:n==="before"?"":""}),o.jsx("button",{onClick:()=>s(e.id),children:o.jsx(el,{size:14,style:{color:M.textMuted}})})]}):null}function Z1({allBooks:e,mountedIds:t,onClose:n,onConfirm:r}){const[s,l]=d.useState(new Set(t)),a={};e.forEach(u=>{const p=u.folder||"";a[p]||(a[p]=[]),a[p].push(u)});const i=u=>{l(p=>{const f=new Set(p);return f.has(u)?f.delete(u):f.add(u),f})},c=u=>{const p=u.every(f=>s.has(f.id));l(f=>{const h=new Set(f);return p?u.forEach(m=>h.delete(m.id)):u.forEach(m=>h.add(m.id)),h})};return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-end",style:{background:"rgba(0,0,0,0.4)"},children:o.jsxs("div",{className:"flex w-full flex-col rounded-t-[24px]",style:{background:M.bg,maxHeight:"82vh"},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between p-5 pb-3",children:[o.jsx("h3",{className:"text-[16px] font-bold",style:{color:M.text},children:""}),o.jsx("button",{onClick:n,children:o.jsx(el,{size:20,style:{color:M.textMuted}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5",children:Object.entries(a).map(([u,p])=>{const f=p.every(h=>s.has(h.id));return o.jsxs("div",{className:"mb-5",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:u}),o.jsx("button",{className:"rounded-full px-2.5 py-1 text-[11px] font-semibold",style:{background:f?"rgba(201,98,138,0.15)":"rgba(136,136,160,0.1)",color:f?M.accentDark:M.textMuted},onClick:()=>c(p),children:f?"":""})]}),o.jsx("div",{className:"space-y-2",children:p.map(h=>{const m=s.has(h.id);return o.jsxs("button",{className:"flex w-full items-center gap-3 rounded-[14px] p-3",style:{background:M.bg,boxShadow:m?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>i(h.id),children:[o.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:m?M.accentDark:M.bg,boxShadow:m?"none":"var(--icon-inset)"},children:m&&o.jsx(Ws,{size:12,color:"white"})}),o.jsx("div",{className:"flex-1 min-w-0 text-left",children:o.jsx("div",{className:"truncate text-[13px] font-medium",style:{color:m?M.accentDark:M.text},children:h.name})}),o.jsx("span",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},children:Vh(h.activation)})]},h.id)})})]},u)})}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsxs("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>r([...s]),children:[" ",s.size,""]})})]})})}function e0({ruleSetIds:e,onChange:t,allBooks:n}){const[r,s]=d.useState(!1),[l,a]=d.useState(null),i=Xh(e),c=i.filter(j=>j.position==="before").sort((j,N)=>j.sort_order-N.sort_order),u=i.filter(j=>j.position==="after").sort((j,N)=>j.sort_order-N.sort_order),p=j=>n.find(N=>N.id===j||N.id===Number(j)),f=xh(bo(Ko,{activationConstraint:{distance:5}}),bo(Ac,{activationConstraint:{delay:150,tolerance:5}})),h=({active:j})=>a(j.id),m=({active:j,over:N})=>{if(!N)return;const k=i.find(P=>String(P.id)===String(j.id)),C=i.find(P=>String(P.id)===String(N.id));if(!(!k||!C)&&k.position!==C.position){const P=i.map(R=>String(R.id)===String(k.id)?{...R,position:C.position}:R);t(P)}},w=({active:j,over:N})=>{if(a(null),!N||j.id===N.id)return;const k=i.find(T=>String(T.id)===String(j.id)),C=i.find(T=>String(T.id)===String(N.id));if(!k||!C||k.position!==C.position)return;const P=k.position==="before"?[...c]:[...u],R=P.findIndex(T=>String(T.id)===String(j.id)),z=P.findIndex(T=>String(T.id)===String(N.id)),te=Jo(P,R,z).map((T,V)=>({...T,sort_order:V})),_=i.filter(T=>T.position!==k.position);t([..._,...te])},y=j=>t(i.filter(N=>N.id!==j)),b=(j,N)=>{const C=(N==="before"?c:u).length;t(i.map(P=>P.id===j?{...P,position:N,sort_order:C}:P))},g=j=>{const N=i.map(z=>z.id),C=j.filter(z=>!N.includes(z)).map((z,te)=>({id:z,position:"after",sort_order:u.length+te})),P=new Set(N.filter(z=>!j.includes(z))),R=i.filter(z=>!P.has(z.id));t([...R,...C])},x=(j,N)=>j.length===0?o.jsx("div",{className:"py-3 text-center text-[12px]",style:{color:M.textMuted},children:""}):o.jsx(Bh,{items:j.map(k=>String(k.id)),strategy:$h,children:o.jsx("div",{className:"rounded-[14px] px-2 pt-1",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:j.map((k,C)=>o.jsxs("div",{children:[C>0&&o.jsx("div",{className:"mx-2",style:{height:1,background:"rgba(0,0,0,0.06)"}}),o.jsx(q1,{item:k,book:p(k.id),position:N,sectionList:j,onRemove:y,onChangePosition:b})]},k.id))})}),v=l?i.find(j=>String(j.id)===String(l)):null,S=v?p(v.id):null;return o.jsxs(zh,{sensors:f,collisionDetection:gh,onDragStart:h,onDragOver:m,onDragEnd:w,children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),x(c,"before")]}),o.jsxs("div",{className:"my-4 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}}),o.jsx("span",{className:"rounded-full px-3 py-1 text-[11px] font-bold",style:{background:"rgba(232,160,191,0.15)",color:M.accentDark},children:"System Prompt"}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),x(u,"after")]}),o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-3 text-[14px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.accentDark},onClick:()=>s(!0),children:[o.jsx(Yr,{size:16})," "]}),o.jsx(Lh,{children:S&&o.jsxs("div",{className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",style:{background:M.bg,boxShadow:"var(--card-shadow)",opacity:.9},children:[o.jsx(qs,{size:14,style:{color:M.textMuted}}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.accentDark},children:S.name})})]})}),r&&o.jsx(Z1,{allBooks:n,mountedIds:i.map(j=>j.id),onClose:()=>s(!1),onConfirm:j=>{g(j),s(!1)}})]})}function Md(){const e=At(),{id:t}=rh(),n=!t,[r,s]=d.useState("basic"),[l,a]=d.useState(""),[i,c]=d.useState(""),[u,p]=d.useState(""),[f,h]=d.useState(null),[m,w]=d.useState(null),[y,b]=d.useState(null),[g,x]=d.useState(""),[v,S]=d.useState(""),[j,N]=d.useState(null),[k,C]=d.useState(null),[P,R]=d.useState([]),[z,te]=d.useState([]),[_,T]=d.useState([]),[V,se]=d.useState(!1),[le,I]=d.useState(!n),[U,O]=d.useState(null),[Z,X]=d.useState(!1),[we,be]=d.useState(!1),[ee,F]=d.useState(!1),[G,re]=d.useState(null),[oe,Y]=d.useState([]),Me=d.useRef(null),he=d.useRef(null),Te=q=>{var ze;const ce=(ze=q.target.files)==null?void 0:ze[0];if(!ce)return;const je=new FileReader;je.onload=_t=>p(_t.target.result||""),je.readAsText(ce),q.target.value=""},me=q=>{O(q),setTimeout(()=>O(null),2500)},lt=async q=>{const ce=q==="human"?j:k;if(!ce){me("");return}try{const je=await $(`/api/core-blocks/${ce}/history`);Y(je.history||[]),re(q)}catch(je){me("")}};d.useEffect(()=>{(async()=>{const[ce,je]=await Promise.all([$("/api/presets").catch(()=>({presets:[]})),$("/api/world-books").catch(()=>({world_books:[]}))]);if(te(ce.presets||[]),T(je.world_books||[]),n)I(!1);else try{const[ze,_t]=await Promise.all([$(`/api/assistants/${t}`),$(`/api/core-blocks?assistant_id=${t}`).catch(()=>({blocks:[]}))]);a(ze.name||""),Kr(`assistant-avatar-${t}`).then(Fe=>{Fe&&c(Fe)}).catch(function(){}),p(ze.system_prompt||""),h(ze.model_preset_id||null),w(ze.summary_model_preset_id||null),b(ze.summary_fallback_preset_id||null),R(ze.rule_set_ids||[]);for(const Fe of _t.blocks||[])Fe.block_type==="human"?(x(Fe.content||""),N(Fe.id)):Fe.block_type==="persona"&&(S(Fe.content||""),C(Fe.id))}catch(ze){me(": "+ze.message)}finally{I(!1)}})()},[t,n]);const ke=q=>{var ze;const ce=(ze=q.target.files)==null?void 0:ze[0];if(!ce)return;const je=new FileReader;je.onload=async _t=>{const Fe=_t.target.result,Un=`assistant-avatar-${t||"new"}`;try{await Ri(Un,Fe),c(Fe)}catch(E){me("")}},je.readAsDataURL(ce),q.target.value=""},Mt=async()=>{if(!l.trim()){me("");return}se(!0);try{const q={name:l.trim(),avatar_url:i?`assistant-avatar-${t||"new"}`:null,system_prompt:u,model_preset_id:f,summary_model_preset_id:m,summary_fallback_preset_id:y,rule_set_ids:Xh(P)};let ce=t;if(n?(ce=(await $("/api/assistants",{method:"POST",body:{name:l.trim()}})).id,i&&(await Ri(`assistant-avatar-${ce}`,i),q.avatar_url=`assistant-avatar-${ce}`),await $(`/api/assistants/${ce}`,{method:"PUT",body:q})):await $(`/api/assistants/${t}`,{method:"PUT",body:q}),j)await $(`/api/core-blocks/${j}`,{method:"PUT",body:{content:g}});else if(g.trim()){const je=await $("/api/core-blocks",{method:"POST",body:{block_type:"human",assistant_id:Number(ce),content:g}});N(je.id)}if(k)await $(`/api/core-blocks/${k}`,{method:"PUT",body:{content:v}});else if(v.trim()){const je=await $("/api/core-blocks",{method:"POST",body:{block_type:"persona",assistant_id:Number(ce),content:v}});C(je.id)}me("")}catch(q){me(": "+q.message)}finally{se(!1)}},xn=[{key:"basic",label:""},{key:"about",label:"Core Blocks"},{key:"books",label:""}];return o.jsxs("div",{className:"flex h-full flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:M.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:M.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:V?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:Mt,disabled:V,children:o.jsx(Wo,{size:18,style:{color:M.accentDark}})})]}),o.jsx("div",{className:"flex shrink-0 gap-1 px-5 pb-3",children:xn.map(q=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2.5 text-[13px] font-semibold transition-all",style:{background:r===q.key?M.bg:"transparent",boxShadow:r===q.key?"var(--card-shadow-sm)":"none",color:r===q.key?M.accentDark:M.textMuted},onClick:()=>s(q.key),children:q.label},q.key))}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px",children:le?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:M.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[r==="basic"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-4 flex items-center gap-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var q;return(q=Me.current)==null?void 0:q.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:M.bg},children:i?o.jsx("img",{src:i,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[24px]",style:{color:M.accentDark},children:(l==null?void 0:l[0])||"?"})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:M.accentDark},children:o.jsx(ch,{size:9,color:"white"})})]}),o.jsx("input",{ref:Me,type:"file",accept:"image/*",className:"hidden",onChange:ke}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),o.jsx("input",{type:"text",value:l,onChange:q=>a(q.target.value),placeholder:"",className:"w-full rounded-[12px] px-4 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})]}),o.jsxs("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var q;return(q=he.current)==null?void 0:q.click()},title:"",children:o.jsx(Ho,{size:13,style:{color:M.textMuted}})}),o.jsx("input",{ref:he,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:Te}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>X(!0),title:"",children:o.jsx(Zs,{size:13,style:{color:M.accentDark}})})]})]}),o.jsx("textarea",{value:u,onChange:q=>p(q.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(Pa,{label:"",value:f,onChange:h,presets:z}),o.jsx(Pa,{label:"",value:m,onChange:w,presets:z}),o.jsx(Pa,{label:"",value:y,onChange:b,presets:z})]})]}),r==="about"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Ed,{label:"human block",value:g,onChange:x,placeholder:" AI ...",rows:7,onExpand:()=>be(!0),onHistory:()=>lt("human")})}),o.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Ed,{label:"persona block",value:v,onChange:S,placeholder:"AI ...",rows:7,onExpand:()=>F(!0),onHistory:()=>lt("persona")})})]}),r==="books"&&o.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(e0,{ruleSetIds:P,onChange:R,allBooks:_})})]})}),Z&&o.jsx(za,{value:u,onChange:p,onClose:()=>X(!1),title:"",placeholder:"..."}),we&&o.jsx(za,{value:g,onChange:x,onClose:()=>be(!1),title:"human block",placeholder:" AI ..."}),ee&&o.jsx(za,{value:v,onChange:S,onClose:()=>F(!1),title:"persona block",placeholder:"AI ..."}),G&&o.jsx(J1,{items:oe,currentContent:G==="human"?g:v,onApply:async q=>{const ce=G==="human"?j:k;try{await $(`/api/core-blocks/${ce}`,{method:"PUT",body:{content:q}}),G==="human"?x(q):S(q),me("")}catch(je){me("")}},onDelete:async q=>{try{await $(`/api/core-blocks/history/${q}`,{method:"DELETE"}),Y(ce=>ce.filter(je=>je.id!==q)),me("")}catch(ce){me("")}},onClose:()=>re(null)}),U&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:U})})]})}const ne={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function t0({on:e,onToggle:t}){return o.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full transition-all",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":ne.bg},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function _d({icon:e,label:t,hint:n,onClick:r}){return o.jsxs("button",{className:"flex w-full items-center gap-4 px-4 py-4",onClick:r,children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:ne.bg},children:e}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:ne.text},children:t}),n&&o.jsx("div",{className:"text-[11px]",style:{color:ne.textMuted},children:n})]}),o.jsx(Fr,{size:16,style:{color:ne.textMuted}})]})}function Td(){return o.jsx("div",{className:"mx-4 h-px",style:{background:"rgba(136,136,160,0.15)"}})}function ur({value:e,onChange:t,min:n,max:r}){const[s,l]=d.useState(String(e));d.useEffect(()=>l(String(e)),[e]);const a=()=>{let i=parseInt(s);isNaN(i)&&(i=n),i=Math.max(n,Math.min(r,i)),l(String(i)),t(i)};return o.jsx("input",{type:"number",value:s,onChange:i=>l(i.target.value),onBlur:a,onKeyDown:i=>i.key==="Enter"&&a(),className:"w-20 rounded-[10px] py-2 text-center text-[14px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:ne.bg,color:ne.text},min:n,max:r})}function n0(){const e=At(),[t,n]=d.useState(()=>{var k;return((k=JSON.parse(localStorage.getItem("app-settings")||"{}"))==null?void 0:k.autoMessage)||!1}),[r,s]=d.useState(()=>{var k;return((k=JSON.parse(localStorage.getItem("app-settings")||"{}"))==null?void 0:k.autoMessageIntervalMin)||30}),[l,a]=d.useState(()=>{var k;return((k=JSON.parse(localStorage.getItem("app-settings")||"{}"))==null?void 0:k.autoMessageIntervalMax)||60}),[i,c]=d.useState(()=>parseInt(localStorage.getItem("telegram_buffer_seconds")||"15")),[u,p]=d.useState(8),[f,h]=d.useState(8e3),[m,w]=d.useState(16e3),[y,b]=d.useState(!1),[g,x]=d.useState(!1),[v,S]=d.useState(null),j=k=>{S(k),setTimeout(()=>S(null),2e3)};d.useEffect(()=>{$("/api/settings/context-budget").then(k=>{h(k.retain_budget),w(k.trigger_threshold),b(!0)}).catch(()=>b(!0))},[]),d.useEffect(()=>{const k=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({...k,autoMessage:t,autoMessageIntervalMin:r,autoMessageIntervalMax:l}))},[t,r,l]),d.useEffect(()=>{localStorage.setItem("telegram_buffer_seconds",String(i)),$("/api/settings/buffer-seconds",{method:"PUT",body:{seconds:i}}).catch(()=>{})},[i]),d.useEffect(()=>{$("/api/settings/short-msg-max").then(k=>p(k.max_count||8)).catch(()=>{})},[]),d.useEffect(()=>{$("/api/settings/short-msg-max",{method:"PUT",body:{max_count:u}}).catch(()=>{})},[u]);const N=async()=>{x(!0);try{await $("/api/settings/context-budget",{method:"PUT",body:{retain_budget:f,trigger_threshold:m}}),j("")}catch(k){j("")}finally{x(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:ne.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:ne.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:ne.text},children:""}),o.jsx("div",{className:"w-10"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px space-y-4",children:[o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:ne.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(_d,{icon:o.jsx(By,{size:18,style:{color:ne.text}}),label:"API ",hint:"  ",onClick:()=>e("/settings/api")}),o.jsx(Td,{}),o.jsx(_d,{icon:o.jsx(Ay,{size:18,style:{color:ne.textMuted}}),label:"",hint:"",onClick:()=>j("")})]}),o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:ne.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:ne.bg},children:o.jsx($y,{size:18,style:{color:ne.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:ne.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:ne.textMuted},children:" AI "})]}),o.jsx(t0,{on:t,onToggle:()=>n(!t)})]}),t&&o.jsx("div",{className:"px-4 pb-4",children:o.jsxs("div",{className:"flex items-center justify-between rounded-[12px] px-4 py-3",style:{boxShadow:"var(--inset-shadow)",background:ne.bg},children:[o.jsx("span",{className:"text-[12px] font-medium",style:{color:ne.textMuted},children:" ()"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ur,{value:r,onChange:s,min:1,max:999}),o.jsx("span",{style:{color:ne.textMuted},children:"~"}),o.jsx(ur,{value:l,onChange:a,min:1,max:999})]})]})})]}),o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:ne.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:ne.bg},children:o.jsx(Wy,{size:18,style:{color:ne.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:ne.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:ne.textMuted},children:" ()"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(ur,{value:i,onChange:c,min:1,max:120}),o.jsx("span",{className:"text-[12px]",style:{color:ne.textMuted},children:""})]})]}),o.jsx(Td,{}),o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:ne.bg},children:o.jsx(zy,{size:18,style:{color:ne.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:ne.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:ne.textMuted},children:""})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(ur,{value:u,onChange:p,min:2,max:20}),o.jsx("span",{className:"text-[12px]",style:{color:ne.textMuted},children:""})]})]})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:ne.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:ne.bg},children:o.jsx(Dy,{size:18,style:{color:ne.text}})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:ne.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:ne.textMuted},children:""})]})]}),y?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:ne.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:ne.textMuted},children:" token "})]}),o.jsx(ur,{value:f,onChange:h,min:1e3,max:1e5})]}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:ne.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:ne.textMuted},children:""})]}),o.jsx(ur,{value:m,onChange:w,min:1e3,max:2e5})]}),o.jsx("button",{className:"w-full rounded-[14px] py-3 text-[14px] font-bold text-white",style:{background:g?"rgba(201,98,138,0.5)":"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"3px 3px 8px rgba(201,98,138,0.3)"},onClick:N,disabled:g,children:g?"...":""})]}):o.jsx("div",{className:"flex justify-center py-4",children:o.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2",style:{borderColor:ne.accent,borderTopColor:"transparent"}})})]})]}),v&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:v})})]})}const A={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},r0=["claude-opus-4-6","claude-opus-4-5-20251101","claude-sonnet-4-6","claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001"];function s0(e){try{return new URL(e).hostname}catch(t){return e}}function Dd({label:e,value:t,onChange:n,placeholder:r,password:s,disabled:l}){const[a,i]=d.useState(!1);return o.jsxs("div",{className:"mb-4",children:[e&&o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:A.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:s&&!a?"password":"text",value:t,onChange:c=>n(c.target.value),placeholder:r,disabled:l,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none pr-12",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:l?A.textMuted:A.text,opacity:l?.5:1}}),s&&o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>i(!a),children:a?o.jsx(Py,{size:16,style:{color:A.textMuted}}):o.jsx(Ry,{size:16,style:{color:A.textMuted}})})]})]})}function l0({value:e,onChange:t,options:n}){return o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:A.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[12px] font-semibold transition-all",style:{background:e===r.value?A.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?A.accentDark:A.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})}function o0({value:e,onChange:t,options:n,placeholder:r}){const[s,l]=d.useState(!1),a=d.useRef(null);return d.useEffect(()=>{if(!s)return;const i=c=>{a.current&&!a.current.contains(c.target)&&l(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[s]),o.jsxs("div",{className:"relative",ref:a,children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:e?A.text:A.textMuted},onClick:()=>l(!s),children:[o.jsx("span",{className:"truncate",children:e||r||""}),o.jsx(Xr,{size:16,style:{color:A.textMuted,flexShrink:0,transform:s?"rotate(180deg)":"none"}})]}),s&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:A.bg,boxShadow:"var(--card-shadow)"},children:n.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[13px]",style:{color:A.text},onClick:()=>{t(i),l(!1)},children:[o.jsx("span",{className:"truncate",children:i}),i===e&&o.jsx(Ws,{size:12,style:{color:A.accentDark,flexShrink:0}})]},i))})]})}function a0({value:e,onChange:t}){const[n,r]=d.useState(!1),s=d.useRef(null);return d.useEffect(()=>{if(!n)return;const l=a=>{s.current&&!s.current.contains(a.target)&&r(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[n]),o.jsxs("div",{className:"relative",ref:s,children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"",value:e,onChange:l=>t(l.target.value),className:"w-full rounded-[14px] px-4 py-3 pr-10 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:A.text}}),o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>r(!n),children:o.jsx(Xr,{size:16,style:{color:A.textMuted}})})]}),n&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:A.bg,boxShadow:"var(--card-shadow)"},children:r0.map(l=>o.jsx("button",{className:"flex w-full px-4 py-3 text-left text-[13px]",style:{color:A.text},onClick:()=>{t(l),r(!1)},children:l},l))})]})}function Ia({value:e,onChange:t,min:n,max:r,step:s}){const[l,a]=d.useState(String(e));d.useEffect(()=>a(String(e)),[e]);const i=()=>{let c=parseFloat(l);isNaN(c)&&(c=n),c=Math.max(n,Math.min(r,c)),c=Math.round(c/s)*s,c=parseFloat(c.toFixed(4)),a(String(c)),t(c)};return o.jsx("input",{type:"number",value:l,onChange:c=>a(c.target.value),onBlur:i,onKeyDown:c=>c.key==="Enter"&&i(),step:s,min:n,max:r,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:A.text}})}function Rd({on:e,onToggle:t}){return o.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":A.bg,transition:"background 0.2s"},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function La({children:e,className:t=""}){return o.jsx("div",{className:`rounded-[20px] p-5 mb-4 space-y-4 ${t}`,style:{background:A.bg,boxShadow:"var(--card-shadow)"},children:e})}function i0(){const e=At(),[t,n]=d.useState([]),[r,s]=d.useState([]),[l,a]=d.useState(!0),[i,c]=d.useState(""),[u,p]=d.useState(""),[f,h]=d.useState("api_key"),[m,w]=d.useState(""),[y,b]=d.useState([]),[g,x]=d.useState(!1),[v,S]=d.useState(1),[j,N]=d.useState(!1),[k,C]=d.useState(1),[P,R]=d.useState(!1),[z,te]=d.useState(4096),[_,T]=d.useState(null),[V,se]=d.useState(null),[le,I]=d.useState(!1),[U,O]=d.useState(!1),[Z,X]=d.useState(""),[we,be]=d.useState(!1),[ee,F]=d.useState(!1),[G,re]=d.useState(null),[oe,Y]=d.useState(null),[Me,he]=d.useState(""),Te=d.useRef(null),me=d.useRef(!1),lt=d.useRef({});lt.current={baseUrl:i,apiKey:u,authType:f,modelName:m,temperature:v,tempEnabled:j,topP:k,topPEnabled:P,maxTokens:z,editingPreset:_,providers:t};const ke=d.useCallback(L=>{se(L),setTimeout(()=>se(null),2500)},[]),Mt=d.useCallback(async()=>{try{const[L,fe]=await Promise.all([$("/api/providers"),$("/api/presets")]);n(L.providers||[]),s(fe.presets||[])}catch(L){ke(": "+L.message)}finally{a(!1)}},[ke]);d.useEffect(()=>{Mt()},[Mt]);const xn=L=>{var ue,Ie;T(L),w(L.model_name),N(L.temperature!=null),S((ue=L.temperature)!=null?ue:1),R(L.top_p!=null),C((Ie=L.top_p)!=null?Ie:1),te(L.max_tokens);const fe=t.find(Tt=>Tt.id===L.api_provider_id);fe&&(c(fe.base_url),p(fe.api_key),h(fe.auth_type||"api_key"))},q=()=>{T(null),c(""),p(""),h("api_key"),w(""),S(1),N(!1),C(1),R(!1),te(4096),b([])},ce=async()=>{if(!i.trim()||!u.trim()){ke(" API  Key");return}x(!0);try{const L=await fetch(`${i.trim().replace(/\/+$/,"")}/models`,{headers:{Authorization:`Bearer ${u.trim()}`}});if(!L.ok)throw new Error(`HTTP ${L.status}`);const ue=((await L.json()).data||[]).map(Ie=>Ie.id).sort();b(ue),ke(ue.length?` ${ue.length} `:"")}catch(L){ke(": "+L.message)}finally{x(!1)}},je=async()=>{var L;if(!i.trim()||!u.trim()||!m.trim()){ke(" API Key ");return}I(!0);try{const fe=i.trim().replace(/\/+$/,""),ue={"Content-Type":"application/json",Authorization:`Bearer ${u.trim()}`};f==="oauth_token"&&(ue["anthropic-beta"]="claude-code-20250219,oauth-2025-04-20,fine-grained-tool-streaming-2025-05-14",ue["anthropic-dangerous-direct-browser-access"]="true",ue["x-app"]="cli");const Ie=await fetch(`${fe}/chat/completions`,{method:"POST",headers:ue,body:JSON.stringify({model:m.trim(),max_tokens:10,messages:[{role:"user",content:"Hi"}]})});if(!Ie.ok){const Tt=await Ie.json().catch(()=>({}));throw new Error(((L=Tt.error)==null?void 0:L.message)||`HTTP ${Ie.status}`)}ke(" ")}catch(fe){ke(": "+fe.message)}finally{I(!1)}},ze=async L=>{const fe=lt.current,ue=fe.baseUrl.trim(),Ie=fe.apiKey.trim(),Tt=fe.authType,nn=L.find(ea=>ea.base_url===ue);return nn?((nn.api_key!==Ie||nn.auth_type!==Tt)&&await $(`/api/providers/${nn.id}`,{method:"PUT",body:{api_key:Ie,auth_type:Tt}}),nn.id):(await $("/api/providers",{method:"POST",body:{name:s0(ue),base_url:ue,api_key:Ie,auth_type:Tt}})).id},_t=async(L,fe)=>{const ue=lt.current;if(!ue.baseUrl.trim()||!ue.apiKey.trim()||!ue.modelName.trim()){ke("");return}F(!0);try{const Ie=await ze(ue.providers),Tt={name:L,model_name:ue.modelName.trim(),temperature:ue.tempEnabled?ue.temperature:null,top_p:ue.topPEnabled?ue.topP:null,max_tokens:Number(ue.maxTokens)||4096,api_provider_id:Ie};ue.editingPreset&&!fe?(await $(`/api/presets/${ue.editingPreset.id}`,{method:"PUT",body:Tt}),ke("")):(await $("/api/presets",{method:"POST",body:Tt}),ke("")),await Mt()}catch(Ie){ke(": "+Ie.message)}finally{F(!1)}},Fe=()=>{const L=Z.trim();L&&(O(!1),_t(L,we))},Un=()=>{_&&_t(_.name,!1)},E=async()=>{if(G){try{await $(`/api/presets/${G.id}`,{method:"DELETE"}),ke(""),(_==null?void 0:_.id)===G.id&&q(),Mt()}catch(L){ke(": "+L.message)}re(null)}},B=async()=>{const L=Me.trim();if(!(!L||!oe)){try{await $(`/api/presets/${oe.id}`,{method:"PUT",body:{name:L}}),ke(""),Mt()}catch(fe){ke("")}Y(null)}},K=(L,fe)=>{me.current=!1,L.touches?L.touches[0].clientX:L.clientX,L.touches?L.touches[0].clientY:L.clientY,Te.current=setTimeout(()=>{me.current=!0,re(fe)},600)},Ze=()=>clearTimeout(Te.current);return o.jsxs("div",{className:"flex h-full flex-col",style:{background:A.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:A.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:A.text},children:"API "}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px",children:l?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:A.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs(La,{children:[o.jsx(Dd,{label:"API ",value:i,onChange:c,placeholder:"https://api.openai.com/v1",disabled:f==="oauth_token"}),o.jsx(Dd,{label:"API Key",value:u,onChange:p,placeholder:f==="oauth_token"?"sk-ant-oat01-...":"sk-...",password:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:A.textMuted},children:""}),o.jsx(l0,{value:f,onChange:L=>{h(L),L==="oauth_token"&&c("https://api.anthropic.com/v1")},options:[{value:"api_key",label:" API Key"},{value:"oauth_token",label:"Setup Token"}]})]})]}),o.jsxs(La,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:A.textMuted},children:""}),f==="oauth_token"?o.jsx(a0,{value:m,onChange:w}):o.jsx(o0,{value:m,onChange:w,options:y})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text},onClick:je,disabled:le,children:[le?o.jsx(ud,{size:14,className:"animate-spin"}):null,""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text,opacity:f==="oauth_token"?.4:1},onClick:ce,disabled:g||f==="oauth_token",children:[g?o.jsx(ud,{size:14,className:"animate-spin"}):o.jsx(Pc,{size:14}),""]})]})]}),o.jsxs(La,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:A.text},children:" (0-2)"}),o.jsx("div",{className:"text-[11px]",style:{color:A.textMuted},children:""})]}),o.jsx(Rd,{on:j,onToggle:()=>N(!j)})]}),j&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:A.textMuted},children:""}),o.jsx(Ia,{value:v,onChange:S,min:0,max:2,step:.1})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:A.text},children:"Top P (0-1)"}),o.jsx(Rd,{on:P,onToggle:()=>R(!P)})]}),P&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:A.textMuted},children:""}),o.jsx(Ia,{value:k,onChange:C,min:0,max:1,step:.05})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:A.text},children:"Max Tokens"}),o.jsx(Ia,{value:z,onChange:te,min:128,max:2e5,step:1})]})]}),o.jsxs("div",{className:"mb-4 space-y-3",children:[_?o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:Un,disabled:ee,children:[o.jsx(Wo,{size:14}),ee?"...":""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text},onClick:()=>{be(!0),X(""),O(!0)},disabled:ee,children:[o.jsx(Ty,{size:14}),""]})]}):o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>{be(!0),X(""),O(!0)},disabled:ee,children:[o.jsx(Yr,{size:14}),""]}),_&&o.jsx("button",{className:"w-full py-1 text-center text-[12px]",style:{color:A.textMuted},onClick:q,children:""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"mb-3 text-[12px] font-bold uppercase tracking-wide",style:{color:A.textMuted},children:""}),r.length===0?o.jsx("div",{className:"rounded-[20px] py-8 text-center text-[13px]",style:{background:A.bg,boxShadow:"var(--card-shadow)",color:A.textMuted},children:""}):o.jsx("div",{className:"space-y-3",children:r.map(L=>{var fe,ue;return o.jsxs("div",{className:"rounded-[18px] p-4",style:{background:A.bg,boxShadow:(_==null?void 0:_.id)===L.id?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{me.current||xn(L)},onTouchStart:Ie=>K(Ie,L),onTouchEnd:Ze,onMouseDown:Ie=>K(Ie,L),onMouseUp:Ze,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-[14px] font-bold truncate",style:{color:(_==null?void 0:_.id)===L.id?A.accentDark:A.text},children:L.name}),o.jsx(dh,{size:12,style:{color:A.textMuted,flexShrink:0,marginLeft:8}})]}),o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:A.textMuted},children:L.model_name}),o.jsxs("div",{className:"mt-1 text-[10px] font-mono",style:{color:A.textMuted},children:["T: ",(fe=L.temperature)!=null?fe:""," | Top-P: ",(ue=L.top_p)!=null?ue:""," | Max: ",L.max_tokens]})]},L.id)})})]})]})}),U&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>O(!1),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:A.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:L=>L.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:A.text},children:""}),o.jsx("input",{type:"text",value:Z,onChange:L=>X(L.target.value),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:A.text},autoFocus:!0,onKeyDown:L=>L.key==="Enter"&&Fe()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text},onClick:()=>O(!1),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:Z.trim()?"linear-gradient(135deg, var(--accent), var(--accent-dark))":"rgba(201,98,138,0.3)"},onClick:Fe,disabled:!Z.trim(),children:""})]})]})}),G&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>re(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:A.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:L=>L.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:A.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:A.textMuted},children:["",G.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text},onClick:()=>re(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:E,children:""})]})]})}),oe&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>Y(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:A.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:L=>L.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:A.text},children:""}),o.jsx("input",{autoFocus:!0,type:"text",value:Me,onChange:L=>he(L.target.value),className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:A.bg,color:A.text},onKeyDown:L=>L.key==="Enter"&&B()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:A.bg,boxShadow:"var(--card-shadow-sm)",color:A.text},onClick:()=>Y(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))"},onClick:B,children:""})]})]})}),V&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:V})})]})}const pe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},qo={thinking:{bg:"rgba(168,130,200,0.12)",color:"#8860c8",label:""},tool_use:{bg:"rgba(232,160,60,0.12)",color:"#b8820a",label:""},tool_result:{bg:"rgba(80,160,200,0.12)",color:"#1a7ab0",label:""},injected_memories:{bg:"rgba(80,180,120,0.12)",color:"#3a8a5f",label:""}},c0=[{key:"short",label:""},{key:"long",label:""},{key:"theater",label:""}],u0=[{key:"happy",label:""},{key:"sad",label:""},{key:"angry",label:""},{key:"anxious",label:""},{key:"tired",label:""},{key:"emo",label:""},{key:"flirty",label:""},{key:"proud",label:""},{key:"calm",label:""}],Pd=300;function Bc({block_type:e}){const t=qo[e]||{bg:"rgba(136,136,160,0.1)",color:pe.textMuted,label:e};return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:t.bg,color:t.color},children:t.label})}function Yh({content:e}){const[t,n]=d.useState(!1),r=e.length>Pd;return o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:pe.text},children:r&&!t?e.slice(0,Pd)+"...":e}),r&&o.jsx("div",{className:"mt-1.5 flex justify-center",children:o.jsx("button",{className:"rounded-full px-3 py-0.5 text-[11px]",style:{color:pe.accentDark,background:"rgba(232,160,191,0.12)"},onClick:s=>{s.stopPropagation(),n(!t)},children:t?"":""})})]})}function d0({block:e,cacheKey:t,translateCache:n}){const r=n.current.get(t),[s,l]=d.useState(r||null),[a,i]=d.useState(!!r),[c,u]=d.useState(!1),p=qo.thinking,f=async h=>{if(h.stopPropagation(),s){i(!a);return}u(!0);try{const m=await $("/api/cot/translate",{method:"POST",body:{text:e.content}});l(m.translated),i(!0),n.current.set(t,m.translated)}catch(m){console.error("Translation failed:",m)}finally{u(!1)}};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:p.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(Bc,{block_type:"thinking"}),o.jsx("span",{className:"flex-1"}),o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#1a7ab0",background:"rgba(80,160,200,0.15)"},onClick:f,disabled:c,children:c?"...":a?"":""})]}),o.jsx(Yh,{content:a&&s?s:e.content})]})}function f0({avatarUrl:e}){return o.jsx("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full overflow-hidden",style:{boxShadow:"var(--icon-inset)",background:pe.bg},children:e?o.jsx("img",{src:e,alt:"",className:"h-full w-full object-cover"}):o.jsx("span",{style:{fontSize:16},children:""})})}function zd(e){return e?e>=1e3?`${(e/1e3).toFixed(1)}k`:String(e):"0"}function p0(e){if(!e)return null;const t=e/1e3;return t>=100?`${Math.round(t)}s`:`${t.toFixed(1)}s`}function h0({prompt:e,completion:t,elapsedMs:n}){return!e&&!t&&!n?null:o.jsxs(o.Fragment,{children:[e||t?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(80,160,120,0.12)",color:"#3a8a5f"},children:["",zd(e)]}),o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(160,100,220,0.12)",color:"#8a5abf"},children:["",zd(t)]})]}):null,n?o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(200,140,60,0.12)",color:"#b8820a"},children:p0(n)}):null]})}function m0(e){const t=[],n=[],r=[],s=[];for(const a of e)a.block_type==="thinking"?t.push(a):a.block_type==="tool_use"?n.push(a):a.block_type==="tool_result"?r.push(a):s.push(a);const l=[];for(let a=0;a<n.length;a++)l.push(n[a]),a<r.length&&l.push(r[a]);for(let a=n.length;a<r.length;a++)l.push(r[a]);return[...t,...l,...s]}function x0({memories:e}){const[t,n]=d.useState(!1);if(!e||e.length===0)return null;const r=qo.injected_memories;return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:r.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-2",onClick:()=>n(!t),children:[o.jsx(Bc,{block_type:"injected_memories"}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:r.color},children:["(",e.length,")"]}),t?o.jsx(uh,{size:12,style:{color:r.color}}):o.jsx(Xr,{size:12,style:{color:r.color}})]}),t&&o.jsx("div",{className:"mt-2 space-y-1",children:e.map(s=>o.jsxs("p",{className:"text-[11px] leading-relaxed",style:{color:pe.text},children:[o.jsxs("span",{style:{color:r.color,fontWeight:600},children:["#",s.id]})," ",s.content]},s.id))})]})}function g0({item:e,expanded:t,onToggle:n,live:r,avatarUrl:s,translateCache:l}){const a=e.rounds.map(c=>({...c,blocks:m0(c.blocks.filter(u=>u.block_type!=="text"&&u.block_type!=="usage"))})).filter(c=>c.blocks.length>0),i=a.length>0||e.injectedMemories&&e.injectedMemories.length>0||r&&e.textPreview;return o.jsxs("div",{className:"rounded-[18px] overflow-hidden",style:{background:pe.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-3 p-4",onClick:n,children:[o.jsx(f0,{avatarUrl:s}),o.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r&&o.jsx("span",{className:"inline-block h-3 w-3 animate-spin rounded-full border-[1.5px]",style:{borderColor:pe.accentDark,borderTopColor:"transparent"}}),e.has_tool_calls&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold",style:{background:"rgba(232,160,60,0.15)",color:"#b8820a"},children:""}),o.jsx(h0,{prompt:e.prompt_tokens||0,completion:e.completion_tokens||0,elapsedMs:e.elapsed_ms||0}),o.jsx("span",{className:"text-[10px]",style:{color:pe.textMuted},children:e.created_at||""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[13px]",style:{color:pe.text},children:e.preview||"()"})]}),t?o.jsx(uh,{size:16,style:{color:pe.textMuted,flexShrink:0}}):o.jsx(Xr,{size:16,style:{color:pe.textMuted,flexShrink:0}})]}),t&&i&&o.jsxs("div",{className:"px-4 pb-4",children:[o.jsx(x0,{memories:e.injectedMemories}),a.map(c=>o.jsxs("div",{className:"mb-3",children:[a.length>1&&o.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:pe.textMuted},children:[" ",c.round_index+1]}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}})]}),c.blocks.map((u,p)=>{if(u.block_type==="thinking")return o.jsx(d0,{block:u,cacheKey:`${e.request_id}:${c.round_index}:${p}`,translateCache:l},p);const f=qo[u.block_type]||{bg:"rgba(136,136,160,0.08)",color:pe.textMuted,label:u.block_type};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:f.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(Bc,{block_type:u.block_type}),u.tool_name&&o.jsx("span",{className:"text-[10px] font-mono",style:{color:f.color},children:u.tool_name})]}),o.jsx(Yh,{content:u.content})]},p)})]},c.round_index)),r&&e.textPreview&&o.jsxs("div",{className:"rounded-[12px] p-3",style:{background:"rgba(232,160,191,0.08)"},children:[o.jsx("div",{className:"mb-1",children:o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(232,160,191,0.15)",color:pe.accentDark},children:""})}),o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:pe.text},children:e.textPreview})]})]})]})}function y0(){const e=At(),[t,n]=d.useState([]),[r,s]=d.useState(!0),[l,a]=d.useState(null),[i,c]=d.useState(()=>localStorage.getItem("chat_mode")||"long"),[u,p]=d.useState(!1),[f,h]=d.useState(new Set),[m,w]=d.useState(null),[y,b]=d.useState(null),g=d.useRef(null),x=d.useRef(new Map),[v,S]=d.useState(null),[j,N]=d.useState(!1),k=d.useRef(null),[C,P]=d.useState(()=>localStorage.getItem("whisper_token")),R=()=>{s(!0),w(null),$("/api/cot?limit=100").then(_=>{n(Array.isArray(_)?_:[])}).catch(_=>{console.error("COT load error:",_),w(_.message||"")}).finally(()=>{s(!1);const _=localStorage.getItem("whisper_token");_&&_!==C&&P(_)})};d.useEffect(()=>{R()},[]),d.useEffect(()=>{$("/api/sessions?limit=1").then(_=>{var V;const T=(V=_.sessions)==null?void 0:V[0];T!=null&&T.assistant_id&&Kr(`assistant-avatar-${T.assistant_id}`).then(se=>{se&&b(se)}).catch(()=>{})}).catch(()=>{})},[]),d.useEffect(()=>{$("/api/settings/mood").then(_=>S(_.mood||"calm")).catch(()=>S("calm"))},[]),d.useEffect(()=>{if(!j)return;const _=T=>{k.current&&!k.current.contains(T.target)&&N(!1)};return document.addEventListener("pointerdown",_),()=>document.removeEventListener("pointerdown",_)},[j]),d.useEffect(()=>{if(!C){console.log("[COT WS] No token yet, waiting...");return}const T=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/cot?token=${encodeURIComponent(C)}`;console.log("[COT WS] Connecting to",T);let V,se,le=!1;const I=()=>{le||(V=new WebSocket(T),g.current=V,V.onopen=()=>{console.log("[COT WS] Connected"),p(!0)},V.onmessage=U=>{try{const O=JSON.parse(U.data),{type:Z,request_id:X}=O,we=ee=>{const F=ee.findIndex(Y=>Y.request_id===X);return F>=0?[ee,F]:[[{request_id:X,created_at:new Date().toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),preview:"...",has_tool_calls:!1,rounds:[],injectedMemories:[],textPreview:""},...ee],0]},be=(ee,F)=>{const G=ee.findIndex(oe=>oe.round_index===F);if(G>=0)return[ee,G];const re=[...ee,{round_index:F,blocks:[]}];return re.sort((oe,Y)=>oe.round_index-Y.round_index),[re,re.findIndex(oe=>oe.round_index===F)]};if(Z==="done"){h(ee=>{const F=new Set(ee);return F.delete(X),F}),n(ee=>ee.map(F=>F.request_id===X?{...F,prompt_tokens:O.prompt_tokens||0,completion_tokens:O.completion_tokens||0,elapsed_ms:O.elapsed_ms||0,textPreview:""}:F));return}if(Z==="injected_memories"){n(ee=>{let[F,G]=we(ee);return F=[...F],F[G]={...F[G],injectedMemories:O.memories||[]},F}),h(ee=>new Set(ee).add(X)),a(X);return}if(Z==="thinking_delta"){n(ee=>{let[F,G]=we(ee);F=[...F];const re={...F[G]};let[oe,Y]=be([...re.rounds],O.round_index);const Me={...oe[Y],blocks:[...oe[Y].blocks]};let he=-1;for(let Te=Me.blocks.length-1;Te>=0;Te--)if(Me.blocks[Te].block_type==="thinking"){he=Te;break}return he>=0?Me.blocks[he]={...Me.blocks[he],content:Me.blocks[he].content+O.content}:Me.blocks.push({block_type:"thinking",content:O.content,tool_name:null}),oe[Y]=Me,re.rounds=oe,F[G]=re,F}),h(ee=>new Set(ee).add(X)),a(X);return}if(Z==="text_delta"){n(ee=>{let[F,G]=we(ee);F=[...F];const re={...F[G]};return re.textPreview=(re.textPreview||"")+O.content,(!re.preview||re.preview==="...")&&(re.preview=re.textPreview.slice(0,80)),F[G]=re,F}),h(ee=>new Set(ee).add(X)),a(X);return}if(Z==="tool_use"||Z==="tool_result"){n(ee=>{let[F,G]=we(ee);F=[...F];const re={...F[G]};let[oe,Y]=be([...re.rounds],O.round_index);return oe[Y]={...oe[Y],blocks:[...oe[Y].blocks,{block_type:Z,content:O.content,tool_name:O.tool_name}]},re.rounds=oe,Z==="tool_use"&&(re.has_tool_calls=!0),F[G]=re,F}),h(ee=>new Set(ee).add(X)),a(X);return}if(O.block_type){const{round_index:ee,block_type:F,content:G,tool_name:re}=O;n(oe=>{let[Y,Me]=we(oe);Y=[...Y];const he={...Y[Me]};let[Te,me]=be([...he.rounds],ee);return Te[me]={...Te[me],blocks:[...Te[me].blocks,{block_type:F,content:G,tool_name:re}]},he.rounds=Te,F==="tool_use"&&(he.has_tool_calls=!0),F==="text"&&(!he.preview||he.preview==="...")&&(he.preview=G.slice(0,80)),Y[Me]=he,Y}),h(oe=>new Set(oe).add(X)),a(X)}}catch(O){}},V.onclose=U=>{console.log("[COT WS] Disconnected, code:",U.code,"reason:",U.reason),p(!1),g.current=null,le||(se=setTimeout(I,3e3))},V.onerror=U=>{console.error("[COT WS] Error:",U),V.close()})};return I(),()=>{le=!0,clearTimeout(se),g.current&&(g.current.onclose=null,g.current.close())}},[C]);const z=d.useRef(!0);d.useEffect(()=>{if(z.current){z.current=!1;return}localStorage.setItem("chat_mode",i);const _=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({..._,shortMode:i==="short",theaterMode:i==="theater"})),$("/api/settings/chat-mode",{method:"PUT",body:{mode:i}}).catch(()=>{})},[i]);const te=_=>{S(_),N(!1),$("/api/settings/mood",{method:"PUT",body:{mood:_}}).catch(()=>{})};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:pe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:pe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:pe.text},children:"COT "}),o.jsxs("div",{className:"flex items-center gap-2",children:[u&&o.jsx("div",{className:"h-2 w-2 rounded-full",style:{background:"#2a9d5c"},title:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:pe.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:R,disabled:r,children:o.jsx(Pc,{size:16,style:{color:pe.accentDark},className:r?"animate-spin":""})})]})]}),o.jsx("div",{className:"shrink-0 pb-3",style:{paddingLeft:20,paddingRight:20},children:o.jsxs("div",{className:"flex items-stretch gap-4 justify-center",children:[o.jsxs("div",{className:"relative flex",ref:k,children:[o.jsx("button",{className:"flex w-[42px] shrink-0 items-center justify-center rounded-[14px]",style:{background:pe.bg,boxShadow:"var(--inset-shadow)"},onClick:()=>v&&N(!j),children:v?o.jsx("img",{src:`/miniapp/assets/mood/${v}.png`,alt:v,className:"h-6 w-6",style:{imageRendering:"pixelated"}}):o.jsx("div",{className:"h-6 w-6"})}),j&&o.jsx("div",{className:"absolute left-0 top-12 z-50 rounded-[16px] overflow-hidden",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)",width:174},children:u0.map((_,T)=>{const V=Math.floor(T/3),se=T%3,le=v===_.key;return o.jsxs("button",{className:"inline-flex flex-col items-center justify-center",style:{width:"calc(100% / 3)",padding:"8px 0 6px",background:le?"rgba(232,160,191,0.18)":"transparent",boxShadow:[se<2?"inset -1px 0 0 rgba(136,136,160,0.12)":"",V<2?"inset 0 -1px 0 rgba(136,136,160,0.12)":""].filter(Boolean).join(", ")||"none"},onClick:()=>te(_.key),children:[o.jsx("img",{src:`/miniapp/assets/mood/${_.key}.png`,alt:_.label,className:"h-7 w-7",style:{imageRendering:"pixelated",filter:le?"drop-shadow(0 0 3px #e8a0bf)":"none"}}),o.jsx("span",{className:"text-[10px] mt-0.5",style:{color:le?"#d48aab":pe.textMuted},children:_.label})]},_.key)})})]}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:pe.bg,width:240},children:c0.map(_=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:i===_.key?pe.bg:"transparent",boxShadow:i===_.key?"var(--card-shadow-sm)":"none",color:i===_.key?pe.accentDark:pe.textMuted},onClick:()=>c(_.key),children:_.label},_.key))})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:pe.accent,borderTopColor:"transparent"}})}):m?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(cd,{size:36,style:{color:"#ef4444",opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:"#ef4444"},children:m})]}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(cd,{size:36,style:{color:pe.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:pe.textMuted},children:" COT "})]}):t.map(_=>o.jsx("div",{className:"mb-3 rounded-[18px]",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)"},children:o.jsx(g0,{item:_,expanded:l===_.request_id,onToggle:()=>a(l===_.request_id?null:_.request_id),live:f.has(_.request_id),avatarUrl:y,translateCache:x})},_.request_id))})]})}const Ve={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},El=80;function v0({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,m=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",m){const y=Math.min(1,Math.abs(p)/El);m.style.transition=w,m.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],m=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(m)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(m)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-El,Math.min(0,f.base+m));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/El)}`),f.current=y},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-El):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Ve.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(or,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function w0({msg:e,roleLabel:t,roleColor:n,fmtTime:r,onDelete:s}){const[l,a]=d.useState(!1),[i,c]=d.useState(!1),u=d.useRef(null);return d.useLayoutEffect(()=>{const p=u.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e.content,l]),o.jsx(v0,{onDelete:s,children:o.jsxs("div",{className:"rounded-[18px] p-3",style:{background:Ve.bg},children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:n(e.role)},children:t(e.role)}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[e.summarized&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px] font-semibold",style:{background:"rgba(58,138,95,0.15)",color:"#2d7a4a"},children:""}),o.jsx("span",{className:"text-[10px]",style:{color:Ve.textMuted},children:r(e.created_at)})]})]}),o.jsx("div",{ref:u,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:Ve.text}:{color:Ve.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:e.content}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:"#d48aab",background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})})]})})}function b0(){const e=At(),[t,n]=d.useState([]),[r,s]=d.useState(null),[l,a]=d.useState(!0),[i,c]=d.useState(!1),u=async()=>{var y;a(!0);try{const g=(y=(await $("/api/sessions?limit=1")).sessions)==null?void 0:y[0];if(!g){a(!1);return}s(g.id);const x=await $(`/api/sessions/${g.id}/messages?limit=50`);n((x.messages||[]).reverse()),c(x.has_more||!1)}catch(b){console.error(b)}a(!1)};d.useEffect(()=>{u()},[]);const p=async y=>{if(r)try{await $(`/api/sessions/${r}/messages/${y}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==y))}catch(b){console.error("Delete failed",b)}},f=async()=>{if(!r||!i||l)return;const y=t[t.length-1];if(y){a(!0);try{const b=await $(`/api/sessions/${r}/messages?limit=50&before_id=${y.id}`),g=(b.messages||[]).reverse();n(x=>[...x,...g]),c(b.has_more||!1)}catch(b){console.error(b)}a(!1)}},h=y=>{if(!y)return"";const b=new Date(y),g=new Date;return b.toDateString()===g.toDateString()?b.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):b.toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})},m=y=>y==="user"?"":y==="assistant"?"AI":"",w=y=>y==="user"?Ve.accentDark:y==="assistant"?"#3a9b5c":Ve.textMuted;return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ve.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ve.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:Ve.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ve.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ve.bg,boxShadow:l?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:u,disabled:l,children:o.jsx(Pc,{size:16,style:{color:Ve.accentDark},className:l?"animate-spin":""})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("p",{className:"text-[11px]",style:{color:Ve.textMuted},children:""})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l&&t.length===0?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ve.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:Ve.textMuted},children:""}):o.jsxs(o.Fragment,{children:[t.map(y=>o.jsx(w0,{msg:y,roleLabel:m,roleColor:w,fmtTime:h,onDelete:()=>p(y.id)},y.id)),i&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:Ve.bg,boxShadow:"var(--card-shadow-sm)",color:Ve.accentDark},onClick:f,disabled:l,children:l?"...":""})]})})]})}const W={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},k0=[{key:"memories",label:""},{key:"summaries",label:""},{key:"messages",label:""}],Ml=80,Id={identity:{color:"#7b5ea7",bg:"#ede4f7"},relationship:{color:"#c26a8a",bg:"#f7e0ea"},bond:{color:"#d48aab",bg:"#fce8f0"},conflict:{color:"#b5454a",bg:"#f5dede"},fact:{color:"#4a8ab5",bg:"#deedf5"},preference:{color:"#9b7a3b",bg:"#f0ebd8"},health:{color:"#4a9b6e",bg:"#ddf0e5"},task:{color:"#6b7b9b",bg:"#e0e6f0"},ephemeral:{color:"#9b9b9b",bg:"#ececec"},other:{color:"#8a7a6a",bg:"#efe8df"}};function Nr(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function Uc({text:e,keyword:t}){if(!t||!e)return o.jsx(o.Fragment,{children:e});const n=e.toLowerCase(),r=t.toLowerCase(),s=[];let l=0,a=n.indexOf(r,l);for(;a!==-1;)a>l&&s.push(o.jsx("span",{children:e.slice(l,a)},l)),s.push(o.jsx("span",{style:{color:W.accentDark,fontWeight:600},children:e.slice(a,a+r.length)},`h${a}`)),l=a+r.length,a=n.indexOf(r,l);return l<e.length&&s.push(o.jsx("span",{children:e.slice(l)},l)),o.jsx(o.Fragment,{children:s})}function j0({message:e,onConfirm:t,onCancel:n}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:W.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:W.text},children:""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:W.textMuted},children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.text},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function S0({initialText:e,onSave:t,onCancel:n}){const[r,s]=d.useState(e);return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-5 w-full max-w-[340px] rounded-[18px] p-4",style:{background:W.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:l=>l.stopPropagation(),children:[o.jsx("textarea",{className:"w-full rounded-[12px] p-3 text-[12px] leading-relaxed resize-none outline-none",style:{background:W.bg,boxShadow:"var(--inset-shadow)",color:W.text,minHeight:140,maxHeight:280},value:r,onChange:l=>s(l.target.value),autoFocus:!0}),o.jsxs("div",{className:"mt-3 flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.textMuted},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.accentDark},onClick:()=>t(r),disabled:!r.trim(),children:""})]})]})})}function Kh({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,m=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",m){const y=Math.min(1,Math.abs(p)/Ml);m.style.transition=w,m.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],m=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(m)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(m)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Ml,Math.min(0,f.base+m));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Ml)}`),f.current=y},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Ml):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(or,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function Ld({children:e,time:t,badge:n,keyword:r,onSwipeDelete:s,onEdit:l}){const[a,i]=d.useState(!1),[c,u]=d.useState(!1),p=d.useRef(null),f=typeof e=="string"?e:"",h=!!s;d.useLayoutEffect(()=>{const w=p.current;w&&!a&&u(w.scrollHeight>w.clientHeight+1)},[f,a]);const m=o.jsxs("div",{className:h?"rounded-[18px] p-3":"mb-3 rounded-[18px] p-3",style:{background:W.bg,boxShadow:h?"none":"var(--card-shadow-sm)"},children:[o.jsxs("div",{className:"flex items-start justify-between gap-1",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[n,o.jsx("div",{ref:p,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:a?{color:W.text}:{color:W.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>i(!a),children:o.jsx(Uc,{text:f,keyword:r})})]}),l&&o.jsx("button",{className:"mt-0.5 flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)"},onClick:w=>{w.stopPropagation(),l()},children:o.jsx(dh,{size:11,style:{color:W.accentDark}})})]}),o.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:W.textMuted},children:t||""}),(c||a)&&o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:W.accentDark,background:"rgba(232,160,191,0.1)"},onClick:w=>{w.stopPropagation(),i(!a)},children:a?"":""})]})]});return s?o.jsx(Kh,{onDelete:s,children:m}):m}function N0({content:e,deletedAt:t,keyword:n,onRestore:r,onPermanentDelete:s}){const[l,a]=d.useState(!1),[i,c]=d.useState(!1),u=d.useRef(null);return d.useLayoutEffect(()=>{const p=u.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e,l]),o.jsxs("div",{className:"mb-2 rounded-[14px] p-3",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",opacity:.75},children:[o.jsx("div",{ref:u,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:W.text}:{color:W.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:o.jsx(Uc,{text:e,keyword:n})}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:W.accentDark,background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:W.textMuted},children:t?` ${Nr(t)}`:""}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(59,130,246,0.1)",color:"#3b82f6"},onClick:r,children:""}),o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(239,68,68,0.1)",color:"#ef4444"},onClick:s,children:""})]})]})]})}function C0({msg:e,keyword:t,roleLabel:n,roleColor:r,onDelete:s}){const[l,a]=d.useState(!1),[i,c]=d.useState(!1),u=d.useRef(null);return d.useLayoutEffect(()=>{const p=u.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e.content,l]),o.jsx(Kh,{onDelete:s,children:o.jsxs("div",{className:"rounded-[18px] p-3",style:{background:W.bg},children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:r(e.role)},children:n(e.role)}),e.summary_group_id&&o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(74,138,181,0.1)",color:"#4a8ab5"},children:["",e.summary_group_id]})]}),o.jsx("span",{className:"text-[10px]",style:{color:W.textMuted},children:Nr(e.created_at)})]}),o.jsx("div",{ref:u,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:W.text}:{color:W.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:o.jsx(Uc,{text:e.content,keyword:t})}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:W.accentDark,background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})})]})})}function E0(){const e=At(),[t,n]=d.useState("memories"),[r,s]=d.useState(!1),[l,a]=d.useState(null),[i,c]=d.useState([]),[u,p]=d.useState(null),[f,h]=d.useState(""),[m,w]=d.useState(null),[y,b]=d.useState(null),[g,x]=d.useState([]),[v,S]=d.useState([]),[j,N]=d.useState([]),[k,C]=d.useState([]),[P,R]=d.useState([]),[z,te]=d.useState(!0),[_,T]=d.useState(!1),[V,se]=d.useState(!1),[le,I]=d.useState(!1);d.useEffect(()=>{$("/api/sessions?limit=50").then(E=>{const B=E.sessions||[];c(B),B.length>0&&!l&&a(B[0].id)}).catch(()=>{})},[]),d.useEffect(()=>{l&&$(`/api/sessions/${l}/info`).then(E=>p(E.assistant_name||null)).catch(()=>p(null))},[l]);const U=50,O=d.useRef(""),Z=d.useRef(null);d.useEffect(()=>{l&&we()},[l,r]),d.useEffect(()=>{l&&!r&&we()},[t]),d.useEffect(()=>(Z.current&&clearTimeout(Z.current),Z.current=setTimeout(()=>{const E=f.trim();E!==O.current&&(O.current=E,l&&we(E))},400),()=>{Z.current&&clearTimeout(Z.current)}),[f]);const X=E=>{const B=(E!=null?E:O.current||"").trim();return B?`&search=${encodeURIComponent(B)}`:""},we=async E=>{if(!l)return;te(!0);const B=X(E);try{if(r){const[K,Ze]=await Promise.all([$("/api/memories/trash?limit=100"),$(`/api/sessions/${l}/summaries/trash`)]);C(K.memories||[]),R(Ze.summaries||[])}else if(t==="memories"){const K=await $(`/api/memories?limit=${U}&offset=0${B}`);x(K.memories||[]),T((K.total||0)>(K.memories||[]).length)}else if(t==="summaries"){const K=await $(`/api/sessions/${l}/summaries?limit=${U}&offset=0${B}`);S(K.summaries||[]),se((K.total||0)>(K.summaries||[]).length)}else{const K=await $(`/api/sessions/${l}/messages?limit=50${B}`);N((K.messages||[]).reverse()),I(K.has_more||!1)}}catch(K){console.error(K)}te(!1)},be=async()=>{if(!_||z)return;te(!0);const E=X();try{const B=await $(`/api/memories?limit=${U}&offset=${g.length}${E}`),K=B.memories||[];x(Ze=>[...Ze,...K]),T((B.total||0)>g.length+K.length)}catch(B){console.error(B)}te(!1)},ee=async()=>{if(!l||!V||z)return;te(!0);const E=X();try{const B=await $(`/api/sessions/${l}/summaries?limit=${U}&offset=${v.length}${E}`),K=B.summaries||[];S(Ze=>[...Ze,...K]),se((B.total||0)>v.length+K.length)}catch(B){console.error(B)}te(!1)},F=async()=>{if(!l||!le||z)return;const E=j[j.length-1];if(!E)return;te(!0);const B=X();try{const K=await $(`/api/sessions/${l}/messages?limit=50&before_id=${E.id}${B}`);N(Ze=>[...Ze,...(K.messages||[]).reverse()]),I(K.has_more||!1)}catch(K){console.error(K)}te(!1)},G=f.trim(),re=d.useMemo(()=>G?k.filter(E=>E.content.toLowerCase().includes(G.toLowerCase())):k,[k,G]),oe=d.useMemo(()=>G?P.filter(E=>(E.summary_content||"").toLowerCase().includes(G.toLowerCase())):P,[P,G]),Y=(E,B)=>w({message:E,action:B}),Me=E=>Y("",async()=>{await $(`/api/memories/${E}`,{method:"DELETE"}),x(B=>B.filter(K=>K.id!==E))}),he=E=>Y("",async()=>{await $(`/api/sessions/${l}/summaries/${E}`,{method:"DELETE"}),S(B=>B.filter(K=>K.id!==E))}),Te=E=>Y("",async()=>{await $(`/api/sessions/${l}/messages/${E}`,{method:"DELETE"}),N(B=>B.filter(K=>K.id!==E))}),me=async E=>{await $(`/api/memories/${E}/restore`,{method:"POST"}),C(B=>B.filter(K=>K.id!==E))},lt=E=>Y("",async()=>{await $(`/api/memories/${E}/permanent`,{method:"DELETE"}),C(B=>B.filter(K=>K.id!==E))}),ke=async E=>{await $(`/api/sessions/${l}/summaries/${E}/restore`,{method:"POST"}),R(B=>B.filter(K=>K.id!==E))},Mt=E=>Y("",async()=>{await $(`/api/sessions/${l}/summaries/${E}/permanent`,{method:"DELETE"}),R(B=>B.filter(K=>K.id!==E))}),xn=async E=>{if(y){try{y.type==="memory"?(await $(`/api/memories/${y.id}`,{method:"PUT",body:{content:E}}),x(B=>B.map(K=>K.id===y.id?{...K,content:E}:K))):(await $(`/api/sessions/${l}/summaries/${y.id}`,{method:"PATCH",body:{summary_content:E}}),S(B=>B.map(K=>K.id===y.id?{...K,summary_content:E}:K)))}catch(B){console.error(B)}b(null)}},q=E=>E==="user"?"":E==="assistant"?u||"":"",ce=E=>E==="user"?W.accentDark:E==="assistant"?"#8d68c4":W.textMuted,Un=r?(()=>{if(z)return o.jsx(_l,{});const E=t==="memories"?re:oe;return E.length===0?o.jsx(Tl,{text:G?"":""}):E.map(B=>o.jsx(N0,{content:B.content||B.summary_content||"()",deletedAt:B.deleted_at,keyword:G,onRestore:()=>t==="memories"?me(B.id):ke(B.id),onPermanentDelete:()=>t==="memories"?lt(B.id):Mt(B.id)},B.id))})():t==="memories"?z&&g.length===0?o.jsx(_l,{}):g.length===0?o.jsx(Tl,{text:G?"":""}):o.jsxs(o.Fragment,{children:[g.map(E=>o.jsx(Ld,{time:E.updated_at?`${Nr(E.created_at)}   ${Nr(E.updated_at)}`:Nr(E.created_at),keyword:G,onSwipeDelete:()=>Me(E.id),onEdit:()=>b({type:"memory",id:E.id,text:E.content}),badge:(()=>{const B=Id[E.klass]||Id.other;return o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:B.bg,color:B.color},children:E.klass}),o.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:W.textMuted},children:["#",E.id]})]})})(),children:E.content},E.id)),_&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.accentDark},onClick:be,disabled:z,children:z?"...":""})]}):t==="summaries"?z&&v.length===0?o.jsx(_l,{}):v.length===0?o.jsx(Tl,{text:G?"":""}):o.jsxs(o.Fragment,{children:[v.map(E=>o.jsx(Ld,{time:Nr(E.created_at),keyword:G,onSwipeDelete:()=>he(E.id),onEdit:()=>b({type:"summary",id:E.id,text:E.summary_content}),badge:o.jsxs(o.Fragment,{children:[E.mood_tag&&o.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:"rgba(232,160,191,0.15)",color:W.accentDark},children:E.mood_tag}),o.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:W.textMuted},children:["#",E.id]})]}),children:E.summary_content||"()"},E.id)),V&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.accentDark},onClick:ee,disabled:z,children:z?"...":""})]}):z&&j.length===0?o.jsx(_l,{}):j.length===0?o.jsx(Tl,{text:G?"":""}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"mb-2 text-[11px]",style:{color:W.textMuted},children:""}),j.map(E=>o.jsx(C0,{msg:E,keyword:G,roleLabel:q,roleColor:ce,onDelete:()=>Te(E.id)},E.id)),le&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.accentDark},onClick:F,disabled:z,children:z?"...":""})]});return o.jsxs("div",{className:"flex h-full flex-col",style:{background:W.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:W.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:W.text},children:r?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:W.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>s(!r),children:o.jsx(or,{size:16,style:{color:r?"#ef4444":W.accentDark}})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:W.bg,boxShadow:"var(--inset-shadow)"},children:k0.map(E=>{const B=r&&E.key==="messages",K=t===E.key;return o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:B?{color:W.textMuted,opacity:.35,cursor:"default"}:K?{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.accentDark}:{color:W.textMuted},disabled:B,onClick:()=>!B&&n(E.key),children:E.label},E.key)})})}),o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative",style:{width:"33%"},children:[o.jsx("select",{className:"w-full appearance-none rounded-[12px] py-2 pl-3 pr-7 text-[11px] font-medium outline-none truncate",style:{background:W.bg,boxShadow:"var(--card-shadow-sm)",color:W.text,WebkitAppearance:"none"},value:l!=null?l:"",onChange:E=>a(Number(E.target.value)),children:i.map(E=>o.jsxs("option",{value:E.id,children:["#",E.id," ",E.title||""]},E.id))}),o.jsx(Xr,{size:12,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2",style:{color:W.textMuted}})]}),o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Fy,{size:13,className:"absolute left-2.5 top-1/2 -translate-y-1/2",style:{color:W.textMuted}}),o.jsx("input",{className:"w-full rounded-[12px] py-2 pl-8 pr-7 text-[11px] outline-none",style:{background:W.bg,boxShadow:"var(--inset-shadow)",color:W.text},placeholder:"...",value:f,onChange:E=>h(E.target.value)}),f&&o.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>h(""),children:o.jsx(el,{size:13,style:{color:W.textMuted}})})]})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:Un}),m&&o.jsx(j0,{message:m.message,onConfirm:async()=>{try{await m.action()}catch(E){console.error(E)}w(null)},onCancel:()=>w(null)}),y&&o.jsx(S0,{initialText:y.text,onSave:xn,onCancel:()=>b(null)})]})}function _l(){return o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:W.accent,borderTopColor:"transparent"}})})}function Tl({text:e}){return o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:W.textMuted},children:e})}const Q={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},M0=[{key:"theirs",label:""},{key:"mine",label:""}],Dl=80;function Qh(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function _0({message:e,onConfirm:t,onCancel:n}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Q.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Q.text},children:""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:Q.textMuted},children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)",color:Q.text},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function T0({children:e,onDelete:t}){const n=d.useRef(null),r=d.useRef(null),s=d.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,m=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",m){const y=Math.min(1,Math.abs(p)/Dl);m.style.transition=w,m.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],m=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(m)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(m)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Dl,Math.min(0,f.base+m));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Dl)}`),f.current=y},u=()=>{s.current.dragging=!1,s.current.current<-40?l(-Dl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(or,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:u,children:e})]})}function D0({unlockAt:e}){const[t,n]=d.useState(Date.now());d.useEffect(()=>{const u=setInterval(()=>n(Date.now()),1e3);return()=>clearInterval(u)},[]);const r=new Date(e).getTime()-t;if(r<=0)return null;const s=Math.floor(r/864e5),l=Math.floor(r%864e5/36e5),a=Math.floor(r%36e5/6e4),i=Math.floor(r%6e4/1e3);let c="";return s>0&&(c+=`${s}`),(l>0||s>0)&&(c+=`${l}`),c+=`${a}${i}`,o.jsxs("div",{className:"flex items-center gap-1.5 text-[12px]",style:{color:Q.accentDark},children:[o.jsx(Oy,{size:12}),o.jsx("span",{children:c})]})}function R0({assistants:e,avatarMap:t,currentId:n,onSelect:r,onClose:s}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:s,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-5",style:{background:Q.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:l=>l.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:Q.text},children:""}),o.jsx("button",{onClick:s,children:o.jsx(el,{size:18,style:{color:Q.textMuted}})})]}),o.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:e.map(l=>{var i;const a=t[l.id]||l.avatar_url;return o.jsxs("button",{className:"mb-2 flex w-full items-center gap-3 rounded-[14px] p-3 text-left",style:{background:Q.bg,boxShadow:l.id===n?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{r(l.id),s()},children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:36,height:36,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:2},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Q.bg},children:a?o.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:Q.accentDark},children:((i=l.name)==null?void 0:i[0])||"?"})})}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:Q.text},children:l.name})]},l.id)})})]})})}function P0({diary:e,onBack:t,onMarkRead:n}){return d.useEffect(()=>{e&&!e.is_read&&e.author==="assistant"&&(!e.unlock_at||new Date(e.unlock_at)<=new Date)&&n(e.id)},[e]),o.jsxs("div",{className:"flex h-full flex-col",style:{background:Q.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:t,children:o.jsx(Et,{size:22,style:{color:Q.text}})}),o.jsx("h1",{className:"text-[15px] font-bold truncate max-w-[60%]",style:{color:Q.text},children:e.title||""}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:o.jsxs("div",{className:"rounded-[18px] p-5",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{className:"mb-3 text-[10px]",style:{color:Q.textMuted},children:Qh(e.created_at)}),o.jsx("div",{className:"text-[13px] leading-[28px]",style:{color:Q.text},children:e.content.split(`
`).map((r,s)=>o.jsx("div",{style:{borderBottom:"1px solid rgba(0,0,0,0.06)",minHeight:28},children:r||""},s))})]})})]})}function z0({assistantId:e,onSave:t,onCancel:n}){const[r,s]=d.useState(""),[l,a]=d.useState(""),[i,c]=d.useState(!1),[u,p]=d.useState(""),[f,h]=d.useState(!1),[m,w]=d.useState(!1),y=async()=>{if(!(!l.trim()||f)){h(!0);try{const b={assistant_id:e,author:"user",title:r.trim(),content:l.trim()};i&&u&&(b.unlock_at=new Date(u).toISOString()),await t(b)}finally{h(!1)}}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Q.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Et,{size:22,style:{color:Q.text}})}),o.jsx("h1",{className:"text-[15px] font-bold",style:{color:Q.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Q.bg,boxShadow:l.trim()?"var(--card-shadow-sm)":"var(--inset-shadow)"},onClick:y,disabled:!l.trim()||f,children:o.jsx("span",{className:"text-[12px] font-bold",style:{color:l.trim()?Q.accentDark:Q.textMuted},children:""})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[!m&&o.jsx("input",{className:"mb-3 w-full rounded-[12px] px-3 py-2.5 text-[13px] font-medium outline-none",style:{background:Q.bg,boxShadow:"var(--inset-shadow)",color:Q.text},placeholder:"",value:r,onChange:b=>s(b.target.value)}),o.jsxs("div",{className:"relative mb-3",children:[o.jsx("textarea",{className:"w-full rounded-[14px] p-3 text-[13px] leading-[28px] resize-none outline-none",style:{background:Q.bg,boxShadow:"var(--inset-shadow)",color:Q.text,minHeight:m?"calc(100vh - 120px)":200,backgroundImage:"repeating-linear-gradient(transparent, transparent 27px, rgba(0,0,0,0.05) 27px, rgba(0,0,0,0.05) 28px)",backgroundPositionY:9},placeholder:"...",value:l,onChange:b=>a(b.target.value),autoFocus:!0}),o.jsx("button",{className:"absolute top-2 right-2 flex h-7 w-7 items-center justify-center rounded-full",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>w(!m),children:m?o.jsx(Br,{size:13,style:{color:Q.accentDark}}):o.jsx(Zs,{size:13,style:{color:Q.accentDark}})})]}),!m&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-[14px] px-4 py-3",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-[13px] font-medium",style:{color:Q.text},children:""}),o.jsx("p",{className:"text-[10px]",style:{color:Q.textMuted},children:""})]}),o.jsx("button",{className:"relative h-7 w-12 rounded-full transition-colors",style:{background:i?Q.accent:"rgba(0,0,0,0.1)"},onClick:()=>{if(!i&&!u){const b=new Date;b.setDate(b.getDate()+1),b.setHours(9,0,0,0);const g=x=>String(x).padStart(2,"0");p(`${b.getFullYear()}-${g(b.getMonth()+1)}-${g(b.getDate())}T${g(b.getHours())}:${g(b.getMinutes())}`)}c(!i)},children:o.jsx("div",{className:"absolute top-0.5 h-6 w-6 rounded-full transition-transform",style:{background:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",transform:i?"translateX(22px)":"translateX(2px)"}})})]}),i&&o.jsxs("div",{className:"rounded-[14px] px-4 py-3",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("p",{className:"mb-2 text-[12px] font-medium",style:{color:Q.text},children:""}),o.jsx("input",{type:"datetime-local",className:"w-full rounded-[10px] px-3 py-2 text-[13px] outline-none",style:{background:Q.bg,boxShadow:"var(--inset-shadow)",color:Q.text},value:u,onChange:b=>p(b.target.value)})]})]})]})]})}function I0(){var _;const e=At(),[t,n]=d.useState("theirs"),[r,s]=d.useState([]),[l,a]=d.useState({}),[i,c]=d.useState(()=>{const T=localStorage.getItem("diary_assistant_id");return T?Number(T):null}),u=T=>{c(T),T!=null&&localStorage.setItem("diary_assistant_id",String(T))},[p,f]=d.useState(!1),[h,m]=d.useState([]),[w,y]=d.useState(!0),[b,g]=d.useState(null),[x,v]=d.useState(null),[S,j]=d.useState(!1);d.useEffect(()=>{$("/api/assistants").then(async T=>{const V=T.assistants||[];s(V),V.length>0&&(i&&V.some(I=>I.id===i)||u(V[0].id));const se={};await Promise.all(V.map(async le=>{const I=await Kr(`assistant-avatar-${le.id}`).catch(()=>null);I&&(se[le.id]=I)})),a(se)}).catch(()=>{})},[]);const N=r.find(T=>T.id===i),k=i&&l[i]||(N==null?void 0:N.avatar_url);d.useEffect(()=>{i!=null&&C()},[i,t]);const C=async()=>{y(!0);try{const V=await $(`/api/diary?assistant_id=${i}&author=${t==="theirs"?"assistant":"user"}&limit=100`);m(V.diary||[])}catch(T){console.error(T)}y(!1)},P=T=>{g({message:"",action:async()=>{await $(`/api/diary/${T}`,{method:"DELETE"}),m(V=>V.filter(se=>se.id!==T))}})},R=async T=>{try{await $(`/api/diary/${T}/read`,{method:"POST"}),m(V=>V.map(se=>se.id===T?{...se,is_read:!0}:se))}catch(V){console.error(V)}},z=async T=>{await $("/api/diary",{method:"POST",body:T}),j(!1),C()},te=T=>{T.unlock_at&&new Date(T.unlock_at)>new Date||v(T)};return x?o.jsx(P0,{diary:x,onBack:()=>{v(null),C()},onMarkRead:R}):S?o.jsx(z0,{assistantId:i,onSave:z,onCancel:()=>j(!1)}):o.jsxs("div",{className:"flex h-full flex-col",style:{background:Q.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:Q.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Q.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{border:"2px solid #e8a0bf",padding:2},onClick:()=>f(!0),children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Q.bg},children:k?o.jsx("img",{src:k,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:Q.accentDark},children:((_=N==null?void 0:N.name)==null?void 0:_[0])||"?"})})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:Q.bg,boxShadow:"var(--inset-shadow)"},children:M0.map(T=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:t===T.key?{background:Q.bg,boxShadow:"var(--card-shadow-sm)",color:Q.accentDark}:{color:Q.textMuted},onClick:()=>n(T.key),children:T.label},T.key))})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24",children:w?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Q.accent,borderTopColor:"transparent"}})}):h.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:Q.textMuted},children:t==="theirs"?"":""}):h.map(T=>{const V=T.unlock_at&&new Date(T.unlock_at)>new Date;return o.jsx(T0,{onDelete:()=>P(T.id),children:o.jsxs("div",{className:"p-4 rounded-[18px]",style:{background:Q.bg,userSelect:"none"},onClick:()=>te(T),children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[!T.is_read&&T.author==="assistant"&&!V&&o.jsx("div",{className:"h-2 w-2 shrink-0 rounded-full",style:{background:"#ef4444"}}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:Q.text},children:T.title||""})]}),o.jsx("span",{className:"text-[10px] shrink-0 ml-2",style:{color:Q.textMuted},children:Qh(T.created_at)})]}),V?o.jsx(D0,{unlockAt:T.unlock_at}):o.jsx("p",{className:"text-[12px] leading-relaxed break-words",style:{color:Q.textMuted,maxHeight:40,overflow:"hidden"},children:T.content.length>60?T.content.slice(0,60)+"...":T.content})]})},T.id)})}),t==="mine"&&o.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center",style:{zIndex:30},children:o.jsx("button",{className:"flex h-12 w-12 items-center justify-center rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",boxShadow:"0 4px 14px rgba(232,160,191,0.4)"},onClick:()=>j(!0),children:o.jsx(Yr,{size:22,color:"white"})})}),p&&o.jsx(R0,{assistants:r,avatarMap:l,currentId:i,onSelect:u,onClose:()=>f(!1)}),b&&o.jsx(_0,{message:b.message,onConfirm:async()=>{try{await b.action()}catch(T){console.error(T)}g(null)},onCancel:()=>g(null)})]})}const ye={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function L0({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:ye.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:ye.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ye.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Br,{size:18,style:{color:ye.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:ye.bg,color:ye.text},placeholder:"..."})]})}function O0(){const e=At(),[t,n]=d.useState(""),[r,s]=d.useState(""),[l,a]=d.useState(""),[i,c]=d.useState(""),[u,p]=d.useState(!1),[f,h]=d.useState(!0),[m,w]=d.useState(null),[y,b]=d.useState(!1),g=d.useRef(null),x=d.useRef(null),v=k=>{w(k),setTimeout(()=>w(null),2e3)};d.useEffect(()=>{$("/api/user/profile").then(k=>{n(k.nickname||""),s(k.background_url||""),a(k.basic_info||"")}).catch(()=>{}).finally(()=>h(!1)),Kr("user-avatar").then(k=>{k&&c(k)}).catch(function(){})},[]);const S=k=>{var R;const C=(R=k.target.files)==null?void 0:R[0];if(!C)return;const P=new FileReader;P.onload=async z=>{const te=z.target.result;try{await Ri("user-avatar",te),c(te)}catch(_){v("")}},P.readAsDataURL(C),k.target.value=""},j=k=>{var R;const C=(R=k.target.files)==null?void 0:R[0];if(!C)return;const P=new FileReader;P.onload=z=>a(z.target.result||""),P.readAsText(C),k.target.value=""},N=async()=>{p(!0);try{const k={nickname:t.trim()||null,background_url:r||null,basic_info:l||null,avatar_url:i?"user-avatar":null};await $("/api/user/profile",{method:"PUT",body:k});try{const C=JSON.parse(localStorage.getItem("whisper_profile")||"{}");localStorage.setItem("whisper_profile",JSON.stringify({...C,...k}))}catch(C){}v("")}catch(k){v("")}finally{p(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:ye.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ye.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Et,{size:22,style:{color:ye.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:ye.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ye.bg,boxShadow:u?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:N,disabled:u,children:o.jsx(Wo,{size:18,style:{color:ye.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-px space-y-4",children:f?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:ye.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-[20px] p-5",style:{background:ye.bg,boxShadow:"var(--card-shadow)"},children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var k;return(k=g.current)==null?void 0:k.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:ye.bg},children:i?o.jsx("img",{src:i,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:24},children:""})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:ye.accentDark},children:o.jsx(ch,{size:9,color:"white"})})]}),o.jsx("input",{ref:g,type:"file",accept:"image/*",className:"hidden",onChange:S}),o.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ye.textMuted},children:""}),o.jsx("input",{type:"text",value:t,onChange:k=>n(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:ye.bg,color:ye.text}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ye.textMuted},children:""}),o.jsx("input",{type:"text",value:r,onChange:k=>s(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2 text-[13px] italic outline-none",style:{boxShadow:"var(--inset-shadow)",background:ye.bg,color:ye.text}})]})]})]})}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:ye.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:ye.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:ye.bg},onClick:()=>{var k;return(k=x.current)==null?void 0:k.click()},title:"",children:o.jsx(Ho,{size:13,style:{color:ye.textMuted}})}),o.jsx("input",{ref:x,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:j}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:ye.bg},onClick:()=>b(!0),title:"",children:o.jsx(Zs,{size:13,style:{color:ye.accentDark}})})]})]}),o.jsx("textarea",{value:l,onChange:k=>a(k.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:ye.bg,color:ye.text}})]})]})}),y&&o.jsx(L0,{value:l,onChange:a,onClose:()=>b(!1)}),m&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:m})})]})}function dr(){var n;const e=(n=window.Telegram)==null?void 0:n.WebApp,t=Math.max((e==null?void 0:e.viewportHeight)||0,window.innerHeight);document.documentElement.style.setProperty("--tg-viewport-height",t+"px")}function $0({onSuccess:e}){const[t,n]=d.useState(""),[r,s]=d.useState(""),[l,a]=d.useState(!1),i=async c=>{if(c.preventDefault(),!!t.trim()){a(!0),s("");try{await jy(t),e()}catch(u){s(u.message||"")}finally{a(!1)}}};return o.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--bg)",padding:"2rem"},children:o.jsxs("div",{style:{width:"100%",maxWidth:320,borderRadius:24,padding:"2rem 1.5rem",background:"var(--bg)",boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontSize:36,marginBottom:8},children:""}),o.jsx("h1",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--text)",margin:0},children:"WHISPER"}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:4},children:""})]}),o.jsxs("form",{onSubmit:i,children:[o.jsx("input",{type:"password",value:t,onChange:c=>n(c.target.value),placeholder:"",autoFocus:!0,style:{width:"100%",padding:"12px 16px",borderRadius:14,border:"none",outline:"none",fontSize:14,color:"var(--text)",background:"var(--bg)",boxShadow:"var(--inset-shadow)",boxSizing:"border-box"}}),r&&o.jsx("p",{style:{color:"#ef4444",fontSize:"0.75rem",textAlign:"center",marginTop:8,marginBottom:0},children:r}),o.jsx("button",{type:"submit",disabled:l||!t.trim(),style:{width:"100%",marginTop:16,padding:"12px 0",borderRadius:14,border:"none",fontSize:14,fontWeight:600,color:"#fff",background:l||!t.trim()?"var(--text-muted)":"linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%)",cursor:l||!t.trim()?"not-allowed":"pointer",boxShadow:"var(--card-shadow-sm)"},children:l?"...":""})]})]})})}function A0(){const e=Dc();return d.useEffect(()=>{var n;const t=(n=window.Telegram)==null?void 0:n.WebApp;t&&!e.pathname.startsWith("/cot")&&t.expand(),dr()},[e.pathname]),o.jsxs(vy,{children:[o.jsx(ot,{path:"/",element:o.jsx(Yy,{})}),o.jsx(ot,{path:"/profile",element:o.jsx(O0,{})}),o.jsx(ot,{path:"/world-books",element:o.jsx(O1,{})}),o.jsx(ot,{path:"/world-books/new",element:o.jsx(Cd,{})}),o.jsx(ot,{path:"/world-books/:id",element:o.jsx(Cd,{})}),o.jsx(ot,{path:"/assistants",element:o.jsx(K1,{})}),o.jsx(ot,{path:"/assistants/new",element:o.jsx(Md,{})}),o.jsx(ot,{path:"/assistants/:id",element:o.jsx(Md,{})}),o.jsx(ot,{path:"/settings",element:o.jsx(n0,{})}),o.jsx(ot,{path:"/settings/api",element:o.jsx(i0,{})}),o.jsx(ot,{path:"/cot",element:o.jsx(y0,{})}),o.jsx(ot,{path:"/memories",element:o.jsx(E0,{})}),o.jsx(ot,{path:"/diary",element:o.jsx(I0,{})}),o.jsx(ot,{path:"/messages",element:o.jsx(b0,{})})]})}function F0(){const[e,t]=d.useState(null);return d.useEffect(()=>{var r;const n=(r=window.Telegram)==null?void 0:r.WebApp;return localStorage.getItem("whisper_token")||n&&n.initData&&n.initData.length>0?t("ok"):t("login"),n&&(n.ready(),window.location.hash.startsWith("#/cot")||n.expand()),dr(),n&&n.onEvent("viewportChanged",dr),window.addEventListener("resize",dr),()=>{n&&n.offEvent("viewportChanged",dr),window.removeEventListener("resize",dr)}},[]),e===null?null:e==="login"?o.jsx($0,{onSuccess:()=>t("ok")}):o.jsx(ky,{children:o.jsx(A0,{})})}Oa.createRoot(document.getElementById("root")).render(o.jsx(Ce.StrictMode,{children:o.jsx(F0,{})}));
