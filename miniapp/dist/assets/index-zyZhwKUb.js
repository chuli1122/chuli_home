function Ex(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function _x(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ff={exports:{}},Yo={},pf={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pl=Symbol.for("react.element"),Mx=Symbol.for("react.portal"),Tx=Symbol.for("react.fragment"),Dx=Symbol.for("react.strict_mode"),Rx=Symbol.for("react.profiler"),zx=Symbol.for("react.provider"),Px=Symbol.for("react.context"),Ix=Symbol.for("react.forward_ref"),Lx=Symbol.for("react.suspense"),Ox=Symbol.for("react.memo"),$x=Symbol.for("react.lazy"),mu=Symbol.iterator;function Ax(e){return e===null||typeof e!="object"?null:(e=mu&&e[mu]||e["@@iterator"],typeof e=="function"?e:null)}var hf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xf=Object.assign,mf={};function fs(e,t,n){this.props=e,this.context=t,this.refs=mf,this.updater=n||hf}fs.prototype.isReactComponent={};fs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function gf(){}gf.prototype=fs.prototype;function sc(e,t,n){this.props=e,this.context=t,this.refs=mf,this.updater=n||hf}var lc=sc.prototype=new gf;lc.constructor=sc;xf(lc,fs.prototype);lc.isPureReactComponent=!0;var gu=Array.isArray,yf=Object.prototype.hasOwnProperty,oc={current:null},vf={key:!0,ref:!0,__self:!0,__source:!0};function wf(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)yf.call(t,r)&&!vf.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:pl,type:e,key:o,ref:a,props:s,_owner:oc.current}}function Fx(e,t){return{$$typeof:pl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ac(e){return typeof e=="object"&&e!==null&&e.$$typeof===pl}function Bx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var yu=/\/+/g;function ja(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Bx(""+e.key):t.toString(36)}function no(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case pl:case Mx:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+ja(a,0):r,gu(s)?(n="",e!=null&&(n=e.replace(yu,"$&/")+"/"),no(s,t,n,"",function(d){return d})):s!=null&&(ac(s)&&(s=Fx(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(yu,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",gu(e))for(var i=0;i<e.length;i++){o=e[i];var c=r+ja(o,i);a+=no(o,t,n,c,s)}else if(c=Ax(e),typeof c=="function")for(e=c.call(e),i=0;!(o=e.next()).done;)o=o.value,c=r+ja(o,i++),a+=no(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function _l(e,t,n){if(e==null)return e;var r=[],s=0;return no(e,r,"","",function(o){return t.call(n,o,s++)}),r}function Ux(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wt={current:null},ro={transition:null},Hx={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:ro,ReactCurrentOwner:oc};function bf(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:_l,forEach:function(e,t,n){_l(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _l(e,function(){t++}),t},toArray:function(e){return _l(e,function(t){return t})||[]},only:function(e){if(!ac(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xe.Component=fs;xe.Fragment=Tx;xe.Profiler=Rx;xe.PureComponent=sc;xe.StrictMode=Dx;xe.Suspense=Lx;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hx;xe.act=bf;xe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=xf({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=oc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)yf.call(t,c)&&!vf.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];r.children=i}return{$$typeof:pl,type:e.type,key:s,ref:o,props:r,_owner:a}};xe.createContext=function(e){return e={$$typeof:Px,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:zx,_context:e},e.Consumer=e};xe.createElement=wf;xe.createFactory=function(e){var t=wf.bind(null,e);return t.type=e,t};xe.createRef=function(){return{current:null}};xe.forwardRef=function(e){return{$$typeof:Ix,render:e}};xe.isValidElement=ac;xe.lazy=function(e){return{$$typeof:$x,_payload:{_status:-1,_result:e},_init:Ux}};xe.memo=function(e,t){return{$$typeof:Ox,type:e,compare:t===void 0?null:t}};xe.startTransition=function(e){var t=ro.transition;ro.transition={};try{e()}finally{ro.transition=t}};xe.unstable_act=bf;xe.useCallback=function(e,t){return wt.current.useCallback(e,t)};xe.useContext=function(e){return wt.current.useContext(e)};xe.useDebugValue=function(){};xe.useDeferredValue=function(e){return wt.current.useDeferredValue(e)};xe.useEffect=function(e,t){return wt.current.useEffect(e,t)};xe.useId=function(){return wt.current.useId()};xe.useImperativeHandle=function(e,t,n){return wt.current.useImperativeHandle(e,t,n)};xe.useInsertionEffect=function(e,t){return wt.current.useInsertionEffect(e,t)};xe.useLayoutEffect=function(e,t){return wt.current.useLayoutEffect(e,t)};xe.useMemo=function(e,t){return wt.current.useMemo(e,t)};xe.useReducer=function(e,t,n){return wt.current.useReducer(e,t,n)};xe.useRef=function(e){return wt.current.useRef(e)};xe.useState=function(e){return wt.current.useState(e)};xe.useSyncExternalStore=function(e,t,n){return wt.current.useSyncExternalStore(e,t,n)};xe.useTransition=function(){return wt.current.useTransition()};xe.version="18.3.1";pf.exports=xe;var u=pf.exports;const Re=_x(u),Wx=Ex({__proto__:null,default:Re},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx=u,Xx=Symbol.for("react.element"),Yx=Symbol.for("react.fragment"),Kx=Object.prototype.hasOwnProperty,Qx=Vx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gx={key:!0,ref:!0,__self:!0,__source:!0};function kf(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Kx.call(t,r)&&!Gx.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Xx,type:e,key:o,ref:a,props:s,_owner:Qx.current}}Yo.Fragment=Yx;Yo.jsx=kf;Yo.jsxs=kf;ff.exports=Yo;var l=ff.exports,li={},jf={exports:{}},It={},Sf={exports:{}},Nf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,Q){var T=$.length;$.push(Q);e:for(;0<T;){var te=T-1>>>1,X=$[te];if(0<s(X,Q))$[te]=Q,$[T]=X,T=te;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],T=$.pop();if(T!==Q){$[0]=T;e:for(var te=0,X=$.length,be=X>>>1;te<be;){var ge=2*(te+1)-1,Je=$[ge],ye=ge+1,Y=$[ye];if(0>s(Je,T))ye<X&&0>s(Y,Je)?($[te]=Y,$[ye]=T,te=ye):($[te]=Je,$[ge]=T,te=ge);else if(ye<X&&0>s(Y,T))$[te]=Y,$[ye]=T,te=ye;else break e}}return Q}function s($,Q){var T=$.sortIndex-Q.sortIndex;return T!==0?T:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],d=[],p=1,f=null,h=3,x=!1,v=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=$)r(d),Q.sortIndex=Q.expirationTime,t(c,Q);else break;Q=n(d)}}function S($){if(y=!1,w($),!v)if(n(c)!==null)v=!0,he(j);else{var Q=n(d);Q!==null&&fe(S,Q.startTime-$)}}function j($,Q){v=!1,y&&(y=!1,g(E),E=-1),x=!0;var T=h;try{for(w(Q),f=n(c);f!==null&&(!(f.expirationTime>Q)||$&&!O());){var te=f.callback;if(typeof te=="function"){f.callback=null,h=f.priorityLevel;var X=te(f.expirationTime<=Q);Q=e.unstable_now(),typeof X=="function"?f.callback=X:f===n(c)&&r(c),w(Q)}else r(c);f=n(c)}if(f!==null)var be=!0;else{var ge=n(d);ge!==null&&fe(S,ge.startTime-Q),be=!1}return be}finally{f=null,h=T,x=!1}}var C=!1,k=null,E=-1,D=5,P=-1;function O(){return!(e.unstable_now()-P<D)}function oe(){if(k!==null){var $=e.unstable_now();P=$;var Q=!0;try{Q=k(!0,$)}finally{Q?V():(C=!1,k=null)}}else C=!1}var V;if(typeof m=="function")V=function(){m(oe)};else if(typeof MessageChannel!="undefined"){var I=new MessageChannel,J=I.port2;I.port1.onmessage=oe,V=function(){J.postMessage(null)}}else V=function(){b(oe,0)};function he($){k=$,C||(C=!0,V())}function fe($,Q){E=b(function(){$(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,he(j))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function($){switch(h){case 1:case 2:case 3:var Q=3;break;default:Q=h}var T=h;h=Q;try{return $()}finally{h=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var T=h;h=$;try{return Q()}finally{h=T}},e.unstable_scheduleCallback=function($,Q,T){var te=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?te+T:te):T=te,$){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=T+X,$={id:p++,callback:Q,priorityLevel:$,startTime:T,expirationTime:X,sortIndex:-1},T>te?($.sortIndex=T,t(d,$),n(c)===null&&$===n(d)&&(y?(g(E),E=-1):y=!0,fe(S,T-te))):($.sortIndex=X,t(c,$),v||x||(v=!0,he(j))),$},e.unstable_shouldYield=O,e.unstable_wrapCallback=function($){var Q=h;return function(){var T=h;h=Q;try{return $.apply(this,arguments)}finally{h=T}}}})(Nf);Sf.exports=Nf;var qx=Sf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jx=u,Pt=qx;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cf=new Set,Xs={};function Nr(e,t){rs(e,t),rs(e+"Capture",t)}function rs(e,t){for(Xs[e]=t,e=0;e<t.length;e++)Cf.add(t[e])}var En=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),oi=Object.prototype.hasOwnProperty,Zx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vu={},wu={};function em(e){return oi.call(wu,e)?!0:oi.call(vu,e)?!1:Zx.test(e)?wu[e]=!0:(vu[e]=!0,!1)}function tm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function nm(e,t,n,r){if(t===null||typeof t=="undefined"||tm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bt(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){it[e]=new bt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];it[t]=new bt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){it[e]=new bt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){it[e]=new bt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){it[e]=new bt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){it[e]=new bt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){it[e]=new bt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){it[e]=new bt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){it[e]=new bt(e,5,!1,e.toLowerCase(),null,!1,!1)});var ic=/[\-:]([a-z])/g;function cc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ic,cc);it[t]=new bt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ic,cc);it[t]=new bt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ic,cc);it[t]=new bt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){it[e]=new bt(e,1,!1,e.toLowerCase(),null,!1,!1)});it.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){it[e]=new bt(e,1,!1,e.toLowerCase(),null,!0,!0)});function uc(e,t,n,r){var s=it.hasOwnProperty(t)?it[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(nm(t,n,s,r)&&(n=null),r||s===null?em(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var zn=Jx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ml=Symbol.for("react.element"),Or=Symbol.for("react.portal"),$r=Symbol.for("react.fragment"),dc=Symbol.for("react.strict_mode"),ai=Symbol.for("react.profiler"),Ef=Symbol.for("react.provider"),_f=Symbol.for("react.context"),fc=Symbol.for("react.forward_ref"),ii=Symbol.for("react.suspense"),ci=Symbol.for("react.suspense_list"),pc=Symbol.for("react.memo"),On=Symbol.for("react.lazy"),Mf=Symbol.for("react.offscreen"),bu=Symbol.iterator;function ws(e){return e===null||typeof e!="object"?null:(e=bu&&e[bu]||e["@@iterator"],typeof e=="function"?e:null)}var $e=Object.assign,Sa;function Ts(e){if(Sa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Sa=t&&t[1]||""}return`
`+Sa+e}var Na=!1;function Ca(e,t){if(!e||Na)return"";Na=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,i=o.length-1;1<=a&&0<=i&&s[a]!==o[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==o[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==o[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{Na=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ts(e):""}function rm(e){switch(e.tag){case 5:return Ts(e.type);case 16:return Ts("Lazy");case 13:return Ts("Suspense");case 19:return Ts("SuspenseList");case 0:case 2:case 15:return e=Ca(e.type,!1),e;case 11:return e=Ca(e.type.render,!1),e;case 1:return e=Ca(e.type,!0),e;default:return""}}function ui(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $r:return"Fragment";case Or:return"Portal";case ai:return"Profiler";case dc:return"StrictMode";case ii:return"Suspense";case ci:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case _f:return(e.displayName||"Context")+".Consumer";case Ef:return(e._context.displayName||"Context")+".Provider";case fc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pc:return t=e.displayName||null,t!==null?t:ui(e.type)||"Memo";case On:t=e._payload,e=e._init;try{return ui(e(t))}catch(n){}}return null}function sm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ui(t);case 8:return t===dc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Zn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Tf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function lm(e){var t=Tf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Tl(e){e._valueTracker||(e._valueTracker=lm(e))}function Df(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Tf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function mo(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function di(e,t){var n=t.checked;return $e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function ku(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Zn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Rf(e,t){t=t.checked,t!=null&&uc(e,"checked",t,!1)}function fi(e,t){Rf(e,t);var n=Zn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?pi(e,t.type,n):t.hasOwnProperty("defaultValue")&&pi(e,t.type,Zn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ju(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function pi(e,t,n){(t!=="number"||mo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ds=Array.isArray;function Gr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Zn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function hi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return $e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Su(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(z(92));if(Ds(n)){if(1<n.length)throw Error(z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Zn(n)}}function zf(e,t){var n=Zn(t.value),r=Zn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Nu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Pf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Pf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Dl,If=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Dl=Dl||document.createElement("div"),Dl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Dl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ys(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},om=["Webkit","ms","Moz","O"];Object.keys(Ps).forEach(function(e){om.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ps[t]=Ps[e]})});function Lf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ps.hasOwnProperty(e)&&Ps[e]?(""+t).trim():t+"px"}function Of(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Lf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var am=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mi(e,t){if(t){if(am[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function gi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yi=null;function hc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vi=null,qr=null,Jr=null;function Cu(e){if(e=ml(e)){if(typeof vi!="function")throw Error(z(280));var t=e.stateNode;t&&(t=Jo(t),vi(e.stateNode,e.type,t))}}function $f(e){qr?Jr?Jr.push(e):Jr=[e]:qr=e}function Af(){if(qr){var e=qr,t=Jr;if(Jr=qr=null,Cu(e),t)for(e=0;e<t.length;e++)Cu(t[e])}}function Ff(e,t){return e(t)}function Bf(){}var Ea=!1;function Uf(e,t,n){if(Ea)return e(t,n);Ea=!0;try{return Ff(e,t,n)}finally{Ea=!1,(qr!==null||Jr!==null)&&(Bf(),Af())}}function Ks(e,t){var n=e.stateNode;if(n===null)return null;var r=Jo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(z(231,t,typeof n));return n}var wi=!1;if(En)try{var bs={};Object.defineProperty(bs,"passive",{get:function(){wi=!0}}),window.addEventListener("test",bs,bs),window.removeEventListener("test",bs,bs)}catch(e){wi=!1}function im(e,t,n,r,s,o,a,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(p){this.onError(p)}}var Is=!1,go=null,yo=!1,bi=null,cm={onError:function(e){Is=!0,go=e}};function um(e,t,n,r,s,o,a,i,c){Is=!1,go=null,im.apply(cm,arguments)}function dm(e,t,n,r,s,o,a,i,c){if(um.apply(this,arguments),Is){if(Is){var d=go;Is=!1,go=null}else throw Error(z(198));yo||(yo=!0,bi=d)}}function Cr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Hf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Eu(e){if(Cr(e)!==e)throw Error(z(188))}function fm(e){var t=e.alternate;if(!t){if(t=Cr(e),t===null)throw Error(z(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Eu(s),e;if(o===r)return Eu(s),t;o=o.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=o;break}if(i===r){a=!0,r=s,n=o;break}i=i.sibling}if(!a){for(i=o.child;i;){if(i===n){a=!0,n=o,r=s;break}if(i===r){a=!0,r=o,n=s;break}i=i.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?e:t}function Wf(e){return e=fm(e),e!==null?Vf(e):null}function Vf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Vf(e);if(t!==null)return t;e=e.sibling}return null}var Xf=Pt.unstable_scheduleCallback,_u=Pt.unstable_cancelCallback,pm=Pt.unstable_shouldYield,hm=Pt.unstable_requestPaint,Ue=Pt.unstable_now,xm=Pt.unstable_getCurrentPriorityLevel,xc=Pt.unstable_ImmediatePriority,Yf=Pt.unstable_UserBlockingPriority,vo=Pt.unstable_NormalPriority,mm=Pt.unstable_LowPriority,Kf=Pt.unstable_IdlePriority,Ko=null,pn=null;function gm(e){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Ko,e,void 0,(e.current.flags&128)===128)}catch(t){}}var nn=Math.clz32?Math.clz32:wm,ym=Math.log,vm=Math.LN2;function wm(e){return e>>>=0,e===0?32:31-(ym(e)/vm|0)|0}var Rl=64,zl=4194304;function Rs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=Rs(i):(o&=a,o!==0&&(r=Rs(o)))}else a=n&~s,a!==0?r=Rs(a):o!==0&&(r=Rs(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-nn(t),s=1<<n,r|=e[n],t&=~s;return r}function bm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function km(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-nn(o),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=bm(i,t)):c<=t&&(e.expiredLanes|=i),o&=~i}}function ki(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qf(){var e=Rl;return Rl<<=1,!(Rl&4194240)&&(Rl=64),e}function _a(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function hl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-nn(t),e[t]=n}function jm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-nn(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function mc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-nn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ce=0;function Gf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var qf,gc,Jf,Zf,ep,ji=!1,Pl=[],Vn=null,Xn=null,Yn=null,Qs=new Map,Gs=new Map,Fn=[],Sm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mu(e,t){switch(e){case"focusin":case"focusout":Vn=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":Qs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gs.delete(t.pointerId)}}function ks(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=ml(t),t!==null&&gc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Nm(e,t,n,r,s){switch(t){case"focusin":return Vn=ks(Vn,e,t,n,r,s),!0;case"dragenter":return Xn=ks(Xn,e,t,n,r,s),!0;case"mouseover":return Yn=ks(Yn,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Qs.set(o,ks(Qs.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Gs.set(o,ks(Gs.get(o)||null,e,t,n,r,s)),!0}return!1}function tp(e){var t=hr(e.target);if(t!==null){var n=Cr(t);if(n!==null){if(t=n.tag,t===13){if(t=Hf(n),t!==null){e.blockedOn=t,ep(e.priority,function(){Jf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function so(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Si(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);yi=r,n.target.dispatchEvent(r),yi=null}else return t=ml(n),t!==null&&gc(t),e.blockedOn=n,!1;t.shift()}return!0}function Tu(e,t,n){so(e)&&n.delete(t)}function Cm(){ji=!1,Vn!==null&&so(Vn)&&(Vn=null),Xn!==null&&so(Xn)&&(Xn=null),Yn!==null&&so(Yn)&&(Yn=null),Qs.forEach(Tu),Gs.forEach(Tu)}function js(e,t){e.blockedOn===t&&(e.blockedOn=null,ji||(ji=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,Cm)))}function qs(e){function t(s){return js(s,e)}if(0<Pl.length){js(Pl[0],e);for(var n=1;n<Pl.length;n++){var r=Pl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Vn!==null&&js(Vn,e),Xn!==null&&js(Xn,e),Yn!==null&&js(Yn,e),Qs.forEach(t),Gs.forEach(t),n=0;n<Fn.length;n++)r=Fn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Fn.length&&(n=Fn[0],n.blockedOn===null);)tp(n),n.blockedOn===null&&Fn.shift()}var Zr=zn.ReactCurrentBatchConfig,bo=!0;function Em(e,t,n,r){var s=Ce,o=Zr.transition;Zr.transition=null;try{Ce=1,yc(e,t,n,r)}finally{Ce=s,Zr.transition=o}}function _m(e,t,n,r){var s=Ce,o=Zr.transition;Zr.transition=null;try{Ce=4,yc(e,t,n,r)}finally{Ce=s,Zr.transition=o}}function yc(e,t,n,r){if(bo){var s=Si(e,t,n,r);if(s===null)$a(e,t,r,ko,n),Mu(e,r);else if(Nm(s,e,t,n,r))r.stopPropagation();else if(Mu(e,r),t&4&&-1<Sm.indexOf(e)){for(;s!==null;){var o=ml(s);if(o!==null&&qf(o),o=Si(e,t,n,r),o===null&&$a(e,t,r,ko,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else $a(e,t,r,null,n)}}var ko=null;function Si(e,t,n,r){if(ko=null,e=hc(r),e=hr(e),e!==null)if(t=Cr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Hf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ko=e,null}function np(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xm()){case xc:return 1;case Yf:return 4;case vo:case mm:return 16;case Kf:return 536870912;default:return 16}default:return 16}}var Un=null,vc=null,lo=null;function rp(){if(lo)return lo;var e,t=vc,n=t.length,r,s="value"in Un?Un.value:Un.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return lo=s.slice(e,1<r?1-r:void 0)}function oo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Il(){return!0}function Du(){return!1}function Lt(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(o):o[i]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Il:Du,this.isPropagationStopped=Du,this}return $e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Il)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Il)},persist:function(){},isPersistent:Il}),t}var ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wc=Lt(ps),xl=$e({},ps,{view:0,detail:0}),Mm=Lt(xl),Ma,Ta,Ss,Qo=$e({},xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ss&&(Ss&&e.type==="mousemove"?(Ma=e.screenX-Ss.screenX,Ta=e.screenY-Ss.screenY):Ta=Ma=0,Ss=e),Ma)},movementY:function(e){return"movementY"in e?e.movementY:Ta}}),Ru=Lt(Qo),Tm=$e({},Qo,{dataTransfer:0}),Dm=Lt(Tm),Rm=$e({},xl,{relatedTarget:0}),Da=Lt(Rm),zm=$e({},ps,{animationName:0,elapsedTime:0,pseudoElement:0}),Pm=Lt(zm),Im=$e({},ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Lm=Lt(Im),Om=$e({},ps,{data:0}),zu=Lt(Om),$m={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Am={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Fm[e])?!!t[e]:!1}function bc(){return Bm}var Um=$e({},xl,{key:function(e){if(e.key){var t=$m[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=oo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Am[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bc,charCode:function(e){return e.type==="keypress"?oo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hm=Lt(Um),Wm=$e({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pu=Lt(Wm),Vm=$e({},xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bc}),Xm=Lt(Vm),Ym=$e({},ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),Km=Lt(Ym),Qm=$e({},Qo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Gm=Lt(Qm),qm=[9,13,27,32],kc=En&&"CompositionEvent"in window,Ls=null;En&&"documentMode"in document&&(Ls=document.documentMode);var Jm=En&&"TextEvent"in window&&!Ls,sp=En&&(!kc||Ls&&8<Ls&&11>=Ls),Iu=" ",Lu=!1;function lp(e,t){switch(e){case"keyup":return qm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function op(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ar=!1;function Zm(e,t){switch(e){case"compositionend":return op(t);case"keypress":return t.which!==32?null:(Lu=!0,Iu);case"textInput":return e=t.data,e===Iu&&Lu?null:e;default:return null}}function eg(e,t){if(Ar)return e==="compositionend"||!kc&&lp(e,t)?(e=rp(),lo=vc=Un=null,Ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sp&&t.locale!=="ko"?null:t.data;default:return null}}var tg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ou(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!tg[e.type]:t==="textarea"}function ap(e,t,n,r){$f(r),t=jo(t,"onChange"),0<t.length&&(n=new wc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Os=null,Js=null;function ng(e){yp(e,0)}function Go(e){var t=Ur(e);if(Df(t))return e}function rg(e,t){if(e==="change")return t}var ip=!1;if(En){var Ra;if(En){var za="oninput"in document;if(!za){var $u=document.createElement("div");$u.setAttribute("oninput","return;"),za=typeof $u.oninput=="function"}Ra=za}else Ra=!1;ip=Ra&&(!document.documentMode||9<document.documentMode)}function Au(){Os&&(Os.detachEvent("onpropertychange",cp),Js=Os=null)}function cp(e){if(e.propertyName==="value"&&Go(Js)){var t=[];ap(t,Js,e,hc(e)),Uf(ng,t)}}function sg(e,t,n){e==="focusin"?(Au(),Os=t,Js=n,Os.attachEvent("onpropertychange",cp)):e==="focusout"&&Au()}function lg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Go(Js)}function og(e,t){if(e==="click")return Go(t)}function ag(e,t){if(e==="input"||e==="change")return Go(t)}function ig(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sn=typeof Object.is=="function"?Object.is:ig;function Zs(e,t){if(sn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!oi.call(t,s)||!sn(e[s],t[s]))return!1}return!0}function Fu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bu(e,t){var n=Fu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fu(n)}}function up(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?up(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function dp(){for(var e=window,t=mo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=mo(e.document)}return t}function jc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cg(e){var t=dp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&up(n.ownerDocument.documentElement,n)){if(r!==null&&jc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=Bu(n,o);var a=Bu(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ug=En&&"documentMode"in document&&11>=document.documentMode,Fr=null,Ni=null,$s=null,Ci=!1;function Uu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ci||Fr==null||Fr!==mo(r)||(r=Fr,"selectionStart"in r&&jc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$s&&Zs($s,r)||($s=r,r=jo(Ni,"onSelect"),0<r.length&&(t=new wc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Fr)))}function Ll(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Br={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionend:Ll("Transition","TransitionEnd")},Pa={},fp={};En&&(fp=document.createElement("div").style,"AnimationEvent"in window||(delete Br.animationend.animation,delete Br.animationiteration.animation,delete Br.animationstart.animation),"TransitionEvent"in window||delete Br.transitionend.transition);function qo(e){if(Pa[e])return Pa[e];if(!Br[e])return e;var t=Br[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in fp)return Pa[e]=t[n];return e}var pp=qo("animationend"),hp=qo("animationiteration"),xp=qo("animationstart"),mp=qo("transitionend"),gp=new Map,Hu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nr(e,t){gp.set(e,t),Nr(t,[e])}for(var Ia=0;Ia<Hu.length;Ia++){var La=Hu[Ia],dg=La.toLowerCase(),fg=La[0].toUpperCase()+La.slice(1);nr(dg,"on"+fg)}nr(pp,"onAnimationEnd");nr(hp,"onAnimationIteration");nr(xp,"onAnimationStart");nr("dblclick","onDoubleClick");nr("focusin","onFocus");nr("focusout","onBlur");nr(mp,"onTransitionEnd");rs("onMouseEnter",["mouseout","mouseover"]);rs("onMouseLeave",["mouseout","mouseover"]);rs("onPointerEnter",["pointerout","pointerover"]);rs("onPointerLeave",["pointerout","pointerover"]);Nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pg=new Set("cancel close invalid load scroll toggle".split(" ").concat(zs));function Wu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,dm(r,t,void 0,e),e.currentTarget=null}function yp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==o&&s.isPropagationStopped())break e;Wu(s,i,d),o=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,d=i.currentTarget,i=i.listener,c!==o&&s.isPropagationStopped())break e;Wu(s,i,d),o=c}}}if(yo)throw e=bi,yo=!1,bi=null,e}function De(e,t){var n=t[Di];n===void 0&&(n=t[Di]=new Set);var r=e+"__bubble";n.has(r)||(vp(t,e,2,!1),n.add(r))}function Oa(e,t,n){var r=0;t&&(r|=4),vp(n,e,r,t)}var Ol="_reactListening"+Math.random().toString(36).slice(2);function el(e){if(!e[Ol]){e[Ol]=!0,Cf.forEach(function(n){n!=="selectionchange"&&(pg.has(n)||Oa(n,!1,e),Oa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ol]||(t[Ol]=!0,Oa("selectionchange",!1,t))}}function vp(e,t,n,r){switch(np(t)){case 1:var s=Em;break;case 4:s=_m;break;default:s=yc}n=s.bind(null,t,n,e),s=void 0,!wi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function $a(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=hr(i),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}i=i.parentNode}}r=r.return}Uf(function(){var d=o,p=hc(n),f=[];e:{var h=gp.get(e);if(h!==void 0){var x=wc,v=e;switch(e){case"keypress":if(oo(n)===0)break e;case"keydown":case"keyup":x=Hm;break;case"focusin":v="focus",x=Da;break;case"focusout":v="blur",x=Da;break;case"beforeblur":case"afterblur":x=Da;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Ru;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Dm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Xm;break;case pp:case hp:case xp:x=Pm;break;case mp:x=Km;break;case"scroll":x=Mm;break;case"wheel":x=Gm;break;case"copy":case"cut":case"paste":x=Lm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Pu}var y=(t&4)!==0,b=!y&&e==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var m=d,w;m!==null;){w=m;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,g!==null&&(S=Ks(m,g),S!=null&&y.push(tl(m,S,w)))),b)break;m=m.return}0<y.length&&(h=new x(h,v,null,n,p),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==yi&&(v=n.relatedTarget||n.fromElement)&&(hr(v)||v[_n]))break e;if((x||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,x?(v=n.relatedTarget||n.toElement,x=d,v=v?hr(v):null,v!==null&&(b=Cr(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=d),x!==v)){if(y=Ru,S="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(y=Pu,S="onPointerLeave",g="onPointerEnter",m="pointer"),b=x==null?h:Ur(x),w=v==null?h:Ur(v),h=new y(S,m+"leave",x,n,p),h.target=b,h.relatedTarget=w,S=null,hr(p)===d&&(y=new y(g,m+"enter",v,n,p),y.target=w,y.relatedTarget=b,S=y),b=S,x&&v)t:{for(y=x,g=v,m=0,w=y;w;w=Pr(w))m++;for(w=0,S=g;S;S=Pr(S))w++;for(;0<m-w;)y=Pr(y),m--;for(;0<w-m;)g=Pr(g),w--;for(;m--;){if(y===g||g!==null&&y===g.alternate)break t;y=Pr(y),g=Pr(g)}y=null}else y=null;x!==null&&Vu(f,h,x,y,!1),v!==null&&b!==null&&Vu(f,b,v,y,!0)}}e:{if(h=d?Ur(d):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var j=rg;else if(Ou(h))if(ip)j=ag;else{j=lg;var C=sg}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=og);if(j&&(j=j(e,d))){ap(f,j,n,p);break e}C&&C(e,h,d),e==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&pi(h,"number",h.value)}switch(C=d?Ur(d):window,e){case"focusin":(Ou(C)||C.contentEditable==="true")&&(Fr=C,Ni=d,$s=null);break;case"focusout":$s=Ni=Fr=null;break;case"mousedown":Ci=!0;break;case"contextmenu":case"mouseup":case"dragend":Ci=!1,Uu(f,n,p);break;case"selectionchange":if(ug)break;case"keydown":case"keyup":Uu(f,n,p)}var k;if(kc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ar?lp(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(sp&&n.locale!=="ko"&&(Ar||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ar&&(k=rp()):(Un=p,vc="value"in Un?Un.value:Un.textContent,Ar=!0)),C=jo(d,E),0<C.length&&(E=new zu(E,e,null,n,p),f.push({event:E,listeners:C}),k?E.data=k:(k=op(n),k!==null&&(E.data=k)))),(k=Jm?Zm(e,n):eg(e,n))&&(d=jo(d,"onBeforeInput"),0<d.length&&(p=new zu("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:d}),p.data=k))}yp(f,t)})}function tl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Ks(e,n),o!=null&&r.unshift(tl(e,o,s)),o=Ks(e,t),o!=null&&r.push(tl(e,o,s))),e=e.return}return r}function Pr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vu(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,d=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&d!==null&&(i=d,s?(c=Ks(n,o),c!=null&&a.unshift(tl(n,c,i))):s||(c=Ks(n,o),c!=null&&a.push(tl(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var hg=/\r\n?/g,xg=/\u0000|\uFFFD/g;function Xu(e){return(typeof e=="string"?e:""+e).replace(hg,`
`).replace(xg,"")}function $l(e,t,n){if(t=Xu(t),Xu(e)!==t&&n)throw Error(z(425))}function So(){}var Ei=null,_i=null;function Mi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ti=typeof setTimeout=="function"?setTimeout:void 0,mg=typeof clearTimeout=="function"?clearTimeout:void 0,Yu=typeof Promise=="function"?Promise:void 0,gg=typeof queueMicrotask=="function"?queueMicrotask:typeof Yu!="undefined"?function(e){return Yu.resolve(null).then(e).catch(yg)}:Ti;function yg(e){setTimeout(function(){throw e})}function Aa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),qs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);qs(t)}function Kn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ku(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),fn="__reactFiber$"+hs,nl="__reactProps$"+hs,_n="__reactContainer$"+hs,Di="__reactEvents$"+hs,vg="__reactListeners$"+hs,wg="__reactHandles$"+hs;function hr(e){var t=e[fn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_n]||n[fn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ku(e);e!==null;){if(n=e[fn])return n;e=Ku(e)}return t}e=n,n=e.parentNode}return null}function ml(e){return e=e[fn]||e[_n],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ur(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function Jo(e){return e[nl]||null}var Ri=[],Hr=-1;function rr(e){return{current:e}}function ze(e){0>Hr||(e.current=Ri[Hr],Ri[Hr]=null,Hr--)}function Te(e,t){Hr++,Ri[Hr]=e.current,e.current=t}var er={},xt=rr(er),Et=rr(!1),wr=er;function ss(e,t){var n=e.type.contextTypes;if(!n)return er;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function _t(e){return e=e.childContextTypes,e!=null}function No(){ze(Et),ze(xt)}function Qu(e,t,n){if(xt.current!==er)throw Error(z(168));Te(xt,t),Te(Et,n)}function wp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(z(108,sm(e)||"Unknown",s));return $e({},n,r)}function Co(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||er,wr=xt.current,Te(xt,e),Te(Et,Et.current),!0}function Gu(e,t,n){var r=e.stateNode;if(!r)throw Error(z(169));n?(e=wp(e,t,wr),r.__reactInternalMemoizedMergedChildContext=e,ze(Et),ze(xt),Te(xt,e)):ze(Et),Te(Et,n)}var jn=null,Zo=!1,Fa=!1;function bp(e){jn===null?jn=[e]:jn.push(e)}function bg(e){Zo=!0,bp(e)}function sr(){if(!Fa&&jn!==null){Fa=!0;var e=0,t=Ce;try{var n=jn;for(Ce=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}jn=null,Zo=!1}catch(s){throw jn!==null&&(jn=jn.slice(e+1)),Xf(xc,sr),s}finally{Ce=t,Fa=!1}}return null}var Wr=[],Vr=0,Eo=null,_o=0,Wt=[],Vt=0,br=null,Sn=1,Nn="";function dr(e,t){Wr[Vr++]=_o,Wr[Vr++]=Eo,Eo=e,_o=t}function kp(e,t,n){Wt[Vt++]=Sn,Wt[Vt++]=Nn,Wt[Vt++]=br,br=e;var r=Sn;e=Nn;var s=32-nn(r)-1;r&=~(1<<s),n+=1;var o=32-nn(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Sn=1<<32-nn(t)+s|n<<s|r,Nn=o+e}else Sn=1<<o|n<<s|r,Nn=e}function Sc(e){e.return!==null&&(dr(e,1),kp(e,1,0))}function Nc(e){for(;e===Eo;)Eo=Wr[--Vr],Wr[Vr]=null,_o=Wr[--Vr],Wr[Vr]=null;for(;e===br;)br=Wt[--Vt],Wt[Vt]=null,Nn=Wt[--Vt],Wt[Vt]=null,Sn=Wt[--Vt],Wt[Vt]=null}var zt=null,Rt=null,Ie=!1,tn=null;function jp(e,t){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function qu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,zt=e,Rt=Kn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,zt=e,Rt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=br!==null?{id:Sn,overflow:Nn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,zt=e,Rt=null,!0):!1;default:return!1}}function zi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Pi(e){if(Ie){var t=Rt;if(t){var n=t;if(!qu(e,t)){if(zi(e))throw Error(z(418));t=Kn(n.nextSibling);var r=zt;t&&qu(e,t)?jp(r,n):(e.flags=e.flags&-4097|2,Ie=!1,zt=e)}}else{if(zi(e))throw Error(z(418));e.flags=e.flags&-4097|2,Ie=!1,zt=e}}}function Ju(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;zt=e}function Al(e){if(e!==zt)return!1;if(!Ie)return Ju(e),Ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mi(e.type,e.memoizedProps)),t&&(t=Rt)){if(zi(e))throw Sp(),Error(z(418));for(;t;)jp(e,t),t=Kn(t.nextSibling)}if(Ju(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Rt=Kn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Rt=null}}else Rt=zt?Kn(e.stateNode.nextSibling):null;return!0}function Sp(){for(var e=Rt;e;)e=Kn(e.nextSibling)}function ls(){Rt=zt=null,Ie=!1}function Cc(e){tn===null?tn=[e]:tn.push(e)}var kg=zn.ReactCurrentBatchConfig;function Ns(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var i=s.refs;a===null?delete i[o]:i[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,e))}return e}function Fl(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zu(e){var t=e._init;return t(e._payload)}function Np(e){function t(g,m){if(e){var w=g.deletions;w===null?(g.deletions=[m],g.flags|=16):w.push(m)}}function n(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=Jn(g,m),g.index=0,g.sibling=null,g}function o(g,m,w){return g.index=w,e?(w=g.alternate,w!==null?(w=w.index,w<m?(g.flags|=2,m):w):(g.flags|=2,m)):(g.flags|=1048576,m)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,m,w,S){return m===null||m.tag!==6?(m=Ya(w,g.mode,S),m.return=g,m):(m=s(m,w),m.return=g,m)}function c(g,m,w,S){var j=w.type;return j===$r?p(g,m,w.props.children,S,w.key):m!==null&&(m.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===On&&Zu(j)===m.type)?(S=s(m,w.props),S.ref=Ns(g,m,w),S.return=g,S):(S=ho(w.type,w.key,w.props,null,g.mode,S),S.ref=Ns(g,m,w),S.return=g,S)}function d(g,m,w,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==w.containerInfo||m.stateNode.implementation!==w.implementation?(m=Ka(w,g.mode,S),m.return=g,m):(m=s(m,w.children||[]),m.return=g,m)}function p(g,m,w,S,j){return m===null||m.tag!==7?(m=yr(w,g.mode,S,j),m.return=g,m):(m=s(m,w),m.return=g,m)}function f(g,m,w){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ya(""+m,g.mode,w),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ml:return w=ho(m.type,m.key,m.props,null,g.mode,w),w.ref=Ns(g,null,m),w.return=g,w;case Or:return m=Ka(m,g.mode,w),m.return=g,m;case On:var S=m._init;return f(g,S(m._payload),w)}if(Ds(m)||ws(m))return m=yr(m,g.mode,w,null),m.return=g,m;Fl(g,m)}return null}function h(g,m,w,S){var j=m!==null?m.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:i(g,m,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ml:return w.key===j?c(g,m,w,S):null;case Or:return w.key===j?d(g,m,w,S):null;case On:return j=w._init,h(g,m,j(w._payload),S)}if(Ds(w)||ws(w))return j!==null?null:p(g,m,w,S,null);Fl(g,w)}return null}function x(g,m,w,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(w)||null,i(m,g,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ml:return g=g.get(S.key===null?w:S.key)||null,c(m,g,S,j);case Or:return g=g.get(S.key===null?w:S.key)||null,d(m,g,S,j);case On:var C=S._init;return x(g,m,w,C(S._payload),j)}if(Ds(S)||ws(S))return g=g.get(w)||null,p(m,g,S,j,null);Fl(m,S)}return null}function v(g,m,w,S){for(var j=null,C=null,k=m,E=m=0,D=null;k!==null&&E<w.length;E++){k.index>E?(D=k,k=null):D=k.sibling;var P=h(g,k,w[E],S);if(P===null){k===null&&(k=D);break}e&&k&&P.alternate===null&&t(g,k),m=o(P,m,E),C===null?j=P:C.sibling=P,C=P,k=D}if(E===w.length)return n(g,k),Ie&&dr(g,E),j;if(k===null){for(;E<w.length;E++)k=f(g,w[E],S),k!==null&&(m=o(k,m,E),C===null?j=k:C.sibling=k,C=k);return Ie&&dr(g,E),j}for(k=r(g,k);E<w.length;E++)D=x(k,g,E,w[E],S),D!==null&&(e&&D.alternate!==null&&k.delete(D.key===null?E:D.key),m=o(D,m,E),C===null?j=D:C.sibling=D,C=D);return e&&k.forEach(function(O){return t(g,O)}),Ie&&dr(g,E),j}function y(g,m,w,S){var j=ws(w);if(typeof j!="function")throw Error(z(150));if(w=j.call(w),w==null)throw Error(z(151));for(var C=j=null,k=m,E=m=0,D=null,P=w.next();k!==null&&!P.done;E++,P=w.next()){k.index>E?(D=k,k=null):D=k.sibling;var O=h(g,k,P.value,S);if(O===null){k===null&&(k=D);break}e&&k&&O.alternate===null&&t(g,k),m=o(O,m,E),C===null?j=O:C.sibling=O,C=O,k=D}if(P.done)return n(g,k),Ie&&dr(g,E),j;if(k===null){for(;!P.done;E++,P=w.next())P=f(g,P.value,S),P!==null&&(m=o(P,m,E),C===null?j=P:C.sibling=P,C=P);return Ie&&dr(g,E),j}for(k=r(g,k);!P.done;E++,P=w.next())P=x(k,g,E,P.value,S),P!==null&&(e&&P.alternate!==null&&k.delete(P.key===null?E:P.key),m=o(P,m,E),C===null?j=P:C.sibling=P,C=P);return e&&k.forEach(function(oe){return t(g,oe)}),Ie&&dr(g,E),j}function b(g,m,w,S){if(typeof w=="object"&&w!==null&&w.type===$r&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ml:e:{for(var j=w.key,C=m;C!==null;){if(C.key===j){if(j=w.type,j===$r){if(C.tag===7){n(g,C.sibling),m=s(C,w.props.children),m.return=g,g=m;break e}}else if(C.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===On&&Zu(j)===C.type){n(g,C.sibling),m=s(C,w.props),m.ref=Ns(g,C,w),m.return=g,g=m;break e}n(g,C);break}else t(g,C);C=C.sibling}w.type===$r?(m=yr(w.props.children,g.mode,S,w.key),m.return=g,g=m):(S=ho(w.type,w.key,w.props,null,g.mode,S),S.ref=Ns(g,m,w),S.return=g,g=S)}return a(g);case Or:e:{for(C=w.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===w.containerInfo&&m.stateNode.implementation===w.implementation){n(g,m.sibling),m=s(m,w.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else t(g,m);m=m.sibling}m=Ka(w,g.mode,S),m.return=g,g=m}return a(g);case On:return C=w._init,b(g,m,C(w._payload),S)}if(Ds(w))return v(g,m,w,S);if(ws(w))return y(g,m,w,S);Fl(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,w),m.return=g,g=m):(n(g,m),m=Ya(w,g.mode,S),m.return=g,g=m),a(g)):n(g,m)}return b}var os=Np(!0),Cp=Np(!1),Mo=rr(null),To=null,Xr=null,Ec=null;function _c(){Ec=Xr=To=null}function Mc(e){var t=Mo.current;ze(Mo),e._currentValue=t}function Ii(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function es(e,t){To=e,Ec=Xr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ct=!0),e.firstContext=null)}function Kt(e){var t=e._currentValue;if(Ec!==e)if(e={context:e,memoizedValue:t,next:null},Xr===null){if(To===null)throw Error(z(308));Xr=e,To.dependencies={lanes:0,firstContext:e}}else Xr=Xr.next=e;return t}var xr=null;function Tc(e){xr===null?xr=[e]:xr.push(e)}function Ep(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Tc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Mn(e,r)}function Mn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var $n=!1;function Dc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _p(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Mn(e,n)}return s=r.interleaved,s===null?(t.next=t,Tc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Mn(e,n)}function ao(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,mc(e,n)}}function ed(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Do(e,t,n,r){var s=e.updateQueue;$n=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,d=c.next;c.next=null,a===null?o=d:a.next=d,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,i=p.lastBaseUpdate,i!==a&&(i===null?p.firstBaseUpdate=d:i.next=d,p.lastBaseUpdate=c))}if(o!==null){var f=s.baseState;a=0,p=d=c=null,i=o;do{var h=i.lane,x=i.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var v=e,y=i;switch(h=t,x=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){f=v.call(x,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,h=typeof v=="function"?v.call(x,f,h):v,h==null)break e;f=$e({},f,h);break e;case 2:$n=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[i]:h.push(i))}else x={eventTime:x,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},p===null?(d=p=x,c=f):p=p.next=x,a|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;h=i,i=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);jr|=a,e.lanes=a,e.memoizedState=f}}function td(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var gl={},hn=rr(gl),rl=rr(gl),sl=rr(gl);function mr(e){if(e===gl)throw Error(z(174));return e}function Rc(e,t){switch(Te(sl,t),Te(rl,e),Te(hn,gl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:xi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=xi(t,e)}ze(hn),Te(hn,t)}function as(){ze(hn),ze(rl),ze(sl)}function Mp(e){mr(sl.current);var t=mr(hn.current),n=xi(t,e.type);t!==n&&(Te(rl,e),Te(hn,n))}function zc(e){rl.current===e&&(ze(hn),ze(rl))}var Le=rr(0);function Ro(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ba=[];function Pc(){for(var e=0;e<Ba.length;e++)Ba[e]._workInProgressVersionPrimary=null;Ba.length=0}var io=zn.ReactCurrentDispatcher,Ua=zn.ReactCurrentBatchConfig,kr=0,Oe=null,Ke=null,tt=null,zo=!1,As=!1,ll=0,jg=0;function dt(){throw Error(z(321))}function Ic(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sn(e[n],t[n]))return!1;return!0}function Lc(e,t,n,r,s,o){if(kr=o,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=e===null||e.memoizedState===null?Eg:_g,e=n(r,s),As){o=0;do{if(As=!1,ll=0,25<=o)throw Error(z(301));o+=1,tt=Ke=null,t.updateQueue=null,io.current=Mg,e=n(r,s)}while(As)}if(io.current=Po,t=Ke!==null&&Ke.next!==null,kr=0,tt=Ke=Oe=null,zo=!1,t)throw Error(z(300));return e}function Oc(){var e=ll!==0;return ll=0,e}function dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Oe.memoizedState=tt=e:tt=tt.next=e,tt}function Qt(){if(Ke===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=Ke.next;var t=tt===null?Oe.memoizedState:tt.next;if(t!==null)tt=t,Ke=e;else{if(e===null)throw Error(z(310));Ke=e,e={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},tt===null?Oe.memoizedState=tt=e:tt=tt.next=e}return tt}function ol(e,t){return typeof t=="function"?t(e):t}function Ha(e){var t=Qt(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=Ke,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var i=a=null,c=null,d=o;do{var p=d.lane;if((kr&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var f={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=f,a=r):c=c.next=f,Oe.lanes|=p,jr|=p}d=d.next}while(d!==null&&d!==o);c===null?a=r:c.next=i,sn(r,t.memoizedState)||(Ct=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Oe.lanes|=o,jr|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Wa(e){var t=Qt(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);sn(o,t.memoizedState)||(Ct=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Tp(){}function Dp(e,t){var n=Oe,r=Qt(),s=t(),o=!sn(r.memoizedState,s);if(o&&(r.memoizedState=s,Ct=!0),r=r.queue,$c(Pp.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,al(9,zp.bind(null,n,r,s,t),void 0,null),rt===null)throw Error(z(349));kr&30||Rp(n,t,s)}return s}function Rp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zp(e,t,n,r){t.value=n,t.getSnapshot=r,Ip(t)&&Lp(e)}function Pp(e,t,n){return n(function(){Ip(t)&&Lp(e)})}function Ip(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sn(e,n)}catch(r){return!0}}function Lp(e){var t=Mn(e,1);t!==null&&rn(t,e,1,-1)}function nd(e){var t=dn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:e},t.queue=e,e=e.dispatch=Cg.bind(null,Oe,e),[t.memoizedState,e]}function al(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Op(){return Qt().memoizedState}function co(e,t,n,r){var s=dn();Oe.flags|=e,s.memoizedState=al(1|t,n,void 0,r===void 0?null:r)}function ea(e,t,n,r){var s=Qt();r=r===void 0?null:r;var o=void 0;if(Ke!==null){var a=Ke.memoizedState;if(o=a.destroy,r!==null&&Ic(r,a.deps)){s.memoizedState=al(t,n,o,r);return}}Oe.flags|=e,s.memoizedState=al(1|t,n,o,r)}function rd(e,t){return co(8390656,8,e,t)}function $c(e,t){return ea(2048,8,e,t)}function $p(e,t){return ea(4,2,e,t)}function Ap(e,t){return ea(4,4,e,t)}function Fp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Bp(e,t,n){return n=n!=null?n.concat([e]):null,ea(4,4,Fp.bind(null,t,e),n)}function Ac(){}function Up(e,t){var n=Qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ic(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hp(e,t){var n=Qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ic(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wp(e,t,n){return kr&21?(sn(n,t)||(n=Qf(),Oe.lanes|=n,jr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ct=!0),e.memoizedState=n)}function Sg(e,t){var n=Ce;Ce=n!==0&&4>n?n:4,e(!0);var r=Ua.transition;Ua.transition={};try{e(!1),t()}finally{Ce=n,Ua.transition=r}}function Vp(){return Qt().memoizedState}function Ng(e,t,n){var r=qn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xp(e))Yp(t,n);else if(n=Ep(e,t,n,r),n!==null){var s=vt();rn(n,e,r,s),Kp(n,t,r)}}function Cg(e,t,n){var r=qn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xp(e))Yp(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,i=o(a,n);if(s.hasEagerState=!0,s.eagerState=i,sn(i,a)){var c=t.interleaved;c===null?(s.next=s,Tc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch(d){}finally{}n=Ep(e,t,s,r),n!==null&&(s=vt(),rn(n,e,r,s),Kp(n,t,r))}}function Xp(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function Yp(e,t){As=zo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Kp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,mc(e,n)}}var Po={readContext:Kt,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},Eg={readContext:Kt,useCallback:function(e,t){return dn().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:rd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,co(4194308,4,Fp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return co(4194308,4,e,t)},useInsertionEffect:function(e,t){return co(4,2,e,t)},useMemo:function(e,t){var n=dn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=dn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ng.bind(null,Oe,e),[r.memoizedState,e]},useRef:function(e){var t=dn();return e={current:e},t.memoizedState=e},useState:nd,useDebugValue:Ac,useDeferredValue:function(e){return dn().memoizedState=e},useTransition:function(){var e=nd(!1),t=e[0];return e=Sg.bind(null,e[1]),dn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Oe,s=dn();if(Ie){if(n===void 0)throw Error(z(407));n=n()}else{if(n=t(),rt===null)throw Error(z(349));kr&30||Rp(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,rd(Pp.bind(null,r,o,e),[e]),r.flags|=2048,al(9,zp.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=dn(),t=rt.identifierPrefix;if(Ie){var n=Nn,r=Sn;n=(r&~(1<<32-nn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ll++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=jg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_g={readContext:Kt,useCallback:Up,useContext:Kt,useEffect:$c,useImperativeHandle:Bp,useInsertionEffect:$p,useLayoutEffect:Ap,useMemo:Hp,useReducer:Ha,useRef:Op,useState:function(){return Ha(ol)},useDebugValue:Ac,useDeferredValue:function(e){var t=Qt();return Wp(t,Ke.memoizedState,e)},useTransition:function(){var e=Ha(ol)[0],t=Qt().memoizedState;return[e,t]},useMutableSource:Tp,useSyncExternalStore:Dp,useId:Vp,unstable_isNewReconciler:!1},Mg={readContext:Kt,useCallback:Up,useContext:Kt,useEffect:$c,useImperativeHandle:Bp,useInsertionEffect:$p,useLayoutEffect:Ap,useMemo:Hp,useReducer:Wa,useRef:Op,useState:function(){return Wa(ol)},useDebugValue:Ac,useDeferredValue:function(e){var t=Qt();return Ke===null?t.memoizedState=e:Wp(t,Ke.memoizedState,e)},useTransition:function(){var e=Wa(ol)[0],t=Qt().memoizedState;return[e,t]},useMutableSource:Tp,useSyncExternalStore:Dp,useId:Vp,unstable_isNewReconciler:!1};function Zt(e,t){if(e&&e.defaultProps){t=$e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Li(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:$e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ta={isMounted:function(e){return(e=e._reactInternals)?Cr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=vt(),s=qn(e),o=Cn(r,s);o.payload=t,n!=null&&(o.callback=n),t=Qn(e,o,s),t!==null&&(rn(t,e,s,r),ao(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=vt(),s=qn(e),o=Cn(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Qn(e,o,s),t!==null&&(rn(t,e,s,r),ao(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=vt(),r=qn(e),s=Cn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Qn(e,s,r),t!==null&&(rn(t,e,r,n),ao(t,e,r))}};function sd(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Zs(n,r)||!Zs(s,o):!0}function Qp(e,t,n){var r=!1,s=er,o=t.contextType;return typeof o=="object"&&o!==null?o=Kt(o):(s=_t(t)?wr:xt.current,r=t.contextTypes,o=(r=r!=null)?ss(e,s):er),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ta,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function ld(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ta.enqueueReplaceState(t,t.state,null)}function Oi(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Dc(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Kt(o):(o=_t(t)?wr:xt.current,s.context=ss(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Li(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ta.enqueueReplaceState(s,s.state,null),Do(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function is(e,t){try{var n="",r=t;do n+=rm(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Va(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function $i(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Tg=typeof WeakMap=="function"?WeakMap:Map;function Gp(e,t,n){n=Cn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Lo||(Lo=!0,Ki=r),$i(e,t)},n}function qp(e,t,n){n=Cn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){$i(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){$i(e,t),typeof r!="function"&&(Gn===null?Gn=new Set([this]):Gn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function od(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Tg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Wg.bind(null,e,t,n),t.then(e,e))}function ad(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function id(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Cn(-1,1),t.tag=2,Qn(n,t,1))),n.lanes|=1),e)}var Dg=zn.ReactCurrentOwner,Ct=!1;function yt(e,t,n,r){t.child=e===null?Cp(t,null,n,r):os(t,e.child,n,r)}function cd(e,t,n,r,s){n=n.render;var o=t.ref;return es(t,s),r=Lc(e,t,n,r,o,s),n=Oc(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tn(e,t,s)):(Ie&&n&&Sc(t),t.flags|=1,yt(e,t,r,s),t.child)}function ud(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Yc(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Jp(e,t,o,r,s)):(e=ho(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Zs,n(a,r)&&e.ref===t.ref)return Tn(e,t,s)}return t.flags|=1,e=Jn(o,r),e.ref=t.ref,e.return=t,t.child=e}function Jp(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Zs(o,r)&&e.ref===t.ref)if(Ct=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(Ct=!0);else return t.lanes=e.lanes,Tn(e,t,s)}return Ai(e,t,n,r,s)}function Zp(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Kr,Dt),Dt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(Kr,Dt),Dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Te(Kr,Dt),Dt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Te(Kr,Dt),Dt|=r;return yt(e,t,s,n),t.child}function eh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ai(e,t,n,r,s){var o=_t(n)?wr:xt.current;return o=ss(t,o),es(t,s),n=Lc(e,t,n,r,o,s),r=Oc(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tn(e,t,s)):(Ie&&r&&Sc(t),t.flags|=1,yt(e,t,n,s),t.child)}function dd(e,t,n,r,s){if(_t(n)){var o=!0;Co(t)}else o=!1;if(es(t,s),t.stateNode===null)uo(e,t),Qp(t,n,r),Oi(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Kt(d):(d=_t(n)?wr:xt.current,d=ss(t,d));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==d)&&ld(t,a,r,d),$n=!1;var h=t.memoizedState;a.state=h,Do(t,r,a,s),c=t.memoizedState,i!==r||h!==c||Et.current||$n?(typeof p=="function"&&(Li(t,n,p,r),c=t.memoizedState),(i=$n||sd(t,n,i,r,h,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,_p(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:Zt(t.type,i),a.props=d,f=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Kt(c):(c=_t(n)?wr:xt.current,c=ss(t,c));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||h!==c)&&ld(t,a,r,c),$n=!1,h=t.memoizedState,a.state=h,Do(t,r,a,s);var v=t.memoizedState;i!==f||h!==v||Et.current||$n?(typeof x=="function"&&(Li(t,n,x,r),v=t.memoizedState),(d=$n||sd(t,n,d,r,h,v,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Fi(e,t,n,r,o,s)}function Fi(e,t,n,r,s,o){eh(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Gu(t,n,!1),Tn(e,t,o);r=t.stateNode,Dg.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=os(t,e.child,null,o),t.child=os(t,null,i,o)):yt(e,t,i,o),t.memoizedState=r.state,s&&Gu(t,n,!0),t.child}function th(e){var t=e.stateNode;t.pendingContext?Qu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qu(e,t.context,!1),Rc(e,t.containerInfo)}function fd(e,t,n,r,s){return ls(),Cc(s),t.flags|=256,yt(e,t,n,r),t.child}var Bi={dehydrated:null,treeContext:null,retryLane:0};function Ui(e){return{baseLanes:e,cachePool:null,transitions:null}}function nh(e,t,n){var r=t.pendingProps,s=Le.current,o=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Te(Le,s&1),e===null)return Pi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=sa(a,r,0,null),e=yr(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ui(n),t.memoizedState=Bi,e):Fc(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return Rg(e,t,a,r,i,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Jn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?o=Jn(i,o):(o=yr(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?Ui(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Bi,r}return o=e.child,e=o.sibling,r=Jn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fc(e,t){return t=sa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bl(e,t,n,r){return r!==null&&Cc(r),os(t,e.child,null,n),e=Fc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rg(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=Va(Error(z(422))),Bl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=sa({mode:"visible",children:r.children},s,0,null),o=yr(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&os(t,e.child,null,a),t.child.memoizedState=Ui(a),t.memoizedState=Bi,o);if(!(t.mode&1))return Bl(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,o=Error(z(419)),r=Va(o,r,void 0),Bl(e,t,a,r)}if(i=(a&e.childLanes)!==0,Ct||i){if(r=rt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Mn(e,s),rn(r,e,s,-1))}return Xc(),r=Va(Error(z(421))),Bl(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Vg.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,Rt=Kn(s.nextSibling),zt=t,Ie=!0,tn=null,e!==null&&(Wt[Vt++]=Sn,Wt[Vt++]=Nn,Wt[Vt++]=br,Sn=e.id,Nn=e.overflow,br=t),t=Fc(t,r.children),t.flags|=4096,t)}function pd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ii(e.return,t,n)}function Xa(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function rh(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(yt(e,t,r.children,n),r=Le.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pd(e,n,t);else if(e.tag===19)pd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Te(Le,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ro(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Xa(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ro(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Xa(t,!0,n,null,o);break;case"together":Xa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function uo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),jr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,n=Jn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Jn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function zg(e,t,n){switch(t.tag){case 3:th(t),ls();break;case 5:Mp(t);break;case 1:_t(t.type)&&Co(t);break;case 4:Rc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Te(Mo,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Te(Le,Le.current&1),t.flags|=128,null):n&t.child.childLanes?nh(e,t,n):(Te(Le,Le.current&1),e=Tn(e,t,n),e!==null?e.sibling:null);Te(Le,Le.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return rh(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Le,Le.current),r)break;return null;case 22:case 23:return t.lanes=0,Zp(e,t,n)}return Tn(e,t,n)}var sh,Hi,lh,oh;sh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hi=function(){};lh=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,mr(hn.current);var o=null;switch(n){case"input":s=di(e,s),r=di(e,r),o=[];break;case"select":s=$e({},s,{value:void 0}),r=$e({},r,{value:void 0}),o=[];break;case"textarea":s=hi(e,s),r=hi(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=So)}mi(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var i=s[d];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Xs.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(i=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Xs.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&De("scroll",e),o||i===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};oh=function(e,t,n,r){n!==r&&(t.flags|=4)};function Cs(e,t){if(!Ie)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Pg(e,t,n){var r=t.pendingProps;switch(Nc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(t),null;case 1:return _t(t.type)&&No(),ft(t),null;case 3:return r=t.stateNode,as(),ze(Et),ze(xt),Pc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Al(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,tn!==null&&(qi(tn),tn=null))),Hi(e,t),ft(t),null;case 5:zc(t);var s=mr(sl.current);if(n=t.type,e!==null&&t.stateNode!=null)lh(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(z(166));return ft(t),null}if(e=mr(hn.current),Al(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fn]=t,r[nl]=o,e=(t.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(s=0;s<zs.length;s++)De(zs[s],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":ku(r,o),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},De("invalid",r);break;case"textarea":Su(r,o),De("invalid",r)}mi(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var i=o[a];a==="children"?typeof i=="string"?r.textContent!==i&&(o.suppressHydrationWarning!==!0&&$l(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(o.suppressHydrationWarning!==!0&&$l(r.textContent,i,e),s=["children",""+i]):Xs.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&De("scroll",r)}switch(n){case"input":Tl(r),ju(r,o,!0);break;case"textarea":Tl(r),Nu(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=So)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Pf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[fn]=t,e[nl]=r,sh(e,t,!1,!1),t.stateNode=e;e:{switch(a=gi(n,r),n){case"dialog":De("cancel",e),De("close",e),s=r;break;case"iframe":case"object":case"embed":De("load",e),s=r;break;case"video":case"audio":for(s=0;s<zs.length;s++)De(zs[s],e);s=r;break;case"source":De("error",e),s=r;break;case"img":case"image":case"link":De("error",e),De("load",e),s=r;break;case"details":De("toggle",e),s=r;break;case"input":ku(e,r),s=di(e,r),De("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=$e({},r,{value:void 0}),De("invalid",e);break;case"textarea":Su(e,r),s=hi(e,r),De("invalid",e);break;default:s=r}mi(n,s),i=s;for(o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="style"?Of(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&If(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ys(e,c):typeof c=="number"&&Ys(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Xs.hasOwnProperty(o)?c!=null&&o==="onScroll"&&De("scroll",e):c!=null&&uc(e,o,c,a))}switch(n){case"input":Tl(e),ju(e,r,!1);break;case"textarea":Tl(e),Nu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Zn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Gr(e,!!r.multiple,o,!1):r.defaultValue!=null&&Gr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=So)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ft(t),null;case 6:if(e&&t.stateNode!=null)oh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(z(166));if(n=mr(sl.current),mr(hn.current),Al(t)){if(r=t.stateNode,n=t.memoizedProps,r[fn]=t,(o=r.nodeValue!==n)&&(e=zt,e!==null))switch(e.tag){case 3:$l(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$l(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=t,t.stateNode=r}return ft(t),null;case 13:if(ze(Le),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ie&&Rt!==null&&t.mode&1&&!(t.flags&128))Sp(),ls(),t.flags|=98560,o=!1;else if(o=Al(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(z(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(z(317));o[fn]=t}else ls(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ft(t),o=!1}else tn!==null&&(qi(tn),tn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?Ge===0&&(Ge=3):Xc())),t.updateQueue!==null&&(t.flags|=4),ft(t),null);case 4:return as(),Hi(e,t),e===null&&el(t.stateNode.containerInfo),ft(t),null;case 10:return Mc(t.type._context),ft(t),null;case 17:return _t(t.type)&&No(),ft(t),null;case 19:if(ze(Le),o=t.memoizedState,o===null)return ft(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)Cs(o,!1);else{if(Ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Ro(e),a!==null){for(t.flags|=128,Cs(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Te(Le,Le.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ue()>cs&&(t.flags|=128,r=!0,Cs(o,!1),t.lanes=4194304)}else{if(!r)if(e=Ro(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Cs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ie)return ft(t),null}else 2*Ue()-o.renderingStartTime>cs&&n!==1073741824&&(t.flags|=128,r=!0,Cs(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ue(),t.sibling=null,n=Le.current,Te(Le,r?n&1|2:n&1),t):(ft(t),null);case 22:case 23:return Vc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Dt&1073741824&&(ft(t),t.subtreeFlags&6&&(t.flags|=8192)):ft(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function Ig(e,t){switch(Nc(t),t.tag){case 1:return _t(t.type)&&No(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return as(),ze(Et),ze(xt),Pc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return zc(t),null;case 13:if(ze(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));ls()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(Le),null;case 4:return as(),null;case 10:return Mc(t.type._context),null;case 22:case 23:return Vc(),null;case 24:return null;default:return null}}var Ul=!1,ht=!1,Lg=typeof WeakSet=="function"?WeakSet:Set,K=null;function Yr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(e,t,r)}else n.current=null}function Wi(e,t,n){try{n()}catch(r){Ae(e,t,r)}}var hd=!1;function Og(e,t){if(Ei=bo,e=dp(),jc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(S){n=null;break e}var a=0,i=-1,c=-1,d=0,p=0,f=e,h=null;t:for(;;){for(var x;f!==n||s!==0&&f.nodeType!==3||(i=a+s),f!==o||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)h=f,f=x;for(;;){if(f===e)break t;if(h===n&&++d===s&&(i=a),h===o&&++p===r&&(c=a),(x=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=x}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(_i={focusedElem:e,selectionRange:n},bo=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,b=v.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Zt(t.type,y),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(S){Ae(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return v=hd,hd=!1,v}function Fs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Wi(t,n,o)}s=s.next}while(s!==r)}}function na(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Vi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ah(e){var t=e.alternate;t!==null&&(e.alternate=null,ah(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fn],delete t[nl],delete t[Di],delete t[vg],delete t[wg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ih(e){return e.tag===5||e.tag===3||e.tag===4}function xd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ih(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=So));else if(r!==4&&(e=e.child,e!==null))for(Xi(e,t,n),e=e.sibling;e!==null;)Xi(e,t,n),e=e.sibling}function Yi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Yi(e,t,n),e=e.sibling;e!==null;)Yi(e,t,n),e=e.sibling}var ot=null,en=!1;function Ln(e,t,n){for(n=n.child;n!==null;)ch(e,t,n),n=n.sibling}function ch(e,t,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Ko,n)}catch(i){}switch(n.tag){case 5:ht||Yr(n,t);case 6:var r=ot,s=en;ot=null,Ln(e,t,n),ot=r,en=s,ot!==null&&(en?(e=ot,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(en?(e=ot,n=n.stateNode,e.nodeType===8?Aa(e.parentNode,n):e.nodeType===1&&Aa(e,n),qs(e)):Aa(ot,n.stateNode));break;case 4:r=ot,s=en,ot=n.stateNode.containerInfo,en=!0,Ln(e,t,n),ot=r,en=s;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Wi(n,t,a),s=s.next}while(s!==r)}Ln(e,t,n);break;case 1:if(!ht&&(Yr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Ae(n,t,i)}Ln(e,t,n);break;case 21:Ln(e,t,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,Ln(e,t,n),ht=r):Ln(e,t,n);break;default:Ln(e,t,n)}}function md(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Lg),t.forEach(function(r){var s=Xg.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:ot=i.stateNode,en=!1;break e;case 3:ot=i.stateNode.containerInfo,en=!0;break e;case 4:ot=i.stateNode.containerInfo,en=!0;break e}i=i.return}if(ot===null)throw Error(z(160));ch(o,a,s),ot=null,en=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ae(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)uh(t,e),t=t.sibling}function uh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jt(t,e),un(e),r&4){try{Fs(3,e,e.return),na(3,e)}catch(y){Ae(e,e.return,y)}try{Fs(5,e,e.return)}catch(y){Ae(e,e.return,y)}}break;case 1:Jt(t,e),un(e),r&512&&n!==null&&Yr(n,n.return);break;case 5:if(Jt(t,e),un(e),r&512&&n!==null&&Yr(n,n.return),e.flags&32){var s=e.stateNode;try{Ys(s,"")}catch(y){Ae(e,e.return,y)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&o.type==="radio"&&o.name!=null&&Rf(s,o),gi(i,a);var d=gi(i,o);for(a=0;a<c.length;a+=2){var p=c[a],f=c[a+1];p==="style"?Of(s,f):p==="dangerouslySetInnerHTML"?If(s,f):p==="children"?Ys(s,f):uc(s,p,f,d)}switch(i){case"input":fi(s,o);break;case"textarea":zf(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?Gr(s,!!o.multiple,x,!1):h!==!!o.multiple&&(o.defaultValue!=null?Gr(s,!!o.multiple,o.defaultValue,!0):Gr(s,!!o.multiple,o.multiple?[]:"",!1))}s[nl]=o}catch(y){Ae(e,e.return,y)}}break;case 6:if(Jt(t,e),un(e),r&4){if(e.stateNode===null)throw Error(z(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(y){Ae(e,e.return,y)}}break;case 3:if(Jt(t,e),un(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qs(t.containerInfo)}catch(y){Ae(e,e.return,y)}break;case 4:Jt(t,e),un(e);break;case 13:Jt(t,e),un(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Hc=Ue())),r&4&&md(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(ht=(d=ht)||p,Jt(t,e),ht=d):Jt(t,e),un(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(K=e,p=e.child;p!==null;){for(f=K=p;K!==null;){switch(h=K,x=h.child,h.tag){case 0:case 11:case 14:case 15:Fs(4,h,h.return);break;case 1:Yr(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ae(r,n,y)}}break;case 5:Yr(h,h.return);break;case 22:if(h.memoizedState!==null){yd(f);continue}}x!==null?(x.return=h,K=x):yd(f)}p=p.sibling}e:for(p=null,f=e;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(i=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=Lf("display",a))}catch(y){Ae(e,e.return,y)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){Ae(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Jt(t,e),un(e),r&4&&md(e);break;case 21:break;default:Jt(t,e),un(e)}}function un(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ih(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ys(s,""),r.flags&=-33);var o=xd(e);Yi(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=xd(e);Xi(e,i,a);break;default:throw Error(z(161))}}catch(c){Ae(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $g(e,t,n){K=e,dh(e)}function dh(e,t,n){for(var r=(e.mode&1)!==0;K!==null;){var s=K,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ul;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||ht;i=Ul;var d=ht;if(Ul=a,(ht=c)&&!d)for(K=s;K!==null;)a=K,c=a.child,a.tag===22&&a.memoizedState!==null?vd(s):c!==null?(c.return=a,K=c):vd(s);for(;o!==null;)K=o,dh(o),o=o.sibling;K=s,Ul=i,ht=d}gd(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,K=o):gd(e)}}function gd(e){for(;K!==null;){var t=K;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ht||na(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ht)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Zt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&td(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}td(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&qs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}ht||t.flags&512&&Vi(t)}catch(h){Ae(t,t.return,h)}}if(t===e){K=null;break}if(n=t.sibling,n!==null){n.return=t.return,K=n;break}K=t.return}}function yd(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var n=t.sibling;if(n!==null){n.return=t.return,K=n;break}K=t.return}}function vd(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{na(4,t)}catch(c){Ae(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ae(t,s,c)}}var o=t.return;try{Vi(t)}catch(c){Ae(t,o,c)}break;case 5:var a=t.return;try{Vi(t)}catch(c){Ae(t,a,c)}}}catch(c){Ae(t,t.return,c)}if(t===e){K=null;break}var i=t.sibling;if(i!==null){i.return=t.return,K=i;break}K=t.return}}var Ag=Math.ceil,Io=zn.ReactCurrentDispatcher,Bc=zn.ReactCurrentOwner,Yt=zn.ReactCurrentBatchConfig,we=0,rt=null,We=null,at=0,Dt=0,Kr=rr(0),Ge=0,il=null,jr=0,ra=0,Uc=0,Bs=null,Nt=null,Hc=0,cs=1/0,kn=null,Lo=!1,Ki=null,Gn=null,Hl=!1,Hn=null,Oo=0,Us=0,Qi=null,fo=-1,po=0;function vt(){return we&6?Ue():fo!==-1?fo:fo=Ue()}function qn(e){return e.mode&1?we&2&&at!==0?at&-at:kg.transition!==null?(po===0&&(po=Qf()),po):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:np(e.type)),e):1}function rn(e,t,n,r){if(50<Us)throw Us=0,Qi=null,Error(z(185));hl(e,n,r),(!(we&2)||e!==rt)&&(e===rt&&(!(we&2)&&(ra|=n),Ge===4&&Bn(e,at)),Mt(e,r),n===1&&we===0&&!(t.mode&1)&&(cs=Ue()+500,Zo&&sr()))}function Mt(e,t){var n=e.callbackNode;km(e,t);var r=wo(e,e===rt?at:0);if(r===0)n!==null&&_u(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&_u(n),t===1)e.tag===0?bg(wd.bind(null,e)):bp(wd.bind(null,e)),gg(function(){!(we&6)&&sr()}),n=null;else{switch(Gf(r)){case 1:n=xc;break;case 4:n=Yf;break;case 16:n=vo;break;case 536870912:n=Kf;break;default:n=vo}n=vh(n,fh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function fh(e,t){if(fo=-1,po=0,we&6)throw Error(z(327));var n=e.callbackNode;if(ts()&&e.callbackNode!==n)return null;var r=wo(e,e===rt?at:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=$o(e,r);else{t=r;var s=we;we|=2;var o=hh();(rt!==e||at!==t)&&(kn=null,cs=Ue()+500,gr(e,t));do try{Ug();break}catch(i){ph(e,i)}while(!0);_c(),Io.current=o,we=s,We!==null?t=0:(rt=null,at=0,t=Ge)}if(t!==0){if(t===2&&(s=ki(e),s!==0&&(r=s,t=Gi(e,s))),t===1)throw n=il,gr(e,0),Bn(e,r),Mt(e,Ue()),n;if(t===6)Bn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Fg(s)&&(t=$o(e,r),t===2&&(o=ki(e),o!==0&&(r=o,t=Gi(e,o))),t===1))throw n=il,gr(e,0),Bn(e,r),Mt(e,Ue()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(z(345));case 2:fr(e,Nt,kn);break;case 3:if(Bn(e,r),(r&130023424)===r&&(t=Hc+500-Ue(),10<t)){if(wo(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){vt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ti(fr.bind(null,e,Nt,kn),t);break}fr(e,Nt,kn);break;case 4:if(Bn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-nn(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ag(r/1960))-r,10<r){e.timeoutHandle=Ti(fr.bind(null,e,Nt,kn),r);break}fr(e,Nt,kn);break;case 5:fr(e,Nt,kn);break;default:throw Error(z(329))}}}return Mt(e,Ue()),e.callbackNode===n?fh.bind(null,e):null}function Gi(e,t){var n=Bs;return e.current.memoizedState.isDehydrated&&(gr(e,t).flags|=256),e=$o(e,t),e!==2&&(t=Nt,Nt=n,t!==null&&qi(t)),e}function qi(e){Nt===null?Nt=e:Nt.push.apply(Nt,e)}function Fg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!sn(o(),s))return!1}catch(a){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bn(e,t){for(t&=~Uc,t&=~ra,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-nn(t),r=1<<n;e[n]=-1,t&=~r}}function wd(e){if(we&6)throw Error(z(327));ts();var t=wo(e,0);if(!(t&1))return Mt(e,Ue()),null;var n=$o(e,t);if(e.tag!==0&&n===2){var r=ki(e);r!==0&&(t=r,n=Gi(e,r))}if(n===1)throw n=il,gr(e,0),Bn(e,t),Mt(e,Ue()),n;if(n===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fr(e,Nt,kn),Mt(e,Ue()),null}function Wc(e,t){var n=we;we|=1;try{return e(t)}finally{we=n,we===0&&(cs=Ue()+500,Zo&&sr())}}function Sr(e){Hn!==null&&Hn.tag===0&&!(we&6)&&ts();var t=we;we|=1;var n=Yt.transition,r=Ce;try{if(Yt.transition=null,Ce=1,e)return e()}finally{Ce=r,Yt.transition=n,we=t,!(we&6)&&sr()}}function Vc(){Dt=Kr.current,ze(Kr)}function gr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,mg(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Nc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&No();break;case 3:as(),ze(Et),ze(xt),Pc();break;case 5:zc(r);break;case 4:as();break;case 13:ze(Le);break;case 19:ze(Le);break;case 10:Mc(r.type._context);break;case 22:case 23:Vc()}n=n.return}if(rt=e,We=e=Jn(e.current,null),at=Dt=t,Ge=0,il=null,Uc=ra=jr=0,Nt=Bs=null,xr!==null){for(t=0;t<xr.length;t++)if(n=xr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}xr=null}return e}function ph(e,t){do{var n=We;try{if(_c(),io.current=Po,zo){for(var r=Oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}zo=!1}if(kr=0,tt=Ke=Oe=null,As=!1,ll=0,Bc.current=null,n===null||n.return===null){Ge=1,il=t,We=null;break}e:{var o=e,a=n.return,i=n,c=t;if(t=at,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=i,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=ad(a);if(x!==null){x.flags&=-257,id(x,a,i,o,t),x.mode&1&&od(o,d,t),t=x,c=d;var v=t.updateQueue;if(v===null){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}else{if(!(t&1)){od(o,d,t),Xc();break e}c=Error(z(426))}}else if(Ie&&i.mode&1){var b=ad(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),id(b,a,i,o,t),Cc(is(c,i));break e}}o=c=is(c,i),Ge!==4&&(Ge=2),Bs===null?Bs=[o]:Bs.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=Gp(o,c,t);ed(o,g);break e;case 1:i=c;var m=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Gn===null||!Gn.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=qp(o,i,t);ed(o,S);break e}}o=o.return}while(o!==null)}mh(n)}catch(j){t=j,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function hh(){var e=Io.current;return Io.current=Po,e===null?Po:e}function Xc(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),rt===null||!(jr&268435455)&&!(ra&268435455)||Bn(rt,at)}function $o(e,t){var n=we;we|=2;var r=hh();(rt!==e||at!==t)&&(kn=null,gr(e,t));do try{Bg();break}catch(s){ph(e,s)}while(!0);if(_c(),we=n,Io.current=r,We!==null)throw Error(z(261));return rt=null,at=0,Ge}function Bg(){for(;We!==null;)xh(We)}function Ug(){for(;We!==null&&!pm();)xh(We)}function xh(e){var t=yh(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,t===null?mh(e):We=t,Bc.current=null}function mh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ig(n,t),n!==null){n.flags&=32767,We=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ge=6,We=null;return}}else if(n=Pg(n,t,Dt),n!==null){We=n;return}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Ge===0&&(Ge=5)}function fr(e,t,n){var r=Ce,s=Yt.transition;try{Yt.transition=null,Ce=1,Hg(e,t,n,r)}finally{Yt.transition=s,Ce=r}return null}function Hg(e,t,n,r){do ts();while(Hn!==null);if(we&6)throw Error(z(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(jm(e,o),e===rt&&(We=rt=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hl||(Hl=!0,vh(vo,function(){return ts(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Yt.transition,Yt.transition=null;var a=Ce;Ce=1;var i=we;we|=4,Bc.current=null,Og(e,n),uh(n,e),cg(_i),bo=!!Ei,_i=Ei=null,e.current=n,$g(n),hm(),we=i,Ce=a,Yt.transition=o}else e.current=n;if(Hl&&(Hl=!1,Hn=e,Oo=s),o=e.pendingLanes,o===0&&(Gn=null),gm(n.stateNode),Mt(e,Ue()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Lo)throw Lo=!1,e=Ki,Ki=null,e;return Oo&1&&e.tag!==0&&ts(),o=e.pendingLanes,o&1?e===Qi?Us++:(Us=0,Qi=e):Us=0,sr(),null}function ts(){if(Hn!==null){var e=Gf(Oo),t=Yt.transition,n=Ce;try{if(Yt.transition=null,Ce=16>e?16:e,Hn===null)var r=!1;else{if(e=Hn,Hn=null,Oo=0,we&6)throw Error(z(331));var s=we;for(we|=4,K=e.current;K!==null;){var o=K,a=o.child;if(K.flags&16){var i=o.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(K=d;K!==null;){var p=K;switch(p.tag){case 0:case 11:case 15:Fs(8,p,o)}var f=p.child;if(f!==null)f.return=p,K=f;else for(;K!==null;){p=K;var h=p.sibling,x=p.return;if(ah(p),p===d){K=null;break}if(h!==null){h.return=x,K=h;break}K=x}}}var v=o.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}K=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,K=a;else e:for(;K!==null;){if(o=K,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Fs(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,K=g;break e}K=o.return}}var m=e.current;for(K=m;K!==null;){a=K;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,K=w;else e:for(a=m;K!==null;){if(i=K,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:na(9,i)}}catch(j){Ae(i,i.return,j)}if(i===a){K=null;break e}var S=i.sibling;if(S!==null){S.return=i.return,K=S;break e}K=i.return}}if(we=s,sr(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Ko,e)}catch(j){}r=!0}return r}finally{Ce=n,Yt.transition=t}}return!1}function bd(e,t,n){t=is(n,t),t=Gp(e,t,1),e=Qn(e,t,1),t=vt(),e!==null&&(hl(e,1,t),Mt(e,t))}function Ae(e,t,n){if(e.tag===3)bd(e,e,n);else for(;t!==null;){if(t.tag===3){bd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gn===null||!Gn.has(r))){e=is(n,e),e=qp(t,e,1),t=Qn(t,e,1),e=vt(),t!==null&&(hl(t,1,e),Mt(t,e));break}}t=t.return}}function Wg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=vt(),e.pingedLanes|=e.suspendedLanes&n,rt===e&&(at&n)===n&&(Ge===4||Ge===3&&(at&130023424)===at&&500>Ue()-Hc?gr(e,0):Uc|=n),Mt(e,t)}function gh(e,t){t===0&&(e.mode&1?(t=zl,zl<<=1,!(zl&130023424)&&(zl=4194304)):t=1);var n=vt();e=Mn(e,t),e!==null&&(hl(e,t,n),Mt(e,n))}function Vg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),gh(e,n)}function Xg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(t),gh(e,n)}var yh;yh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Et.current)Ct=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ct=!1,zg(e,t,n);Ct=!!(e.flags&131072)}else Ct=!1,Ie&&t.flags&1048576&&kp(t,_o,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;uo(e,t),e=t.pendingProps;var s=ss(t,xt.current);es(t,n),s=Lc(null,t,r,e,s,n);var o=Oc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_t(r)?(o=!0,Co(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Dc(t),s.updater=ta,t.stateNode=s,s._reactInternals=t,Oi(t,r,e,n),t=Fi(null,t,r,!0,o,n)):(t.tag=0,Ie&&o&&Sc(t),yt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(uo(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Kg(r),e=Zt(r,e),s){case 0:t=Ai(null,t,r,e,n);break e;case 1:t=dd(null,t,r,e,n);break e;case 11:t=cd(null,t,r,e,n);break e;case 14:t=ud(null,t,r,Zt(r.type,e),n);break e}throw Error(z(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Zt(r,s),Ai(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Zt(r,s),dd(e,t,r,s,n);case 3:e:{if(th(t),e===null)throw Error(z(387));r=t.pendingProps,o=t.memoizedState,s=o.element,_p(e,t),Do(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=is(Error(z(423)),t),t=fd(e,t,r,n,s);break e}else if(r!==s){s=is(Error(z(424)),t),t=fd(e,t,r,n,s);break e}else for(Rt=Kn(t.stateNode.containerInfo.firstChild),zt=t,Ie=!0,tn=null,n=Cp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ls(),r===s){t=Tn(e,t,n);break e}yt(e,t,r,n)}t=t.child}return t;case 5:return Mp(t),e===null&&Pi(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,Mi(r,s)?a=null:o!==null&&Mi(r,o)&&(t.flags|=32),eh(e,t),yt(e,t,a,n),t.child;case 6:return e===null&&Pi(t),null;case 13:return nh(e,t,n);case 4:return Rc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=os(t,null,r,n):yt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Zt(r,s),cd(e,t,r,s,n);case 7:return yt(e,t,t.pendingProps,n),t.child;case 8:return yt(e,t,t.pendingProps.children,n),t.child;case 12:return yt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,Te(Mo,r._currentValue),r._currentValue=a,o!==null)if(sn(o.value,a)){if(o.children===s.children&&!Et.current){t=Tn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){a=o.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Cn(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Ii(o.return,n,t),i.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(z(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),Ii(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}yt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,es(t,n),s=Kt(s),r=r(s),t.flags|=1,yt(e,t,r,n),t.child;case 14:return r=t.type,s=Zt(r,t.pendingProps),s=Zt(r.type,s),ud(e,t,r,s,n);case 15:return Jp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Zt(r,s),uo(e,t),t.tag=1,_t(r)?(e=!0,Co(t)):e=!1,es(t,n),Qp(t,r,s),Oi(t,r,s,n),Fi(null,t,r,!0,e,n);case 19:return rh(e,t,n);case 22:return Zp(e,t,n)}throw Error(z(156,t.tag))};function vh(e,t){return Xf(e,t)}function Yg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(e,t,n,r){return new Yg(e,t,n,r)}function Yc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Kg(e){if(typeof e=="function")return Yc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fc)return 11;if(e===pc)return 14}return 2}function Jn(e,t){var n=e.alternate;return n===null?(n=Xt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ho(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")Yc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case $r:return yr(n.children,s,o,t);case dc:a=8,s|=8;break;case ai:return e=Xt(12,n,t,s|2),e.elementType=ai,e.lanes=o,e;case ii:return e=Xt(13,n,t,s),e.elementType=ii,e.lanes=o,e;case ci:return e=Xt(19,n,t,s),e.elementType=ci,e.lanes=o,e;case Mf:return sa(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ef:a=10;break e;case _f:a=9;break e;case fc:a=11;break e;case pc:a=14;break e;case On:a=16,r=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=Xt(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function yr(e,t,n,r){return e=Xt(7,e,r,t),e.lanes=n,e}function sa(e,t,n,r){return e=Xt(22,e,r,t),e.elementType=Mf,e.lanes=n,e.stateNode={isHidden:!1},e}function Ya(e,t,n){return e=Xt(6,e,null,t),e.lanes=n,e}function Ka(e,t,n){return t=Xt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qg(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_a(0),this.expirationTimes=_a(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_a(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kc(e,t,n,r,s,o,a,i,c){return e=new Qg(e,t,n,i,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Xt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dc(o),e}function Gg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Or,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function wh(e){if(!e)return er;e=e._reactInternals;e:{if(Cr(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_t(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var n=e.type;if(_t(n))return wp(e,n,t)}return t}function bh(e,t,n,r,s,o,a,i,c){return e=Kc(n,r,!0,e,s,o,a,i,c),e.context=wh(null),n=e.current,r=vt(),s=qn(n),o=Cn(r,s),o.callback=t!=null?t:null,Qn(n,o,s),e.current.lanes=s,hl(e,s,r),Mt(e,r),e}function la(e,t,n,r){var s=t.current,o=vt(),a=qn(s);return n=wh(n),t.context===null?t.context=n:t.pendingContext=n,t=Cn(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Qn(s,t,a),e!==null&&(rn(e,s,a,o),ao(e,s,a)),a}function Ao(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function kd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Qc(e,t){kd(e,t),(e=e.alternate)&&kd(e,t)}function qg(){return null}var kh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}oa.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));la(e,t,null,null)};oa.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sr(function(){la(null,e,null,null)}),t[_n]=null}};function oa(e){this._internalRoot=e}oa.prototype.unstable_scheduleHydration=function(e){if(e){var t=Zf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Fn.length&&t!==0&&t<Fn[n].priority;n++);Fn.splice(n,0,e),n===0&&tp(e)}};function qc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function aa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jd(){}function Jg(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var d=Ao(a);o.call(d)}}var a=bh(t,r,e,0,null,!1,!1,"",jd);return e._reactRootContainer=a,e[_n]=a.current,el(e.nodeType===8?e.parentNode:e),Sr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var d=Ao(c);i.call(d)}}var c=Kc(e,0,!1,null,null,!1,!1,"",jd);return e._reactRootContainer=c,e[_n]=c.current,el(e.nodeType===8?e.parentNode:e),Sr(function(){la(t,c,n,r)}),c}function ia(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var i=s;s=function(){var c=Ao(a);i.call(c)}}la(t,a,e,s)}else a=Jg(n,t,e,s,r);return Ao(a)}qf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Rs(t.pendingLanes);n!==0&&(mc(t,n|1),Mt(t,Ue()),!(we&6)&&(cs=Ue()+500,sr()))}break;case 13:Sr(function(){var r=Mn(e,1);if(r!==null){var s=vt();rn(r,e,1,s)}}),Qc(e,1)}};gc=function(e){if(e.tag===13){var t=Mn(e,134217728);if(t!==null){var n=vt();rn(t,e,134217728,n)}Qc(e,134217728)}};Jf=function(e){if(e.tag===13){var t=qn(e),n=Mn(e,t);if(n!==null){var r=vt();rn(n,e,t,r)}Qc(e,t)}};Zf=function(){return Ce};ep=function(e,t){var n=Ce;try{return Ce=e,t()}finally{Ce=n}};vi=function(e,t,n){switch(t){case"input":if(fi(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Jo(r);if(!s)throw Error(z(90));Df(r),fi(r,s)}}}break;case"textarea":zf(e,n);break;case"select":t=n.value,t!=null&&Gr(e,!!n.multiple,t,!1)}};Ff=Wc;Bf=Sr;var Zg={usingClientEntryPoint:!1,Events:[ml,Ur,Jo,$f,Af,Wc]},Es={findFiberByHostInstance:hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ey={bundleType:Es.bundleType,version:Es.version,rendererPackageName:Es.rendererPackageName,rendererConfig:Es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Wf(e),e===null?null:e.stateNode},findFiberByHostInstance:Es.findFiberByHostInstance||qg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wl.isDisabled&&Wl.supportsFiber)try{Ko=Wl.inject(ey),pn=Wl}catch(e){}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zg;It.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qc(t))throw Error(z(200));return Gg(e,t,null,n)};It.createRoot=function(e,t){if(!qc(e))throw Error(z(299));var n=!1,r="",s=kh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Kc(e,1,!1,null,null,n,!1,r,s),e[_n]=t.current,el(e.nodeType===8?e.parentNode:e),new Gc(t)};It.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=Wf(t),e=e===null?null:e.stateNode,e};It.flushSync=function(e){return Sr(e)};It.hydrate=function(e,t,n){if(!aa(t))throw Error(z(200));return ia(null,e,t,!0,n)};It.hydrateRoot=function(e,t,n){if(!qc(e))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=kh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=bh(t,null,e,1,n!=null?n:null,s,!1,o,a),e[_n]=t.current,el(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new oa(t)};It.render=function(e,t,n){if(!aa(t))throw Error(z(200));return ia(null,e,t,!1,n)};It.unmountComponentAtNode=function(e){if(!aa(e))throw Error(z(40));return e._reactRootContainer?(Sr(function(){ia(null,null,e,!1,function(){e._reactRootContainer=null,e[_n]=null})}),!0):!1};It.unstable_batchedUpdates=Wc;It.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!aa(n))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return ia(e,t,n,!1,r)};It.version="18.3.1-next-f1338f8080-20240426";function jh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jh)}catch(e){console.error(e)}}jh(),jf.exports=It;var Qr=jf.exports,Sd=Qr;li.createRoot=Sd.createRoot,li.hydrateRoot=Sd.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cl.apply(this,arguments)}var Wn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Wn||(Wn={}));const Nd="popstate";function ty(e){e===void 0&&(e={});function t(s,o){let{pathname:a="/",search:i="",hash:c=""}=Er(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Ji("",{pathname:a,search:i,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let a=s.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");i=d===-1?c:c.slice(0,d)}return i+"#"+(typeof o=="string"?o:Sh(o))}function r(s,o){ca(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return ry(t,n,r,e)}function qe(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function ca(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function ny(){return Math.random().toString(36).substr(2,8)}function Cd(e,t){return{usr:e.state,key:e.key,idx:t}}function Ji(e,t,n,r){return n===void 0&&(n=null),cl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Er(t):t,{state:n,key:t&&t.key||r||ny()})}function Sh(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Er(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ry(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,i=Wn.Pop,c=null,d=p();d==null&&(d=0,a.replaceState(cl({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function f(){i=Wn.Pop;let b=p(),g=b==null?null:b-d;d=b,c&&c({action:i,location:y.location,delta:g})}function h(b,g){i=Wn.Push;let m=Ji(y.location,b,g);n&&n(m,b),d=p()+1;let w=Cd(m,d),S=y.createHref(m);try{a.pushState(w,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}o&&c&&c({action:i,location:y.location,delta:1})}function x(b,g){i=Wn.Replace;let m=Ji(y.location,b,g);n&&n(m,b),d=p();let w=Cd(m,d),S=y.createHref(m);a.replaceState(w,"",S),o&&c&&c({action:i,location:y.location,delta:0})}function v(b){let g=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof b=="string"?b:Sh(b);return m=m.replace(/ $/,"%20"),qe(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let y={get action(){return i},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Nd,f),c=b,()=>{s.removeEventListener(Nd,f),c=null}},createHref(b){return t(s,b)},createURL:v,encodeLocation(b){let g=v(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:x,go(b){return a.go(b)}};return y}var Ed;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ed||(Ed={}));function sy(e,t,n){return n===void 0&&(n="/"),ly(e,t,n)}function ly(e,t,n,r){let s=typeof t=="string"?Er(t):t,o=Eh(s.pathname||"/",n);if(o==null)return null;let a=Nh(e);oy(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let d=yy(o);i=xy(a[c],d)}return i}function Nh(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,i)=>{let c={relativePath:i===void 0?o.path||"":i,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(qe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=vr([r,c.relativePath]),p=n.concat(c);o.children&&o.children.length>0&&(qe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Nh(o.children,t,p,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:py(d,o.index),routesMeta:p})};return e.forEach((o,a)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))s(o,a);else for(let c of Ch(o.path))s(o,a,c)}),t}function Ch(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=Ch(r.join("/")),i=[];return i.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function oy(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:hy(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ay=/^:[\w-]+$/,iy=3,cy=2,uy=1,dy=10,fy=-2,_d=e=>e==="*";function py(e,t){let n=e.split("/"),r=n.length;return n.some(_d)&&(r+=fy),t&&(r+=cy),n.filter(s=>!_d(s)).reduce((s,o)=>s+(ay.test(o)?iy:o===""?uy:dy),r)}function hy(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function xy(e,t,n){let{routesMeta:r}=e,s={},o="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],d=i===r.length-1,p=o==="/"?t:t.slice(o.length)||"/",f=my({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),h=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:vr([o,f.pathname]),pathnameBase:Ny(vr([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=vr([o,f.pathnameBase]))}return a}function my(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=gy(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((d,p,f)=>{let{paramName:h,isOptional:x}=p;if(h==="*"){let y=i[f]||"";a=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const v=i[f];return x&&!v?d[h]=void 0:d[h]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:e}}function gy(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ca(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function yy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ca(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Eh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const vy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wy=e=>vy.test(e);function by(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Er(e):e,o;if(n)if(wy(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),ca(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=Md(n.substring(1),"/"):o=Md(n,t)}else o=t;return{pathname:o,search:Cy(r),hash:Ey(s)}}function Md(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Qa(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ky(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function jy(e,t){let n=ky(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Sy(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Er(e):(s=cl({},e),qe(!s.pathname||!s.pathname.includes("?"),Qa("?","pathname","search",s)),qe(!s.pathname||!s.pathname.includes("#"),Qa("#","pathname","hash",s)),qe(!s.search||!s.search.includes("#"),Qa("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,i;if(a==null)i=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}i=f>=0?t[f]:"/"}let c=by(s,i),d=a&&a!=="/"&&a.endsWith("/"),p=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const vr=e=>e.join("/").replace(/\/\/+/g,"/"),Ny=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Cy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ey=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _y(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const _h=["post","put","patch","delete"];new Set(_h);const My=["get",..._h];new Set(My);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ul(){return ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ul.apply(this,arguments)}const Jc=u.createContext(null),Ty=u.createContext(null),ua=u.createContext(null),da=u.createContext(null),_r=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Mh=u.createContext(null);function fa(){return u.useContext(da)!=null}function Zc(){return fa()||qe(!1),u.useContext(da).location}function Th(e){u.useContext(ua).static||u.useLayoutEffect(e)}function Ot(){let{isDataRoute:e}=u.useContext(_r);return e?Hy():Dy()}function Dy(){fa()||qe(!1);let e=u.useContext(Jc),{basename:t,future:n,navigator:r}=u.useContext(ua),{matches:s}=u.useContext(_r),{pathname:o}=Zc(),a=JSON.stringify(jy(s,n.v7_relativeSplatPath)),i=u.useRef(!1);return Th(()=>{i.current=!0}),u.useCallback(function(d,p){if(p===void 0&&(p={}),!i.current)return;if(typeof d=="number"){r.go(d);return}let f=Sy(d,JSON.parse(a),o,p.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:vr([t,f.pathname])),(p.replace?r.replace:r.push)(f,p.state,p)},[t,r,a,o,e])}function Dh(){let{matches:e}=u.useContext(_r),t=e[e.length-1];return t?t.params:{}}function Ry(e,t){return zy(e,t)}function zy(e,t,n,r){fa()||qe(!1);let{navigator:s}=u.useContext(ua),{matches:o}=u.useContext(_r),a=o[o.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Zc(),p;if(t){var f;let b=typeof t=="string"?Er(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||qe(!1),p=b}else p=d;let h=p.pathname||"/",x=h;if(c!=="/"){let b=c.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=sy(e,{pathname:x}),y=$y(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},i,b.params),pathname:vr([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:vr([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,n,r);return t&&y?u.createElement(da.Provider,{value:{location:ul({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Wn.Pop}},y):y}function Py(){let e=Uy(),t=_y(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:s},n):null,null)}const Iy=u.createElement(Py,null);class Ly extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(_r.Provider,{value:this.props.routeContext},u.createElement(Mh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Oy(e){let{routeContext:t,match:n,children:r}=e,s=u.useContext(Jc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(_r.Provider,{value:t},r)}function $y(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let p=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);p>=0||qe(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let f=a[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=p),f.route.id){let{loaderData:h,errors:x}=n,v=f.route.loader&&h[f.route.id]===void 0&&(!x||x[f.route.id]===void 0);if(f.route.lazy||v){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,f,h)=>{let x,v=!1,y=null,b=null;n&&(x=i&&f.route.id?i[f.route.id]:void 0,y=f.route.errorElement||Iy,c&&(d<0&&h===0?(Wy("route-fallback"),v=!0,b=null):d===h&&(v=!0,b=f.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,h+1)),m=()=>{let w;return x?w=y:v?w=b:f.route.Component?w=u.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=p,u.createElement(Oy,{match:f,routeContext:{outlet:p,matches:g,isDataRoute:n!=null},children:w})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?u.createElement(Ly,{location:n.location,revalidation:n.revalidation,component:y,error:x,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var Rh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Rh||{}),zh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(zh||{});function Ay(e){let t=u.useContext(Jc);return t||qe(!1),t}function Fy(e){let t=u.useContext(Ty);return t||qe(!1),t}function By(e){let t=u.useContext(_r);return t||qe(!1),t}function Ph(e){let t=By(),n=t.matches[t.matches.length-1];return n.route.id||qe(!1),n.route.id}function Uy(){var e;let t=u.useContext(Mh),n=Fy(),r=Ph();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Hy(){let{router:e}=Ay(Rh.UseNavigateStable),t=Ph(zh.UseNavigateStable),n=u.useRef(!1);return Th(()=>{n.current=!0}),u.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ul({fromRouteId:t},o)))},[e,t])}const Td={};function Wy(e,t,n){Td[e]||(Td[e]=!0)}function Vy(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function pt(e){qe(!1)}function Xy(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Wn.Pop,navigator:o,static:a=!1,future:i}=e;fa()&&qe(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:o,static:a,future:ul({v7_relativeSplatPath:!1},i)}),[c,i,o,a]);typeof r=="string"&&(r=Er(r));let{pathname:p="/",search:f="",hash:h="",state:x=null,key:v="default"}=r,y=u.useMemo(()=>{let b=Eh(p,c);return b==null?null:{location:{pathname:b,search:f,hash:h,state:x,key:v},navigationType:s}},[c,p,f,h,x,v,s]);return y==null?null:u.createElement(ua.Provider,{value:d},u.createElement(da.Provider,{children:n,value:y}))}function Yy(e){let{children:t,location:n}=e;return Ry(Zi(t),n)}new Promise(()=>{});function Zi(e,t){t===void 0&&(t=[]);let n=[];return u.Children.forEach(e,(r,s)=>{if(!u.isValidElement(r))return;let o=[...t,s];if(r.type===u.Fragment){n.push.apply(n,Zi(r.props.children,o));return}r.type!==pt&&qe(!1),!r.props.index||!r.props.children||qe(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Zi(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Ky="6";try{window.__reactRouterVersion=Ky}catch(e){}const Qy="startTransition",Dd=Wx[Qy];function Gy(e){let{basename:t,children:n,future:r,window:s}=e,o=u.useRef();o.current==null&&(o.current=ty({window:s,v5Compat:!0}));let a=o.current,[i,c]=u.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},p=u.useCallback(f=>{d&&Dd?Dd(()=>c(f)):c(f)},[c,d]);return u.useLayoutEffect(()=>a.listen(p),[a,p]),u.useEffect(()=>Vy(r),[r]),u.createElement(Xy,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}var Rd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Rd||(Rd={}));var zd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(zd||(zd={}));const eu="";async function Pd(){var r,s;const e=localStorage.getItem("whisper_token");if(e)return e;const t=(s=(r=window.Telegram)==null?void 0:r.WebApp)==null?void 0:s.initData;if(t){const a=await(await fetch(`${eu}/api/auth/telegram`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:t})})).json();if(a.success&&a.token)return localStorage.setItem("whisper_token",a.token),a.token}const n=new Error("need_login");throw n.code="NEED_LOGIN",n}async function F(e,t={}){let n=await Pd();const r=`${eu}${e}`,s=a=>fetch(r,{...t,cache:"no-store",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`,...t.headers},body:t.body?JSON.stringify(t.body):void 0});let o=await s(n);if(o.status===401&&(localStorage.removeItem("whisper_token"),n=await Pd(),o=await s(n)),o.status===204)return null;if(!o.ok){const a=await o.json().catch(()=>({}));throw new Error(a.detail||` (${o.status})`)}return o.json()}async function qy(e){const n=await(await fetch(`${eu}/api/auth/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})})).json();if(n.success&&n.token)return localStorage.setItem("whisper_token",n.token),!0;throw new Error(n.detail||"")}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ih=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...i},c)=>u.createElement("svg",{ref:c,...Zy,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Ih("lucide",s),...i},[...a.map(([d,p])=>u.createElement(d,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(e,t)=>{const n=u.forwardRef(({className:r,...s},o)=>u.createElement(ev,{ref:o,iconNode:t,className:Ih(`lucide-${Jy(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=me("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=me("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=me("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=me("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=me("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=me("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=me("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=me("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=me("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=me("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=me("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=me("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=me("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=me("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=me("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=me("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=me("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=me("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=me("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=me("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=me("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=me("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=me("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=me("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=me("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),gv="WhisperMiniDB",yv=1,ds="avatars",Fh=()=>new Promise((e,t)=>{const n=indexedDB.open(gv,yv);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(ds)||r.createObjectStore(ds,{keyPath:"key"})}}),ec=async(e,t)=>{const n=await Fh();return new Promise((r,s)=>{const o=n.transaction([ds],"readwrite");o.objectStore(ds).put({key:e,base64:t}),o.oncomplete=()=>r(),o.onerror=()=>s(o.error)})},ms=async e=>{const t=await Fh();return new Promise((n,r)=>{const o=t.transaction([ds],"readonly").objectStore(ds).get(e);o.onsuccess=()=>{var a;return n(((a=o.result)==null?void 0:a.base64)||null)},o.onerror=()=>r(o.error)})},St={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function Ir({icon:e,label:t,desc:n,disabled:r,onClick:s,badge:o}){const[a,i]=u.useState(!1),c=()=>!r&&i(!0),d=()=>{i(!1),r||s==null||s()};return l.jsxs("button",{className:"flex flex-col items-start rounded-[18px] gap-2 text-left",style:{padding:"16px 14px",background:St.bg,boxShadow:a?"inset 3px 3px 8px rgba(174,176,182,0.5), inset -3px -3px 8px #ffffff":"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff",opacity:r?.4:1,transform:a?"scale(0.97)":"scale(1)",transition:"transform 0.1s, box-shadow 0.1s",cursor:r?"default":"pointer",WebkitTapHighlightColor:"transparent"},disabled:r,onTouchStart:c,onTouchEnd:d,onMouseDown:c,onMouseUp:d,onMouseLeave:()=>i(!1),children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-[12px]",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))"},children:e}),o&&l.jsx("div",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full",style:{background:"#ef4444",border:"2px solid var(--bg)"}})]}),l.jsxs("div",{className:"pl-1",children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:St.text},children:t}),l.jsx("div",{className:"mt-0.5 text-[10px] leading-snug",style:{color:St.textMuted},children:n})]})]})}function Od({children:e}){return l.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-[3px]",style:{color:St.textMuted},children:e})}function vv(){const e=Ot(),[t,n]=u.useState(()=>{try{return JSON.parse(localStorage.getItem("whisper_profile")||"null")}catch(d){return null}}),[r,s]=u.useState(null),[o,a]=u.useState(!1);u.useEffect(()=>{F("/api/user/profile").then(d=>{n(d),localStorage.setItem("whisper_profile",JSON.stringify(d))}).catch(()=>{}),ms("user-avatar").then(d=>{d&&s(d)}).catch(function(){}),F("/api/diary/unread-count").then(d=>{d.count>0&&a(!0)}).catch(()=>{})},[]);const i=(t==null?void 0:t.nickname)||"",c=(t==null?void 0:t.background_url)||"";return l.jsxs("div",{className:"flex flex-col overflow-y-auto",style:{background:St.bg,height:"100%",paddingBottom:16},children:[l.jsxs("div",{className:"flex flex-col px-5",style:{paddingTop:"max(12px, env(safe-area-inset-top))"},children:[l.jsx("h1",{className:"mb-4 text-center text-[17px] font-medium",style:{color:St.textMuted,letterSpacing:"4px"},children:"W H I S P E R"}),l.jsxs("button",{className:"mb-5 flex w-full items-center gap-4 rounded-[20px] p-5 text-left",style:{background:St.bg,boxShadow:"6px 6px 14px rgba(174,176,182,0.5), -6px -6px 14px #ffffff"},onClick:()=>e("/profile"),children:[l.jsx("div",{className:"shrink-0 rounded-full",style:{width:52,height:52,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:St.bg},children:r?l.jsx("img",{src:r,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{style:{fontSize:22},children:""})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"text-[17px] font-bold truncate",style:{color:St.text},children:["@",i]}),l.jsxs("div",{className:"mt-0.5 text-[11px] italic",style:{color:St.textMuted},children:['"',c,'"']})]}),l.jsx(us,{size:16,style:{color:St.textMuted,flexShrink:0}})]}),l.jsx(Od,{children:""}),l.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[l.jsx(Ir,{icon:l.jsx(tu,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/world-books")}),l.jsx(Ir,{icon:l.jsx(nv,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/memories")}),l.jsx(Ir,{icon:l.jsx(Lh,{size:18,color:"white"}),label:"",desc:"Core Blocks",onClick:()=>e("/assistants")}),l.jsx(Ir,{icon:l.jsx(hv,{size:18,color:"white"}),label:"",desc:"API",onClick:()=>e("/settings")})]}),l.jsx(Od,{children:""}),l.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[l.jsx(Ir,{icon:l.jsx(tv,{size:18,color:"white"}),label:"",desc:"",badge:o,onClick:()=>e("/diary")}),l.jsx(Ir,{icon:l.jsx(xv,{size:18,color:"white"}),label:"",desc:"",disabled:!0})]}),l.jsx("button",{className:"flex w-full items-center justify-center rounded-[18px] py-4",style:{background:St.bg,boxShadow:"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff"},onClick:()=>e("/cot"),children:l.jsx(iv,{size:32,fill:St.accent,style:{color:St.accent,animation:"heartbeat 2s ease-in-out infinite"}})})]}),l.jsx("style",{children:`
        @keyframes heartbeat {
          0%, 100% { transform: scale(1); }
          15% { transform: scale(1.15); }
          30% { transform: scale(1); }
          45% { transform: scale(1.1); }
          60% { transform: scale(1); }
        }
      `})]})}function wv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const xa=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function gs(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function ru(e){return"nodeType"in e}function kt(e){var t,n;return e?gs(e)?e:ru(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function su(e){const{Document:t}=kt(e);return e instanceof t}function kl(e){return gs(e)?!1:e instanceof kt(e).HTMLElement}function Bh(e){return e instanceof kt(e).SVGElement}function ys(e){return e?gs(e)?e.document:ru(e)?su(e)?e:kl(e)||Bh(e)?e.ownerDocument:document:document:document}const ln=xa?u.useLayoutEffect:u.useEffect;function ma(e){const t=u.useRef(e);return ln(()=>{t.current=e}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function bv(){const e=u.useRef(null),t=u.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=u.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function dl(e,t){t===void 0&&(t=[e]);const n=u.useRef(e);return ln(()=>{n.current!==e&&(n.current=e)},t),n}function jl(e,t){const n=u.useRef();return u.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Fo(e){const t=ma(e),n=u.useRef(null),r=u.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function Bo(e){const t=u.useRef();return u.useEffect(()=>{t.current=e},[e]),t.current}let Ga={};function Sl(e,t){return u.useMemo(()=>{if(t)return t;const n=Ga[e]==null?0:Ga[e]+1;return Ga[e]=n,e+"-"+n},[e,t])}function Uh(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,a)=>{const i=Object.entries(a);for(const[c,d]of i){const p=o[c];p!=null&&(o[c]=p+e*d)}return o},{...t})}}const ns=Uh(1),Uo=Uh(-1);function kv(e){return"clientX"in e&&"clientY"in e}function ga(e){if(!e)return!1;const{KeyboardEvent:t}=kt(e.target);return t&&e instanceof t}function jv(e){if(!e)return!1;const{TouchEvent:t}=kt(e.target);return t&&e instanceof t}function Ho(e){if(jv(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return kv(e)?{x:e.clientX,y:e.clientY}:null}const Rn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Rn.Translate.toString(e),Rn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),$d="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Sv(e){return e.matches($d)?e:e.querySelector($d)}const Nv={display:"none"};function Cv(e){let{id:t,value:n}=e;return Re.createElement("div",{id:t,style:Nv},n)}function Ev(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Re.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function _v(){const[e,t]=u.useState("");return{announce:u.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Hh=u.createContext(null);function Mv(e){const t=u.useContext(Hh);u.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Tv(){const[e]=u.useState(()=>new Set),t=u.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[u.useCallback(r=>{let{type:s,event:o}=r;e.forEach(a=>{var i;return(i=a[s])==null?void 0:i.call(a,o)})},[e]),t]}const Dv={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Rv={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function zv(e){let{announcements:t=Rv,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=Dv}=e;const{announce:o,announcement:a}=_v(),i=Sl("DndLiveRegion"),[c,d]=u.useState(!1);if(u.useEffect(()=>{d(!0)},[]),Mv(u.useMemo(()=>({onDragStart(f){let{active:h}=f;o(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:x}=f;t.onDragMove&&o(t.onDragMove({active:h,over:x}))},onDragOver(f){let{active:h,over:x}=f;o(t.onDragOver({active:h,over:x}))},onDragEnd(f){let{active:h,over:x}=f;o(t.onDragEnd({active:h,over:x}))},onDragCancel(f){let{active:h,over:x}=f;o(t.onDragCancel({active:h,over:x}))}}),[o,t])),!c)return null;const p=Re.createElement(Re.Fragment,null,Re.createElement(Cv,{id:r,value:s.draggable}),Re.createElement(Ev,{id:i,announcement:a}));return n?Qr.createPortal(p,n):p}var Qe;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Qe||(Qe={}));function Wo(){}function Vo(e,t){return u.useMemo(()=>({sensor:e,options:t!=null?t:{}}),[e,t])}function Wh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const on=Object.freeze({x:0,y:0});function Pv(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Iv(e,t){const n=Ho(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function Lv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Ov(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function $v(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Ad(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Vh=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=Ad(t,t.left,t.top),o=[];for(const a of r){const{id:i}=a,c=n.get(i);if(c){const d=Pv(Ad(c),s);o.push({id:i,data:{droppableContainer:a,value:d}})}}return o.sort(Lv)};function Av(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),a=s-r,i=o-n;if(r<s&&n<o){const c=t.width*t.height,d=e.width*e.height,p=a*i,f=p/(c+d-p);return Number(f.toFixed(4))}return 0}const Fv=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const o of r){const{id:a}=o,i=n.get(a);if(i){const c=Av(i,t);c>0&&s.push({id:a,data:{droppableContainer:o,value:c}})}}return s.sort(Ov)};function Bv(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Xh(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:on}function Uv(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((a,i)=>({...a,top:a.top+e*i.y,bottom:a.bottom+e*i.y,left:a.left+e*i.x,right:a.right+e*i.x}),{...n})}}const Hv=Uv(1);function Yh(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Wv(e,t,n){const r=Yh(t);if(!r)return e;const{scaleX:s,scaleY:o,x:a,y:i}=r,c=e.left-a-(1-s)*parseFloat(n),d=e.top-i-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),p=s?e.width/s:e.width,f=o?e.height/o:e.height;return{width:p,height:f,top:d,right:c+p,bottom:d+f,left:c}}const Vv={ignoreTransform:!1};function vs(e,t){t===void 0&&(t=Vv);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:p}=kt(e).getComputedStyle(e);d&&(n=Wv(n,d,p))}const{top:r,left:s,width:o,height:a,bottom:i,right:c}=n;return{top:r,left:s,width:o,height:a,bottom:i,right:c}}function Fd(e){return vs(e,{ignoreTransform:!0})}function Xv(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Yv(e,t){return t===void 0&&(t=kt(e).getComputedStyle(e)),t.position==="fixed"}function Kv(e,t){t===void 0&&(t=kt(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?n.test(o):!1})}function lu(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(su(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!kl(s)||Bh(s)||n.includes(s))return n;const o=kt(e).getComputedStyle(s);return s!==e&&Kv(s,o)&&n.push(s),Yv(s,o)?n:r(s.parentNode)}return e?r(e):n}function Kh(e){const[t]=lu(e,1);return t!=null?t:null}function qa(e){return!xa||!e?null:gs(e)?e:ru(e)?su(e)||e===ys(e).scrollingElement?window:kl(e)?e:null:null}function Qh(e){return gs(e)?e.scrollX:e.scrollLeft}function Gh(e){return gs(e)?e.scrollY:e.scrollTop}function tc(e){return{x:Qh(e),y:Gh(e)}}var nt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(nt||(nt={}));function qh(e){return!xa||!e?!1:e===document.scrollingElement}function Jh(e){const t={x:0,y:0},n=qh(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:a,isRight:i,maxScroll:r,minScroll:t}}const Qv={x:.2,y:.2};function Gv(e,t,n,r,s){let{top:o,left:a,right:i,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=Qv);const{isTop:d,isBottom:p,isLeft:f,isRight:h}=Jh(e),x={x:0,y:0},v={x:0,y:0},y={height:t.height*s.y,width:t.width*s.x};return!d&&o<=t.top+y.height?(x.y=nt.Backward,v.y=r*Math.abs((t.top+y.height-o)/y.height)):!p&&c>=t.bottom-y.height&&(x.y=nt.Forward,v.y=r*Math.abs((t.bottom-y.height-c)/y.height)),!h&&i>=t.right-y.width?(x.x=nt.Forward,v.x=r*Math.abs((t.right-y.width-i)/y.width)):!f&&a<=t.left+y.width&&(x.x=nt.Backward,v.x=r*Math.abs((t.left+y.width-a)/y.width)),{direction:x,speed:v}}function qv(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:a}=window;return{top:0,left:0,right:o,bottom:a,width:o,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function Zh(e){return e.reduce((t,n)=>ns(t,tc(n)),on)}function Jv(e){return e.reduce((t,n)=>t+Qh(n),0)}function Zv(e){return e.reduce((t,n)=>t+Gh(n),0)}function ex(e,t){if(t===void 0&&(t=vs),!e)return;const{top:n,left:r,bottom:s,right:o}=t(e);Kh(e)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const e1=[["x",["left","right"],Jv],["y",["top","bottom"],Zv]];class ou{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=lu(n),s=Zh(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,a,i]of e1)for(const c of a)Object.defineProperty(this,c,{get:()=>{const d=i(r),p=s[o]-d;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Hs{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function t1(e){const{EventTarget:t}=kt(e);return e instanceof t?e:ys(e)}function Ja(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Ht;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ht||(Ht={}));function Bd(e){e.preventDefault()}function n1(e){e.stopPropagation()}var je;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(je||(je={}));const tx={start:[je.Space,je.Enter],cancel:[je.Esc],end:[je.Space,je.Enter,je.Tab]},r1=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case je.Right:return{...n,x:n.x+25};case je.Left:return{...n,x:n.x-25};case je.Down:return{...n,y:n.y+25};case je.Up:return{...n,y:n.y-25}}};class nx{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Hs(ys(n)),this.windowListeners=new Hs(kt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ht.Resize,this.handleCancel),this.windowListeners.add(Ht.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ht.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&ex(r),n(on)}handleKeyDown(t){if(ga(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=tx,coordinateGetter:a=r1,scrollBehavior:i="smooth"}=s,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:on;this.referenceCoordinates||(this.referenceCoordinates=p);const f=a(t,{active:n,context:r.current,currentCoordinates:p});if(f){const h=Uo(f,p),x={x:0,y:0},{scrollableAncestors:v}=r.current;for(const y of v){const b=t.code,{isTop:g,isRight:m,isLeft:w,isBottom:S,maxScroll:j,minScroll:C}=Jh(y),k=qv(y),E={x:Math.min(b===je.Right?k.right-k.width/2:k.right,Math.max(b===je.Right?k.left:k.left+k.width/2,f.x)),y:Math.min(b===je.Down?k.bottom-k.height/2:k.bottom,Math.max(b===je.Down?k.top:k.top+k.height/2,f.y))},D=b===je.Right&&!m||b===je.Left&&!w,P=b===je.Down&&!S||b===je.Up&&!g;if(D&&E.x!==f.x){const O=y.scrollLeft+h.x,oe=b===je.Right&&O<=j.x||b===je.Left&&O>=C.x;if(oe&&!h.y){y.scrollTo({left:O,behavior:i});return}oe?x.x=y.scrollLeft-O:x.x=b===je.Right?y.scrollLeft-j.x:y.scrollLeft-C.x,x.x&&y.scrollBy({left:-x.x,behavior:i});break}else if(P&&E.y!==f.y){const O=y.scrollTop+h.y,oe=b===je.Down&&O<=j.y||b===je.Up&&O>=C.y;if(oe&&!h.x){y.scrollTo({top:O,behavior:i});return}oe?x.y=y.scrollTop-O:x.y=b===je.Down?y.scrollTop-j.y:y.scrollTop-C.y,x.y&&y.scrollBy({top:-x.y,behavior:i});break}}this.handleMove(t,ns(Uo(f,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}nx.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=tx,onActivation:s}=t,{active:o}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const i=o.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function Ud(e){return!!(e&&"distance"in e)}function Hd(e){return!!(e&&"delay"in e)}class au{constructor(t,n,r){var s;r===void 0&&(r=t1(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:a}=o;this.props=t,this.events=n,this.document=ys(a),this.documentListeners=new Hs(this.document),this.listeners=new Hs(r),this.windowListeners=new Hs(kt(a)),this.initialCoordinates=(s=Ho(o))!=null?s:on,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ht.Resize,this.handleCancel),this.windowListeners.add(Ht.DragStart,Bd),this.windowListeners.add(Ht.VisibilityChange,this.handleCancel),this.windowListeners.add(Ht.ContextMenu,Bd),this.documentListeners.add(Ht.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Hd(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Ud(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ht.Click,n1,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ht.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:a,options:{activationConstraint:i}}=o;if(!s)return;const c=(n=Ho(t))!=null?n:on,d=Uo(s,c);if(!r&&i){if(Ud(i)){if(i.tolerance!=null&&Ja(d,i.tolerance))return this.handleCancel();if(Ja(d,i.distance))return this.handleStart()}if(Hd(i)&&Ja(d,i.tolerance))return this.handleCancel();this.handlePending(i,d);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===je.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const s1={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ya extends au{constructor(t){const{event:n}=t,r=ys(n.target);super(t,s1,r)}}ya.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const l1={move:{name:"mousemove"},end:{name:"mouseup"}};var nc;(function(e){e[e.RightClick=2]="RightClick"})(nc||(nc={}));class o1 extends au{constructor(t){super(t,l1,ys(t.event.target))}}o1.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===nc.RightClick?!1:(r==null||r({event:n}),!0)}}];const Za={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class iu extends au{constructor(t){super(t,Za)}static setup(){return window.addEventListener(Za.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Za.move.name,t)};function t(){}}}iu.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Ws;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ws||(Ws={}));var Xo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Xo||(Xo={}));function a1(e){let{acceleration:t,activator:n=Ws.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:a=5,order:i=Xo.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:p,delta:f,threshold:h}=e;const x=c1({delta:f,disabled:!o}),[v,y]=bv(),b=u.useRef({x:0,y:0}),g=u.useRef({x:0,y:0}),m=u.useMemo(()=>{switch(n){case Ws.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Ws.DraggableRect:return s}},[n,s,c]),w=u.useRef(null),S=u.useCallback(()=>{const C=w.current;if(!C)return;const k=b.current.x*g.current.x,E=b.current.y*g.current.y;C.scrollBy(k,E)},[]),j=u.useMemo(()=>i===Xo.TreeOrder?[...d].reverse():d,[i,d]);u.useEffect(()=>{if(!o||!d.length||!m){y();return}for(const C of j){if((r==null?void 0:r(C))===!1)continue;const k=d.indexOf(C),E=p[k];if(!E)continue;const{direction:D,speed:P}=Gv(C,E,m,t,h);for(const O of["x","y"])x[O][D[O]]||(P[O]=0,D[O]=0);if(P.x>0||P.y>0){y(),w.current=C,v(S,a),b.current=P,g.current=D;return}}b.current={x:0,y:0},g.current={x:0,y:0},y()},[t,S,r,y,o,a,JSON.stringify(m),JSON.stringify(x),v,d,j,p,JSON.stringify(h)])}const i1={x:{[nt.Backward]:!1,[nt.Forward]:!1},y:{[nt.Backward]:!1,[nt.Forward]:!1}};function c1(e){let{delta:t,disabled:n}=e;const r=Bo(t);return jl(s=>{if(n||!r||!s)return i1;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[nt.Backward]:s.x[nt.Backward]||o.x===-1,[nt.Forward]:s.x[nt.Forward]||o.x===1},y:{[nt.Backward]:s.y[nt.Backward]||o.y===-1,[nt.Forward]:s.y[nt.Forward]||o.y===1}}},[n,t,r])}function u1(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return jl(s=>{var o;return t==null?null:(o=r!=null?r:s)!=null?o:null},[r,t])}function d1(e,t){return u.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...o]},[]),[e,t])}var fl;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(fl||(fl={}));var rc;(function(e){e.Optimized="optimized"})(rc||(rc={}));const Wd=new Map;function f1(e,t){let{dragging:n,dependencies:r,config:s}=t;const[o,a]=u.useState(null),{frequency:i,measure:c,strategy:d}=s,p=u.useRef(e),f=b(),h=dl(f),x=u.useCallback(function(g){g===void 0&&(g=[]),!h.current&&a(m=>m===null?g:m.concat(g.filter(w=>!m.includes(w))))},[h]),v=u.useRef(null),y=jl(g=>{if(f&&!n)return Wd;if(!g||g===Wd||p.current!==e||o!=null){const m=new Map;for(let w of e){if(!w)continue;if(o&&o.length>0&&!o.includes(w.id)&&w.rect.current){m.set(w.id,w.rect.current);continue}const S=w.node.current,j=S?new ou(c(S),S):null;w.rect.current=j,j&&m.set(w.id,j)}return m}return g},[e,o,n,f,c]);return u.useEffect(()=>{p.current=e},[e]),u.useEffect(()=>{f||x()},[n,f]),u.useEffect(()=>{o&&o.length>0&&a(null)},[JSON.stringify(o)]),u.useEffect(()=>{f||typeof i!="number"||v.current!==null||(v.current=setTimeout(()=>{x(),v.current=null},i))},[i,f,x,...r]),{droppableRects:y,measureDroppableContainers:x,measuringScheduled:o!=null};function b(){switch(d){case fl.Always:return!1;case fl.BeforeDragging:return n;default:return!n}}}function cu(e,t){return jl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function p1(e,t){return cu(e,t)}function h1(e){let{callback:t,disabled:n}=e;const r=ma(t),s=u.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return u.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function va(e){let{callback:t,disabled:n}=e;const r=ma(t),s=u.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return u.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function x1(e){return new ou(vs(e),e)}function Vd(e,t,n){t===void 0&&(t=x1);const[r,s]=u.useState(null);function o(){s(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c!=null?c:n)!=null?d:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=h1({callback(c){if(e)for(const d of c){const{type:p,target:f}=d;if(p==="childList"&&f instanceof HTMLElement&&f.contains(e)){o();break}}}}),i=va({callback:o});return ln(()=>{o(),e?(i==null||i.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),a==null||a.disconnect())},[e]),r}function m1(e){const t=cu(e);return Xh(e,t)}const Xd=[];function g1(e){const t=u.useRef(e),n=jl(r=>e?r&&r!==Xd&&e&&t.current&&e.parentNode===t.current.parentNode?r:lu(e):Xd,[e]);return u.useEffect(()=>{t.current=e},[e]),n}function y1(e){const[t,n]=u.useState(null),r=u.useRef(e),s=u.useCallback(o=>{const a=qa(o.target);a&&n(i=>i?(i.set(a,tc(a)),new Map(i)):null)},[]);return u.useEffect(()=>{const o=r.current;if(e!==o){a(o);const i=e.map(c=>{const d=qa(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,tc(d)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=e}return()=>{a(e),a(o)};function a(i){i.forEach(c=>{const d=qa(c);d==null||d.removeEventListener("scroll",s)})}},[s,e]),u.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,a)=>ns(o,a),on):Zh(e):on,[e,t])}function Yd(e,t){t===void 0&&(t=[]);const n=u.useRef(null);return u.useEffect(()=>{n.current=null},t),u.useEffect(()=>{const r=e!==on;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Uo(e,n.current):on}function v1(e){u.useEffect(()=>{if(!xa)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function w1(e,t){return u.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=a=>{o(a,t)},n},{}),[e,t])}function rx(e){return u.useMemo(()=>e?Xv(e):null,[e])}const Kd=[];function b1(e,t){t===void 0&&(t=vs);const[n]=e,r=rx(n?kt(n):null),[s,o]=u.useState(Kd);function a(){o(()=>e.length?e.map(c=>qh(c)?r:new ou(t(c),c)):Kd)}const i=va({callback:a});return ln(()=>{i==null||i.disconnect(),a(),e.forEach(c=>i==null?void 0:i.observe(c))},[e]),s}function sx(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return kl(t)?t:e}function k1(e){let{measure:t}=e;const[n,r]=u.useState(null),s=u.useCallback(d=>{for(const{target:p}of d)if(kl(p)){r(f=>{const h=t(p);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),o=va({callback:s}),a=u.useCallback(d=>{const p=sx(d);o==null||o.disconnect(),p&&(o==null||o.observe(p)),r(p?t(p):null)},[t,o]),[i,c]=Fo(a);return u.useMemo(()=>({nodeRef:i,rect:n,setRef:c}),[n,i,c])}const j1=[{sensor:ya,options:{}},{sensor:nx,options:{}}],S1={current:{}},xo={draggable:{measure:Fd},droppable:{measure:Fd,strategy:fl.WhileDragging,frequency:rc.Optimized},dragOverlay:{measure:vs}};class Vs extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const N1={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Vs,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Wo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:xo,measureDroppableContainers:Wo,windowRect:null,measuringScheduled:!1},lx={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Wo,draggableNodes:new Map,over:null,measureDroppableContainers:Wo},Nl=u.createContext(lx),ox=u.createContext(N1);function C1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Vs}}}function E1(e,t){switch(t.type){case Qe.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Qe.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Qe.DragEnd:case Qe.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Qe.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Vs(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Qe.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const a=new Vs(e.droppable.containers);return a.set(n,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case Qe.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new Vs(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function _1(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=u.useContext(Nl),o=Bo(r),a=Bo(n==null?void 0:n.id);return u.useEffect(()=>{if(!t&&!r&&o&&a!=null){if(!ga(o)||document.activeElement===o.target)return;const i=s.get(a);if(!i)return;const{activatorNode:c,node:d}=i;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[c.current,d.current]){if(!p)continue;const f=Sv(p);if(f){f.focus();break}}})}},[r,t,s,a,o]),null}function ax(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...r}),n):n}function M1(e){return u.useMemo(()=>({draggable:{...xo.draggable,...e==null?void 0:e.draggable},droppable:{...xo.droppable,...e==null?void 0:e.droppable},dragOverlay:{...xo.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function T1(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const o=u.useRef(!1),{x:a,y:i}=typeof s=="boolean"?{x:s,y:s}:s;ln(()=>{if(!a&&!i||!t){o.current=!1;return}if(o.current||!r)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const p=n(d),f=Xh(p,r);if(a||(f.x=0),i||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=Kh(d);h&&h.scrollBy({top:f.y,left:f.x})}},[t,a,i,r,n])}const wa=u.createContext({...on,scaleX:1,scaleY:1});var An;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(An||(An={}));const ix=u.memo(function(t){var n,r,s,o;let{id:a,accessibility:i,autoScroll:c=!0,children:d,sensors:p=j1,collisionDetection:f=Fv,measuring:h,modifiers:x,...v}=t;const y=u.useReducer(E1,void 0,C1),[b,g]=y,[m,w]=Tv(),[S,j]=u.useState(An.Uninitialized),C=S===An.Initialized,{draggable:{active:k,nodes:E,translate:D},droppable:{containers:P}}=b,O=k!=null?E.get(k):null,oe=u.useRef({initial:null,translated:null}),V=u.useMemo(()=>{var Ze;return k!=null?{id:k,data:(Ze=O==null?void 0:O.data)!=null?Ze:S1,rect:oe}:null},[k,O]),I=u.useRef(null),[J,he]=u.useState(null),[fe,$]=u.useState(null),Q=dl(v,Object.values(v)),T=Sl("DndDescribedBy",a),te=u.useMemo(()=>P.getEnabled(),[P]),X=M1(h),{droppableRects:be,measureDroppableContainers:ge,measuringScheduled:Je}=f1(te,{dragging:C,dependencies:[D.x,D.y],config:X.droppable}),ye=u1(E,k),Y=u.useMemo(()=>fe?Ho(fe):null,[fe]),ve=or(),ae=p1(ye,X.draggable.measure);T1({activeNode:k!=null?E.get(k):null,config:ve.layoutShiftCompensation,initialRect:ae,measure:X.draggable.measure});const se=Vd(ye,X.draggable.measure,ae),Fe=Vd(ye?ye.parentElement:null),_e=u.useRef({activatorEvent:null,active:null,activeNode:ye,collisionRect:null,collisions:null,droppableRects:be,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ct=P.getNodeFor((n=_e.current.over)==null?void 0:n.id),B=k1({measure:X.dragOverlay.measure}),H=(r=B.nodeRef.current)!=null?r:ye,ce=C?(s=B.rect)!=null?s:se:null,G=!!(B.nodeRef.current&&B.rect),ie=m1(G?null:se),L=rx(H?kt(H):null),ee=g1(C?ct!=null?ct:ye:null),re=b1(ee),de=ax(x,{transform:{x:D.x-ie.x,y:D.y-ie.y,scaleX:1,scaleY:1},activatorEvent:fe,active:V,activeNodeRect:se,containerNodeRect:Fe,draggingNodeRect:ce,over:_e.current.over,overlayNodeRect:B.rect,scrollableAncestors:ee,scrollableAncestorRects:re,windowRect:L}),Ve=Y?ns(Y,D):null,He=y1(ee),xn=Yd(He),lr=Yd(He,[se]),Gt=ns(de,xn),$t=ce?Hv(ce,de):null,At=V&&$t?f({active:V,collisionRect:$t,droppableRects:be,droppableContainers:te,pointerCoordinates:Ve}):null,mn=$v(At,"id"),[st,Pn]=u.useState(null),gn=G?de:ns(de,lr),A=Bv(gn,(o=st==null?void 0:st.rect)!=null?o:null,se),ke=u.useRef(null),ue=u.useCallback((Ze,mt)=>{let{sensor:gt,options:an}=mt;if(I.current==null)return;const ut=E.get(I.current);if(!ut)return;const lt=Ze.nativeEvent,Ft=new gt({active:I.current,activeNode:ut,event:lt,options:an,context:_e,onAbort(Xe){if(!E.get(Xe))return;const{onDragAbort:Bt}=Q.current,qt={id:Xe};Bt==null||Bt(qt),m({type:"onDragAbort",event:qt})},onPending(Xe,cn,Bt,qt){if(!E.get(Xe))return;const{onDragPending:wn}=Q.current,Ut={id:Xe,constraint:cn,initialCoordinates:Bt,offset:qt};wn==null||wn(Ut),m({type:"onDragPending",event:Ut})},onStart(Xe){const cn=I.current;if(cn==null)return;const Bt=E.get(cn);if(!Bt)return;const{onDragStart:qt}=Q.current,ar={activatorEvent:lt,active:{id:cn,data:Bt.data,rect:oe}};Qr.unstable_batchedUpdates(()=>{qt==null||qt(ar),j(An.Initializing),g({type:Qe.DragStart,initialCoordinates:Xe,active:cn}),m({type:"onDragStart",event:ar}),he(ke.current),$(lt)})},onMove(Xe){g({type:Qe.DragMove,coordinates:Xe})},onEnd:vn(Qe.DragEnd),onCancel:vn(Qe.DragCancel)});ke.current=Ft;function vn(Xe){return async function(){const{active:Bt,collisions:qt,over:ar,scrollAdjustedTranslate:wn}=_e.current;let Ut=null;if(Bt&&wn){const{cancelDrop:ir}=Q.current;Ut={activatorEvent:lt,active:Bt,collisions:qt,delta:wn,over:ar},Xe===Qe.DragEnd&&typeof ir=="function"&&await Promise.resolve(ir(Ut))&&(Xe=Qe.DragCancel)}I.current=null,Qr.unstable_batchedUpdates(()=>{g({type:Xe}),j(An.Uninitialized),Pn(null),he(null),$(null),ke.current=null;const ir=Xe===Qe.DragEnd?"onDragEnd":"onDragCancel";if(Ut){const El=Q.current[ir];El==null||El(Ut),m({type:ir,event:Ut})}})}}},[E]),Me=u.useCallback((Ze,mt)=>(gt,an)=>{const ut=gt.nativeEvent,lt=E.get(an);if(I.current!==null||!lt||ut.dndKit||ut.defaultPrevented)return;const Ft={active:lt};Ze(gt,mt.options,Ft)===!0&&(ut.dndKit={capturedBy:mt.sensor},I.current=an,ue(gt,mt))},[E,ue]),Ee=d1(p,Me);v1(p),ln(()=>{se&&S===An.Initializing&&j(An.Initialized)},[se,S]),u.useEffect(()=>{const{onDragMove:Ze}=Q.current,{active:mt,activatorEvent:gt,collisions:an,over:ut}=_e.current;if(!mt||!gt)return;const lt={active:mt,activatorEvent:gt,collisions:an,delta:{x:Gt.x,y:Gt.y},over:ut};Qr.unstable_batchedUpdates(()=>{Ze==null||Ze(lt),m({type:"onDragMove",event:lt})})},[Gt.x,Gt.y]),u.useEffect(()=>{const{active:Ze,activatorEvent:mt,collisions:gt,droppableContainers:an,scrollAdjustedTranslate:ut}=_e.current;if(!Ze||I.current==null||!mt||!ut)return;const{onDragOver:lt}=Q.current,Ft=an.get(mn),vn=Ft&&Ft.rect.current?{id:Ft.id,rect:Ft.rect.current,data:Ft.data,disabled:Ft.disabled}:null,Xe={active:Ze,activatorEvent:mt,collisions:gt,delta:{x:ut.x,y:ut.y},over:vn};Qr.unstable_batchedUpdates(()=>{Pn(vn),lt==null||lt(Xe),m({type:"onDragOver",event:Xe})})},[mn]),ln(()=>{_e.current={activatorEvent:fe,active:V,activeNode:ye,collisionRect:$t,collisions:At,droppableRects:be,draggableNodes:E,draggingNode:H,draggingNodeRect:ce,droppableContainers:P,over:st,scrollableAncestors:ee,scrollAdjustedTranslate:Gt},oe.current={initial:ce,translated:$t}},[V,ye,At,$t,E,H,ce,be,P,st,ee,Gt]),a1({...ve,delta:D,draggingRect:$t,pointerCoordinates:Ve,scrollableAncestors:ee,scrollableAncestorRects:re});const yn=u.useMemo(()=>({active:V,activeNode:ye,activeNodeRect:se,activatorEvent:fe,collisions:At,containerNodeRect:Fe,dragOverlay:B,draggableNodes:E,droppableContainers:P,droppableRects:be,over:st,measureDroppableContainers:ge,scrollableAncestors:ee,scrollableAncestorRects:re,measuringConfiguration:X,measuringScheduled:Je,windowRect:L}),[V,ye,se,fe,At,Fe,B,E,P,be,st,ge,ee,re,X,Je,L]),Cl=u.useMemo(()=>({activatorEvent:fe,activators:Ee,active:V,activeNodeRect:se,ariaDescribedById:{draggable:T},dispatch:g,draggableNodes:E,over:st,measureDroppableContainers:ge}),[fe,Ee,V,se,g,T,E,st,ge]);return Re.createElement(Hh.Provider,{value:w},Re.createElement(Nl.Provider,{value:Cl},Re.createElement(ox.Provider,{value:yn},Re.createElement(wa.Provider,{value:A},d)),Re.createElement(_1,{disabled:(i==null?void 0:i.restoreFocus)===!1})),Re.createElement(zv,{...i,hiddenTextDescribedById:T}));function or(){const Ze=(J==null?void 0:J.autoScrollEnabled)===!1,mt=typeof c=="object"?c.enabled===!1:c===!1,gt=C&&!Ze&&!mt;return typeof c=="object"?{...c,enabled:gt}:{enabled:gt}}}),D1=u.createContext(null),Qd="button",R1="Draggable";function z1(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const o=Sl(R1),{activators:a,activatorEvent:i,active:c,activeNodeRect:d,ariaDescribedById:p,draggableNodes:f,over:h}=u.useContext(Nl),{role:x=Qd,roleDescription:v="draggable",tabIndex:y=0}=s!=null?s:{},b=(c==null?void 0:c.id)===t,g=u.useContext(b?wa:D1),[m,w]=Fo(),[S,j]=Fo(),C=w1(a,t),k=dl(n);ln(()=>(f.set(t,{id:t,key:o,node:m,activatorNode:S,data:k}),()=>{const D=f.get(t);D&&D.key===o&&f.delete(t)}),[f,t]);const E=u.useMemo(()=>({role:x,tabIndex:y,"aria-disabled":r,"aria-pressed":b&&x===Qd?!0:void 0,"aria-roledescription":v,"aria-describedby":p.draggable}),[r,x,y,b,v,p.draggable]);return{active:c,activatorEvent:i,activeNodeRect:d,attributes:E,isDragging:b,listeners:r?void 0:C,node:m,over:h,setNodeRef:w,setActivatorNodeRef:j,transform:g}}function cx(){return u.useContext(ox)}const P1="Droppable",I1={timeout:25};function L1(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const o=Sl(P1),{active:a,dispatch:i,over:c,measureDroppableContainers:d}=u.useContext(Nl),p=u.useRef({disabled:n}),f=u.useRef(!1),h=u.useRef(null),x=u.useRef(null),{disabled:v,updateMeasurementsFor:y,timeout:b}={...I1,...s},g=dl(y!=null?y:r),m=u.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(g.current)?g.current:[g.current]),x.current=null},b)},[b]),w=va({callback:m,disabled:v||!a}),S=u.useCallback((E,D)=>{w&&(D&&(w.unobserve(D),f.current=!1),E&&w.observe(E))},[w]),[j,C]=Fo(S),k=dl(t);return u.useEffect(()=>{!w||!j.current||(w.disconnect(),f.current=!1,w.observe(j.current))},[j,w]),u.useEffect(()=>(i({type:Qe.RegisterDroppable,element:{id:r,key:o,disabled:n,node:j,rect:h,data:k}}),()=>i({type:Qe.UnregisterDroppable,key:o,id:r})),[r]),u.useEffect(()=>{n!==p.current.disabled&&(i({type:Qe.SetDroppableDisabled,id:r,key:o,disabled:n}),p.current.disabled=n)},[r,o,n,i]),{active:a,rect:h,isOver:(c==null?void 0:c.id)===r,node:j,over:c,setNodeRef:C}}function O1(e){let{animation:t,children:n}=e;const[r,s]=u.useState(null),[o,a]=u.useState(null),i=Bo(n);return!n&&!r&&i&&s(i),ln(()=>{if(!o)return;const c=r==null?void 0:r.key,d=r==null?void 0:r.props.id;if(c==null||d==null){s(null);return}Promise.resolve(t(d,o)).then(()=>{s(null)})},[t,r,o]),Re.createElement(Re.Fragment,null,n,r?u.cloneElement(r,{ref:a}):null)}const $1={x:0,y:0,scaleX:1,scaleY:1};function A1(e){let{children:t}=e;return Re.createElement(Nl.Provider,{value:lx},Re.createElement(wa.Provider,{value:$1},t))}const F1={position:"fixed",touchAction:"none"},B1=e=>ga(e)?"transform 250ms ease":void 0,U1=u.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:o,className:a,rect:i,style:c,transform:d,transition:p=B1}=e;if(!i)return null;const f=s?d:{...d,scaleX:1,scaleY:1},h={...F1,width:i.width,height:i.height,top:i.top,left:i.left,transform:Rn.Transform.toString(f),transformOrigin:s&&r?Iv(r,i):void 0,transition:typeof p=="function"?p(r):p,...c};return Re.createElement(n,{className:a,style:h,ref:t},o)}),H1=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:o,className:a}=e;if(o!=null&&o.active)for(const[i,c]of Object.entries(o.active))c!==void 0&&(s[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,c));if(o!=null&&o.dragOverlay)for(const[i,c]of Object.entries(o.dragOverlay))c!==void 0&&r.node.style.setProperty(i,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,d]of Object.entries(s))n.node.style.setProperty(c,d);a!=null&&a.active&&n.node.classList.remove(a.active)}},W1=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Rn.Transform.toString(t)},{transform:Rn.Transform.toString(n)}]},V1={duration:250,easing:"ease",keyframes:W1,sideEffects:H1({styles:{active:{opacity:"0"}}})};function X1(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return ma((o,a)=>{if(t===null)return;const i=n.get(o);if(!i)return;const c=i.node.current;if(!c)return;const d=sx(a);if(!d)return;const{transform:p}=kt(a).getComputedStyle(a),f=Yh(p);if(!f)return;const h=typeof t=="function"?t:Y1(t);return ex(c,s.draggable.measure),h({active:{id:o,data:i.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function Y1(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...V1,...e};return o=>{let{active:a,dragOverlay:i,transform:c,...d}=o;if(!t)return;const p={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},f={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/i.rect.height:1},h={x:c.x-p.x,y:c.y-p.y,...f},x=s({...d,active:a,dragOverlay:i,transform:{initial:c,final:h}}),[v]=x,y=x[x.length-1];if(JSON.stringify(v)===JSON.stringify(y))return;const b=r==null?void 0:r({active:a,dragOverlay:i,...d}),g=i.node.animate(x,{duration:t,easing:n,fill:"forwards"});return new Promise(m=>{g.onfinish=()=>{b==null||b(),m()}})}}let Gd=0;function K1(e){return u.useMemo(()=>{if(e!=null)return Gd++,Gd},[e])}const ux=Re.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:o,modifiers:a,wrapperElement:i="div",className:c,zIndex:d=999}=e;const{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggableNodes:v,droppableContainers:y,dragOverlay:b,over:g,measuringConfiguration:m,scrollableAncestors:w,scrollableAncestorRects:S,windowRect:j}=cx(),C=u.useContext(wa),k=K1(f==null?void 0:f.id),E=ax(a,{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggingNodeRect:b.rect,over:g,overlayNodeRect:b.rect,scrollableAncestors:w,scrollableAncestorRects:S,transform:C,windowRect:j}),D=cu(h),P=X1({config:r,draggableNodes:v,droppableContainers:y,measuringConfiguration:m}),O=D?b.setRef:void 0;return Re.createElement(A1,null,Re.createElement(O1,{animation:P},f&&k?Re.createElement(U1,{key:k,id:f.id,ref:O,as:i,activatorEvent:p,adjustScale:t,className:c,transition:o,rect:D,style:{zIndex:d,...s},transform:E},n):null))});function ba(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Q1(e,t){return e.reduce((n,r,s)=>{const o=t.get(r);return o&&(n[s]=o),n},Array(e.length))}function Vl(e){return e!==null&&e>=0}function G1(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function q1(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const dx=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const o=ba(t,r,n),a=t[s],i=o[s];return!i||!a?null:{x:i.left-a.left,y:i.top-a.top,scaleX:i.width/a.width,scaleY:i.height/a.height}},Xl={scaleX:1,scaleY:1},fx=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:a}=e;const i=(t=o[n])!=null?t:r;if(!i)return null;if(s===n){const d=o[a];return d?{x:0,y:n<a?d.top+d.height-(i.top+i.height):d.top-i.top,...Xl}:null}const c=J1(o,s,n);return s>n&&s<=a?{x:0,y:-i.height-c,...Xl}:s<n&&s>=a?{x:0,y:i.height+c,...Xl}:{x:0,y:0,...Xl}};function J1(e,t,n){const r=e[t],s=e[t-1],o=e[t+1];return r?n<t?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const px="Sortable",hx=Re.createContext({activeIndex:-1,containerId:px,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:dx,disabled:{draggable:!1,droppable:!1}});function xx(e){let{children:t,id:n,items:r,strategy:s=dx,disabled:o=!1}=e;const{active:a,dragOverlay:i,droppableRects:c,over:d,measureDroppableContainers:p}=cx(),f=Sl(px,n),h=i.rect!==null,x=u.useMemo(()=>r.map(C=>typeof C=="object"&&"id"in C?C.id:C),[r]),v=a!=null,y=a?x.indexOf(a.id):-1,b=d?x.indexOf(d.id):-1,g=u.useRef(x),m=!G1(x,g.current),w=b!==-1&&y===-1||m,S=q1(o);ln(()=>{m&&v&&p(x)},[m,x,v,p]),u.useEffect(()=>{g.current=x},[x]);const j=u.useMemo(()=>({activeIndex:y,containerId:f,disabled:S,disableTransforms:w,items:x,overIndex:b,useDragOverlay:h,sortedRects:Q1(x,c),strategy:s}),[y,f,S.draggable,S.droppable,w,x,b,c,h,s]);return Re.createElement(hx.Provider,{value:j},t)}const Z1=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return ba(n,r,s).indexOf(t)},e0=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:o,newIndex:a,previousItems:i,previousContainerId:c,transition:d}=e;return!d||!r||i!==o&&s===a?!1:n?!0:a!==s&&t===c},t0={duration:200,easing:"ease"},mx="transform",n0=Rn.Transition.toString({property:mx,duration:0,easing:"linear"}),r0={roleDescription:"sortable"};function s0(e){let{disabled:t,index:n,node:r,rect:s}=e;const[o,a]=u.useState(null),i=u.useRef(n);return ln(()=>{if(!t&&n!==i.current&&r.current){const c=s.current;if(c){const d=vs(r.current,{ignoreTransform:!0}),p={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(p.x||p.y)&&a(p)}}n!==i.current&&(i.current=n)},[t,n,r,s]),u.useEffect(()=>{o&&a(null)},[o]),o}function gx(e){let{animateLayoutChanges:t=e0,attributes:n,disabled:r,data:s,getNewIndex:o=Z1,id:a,strategy:i,resizeObserverConfig:c,transition:d=t0}=e;const{items:p,containerId:f,activeIndex:h,disabled:x,disableTransforms:v,sortedRects:y,overIndex:b,useDragOverlay:g,strategy:m}=u.useContext(hx),w=l0(r,x),S=p.indexOf(a),j=u.useMemo(()=>({sortable:{containerId:f,index:S,items:p},...s}),[f,s,S,p]),C=u.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:k,node:E,isOver:D,setNodeRef:P}=L1({id:a,data:j,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...c}}),{active:O,activatorEvent:oe,activeNodeRect:V,attributes:I,setNodeRef:J,listeners:he,isDragging:fe,over:$,setActivatorNodeRef:Q,transform:T}=z1({id:a,data:j,attributes:{...r0,...n},disabled:w.draggable}),te=wv(P,J),X=!!O,be=X&&!v&&Vl(h)&&Vl(b),ge=!g&&fe,Je=ge&&be?T:null,ye=i!=null?i:m,Y=be?Je!=null?Je:ye({rects:y,activeNodeRect:V,activeIndex:h,overIndex:b,index:S}):null,ve=Vl(h)&&Vl(b)?o({id:a,items:p,activeIndex:h,overIndex:b}):S,ae=O==null?void 0:O.id,se=u.useRef({activeId:ae,items:p,newIndex:ve,containerId:f}),Fe=p!==se.current.items,_e=t({active:O,containerId:f,isDragging:fe,isSorting:X,id:a,index:S,items:p,newIndex:se.current.newIndex,previousItems:se.current.items,previousContainerId:se.current.containerId,transition:d,wasDragging:se.current.activeId!=null}),ct=s0({disabled:!_e,index:S,node:E,rect:k});return u.useEffect(()=>{X&&se.current.newIndex!==ve&&(se.current.newIndex=ve),f!==se.current.containerId&&(se.current.containerId=f),p!==se.current.items&&(se.current.items=p)},[X,ve,f,p]),u.useEffect(()=>{if(ae===se.current.activeId)return;if(ae!=null&&se.current.activeId==null){se.current.activeId=ae;return}const H=setTimeout(()=>{se.current.activeId=ae},50);return()=>clearTimeout(H)},[ae]),{active:O,activeIndex:h,attributes:I,data:j,rect:k,index:S,newIndex:ve,items:p,isOver:D,isSorting:X,isDragging:fe,listeners:he,node:E,overIndex:b,over:$,setNodeRef:te,setActivatorNodeRef:Q,setDroppableNodeRef:P,setDraggableNodeRef:J,transform:ct!=null?ct:Y,transition:B()};function B(){if(ct||Fe&&se.current.newIndex===S)return n0;if(!(ge&&!ga(oe)||!d)&&(X||_e))return Rn.Transition.toString({...d,property:mx})}}function l0(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}je.Down,je.Right,je.Up,je.Left;const Se={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},qd={always:{label:"",color:"#6b9b6e",bg:"#e0f0e1"},keyword:{label:"",color:"#9b6b6b",bg:"#f0e0e0"},mood:{label:"",color:"#9b7a3b",bg:"#f0ebd8"},message_mode:{label:"",color:"#6b7b9b",bg:"#e0e6f0"}};function yx({activation:e}){const t=qd[e]||qd.always;return l.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:t.color,background:t.bg},children:t.label})}const Yl=80;function o0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),o=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const v="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=v,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Yl);x.style.transition=v,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>o(0),i=p=>{if(p.target.closest(".drag-handle"))return;const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,v=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(v)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(v),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Yl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Yl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?o(-Yl):o(0)};return l.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:l.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[l.jsx(Tr,{size:16,color:"white"}),l.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),l.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function a0({book:e,onTap:t,onDelete:n}){var p;const{attributes:r,listeners:s,setNodeRef:o,transform:a,transition:i,isDragging:c}=gx({id:String(e.id)}),d={transform:Rn.Transform.toString(a),transition:i,opacity:c?0:1};return l.jsx("div",{ref:o,style:d,className:"mb-3",children:l.jsx(o0,{onDelete:()=>n(e),children:l.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Se.bg,userSelect:"none"},children:[l.jsx("div",{...r,...s,className:"drag-handle shrink-0 cursor-grab touch-none px-1",style:{cursor:c?"grabbing":"grab"},children:l.jsx(yl,{size:18,style:{color:Se.textMuted}})}),l.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>t(e),children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:Se.text},children:e.name}),l.jsx(yx,{activation:e.activation})]}),e.folder&&l.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:Se.textMuted},children:e.folder}),e.activation==="keyword"&&((p=e.keywords)==null?void 0:p.length)>0&&l.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[e.keywords.slice(0,3).map((f,h)=>l.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(232,160,191,0.15)",color:Se.accentDark},children:f},h)),e.keywords.length>3&&l.jsxs("span",{className:"text-[10px]",style:{color:Se.textMuted},children:["+",e.keywords.length-3]})]})]}),l.jsx(us,{size:16,style:{color:Se.textMuted,flexShrink:0},onClick:()=>t(e)})]})})})}function i0({folder:e,books:t,onDelete:n,onTap:r,onReorder:s}){const[o,a]=u.useState(!0),[i,c]=u.useState(null),d=Wh(Vo(ya,{activationConstraint:{distance:5}}),Vo(iu,{activationConstraint:{delay:200,tolerance:5}})),p=({active:h,over:x})=>{if(c(null),!x||h.id===x.id)return;const v=t.findIndex(g=>String(g.id)===String(h.id)),y=t.findIndex(g=>String(g.id)===String(x.id));if(v<0||y<0)return;const b=ba(t,v,y);s(e,b)},f=i?t.find(h=>String(h.id)===String(i)):null;return l.jsxs("div",{className:"mb-4",children:[l.jsxs("button",{className:"mb-2 flex w-full items-center gap-2 px-1",onClick:()=>a(!o),children:[o?l.jsx(Mr,{size:14,style:{color:Se.textMuted}}):l.jsx(us,{size:14,style:{color:Se.textMuted}}),l.jsx("span",{className:"text-[12px] font-bold tracking-wide",style:{color:Se.textMuted},children:e||""}),l.jsx("span",{className:"ml-1 rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.12)",color:Se.textMuted},children:t.length})]}),o&&l.jsxs(ix,{sensors:d,collisionDetection:Vh,onDragStart:({active:h})=>c(h.id),onDragEnd:p,children:[l.jsx(xx,{items:t.map(h=>String(h.id)),strategy:fx,children:t.map(h=>l.jsx(a0,{book:h,onTap:r,onDelete:n},h.id))}),l.jsx(ux,{children:f&&l.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Se.bg,boxShadow:"var(--card-shadow)"},children:[l.jsx("div",{className:"shrink-0 px-1",children:l.jsx(yl,{size:18,style:{color:Se.textMuted}})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:Se.text},children:f.name}),l.jsx(yx,{activation:f.activation})]}),f.folder&&l.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:Se.textMuted},children:f.folder})]}),l.jsx(us,{size:16,style:{color:Se.textMuted,flexShrink:0}})]})})]})]})}function c0(){const e=Ot(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[o,a]=u.useState(null),[i,c]=u.useState(null),d=y=>{c(y),setTimeout(()=>c(null),2e3)},p=()=>{s(!0),F("/api/world-books").then(y=>n(y.world_books||[])).catch(()=>d("")).finally(()=>s(!1))};u.useEffect(()=>{p()},[]);const f=async y=>{a(null);try{await F(`/api/world-books/${y.id}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==y.id)),d("")}catch(b){d("")}},h=(y,b)=>{const g=y||"";n(m=>[...m.filter(S=>(S.folder||"")!==g),...b]),F("/api/world-books/reorder",{method:"PUT",body:{ordered_ids:b.map(m=>m.id)}}).catch(()=>d(""))},x={};for(const y of t){const b=y.folder||"";x[b]||(x[b]=[]),x[b].push(y)}const v=Object.keys(x).sort((y,b)=>y===""?1:b===""?-1:y.localeCompare(b));return l.jsxs("div",{className:"flex h-full flex-col",style:{background:Se.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full nm-active",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(Tt,{size:22,style:{color:Se.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:Se.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books/new"),children:l.jsx(xs,{size:20,style:{color:Se.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?l.jsx("div",{className:"flex items-center justify-center py-20",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-t-transparent",style:{borderColor:Se.accent,borderTopColor:"transparent"}})}):t.length===0?l.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[l.jsx(yl,{size:36,style:{color:Se.textMuted,opacity:.5}}),l.jsx("p",{className:"text-[14px]",style:{color:Se.textMuted},children:" + "})]}):v.map(y=>l.jsx(i0,{folder:y,books:x[y],onDelete:b=>a(b),onTap:b=>e(`/world-books/${b.id}`),onReorder:h},y))}),o&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>a(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Se.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:y=>y.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Se.text},children:""}),l.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Se.textMuted},children:["",o.name,""]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Se.bg,boxShadow:"var(--card-shadow-sm)",color:Se.text},onClick:()=>a(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>f(o),children:""})]})]})}),i&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const ne={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function u0({label:e,value:t,onChange:n,placeholder:r}){return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ne.textMuted},children:e}),l.jsx("input",{type:"text",value:t,onChange:s=>n(s.target.value),placeholder:r,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:ne.bg,color:ne.text}})]})}function d0({value:e,onChange:t,folders:n}){const[r,s]=u.useState(!1),o=n.filter(a=>a!==e&&a.toLowerCase().includes(e.toLowerCase()));return l.jsxs("div",{className:"relative mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ne.textMuted},children:""}),l.jsx("input",{type:"text",value:e,onChange:a=>{t(a.target.value),s(!0)},onFocus:()=>s(!0),onBlur:()=>setTimeout(()=>s(!1),150),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:ne.bg,color:ne.text}}),r&&o.length>0&&l.jsx("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[160px] overflow-y-auto rounded-[14px]",style:{background:ne.bg,boxShadow:"var(--card-shadow)"},children:o.map(a=>l.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:ne.text},onMouseDown:()=>{t(a),s(!1)},children:a},a))})]})}function f0({value:e,onChange:t}){const n=[{value:"always",label:""},{value:"keyword",label:""},{value:"mood",label:""},{value:"message_mode",label:""}];return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ne.textMuted},children:""}),l.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:ne.bg},children:n.map(r=>l.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:e===r.value?ne.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?ne.accentDark:ne.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})]})}function p0({selected:e,onChange:t}){const n=[{value:"long",label:""},{value:"short",label:""}];return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ne.textMuted},children:""}),l.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:ne.bg,minHeight:48},children:n.map(r=>{const s=e===r.value;return l.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?ne.accentDark:ne.bg,color:s?"white":ne.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>t(r.value),children:r.label},r.value)})})]})}const h0=[{value:"happy",label:""},{value:"sad",label:""},{value:"angry",label:""},{value:"anxious",label:""},{value:"tired",label:""},{value:"emo",label:""},{value:"flirty",label:""},{value:"proud",label:""},{value:"calm",label:""}];function x0({selected:e,onChange:t}){const n=r=>{e.includes(r)?t(e.filter(s=>s!==r)):t([...e,r])};return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ne.textMuted},children:""}),l.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:ne.bg,minHeight:48},children:h0.map(r=>{const s=e.includes(r.value);return l.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?ne.accentDark:ne.bg,color:s?"white":ne.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>n(r.value),children:r.label},r.value)})})]})}function m0({keywords:e,onChange:t}){const[n,r]=u.useState(""),s=()=>{const o=n.trim();if(!o||e.includes(o)){r("");return}t([...e,o]),r("")};return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:ne.textMuted},children:""}),l.jsxs("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:ne.bg,minHeight:48},children:[e.map(o=>l.jsxs("span",{className:"flex items-center gap-1 rounded-full px-2.5 py-1 text-[12px] font-medium",style:{background:"rgba(232,160,191,0.2)",color:ne.accentDark},children:[o,l.jsx("button",{onClick:()=>t(e.filter(a=>a!==o)),children:l.jsx(bl,{size:10})})]},o)),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"text",value:n,onChange:o=>r(o.target.value),onKeyDown:o=>{(o.key==="Enter"||o.key===",")&&(o.preventDefault(),s())},placeholder:"...",className:"w-24 bg-transparent text-[12px] outline-none",style:{color:ne.text}}),n.trim()&&l.jsx("button",{className:"flex h-5 w-5 items-center justify-center rounded-full",style:{background:ne.accentDark},onClick:s,children:l.jsx(xs,{size:10,color:"white"})})]})]}),l.jsx("p",{className:"mt-1 text-[10px]",style:{color:ne.textMuted},children:" Enter "})]})}function g0({value:e,onChange:t,onClose:n}){return l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:ne.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:ne.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:l.jsx(tr,{size:18,style:{color:ne.accentDark}})})]}),l.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:ne.bg,color:ne.text},placeholder:"..."})]})}function Jd(){const e=Ot(),{id:t}=Dh(),n=!t,[r,s]=u.useState(""),[o,a]=u.useState(""),[i,c]=u.useState("always"),[d,p]=u.useState([]),[f,h]=u.useState("long"),[x,v]=u.useState(""),[y,b]=u.useState(!1),[g,m]=u.useState(!n),[w,S]=u.useState(null),[j,C]=u.useState([]),[k,E]=u.useState(!1),D=u.useRef(null),P=V=>{var he;const I=(he=V.target.files)==null?void 0:he[0];if(!I)return;const J=new FileReader;J.onload=fe=>v(fe.target.result||""),J.readAsText(I),V.target.value=""},O=V=>{S(V),setTimeout(()=>S(null),2e3)};u.useEffect(()=>{F("/api/world-books").then(V=>{const I=V.world_books||[];if(C([...new Set(I.map(J=>J.folder).filter(Boolean))]),!n){const J=I.find(he=>String(he.id)===String(t));J&&(s(J.name),a(J.folder||""),c(J.activation),p(J.keywords||[]),h(J.message_mode||"long"),v(J.content))}}).catch(()=>O("")).finally(()=>m(!1))},[t,n]);const oe=async()=>{if(!r.trim()){O("");return}b(!0);try{const V={name:r.trim(),folder:o.trim()||null,activation:i,keywords:i==="keyword"||i==="mood"?d:[],message_mode:i==="message_mode"?f:null,content:x};n?(await F("/api/world-books",{method:"POST",body:V}),O("")):(await F(`/api/world-books/${t}`,{method:"PUT",body:V}),O(""))}catch(V){O(": "+V.message)}finally{b(!1)}};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:ne.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books",{replace:!0}),children:l.jsx(Tt,{size:22,style:{color:ne.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:ne.text},children:n?"":""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:ne.bg,boxShadow:y?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:oe,disabled:y,children:l.jsx(wl,{size:18,style:{color:ne.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:g?l.jsx("div",{className:"flex h-40 items-center justify-center",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:ne.accent,borderTopColor:"transparent"}})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"rounded-[20px] p-5 mb-4",style:{background:ne.bg,boxShadow:"var(--card-shadow)"},children:[l.jsx(u0,{label:"",value:r,onChange:s,placeholder:""}),l.jsx(d0,{value:o,onChange:a,folders:j}),l.jsx(f0,{value:i,onChange:c}),i==="keyword"&&l.jsx(m0,{keywords:d,onChange:p}),i==="mood"&&l.jsx(x0,{selected:d,onChange:p}),i==="message_mode"&&l.jsx(p0,{selected:f,onChange:h})]}),l.jsxs("div",{className:"rounded-[20px] p-5",style:{background:ne.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[l.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:ne.textMuted},children:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:ne.bg},onClick:()=>{var V;return(V=D.current)==null?void 0:V.click()},title:"",children:l.jsx(pa,{size:13,style:{color:ne.textMuted}})}),l.jsx("input",{ref:D,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:P}),l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:ne.bg},onClick:()=>E(!0),title:"",children:l.jsx(vl,{size:13,style:{color:ne.accentDark}})})]})]}),l.jsx("textarea",{value:x,onChange:V=>v(V.target.value),placeholder:"...",rows:10,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:ne.bg,color:ne.text}})]})]})}),k&&l.jsx(g0,{value:x,onChange:v,onClose:()=>E(!1)}),w&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:w})})]})}const Be={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Kl=80;function y0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),o=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const v="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=v,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Kl);x.style.transition=v,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>o(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,v=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(v)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(v),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Kl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Kl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?o(-Kl):o(0)};return l.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Be.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:l.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[l.jsx(Tr,{size:16,color:"white"}),l.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),l.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function v0({assistant:e,localAvatar:t,onTap:n}){var s;const r=t||null;return l.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Be.bg,userSelect:"none"},onClick:()=>n(e),children:[l.jsx("div",{className:"shrink-0 rounded-full",style:{width:48,height:48,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Be.bg},children:r?l.jsx("img",{src:r,alt:"",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{className:"text-[20px]",style:{color:Be.accentDark},children:((s=e.name)==null?void 0:s[0])||"?"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"truncate text-[15px] font-bold",style:{color:Be.text},children:e.name}),e.created_at&&l.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:Be.textMuted},children:e.created_at.slice(0,10)})]}),l.jsx(us,{size:16,style:{color:Be.textMuted,flexShrink:0}})]})}function w0(){const e=Ot(),[t,n]=u.useState([]),[r,s]=u.useState({}),[o,a]=u.useState(!0),[i,c]=u.useState(null),[d,p]=u.useState(null),f=v=>{p(v),setTimeout(()=>p(null),2e3)},h=()=>{a(!0),F("/api/assistants").then(async v=>{const y=v.assistants||[];n(y);const b={};await Promise.all(y.map(async g=>{const m=await ms(`assistant-avatar-${g.id}`).catch(()=>null);m&&(b[g.id]=m)})),s(b)}).catch(()=>f("")).finally(()=>a(!1))};u.useEffect(()=>{h()},[]);const x=async v=>{c(null);try{await F(`/api/assistants/${v.id}`,{method:"DELETE"}),n(y=>y.filter(b=>b.id!==v.id)),f("")}catch(y){f("")}};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:Be.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Be.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(Tt,{size:22,style:{color:Be.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:Be.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Be.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants/new"),children:l.jsx(xs,{size:20,style:{color:Be.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8 pt-5",children:o?l.jsx("div",{className:"flex items-center justify-center py-20",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Be.accent,borderTopColor:"transparent"}})}):t.length===0?l.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[l.jsx(Lh,{size:36,style:{color:Be.textMuted,opacity:.5}}),l.jsx("p",{className:"text-[14px]",style:{color:Be.textMuted},children:" + "})]}):t.map(v=>l.jsx(y0,{onDelete:()=>c(v),children:l.jsx(v0,{assistant:v,localAvatar:r[v.id],onTap:y=>e(`/assistants/${y.id}`)})},v.id))}),i&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>c(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Be.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:v=>v.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Be.text},children:""}),l.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Be.textMuted},children:["",i.name,""]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Be.bg,boxShadow:"var(--card-shadow-sm)",color:Be.text},onClick:()=>c(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>x(i),children:""})]})]})}),d&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:d})})]})}const M={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Zd({label:e,value:t,onChange:n,placeholder:r,rows:s,onExpand:o,onHistory:a}){const i=u.useRef(null),c=d=>{var h;const p=(h=d.target.files)==null?void 0:h[0];if(!p)return;const f=new FileReader;f.onload=x=>n(x.target.result||""),f.readAsText(p),d.target.value=""};return l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[l.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),l.jsxs("div",{className:"flex items-center gap-2",children:[a&&l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:a,children:l.jsx(Ah,{size:13,style:{color:M.textMuted}})}),l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var d;return(d=i.current)==null?void 0:d.click()},children:l.jsx(pa,{size:13,style:{color:M.textMuted}})}),l.jsx("input",{ref:i,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:c}),l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:o,children:l.jsx(vl,{size:13,style:{color:M.accentDark}})})]})]}),l.jsx("textarea",{value:t,onChange:d=>n(d.target.value),placeholder:r,rows:s||6,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})}function ei({label:e,value:t,onChange:n,presets:r}){const[s,o]=u.useState(!1),a=r.find(i=>i.id===t);return l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text},onClick:()=>o(!s),children:[l.jsx("span",{style:{color:a?M.text:M.textMuted},children:a?a.name:""}),l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:M.textMuted,transform:s?"rotate(180deg)":"none",transition:"transform 0.2s"},children:l.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&l.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:M.bg,boxShadow:"var(--card-shadow)",zIndex:40},children:[l.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:M.textMuted},onClick:()=>{n(null),o(!1)},children:""}),r.map(i=>l.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[14px]",style:{color:M.text},onClick:()=>{n(i.id),o(!1)},children:[l.jsx("span",{children:i.name}),i.id===t&&l.jsx(Dn,{size:14,style:{color:M.accentDark}})]},i.id))]})]})]})}function ti({value:e,onChange:t,onClose:n,title:r,placeholder:s}){return l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:r||""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:l.jsx(tr,{size:18,style:{color:M.accentDark}})})]}),l.jsx("textarea",{autoFocus:!0,value:e,onChange:o=>t(o.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:M.bg,color:M.text},placeholder:s||""})]})}const Ql=80;function b0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),o=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const v="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=v,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Ql);x.style.transition=v,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>o(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,v=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(v)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(v),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Ql,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Ql)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?o(-Ql):o(0)};return l.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:l.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[l.jsx(Tr,{size:16,color:"white"}),l.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),l.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function k0({title:e,message:t,onConfirm:n,onCancel:r}){return l.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:r,children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:M.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:s=>s.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:M.text},children:e||""}),l.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:M.textMuted},children:t}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.text},onClick:r,children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:n,children:""})]})]})})}function j0({items:e,currentContent:t,onApply:n,onClose:r,onDelete:s}){const[o,a]=u.useState("current"),[i,c]=u.useState(null),[d,p]=u.useState(null),f=x=>x?new Date(x).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",h=async()=>{if(o==="current"){r();return}const x=e.find(v=>v.id===o);x&&await n(x.content),r()};return i?l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsxs("span",{className:"text-[15px] font-bold",style:{color:M.text},children:[" ",i.version]}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>c(null),children:l.jsx(tr,{size:18,style:{color:M.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:l.jsx("div",{className:"rounded-[14px] p-4",style:{boxShadow:"var(--inset-shadow)",background:M.bg},children:l.jsx("p",{className:"whitespace-pre-wrap text-[13px] leading-relaxed",style:{color:M.text},children:i.content})})})]}):l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:r,children:l.jsx(tr,{size:18,style:{color:M.accentDark}})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[l.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:o==="current"?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[l.jsx("button",{onClick:()=>a("current"),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:o==="current"?M.accentDark:M.bg,boxShadow:o==="current"?"none":"var(--icon-inset)"},children:o==="current"&&l.jsx(Dn,{size:12,color:"white"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:""}),l.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#2a9d5c",background:"rgba(42,157,92,0.12)"},children:""})]}),l.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:t})]})]}),e.length===0&&l.jsx("p",{className:"py-8 text-center text-[13px]",style:{color:M.textMuted},children:""}),e.map(x=>l.jsx("div",{className:"mb-2",children:l.jsx(b0,{onDelete:()=>p(x.id),children:l.jsxs("div",{className:"flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:o===x.id?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[l.jsx("button",{onClick:()=>a(x.id),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:o===x.id?M.accentDark:M.bg,boxShadow:o===x.id?"none":"var(--icon-inset)"},children:o===x.id&&l.jsx(Dn,{size:12,color:"white"})}),l.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>c(x),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:[" ",x.version]}),l.jsx("span",{className:"text-[10px]",style:{color:M.textMuted},children:f(x.created_at)})]}),l.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:x.content})]})]})})},x.id))]}),l.jsx("div",{className:"shrink-0 p-5",children:l.jsx("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:h,children:""})}),d&&l.jsx(k0,{message:"",onCancel:()=>p(null),onConfirm:()=>{s(d),p(null)}})]})}function vx(e){return e==="always"?"":e==="keyword"?"":e==="message_mode"?"":""}function wx(e){return!e||!Array.isArray(e)?[]:e.map((t,n)=>typeof t=="object"&&t!==null?t:{id:t,position:"after",sort_order:n})}function S0({item:e,book:t,position:n,sectionList:r,onRemove:s,onChangePosition:o}){const{attributes:a,listeners:i,setNodeRef:c,transform:d,transition:p,isDragging:f}=gx({id:String(e.id)}),h={transform:Rn.Transform.toString(d),transition:p,opacity:f?0:1};return t?l.jsxs("div",{ref:c,style:h,className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",children:[l.jsx("div",{...a,...i,className:"cursor-grab touch-none p-1",style:{cursor:f?"grabbing":"grab"},children:l.jsx(yl,{size:14,style:{color:M.textMuted}})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.text},children:t.name}),l.jsxs("div",{className:"text-[10px]",style:{color:M.textMuted},children:[vx(t.activation),t.folder?`  ${t.folder}`:""]})]}),l.jsx("button",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},onClick:()=>o(e.id,n==="before"?"after":"before"),children:n==="before"?"":""}),l.jsx("button",{onClick:()=>s(e.id),children:l.jsx(bl,{size:14,style:{color:M.textMuted}})})]}):null}function N0({allBooks:e,mountedIds:t,onClose:n,onConfirm:r}){const[s,o]=u.useState(new Set(t)),a={};e.forEach(d=>{const p=d.folder||"";a[p]||(a[p]=[]),a[p].push(d)});const i=d=>{o(p=>{const f=new Set(p);return f.has(d)?f.delete(d):f.add(d),f})},c=d=>{const p=d.every(f=>s.has(f.id));o(f=>{const h=new Set(f);return p?d.forEach(x=>h.delete(x.id)):d.forEach(x=>h.add(x.id)),h})};return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-end",style:{background:"rgba(0,0,0,0.4)"},children:l.jsxs("div",{className:"flex w-full flex-col rounded-t-[24px]",style:{background:M.bg,maxHeight:"82vh"},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between p-5 pb-3",children:[l.jsx("h3",{className:"text-[16px] font-bold",style:{color:M.text},children:""}),l.jsx("button",{onClick:n,children:l.jsx(bl,{size:20,style:{color:M.textMuted}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5",children:Object.entries(a).map(([d,p])=>{const f=p.every(h=>s.has(h.id));return l.jsxs("div",{className:"mb-5",children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[l.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:d}),l.jsx("button",{className:"rounded-full px-2.5 py-1 text-[11px] font-semibold",style:{background:f?"rgba(201,98,138,0.15)":"rgba(136,136,160,0.1)",color:f?M.accentDark:M.textMuted},onClick:()=>c(p),children:f?"":""})]}),l.jsx("div",{className:"space-y-2",children:p.map(h=>{const x=s.has(h.id);return l.jsxs("button",{className:"flex w-full items-center gap-3 rounded-[14px] p-3",style:{background:M.bg,boxShadow:x?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>i(h.id),children:[l.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:x?M.accentDark:M.bg,boxShadow:x?"none":"var(--icon-inset)"},children:x&&l.jsx(Dn,{size:12,color:"white"})}),l.jsx("div",{className:"flex-1 min-w-0 text-left",children:l.jsx("div",{className:"truncate text-[13px] font-medium",style:{color:x?M.accentDark:M.text},children:h.name})}),l.jsx("span",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},children:vx(h.activation)})]},h.id)})})]},d)})}),l.jsx("div",{className:"shrink-0 p-5",children:l.jsxs("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>r([...s]),children:[" ",s.size,""]})})]})})}function C0({ruleSetIds:e,onChange:t,allBooks:n}){const[r,s]=u.useState(!1),[o,a]=u.useState(null),i=wx(e),c=i.filter(j=>j.position==="before").sort((j,C)=>j.sort_order-C.sort_order),d=i.filter(j=>j.position==="after").sort((j,C)=>j.sort_order-C.sort_order),p=j=>n.find(C=>C.id===j||C.id===Number(j)),f=Wh(Vo(ya,{activationConstraint:{distance:5}}),Vo(iu,{activationConstraint:{delay:150,tolerance:5}})),h=({active:j})=>a(j.id),x=({active:j,over:C})=>{if(!C)return;const k=i.find(D=>String(D.id)===String(j.id)),E=i.find(D=>String(D.id)===String(C.id));if(!(!k||!E)&&k.position!==E.position){const D=i.map(P=>String(P.id)===String(k.id)?{...P,position:E.position}:P);t(D)}},v=({active:j,over:C})=>{if(a(null),!C||j.id===C.id)return;const k=i.find(I=>String(I.id)===String(j.id)),E=i.find(I=>String(I.id)===String(C.id));if(!k||!E||k.position!==E.position)return;const D=k.position==="before"?[...c]:[...d],P=D.findIndex(I=>String(I.id)===String(j.id)),O=D.findIndex(I=>String(I.id)===String(C.id)),oe=ba(D,P,O).map((I,J)=>({...I,sort_order:J})),V=i.filter(I=>I.position!==k.position);t([...V,...oe])},y=j=>t(i.filter(C=>C.id!==j)),b=(j,C)=>{const E=(C==="before"?c:d).length;t(i.map(D=>D.id===j?{...D,position:C,sort_order:E}:D))},g=j=>{const C=i.map(O=>O.id),E=j.filter(O=>!C.includes(O)).map((O,oe)=>({id:O,position:"after",sort_order:d.length+oe})),D=new Set(C.filter(O=>!j.includes(O))),P=i.filter(O=>!D.has(O.id));t([...P,...E])},m=(j,C)=>j.length===0?l.jsx("div",{className:"py-3 text-center text-[12px]",style:{color:M.textMuted},children:""}):l.jsx(xx,{items:j.map(k=>String(k.id)),strategy:fx,children:l.jsx("div",{className:"rounded-[14px] px-2 pt-1",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:j.map((k,E)=>l.jsxs("div",{children:[E>0&&l.jsx("div",{className:"mx-2",style:{height:1,background:"rgba(0,0,0,0.06)"}}),l.jsx(S0,{item:k,book:p(k.id),position:C,sectionList:j,onRemove:y,onChangePosition:b})]},k.id))})}),w=o?i.find(j=>String(j.id)===String(o)):null,S=w?p(w.id):null;return l.jsxs(ix,{sensors:f,collisionDetection:Vh,onDragStart:h,onDragOver:x,onDragEnd:v,children:[l.jsxs("div",{className:"mb-1",children:[l.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(c,"before")]}),l.jsxs("div",{className:"my-4 flex items-center gap-2",children:[l.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}}),l.jsx("span",{className:"rounded-full px-3 py-1 text-[11px] font-bold",style:{background:"rgba(232,160,191,0.15)",color:M.accentDark},children:"System Prompt"}),l.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(d,"after")]}),l.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-3 text-[14px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.accentDark},onClick:()=>s(!0),children:[l.jsx(xs,{size:16})," "]}),l.jsx(ux,{children:S&&l.jsxs("div",{className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",style:{background:M.bg,boxShadow:"var(--card-shadow)",opacity:.9},children:[l.jsx(yl,{size:14,style:{color:M.textMuted}}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.accentDark},children:S.name})})]})}),r&&l.jsx(N0,{allBooks:n,mountedIds:i.map(j=>j.id),onClose:()=>s(!1),onConfirm:j=>{g(j),s(!1)}})]})}function ef(){const e=Ot(),{id:t}=Dh(),n=!t,[r,s]=u.useState("basic"),[o,a]=u.useState(""),[i,c]=u.useState(""),[d,p]=u.useState(""),[f,h]=u.useState(null),[x,v]=u.useState(null),[y,b]=u.useState(null),[g,m]=u.useState(""),[w,S]=u.useState(""),[j,C]=u.useState(null),[k,E]=u.useState(null),[D,P]=u.useState([]),[O,oe]=u.useState([]),[V,I]=u.useState([]),[J,he]=u.useState(!1),[fe,$]=u.useState(!n),[Q,T]=u.useState(null),[te,X]=u.useState(!1),[be,ge]=u.useState(!1),[Je,ye]=u.useState(!1),[Y,ve]=u.useState(null),[ae,se]=u.useState([]),Fe=u.useRef(null),_e=u.useRef(null),ct=L=>{var de;const ee=(de=L.target.files)==null?void 0:de[0];if(!ee)return;const re=new FileReader;re.onload=Ve=>p(Ve.target.result||""),re.readAsText(ee),L.target.value=""},B=L=>{T(L),setTimeout(()=>T(null),2500)},H=async L=>{const ee=L==="human"?j:k;if(!ee){B("");return}try{const re=await F(`/api/core-blocks/${ee}/history`);se(re.history||[]),ve(L)}catch(re){B("")}};u.useEffect(()=>{(async()=>{const[ee,re]=await Promise.all([F("/api/presets").catch(()=>({presets:[]})),F("/api/world-books").catch(()=>({world_books:[]}))]);if(oe(ee.presets||[]),I(re.world_books||[]),n)$(!1);else try{const[de,Ve]=await Promise.all([F(`/api/assistants/${t}`),F(`/api/core-blocks?assistant_id=${t}`).catch(()=>({blocks:[]}))]);a(de.name||""),ms(`assistant-avatar-${t}`).then(He=>{He&&c(He)}).catch(function(){}),p(de.system_prompt||""),h(de.model_preset_id||null),v(de.summary_model_preset_id||null),b(de.summary_fallback_preset_id||null),P(de.rule_set_ids||[]);for(const He of Ve.blocks||[])He.block_type==="human"?(m(He.content||""),C(He.id)):He.block_type==="persona"&&(S(He.content||""),E(He.id))}catch(de){B(": "+de.message)}finally{$(!1)}})()},[t,n]);const ce=L=>{var de;const ee=(de=L.target.files)==null?void 0:de[0];if(!ee)return;const re=new FileReader;re.onload=async Ve=>{const He=Ve.target.result,xn=`assistant-avatar-${t||"new"}`;try{await ec(xn,He),c(He)}catch(lr){B("")}},re.readAsDataURL(ee),L.target.value=""},G=async()=>{if(!o.trim()){B("");return}he(!0);try{const L={name:o.trim(),avatar_url:i?`assistant-avatar-${t||"new"}`:null,system_prompt:d,model_preset_id:f,summary_model_preset_id:x,summary_fallback_preset_id:y,rule_set_ids:wx(D)};let ee=t;if(n?(ee=(await F("/api/assistants",{method:"POST",body:{name:o.trim()}})).id,i&&(await ec(`assistant-avatar-${ee}`,i),L.avatar_url=`assistant-avatar-${ee}`),await F(`/api/assistants/${ee}`,{method:"PUT",body:L})):await F(`/api/assistants/${t}`,{method:"PUT",body:L}),j)await F(`/api/core-blocks/${j}`,{method:"PUT",body:{content:g}});else if(g.trim()){const re=await F("/api/core-blocks",{method:"POST",body:{block_type:"human",assistant_id:Number(ee),content:g}});C(re.id)}if(k)await F(`/api/core-blocks/${k}`,{method:"PUT",body:{content:w}});else if(w.trim()){const re=await F("/api/core-blocks",{method:"POST",body:{block_type:"persona",assistant_id:Number(ee),content:w}});E(re.id)}B("")}catch(L){B(": "+L.message)}finally{he(!1)}},ie=[{key:"basic",label:""},{key:"about",label:"Core Blocks"},{key:"books",label:""}];return l.jsxs("div",{className:"flex h-full flex-col",style:{background:M.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants",{replace:!0}),children:l.jsx(Tt,{size:22,style:{color:M.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:M.text},children:n?"":""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:J?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:G,disabled:J,children:l.jsx(wl,{size:18,style:{color:M.accentDark}})})]}),l.jsx("div",{className:"flex shrink-0 gap-1 px-5 pb-3",children:ie.map(L=>l.jsx("button",{className:"flex-1 rounded-[12px] py-2.5 text-[13px] font-semibold transition-all",style:{background:r===L.key?M.bg:"transparent",boxShadow:r===L.key?"var(--card-shadow-sm)":"none",color:r===L.key?M.accentDark:M.textMuted},onClick:()=>s(L.key),children:L.label},L.key))}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:fe?l.jsx("div",{className:"flex h-40 items-center justify-center",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:M.accent,borderTopColor:"transparent"}})}):l.jsxs(l.Fragment,{children:[r==="basic"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-4 flex items-center gap-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var L;return(L=Fe.current)==null?void 0:L.click()},children:[l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:M.bg},children:i?l.jsx("img",{src:i,alt:"",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{className:"text-[24px]",style:{color:M.accentDark},children:(o==null?void 0:o[0])||"?"})})}),l.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:M.accentDark},children:l.jsx(Oh,{size:9,color:"white"})})]}),l.jsx("input",{ref:Fe,type:"file",accept:"image/*",className:"hidden",onChange:ce}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),l.jsx("input",{type:"text",value:o,onChange:L=>a(L.target.value),placeholder:"",className:"w-full rounded-[12px] px-4 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})]}),l.jsxs("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[l.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var L;return(L=_e.current)==null?void 0:L.click()},title:"",children:l.jsx(pa,{size:13,style:{color:M.textMuted}})}),l.jsx("input",{ref:_e,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:ct}),l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>X(!0),title:"",children:l.jsx(vl,{size:13,style:{color:M.accentDark}})})]})]}),l.jsx("textarea",{value:d,onChange:L=>p(L.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]}),l.jsxs("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[l.jsx(ei,{label:"",value:f,onChange:h,presets:O}),l.jsx(ei,{label:"",value:x,onChange:v,presets:O}),l.jsx(ei,{label:"",value:y,onChange:b,presets:O})]})]}),r==="about"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:l.jsx(Zd,{label:"human block",value:g,onChange:m,placeholder:" AI ...",rows:7,onExpand:()=>ge(!0),onHistory:()=>H("human")})}),l.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:l.jsx(Zd,{label:"persona block",value:w,onChange:S,placeholder:"AI ...",rows:7,onExpand:()=>ye(!0),onHistory:()=>H("persona")})})]}),r==="books"&&l.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:l.jsx(C0,{ruleSetIds:D,onChange:P,allBooks:V})})]})}),te&&l.jsx(ti,{value:d,onChange:p,onClose:()=>X(!1),title:"",placeholder:"..."}),be&&l.jsx(ti,{value:g,onChange:m,onClose:()=>ge(!1),title:"human block",placeholder:" AI ..."}),Je&&l.jsx(ti,{value:w,onChange:S,onClose:()=>ye(!1),title:"persona block",placeholder:"AI ..."}),Y&&l.jsx(j0,{items:ae,currentContent:Y==="human"?g:w,onApply:async L=>{const ee=Y==="human"?j:k;try{await F(`/api/core-blocks/${ee}`,{method:"PUT",body:{content:L}}),Y==="human"?m(L):S(L),B("")}catch(re){B("")}},onDelete:async L=>{try{await F(`/api/core-blocks/history/${L}`,{method:"DELETE"}),se(ee=>ee.filter(re=>re.id!==L)),B("")}catch(ee){B("")}},onClose:()=>ve(null)}),Q&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:Q})})]})}const le={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function ni({icon:e,label:t,hint:n,onClick:r}){return l.jsxs("button",{className:"flex w-full items-center gap-4 px-4 py-4",onClick:r,children:[l.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:e}),l.jsxs("div",{className:"flex-1 text-left",children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:t}),n&&l.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:n})]}),l.jsx(us,{size:16,style:{color:le.textMuted}})]})}function tf(){return l.jsx("div",{className:"mx-4 h-px",style:{background:"rgba(136,136,160,0.15)"}})}function ur({value:e,onChange:t,min:n,max:r}){const[s,o]=u.useState(String(e));u.useEffect(()=>o(String(e)),[e]);const a=()=>{let i=parseInt(s);isNaN(i)&&(i=n),i=Math.max(n,Math.min(r,i)),o(String(i)),t(i)};return l.jsx("input",{type:"number",value:s,onChange:i=>o(i.target.value),onBlur:a,onKeyDown:i=>i.key==="Enter"&&a(),className:"w-20 rounded-[10px] py-2 text-center text-[14px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:le.bg,color:le.text},min:n,max:r})}function E0(){const e=Ot(),[t,n]=u.useState(()=>parseInt(localStorage.getItem("telegram_buffer_seconds")||"15")),[r,s]=u.useState(8),[o,a]=u.useState(8e3),[i,c]=u.useState(16e3),[d,p]=u.useState(800),[f,h]=u.useState(800),[x,v]=u.useState(2e3),[y,b]=u.useState(!1),[g,m]=u.useState(!1),[w,S]=u.useState(null),j=k=>{S(k),setTimeout(()=>S(null),2e3)};u.useEffect(()=>{F("/api/settings/context-budget").then(k=>{a(k.retain_budget),c(k.trigger_threshold),p(k.summary_budget_longterm),h(k.summary_budget_daily),v(k.summary_budget_recent),b(!0)}).catch(()=>b(!0))},[]),u.useEffect(()=>{localStorage.setItem("telegram_buffer_seconds",String(t)),F("/api/settings/buffer-seconds",{method:"PUT",body:{seconds:t}}).catch(()=>{})},[t]),u.useEffect(()=>{F("/api/settings/short-msg-max").then(k=>s(k.max_count||8)).catch(()=>{})},[]),u.useEffect(()=>{F("/api/settings/short-msg-max",{method:"PUT",body:{max_count:r}}).catch(()=>{})},[r]);const C=async()=>{m(!0);try{await F("/api/settings/context-budget",{method:"PUT",body:{retain_budget:o,trigger_threshold:i,summary_budget_longterm:d,summary_budget_daily:f,summary_budget_recent:x}}),j("")}catch(k){j("")}finally{m(!1)}};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:le.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:le.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(Tt,{size:22,style:{color:le.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:le.text},children:""}),l.jsx("div",{className:"w-10"})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5 space-y-4",children:[l.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[l.jsx(ni,{icon:l.jsx(pv,{size:18,style:{color:le.text}}),label:"API ",hint:"  ",onClick:()=>e("/settings/api")}),l.jsx(tf,{}),l.jsx(ni,{icon:l.jsx(dv,{size:18,style:{color:le.textMuted}}),label:"",hint:"",onClick:()=>j("")})]}),l.jsx("div",{className:"rounded-[20px] overflow-hidden",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:l.jsx(ni,{icon:l.jsx(uv,{size:18,style:{color:le.text}}),label:"",hint:" AI ",onClick:()=>e("/settings/proactive")})}),l.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[l.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:l.jsx(mv,{size:18,style:{color:le.text}})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:" ()"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(ur,{value:t,onChange:n,min:1,max:120}),l.jsx("span",{className:"text-[12px]",style:{color:le.textMuted},children:""})]})]}),l.jsx(tf,{}),l.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[l.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:l.jsx(av,{size:18,style:{color:le.text}})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:""})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(ur,{value:r,onChange:s,min:2,max:20}),l.jsx("span",{className:"text-[12px]",style:{color:le.textMuted},children:""})]})]})]}),l.jsxs("div",{className:"rounded-[20px] p-4",style:{background:le.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:l.jsx(sv,{size:18,style:{color:le.text}})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:""})]})]}),y?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),l.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:" token "})]}),l.jsx(ur,{value:o,onChange:a,min:1e3,max:1e5})]}),l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),l.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),l.jsx(ur,{value:i,onChange:c,min:1e3,max:2e5})]}),l.jsx("div",{className:"h-px mb-4",style:{background:"rgba(136,136,160,0.15)"}}),l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:le.bg},children:l.jsx(tu,{size:18,style:{color:le.text}})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:le.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:le.textMuted},children:""})]})]}),l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),l.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),l.jsx(ur,{value:d,onChange:p,min:200,max:5e3})]}),l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),l.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),l.jsx(ur,{value:f,onChange:h,min:200,max:5e3})]}),l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[13px] font-medium",style:{color:le.text},children:" (tokens)"}),l.jsx("div",{className:"text-[10px]",style:{color:le.textMuted},children:""})]}),l.jsx(ur,{value:x,onChange:v,min:500,max:2e4})]}),l.jsx("button",{className:"w-full rounded-[14px] py-3 text-[14px] font-bold text-white",style:{background:g?"rgba(201,98,138,0.5)":"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"3px 3px 8px rgba(201,98,138,0.3)"},onClick:C,disabled:g,children:g?"...":""})]}):l.jsx("div",{className:"flex justify-center py-4",children:l.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2",style:{borderColor:le.accent,borderTopColor:"transparent"}})})]})]}),w&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:w})})]})}const U={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},_0=["claude-opus-4-6","claude-opus-4-5-20251101","claude-sonnet-4-6","claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001"];function M0(e){try{return new URL(e).hostname}catch(t){return e}}function nf({label:e,value:t,onChange:n,placeholder:r,password:s,disabled:o}){const[a,i]=u.useState(!1);return l.jsxs("div",{className:"mb-4",children:[e&&l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:U.textMuted},children:e}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:s&&!a?"password":"text",value:t,onChange:c=>n(c.target.value),placeholder:r,disabled:o,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none pr-12",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:o?U.textMuted:U.text,opacity:o?.5:1}}),s&&l.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>i(!a),children:a?l.jsx(ov,{size:16,style:{color:U.textMuted}}):l.jsx(lv,{size:16,style:{color:U.textMuted}})})]})]})}function T0({value:e,onChange:t,options:n}){return l.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:U.bg},children:n.map(r=>l.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[12px] font-semibold transition-all",style:{background:e===r.value?U.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?U.accentDark:U.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})}function D0({value:e,onChange:t,options:n,placeholder:r}){const[s,o]=u.useState(!1),a=u.useRef(null);return u.useEffect(()=>{if(!s)return;const i=c=>{a.current&&!a.current.contains(c.target)&&o(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[s]),l.jsxs("div",{className:"relative",ref:a,children:[l.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:e?U.text:U.textMuted},onClick:()=>o(!s),children:[l.jsx("span",{className:"truncate",children:e||r||""}),l.jsx(Mr,{size:16,style:{color:U.textMuted,flexShrink:0,transform:s?"rotate(180deg)":"none"}})]}),s&&l.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:U.bg,boxShadow:"var(--card-shadow)"},children:n.map(i=>l.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[13px]",style:{color:U.text},onClick:()=>{t(i),o(!1)},children:[l.jsx("span",{className:"truncate",children:i}),i===e&&l.jsx(Dn,{size:12,style:{color:U.accentDark,flexShrink:0}})]},i))})]})}function R0({value:e,onChange:t}){const[n,r]=u.useState(!1),s=u.useRef(null);return u.useEffect(()=>{if(!n)return;const o=a=>{s.current&&!s.current.contains(a.target)&&r(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[n]),l.jsxs("div",{className:"relative",ref:s,children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",placeholder:"",value:e,onChange:o=>t(o.target.value),className:"w-full rounded-[14px] px-4 py-3 pr-10 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text}}),l.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>r(!n),children:l.jsx(Mr,{size:16,style:{color:U.textMuted}})})]}),n&&l.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:U.bg,boxShadow:"var(--card-shadow)"},children:_0.map(o=>l.jsx("button",{className:"flex w-full px-4 py-3 text-left text-[13px]",style:{color:U.text},onClick:()=>{t(o),r(!1)},children:o},o))})]})}function ri({value:e,onChange:t,min:n,max:r,step:s}){const[o,a]=u.useState(String(e));u.useEffect(()=>a(String(e)),[e]);const i=()=>{let c=parseFloat(o);isNaN(c)&&(c=n),c=Math.max(n,Math.min(r,c)),c=Math.round(c/s)*s,c=parseFloat(c.toFixed(4)),a(String(c)),t(c)};return l.jsx("input",{type:"number",value:o,onChange:c=>a(c.target.value),onBlur:i,onKeyDown:c=>c.key==="Enter"&&i(),step:s,min:n,max:r,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text}})}function rf({on:e,onToggle:t}){return l.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":U.bg,transition:"background 0.2s"},children:l.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function si({children:e,className:t=""}){return l.jsx("div",{className:`rounded-[20px] p-5 mb-4 space-y-4 ${t}`,style:{background:U.bg,boxShadow:"var(--card-shadow)"},children:e})}function z0(){const e=Ot(),[t,n]=u.useState([]),[r,s]=u.useState([]),[o,a]=u.useState(!0),[i,c]=u.useState(""),[d,p]=u.useState(""),[f,h]=u.useState("api_key"),[x,v]=u.useState(""),[y,b]=u.useState([]),[g,m]=u.useState(!1),[w,S]=u.useState(1),[j,C]=u.useState(!1),[k,E]=u.useState(1),[D,P]=u.useState(!1),[O,oe]=u.useState(4096),[V,I]=u.useState(null),[J,he]=u.useState(0),[fe,$]=u.useState(null),[Q,T]=u.useState(!1),[te,X]=u.useState(!1),[be,ge]=u.useState(""),[Je,ye]=u.useState(!1),[Y,ve]=u.useState(!1),[ae,se]=u.useState(null),[Fe,_e]=u.useState(null),[ct,B]=u.useState(""),H=u.useRef(null),ce=u.useRef(!1),G=u.useRef(null),ie=u.useRef({});ie.current={baseUrl:i,apiKey:d,authType:f,modelName:x,temperature:w,tempEnabled:j,topP:k,topPEnabled:D,maxTokens:O,thinkingBudget:J,editingPreset:V,providers:t};const L=u.useCallback(A=>{$(A),setTimeout(()=>$(null),2500)},[]),ee=u.useCallback(async()=>{try{const[A,ke]=await Promise.all([F("/api/providers"),F("/api/presets")]);n(A.providers||[]),s(ke.presets||[])}catch(A){L(": "+A.message)}finally{a(!1)}},[L]);u.useEffect(()=>{ee()},[ee]);const re=A=>{var ue,Me;I(A),v(A.model_name),C(A.temperature!=null),S((ue=A.temperature)!=null?ue:1),P(A.top_p!=null),E((Me=A.top_p)!=null?Me:1),oe(A.max_tokens),he(A.thinking_budget||0);const ke=t.find(Ee=>Ee.id===A.api_provider_id);ke&&(c(ke.base_url),p(ke.api_key),h(ke.auth_type||"api_key"))},de=()=>{I(null),c(""),p(""),h("api_key"),v(""),S(1),C(!1),E(1),P(!1),oe(4096),he(0),b([])},Ve=async()=>{if(!i.trim()||!d.trim()){L(" API  Key");return}m(!0);try{const A=await fetch(`${i.trim().replace(/\/+$/,"")}/models`,{headers:{Authorization:`Bearer ${d.trim()}`}});if(!A.ok)throw new Error(`HTTP ${A.status}`);const ue=((await A.json()).data||[]).map(Me=>Me.id).sort();b(ue),L(ue.length?` ${ue.length} `:"")}catch(A){L(": "+A.message)}finally{m(!1)}},He=async()=>{var A;if(!i.trim()||!d.trim()||!x.trim()){L(" API Key ");return}T(!0);try{const ke=i.trim().replace(/\/+$/,""),ue={"Content-Type":"application/json",Authorization:`Bearer ${d.trim()}`};f==="oauth_token"&&(ue["anthropic-beta"]="claude-code-20250219,oauth-2025-04-20,fine-grained-tool-streaming-2025-05-14",ue["anthropic-dangerous-direct-browser-access"]="true",ue["x-app"]="cli");const Me=await fetch(`${ke}/chat/completions`,{method:"POST",headers:ue,body:JSON.stringify({model:x.trim(),max_tokens:10,messages:[{role:"user",content:"Hi"}]})});if(!Me.ok){const Ee=await Me.json().catch(()=>({}));throw new Error(((A=Ee.error)==null?void 0:A.message)||`HTTP ${Me.status}`)}L(" ")}catch(ke){L(": "+ke.message)}finally{T(!1)}},xn=async A=>{const ke=ie.current,ue=ke.baseUrl.trim(),Me=ke.apiKey.trim(),Ee=ke.authType,yn=A.find(or=>or.base_url===ue);return yn?((yn.api_key!==Me||yn.auth_type!==Ee)&&await F(`/api/providers/${yn.id}`,{method:"PUT",body:{api_key:Me,auth_type:Ee}}),yn.id):(await F("/api/providers",{method:"POST",body:{name:M0(ue),base_url:ue,api_key:Me,auth_type:Ee}})).id},lr=async(A,ke)=>{const ue=ie.current;if(!ue.baseUrl.trim()||!ue.apiKey.trim()||!ue.modelName.trim()){L("");return}ve(!0);try{const Me=await xn(ue.providers),Ee={name:A,model_name:ue.modelName.trim(),temperature:ue.tempEnabled?ue.temperature:null,top_p:ue.topPEnabled?ue.topP:null,max_tokens:Number(ue.maxTokens)||4096,thinking_budget:Number(ue.thinkingBudget)||0,api_provider_id:Me};ue.editingPreset&&!ke?(await F(`/api/presets/${ue.editingPreset.id}`,{method:"PUT",body:Ee}),L("")):(await F("/api/presets",{method:"POST",body:Ee}),L("")),await ee()}catch(Me){L(": "+Me.message)}finally{ve(!1)}},Gt=()=>{const A=be.trim();A&&(X(!1),lr(A,Je))},$t=()=>{V&&lr(V.name,!1)},At=async()=>{if(ae){try{await F(`/api/presets/${ae.id}`,{method:"DELETE"}),L(""),(V==null?void 0:V.id)===ae.id&&de(),ee()}catch(A){L(": "+A.message)}se(null)}},mn=async()=>{const A=ct.trim();if(!(!A||!Fe)){try{await F(`/api/presets/${Fe.id}`,{method:"PUT",body:{name:A}}),L(""),ee()}catch(ke){L("")}_e(null)}},st=(A,ke)=>{ce.current=!1;const ue=A.touches?A.touches[0]:A;G.current={x:ue.clientX,y:ue.clientY},H.current=setTimeout(()=>{ce.current=!0,se(ke)},600)},Pn=A=>{if(!G.current||!H.current)return;const ke=A.touches?A.touches[0]:A,ue=ke.clientX-G.current.x,Me=ke.clientY-G.current.y;ue*ue+Me*Me>100&&(clearTimeout(H.current),H.current=null)},gn=()=>clearTimeout(H.current);return l.jsxs("div",{className:"flex h-full flex-col",style:{background:U.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:l.jsx(Tt,{size:22,style:{color:U.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:U.text},children:"API "}),l.jsx("div",{className:"w-10"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:o?l.jsx("div",{className:"flex justify-center py-20",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:U.accent,borderTopColor:"transparent"}})}):l.jsxs(l.Fragment,{children:[l.jsxs(si,{children:[l.jsx(nf,{label:"API ",value:i,onChange:c,placeholder:"https://api.openai.com/v1",disabled:f==="oauth_token"}),l.jsx(nf,{label:"API Key",value:d,onChange:p,placeholder:f==="oauth_token"?"sk-ant-oat01-...":"sk-...",password:!0}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:U.textMuted},children:""}),l.jsx(T0,{value:f,onChange:A=>{h(A),A==="oauth_token"&&c("https://api.anthropic.com/v1")},options:[{value:"api_key",label:" API Key"},{value:"oauth_token",label:"Setup Token"}]})]})]}),l.jsxs(si,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:U.textMuted},children:""}),f==="oauth_token"?l.jsx(R0,{value:x,onChange:v}):l.jsx(D0,{value:x,onChange:v,options:y})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:He,disabled:Q,children:[Q?l.jsx(Ld,{size:14,className:"animate-spin"}):null,""]}),l.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text,opacity:f==="oauth_token"?.4:1},onClick:Ve,disabled:g||f==="oauth_token",children:[g?l.jsx(Ld,{size:14,className:"animate-spin"}):l.jsx(ha,{size:14}),""]})]})]}),l.jsxs(si,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:U.text},children:" (0-2)"}),l.jsx("div",{className:"text-[11px]",style:{color:U.textMuted},children:""})]}),l.jsx(rf,{on:j,onToggle:()=>C(!j)})]}),j&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[12px]",style:{color:U.textMuted},children:""}),l.jsx(ri,{value:w,onChange:S,min:0,max:2,step:.1})]}),l.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[14px] font-semibold",style:{color:U.text},children:"Top P (0-1)"}),l.jsx(rf,{on:D,onToggle:()=>P(!D)})]}),D&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[12px]",style:{color:U.textMuted},children:""}),l.jsx(ri,{value:k,onChange:E,min:0,max:1,step:.05})]}),l.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[14px] font-semibold",style:{color:U.text},children:"Max Tokens"}),l.jsx(ri,{value:O,onChange:oe,min:128,max:2e5,step:1})]}),l.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:U.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:U.textMuted},children:"Extended Thinking tokens"})]}),l.jsxs("select",{className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none appearance-none",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text,WebkitAppearance:"none",textAlignLast:"center"},value:J,onChange:A=>he(Number(A.target.value)),children:[l.jsx("option",{value:0,children:""}),l.jsx("option",{value:1024,children:"1024"}),l.jsx("option",{value:2048,children:"2048"}),l.jsx("option",{value:4096,children:"4096"}),l.jsx("option",{value:8192,children:"8192"}),l.jsx("option",{value:16384,children:"16384"})]})]})]}),l.jsxs("div",{className:"mb-4 space-y-3",children:[V?l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:$t,disabled:Y,children:[l.jsx(wl,{size:14}),Y?"...":""]}),l.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:()=>{ye(!0),ge(""),X(!0)},disabled:Y,children:[l.jsx(rv,{size:14}),""]})]}):l.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>{ye(!0),ge(""),X(!0)},disabled:Y,children:[l.jsx(xs,{size:14}),""]}),V&&l.jsx("button",{className:"w-full py-1 text-center text-[12px]",style:{color:U.textMuted},onClick:de,children:""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"mb-3 text-[12px] font-bold uppercase tracking-wide",style:{color:U.textMuted},children:""}),r.length===0?l.jsx("div",{className:"rounded-[20px] py-8 text-center text-[13px]",style:{background:U.bg,boxShadow:"var(--card-shadow)",color:U.textMuted},children:""}):l.jsx("div",{className:"space-y-3",children:r.map(A=>{var ke,ue;return l.jsxs("div",{className:"rounded-[18px] p-4",style:{background:U.bg,boxShadow:(V==null?void 0:V.id)===A.id?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{ce.current||re(A)},onTouchStart:Me=>st(Me,A),onTouchMove:Pn,onTouchEnd:gn,onMouseDown:Me=>st(Me,A),onMouseMove:Pn,onMouseUp:gn,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-[14px] font-bold truncate",style:{color:(V==null?void 0:V.id)===A.id?U.accentDark:U.text},children:A.name}),l.jsx(nu,{size:12,style:{color:U.textMuted,flexShrink:0,marginLeft:8}})]}),l.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:U.textMuted},children:A.model_name}),l.jsxs("div",{className:"mt-1 text-[10px] font-mono",style:{color:U.textMuted},children:["T: ",(ke=A.temperature)!=null?ke:""," | Top-P: ",(ue=A.top_p)!=null?ue:""," | Max: ",A.max_tokens,A.thinking_budget?` | Think: ${A.thinking_budget}`:""]})]},A.id)})})]})]})}),te&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>X(!1),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:U.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:A=>A.stopPropagation(),children:[l.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:U.text},children:""}),l.jsx("input",{type:"text",value:be,onChange:A=>ge(A.target.value),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text},autoFocus:!0,onKeyDown:A=>A.key==="Enter"&&Gt()}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:()=>X(!1),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:be.trim()?"linear-gradient(135deg, var(--accent), var(--accent-dark))":"rgba(201,98,138,0.3)"},onClick:Gt,disabled:!be.trim(),children:""})]})]})}),ae&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>se(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:U.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:A=>A.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:U.text},children:""}),l.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:U.textMuted},children:["",ae.name,""]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:()=>se(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:At,children:""})]})]})}),Fe&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>_e(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:U.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:A=>A.stopPropagation(),children:[l.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:U.text},children:""}),l.jsx("input",{autoFocus:!0,type:"text",value:ct,onChange:A=>B(A.target.value),className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text},onKeyDown:A=>A.key==="Enter"&&mn()}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:()=>_e(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))"},onClick:mn,children:""})]})]})}),fe&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:fe})})]})}const Ye={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Gl({on:e,onToggle:t,disabled:n}){return l.jsx("button",{onClick:()=>!n&&t(),className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":Ye.bg,transition:"background 0.2s",opacity:n?.4:1,cursor:n?"not-allowed":"pointer"},children:l.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function _s({label:e,hint:t,value:n,onChange:r,min:s,max:o,step:a=1,disabled:i}){const[c,d]=u.useState(String(n));u.useEffect(()=>d(String(n)),[n]);const p=()=>{let f=parseFloat(c);isNaN(f)&&(f=s),f=Math.max(s,Math.min(o,f)),f=Math.round(f/a)*a,f=parseFloat(f.toFixed(a<1?1:0)),d(String(f)),r(f)};return l.jsxs("div",{className:"flex items-center justify-between",style:{opacity:i?.4:1,pointerEvents:i?"none":"auto"},children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ye.text},children:e}),t&&l.jsx("div",{className:"text-[11px]",style:{color:Ye.textMuted},children:t})]}),l.jsx("input",{type:"number",value:c,onChange:f=>d(f.target.value),onBlur:p,onKeyDown:f=>f.key==="Enter"&&p(),step:a,min:s,max:o,disabled:i,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ye.bg,color:Ye.text}})]})}function ql({children:e}){return l.jsx("div",{className:"rounded-[20px] p-5 mb-4 space-y-4",style:{background:Ye.bg,boxShadow:"var(--card-shadow)"},children:e})}function Jl(){return l.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}})}function P0(){const e=Ot(),[t,n]=u.useState(!0),[r,s]=u.useState(!1),[o,a]=u.useState({enabled:!1,random_mode:!1,interval:30,min_gap:30,retry_enabled:!0,retry_gap:1.5,max_retries:8,voice_enabled:!1,voice_chance:30}),[i,c]=u.useState(null),d=u.useCallback(v=>{c(v),setTimeout(()=>c(null),2e3)},[]);u.useEffect(()=>{(async()=>{try{const v=await F("/api/settings/proactive");a(v)}catch(v){d(": "+v.message)}finally{n(!1)}})()},[d]);const p=async()=>{s(!0);try{await F("/api/settings/proactive",{method:"PUT",body:o}),d("")}catch(v){d(": "+v.message)}finally{s(!1)}},f=v=>a(y=>({...y,...v})),h=!o.enabled,x=o.random_mode&&o.enabled;return l.jsxs("div",{className:"flex h-full flex-col",style:{background:Ye.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ye.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:l.jsx(Tt,{size:22,style:{color:Ye.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ye.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ye.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:p,disabled:r,children:l.jsx(wl,{size:18,style:{color:Ye.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:t?l.jsx("div",{className:"flex justify-center py-20",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ye.accent,borderTopColor:"transparent"}})}):l.jsxs(l.Fragment,{children:[l.jsxs(ql,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:Ye.text},children:""}),l.jsx(Gl,{on:o.enabled,onToggle:()=>f({enabled:!o.enabled})})]}),o.enabled&&l.jsxs(l.Fragment,{children:[l.jsx(Jl,{}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ye.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:Ye.textMuted},children:""})]}),l.jsx(Gl,{on:o.random_mode,onToggle:()=>f({random_mode:!o.random_mode})})]})]})]}),l.jsxs(ql,{children:[l.jsx(_s,{label:" ()",hint:" (10-60)",value:x?10:o.interval,onChange:v=>f({interval:v}),min:10,max:60,disabled:h||x}),l.jsx(Jl,{}),l.jsx(_s,{label:" ()",hint:" (15-120)",value:o.min_gap,onChange:v=>f({min_gap:v}),min:15,max:120,disabled:h||x})]}),l.jsxs(ql,{children:[l.jsxs("div",{className:"flex items-center justify-between",style:{opacity:h?.4:1,pointerEvents:h?"none":"auto"},children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ye.text},children:""}),l.jsx("div",{className:"text-[11px]",style:{color:Ye.textMuted},children:" = "})]}),l.jsx(Gl,{on:o.retry_enabled,onToggle:()=>f({retry_enabled:!o.retry_enabled}),disabled:h})]}),o.retry_enabled&&!h&&l.jsxs(l.Fragment,{children:[l.jsx(Jl,{}),l.jsx(_s,{label:" ()",hint:"0.5-4.0",value:o.retry_gap,onChange:v=>f({retry_gap:v}),min:.5,max:4,step:.1,disabled:x}),l.jsx(_s,{label:"",hint:"1-15",value:o.max_retries,onChange:v=>f({max_retries:v}),min:1,max:15})]})]}),l.jsxs(ql,{children:[l.jsxs("div",{className:"flex items-center justify-between",style:{opacity:h?.4:1,pointerEvents:h?"none":"auto"},children:[l.jsx("div",{className:"text-[14px] font-semibold",style:{color:Ye.text},children:""}),l.jsx(Gl,{on:o.voice_enabled,onToggle:()=>f({voice_enabled:!o.voice_enabled}),disabled:h})]}),o.voice_enabled&&!h&&l.jsxs(l.Fragment,{children:[l.jsx(Jl,{}),l.jsx(_s,{label:" (%)",hint:"0-100",value:o.voice_chance,onChange:v=>f({voice_chance:v}),min:0,max:100})]})]})]})}),i&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const pe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},ka={thinking:{bg:"rgba(168,130,200,0.12)",color:"#8860c8",label:""},tool_use:{bg:"rgba(232,160,60,0.12)",color:"#b8820a",label:""},tool_result:{bg:"rgba(80,160,200,0.12)",color:"#1a7ab0",label:""},injected_memories:{bg:"rgba(80,180,120,0.12)",color:"#3a8a5f",label:""}},sf=[{key:"short",label:""},{key:"long",label:""}],I0=[{key:"happy",label:""},{key:"sad",label:""},{key:"angry",label:""},{key:"anxious",label:""},{key:"tired",label:""},{key:"emo",label:""},{key:"flirty",label:""},{key:"proud",label:""},{key:"calm",label:""}],lf=300;function uu({block_type:e}){const t=ka[e]||{bg:"rgba(136,136,160,0.1)",color:pe.textMuted,label:e};return l.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:t.bg,color:t.color},children:t.label})}function bx({content:e}){const[t,n]=u.useState(!1),r=e.length>lf;return l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:pe.text},children:r&&!t?e.slice(0,lf)+"...":e}),r&&l.jsx("div",{className:"mt-1.5 flex justify-center",children:l.jsx("button",{className:"rounded-full px-3 py-0.5 text-[11px]",style:{color:pe.accentDark,background:"rgba(232,160,191,0.12)"},onClick:s=>{s.stopPropagation(),n(!t)},children:t?"":""})})]})}function L0({block:e,cacheKey:t,translateCache:n}){const r=n.current.get(t),[s,o]=u.useState(r||null),[a,i]=u.useState(!!r),[c,d]=u.useState(!1),p=ka.thinking,f=async h=>{if(h.stopPropagation(),s){i(!a);return}d(!0);try{const x=await F("/api/cot/translate",{method:"POST",body:{text:e.content}});o(x.translated),i(!0),n.current.set(t,x.translated)}catch(x){console.error("Translation failed:",x),alert("")}finally{d(!1)}};return l.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:p.bg},children:[l.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[l.jsx(uu,{block_type:"thinking"}),l.jsx("span",{className:"flex-1"}),l.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#1a7ab0",background:"rgba(80,160,200,0.15)"},onClick:f,disabled:c,children:c?"...":a?"":""})]}),l.jsx(bx,{content:a&&s?s:e.content})]})}function O0({avatarUrl:e}){return l.jsx("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full overflow-hidden",style:{boxShadow:"var(--icon-inset)",background:pe.bg},children:e?l.jsx("img",{src:e,alt:"",className:"h-full w-full object-cover"}):l.jsx("span",{style:{fontSize:16},children:""})})}function of(e){return e?e>=1e3?`${(e/1e3).toFixed(1)}k`:String(e):"0"}function $0(e){if(!e)return null;const t=e/1e3;return t>=100?`${Math.round(t)}s`:`${t.toFixed(1)}s`}function A0({prompt:e,completion:t,elapsedMs:n,hasToolCalls:r,cacheHit:s}){if(!(e||t||n)&&!r)return null;const a=s?"rgba(220,120,160,0.12)":"rgba(80,160,120,0.12)",i=s?"#d478a0":"#3a8a5f";return l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:a,color:i},children:["",of(e)]}),l.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(160,100,220,0.12)",color:"#8a5abf"},children:["",of(t)]}),n?l.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(200,140,60,0.12)",color:"#b8820a"},children:$0(n)}):null]})}function F0(e){const t=[],n=[],r=[],s=[];for(const a of e)a.block_type==="thinking"?t.push(a):a.block_type==="tool_use"?n.push(a):a.block_type==="tool_result"?r.push(a):s.push(a);const o=[];for(let a=0;a<n.length;a++)o.push(n[a]),a<r.length&&o.push(r[a]);for(let a=n.length;a<r.length;a++)o.push(r[a]);return[...t,...o,...s]}function B0({memories:e}){const[t,n]=u.useState(!1);if(!e||e.length===0)return null;const r=ka.injected_memories;return l.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:r.bg},children:[l.jsxs("button",{className:"flex w-full items-center gap-2",onClick:()=>n(!t),children:[l.jsx(uu,{block_type:"injected_memories"}),l.jsxs("span",{className:"text-[10px] font-semibold",style:{color:r.color},children:["(",e.length,")"]}),t?l.jsx($h,{size:12,style:{color:r.color}}):l.jsx(Mr,{size:12,style:{color:r.color}})]}),t&&l.jsx("div",{className:"mt-2 space-y-1",children:e.map(s=>l.jsxs("p",{className:"text-[11px] leading-relaxed",style:{color:pe.text},children:[l.jsxs("span",{style:{color:r.color,fontWeight:600},children:["#",s.id]})," ",s.content]},s.id))})]})}function U0({item:e,expanded:t,onToggle:n,live:r,avatarUrl:s,translateCache:o}){const a=e.rounds.map(c=>({...c,blocks:F0(c.blocks.filter(d=>d.block_type!=="text"&&d.block_type!=="usage"))})).filter(c=>c.blocks.length>0),i=a.length>0||e.injectedMemories&&e.injectedMemories.length>0||r&&e.textPreview;return l.jsxs("div",{className:"rounded-[18px] overflow-hidden",style:{background:pe.bg},children:[l.jsxs("button",{className:"flex w-full items-center gap-3 p-4",onClick:n,children:[l.jsx(O0,{avatarUrl:s}),l.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r&&l.jsx("span",{className:"inline-block h-3 w-3 animate-spin rounded-full border-[1.5px]",style:{borderColor:pe.accentDark,borderTopColor:"transparent"}}),e.has_tool_calls&&l.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold",style:{background:"rgba(232,160,60,0.15)",color:"#b8820a"},children:""}),l.jsx(A0,{prompt:e.prompt_tokens||0,completion:e.completion_tokens||0,elapsedMs:e.elapsed_ms||0,hasToolCalls:e.has_tool_calls,cacheHit:e.cache_hit}),l.jsx("span",{className:"text-[10px]",style:{color:pe.textMuted},children:e.created_at||""})]}),l.jsx("p",{className:"mt-0.5 truncate text-[13px]",style:{color:pe.text},children:e.preview||"()"})]}),t?l.jsx($h,{size:16,style:{color:pe.textMuted,flexShrink:0}}):l.jsx(Mr,{size:16,style:{color:pe.textMuted,flexShrink:0}})]}),t&&i&&l.jsxs("div",{className:"px-4 pb-4",children:[l.jsx(B0,{memories:e.injectedMemories}),a.map(c=>l.jsxs("div",{className:"mb-3",children:[a.length>1&&l.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[l.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}}),l.jsxs("span",{className:"text-[10px] font-semibold",style:{color:pe.textMuted},children:[" ",c.round_index+1]}),l.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}})]}),c.blocks.map((d,p)=>{if(d.block_type==="thinking")return l.jsx(L0,{block:d,cacheKey:`${e.request_id}:${c.round_index}:${p}`,translateCache:o},p);const f=ka[d.block_type]||{bg:"rgba(136,136,160,0.08)",color:pe.textMuted,label:d.block_type};return l.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:f.bg},children:[l.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[l.jsx(uu,{block_type:d.block_type}),d.tool_name&&l.jsx("span",{className:"text-[10px] font-mono",style:{color:f.color},children:d.tool_name})]}),l.jsx(bx,{content:d.content})]},p)})]},c.round_index)),r&&e.textPreview&&l.jsxs("div",{className:"rounded-[12px] p-3",style:{background:"rgba(232,160,191,0.08)"},children:[l.jsx("div",{className:"mb-1",children:l.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(232,160,191,0.15)",color:pe.accentDark},children:""})}),l.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:pe.text},children:e.textPreview})]})]})]})}function H0(){var Q;const e=Ot(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[o,a]=u.useState(new Set),[i,c]=u.useState(()=>localStorage.getItem("chat_mode")||"long"),[d,p]=u.useState(null),[f,h]=u.useState(!1),[x,v]=u.useState(new Set),[y,b]=u.useState(null),[g,m]=u.useState(null),w=u.useRef(null),S=u.useRef(new Map),[j,C]=u.useState(null),[k,E]=u.useState(!1),D=u.useRef(null),P=u.useRef(new Set),O=u.useRef(!1),oe=u.useRef([]),[V,I]=u.useState(()=>localStorage.getItem("whisper_token")),J=u.useRef(null),he=()=>{s(!0),b(null),O.current=!1,F("/api/cot?limit=100").then(T=>{n(Array.isArray(T)?T:[]),O.current=!0;const te=oe.current;if(oe.current=[],te.length>0&&J.current)for(const X of te)J.current(X)}).catch(T=>{console.error("COT load error:",T),b(T.message||""),O.current=!0}).finally(()=>{s(!1);const T=localStorage.getItem("whisper_token");T&&T!==V&&I(T)})};u.useEffect(()=>{he()},[]),u.useEffect(()=>{F("/api/sessions?limit=1").then(T=>{var X;const te=(X=T.sessions)==null?void 0:X[0];te!=null&&te.assistant_id&&ms(`assistant-avatar-${te.assistant_id}`).then(be=>{be&&m(be)}).catch(()=>{})}).catch(()=>{})},[]),u.useEffect(()=>{F("/api/settings/mood").then(T=>C(T.mood||"calm")).catch(()=>C("calm"))},[]),u.useEffect(()=>{if(!k)return;const T=te=>{D.current&&!D.current.contains(te.target)&&E(!1)};return document.addEventListener("pointerdown",T),()=>document.removeEventListener("pointerdown",T)},[k]),u.useEffect(()=>{if(!V){console.log("[COT WS] No token yet, waiting...");return}const te=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/cot?token=${encodeURIComponent(V)}`;console.log("[COT WS] Connecting to",te);let X,be,ge=!1;const Je=()=>{if(ge)return;X=new WebSocket(te),w.current=X,X.onopen=()=>{console.log("[COT WS] Connected"),h(!0)};const ye=Y=>{var ct;const{type:ve,request_id:ae}=Y,se=B=>{const H=B.findIndex(L=>L.request_id===ae);return H>=0?[B,H]:[[{request_id:ae,created_at:new Date().toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),preview:"...",has_tool_calls:!1,rounds:[],injectedMemories:[],textPreview:""},...B],0]},Fe=(B,H)=>{const ce=B.findIndex(ie=>ie.round_index===H);if(ce>=0)return[B,ce];const G=[...B,{round_index:H,blocks:[]}];return G.sort((ie,L)=>ie.round_index-L.round_index),[G,G.findIndex(ie=>ie.round_index===H)]},_e=B=>{P.current.has(B)||a(H=>{if(H.has(B))return H;const ce=new Set(H);return ce.add(B),ce})};if(ve==="tokens_update"){n(B=>B.map(H=>H.request_id===ae?{...H,prompt_tokens:Y.prompt_tokens||0,completion_tokens:Y.completion_tokens||0,cache_hit:Y.cache_hit||!1}:H));return}if(ve==="replay_snapshot"){console.log("[COT] replay_snapshot",ae,"thinking_rounds:",(ct=Y.rounds)==null?void 0:ct.length,"text_len:",(Y.text_preview||"").length),n(B=>{let[H,ce]=se(B);H=[...H];const G={...H[ce]};if(Y.rounds)for(const ie of Y.rounds){if(!ie.thinking)continue;let[L,ee]=Fe([...G.rounds],ie.round_index);const re={...L[ee],blocks:[...L[ee].blocks]},de=re.blocks.findIndex(Ve=>Ve.block_type==="thinking");de>=0?ie.thinking.length>re.blocks[de].content.length&&(re.blocks[de]={...re.blocks[de],content:ie.thinking}):re.blocks.push({block_type:"thinking",content:ie.thinking,tool_name:null}),L[ee]=re,G.rounds=L}return Y.text_preview&&Y.text_preview.length>(G.textPreview||"").length&&(G.textPreview=Y.text_preview,(!G.preview||G.preview==="...")&&(G.preview=Y.text_preview.slice(0,80))),Y.injected_memories&&(G.injectedMemories=Y.injected_memories),Y.prompt_tokens&&(G.prompt_tokens=Y.prompt_tokens),Y.completion_tokens&&(G.completion_tokens=Y.completion_tokens),Y.cache_hit&&(G.cache_hit=Y.cache_hit),H[ce]=G,H}),v(B=>new Set(B).add(ae)),_e(ae);return}if(ve==="done"){v(B=>{const H=new Set(B);return H.delete(ae),H}),P.current.delete(ae),n(B=>B.map(H=>H.request_id===ae?{...H,prompt_tokens:Y.prompt_tokens||0,completion_tokens:Y.completion_tokens||0,elapsed_ms:Y.elapsed_ms||0,cache_hit:Y.cache_hit||!1,textPreview:""}:H));return}if(ve==="injected_memories"){n(B=>{let[H,ce]=se(B);return H=[...H],H[ce]={...H[ce],injectedMemories:Y.memories||[]},H}),v(B=>new Set(B).add(ae)),_e(ae);return}if(ve==="thinking_delta"){n(B=>{let[H,ce]=se(B);H=[...H];const G={...H[ce]};let[ie,L]=Fe([...G.rounds],Y.round_index);const ee={...ie[L],blocks:[...ie[L].blocks]};let re=-1;for(let de=ee.blocks.length-1;de>=0;de--)if(ee.blocks[de].block_type==="thinking"){re=de;break}return re>=0?ee.blocks[re]={...ee.blocks[re],content:ee.blocks[re].content+Y.content}:ee.blocks.push({block_type:"thinking",content:Y.content,tool_name:null}),ie[L]=ee,G.rounds=ie,H[ce]=G,H}),v(B=>new Set(B).add(ae)),_e(ae);return}if(ve==="text_delta"){n(B=>{let[H,ce]=se(B);H=[...H];const G={...H[ce]};return G.textPreview=(G.textPreview||"")+Y.content,(!G.preview||G.preview==="...")&&(G.preview=G.textPreview.slice(0,80)),H[ce]=G,H}),v(B=>new Set(B).add(ae)),_e(ae);return}if(ve==="tool_use"||ve==="tool_result"){n(B=>{let[H,ce]=se(B);H=[...H];const G={...H[ce]};let[ie,L]=Fe([...G.rounds],Y.round_index);return ie[L]={...ie[L],blocks:[...ie[L].blocks,{block_type:ve,content:Y.content,tool_name:Y.tool_name}]},G.rounds=ie,ve==="tool_use"&&(G.has_tool_calls=!0),H[ce]=G,H}),v(B=>new Set(B).add(ae)),_e(ae);return}if(Y.block_type){const{round_index:B,block_type:H,content:ce,tool_name:G}=Y;n(ie=>{let[L,ee]=se(ie);L=[...L];const re={...L[ee]};let[de,Ve]=Fe([...re.rounds],B);return de[Ve]={...de[Ve],blocks:[...de[Ve].blocks,{block_type:H,content:ce,tool_name:G}]},re.rounds=de,H==="tool_use"&&(re.has_tool_calls=!0),H==="text"&&(!re.preview||re.preview==="...")&&(re.preview=ce.slice(0,80)),L[ee]=re,L}),v(ie=>new Set(ie).add(ae)),_e(ae)}};J.current=ye,X.onmessage=Y=>{try{const ve=JSON.parse(Y.data);if(!O.current){oe.current.push(ve);return}ye(ve)}catch(ve){}},X.onclose=Y=>{console.log("[COT WS] Disconnected, code:",Y.code,"reason:",Y.reason),h(!1),w.current=null,ge||(be=setTimeout(Je,3e3))},X.onerror=Y=>{console.error("[COT WS] Error:",Y),X.close()}};return Je(),()=>{ge=!0,clearTimeout(be),w.current&&(w.current.onclose=null,w.current.close())}},[V]);const fe=u.useRef(!0);u.useEffect(()=>{if(fe.current){fe.current=!1;return}localStorage.setItem("chat_mode",i);const T=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({...T,shortMode:i==="short"})),F("/api/settings/chat-mode",{method:"PUT",body:{mode:i}}).catch(()=>{})},[i]);const $=T=>{C(T),E(!1),F("/api/settings/mood",{method:"PUT",body:{mood:T}}).catch(()=>{})};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:pe.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(Tt,{size:22,style:{color:pe.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:pe.text},children:"COT "}),l.jsxs("div",{className:"flex items-center gap-2",children:[f&&l.jsx("div",{className:"h-2 w-2 rounded-full",style:{background:"#2a9d5c"},title:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:pe.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:he,disabled:r,children:l.jsx(ha,{size:16,style:{color:pe.accentDark},className:r?"animate-spin":""})})]})]}),l.jsx("div",{className:"shrink-0 pb-3",style:{paddingLeft:20,paddingRight:20},children:l.jsxs("div",{className:"flex items-stretch gap-4 justify-center",children:[l.jsxs("div",{className:"relative flex",ref:D,children:[l.jsx("button",{className:"flex w-[42px] shrink-0 items-center justify-center rounded-[14px]",style:{background:pe.bg,boxShadow:"var(--inset-shadow)"},onClick:()=>j&&E(!k),children:j?l.jsx("img",{src:`/miniapp/assets/mood/${j}.png`,alt:j,className:"h-6 w-6",style:{imageRendering:"pixelated"}}):l.jsx("div",{className:"h-6 w-6"})}),k&&l.jsx("div",{className:"absolute left-0 top-12 z-50 rounded-[16px] overflow-hidden",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)",width:174},children:I0.map((T,te)=>{const X=Math.floor(te/3),be=te%3,ge=j===T.key;return l.jsxs("button",{className:"inline-flex flex-col items-center justify-center",style:{width:"calc(100% / 3)",padding:"8px 0 6px",background:ge?"rgba(232,160,191,0.18)":"transparent",boxShadow:[be<2?"inset -1px 0 0 rgba(136,136,160,0.12)":"",X<2?"inset 0 -1px 0 rgba(136,136,160,0.12)":""].filter(Boolean).join(", ")||"none"},onClick:()=>$(T.key),children:[l.jsx("img",{src:`/miniapp/assets/mood/${T.key}.png`,alt:T.label,className:"h-7 w-7",style:{imageRendering:"pixelated",filter:ge?"drop-shadow(0 0 3px #e8a0bf)":"none"}}),l.jsx("span",{className:"text-[10px] mt-0.5",style:{color:ge?"#d48aab":pe.textMuted},children:T.label})]},T.key)})})]}),l.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:pe.bg,width:160},children:sf.map(T=>l.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:i===T.key?pe.bg:"transparent",boxShadow:i===T.key?"var(--card-shadow-sm)":"none",color:i===T.key?pe.accentDark:pe.textMuted},onClick:()=>{T.key!==i&&p(T.key)},children:T.label},T.key))})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8 pt-5",children:r?l.jsx("div",{className:"flex justify-center py-16",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:pe.accent,borderTopColor:"transparent"}})}):y?l.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[l.jsx(Id,{size:36,style:{color:"#ef4444",opacity:.5}}),l.jsx("p",{className:"text-[14px]",style:{color:"#ef4444"},children:y})]}):t.length===0?l.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[l.jsx(Id,{size:36,style:{color:pe.textMuted,opacity:.5}}),l.jsx("p",{className:"text-[14px]",style:{color:pe.textMuted},children:" COT "})]}):t.map(T=>l.jsx("div",{className:"mb-3 rounded-[18px]",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)"},children:l.jsx(U0,{item:T,expanded:o.has(T.request_id),onToggle:()=>{a(te=>{const X=new Set(te);return X.has(T.request_id)?(X.delete(T.request_id),P.current.add(T.request_id)):(X.add(T.request_id),P.current.delete(T.request_id)),X})},live:x.has(T.request_id),avatarUrl:g,translateCache:S})},T.request_id))}),d&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>p(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:pe.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:T=>T.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:pe.text},children:""}),l.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:pe.textMuted},children:["",((Q=sf.find(T=>T.key===d))==null?void 0:Q.label)||d,""]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:pe.bg,boxShadow:"var(--card-shadow-sm)",color:pe.text},onClick:()=>p(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:pe.accentDark,boxShadow:"4px 4px 10px rgba(201,98,138,0.4)"},onClick:()=>{c(d),p(null)},children:""})]})]})})]})}const et={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Zl=80;function W0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),o=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const v="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=v,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Zl);x.style.transition=v,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>o(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,v=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(v)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(v),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Zl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Zl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?o(-Zl):o(0)};return l.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:et.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:l.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[l.jsx(Tr,{size:16,color:"white"}),l.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),l.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function V0({msg:e,roleLabel:t,roleColor:n,fmtTime:r,onDelete:s}){const[o,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);return u.useLayoutEffect(()=>{const p=d.current;p&&!o&&c(p.scrollHeight>p.clientHeight+1)},[e.content,o]),l.jsx(W0,{onDelete:s,children:l.jsxs("div",{className:"rounded-[18px] p-3",style:{background:et.bg},children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:"text-[11px] font-semibold",style:{color:n(e.role)},children:t(e.role)}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[e.summarized&&l.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px] font-semibold",style:{background:"rgba(58,138,95,0.15)",color:"#2d7a4a"},children:""}),l.jsx("span",{className:"text-[10px]",style:{color:et.textMuted},children:r(e.created_at)})]})]}),l.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:o?{color:et.text}:{color:et.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!o),children:e.content}),(i||o)&&l.jsx("div",{className:"mt-1 flex justify-center",children:l.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:"#d48aab",background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!o)},children:o?"":""})})]})})}function X0(){const e=Ot(),[t,n]=u.useState([]),[r,s]=u.useState(null),[o,a]=u.useState(!0),[i,c]=u.useState(!1),d=async()=>{var y;a(!0);try{const g=(y=(await F("/api/sessions?limit=1")).sessions)==null?void 0:y[0];if(!g){a(!1);return}s(g.id);const m=await F(`/api/sessions/${g.id}/messages?limit=50`);n((m.messages||[]).reverse()),c(m.has_more||!1)}catch(b){console.error(b)}a(!1)};u.useEffect(()=>{d()},[]);const p=async y=>{if(r)try{await F(`/api/sessions/${r}/messages/${y}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==y))}catch(b){console.error("Delete failed",b)}},f=async()=>{if(!r||!i||o)return;const y=t[t.length-1];if(y){a(!0);try{const b=await F(`/api/sessions/${r}/messages?limit=50&before_id=${y.id}`),g=(b.messages||[]).reverse();n(m=>[...m,...g]),c(b.has_more||!1)}catch(b){console.error(b)}a(!1)}},h=y=>{if(!y)return"";const b=new Date(y),g=new Date;return b.toDateString()===g.toDateString()?b.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):b.toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})},x=y=>y==="user"?"":y==="assistant"?"AI":"",v=y=>y==="user"?et.accentDark:y==="assistant"?"#3a9b5c":et.textMuted;return l.jsxs("div",{className:"flex h-full flex-col",style:{background:et.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:et.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(Tt,{size:22,style:{color:et.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:et.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:et.bg,boxShadow:o?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:d,disabled:o,children:l.jsx(ha,{size:16,style:{color:et.accentDark},className:o?"animate-spin":""})})]}),l.jsx("div",{className:"shrink-0 px-5 pb-2",children:l.jsx("p",{className:"text-[11px]",style:{color:et.textMuted},children:""})}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:o&&t.length===0?l.jsx("div",{className:"flex justify-center py-16",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:et.accent,borderTopColor:"transparent"}})}):t.length===0?l.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:et.textMuted},children:""}):l.jsxs(l.Fragment,{children:[t.map(y=>l.jsx(V0,{msg:y,roleLabel:x,roleColor:v,fmtTime:h,onDelete:()=>p(y.id)},y.id)),i&&l.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:et.bg,boxShadow:"var(--card-shadow-sm)",color:et.accentDark},onClick:f,disabled:o,children:o?"...":""})]})})]})}const _={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Y0=[{key:"memories",label:""},{key:"summaries",label:""},{key:"messages",label:""}],af={identity:{color:"#7b5ea7",bg:"#ede4f7"},relationship:{color:"#c26a8a",bg:"#f7e0ea"},bond:{color:"#d48aab",bg:"#fce8f0"},conflict:{color:"#b5454a",bg:"#f5dede"},fact:{color:"#4a8ab5",bg:"#deedf5"},preference:{color:"#9b7a3b",bg:"#f0ebd8"},health:{color:"#4a9b6e",bg:"#ddf0e5"},task:{color:"#6b7b9b",bg:"#e0e6f0"},ephemeral:{color:"#9b9b9b",bg:"#ececec"},other:{color:"#8a7a6a",bg:"#efe8df"}},kx=[{value:"",label:""},{value:"identity",label:"identity"},{value:"relationship",label:"relationship"},{value:"bond",label:"bond"},{value:"conflict",label:"conflict"},{value:"fact",label:"fact"},{value:"preference",label:"preference"},{value:"health",label:"health"},{value:"task",label:"task"},{value:"ephemeral",label:"ephemeral"},{value:"other",label:"other"}],K0=[{value:"",label:""},{value:"sad",label:"sad"},{value:"angry",label:"angry"},{value:"anxious",label:"anxious"},{value:"tired",label:"tired"},{value:"emo",label:"emo"},{value:"happy",label:"happy"},{value:"flirty",label:"flirty"},{value:"proud",label:"proud"},{value:"calm",label:"calm"}],Q0=[{value:"",label:""},{value:"user",label:""},{value:"assistant",label:""},{value:"system",label:""}];function pr(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),o=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?o:`${t.getMonth()+1}/${t.getDate()} ${o}`}function du({text:e,keyword:t}){if(!t||!e)return l.jsx(l.Fragment,{children:e});const n=e.toLowerCase(),r=t.toLowerCase(),s=[];let o=0,a=n.indexOf(r,o);for(;a!==-1;)a>o&&s.push(l.jsx("span",{children:e.slice(o,a)},o)),s.push(l.jsx("span",{style:{color:_.accentDark,fontWeight:600},children:e.slice(a,a+r.length)},`h${a}`)),o=a+r.length,a=n.indexOf(r,o);return o<e.length&&s.push(l.jsx("span",{children:e.slice(o)},o)),l.jsx(l.Fragment,{children:s})}function jx({selected:e}){return l.jsx("div",{className:"flex h-5 w-5 shrink-0 items-center justify-center rounded-full",style:e?{background:_.accentDark,boxShadow:"0 2px 6px rgba(201,98,138,0.3)"}:{background:_.bg,boxShadow:"var(--inset-shadow)"},children:e&&l.jsx(Dn,{size:12,color:"white",strokeWidth:3})})}function Sx({title:e="",message:t,confirmLabel:n="",confirmColor:r="#ff4d6d",onConfirm:s,onCancel:o}){return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:o,children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:_.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:a=>a.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:_.text},children:e}),l.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:_.textMuted},children:t}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.text},onClick:o,children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:r,boxShadow:`4px 4px 10px ${r}66`},onClick:s,children:n})]})]})})}function G0({items:e,currentContent:t,onApply:n,onClose:r,onDelete:s}){var x;const[o,a]=u.useState("current"),[i,c]=u.useState(null),[d,p]=u.useState(null),f=v=>v?new Date(v).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",h=async()=>{if(o==="current"){r();return}const v=e.find(y=>y.id===o);v&&await n(v),r()};return i?l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:_.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsxs("span",{className:"text-[15px] font-bold",style:{color:_.text},children:[" ",i.version]}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>c(null),children:l.jsx(tr,{size:18,style:{color:_.accentDark}})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:[((x=i.merged_summary_ids)==null?void 0:x.length)>0&&l.jsxs("p",{className:"mb-2 text-[11px]",style:{color:_.textMuted},children:[": ",i.merged_summary_ids.map(v=>`#${v}`).join(", ")]}),l.jsx("div",{className:"rounded-[14px] p-4",style:{boxShadow:"var(--inset-shadow)",background:_.bg},children:l.jsx("p",{className:"whitespace-pre-wrap text-[13px] leading-relaxed",style:{color:_.text},children:i.content})})]})]}):l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:_.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:_.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:r,children:l.jsx(tr,{size:18,style:{color:_.accentDark}})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[l.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:o==="current"?"var(--inset-shadow)":"var(--card-shadow-sm)",background:_.bg},children:[l.jsx("button",{onClick:()=>a("current"),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:o==="current"?_.accentDark:_.bg,boxShadow:o==="current"?"none":"var(--icon-inset)"},children:o==="current"&&l.jsx(Dn,{size:12,color:"white"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[13px] font-semibold",style:{color:_.text},children:""}),l.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#2a9d5c",background:"rgba(42,157,92,0.12)"},children:""})]}),l.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:_.textMuted},children:t})]})]}),e.length===0&&l.jsx("p",{className:"py-8 text-center text-[13px]",style:{color:_.textMuted},children:""}),e.map(v=>{var y;return l.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:o===v.id?"var(--inset-shadow)":"var(--card-shadow-sm)",background:_.bg},children:[l.jsx("button",{onClick:()=>a(v.id),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:o===v.id?_.accentDark:_.bg,boxShadow:o===v.id?"none":"var(--icon-inset)"},children:o===v.id&&l.jsx(Dn,{size:12,color:"white"})}),l.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>c(v),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("span",{className:"text-[13px] font-semibold",style:{color:_.text},children:[" ",v.version]}),l.jsx("span",{className:"text-[10px]",style:{color:_.textMuted},children:f(v.created_at)})]}),l.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:_.textMuted},children:v.content}),((y=v.merged_summary_ids)==null?void 0:y.length)>0&&l.jsxs("p",{className:"mt-0.5 text-[10px]",style:{color:_.accent},children:[": ",v.merged_summary_ids.map(b=>`#${b}`).join(", ")]})]}),l.jsx("button",{onClick:()=>p(v.id),className:"flex h-5 w-5 shrink-0 items-center justify-center rounded-full",style:{color:"#ccc"},children:l.jsx(Tr,{size:11})})]},v.id)})]}),l.jsx("div",{className:"shrink-0 p-5",children:l.jsx("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:h,children:""})}),d&&l.jsx(Sx,{message:"",onCancel:()=>p(null),onConfirm:()=>{s(d),p(null)}})]})}function cf({initialText:e,onSave:t,onCancel:n,memoryData:r}){var h;const[s,o]=u.useState(e),[a,i]=u.useState((r==null?void 0:r.klass)||"other"),[c,d]=u.useState((((h=r==null?void 0:r.tags)==null?void 0:h.topic)||[]).join(", ")),p=!!r,f=kx.filter(x=>x.value);return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:l.jsxs("div",{className:"mx-5 w-full max-w-[340px] rounded-[18px] p-4",style:{background:_.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:x=>x.stopPropagation(),children:[l.jsx("textarea",{className:"w-full rounded-[12px] p-3 text-[12px] leading-relaxed resize-none outline-none overflow-y-auto thin-scrollbar",style:{background:_.bg,boxShadow:"var(--inset-shadow)",color:_.text,minHeight:p?100:140,maxHeight:280},value:s,onChange:x=>o(x.target.value),autoFocus:!0}),p&&l.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:_.textMuted},children:""}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("select",{className:"w-full appearance-none rounded-[10px] px-3 py-1.5 text-[11px] font-medium outline-none",style:{background:_.bg,boxShadow:"var(--inset-shadow)",color:_.text,WebkitAppearance:"none"},value:a,onChange:x=>i(x.target.value),children:f.map(x=>l.jsx("option",{value:x.value,children:x.label},x.value))}),l.jsx(Mr,{size:10,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2",style:{color:_.textMuted}})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:_.textMuted},children:""}),l.jsx("input",{className:"flex-1 rounded-[10px] px-3 py-1.5 text-[11px] outline-none",style:{background:_.bg,boxShadow:"var(--inset-shadow)",color:_.text},placeholder:", ",value:c,onChange:x=>d(x.target.value)})]})]}),l.jsxs("div",{className:"mt-3 flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.textMuted},onClick:n,children:""}),l.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.accentDark},onClick:()=>{if(p){const x=c.split(/[,]/).map(v=>v.trim()).filter(Boolean);t(s,a,{topic:x})}else t(s)},disabled:!s.trim(),children:""})]})]})})}function uf({value:e,rawValue:t,onChange:n,options:r,width:s,active:o}){var p;const[a,i]=u.useState(!1),c=u.useRef(null);u.useEffect(()=>{if(!a)return;const f=h=>{c.current&&!c.current.contains(h.target)&&i(!1)};return document.addEventListener("mousedown",f),document.addEventListener("touchstart",f),()=>{document.removeEventListener("mousedown",f),document.removeEventListener("touchstart",f)}},[a]);const d=((p=r.find(f=>f.value===String(t)))==null?void 0:p.label)||e||"";return l.jsxs("div",{className:"relative",style:{width:s},ref:c,children:[l.jsxs("button",{className:"flex w-full items-center justify-between rounded-[12px] px-2.5 py-2 text-[11px] font-medium text-left",style:{boxShadow:"var(--card-shadow-sm)",background:_.bg,color:o?_.accentDark:_.text},onClick:()=>i(!a),children:[l.jsx("span",{className:"truncate flex-1",children:d}),l.jsx(Mr,{size:10,style:{color:_.textMuted,flexShrink:0,marginLeft:2,transform:a?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),a&&l.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[12px]",style:{background:_.bg,boxShadow:"var(--card-shadow)"},children:r.map(f=>l.jsxs("button",{className:"flex w-full items-center justify-between px-3 py-2 text-[11px]",style:{color:_.text},onClick:()=>{n(f.value),i(!1)},children:[l.jsx("span",{className:"truncate",children:f.label}),String(t)===f.value&&l.jsx(Dn,{size:10,style:{color:_.accentDark,flexShrink:0}})]},f.value))})]})}function df({children:e,time:t,badge:n,keyword:r,onEdit:s,selectMode:o,selected:a,onToggle:i,onLongPress:c}){const[d,p]=u.useState(!1),[f,h]=u.useState(!1),x=u.useRef(null),v=typeof e=="string"?e:"",y=u.useRef(null),b=u.useRef(!1),g=u.useRef(null);u.useLayoutEffect(()=>{const C=x.current;C&&!d&&h(C.scrollHeight>C.clientHeight+1)},[v,d]);const m=C=>{if(o)return;const k=C.touches[0];g.current={x:k.clientX,y:k.clientY},b.current=!1,y.current=setTimeout(()=>{b.current=!0,c==null||c()},600)},w=C=>{if(!g.current||!y.current)return;const k=C.touches[0],E=k.clientX-g.current.x,D=k.clientY-g.current.y;E*E+D*D>100&&(clearTimeout(y.current),y.current=null)},S=()=>{clearTimeout(y.current)},j=()=>{if(!b.current&&o){i==null||i();return}};return l.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:m,onTouchMove:w,onTouchEnd:S,onTouchCancel:S,onClick:j,children:[o&&l.jsx("div",{className:"mt-1",children:l.jsx(jx,{selected:a})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-start justify-between gap-1",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[n,l.jsx("div",{ref:x,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:d?{color:_.text}:{color:_.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:C=>{o||(C.stopPropagation(),p(!d))},children:l.jsx(du,{text:v,keyword:r})})]}),!o&&s&&l.jsx("button",{className:"mt-0.5 flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:C=>{C.stopPropagation(),s()},children:l.jsx(nu,{size:11,style:{color:_.accentDark}})})]}),l.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[l.jsx("span",{className:"text-[10px]",style:{color:_.textMuted},children:t||""}),!o&&(f||d)&&l.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:_.accentDark,background:"rgba(232,160,191,0.1)"},onClick:C=>{C.stopPropagation(),p(!d)},children:d?"":""})]})]})]})}function q0({content:e,deletedAt:t,keyword:n,onRestore:r,onPermanentDelete:s}){const[o,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);return u.useLayoutEffect(()=>{const p=d.current;p&&!o&&c(p.scrollHeight>p.clientHeight+1)},[e,o]),l.jsxs("div",{className:"mb-2 rounded-[14px] p-3",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",opacity:.75},children:[l.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:o?{color:_.text}:{color:_.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!o),children:l.jsx(du,{text:e,keyword:n})}),(i||o)&&l.jsx("div",{className:"mt-1 flex justify-center",children:l.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:_.accentDark,background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!o)},children:o?"":""})}),l.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[l.jsx("span",{className:"text-[10px]",style:{color:_.textMuted},children:t?(()=>{const p=Math.max(0,30-Math.floor((Date.now()-new Date(t).getTime())/864e5));return` ${pr(t)}  ${p}`})():""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(59,130,246,0.1)",color:"#3b82f6"},onClick:r,children:""}),l.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(239,68,68,0.1)",color:"#ef4444"},onClick:s,children:""})]})]})]})}function J0({msg:e,keyword:t,roleLabel:n,roleColor:r,selectMode:s,selected:o,onToggle:a,onLongPress:i}){const[c,d]=u.useState(!1),[p,f]=u.useState(!1),h=u.useRef(null),x=u.useRef(null),v=u.useRef(!1),y=u.useRef(null);u.useLayoutEffect(()=>{const S=h.current;S&&!c&&f(S.scrollHeight>S.clientHeight+1)},[e.content,c]);const b=S=>{if(s)return;const j=S.touches[0];y.current={x:j.clientX,y:j.clientY},v.current=!1,x.current=setTimeout(()=>{v.current=!0,i==null||i()},600)},g=S=>{if(!y.current||!x.current)return;const j=S.touches[0],C=j.clientX-y.current.x,k=j.clientY-y.current.y;C*C+k*k>100&&(clearTimeout(x.current),x.current=null)},m=()=>{clearTimeout(x.current)},w=()=>{if(!v.current&&s){a==null||a();return}};return l.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:b,onTouchMove:g,onTouchEnd:m,onTouchCancel:m,onClick:w,children:[s&&l.jsx("div",{className:"mt-1",children:l.jsx(jx,{selected:o})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-[11px] font-semibold",style:{color:r(e.role)},children:n(e.role)}),e.summary_group_id&&l.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-medium",style:{background:"rgba(74,138,181,0.1)",color:"#4a8ab5"},children:["",e.summary_group_id]})]}),l.jsx("span",{className:"text-[10px]",style:{color:_.textMuted},children:pr(e.created_at)})]}),l.jsx("div",{ref:h,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:c?{color:_.text}:{color:_.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:S=>{s||(S.stopPropagation(),d(!c))},children:l.jsx(du,{text:e.content,keyword:t})}),!s&&(p||c)&&l.jsx("div",{className:"mt-1 flex justify-center",children:l.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:_.accentDark,background:"rgba(232,160,191,0.1)"},onClick:S=>{S.stopPropagation(),d(!c)},children:c?"":""})})]})]})}function Z0(){var fu,pu;const e=Ot(),[t,n]=u.useState("memories"),[r,s]=u.useState(!1),[o,a]=u.useState(!1),[i,c]=u.useState(null),[d,p]=u.useState([]),[f,h]=u.useState(null),[x,v]=u.useState(""),[y,b]=u.useState(null),[g,m]=u.useState(null),[w,S]=u.useState(""),[j,C]=u.useState(""),[k,E]=u.useState(""),[D,P]=u.useState(!1),[O,oe]=u.useState(new Set),[V,I]=u.useState([]),[J,he]=u.useState([]),[fe,$]=u.useState([]),[Q,T]=u.useState([]),[te,X]=u.useState([]),[be,ge]=u.useState({longterm:null,daily:null}),[Je,ye]=u.useState(!1),[Y,ve]=u.useState(null),[ae,se]=u.useState(null),[Fe,_e]=u.useState(!1),[ct,B]=u.useState(null),[H,ce]=u.useState(null),[G,ie]=u.useState(!0),[L,ee]=u.useState(!1),[re,de]=u.useState(!1),[Ve,He]=u.useState(!1);u.useEffect(()=>{P(!1),oe(new Set)},[t,r]);const xn=()=>{ye(!0),F("/api/settings/summary-layers").then(N=>ge({longterm:N.longterm,daily:N.daily})).catch(N=>console.error(N)).finally(()=>ye(!1))};u.useEffect(()=>{t!=="messages"||!r||xn()},[t,r]);const lr=async N=>{try{const R=await F(`/api/settings/summary-layers/${N}/history`);se({type:N,items:R.history||[]})}catch(R){}},Gt=async()=>{try{const N=await F("/api/settings/summary-layers/flush-status");ce({...N,grayClicks:0})}catch(N){B(""),setTimeout(()=>B(null),3e3)}},$t=async()=>{var R,W;ce(null),_e(!0),B(null);let N=!1;try{const Z=await F("/api/settings/summary-layers/flush",{method:"POST"}),Pe=[];if(Z.flushed&&Pe.push(` ${Z.flushed} `),(R=Z.merge_triggered)!=null&&R.length){N=!0,B("...");for(let jt=0;jt<40;jt++){await new Promise(bn=>setTimeout(bn,3e3));try{if(!((W=(await F("/api/settings/summary-layers/flush-status")).pending_merge)!=null&&W.length)){B(""),xn(),setTimeout(()=>B(null),3e3);return}}catch(bn){}}B(""),setTimeout(()=>B(null),3e3);return}B(Pe.length?Pe.join(""):""),Z.flushed&&setTimeout(xn,2e3),setTimeout(()=>B(null),4e3)}catch(Z){B(""),setTimeout(()=>B(null),4e3)}finally{_e(!1)}};u.useEffect(()=>{F("/api/sessions?limit=50").then(N=>{const R=N.sessions||[];p(R),R.length>0&&!i&&c(R[0].id)}).catch(()=>{})},[]),u.useEffect(()=>{i&&F(`/api/sessions/${i}/info`).then(N=>h(N.assistant_name||null)).catch(()=>h(null))},[i]);const At=50,mn=u.useRef(""),st=u.useRef(null),Pn=u.useRef({klass:"",mood:"",role:""});Pn.current={klass:w,mood:j,role:k},u.useEffect(()=>{i&&A()},[i,o]),u.useEffect(()=>{i&&!o&&A()},[t]),u.useEffect(()=>{i&&!o&&A()},[w,j,k]),u.useEffect(()=>(st.current&&clearTimeout(st.current),st.current=setTimeout(()=>{const N=x.trim();N!==mn.current&&(mn.current=N,i&&A(N))},400),()=>{st.current&&clearTimeout(st.current)}),[x]);const gn=N=>{const R=[],W=(N!=null?N:mn.current||"").trim();W&&R.push(`search=${encodeURIComponent(W)}`);const Z=Pn.current;return t==="memories"&&Z.klass&&R.push(`klass=${encodeURIComponent(Z.klass)}`),t==="summaries"&&Z.mood&&R.push(`mood_tag=${encodeURIComponent(Z.mood)}`),t==="messages"&&Z.role&&R.push(`role=${encodeURIComponent(Z.role)}`),R.length?`&${R.join("&")}`:""},A=async N=>{if(!i)return;ie(!0);const R=gn(N);try{if(o){const[W,Z]=await Promise.all([F("/api/memories/trash?limit=100"),F(`/api/sessions/${i}/summaries/trash`)]);T(W.memories||[]),X(Z.summaries||[])}else if(t==="memories"){const W=await F(`/api/memories?limit=${At}&offset=0${R}`);I(W.memories||[]),ee((W.total||0)>(W.memories||[]).length)}else if(t==="summaries"){const W=await F(`/api/sessions/${i}/summaries?limit=${At}&offset=0${R}`);he(W.summaries||[]),de((W.total||0)>(W.summaries||[]).length)}else{const W=await F(`/api/sessions/${i}/messages?limit=50${R}`);$((W.messages||[]).reverse()),He(W.has_more||!1)}}catch(W){console.error(W)}ie(!1)},ke=async()=>{if(!L||G)return;ie(!0);const N=gn();try{const R=await F(`/api/memories?limit=${At}&offset=${V.length}${N}`),W=R.memories||[];I(Z=>[...Z,...W]),ee((R.total||0)>V.length+W.length)}catch(R){console.error(R)}ie(!1)},ue=async()=>{if(!i||!re||G)return;ie(!0);const N=gn();try{const R=await F(`/api/sessions/${i}/summaries?limit=${At}&offset=${J.length}${N}`),W=R.summaries||[];he(Z=>[...Z,...W]),de((R.total||0)>J.length+W.length)}catch(R){console.error(R)}ie(!1)},Me=async()=>{if(!i||!Ve||G)return;const N=fe[fe.length-1];if(!N)return;ie(!0);const R=gn();try{const W=await F(`/api/sessions/${i}/messages?limit=50&before_id=${N.id}${R}`);$(Z=>[...Z,...(W.messages||[]).reverse()]),He(W.has_more||!1)}catch(W){console.error(W)}ie(!1)},Ee=x.trim(),yn=u.useMemo(()=>Ee?Q.filter(N=>N.content.toLowerCase().includes(Ee.toLowerCase())):Q,[Q,Ee]),Cl=u.useMemo(()=>Ee?te.filter(N=>(N.summary_content||"").toLowerCase().includes(Ee.toLowerCase())):te,[te,Ee]),or=(N,R)=>b({message:N,action:R}),Ze=async N=>{await F(`/api/memories/${N}/restore`,{method:"POST"}),T(R=>R.filter(W=>W.id!==N))},mt=N=>or("",async()=>{await F(`/api/memories/${N}/permanent`,{method:"DELETE"}),T(R=>R.filter(W=>W.id!==N))}),gt=async N=>{await F(`/api/sessions/${i}/summaries/${N}/restore`,{method:"POST"}),X(R=>R.filter(W=>W.id!==N))},an=N=>or("",async()=>{await F(`/api/sessions/${i}/summaries/${N}/permanent`,{method:"DELETE"}),X(R=>R.filter(W=>W.id!==N))}),ut=N=>{oe(R=>{const W=new Set(R);return W.has(N)?W.delete(N):W.add(N),W})},lt=N=>{P(!0),oe(new Set([N]))},Ft=()=>{let N=[];t==="memories"?N=V.map(R=>R.id):t==="summaries"?N=J.map(R=>R.id):N=fe.map(R=>R.id),oe(new Set(N))},vn=()=>{P(!1),oe(new Set)},Xe=()=>{if(O.size===0)return;const N=O.size,R=t==="messages"?` ${N} `:` ${N} ${t==="memories"?"":""}`;or(R,async()=>{const W=[...O];t==="memories"?(await F("/api/memories/batch",{method:"DELETE",body:{ids:W}}),I(Z=>Z.filter(Pe=>!O.has(Pe.id)))):t==="summaries"?(await F(`/api/sessions/${i}/summaries/batch`,{method:"DELETE",body:{ids:W}}),he(Z=>Z.filter(Pe=>!O.has(Pe.id)))):(await F(`/api/sessions/${i}/messages/batch`,{method:"DELETE",body:{ids:W}}),$(Z=>Z.filter(Pe=>!O.has(Pe.id)))),vn()})},cn=async(N,R,W)=>{if(g){try{if(g.type==="memory"){const Z={content:N};R!==void 0&&(Z.klass=R),W!==void 0&&(Z.tags=W),await F(`/api/memories/${g.id}`,{method:"PUT",body:Z}),I(Pe=>Pe.map(jt=>jt.id===g.id?{...jt,content:N,...R!==void 0?{klass:R}:{},...W!==void 0?{tags:W}:{}}:jt))}else await F(`/api/sessions/${i}/summaries/${g.id}`,{method:"PATCH",body:{summary_content:N}}),he(Z=>Z.map(Pe=>Pe.id===g.id?{...Pe,summary_content:N}:Pe))}catch(Z){console.error(Z)}m(null)}},Bt=N=>{if(!Y)return;const R=Y.type;ve(null),b({title:"",message:"",confirmLabel:"",confirmColor:_.accentDark,action:async()=>{await F(`/api/settings/summary-layers/${R}`,{method:"PUT",body:{content:N}}),ge(W=>({...W,[R]:{...W[R]||{},content:N}}))}})},qt=N=>N==="user"?"":N==="assistant"?f||"":"",ar=N=>N==="user"?_.accentDark:N==="assistant"?"#8d68c4":_.textMuted,wn=t==="memories"?kx:t==="summaries"?K0:Q0,Ut=t==="memories"?w:t==="summaries"?j:k,ir=N=>{t==="memories"?S(N):t==="summaries"?C(N):E(N)},Cx=o?(()=>{if(G)return l.jsx(Ms,{});const N=t==="memories"?yn:Cl;return N.length===0?l.jsx(eo,{text:Ee?"":""}):N.map(R=>l.jsx(q0,{content:R.content||R.summary_content||"()",deletedAt:R.deleted_at,keyword:Ee,onRestore:()=>t==="memories"?Ze(R.id):gt(R.id),onPermanentDelete:()=>t==="memories"?mt(R.id):an(R.id)},R.id))})():t==="memories"?G&&V.length===0?l.jsx(Ms,{}):V.length===0?l.jsx(eo,{text:Ee?"":""}):l.jsxs(l.Fragment,{children:[!D&&l.jsx("p",{className:"mb-2 text-[11px]",style:{color:_.textMuted},children:""}),V.map(N=>l.jsx(df,{time:N.updated_at?`${pr(N.created_at)}   ${pr(N.updated_at)}`:pr(N.created_at),keyword:Ee,onEdit:()=>m({type:"memory",id:N.id,text:N.content,klass:N.klass,tags:N.tags}),selectMode:D,selected:O.has(N.id),onToggle:()=>ut(N.id),onLongPress:()=>lt(N.id),badge:(()=>{var Z;const R=af[N.klass]||af.other,W=((Z=N.tags)==null?void 0:Z.topic)||[];return l.jsxs("div",{className:"flex flex-wrap items-center gap-1 mb-1",children:[l.jsx("span",{className:"inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:R.bg,color:R.color},children:N.klass}),l.jsxs("span",{className:"inline-block text-[10px]",style:{color:_.textMuted},children:["#",N.id]}),W.map((Pe,jt)=>l.jsx("span",{className:"inline-block rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(136,136,160,0.1)",color:_.textMuted},children:Pe},jt))]})})(),children:N.content},N.id)),L&&l.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.accentDark},onClick:ke,disabled:G,children:G?"...":""})]}):t==="summaries"?G&&J.length===0?l.jsx(Ms,{}):J.length===0?l.jsx(eo,{text:Ee?"":""}):l.jsxs(l.Fragment,{children:[!D&&l.jsx("p",{className:"mb-2 text-[11px]",style:{color:_.textMuted},children:""}),J.map(N=>l.jsx(df,{time:pr(N.created_at),keyword:Ee,onEdit:()=>m({type:"summary",id:N.id,text:N.summary_content}),selectMode:D,selected:O.has(N.id),onToggle:()=>ut(N.id),onLongPress:()=>lt(N.id),badge:l.jsxs(l.Fragment,{children:[N.mood_tag&&l.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:"rgba(232,160,191,0.15)",color:_.accentDark},children:N.mood_tag}),N.merged_into&&l.jsxs("span",{className:"mb-1 ml-1 inline-block rounded-full px-1.5 py-0.5 text-[9px] font-medium",style:{background:"rgba(155,120,200,0.12)",color:"#8b6abf"},children:["",N.merged_into==="daily"?"":""]}),l.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:_.textMuted},children:["#",N.id]})]}),children:N.summary_content||"()"},N.id)),re&&l.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.accentDark},onClick:ue,disabled:G,children:G?"...":""})]}):r?Je?l.jsx(Ms,{}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-2.5 text-[13px] font-medium text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:Gt,disabled:Fe,children:[l.jsx(ha,{size:13,className:Fe?"animate-spin":""}),ct||(Fe?"...":"")]}),[{type:"daily",label:"",hint:""},{type:"longterm",label:"",hint:""}].map(({type:N,label:R,hint:W})=>{var jt,bn;const Z=be[N],Pe=(jt=Z==null?void 0:Z.content)==null?void 0:jt.trim();return l.jsxs("div",{className:"rounded-[18px] p-4",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[15px] font-semibold",style:{color:_.text},children:R}),l.jsx("div",{className:"text-[11px]",style:{color:_.textMuted},children:W})]}),l.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[l.jsx("button",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>lr(N),children:l.jsx(Ah,{size:11,style:{color:_.textMuted}})}),l.jsx("button",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>ve({type:N,content:(Z==null?void 0:Z.content)||""}),children:l.jsx(nu,{size:11,style:{color:_.accentDark}})})]})]}),l.jsx("div",{className:"text-[12px] leading-relaxed whitespace-pre-wrap break-words",style:{color:Pe?_.text:_.textMuted},children:Pe?Z.content:""}),l.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[l.jsx("span",{className:"text-[10px]",style:{color:_.textMuted},children:Z!=null&&Z.updated_at?` ${pr(Z.updated_at)}`:""}),l.jsxs("span",{className:"text-[10px]",style:{color:_.textMuted},children:[((bn=Z==null?void 0:Z.content)==null?void 0:bn.length)||0," "]})]})]},N)})]}):G&&fe.length===0?l.jsx(Ms,{}):fe.length===0?l.jsx(eo,{text:Ee?"":""}):l.jsxs(l.Fragment,{children:[!D&&l.jsx("p",{className:"mb-2 text-[11px]",style:{color:_.textMuted},children:""}),fe.map(N=>l.jsx(J0,{msg:N,keyword:Ee,roleLabel:qt,roleColor:ar,selectMode:D,selected:O.has(N.id),onToggle:()=>ut(N.id),onLongPress:()=>lt(N.id)},N.id)),Ve&&l.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.accentDark},onClick:Me,disabled:G,children:G?"...":""})]});return l.jsxs("div",{className:"flex h-full flex-col",style:{background:_.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(Tt,{size:22,style:{color:_.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:_.text},children:o?"":""}),t==="messages"?l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>s(!r),children:l.jsx(tu,{size:16,style:{color:r?_.accentDark:_.textMuted}})}):l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:_.bg,boxShadow:o?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>a(!o),children:l.jsx(Tr,{size:16,style:{color:o?"#ef4444":_.accentDark}})})]}),D&&l.jsx("div",{className:"shrink-0 px-5 pb-2",children:l.jsxs("div",{className:"flex items-center justify-between rounded-[14px] px-4 py-2.5",style:{background:_.bg,boxShadow:"var(--inset-shadow)"},children:[l.jsxs("span",{className:"text-[12px] font-semibold",style:{color:_.accentDark},children:[" ",O.size," "]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:"rgba(59,130,246,0.15)",color:"#3b82f6"},onClick:Ft,children:""}),l.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.textMuted},onClick:vn,children:""}),l.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold text-white",style:{background:O.size>0?"#ff4d6d":"rgba(255,77,109,0.3)"},onClick:Xe,disabled:O.size===0,children:""})]})]})}),!D&&l.jsx("div",{className:"shrink-0 px-5 pb-2",children:l.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:_.bg,boxShadow:"var(--inset-shadow)"},children:Y0.map(N=>{const R=o&&N.key==="messages",W=t===N.key,Z=N.key==="messages"&&r?"":N.label;return l.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:R?{color:_.textMuted,opacity:.35,cursor:"default"}:W?{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.accentDark}:{color:_.textMuted},disabled:R,onClick:()=>!R&&n(N.key),children:Z},N.key)})})}),!D&&!(t==="messages"&&r)&&l.jsx("div",{className:"shrink-0 px-5 pb-3",children:l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(uf,{value:i?`#${i}`:"",rawValue:i!=null?i:"",onChange:N=>c(Number(N)),options:d.map(N=>({value:String(N.id),label:`#${N.id} ${N.title||""}`})),width:"22%"}),l.jsx(uf,{value:((fu=wn.find(N=>N.value===Ut))==null?void 0:fu.label)||wn[0].label,rawValue:Ut,onChange:ir,options:wn.map(N=>({value:N.value,label:N.label})),width:"22%",active:!!Ut}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx(fv,{size:13,className:"absolute left-2.5 top-1/2 -translate-y-1/2",style:{color:_.textMuted}}),l.jsx("input",{className:"w-full rounded-[12px] py-2 pl-8 pr-7 text-[11px] outline-none",style:{background:_.bg,boxShadow:"var(--inset-shadow)",color:_.text},placeholder:"...",value:x,onChange:N=>v(N.target.value)}),x&&l.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>v(""),children:l.jsx(bl,{size:13,style:{color:_.textMuted}})})]})]})}),l.jsx("div",{className:`flex-1 overflow-y-auto px-5 pb-8${t==="messages"&&r?" pt-5":""}`,children:Cx}),y&&l.jsx(Sx,{title:y.title,message:y.message,confirmLabel:y.confirmLabel,confirmColor:y.confirmColor,onConfirm:async()=>{try{await y.action()}catch(N){console.error(N)}b(null)},onCancel:()=>b(null)}),g&&l.jsx(cf,{initialText:g.text,onSave:cn,onCancel:()=>m(null),memoryData:g.type==="memory"?{klass:g.klass,tags:g.tags}:null}),Y&&l.jsx(cf,{initialText:Y.content,onSave:Bt,onCancel:()=>ve(null)}),ae&&l.jsx(G0,{items:ae.items,currentContent:((pu=be[ae.type])==null?void 0:pu.content)||"",onApply:async N=>{try{const R=await F(`/api/settings/summary-layers/${ae.type}/rollback`,{method:"POST",body:{history_id:N.id}});ge(W=>({...W,[ae.type]:{...W[ae.type],content:R.content,updated_at:R.updated_at}}))}catch(R){}},onDelete:async N=>{try{await F(`/api/settings/summary-layers/history/${N}`,{method:"DELETE"}),se(R=>R?{...R,items:R.items.filter(W=>W.id!==N)}:null)}catch(R){}},onClose:()=>se(null)}),H&&(()=>{const{pending_flush:N,pending_merge:R,already_merged:W,grayClicks:Z}=H,Pe=Z>=2,jt=N>0,bn=(R==null?void 0:R.length)>0,hu=(W==null?void 0:W.length)>0,cr=[];Pe?cr.push(` ${W.join("")} `):(jt&&cr.push(`${N} `),bn&&cr.push(`${R.join("")} `),hu&&cr.push(`${W.join("")} `),cr.length||cr.push(""));let Dr,In,Rr;return Pe?(Dr="",In=!1,Rr=$t):jt?(Dr="",In=!1,Rr=$t):bn?(Dr="",In=!1,Rr=$t):hu?(Dr="",In=!0,Rr=()=>ce(zr=>({...zr,grayClicks:(zr.grayClicks||0)+1}))):(Dr="",In=!0,Rr=()=>{}),l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>ce(null),children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:_.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:zr=>zr.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:_.text},children:Pe?"":""}),l.jsx("p",{className:"mb-5 text-center text-[13px] leading-relaxed",style:{color:_.textMuted},children:cr.map((zr,xu)=>l.jsxs("span",{children:[xu>0&&l.jsx("br",{}),zr]},xu))}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:_.bg,boxShadow:"var(--card-shadow-sm)",color:_.text},onClick:()=>ce(null),children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:In?"#bbb":_.accentDark,boxShadow:In?"none":"4px 4px 10px rgba(201,98,138,0.4)",opacity:In?.5:1},onClick:Rr,children:Dr})]})]})})})()]})}function Ms(){return l.jsx("div",{className:"flex justify-center py-16",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:_.accent,borderTopColor:"transparent"}})})}function eo({text:e}){return l.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:_.textMuted},children:e})}const q={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},ew=[{key:"theirs",label:""},{key:"mine",label:""}],to=80;function Nx(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),o=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?o:`${t.getMonth()+1}/${t.getDate()} ${o}`}function tw({message:e,onConfirm:t,onCancel:n}){return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:q.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[l.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:q.text},children:""}),l.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:q.textMuted},children:e}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)",color:q.text},onClick:n,children:""}),l.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function nw({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),o=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const v="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=v,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/to);x.style.transition=v,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>o(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,v=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(v)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(v),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-to,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/to)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?o(-to):o(0)};return l.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:l.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[l.jsx(Tr,{size:16,color:"white"}),l.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),l.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function rw({unlockAt:e}){const[t,n]=u.useState(Date.now());u.useEffect(()=>{const d=setInterval(()=>n(Date.now()),1e3);return()=>clearInterval(d)},[]);const r=new Date(e).getTime()-t;if(r<=0)return null;const s=Math.floor(r/864e5),o=Math.floor(r%864e5/36e5),a=Math.floor(r%36e5/6e4),i=Math.floor(r%6e4/1e3);let c="";return s>0&&(c+=`${s}`),(o>0||s>0)&&(c+=`${o}`),c+=`${a}${i}`,l.jsxs("div",{className:"flex items-center gap-1.5 text-[12px]",style:{color:q.accentDark},children:[l.jsx(cv,{size:12}),l.jsx("span",{children:c})]})}function sw({assistants:e,avatarMap:t,currentId:n,onSelect:r,onClose:s}){return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:s,children:l.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-5",style:{background:q.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:o=>o.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:q.text},children:""}),l.jsx("button",{onClick:s,children:l.jsx(bl,{size:18,style:{color:q.textMuted}})})]}),l.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:e.map(o=>{var i;const a=t[o.id]||o.avatar_url;return l.jsxs("button",{className:"mb-2 flex w-full items-center gap-3 rounded-[14px] p-3 text-left",style:{background:q.bg,boxShadow:o.id===n?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{r(o.id),s()},children:[l.jsx("div",{className:"shrink-0 rounded-full",style:{width:36,height:36,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:2},children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:q.bg},children:a?l.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{className:"text-[14px]",style:{color:q.accentDark},children:((i=o.name)==null?void 0:i[0])||"?"})})}),l.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:q.text},children:o.name})]},o.id)})})]})})}function lw({diary:e,onBack:t,onMarkRead:n}){return u.useEffect(()=>{e&&!e.is_read&&e.author==="assistant"&&(!e.unlock_at||new Date(e.unlock_at)<=new Date)&&n(e.id)},[e]),l.jsxs("div",{className:"flex h-full flex-col",style:{background:q.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:t,children:l.jsx(Tt,{size:22,style:{color:q.text}})}),l.jsx("h1",{className:"text-[15px] font-bold truncate max-w-[60%]",style:{color:q.text},children:e.title||""}),l.jsx("div",{className:"w-10"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l.jsxs("div",{className:"rounded-[18px] p-5",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("div",{className:"mb-3 text-[10px]",style:{color:q.textMuted},children:Nx(e.created_at)}),l.jsx("div",{className:"text-[13px] leading-[28px]",style:{color:q.text},children:e.content.split(`
`).map((r,s)=>l.jsx("div",{style:{borderBottom:"1px solid rgba(0,0,0,0.06)",minHeight:28},children:r||""},s))})]})})]})}function ow({assistantId:e,onSave:t,onCancel:n}){const[r,s]=u.useState(""),[o,a]=u.useState(""),[i,c]=u.useState(!1),[d,p]=u.useState(""),[f,h]=u.useState(!1),[x,v]=u.useState(!1),y=async()=>{if(!(!o.trim()||f)){h(!0);try{const b={assistant_id:e,author:"user",title:r.trim(),content:o.trim()};i&&d&&(b.unlock_at=new Date(d).toISOString()),await t(b)}finally{h(!1)}}};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:q.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:l.jsx(Tt,{size:22,style:{color:q.text}})}),l.jsx("h1",{className:"text-[15px] font-bold",style:{color:q.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:o.trim()?"var(--card-shadow-sm)":"var(--inset-shadow)"},onClick:y,disabled:!o.trim()||f,children:l.jsx("span",{className:"text-[12px] font-bold",style:{color:o.trim()?q.accentDark:q.textMuted},children:""})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[!x&&l.jsx("input",{className:"mb-3 w-full rounded-[12px] px-3 py-2.5 text-[13px] font-medium outline-none",style:{background:q.bg,boxShadow:"var(--inset-shadow)",color:q.text},placeholder:"",value:r,onChange:b=>s(b.target.value)}),l.jsxs("div",{className:"relative mb-3",children:[l.jsx("textarea",{className:"w-full rounded-[14px] p-3 text-[13px] leading-[28px] resize-none outline-none",style:{background:q.bg,boxShadow:"var(--inset-shadow)",color:q.text,minHeight:x?"calc(100vh - 120px)":200,backgroundImage:"repeating-linear-gradient(transparent, transparent 27px, rgba(0,0,0,0.05) 27px, rgba(0,0,0,0.05) 28px)",backgroundPositionY:9},placeholder:"...",value:o,onChange:b=>a(b.target.value),autoFocus:!0}),l.jsx("button",{className:"absolute top-2 right-2 flex h-7 w-7 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>v(!x),children:x?l.jsx(tr,{size:13,style:{color:q.accentDark}}):l.jsx(vl,{size:13,style:{color:q.accentDark}})})]}),!x&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-[14px] px-4 py-3",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-[13px] font-medium",style:{color:q.text},children:""}),l.jsx("p",{className:"text-[10px]",style:{color:q.textMuted},children:""})]}),l.jsx("button",{className:"relative h-7 w-12 rounded-full transition-colors",style:{background:i?q.accent:"rgba(0,0,0,0.1)"},onClick:()=>{if(!i&&!d){const b=new Date;b.setDate(b.getDate()+1),b.setHours(9,0,0,0);const g=m=>String(m).padStart(2,"0");p(`${b.getFullYear()}-${g(b.getMonth()+1)}-${g(b.getDate())}T${g(b.getHours())}:${g(b.getMinutes())}`)}c(!i)},children:l.jsx("div",{className:"absolute top-0.5 h-6 w-6 rounded-full transition-transform",style:{background:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",transform:i?"translateX(22px)":"translateX(2px)"}})})]}),i&&l.jsxs("div",{className:"rounded-[14px] px-4 py-3",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},children:[l.jsx("p",{className:"mb-2 text-[12px] font-medium",style:{color:q.text},children:""}),l.jsx("input",{type:"datetime-local",className:"w-full rounded-[10px] px-3 py-2 text-[13px] outline-none",style:{background:q.bg,boxShadow:"var(--inset-shadow)",color:q.text},value:d,onChange:b=>p(b.target.value)})]})]})]})]})}function aw(){var V;const e=Ot(),[t,n]=u.useState("theirs"),[r,s]=u.useState([]),[o,a]=u.useState({}),[i,c]=u.useState(()=>{const I=localStorage.getItem("diary_assistant_id");return I?Number(I):null}),d=I=>{c(I),I!=null&&localStorage.setItem("diary_assistant_id",String(I))},[p,f]=u.useState(!1),[h,x]=u.useState([]),[v,y]=u.useState(!0),[b,g]=u.useState(null),[m,w]=u.useState(null),[S,j]=u.useState(!1);u.useEffect(()=>{F("/api/assistants").then(async I=>{const J=I.assistants||[];s(J),J.length>0&&(i&&J.some($=>$.id===i)||d(J[0].id));const he={};await Promise.all(J.map(async fe=>{const $=await ms(`assistant-avatar-${fe.id}`).catch(()=>null);$&&(he[fe.id]=$)})),a(he)}).catch(()=>{})},[]);const C=r.find(I=>I.id===i),k=i&&o[i]||(C==null?void 0:C.avatar_url);u.useEffect(()=>{i!=null&&E()},[i,t]);const E=async()=>{y(!0);try{const J=await F(`/api/diary?assistant_id=${i}&author=${t==="theirs"?"assistant":"user"}&limit=100`);x(J.diary||[])}catch(I){console.error(I)}y(!1)},D=I=>{g({message:"",action:async()=>{await F(`/api/diary/${I}`,{method:"DELETE"}),x(J=>J.filter(he=>he.id!==I))}})},P=async I=>{try{await F(`/api/diary/${I}/read`,{method:"POST"}),x(J=>J.map(he=>he.id===I?{...he,is_read:!0}:he))}catch(J){console.error(J)}},O=async I=>{await F("/api/diary",{method:"POST",body:I}),j(!1),E()},oe=I=>{I.unlock_at&&new Date(I.unlock_at)>new Date||w(I)};return m?l.jsx(lw,{diary:m,onBack:()=>{w(null),E()},onMarkRead:P}):S?l.jsx(ow,{assistantId:i,onSave:O,onCancel:()=>j(!1)}):l.jsxs("div",{className:"flex h-full flex-col",style:{background:q.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:q.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(Tt,{size:22,style:{color:q.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:q.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{border:"2px solid #e8a0bf",padding:2},onClick:()=>f(!0),children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:q.bg},children:k?l.jsx("img",{src:k,alt:"",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{className:"text-[14px]",style:{color:q.accentDark},children:((V=C==null?void 0:C.name)==null?void 0:V[0])||"?"})})})]}),l.jsx("div",{className:"shrink-0 px-5 pb-3",children:l.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:q.bg,boxShadow:"var(--inset-shadow)"},children:ew.map(I=>l.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:t===I.key?{background:q.bg,boxShadow:"var(--card-shadow-sm)",color:q.accentDark}:{color:q.textMuted},onClick:()=>n(I.key),children:I.label},I.key))})}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24 pt-5",children:v?l.jsx("div",{className:"flex justify-center py-16",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:q.accent,borderTopColor:"transparent"}})}):h.length===0?l.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:q.textMuted},children:t==="theirs"?"":""}):h.map(I=>{const J=I.unlock_at&&new Date(I.unlock_at)>new Date;return l.jsx(nw,{onDelete:()=>D(I.id),children:l.jsxs("div",{className:"p-4 rounded-[18px]",style:{background:q.bg,userSelect:"none"},onClick:()=>oe(I),children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[!I.is_read&&I.author==="assistant"&&!J&&l.jsx("div",{className:"h-2 w-2 shrink-0 rounded-full",style:{background:"#ef4444"}}),l.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:q.text},children:I.title||""})]}),l.jsx("span",{className:"text-[10px] shrink-0 ml-2",style:{color:q.textMuted},children:Nx(I.created_at)})]}),J?l.jsx(rw,{unlockAt:I.unlock_at}):l.jsx("p",{className:"text-[12px] leading-relaxed break-words",style:{color:q.textMuted,maxHeight:40,overflow:"hidden"},children:I.content.length>60?I.content.slice(0,60)+"...":I.content})]})},I.id)})}),t==="mine"&&l.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center",style:{zIndex:30},children:l.jsx("button",{className:"flex h-12 w-12 items-center justify-center rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",boxShadow:"0 4px 14px rgba(232,160,191,0.4)"},onClick:()=>j(!0),children:l.jsx(xs,{size:22,color:"white"})})}),p&&l.jsx(sw,{assistants:r,avatarMap:o,currentId:i,onSelect:d,onClose:()=>f(!1)}),b&&l.jsx(tw,{message:b.message,onConfirm:async()=>{try{await b.action()}catch(I){console.error(I)}g(null)},onCancel:()=>g(null)})]})}const Ne={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function iw({value:e,onChange:t,onClose:n}){return l.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:Ne.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[l.jsx("span",{className:"text-[15px] font-bold",style:{color:Ne.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:l.jsx(tr,{size:18,style:{color:Ne.accentDark}})})]}),l.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:Ne.bg,color:Ne.text},placeholder:"..."})]})}function cw(){const e=Ot(),[t,n]=u.useState(""),[r,s]=u.useState(""),[o,a]=u.useState(""),[i,c]=u.useState(""),[d,p]=u.useState(!1),[f,h]=u.useState(!0),[x,v]=u.useState(null),[y,b]=u.useState(!1),g=u.useRef(null),m=u.useRef(null),w=k=>{v(k),setTimeout(()=>v(null),2e3)};u.useEffect(()=>{F("/api/user/profile").then(k=>{n(k.nickname||""),s(k.background_url||""),a(k.basic_info||"")}).catch(()=>{}).finally(()=>h(!1)),ms("user-avatar").then(k=>{k&&c(k)}).catch(function(){})},[]);const S=k=>{var P;const E=(P=k.target.files)==null?void 0:P[0];if(!E)return;const D=new FileReader;D.onload=async O=>{const oe=O.target.result;try{await ec("user-avatar",oe),c(oe)}catch(V){w("")}},D.readAsDataURL(E),k.target.value=""},j=k=>{var P;const E=(P=k.target.files)==null?void 0:P[0];if(!E)return;const D=new FileReader;D.onload=O=>a(O.target.result||""),D.readAsText(E),k.target.value=""},C=async()=>{p(!0);try{const k={nickname:t.trim()||null,background_url:r||null,basic_info:o||null,avatar_url:i?"user-avatar":null};await F("/api/user/profile",{method:"PUT",body:k});try{const E=JSON.parse(localStorage.getItem("whisper_profile")||"{}");localStorage.setItem("whisper_profile",JSON.stringify({...E,...k}))}catch(E){}w("")}catch(k){w("")}finally{p(!1)}};return l.jsxs("div",{className:"flex h-full flex-col",style:{background:Ne.bg},children:[l.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:l.jsx(Tt,{size:22,style:{color:Ne.text}})}),l.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ne.text},children:""}),l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:d?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:C,disabled:d,children:l.jsx(wl,{size:18,style:{color:Ne.accentDark}})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5 space-y-4",children:f?l.jsx("div",{className:"flex h-40 items-center justify-center",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ne.accent,borderTopColor:"transparent"}})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"rounded-[20px] p-5",style:{background:Ne.bg,boxShadow:"var(--card-shadow)"},children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var k;return(k=g.current)==null?void 0:k.click()},children:[l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:l.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Ne.bg},children:i?l.jsx("img",{src:i,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):l.jsx("span",{style:{fontSize:24},children:""})})}),l.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:Ne.accentDark},children:l.jsx(Oh,{size:9,color:"white"})})]}),l.jsx("input",{ref:g,type:"file",accept:"image/*",className:"hidden",onChange:S}),l.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Ne.textMuted},children:""}),l.jsx("input",{type:"text",value:t,onChange:k=>n(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ne.bg,color:Ne.text}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Ne.textMuted},children:""}),l.jsx("input",{type:"text",value:r,onChange:k=>s(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2 text-[13px] italic outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ne.bg,color:Ne.text}})]})]})]})}),l.jsxs("div",{className:"rounded-[20px] p-5",style:{background:Ne.bg,boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[l.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:Ne.textMuted},children:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Ne.bg},onClick:()=>{var k;return(k=m.current)==null?void 0:k.click()},title:"",children:l.jsx(pa,{size:13,style:{color:Ne.textMuted}})}),l.jsx("input",{ref:m,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:j}),l.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Ne.bg},onClick:()=>b(!0),title:"",children:l.jsx(vl,{size:13,style:{color:Ne.accentDark}})})]})]}),l.jsx("textarea",{value:o,onChange:k=>a(k.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ne.bg,color:Ne.text}})]})]})}),y&&l.jsx(iw,{value:o,onChange:a,onClose:()=>b(!1)}),x&&l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:l.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:x})})]})}function Lr(){var n;const e=(n=window.Telegram)==null?void 0:n.WebApp,t=Math.max((e==null?void 0:e.viewportHeight)||0,window.innerHeight);document.documentElement.style.setProperty("--tg-viewport-height",t+"px")}function uw({onSuccess:e}){const[t,n]=u.useState(""),[r,s]=u.useState(""),[o,a]=u.useState(!1),i=async c=>{if(c.preventDefault(),!!t.trim()){a(!0),s("");try{await qy(t),e()}catch(d){s(d.message||"")}finally{a(!1)}}};return l.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--bg)",padding:"2rem"},children:l.jsxs("div",{style:{width:"100%",maxWidth:320,borderRadius:24,padding:"2rem 1.5rem",background:"var(--bg)",boxShadow:"var(--card-shadow)"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[l.jsx("div",{style:{fontSize:36,marginBottom:8},children:""}),l.jsx("h1",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--text)",margin:0},children:"WHISPER"}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:4},children:""})]}),l.jsxs("form",{onSubmit:i,children:[l.jsx("input",{type:"password",value:t,onChange:c=>n(c.target.value),placeholder:"",autoFocus:!0,style:{width:"100%",padding:"12px 16px",borderRadius:14,border:"none",outline:"none",fontSize:14,color:"var(--text)",background:"var(--bg)",boxShadow:"var(--inset-shadow)",boxSizing:"border-box"}}),r&&l.jsx("p",{style:{color:"#ef4444",fontSize:"0.75rem",textAlign:"center",marginTop:8,marginBottom:0},children:r}),l.jsx("button",{type:"submit",disabled:o||!t.trim(),style:{width:"100%",marginTop:16,padding:"12px 0",borderRadius:14,border:"none",fontSize:14,fontWeight:600,color:"#fff",background:o||!t.trim()?"var(--text-muted)":"linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%)",cursor:o||!t.trim()?"not-allowed":"pointer",boxShadow:"var(--card-shadow-sm)"},children:o?"...":""})]})]})})}function dw(){const e=Zc();return u.useEffect(()=>{var n;const t=(n=window.Telegram)==null?void 0:n.WebApp;t&&!e.pathname.startsWith("/cot")&&t.expand(),Lr()},[e.pathname]),l.jsxs(Yy,{children:[l.jsx(pt,{path:"/",element:l.jsx(vv,{})}),l.jsx(pt,{path:"/profile",element:l.jsx(cw,{})}),l.jsx(pt,{path:"/world-books",element:l.jsx(c0,{})}),l.jsx(pt,{path:"/world-books/new",element:l.jsx(Jd,{})}),l.jsx(pt,{path:"/world-books/:id",element:l.jsx(Jd,{})}),l.jsx(pt,{path:"/assistants",element:l.jsx(w0,{})}),l.jsx(pt,{path:"/assistants/new",element:l.jsx(ef,{})}),l.jsx(pt,{path:"/assistants/:id",element:l.jsx(ef,{})}),l.jsx(pt,{path:"/settings",element:l.jsx(E0,{})}),l.jsx(pt,{path:"/settings/api",element:l.jsx(z0,{})}),l.jsx(pt,{path:"/settings/proactive",element:l.jsx(P0,{})}),l.jsx(pt,{path:"/cot",element:l.jsx(H0,{})}),l.jsx(pt,{path:"/memories",element:l.jsx(Z0,{})}),l.jsx(pt,{path:"/diary",element:l.jsx(aw,{})}),l.jsx(pt,{path:"/messages",element:l.jsx(X0,{})})]})}function fw(){const[e,t]=u.useState(null);return u.useEffect(()=>{var r;const n=(r=window.Telegram)==null?void 0:r.WebApp;return localStorage.getItem("whisper_token")||n&&n.initData&&n.initData.length>0?t("ok"):t("login"),n&&(n.ready(),window.location.hash.startsWith("#/cot")||n.expand()),Lr(),n&&n.onEvent("viewportChanged",Lr),window.addEventListener("resize",Lr),()=>{n&&n.offEvent("viewportChanged",Lr),window.removeEventListener("resize",Lr)}},[]),e===null?null:e==="login"?l.jsx(uw,{onSuccess:()=>t("ok")}):l.jsx(Gy,{children:l.jsx(dw,{})})}window.location.hash&&!window.location.hash.startsWith("#/")&&history.replaceState(null,"",window.location.pathname+"#/cot");li.createRoot(document.getElementById("root")).render(l.jsx(Re.StrictMode,{children:l.jsx(fw,{})}));
