function Sx(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function Nx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var df={exports:{}},Yo={},ff={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pl=Symbol.for("react.element"),Cx=Symbol.for("react.portal"),Ex=Symbol.for("react.fragment"),Mx=Symbol.for("react.strict_mode"),_x=Symbol.for("react.profiler"),Tx=Symbol.for("react.provider"),Dx=Symbol.for("react.context"),Rx=Symbol.for("react.forward_ref"),Px=Symbol.for("react.suspense"),zx=Symbol.for("react.memo"),Ix=Symbol.for("react.lazy"),xu=Symbol.iterator;function Lx(e){return e===null||typeof e!="object"?null:(e=xu&&e[xu]||e["@@iterator"],typeof e=="function"?e:null)}var pf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hf=Object.assign,xf={};function cs(e,t,n){this.props=e,this.context=t,this.refs=xf,this.updater=n||pf}cs.prototype.isReactComponent={};cs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};cs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mf(){}mf.prototype=cs.prototype;function sc(e,t,n){this.props=e,this.context=t,this.refs=xf,this.updater=n||pf}var lc=sc.prototype=new mf;lc.constructor=sc;hf(lc,cs.prototype);lc.isPureReactComponent=!0;var mu=Array.isArray,gf=Object.prototype.hasOwnProperty,oc={current:null},yf={key:!0,ref:!0,__self:!0,__source:!0};function vf(e,t,n){var r,s={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)gf.call(t,r)&&!yf.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:pl,type:e,key:l,ref:a,props:s,_owner:oc.current}}function Ox(e,t){return{$$typeof:pl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ac(e){return typeof e=="object"&&e!==null&&e.$$typeof===pl}function $x(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var gu=/\/+/g;function ja(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$x(""+e.key):t.toString(36)}function no(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case pl:case Cx:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+ja(a,0):r,mu(s)?(n="",e!=null&&(n=e.replace(gu,"$&/")+"/"),no(s,t,n,"",function(d){return d})):s!=null&&(ac(s)&&(s=Ox(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(gu,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",mu(e))for(var i=0;i<e.length;i++){l=e[i];var c=r+ja(l,i);a+=no(l,t,n,c,s)}else if(c=Lx(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=r+ja(l,i++),a+=no(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ml(e,t,n){if(e==null)return e;var r=[],s=0;return no(e,r,"","",function(l){return t.call(n,l,s++)}),r}function Ax(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wt={current:null},ro={transition:null},Fx={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:ro,ReactCurrentOwner:oc};function wf(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Ml,forEach:function(e,t,n){Ml(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ml(e,function(){t++}),t},toArray:function(e){return Ml(e,function(t){return t})||[]},only:function(e){if(!ac(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};me.Component=cs;me.Fragment=Ex;me.Profiler=_x;me.PureComponent=sc;me.StrictMode=Mx;me.Suspense=Px;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fx;me.act=wf;me.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=hf({},e.props),s=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=oc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)gf.call(t,c)&&!yf.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];r.children=i}return{$$typeof:pl,type:e.type,key:s,ref:l,props:r,_owner:a}};me.createContext=function(e){return e={$$typeof:Dx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Tx,_context:e},e.Consumer=e};me.createElement=vf;me.createFactory=function(e){var t=vf.bind(null,e);return t.type=e,t};me.createRef=function(){return{current:null}};me.forwardRef=function(e){return{$$typeof:Rx,render:e}};me.isValidElement=ac;me.lazy=function(e){return{$$typeof:Ix,_payload:{_status:-1,_result:e},_init:Ax}};me.memo=function(e,t){return{$$typeof:zx,type:e,compare:t===void 0?null:t}};me.startTransition=function(e){var t=ro.transition;ro.transition={};try{e()}finally{ro.transition=t}};me.unstable_act=wf;me.useCallback=function(e,t){return wt.current.useCallback(e,t)};me.useContext=function(e){return wt.current.useContext(e)};me.useDebugValue=function(){};me.useDeferredValue=function(e){return wt.current.useDeferredValue(e)};me.useEffect=function(e,t){return wt.current.useEffect(e,t)};me.useId=function(){return wt.current.useId()};me.useImperativeHandle=function(e,t,n){return wt.current.useImperativeHandle(e,t,n)};me.useInsertionEffect=function(e,t){return wt.current.useInsertionEffect(e,t)};me.useLayoutEffect=function(e,t){return wt.current.useLayoutEffect(e,t)};me.useMemo=function(e,t){return wt.current.useMemo(e,t)};me.useReducer=function(e,t,n){return wt.current.useReducer(e,t,n)};me.useRef=function(e){return wt.current.useRef(e)};me.useState=function(e){return wt.current.useState(e)};me.useSyncExternalStore=function(e,t,n){return wt.current.useSyncExternalStore(e,t,n)};me.useTransition=function(){return wt.current.useTransition()};me.version="18.3.1";ff.exports=me;var u=ff.exports;const De=Nx(u),Bx=Sx({__proto__:null,default:De},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux=u,Hx=Symbol.for("react.element"),Wx=Symbol.for("react.fragment"),Vx=Object.prototype.hasOwnProperty,Xx=Ux.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yx={key:!0,ref:!0,__self:!0,__source:!0};function bf(e,t,n){var r,s={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Vx.call(t,r)&&!Yx.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Hx,type:e,key:l,ref:a,props:s,_owner:Xx.current}}Yo.Fragment=Wx;Yo.jsx=bf;Yo.jsxs=bf;df.exports=Yo;var o=df.exports,li={},kf={exports:{}},$t={},jf={exports:{}},Sf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,Q){var _=O.length;O.push(Q);e:for(;0<_;){var ee=_-1>>>1,X=O[ee];if(0<s(X,Q))O[ee]=Q,O[_]=X,_=ee;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var Q=O[0],_=O.pop();if(_!==Q){O[0]=_;e:for(var ee=0,X=O.length,ke=X>>>1;ee<ke;){var ye=2*(ee+1)-1,qe=O[ye],ve=ye+1,Y=O[ve];if(0>s(qe,_))ve<X&&0>s(Y,qe)?(O[ee]=Y,O[ve]=_,ee=ve):(O[ee]=qe,O[ye]=_,ee=ye);else if(ve<X&&0>s(Y,_))O[ee]=Y,O[ve]=_,ee=ve;else break e}}return Q}function s(O,Q){var _=O.sortIndex-Q.sortIndex;return _!==0?_:O.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],d=[],p=1,f=null,h=3,x=!1,w=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=O)r(d),Q.sortIndex=Q.expirationTime,t(c,Q);else break;Q=n(d)}}function S(O){if(y=!1,v(O),!w)if(n(c)!==null)w=!0,xe(j);else{var Q=n(d);Q!==null&&fe(S,Q.startTime-O)}}function j(O,Q){w=!1,y&&(y=!1,g(E),E=-1),x=!0;var _=h;try{for(v(Q),f=n(c);f!==null&&(!(f.expirationTime>Q)||O&&!L());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,h=f.priorityLevel;var X=ee(f.expirationTime<=Q);Q=e.unstable_now(),typeof X=="function"?f.callback=X:f===n(c)&&r(c),v(Q)}else r(c);f=n(c)}if(f!==null)var ke=!0;else{var ye=n(d);ye!==null&&fe(S,ye.startTime-Q),ke=!1}return ke}finally{f=null,h=_,x=!1}}var N=!1,k=null,E=-1,D=5,P=-1;function L(){return!(e.unstable_now()-P<D)}function ie(){if(k!==null){var O=e.unstable_now();P=O;var Q=!0;try{Q=k(!0,O)}finally{Q?W():(N=!1,k=null)}}else N=!1}var W;if(typeof m=="function")W=function(){m(ie)};else if(typeof MessageChannel!="undefined"){var z=new MessageChannel,q=z.port2;z.port1.onmessage=ie,W=function(){q.postMessage(null)}}else W=function(){b(ie,0)};function xe(O){k=O,N||(N=!0,W())}function fe(O,Q){E=b(function(){O(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,xe(j))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(O){switch(h){case 1:case 2:case 3:var Q=3;break;default:Q=h}var _=h;h=Q;try{return O()}finally{h=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,Q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var _=h;h=O;try{return Q()}finally{h=_}},e.unstable_scheduleCallback=function(O,Q,_){var ee=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?ee+_:ee):_=ee,O){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=_+X,O={id:p++,callback:Q,priorityLevel:O,startTime:_,expirationTime:X,sortIndex:-1},_>ee?(O.sortIndex=_,t(d,O),n(c)===null&&O===n(d)&&(y?(g(E),E=-1):y=!0,fe(S,_-ee))):(O.sortIndex=X,t(c,O),w||x||(w=!0,xe(j))),O},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(O){var Q=h;return function(){var _=h;h=Q;try{return O.apply(this,arguments)}finally{h=_}}}})(Sf);jf.exports=Sf;var Kx=jf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qx=u,Ot=Kx;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nf=new Set,Xs={};function vr(e,t){Zr(e,t),Zr(e+"Capture",t)}function Zr(e,t){for(Xs[e]=t,e=0;e<t.length;e++)Nf.add(t[e])}var Sn=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),oi=Object.prototype.hasOwnProperty,Gx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yu={},vu={};function qx(e){return oi.call(vu,e)?!0:oi.call(yu,e)?!1:Gx.test(e)?vu[e]=!0:(yu[e]=!0,!1)}function Jx(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Zx(e,t,n,r){if(t===null||typeof t=="undefined"||Jx(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bt(e,t,n,r,s,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ct[e]=new bt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ct[t]=new bt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ct[e]=new bt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ct[e]=new bt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ct[e]=new bt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ct[e]=new bt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ct[e]=new bt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ct[e]=new bt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ct[e]=new bt(e,5,!1,e.toLowerCase(),null,!1,!1)});var ic=/[\-:]([a-z])/g;function cc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ic,cc);ct[t]=new bt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ic,cc);ct[t]=new bt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ic,cc);ct[t]=new bt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ct[e]=new bt(e,1,!1,e.toLowerCase(),null,!1,!1)});ct.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ct[e]=new bt(e,1,!1,e.toLowerCase(),null,!0,!0)});function uc(e,t,n,r){var s=ct.hasOwnProperty(t)?ct[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Zx(t,n,s,r)&&(n=null),r||s===null?qx(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var _n=Qx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_l=Symbol.for("react.element"),Pr=Symbol.for("react.portal"),zr=Symbol.for("react.fragment"),dc=Symbol.for("react.strict_mode"),ai=Symbol.for("react.profiler"),Cf=Symbol.for("react.provider"),Ef=Symbol.for("react.context"),fc=Symbol.for("react.forward_ref"),ii=Symbol.for("react.suspense"),ci=Symbol.for("react.suspense_list"),pc=Symbol.for("react.memo"),Pn=Symbol.for("react.lazy"),Mf=Symbol.for("react.offscreen"),wu=Symbol.iterator;function ws(e){return e===null||typeof e!="object"?null:(e=wu&&e[wu]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,Sa;function Ts(e){if(Sa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Sa=t&&t[1]||""}return`
`+Sa+e}var Na=!1;function Ca(e,t){if(!e||Na)return"";Na=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),l=r.stack.split(`
`),a=s.length-1,i=l.length-1;1<=a&&0<=i&&s[a]!==l[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==l[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==l[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{Na=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ts(e):""}function em(e){switch(e.tag){case 5:return Ts(e.type);case 16:return Ts("Lazy");case 13:return Ts("Suspense");case 19:return Ts("SuspenseList");case 0:case 2:case 15:return e=Ca(e.type,!1),e;case 11:return e=Ca(e.type.render,!1),e;case 1:return e=Ca(e.type,!0),e;default:return""}}function ui(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zr:return"Fragment";case Pr:return"Portal";case ai:return"Profiler";case dc:return"StrictMode";case ii:return"Suspense";case ci:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ef:return(e.displayName||"Context")+".Consumer";case Cf:return(e._context.displayName||"Context")+".Provider";case fc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pc:return t=e.displayName||null,t!==null?t:ui(e.type)||"Memo";case Pn:t=e._payload,e=e._init;try{return ui(e(t))}catch(n){}}return null}function tm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ui(t);case 8:return t===dc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Qn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _f(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nm(e){var t=_f(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Tl(e){e._valueTracker||(e._valueTracker=nm(e))}function Tf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_f(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function mo(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function di(e,t){var n=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function bu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Qn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Df(e,t){t=t.checked,t!=null&&uc(e,"checked",t,!1)}function fi(e,t){Df(e,t);var n=Qn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?pi(e,t.type,n):t.hasOwnProperty("defaultValue")&&pi(e,t.type,Qn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ku(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function pi(e,t,n){(t!=="number"||mo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ds=Array.isArray;function Xr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Qn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function hi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ju(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(R(92));if(Ds(n)){if(1<n.length)throw Error(R(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Qn(n)}}function Rf(e,t){var n=Qn(t.value),r=Qn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Su(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Pf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Pf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Dl,zf=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Dl=Dl||document.createElement("div"),Dl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Dl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ys(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var zs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rm=["Webkit","ms","Moz","O"];Object.keys(zs).forEach(function(e){rm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),zs[t]=zs[e]})});function If(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||zs.hasOwnProperty(e)&&zs[e]?(""+t).trim():t+"px"}function Lf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=If(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var sm=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mi(e,t){if(t){if(sm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function gi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yi=null;function hc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vi=null,Yr=null,Kr=null;function Nu(e){if(e=ml(e)){if(typeof vi!="function")throw Error(R(280));var t=e.stateNode;t&&(t=Jo(t),vi(e.stateNode,e.type,t))}}function Of(e){Yr?Kr?Kr.push(e):Kr=[e]:Yr=e}function $f(){if(Yr){var e=Yr,t=Kr;if(Kr=Yr=null,Nu(e),t)for(e=0;e<t.length;e++)Nu(t[e])}}function Af(e,t){return e(t)}function Ff(){}var Ea=!1;function Bf(e,t,n){if(Ea)return e(t,n);Ea=!0;try{return Af(e,t,n)}finally{Ea=!1,(Yr!==null||Kr!==null)&&(Ff(),$f())}}function Ks(e,t){var n=e.stateNode;if(n===null)return null;var r=Jo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(R(231,t,typeof n));return n}var wi=!1;if(Sn)try{var bs={};Object.defineProperty(bs,"passive",{get:function(){wi=!0}}),window.addEventListener("test",bs,bs),window.removeEventListener("test",bs,bs)}catch(e){wi=!1}function lm(e,t,n,r,s,l,a,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(p){this.onError(p)}}var Is=!1,go=null,yo=!1,bi=null,om={onError:function(e){Is=!0,go=e}};function am(e,t,n,r,s,l,a,i,c){Is=!1,go=null,lm.apply(om,arguments)}function im(e,t,n,r,s,l,a,i,c){if(am.apply(this,arguments),Is){if(Is){var d=go;Is=!1,go=null}else throw Error(R(198));yo||(yo=!0,bi=d)}}function wr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Uf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Cu(e){if(wr(e)!==e)throw Error(R(188))}function cm(e){var t=e.alternate;if(!t){if(t=wr(e),t===null)throw Error(R(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return Cu(s),e;if(l===r)return Cu(s),t;l=l.sibling}throw Error(R(188))}if(n.return!==r.return)n=s,r=l;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=l;break}if(i===r){a=!0,r=s,n=l;break}i=i.sibling}if(!a){for(i=l.child;i;){if(i===n){a=!0,n=l,r=s;break}if(i===r){a=!0,r=l,n=s;break}i=i.sibling}if(!a)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?e:t}function Hf(e){return e=cm(e),e!==null?Wf(e):null}function Wf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Wf(e);if(t!==null)return t;e=e.sibling}return null}var Vf=Ot.unstable_scheduleCallback,Eu=Ot.unstable_cancelCallback,um=Ot.unstable_shouldYield,dm=Ot.unstable_requestPaint,Ae=Ot.unstable_now,fm=Ot.unstable_getCurrentPriorityLevel,xc=Ot.unstable_ImmediatePriority,Xf=Ot.unstable_UserBlockingPriority,vo=Ot.unstable_NormalPriority,pm=Ot.unstable_LowPriority,Yf=Ot.unstable_IdlePriority,Ko=null,hn=null;function hm(e){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Ko,e,void 0,(e.current.flags&128)===128)}catch(t){}}var en=Math.clz32?Math.clz32:gm,xm=Math.log,mm=Math.LN2;function gm(e){return e>>>=0,e===0?32:31-(xm(e)/mm|0)|0}var Rl=64,Pl=4194304;function Rs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=Rs(i):(l&=a,l!==0&&(r=Rs(l)))}else a=n&~s,a!==0?r=Rs(a):l!==0&&(r=Rs(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-en(t),s=1<<n,r|=e[n],t&=~s;return r}function ym(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-en(l),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=ym(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function ki(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Kf(){var e=Rl;return Rl<<=1,!(Rl&4194240)&&(Rl=64),e}function Ma(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function hl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-en(t),e[t]=n}function wm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-en(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function mc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-en(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ee=0;function Qf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Gf,gc,qf,Jf,Zf,ji=!1,zl=[],Bn=null,Un=null,Hn=null,Qs=new Map,Gs=new Map,Ln=[],bm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mu(e,t){switch(e){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":Un=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":Qs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gs.delete(t.pointerId)}}function ks(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=ml(t),t!==null&&gc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function km(e,t,n,r,s){switch(t){case"focusin":return Bn=ks(Bn,e,t,n,r,s),!0;case"dragenter":return Un=ks(Un,e,t,n,r,s),!0;case"mouseover":return Hn=ks(Hn,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return Qs.set(l,ks(Qs.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,Gs.set(l,ks(Gs.get(l)||null,e,t,n,r,s)),!0}return!1}function ep(e){var t=ar(e.target);if(t!==null){var n=wr(t);if(n!==null){if(t=n.tag,t===13){if(t=Uf(n),t!==null){e.blockedOn=t,Zf(e.priority,function(){qf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function so(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Si(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);yi=r,n.target.dispatchEvent(r),yi=null}else return t=ml(n),t!==null&&gc(t),e.blockedOn=n,!1;t.shift()}return!0}function _u(e,t,n){so(e)&&n.delete(t)}function jm(){ji=!1,Bn!==null&&so(Bn)&&(Bn=null),Un!==null&&so(Un)&&(Un=null),Hn!==null&&so(Hn)&&(Hn=null),Qs.forEach(_u),Gs.forEach(_u)}function js(e,t){e.blockedOn===t&&(e.blockedOn=null,ji||(ji=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,jm)))}function qs(e){function t(s){return js(s,e)}if(0<zl.length){js(zl[0],e);for(var n=1;n<zl.length;n++){var r=zl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Bn!==null&&js(Bn,e),Un!==null&&js(Un,e),Hn!==null&&js(Hn,e),Qs.forEach(t),Gs.forEach(t),n=0;n<Ln.length;n++)r=Ln[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ln.length&&(n=Ln[0],n.blockedOn===null);)ep(n),n.blockedOn===null&&Ln.shift()}var Qr=_n.ReactCurrentBatchConfig,bo=!0;function Sm(e,t,n,r){var s=Ee,l=Qr.transition;Qr.transition=null;try{Ee=1,yc(e,t,n,r)}finally{Ee=s,Qr.transition=l}}function Nm(e,t,n,r){var s=Ee,l=Qr.transition;Qr.transition=null;try{Ee=4,yc(e,t,n,r)}finally{Ee=s,Qr.transition=l}}function yc(e,t,n,r){if(bo){var s=Si(e,t,n,r);if(s===null)$a(e,t,r,ko,n),Mu(e,r);else if(km(s,e,t,n,r))r.stopPropagation();else if(Mu(e,r),t&4&&-1<bm.indexOf(e)){for(;s!==null;){var l=ml(s);if(l!==null&&Gf(l),l=Si(e,t,n,r),l===null&&$a(e,t,r,ko,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else $a(e,t,r,null,n)}}var ko=null;function Si(e,t,n,r){if(ko=null,e=hc(r),e=ar(e),e!==null)if(t=wr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Uf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ko=e,null}function tp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fm()){case xc:return 1;case Xf:return 4;case vo:case pm:return 16;case Yf:return 536870912;default:return 16}default:return 16}}var $n=null,vc=null,lo=null;function np(){if(lo)return lo;var e,t=vc,n=t.length,r,s="value"in $n?$n.value:$n.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[l-r];r++);return lo=s.slice(e,1<r?1-r:void 0)}function oo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Il(){return!0}function Tu(){return!1}function At(e){function t(n,r,s,l,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Il:Tu,this.isPropagationStopped=Tu,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Il)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Il)},persist:function(){},isPersistent:Il}),t}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wc=At(us),xl=Le({},us,{view:0,detail:0}),Cm=At(xl),_a,Ta,Ss,Qo=Le({},xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ss&&(Ss&&e.type==="mousemove"?(_a=e.screenX-Ss.screenX,Ta=e.screenY-Ss.screenY):Ta=_a=0,Ss=e),_a)},movementY:function(e){return"movementY"in e?e.movementY:Ta}}),Du=At(Qo),Em=Le({},Qo,{dataTransfer:0}),Mm=At(Em),_m=Le({},xl,{relatedTarget:0}),Da=At(_m),Tm=Le({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),Dm=At(Tm),Rm=Le({},us,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pm=At(Rm),zm=Le({},us,{data:0}),Ru=At(zm),Im={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Om={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $m(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Om[e])?!!t[e]:!1}function bc(){return $m}var Am=Le({},xl,{key:function(e){if(e.key){var t=Im[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=oo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bc,charCode:function(e){return e.type==="keypress"?oo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fm=At(Am),Bm=Le({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pu=At(Bm),Um=Le({},xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bc}),Hm=At(Um),Wm=Le({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vm=At(Wm),Xm=Le({},Qo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ym=At(Xm),Km=[9,13,27,32],kc=Sn&&"CompositionEvent"in window,Ls=null;Sn&&"documentMode"in document&&(Ls=document.documentMode);var Qm=Sn&&"TextEvent"in window&&!Ls,rp=Sn&&(!kc||Ls&&8<Ls&&11>=Ls),zu=" ",Iu=!1;function sp(e,t){switch(e){case"keyup":return Km.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ir=!1;function Gm(e,t){switch(e){case"compositionend":return lp(t);case"keypress":return t.which!==32?null:(Iu=!0,zu);case"textInput":return e=t.data,e===zu&&Iu?null:e;default:return null}}function qm(e,t){if(Ir)return e==="compositionend"||!kc&&sp(e,t)?(e=np(),lo=vc=$n=null,Ir=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rp&&t.locale!=="ko"?null:t.data;default:return null}}var Jm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Jm[e.type]:t==="textarea"}function op(e,t,n,r){Of(r),t=jo(t,"onChange"),0<t.length&&(n=new wc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Os=null,Js=null;function Zm(e){gp(e,0)}function Go(e){var t=$r(e);if(Tf(t))return e}function eg(e,t){if(e==="change")return t}var ap=!1;if(Sn){var Ra;if(Sn){var Pa="oninput"in document;if(!Pa){var Ou=document.createElement("div");Ou.setAttribute("oninput","return;"),Pa=typeof Ou.oninput=="function"}Ra=Pa}else Ra=!1;ap=Ra&&(!document.documentMode||9<document.documentMode)}function $u(){Os&&(Os.detachEvent("onpropertychange",ip),Js=Os=null)}function ip(e){if(e.propertyName==="value"&&Go(Js)){var t=[];op(t,Js,e,hc(e)),Bf(Zm,t)}}function tg(e,t,n){e==="focusin"?($u(),Os=t,Js=n,Os.attachEvent("onpropertychange",ip)):e==="focusout"&&$u()}function ng(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Go(Js)}function rg(e,t){if(e==="click")return Go(t)}function sg(e,t){if(e==="input"||e==="change")return Go(t)}function lg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nn=typeof Object.is=="function"?Object.is:lg;function Zs(e,t){if(nn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!oi.call(t,s)||!nn(e[s],t[s]))return!1}return!0}function Au(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fu(e,t){var n=Au(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Au(n)}}function cp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?cp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function up(){for(var e=window,t=mo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=mo(e.document)}return t}function jc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function og(e){var t=up(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cp(n.ownerDocument.documentElement,n)){if(r!==null&&jc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=Fu(n,l);var a=Fu(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ag=Sn&&"documentMode"in document&&11>=document.documentMode,Lr=null,Ni=null,$s=null,Ci=!1;function Bu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ci||Lr==null||Lr!==mo(r)||(r=Lr,"selectionStart"in r&&jc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$s&&Zs($s,r)||($s=r,r=jo(Ni,"onSelect"),0<r.length&&(t=new wc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Lr)))}function Ll(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Or={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionend:Ll("Transition","TransitionEnd")},za={},dp={};Sn&&(dp=document.createElement("div").style,"AnimationEvent"in window||(delete Or.animationend.animation,delete Or.animationiteration.animation,delete Or.animationstart.animation),"TransitionEvent"in window||delete Or.transitionend.transition);function qo(e){if(za[e])return za[e];if(!Or[e])return e;var t=Or[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in dp)return za[e]=t[n];return e}var fp=qo("animationend"),pp=qo("animationiteration"),hp=qo("animationstart"),xp=qo("transitionend"),mp=new Map,Uu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qn(e,t){mp.set(e,t),vr(t,[e])}for(var Ia=0;Ia<Uu.length;Ia++){var La=Uu[Ia],ig=La.toLowerCase(),cg=La[0].toUpperCase()+La.slice(1);qn(ig,"on"+cg)}qn(fp,"onAnimationEnd");qn(pp,"onAnimationIteration");qn(hp,"onAnimationStart");qn("dblclick","onDoubleClick");qn("focusin","onFocus");qn("focusout","onBlur");qn(xp,"onTransitionEnd");Zr("onMouseEnter",["mouseout","mouseover"]);Zr("onMouseLeave",["mouseout","mouseover"]);Zr("onPointerEnter",["pointerout","pointerover"]);Zr("onPointerLeave",["pointerout","pointerover"]);vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ps="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ug=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ps));function Hu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,im(r,t,void 0,e),e.currentTarget=null}function gp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==l&&s.isPropagationStopped())break e;Hu(s,i,d),l=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,d=i.currentTarget,i=i.listener,c!==l&&s.isPropagationStopped())break e;Hu(s,i,d),l=c}}}if(yo)throw e=bi,yo=!1,bi=null,e}function Te(e,t){var n=t[Di];n===void 0&&(n=t[Di]=new Set);var r=e+"__bubble";n.has(r)||(yp(t,e,2,!1),n.add(r))}function Oa(e,t,n){var r=0;t&&(r|=4),yp(n,e,r,t)}var Ol="_reactListening"+Math.random().toString(36).slice(2);function el(e){if(!e[Ol]){e[Ol]=!0,Nf.forEach(function(n){n!=="selectionchange"&&(ug.has(n)||Oa(n,!1,e),Oa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ol]||(t[Ol]=!0,Oa("selectionchange",!1,t))}}function yp(e,t,n,r){switch(tp(t)){case 1:var s=Sm;break;case 4:s=Nm;break;default:s=yc}n=s.bind(null,t,n,e),s=void 0,!wi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function $a(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=ar(i),a===null)return;if(c=a.tag,c===5||c===6){r=l=a;continue e}i=i.parentNode}}r=r.return}Bf(function(){var d=l,p=hc(n),f=[];e:{var h=mp.get(e);if(h!==void 0){var x=wc,w=e;switch(e){case"keypress":if(oo(n)===0)break e;case"keydown":case"keyup":x=Fm;break;case"focusin":w="focus",x=Da;break;case"focusout":w="blur",x=Da;break;case"beforeblur":case"afterblur":x=Da;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Du;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Mm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Hm;break;case fp:case pp:case hp:x=Dm;break;case xp:x=Vm;break;case"scroll":x=Cm;break;case"wheel":x=Ym;break;case"copy":case"cut":case"paste":x=Pm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Pu}var y=(t&4)!==0,b=!y&&e==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var m=d,v;m!==null;){v=m;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,g!==null&&(S=Ks(m,g),S!=null&&y.push(tl(m,S,v)))),b)break;m=m.return}0<y.length&&(h=new x(h,w,null,n,p),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==yi&&(w=n.relatedTarget||n.fromElement)&&(ar(w)||w[Nn]))break e;if((x||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,x?(w=n.relatedTarget||n.toElement,x=d,w=w?ar(w):null,w!==null&&(b=wr(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=d),x!==w)){if(y=Du,S="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(y=Pu,S="onPointerLeave",g="onPointerEnter",m="pointer"),b=x==null?h:$r(x),v=w==null?h:$r(w),h=new y(S,m+"leave",x,n,p),h.target=b,h.relatedTarget=v,S=null,ar(p)===d&&(y=new y(g,m+"enter",w,n,p),y.target=v,y.relatedTarget=b,S=y),b=S,x&&w)t:{for(y=x,g=w,m=0,v=y;v;v=Tr(v))m++;for(v=0,S=g;S;S=Tr(S))v++;for(;0<m-v;)y=Tr(y),m--;for(;0<v-m;)g=Tr(g),v--;for(;m--;){if(y===g||g!==null&&y===g.alternate)break t;y=Tr(y),g=Tr(g)}y=null}else y=null;x!==null&&Wu(f,h,x,y,!1),w!==null&&b!==null&&Wu(f,b,w,y,!0)}}e:{if(h=d?$r(d):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var j=eg;else if(Lu(h))if(ap)j=sg;else{j=ng;var N=tg}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=rg);if(j&&(j=j(e,d))){op(f,j,n,p);break e}N&&N(e,h,d),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&pi(h,"number",h.value)}switch(N=d?$r(d):window,e){case"focusin":(Lu(N)||N.contentEditable==="true")&&(Lr=N,Ni=d,$s=null);break;case"focusout":$s=Ni=Lr=null;break;case"mousedown":Ci=!0;break;case"contextmenu":case"mouseup":case"dragend":Ci=!1,Bu(f,n,p);break;case"selectionchange":if(ag)break;case"keydown":case"keyup":Bu(f,n,p)}var k;if(kc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ir?sp(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(rp&&n.locale!=="ko"&&(Ir||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ir&&(k=np()):($n=p,vc="value"in $n?$n.value:$n.textContent,Ir=!0)),N=jo(d,E),0<N.length&&(E=new Ru(E,e,null,n,p),f.push({event:E,listeners:N}),k?E.data=k:(k=lp(n),k!==null&&(E.data=k)))),(k=Qm?Gm(e,n):qm(e,n))&&(d=jo(d,"onBeforeInput"),0<d.length&&(p=new Ru("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:d}),p.data=k))}gp(f,t)})}function tl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=Ks(e,n),l!=null&&r.unshift(tl(e,l,s)),l=Ks(e,t),l!=null&&r.push(tl(e,l,s))),e=e.return}return r}function Tr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Wu(e,t,n,r,s){for(var l=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,d=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&d!==null&&(i=d,s?(c=Ks(n,l),c!=null&&a.unshift(tl(n,c,i))):s||(c=Ks(n,l),c!=null&&a.push(tl(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var dg=/\r\n?/g,fg=/\u0000|\uFFFD/g;function Vu(e){return(typeof e=="string"?e:""+e).replace(dg,`
`).replace(fg,"")}function $l(e,t,n){if(t=Vu(t),Vu(e)!==t&&n)throw Error(R(425))}function So(){}var Ei=null,Mi=null;function _i(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ti=typeof setTimeout=="function"?setTimeout:void 0,pg=typeof clearTimeout=="function"?clearTimeout:void 0,Xu=typeof Promise=="function"?Promise:void 0,hg=typeof queueMicrotask=="function"?queueMicrotask:typeof Xu!="undefined"?function(e){return Xu.resolve(null).then(e).catch(xg)}:Ti;function xg(e){setTimeout(function(){throw e})}function Aa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),qs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);qs(t)}function Wn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Yu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),pn="__reactFiber$"+ds,nl="__reactProps$"+ds,Nn="__reactContainer$"+ds,Di="__reactEvents$"+ds,mg="__reactListeners$"+ds,gg="__reactHandles$"+ds;function ar(e){var t=e[pn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Nn]||n[pn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Yu(e);e!==null;){if(n=e[pn])return n;e=Yu(e)}return t}e=n,n=e.parentNode}return null}function ml(e){return e=e[pn]||e[Nn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function $r(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function Jo(e){return e[nl]||null}var Ri=[],Ar=-1;function Jn(e){return{current:e}}function Re(e){0>Ar||(e.current=Ri[Ar],Ri[Ar]=null,Ar--)}function _e(e,t){Ar++,Ri[Ar]=e.current,e.current=t}var Gn={},xt=Jn(Gn),Mt=Jn(!1),pr=Gn;function es(e,t){var n=e.type.contextTypes;if(!n)return Gn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function _t(e){return e=e.childContextTypes,e!=null}function No(){Re(Mt),Re(xt)}function Ku(e,t,n){if(xt.current!==Gn)throw Error(R(168));_e(xt,t),_e(Mt,n)}function vp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(R(108,tm(e)||"Unknown",s));return Le({},n,r)}function Co(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gn,pr=xt.current,_e(xt,e),_e(Mt,Mt.current),!0}function Qu(e,t,n){var r=e.stateNode;if(!r)throw Error(R(169));n?(e=vp(e,t,pr),r.__reactInternalMemoizedMergedChildContext=e,Re(Mt),Re(xt),_e(xt,e)):Re(Mt),_e(Mt,n)}var wn=null,Zo=!1,Fa=!1;function wp(e){wn===null?wn=[e]:wn.push(e)}function yg(e){Zo=!0,wp(e)}function Zn(){if(!Fa&&wn!==null){Fa=!0;var e=0,t=Ee;try{var n=wn;for(Ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}wn=null,Zo=!1}catch(s){throw wn!==null&&(wn=wn.slice(e+1)),Vf(xc,Zn),s}finally{Ee=t,Fa=!1}}return null}var Fr=[],Br=0,Eo=null,Mo=0,Ht=[],Wt=0,hr=null,bn=1,kn="";function sr(e,t){Fr[Br++]=Mo,Fr[Br++]=Eo,Eo=e,Mo=t}function bp(e,t,n){Ht[Wt++]=bn,Ht[Wt++]=kn,Ht[Wt++]=hr,hr=e;var r=bn;e=kn;var s=32-en(r)-1;r&=~(1<<s),n+=1;var l=32-en(t)+s;if(30<l){var a=s-s%5;l=(r&(1<<a)-1).toString(32),r>>=a,s-=a,bn=1<<32-en(t)+s|n<<s|r,kn=l+e}else bn=1<<l|n<<s|r,kn=e}function Sc(e){e.return!==null&&(sr(e,1),bp(e,1,0))}function Nc(e){for(;e===Eo;)Eo=Fr[--Br],Fr[Br]=null,Mo=Fr[--Br],Fr[Br]=null;for(;e===hr;)hr=Ht[--Wt],Ht[Wt]=null,kn=Ht[--Wt],Ht[Wt]=null,bn=Ht[--Wt],Ht[Wt]=null}var Lt=null,It=null,Pe=!1,Zt=null;function kp(e,t){var n=Vt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Gu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Lt=e,It=Wn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Lt=e,It=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=hr!==null?{id:bn,overflow:kn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Vt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Lt=e,It=null,!0):!1;default:return!1}}function Pi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zi(e){if(Pe){var t=It;if(t){var n=t;if(!Gu(e,t)){if(Pi(e))throw Error(R(418));t=Wn(n.nextSibling);var r=Lt;t&&Gu(e,t)?kp(r,n):(e.flags=e.flags&-4097|2,Pe=!1,Lt=e)}}else{if(Pi(e))throw Error(R(418));e.flags=e.flags&-4097|2,Pe=!1,Lt=e}}}function qu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Lt=e}function Al(e){if(e!==Lt)return!1;if(!Pe)return qu(e),Pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_i(e.type,e.memoizedProps)),t&&(t=It)){if(Pi(e))throw jp(),Error(R(418));for(;t;)kp(e,t),t=Wn(t.nextSibling)}if(qu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){It=Wn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}It=null}}else It=Lt?Wn(e.stateNode.nextSibling):null;return!0}function jp(){for(var e=It;e;)e=Wn(e.nextSibling)}function ts(){It=Lt=null,Pe=!1}function Cc(e){Zt===null?Zt=[e]:Zt.push(e)}var vg=_n.ReactCurrentBatchConfig;function Ns(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var i=s.refs;a===null?delete i[l]:i[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,e))}return e}function Fl(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ju(e){var t=e._init;return t(e._payload)}function Sp(e){function t(g,m){if(e){var v=g.deletions;v===null?(g.deletions=[m],g.flags|=16):v.push(m)}}function n(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=Kn(g,m),g.index=0,g.sibling=null,g}function l(g,m,v){return g.index=v,e?(v=g.alternate,v!==null?(v=v.index,v<m?(g.flags|=2,m):v):(g.flags|=2,m)):(g.flags|=1048576,m)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,m,v,S){return m===null||m.tag!==6?(m=Ya(v,g.mode,S),m.return=g,m):(m=s(m,v),m.return=g,m)}function c(g,m,v,S){var j=v.type;return j===zr?p(g,m,v.props.children,S,v.key):m!==null&&(m.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Pn&&Ju(j)===m.type)?(S=s(m,v.props),S.ref=Ns(g,m,v),S.return=g,S):(S=ho(v.type,v.key,v.props,null,g.mode,S),S.ref=Ns(g,m,v),S.return=g,S)}function d(g,m,v,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Ka(v,g.mode,S),m.return=g,m):(m=s(m,v.children||[]),m.return=g,m)}function p(g,m,v,S,j){return m===null||m.tag!==7?(m=dr(v,g.mode,S,j),m.return=g,m):(m=s(m,v),m.return=g,m)}function f(g,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ya(""+m,g.mode,v),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case _l:return v=ho(m.type,m.key,m.props,null,g.mode,v),v.ref=Ns(g,null,m),v.return=g,v;case Pr:return m=Ka(m,g.mode,v),m.return=g,m;case Pn:var S=m._init;return f(g,S(m._payload),v)}if(Ds(m)||ws(m))return m=dr(m,g.mode,v,null),m.return=g,m;Fl(g,m)}return null}function h(g,m,v,S){var j=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return j!==null?null:i(g,m,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case _l:return v.key===j?c(g,m,v,S):null;case Pr:return v.key===j?d(g,m,v,S):null;case Pn:return j=v._init,h(g,m,j(v._payload),S)}if(Ds(v)||ws(v))return j!==null?null:p(g,m,v,S,null);Fl(g,v)}return null}function x(g,m,v,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(v)||null,i(m,g,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case _l:return g=g.get(S.key===null?v:S.key)||null,c(m,g,S,j);case Pr:return g=g.get(S.key===null?v:S.key)||null,d(m,g,S,j);case Pn:var N=S._init;return x(g,m,v,N(S._payload),j)}if(Ds(S)||ws(S))return g=g.get(v)||null,p(m,g,S,j,null);Fl(m,S)}return null}function w(g,m,v,S){for(var j=null,N=null,k=m,E=m=0,D=null;k!==null&&E<v.length;E++){k.index>E?(D=k,k=null):D=k.sibling;var P=h(g,k,v[E],S);if(P===null){k===null&&(k=D);break}e&&k&&P.alternate===null&&t(g,k),m=l(P,m,E),N===null?j=P:N.sibling=P,N=P,k=D}if(E===v.length)return n(g,k),Pe&&sr(g,E),j;if(k===null){for(;E<v.length;E++)k=f(g,v[E],S),k!==null&&(m=l(k,m,E),N===null?j=k:N.sibling=k,N=k);return Pe&&sr(g,E),j}for(k=r(g,k);E<v.length;E++)D=x(k,g,E,v[E],S),D!==null&&(e&&D.alternate!==null&&k.delete(D.key===null?E:D.key),m=l(D,m,E),N===null?j=D:N.sibling=D,N=D);return e&&k.forEach(function(L){return t(g,L)}),Pe&&sr(g,E),j}function y(g,m,v,S){var j=ws(v);if(typeof j!="function")throw Error(R(150));if(v=j.call(v),v==null)throw Error(R(151));for(var N=j=null,k=m,E=m=0,D=null,P=v.next();k!==null&&!P.done;E++,P=v.next()){k.index>E?(D=k,k=null):D=k.sibling;var L=h(g,k,P.value,S);if(L===null){k===null&&(k=D);break}e&&k&&L.alternate===null&&t(g,k),m=l(L,m,E),N===null?j=L:N.sibling=L,N=L,k=D}if(P.done)return n(g,k),Pe&&sr(g,E),j;if(k===null){for(;!P.done;E++,P=v.next())P=f(g,P.value,S),P!==null&&(m=l(P,m,E),N===null?j=P:N.sibling=P,N=P);return Pe&&sr(g,E),j}for(k=r(g,k);!P.done;E++,P=v.next())P=x(k,g,E,P.value,S),P!==null&&(e&&P.alternate!==null&&k.delete(P.key===null?E:P.key),m=l(P,m,E),N===null?j=P:N.sibling=P,N=P);return e&&k.forEach(function(ie){return t(g,ie)}),Pe&&sr(g,E),j}function b(g,m,v,S){if(typeof v=="object"&&v!==null&&v.type===zr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case _l:e:{for(var j=v.key,N=m;N!==null;){if(N.key===j){if(j=v.type,j===zr){if(N.tag===7){n(g,N.sibling),m=s(N,v.props.children),m.return=g,g=m;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Pn&&Ju(j)===N.type){n(g,N.sibling),m=s(N,v.props),m.ref=Ns(g,N,v),m.return=g,g=m;break e}n(g,N);break}else t(g,N);N=N.sibling}v.type===zr?(m=dr(v.props.children,g.mode,S,v.key),m.return=g,g=m):(S=ho(v.type,v.key,v.props,null,g.mode,S),S.ref=Ns(g,m,v),S.return=g,g=S)}return a(g);case Pr:e:{for(N=v.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(g,m.sibling),m=s(m,v.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else t(g,m);m=m.sibling}m=Ka(v,g.mode,S),m.return=g,g=m}return a(g);case Pn:return N=v._init,b(g,m,N(v._payload),S)}if(Ds(v))return w(g,m,v,S);if(ws(v))return y(g,m,v,S);Fl(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,v),m.return=g,g=m):(n(g,m),m=Ya(v,g.mode,S),m.return=g,g=m),a(g)):n(g,m)}return b}var ns=Sp(!0),Np=Sp(!1),_o=Jn(null),To=null,Ur=null,Ec=null;function Mc(){Ec=Ur=To=null}function _c(e){var t=_o.current;Re(_o),e._currentValue=t}function Ii(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Gr(e,t){To=e,Ec=Ur=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Et=!0),e.firstContext=null)}function Yt(e){var t=e._currentValue;if(Ec!==e)if(e={context:e,memoizedValue:t,next:null},Ur===null){if(To===null)throw Error(R(308));Ur=e,To.dependencies={lanes:0,firstContext:e}}else Ur=Ur.next=e;return t}var ir=null;function Tc(e){ir===null?ir=[e]:ir.push(e)}function Cp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Tc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Cn(e,r)}function Cn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var zn=!1;function Dc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ep(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,be&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Cn(e,n)}return s=r.interleaved,s===null?(t.next=t,Tc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Cn(e,n)}function ao(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,mc(e,n)}}function Zu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Do(e,t,n,r){var s=e.updateQueue;zn=!1;var l=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,d=c.next;c.next=null,a===null?l=d:a.next=d,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,i=p.lastBaseUpdate,i!==a&&(i===null?p.firstBaseUpdate=d:i.next=d,p.lastBaseUpdate=c))}if(l!==null){var f=s.baseState;a=0,p=d=c=null,i=l;do{var h=i.lane,x=i.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var w=e,y=i;switch(h=t,x=n,y.tag){case 1:if(w=y.payload,typeof w=="function"){f=w.call(x,f,h);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,h=typeof w=="function"?w.call(x,f,h):w,h==null)break e;f=Le({},f,h);break e;case 2:zn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[i]:h.push(i))}else x={eventTime:x,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},p===null?(d=p=x,c=f):p=p.next=x,a|=h;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;h=i,i=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);mr|=a,e.lanes=a,e.memoizedState=f}}function ed(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(R(191,s));s.call(r)}}}var gl={},xn=Jn(gl),rl=Jn(gl),sl=Jn(gl);function cr(e){if(e===gl)throw Error(R(174));return e}function Rc(e,t){switch(_e(sl,t),_e(rl,e),_e(xn,gl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:xi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=xi(t,e)}Re(xn),_e(xn,t)}function rs(){Re(xn),Re(rl),Re(sl)}function Mp(e){cr(sl.current);var t=cr(xn.current),n=xi(t,e.type);t!==n&&(_e(rl,e),_e(xn,n))}function Pc(e){rl.current===e&&(Re(xn),Re(rl))}var ze=Jn(0);function Ro(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ba=[];function zc(){for(var e=0;e<Ba.length;e++)Ba[e]._workInProgressVersionPrimary=null;Ba.length=0}var io=_n.ReactCurrentDispatcher,Ua=_n.ReactCurrentBatchConfig,xr=0,Ie=null,Ye=null,et=null,Po=!1,As=!1,ll=0,wg=0;function dt(){throw Error(R(321))}function Ic(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nn(e[n],t[n]))return!1;return!0}function Lc(e,t,n,r,s,l){if(xr=l,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=e===null||e.memoizedState===null?Sg:Ng,e=n(r,s),As){l=0;do{if(As=!1,ll=0,25<=l)throw Error(R(301));l+=1,et=Ye=null,t.updateQueue=null,io.current=Cg,e=n(r,s)}while(As)}if(io.current=zo,t=Ye!==null&&Ye.next!==null,xr=0,et=Ye=Ie=null,Po=!1,t)throw Error(R(300));return e}function Oc(){var e=ll!==0;return ll=0,e}function fn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Ie.memoizedState=et=e:et=et.next=e,et}function Kt(){if(Ye===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=et===null?Ie.memoizedState:et.next;if(t!==null)et=t,Ye=e;else{if(e===null)throw Error(R(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},et===null?Ie.memoizedState=et=e:et=et.next=e}return et}function ol(e,t){return typeof t=="function"?t(e):t}function Ha(e){var t=Kt(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=Ye,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var a=s.next;s.next=l.next,l.next=a}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var i=a=null,c=null,d=l;do{var p=d.lane;if((xr&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var f={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=f,a=r):c=c.next=f,Ie.lanes|=p,mr|=p}d=d.next}while(d!==null&&d!==l);c===null?a=r:c.next=i,nn(r,t.memoizedState)||(Et=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,Ie.lanes|=l,mr|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Wa(e){var t=Kt(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do l=e(l,a.action),a=a.next;while(a!==s);nn(l,t.memoizedState)||(Et=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function _p(){}function Tp(e,t){var n=Ie,r=Kt(),s=t(),l=!nn(r.memoizedState,s);if(l&&(r.memoizedState=s,Et=!0),r=r.queue,$c(Pp.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,al(9,Rp.bind(null,n,r,s,t),void 0,null),nt===null)throw Error(R(349));xr&30||Dp(n,t,s)}return s}function Dp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Rp(e,t,n,r){t.value=n,t.getSnapshot=r,zp(t)&&Ip(e)}function Pp(e,t,n){return n(function(){zp(t)&&Ip(e)})}function zp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nn(e,n)}catch(r){return!0}}function Ip(e){var t=Cn(e,1);t!==null&&tn(t,e,1,-1)}function td(e){var t=fn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:e},t.queue=e,e=e.dispatch=jg.bind(null,Ie,e),[t.memoizedState,e]}function al(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Lp(){return Kt().memoizedState}function co(e,t,n,r){var s=fn();Ie.flags|=e,s.memoizedState=al(1|t,n,void 0,r===void 0?null:r)}function ea(e,t,n,r){var s=Kt();r=r===void 0?null:r;var l=void 0;if(Ye!==null){var a=Ye.memoizedState;if(l=a.destroy,r!==null&&Ic(r,a.deps)){s.memoizedState=al(t,n,l,r);return}}Ie.flags|=e,s.memoizedState=al(1|t,n,l,r)}function nd(e,t){return co(8390656,8,e,t)}function $c(e,t){return ea(2048,8,e,t)}function Op(e,t){return ea(4,2,e,t)}function $p(e,t){return ea(4,4,e,t)}function Ap(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Fp(e,t,n){return n=n!=null?n.concat([e]):null,ea(4,4,Ap.bind(null,t,e),n)}function Ac(){}function Bp(e,t){var n=Kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ic(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Up(e,t){var n=Kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ic(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hp(e,t,n){return xr&21?(nn(n,t)||(n=Kf(),Ie.lanes|=n,mr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Et=!0),e.memoizedState=n)}function bg(e,t){var n=Ee;Ee=n!==0&&4>n?n:4,e(!0);var r=Ua.transition;Ua.transition={};try{e(!1),t()}finally{Ee=n,Ua.transition=r}}function Wp(){return Kt().memoizedState}function kg(e,t,n){var r=Yn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Vp(e))Xp(t,n);else if(n=Cp(e,t,n,r),n!==null){var s=vt();tn(n,e,r,s),Yp(n,t,r)}}function jg(e,t,n){var r=Yn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vp(e))Xp(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,i=l(a,n);if(s.hasEagerState=!0,s.eagerState=i,nn(i,a)){var c=t.interleaved;c===null?(s.next=s,Tc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch(d){}finally{}n=Cp(e,t,s,r),n!==null&&(s=vt(),tn(n,e,r,s),Yp(n,t,r))}}function Vp(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function Xp(e,t){As=Po=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,mc(e,n)}}var zo={readContext:Yt,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},Sg={readContext:Yt,useCallback:function(e,t){return fn().memoizedState=[e,t===void 0?null:t],e},useContext:Yt,useEffect:nd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,co(4194308,4,Ap.bind(null,t,e),n)},useLayoutEffect:function(e,t){return co(4194308,4,e,t)},useInsertionEffect:function(e,t){return co(4,2,e,t)},useMemo:function(e,t){var n=fn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=fn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=kg.bind(null,Ie,e),[r.memoizedState,e]},useRef:function(e){var t=fn();return e={current:e},t.memoizedState=e},useState:td,useDebugValue:Ac,useDeferredValue:function(e){return fn().memoizedState=e},useTransition:function(){var e=td(!1),t=e[0];return e=bg.bind(null,e[1]),fn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ie,s=fn();if(Pe){if(n===void 0)throw Error(R(407));n=n()}else{if(n=t(),nt===null)throw Error(R(349));xr&30||Dp(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,nd(Pp.bind(null,r,l,e),[e]),r.flags|=2048,al(9,Rp.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=fn(),t=nt.identifierPrefix;if(Pe){var n=kn,r=bn;n=(r&~(1<<32-en(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ll++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=wg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ng={readContext:Yt,useCallback:Bp,useContext:Yt,useEffect:$c,useImperativeHandle:Fp,useInsertionEffect:Op,useLayoutEffect:$p,useMemo:Up,useReducer:Ha,useRef:Lp,useState:function(){return Ha(ol)},useDebugValue:Ac,useDeferredValue:function(e){var t=Kt();return Hp(t,Ye.memoizedState,e)},useTransition:function(){var e=Ha(ol)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:_p,useSyncExternalStore:Tp,useId:Wp,unstable_isNewReconciler:!1},Cg={readContext:Yt,useCallback:Bp,useContext:Yt,useEffect:$c,useImperativeHandle:Fp,useInsertionEffect:Op,useLayoutEffect:$p,useMemo:Up,useReducer:Wa,useRef:Lp,useState:function(){return Wa(ol)},useDebugValue:Ac,useDeferredValue:function(e){var t=Kt();return Ye===null?t.memoizedState=e:Hp(t,Ye.memoizedState,e)},useTransition:function(){var e=Wa(ol)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:_p,useSyncExternalStore:Tp,useId:Wp,unstable_isNewReconciler:!1};function qt(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Li(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Le({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ta={isMounted:function(e){return(e=e._reactInternals)?wr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=vt(),s=Yn(e),l=jn(r,s);l.payload=t,n!=null&&(l.callback=n),t=Vn(e,l,s),t!==null&&(tn(t,e,s,r),ao(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=vt(),s=Yn(e),l=jn(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Vn(e,l,s),t!==null&&(tn(t,e,s,r),ao(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=vt(),r=Yn(e),s=jn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Vn(e,s,r),t!==null&&(tn(t,e,r,n),ao(t,e,r))}};function rd(e,t,n,r,s,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!Zs(n,r)||!Zs(s,l):!0}function Kp(e,t,n){var r=!1,s=Gn,l=t.contextType;return typeof l=="object"&&l!==null?l=Yt(l):(s=_t(t)?pr:xt.current,r=t.contextTypes,l=(r=r!=null)?es(e,s):Gn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ta,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function sd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ta.enqueueReplaceState(t,t.state,null)}function Oi(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Dc(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Yt(l):(l=_t(t)?pr:xt.current,s.context=es(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Li(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ta.enqueueReplaceState(s,s.state,null),Do(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ss(e,t){try{var n="",r=t;do n+=em(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function Va(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function $i(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Eg=typeof WeakMap=="function"?WeakMap:Map;function Qp(e,t,n){n=jn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Lo||(Lo=!0,Ki=r),$i(e,t)},n}function Gp(e,t,n){n=jn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){$i(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){$i(e,t),typeof r!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function ld(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Eg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Bg.bind(null,e,t,n),t.then(e,e))}function od(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ad(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=jn(-1,1),t.tag=2,Vn(n,t,1))),n.lanes|=1),e)}var Mg=_n.ReactCurrentOwner,Et=!1;function yt(e,t,n,r){t.child=e===null?Np(t,null,n,r):ns(t,e.child,n,r)}function id(e,t,n,r,s){n=n.render;var l=t.ref;return Gr(t,s),r=Lc(e,t,n,r,l,s),n=Oc(),e!==null&&!Et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,En(e,t,s)):(Pe&&n&&Sc(t),t.flags|=1,yt(e,t,r,s),t.child)}function cd(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!Yc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,qp(e,t,l,r,s)):(e=ho(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:Zs,n(a,r)&&e.ref===t.ref)return En(e,t,s)}return t.flags|=1,e=Kn(l,r),e.ref=t.ref,e.return=t,t.child=e}function qp(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(Zs(l,r)&&e.ref===t.ref)if(Et=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(Et=!0);else return t.lanes=e.lanes,En(e,t,s)}return Ai(e,t,n,r,s)}function Jp(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Wr,zt),zt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(Wr,zt),zt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,_e(Wr,zt),zt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,_e(Wr,zt),zt|=r;return yt(e,t,s,n),t.child}function Zp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ai(e,t,n,r,s){var l=_t(n)?pr:xt.current;return l=es(t,l),Gr(t,s),n=Lc(e,t,n,r,l,s),r=Oc(),e!==null&&!Et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,En(e,t,s)):(Pe&&r&&Sc(t),t.flags|=1,yt(e,t,n,s),t.child)}function ud(e,t,n,r,s){if(_t(n)){var l=!0;Co(t)}else l=!1;if(Gr(t,s),t.stateNode===null)uo(e,t),Kp(t,n,r),Oi(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Yt(d):(d=_t(n)?pr:xt.current,d=es(t,d));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==d)&&sd(t,a,r,d),zn=!1;var h=t.memoizedState;a.state=h,Do(t,r,a,s),c=t.memoizedState,i!==r||h!==c||Mt.current||zn?(typeof p=="function"&&(Li(t,n,p,r),c=t.memoizedState),(i=zn||rd(t,n,i,r,h,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ep(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:qt(t.type,i),a.props=d,f=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Yt(c):(c=_t(n)?pr:xt.current,c=es(t,c));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||h!==c)&&sd(t,a,r,c),zn=!1,h=t.memoizedState,a.state=h,Do(t,r,a,s);var w=t.memoizedState;i!==f||h!==w||Mt.current||zn?(typeof x=="function"&&(Li(t,n,x,r),w=t.memoizedState),(d=zn||rd(t,n,d,r,h,w,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Fi(e,t,n,r,l,s)}function Fi(e,t,n,r,s,l){Zp(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Qu(t,n,!1),En(e,t,l);r=t.stateNode,Mg.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ns(t,e.child,null,l),t.child=ns(t,null,i,l)):yt(e,t,i,l),t.memoizedState=r.state,s&&Qu(t,n,!0),t.child}function eh(e){var t=e.stateNode;t.pendingContext?Ku(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ku(e,t.context,!1),Rc(e,t.containerInfo)}function dd(e,t,n,r,s){return ts(),Cc(s),t.flags|=256,yt(e,t,n,r),t.child}var Bi={dehydrated:null,treeContext:null,retryLane:0};function Ui(e){return{baseLanes:e,cachePool:null,transitions:null}}function th(e,t,n){var r=t.pendingProps,s=ze.current,l=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),_e(ze,s&1),e===null)return zi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=sa(a,r,0,null),e=dr(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ui(n),t.memoizedState=Bi,e):Fc(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return _g(e,t,a,r,i,s,n);if(l){l=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Kn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?l=Kn(i,l):(l=dr(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?Ui(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=Bi,r}return l=e.child,e=l.sibling,r=Kn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fc(e,t){return t=sa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bl(e,t,n,r){return r!==null&&Cc(r),ns(t,e.child,null,n),e=Fc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _g(e,t,n,r,s,l,a){if(n)return t.flags&256?(t.flags&=-257,r=Va(Error(R(422))),Bl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=sa({mode:"visible",children:r.children},s,0,null),l=dr(l,s,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&ns(t,e.child,null,a),t.child.memoizedState=Ui(a),t.memoizedState=Bi,l);if(!(t.mode&1))return Bl(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(R(419)),r=Va(l,r,void 0),Bl(e,t,a,r)}if(i=(a&e.childLanes)!==0,Et||i){if(r=nt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,Cn(e,s),tn(r,e,s,-1))}return Xc(),r=Va(Error(R(421))),Bl(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Ug.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,It=Wn(s.nextSibling),Lt=t,Pe=!0,Zt=null,e!==null&&(Ht[Wt++]=bn,Ht[Wt++]=kn,Ht[Wt++]=hr,bn=e.id,kn=e.overflow,hr=t),t=Fc(t,r.children),t.flags|=4096,t)}function fd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ii(e.return,t,n)}function Xa(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function nh(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(yt(e,t,r.children,n),r=ze.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fd(e,n,t);else if(e.tag===19)fd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_e(ze,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ro(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Xa(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ro(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Xa(t,!0,n,null,l);break;case"together":Xa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function uo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function En(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,n=Kn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Kn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Tg(e,t,n){switch(t.tag){case 3:eh(t),ts();break;case 5:Mp(t);break;case 1:_t(t.type)&&Co(t);break;case 4:Rc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;_e(_o,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(_e(ze,ze.current&1),t.flags|=128,null):n&t.child.childLanes?th(e,t,n):(_e(ze,ze.current&1),e=En(e,t,n),e!==null?e.sibling:null);_e(ze,ze.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return nh(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(ze,ze.current),r)break;return null;case 22:case 23:return t.lanes=0,Jp(e,t,n)}return En(e,t,n)}var rh,Hi,sh,lh;rh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hi=function(){};sh=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,cr(xn.current);var l=null;switch(n){case"input":s=di(e,s),r=di(e,r),l=[];break;case"select":s=Le({},s,{value:void 0}),r=Le({},r,{value:void 0}),l=[];break;case"textarea":s=hi(e,s),r=hi(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=So)}mi(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var i=s[d];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Xs.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var c=r[d];if(i=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(l||(l=[]),l.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Xs.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Te("scroll",e),l||i===c||(l=[])):(l=l||[]).push(d,c))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};lh=function(e,t,n,r){n!==r&&(t.flags|=4)};function Cs(e,t){if(!Pe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Dg(e,t,n){var r=t.pendingProps;switch(Nc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(t),null;case 1:return _t(t.type)&&No(),ft(t),null;case 3:return r=t.stateNode,rs(),Re(Mt),Re(xt),zc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Al(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zt!==null&&(qi(Zt),Zt=null))),Hi(e,t),ft(t),null;case 5:Pc(t);var s=cr(sl.current);if(n=t.type,e!==null&&t.stateNode!=null)sh(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(R(166));return ft(t),null}if(e=cr(xn.current),Al(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[pn]=t,r[nl]=l,e=(t.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(s=0;s<Ps.length;s++)Te(Ps[s],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":bu(r,l),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Te("invalid",r);break;case"textarea":ju(r,l),Te("invalid",r)}mi(n,l),s=null;for(var a in l)if(l.hasOwnProperty(a)){var i=l[a];a==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&$l(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&$l(r.textContent,i,e),s=["children",""+i]):Xs.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Te("scroll",r)}switch(n){case"input":Tl(r),ku(r,l,!0);break;case"textarea":Tl(r),Su(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=So)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Pf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[pn]=t,e[nl]=r,rh(e,t,!1,!1),t.stateNode=e;e:{switch(a=gi(n,r),n){case"dialog":Te("cancel",e),Te("close",e),s=r;break;case"iframe":case"object":case"embed":Te("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ps.length;s++)Te(Ps[s],e);s=r;break;case"source":Te("error",e),s=r;break;case"img":case"image":case"link":Te("error",e),Te("load",e),s=r;break;case"details":Te("toggle",e),s=r;break;case"input":bu(e,r),s=di(e,r),Te("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Le({},r,{value:void 0}),Te("invalid",e);break;case"textarea":ju(e,r),s=hi(e,r),Te("invalid",e);break;default:s=r}mi(n,s),i=s;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?Lf(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&zf(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ys(e,c):typeof c=="number"&&Ys(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Xs.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Te("scroll",e):c!=null&&uc(e,l,c,a))}switch(n){case"input":Tl(e),ku(e,r,!1);break;case"textarea":Tl(e),Su(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Qn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Xr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Xr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=So)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ft(t),null;case 6:if(e&&t.stateNode!=null)lh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(R(166));if(n=cr(sl.current),cr(xn.current),Al(t)){if(r=t.stateNode,n=t.memoizedProps,r[pn]=t,(l=r.nodeValue!==n)&&(e=Lt,e!==null))switch(e.tag){case 3:$l(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$l(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pn]=t,t.stateNode=r}return ft(t),null;case 13:if(Re(ze),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pe&&It!==null&&t.mode&1&&!(t.flags&128))jp(),ts(),t.flags|=98560,l=!1;else if(l=Al(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(R(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(R(317));l[pn]=t}else ts(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ft(t),l=!1}else Zt!==null&&(qi(Zt),Zt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ze.current&1?Qe===0&&(Qe=3):Xc())),t.updateQueue!==null&&(t.flags|=4),ft(t),null);case 4:return rs(),Hi(e,t),e===null&&el(t.stateNode.containerInfo),ft(t),null;case 10:return _c(t.type._context),ft(t),null;case 17:return _t(t.type)&&No(),ft(t),null;case 19:if(Re(ze),l=t.memoizedState,l===null)return ft(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)Cs(l,!1);else{if(Qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Ro(e),a!==null){for(t.flags|=128,Cs(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _e(ze,ze.current&1|2),t.child}e=e.sibling}l.tail!==null&&Ae()>ls&&(t.flags|=128,r=!0,Cs(l,!1),t.lanes=4194304)}else{if(!r)if(e=Ro(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Cs(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!Pe)return ft(t),null}else 2*Ae()-l.renderingStartTime>ls&&n!==1073741824&&(t.flags|=128,r=!0,Cs(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ae(),t.sibling=null,n=ze.current,_e(ze,r?n&1|2:n&1),t):(ft(t),null);case 22:case 23:return Vc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?zt&1073741824&&(ft(t),t.subtreeFlags&6&&(t.flags|=8192)):ft(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function Rg(e,t){switch(Nc(t),t.tag){case 1:return _t(t.type)&&No(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return rs(),Re(Mt),Re(xt),zc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Pc(t),null;case 13:if(Re(ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));ts()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Re(ze),null;case 4:return rs(),null;case 10:return _c(t.type._context),null;case 22:case 23:return Vc(),null;case 24:return null;default:return null}}var Ul=!1,ht=!1,Pg=typeof WeakSet=="function"?WeakSet:Set,K=null;function Hr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(e,t,r)}else n.current=null}function Wi(e,t,n){try{n()}catch(r){Oe(e,t,r)}}var pd=!1;function zg(e,t){if(Ei=bo,e=up(),jc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch(S){n=null;break e}var a=0,i=-1,c=-1,d=0,p=0,f=e,h=null;t:for(;;){for(var x;f!==n||s!==0&&f.nodeType!==3||(i=a+s),f!==l||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)h=f,f=x;for(;;){if(f===e)break t;if(h===n&&++d===s&&(i=a),h===l&&++p===r&&(c=a),(x=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=x}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mi={focusedElem:e,selectionRange:n},bo=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,b=w.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:qt(t.type,y),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(S){Oe(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return w=pd,pd=!1,w}function Fs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&Wi(t,n,l)}s=s.next}while(s!==r)}}function na(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Vi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function oh(e){var t=e.alternate;t!==null&&(e.alternate=null,oh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pn],delete t[nl],delete t[Di],delete t[mg],delete t[gg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ah(e){return e.tag===5||e.tag===3||e.tag===4}function hd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ah(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=So));else if(r!==4&&(e=e.child,e!==null))for(Xi(e,t,n),e=e.sibling;e!==null;)Xi(e,t,n),e=e.sibling}function Yi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Yi(e,t,n),e=e.sibling;e!==null;)Yi(e,t,n),e=e.sibling}var at=null,Jt=!1;function Rn(e,t,n){for(n=n.child;n!==null;)ih(e,t,n),n=n.sibling}function ih(e,t,n){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Ko,n)}catch(i){}switch(n.tag){case 5:ht||Hr(n,t);case 6:var r=at,s=Jt;at=null,Rn(e,t,n),at=r,Jt=s,at!==null&&(Jt?(e=at,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(Jt?(e=at,n=n.stateNode,e.nodeType===8?Aa(e.parentNode,n):e.nodeType===1&&Aa(e,n),qs(e)):Aa(at,n.stateNode));break;case 4:r=at,s=Jt,at=n.stateNode.containerInfo,Jt=!0,Rn(e,t,n),at=r,Jt=s;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&Wi(n,t,a),s=s.next}while(s!==r)}Rn(e,t,n);break;case 1:if(!ht&&(Hr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Oe(n,t,i)}Rn(e,t,n);break;case 21:Rn(e,t,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,Rn(e,t,n),ht=r):Rn(e,t,n);break;default:Rn(e,t,n)}}function xd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Pg),t.forEach(function(r){var s=Hg.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:at=i.stateNode,Jt=!1;break e;case 3:at=i.stateNode.containerInfo,Jt=!0;break e;case 4:at=i.stateNode.containerInfo,Jt=!0;break e}i=i.return}if(at===null)throw Error(R(160));ih(l,a,s),at=null,Jt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Oe(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ch(t,e),t=t.sibling}function ch(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gt(t,e),dn(e),r&4){try{Fs(3,e,e.return),na(3,e)}catch(y){Oe(e,e.return,y)}try{Fs(5,e,e.return)}catch(y){Oe(e,e.return,y)}}break;case 1:Gt(t,e),dn(e),r&512&&n!==null&&Hr(n,n.return);break;case 5:if(Gt(t,e),dn(e),r&512&&n!==null&&Hr(n,n.return),e.flags&32){var s=e.stateNode;try{Ys(s,"")}catch(y){Oe(e,e.return,y)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&Df(s,l),gi(i,a);var d=gi(i,l);for(a=0;a<c.length;a+=2){var p=c[a],f=c[a+1];p==="style"?Lf(s,f):p==="dangerouslySetInnerHTML"?zf(s,f):p==="children"?Ys(s,f):uc(s,p,f,d)}switch(i){case"input":fi(s,l);break;case"textarea":Rf(s,l);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?Xr(s,!!l.multiple,x,!1):h!==!!l.multiple&&(l.defaultValue!=null?Xr(s,!!l.multiple,l.defaultValue,!0):Xr(s,!!l.multiple,l.multiple?[]:"",!1))}s[nl]=l}catch(y){Oe(e,e.return,y)}}break;case 6:if(Gt(t,e),dn(e),r&4){if(e.stateNode===null)throw Error(R(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(y){Oe(e,e.return,y)}}break;case 3:if(Gt(t,e),dn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qs(t.containerInfo)}catch(y){Oe(e,e.return,y)}break;case 4:Gt(t,e),dn(e);break;case 13:Gt(t,e),dn(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(Hc=Ae())),r&4&&xd(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(ht=(d=ht)||p,Gt(t,e),ht=d):Gt(t,e),dn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(K=e,p=e.child;p!==null;){for(f=K=p;K!==null;){switch(h=K,x=h.child,h.tag){case 0:case 11:case 14:case 15:Fs(4,h,h.return);break;case 1:Hr(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(y){Oe(r,n,y)}}break;case 5:Hr(h,h.return);break;case 22:if(h.memoizedState!==null){gd(f);continue}}x!==null?(x.return=h,K=x):gd(f)}p=p.sibling}e:for(p=null,f=e;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,d?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=If("display",a))}catch(y){Oe(e,e.return,y)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){Oe(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Gt(t,e),dn(e),r&4&&xd(e);break;case 21:break;default:Gt(t,e),dn(e)}}function dn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ah(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ys(s,""),r.flags&=-33);var l=hd(e);Yi(e,l,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=hd(e);Xi(e,i,a);break;default:throw Error(R(161))}}catch(c){Oe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ig(e,t,n){K=e,uh(e)}function uh(e,t,n){for(var r=(e.mode&1)!==0;K!==null;){var s=K,l=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ul;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||ht;i=Ul;var d=ht;if(Ul=a,(ht=c)&&!d)for(K=s;K!==null;)a=K,c=a.child,a.tag===22&&a.memoizedState!==null?yd(s):c!==null?(c.return=a,K=c):yd(s);for(;l!==null;)K=l,uh(l),l=l.sibling;K=s,Ul=i,ht=d}md(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,K=l):md(e)}}function md(e){for(;K!==null;){var t=K;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ht||na(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ht)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:qt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&ed(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ed(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&qs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}ht||t.flags&512&&Vi(t)}catch(h){Oe(t,t.return,h)}}if(t===e){K=null;break}if(n=t.sibling,n!==null){n.return=t.return,K=n;break}K=t.return}}function gd(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var n=t.sibling;if(n!==null){n.return=t.return,K=n;break}K=t.return}}function yd(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{na(4,t)}catch(c){Oe(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Oe(t,s,c)}}var l=t.return;try{Vi(t)}catch(c){Oe(t,l,c)}break;case 5:var a=t.return;try{Vi(t)}catch(c){Oe(t,a,c)}}}catch(c){Oe(t,t.return,c)}if(t===e){K=null;break}var i=t.sibling;if(i!==null){i.return=t.return,K=i;break}K=t.return}}var Lg=Math.ceil,Io=_n.ReactCurrentDispatcher,Bc=_n.ReactCurrentOwner,Xt=_n.ReactCurrentBatchConfig,be=0,nt=null,Be=null,it=0,zt=0,Wr=Jn(0),Qe=0,il=null,mr=0,ra=0,Uc=0,Bs=null,Ct=null,Hc=0,ls=1/0,vn=null,Lo=!1,Ki=null,Xn=null,Hl=!1,An=null,Oo=0,Us=0,Qi=null,fo=-1,po=0;function vt(){return be&6?Ae():fo!==-1?fo:fo=Ae()}function Yn(e){return e.mode&1?be&2&&it!==0?it&-it:vg.transition!==null?(po===0&&(po=Kf()),po):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:tp(e.type)),e):1}function tn(e,t,n,r){if(50<Us)throw Us=0,Qi=null,Error(R(185));hl(e,n,r),(!(be&2)||e!==nt)&&(e===nt&&(!(be&2)&&(ra|=n),Qe===4&&On(e,it)),Tt(e,r),n===1&&be===0&&!(t.mode&1)&&(ls=Ae()+500,Zo&&Zn()))}function Tt(e,t){var n=e.callbackNode;vm(e,t);var r=wo(e,e===nt?it:0);if(r===0)n!==null&&Eu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Eu(n),t===1)e.tag===0?yg(vd.bind(null,e)):wp(vd.bind(null,e)),hg(function(){!(be&6)&&Zn()}),n=null;else{switch(Qf(r)){case 1:n=xc;break;case 4:n=Xf;break;case 16:n=vo;break;case 536870912:n=Yf;break;default:n=vo}n=yh(n,dh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function dh(e,t){if(fo=-1,po=0,be&6)throw Error(R(327));var n=e.callbackNode;if(qr()&&e.callbackNode!==n)return null;var r=wo(e,e===nt?it:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=$o(e,r);else{t=r;var s=be;be|=2;var l=ph();(nt!==e||it!==t)&&(vn=null,ls=Ae()+500,ur(e,t));do try{Ag();break}catch(i){fh(e,i)}while(!0);Mc(),Io.current=l,be=s,Be!==null?t=0:(nt=null,it=0,t=Qe)}if(t!==0){if(t===2&&(s=ki(e),s!==0&&(r=s,t=Gi(e,s))),t===1)throw n=il,ur(e,0),On(e,r),Tt(e,Ae()),n;if(t===6)On(e,r);else{if(s=e.current.alternate,!(r&30)&&!Og(s)&&(t=$o(e,r),t===2&&(l=ki(e),l!==0&&(r=l,t=Gi(e,l))),t===1))throw n=il,ur(e,0),On(e,r),Tt(e,Ae()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(R(345));case 2:lr(e,Ct,vn);break;case 3:if(On(e,r),(r&130023424)===r&&(t=Hc+500-Ae(),10<t)){if(wo(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){vt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ti(lr.bind(null,e,Ct,vn),t);break}lr(e,Ct,vn);break;case 4:if(On(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-en(r);l=1<<a,a=t[a],a>s&&(s=a),r&=~l}if(r=s,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Lg(r/1960))-r,10<r){e.timeoutHandle=Ti(lr.bind(null,e,Ct,vn),r);break}lr(e,Ct,vn);break;case 5:lr(e,Ct,vn);break;default:throw Error(R(329))}}}return Tt(e,Ae()),e.callbackNode===n?dh.bind(null,e):null}function Gi(e,t){var n=Bs;return e.current.memoizedState.isDehydrated&&(ur(e,t).flags|=256),e=$o(e,t),e!==2&&(t=Ct,Ct=n,t!==null&&qi(t)),e}function qi(e){Ct===null?Ct=e:Ct.push.apply(Ct,e)}function Og(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!nn(l(),s))return!1}catch(a){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function On(e,t){for(t&=~Uc,t&=~ra,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-en(t),r=1<<n;e[n]=-1,t&=~r}}function vd(e){if(be&6)throw Error(R(327));qr();var t=wo(e,0);if(!(t&1))return Tt(e,Ae()),null;var n=$o(e,t);if(e.tag!==0&&n===2){var r=ki(e);r!==0&&(t=r,n=Gi(e,r))}if(n===1)throw n=il,ur(e,0),On(e,t),Tt(e,Ae()),n;if(n===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lr(e,Ct,vn),Tt(e,Ae()),null}function Wc(e,t){var n=be;be|=1;try{return e(t)}finally{be=n,be===0&&(ls=Ae()+500,Zo&&Zn())}}function gr(e){An!==null&&An.tag===0&&!(be&6)&&qr();var t=be;be|=1;var n=Xt.transition,r=Ee;try{if(Xt.transition=null,Ee=1,e)return e()}finally{Ee=r,Xt.transition=n,be=t,!(be&6)&&Zn()}}function Vc(){zt=Wr.current,Re(Wr)}function ur(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,pg(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(Nc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&No();break;case 3:rs(),Re(Mt),Re(xt),zc();break;case 5:Pc(r);break;case 4:rs();break;case 13:Re(ze);break;case 19:Re(ze);break;case 10:_c(r.type._context);break;case 22:case 23:Vc()}n=n.return}if(nt=e,Be=e=Kn(e.current,null),it=zt=t,Qe=0,il=null,Uc=ra=mr=0,Ct=Bs=null,ir!==null){for(t=0;t<ir.length;t++)if(n=ir[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=s,r.next=a}n.pending=r}ir=null}return e}function fh(e,t){do{var n=Be;try{if(Mc(),io.current=zo,Po){for(var r=Ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Po=!1}if(xr=0,et=Ye=Ie=null,As=!1,ll=0,Bc.current=null,n===null||n.return===null){Qe=1,il=t,Be=null;break}e:{var l=e,a=n.return,i=n,c=t;if(t=it,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=i,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=od(a);if(x!==null){x.flags&=-257,ad(x,a,i,l,t),x.mode&1&&ld(l,d,t),t=x,c=d;var w=t.updateQueue;if(w===null){var y=new Set;y.add(c),t.updateQueue=y}else w.add(c);break e}else{if(!(t&1)){ld(l,d,t),Xc();break e}c=Error(R(426))}}else if(Pe&&i.mode&1){var b=od(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),ad(b,a,i,l,t),Cc(ss(c,i));break e}}l=c=ss(c,i),Qe!==4&&(Qe=2),Bs===null?Bs=[l]:Bs.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var g=Qp(l,c,t);Zu(l,g);break e;case 1:i=c;var m=l.type,v=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Xn===null||!Xn.has(v)))){l.flags|=65536,t&=-t,l.lanes|=t;var S=Gp(l,i,t);Zu(l,S);break e}}l=l.return}while(l!==null)}xh(n)}catch(j){t=j,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function ph(){var e=Io.current;return Io.current=zo,e===null?zo:e}function Xc(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),nt===null||!(mr&268435455)&&!(ra&268435455)||On(nt,it)}function $o(e,t){var n=be;be|=2;var r=ph();(nt!==e||it!==t)&&(vn=null,ur(e,t));do try{$g();break}catch(s){fh(e,s)}while(!0);if(Mc(),be=n,Io.current=r,Be!==null)throw Error(R(261));return nt=null,it=0,Qe}function $g(){for(;Be!==null;)hh(Be)}function Ag(){for(;Be!==null&&!um();)hh(Be)}function hh(e){var t=gh(e.alternate,e,zt);e.memoizedProps=e.pendingProps,t===null?xh(e):Be=t,Bc.current=null}function xh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Rg(n,t),n!==null){n.flags&=32767,Be=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qe=6,Be=null;return}}else if(n=Dg(n,t,zt),n!==null){Be=n;return}if(t=t.sibling,t!==null){Be=t;return}Be=t=e}while(t!==null);Qe===0&&(Qe=5)}function lr(e,t,n){var r=Ee,s=Xt.transition;try{Xt.transition=null,Ee=1,Fg(e,t,n,r)}finally{Xt.transition=s,Ee=r}return null}function Fg(e,t,n,r){do qr();while(An!==null);if(be&6)throw Error(R(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(wm(e,l),e===nt&&(Be=nt=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hl||(Hl=!0,yh(vo,function(){return qr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Xt.transition,Xt.transition=null;var a=Ee;Ee=1;var i=be;be|=4,Bc.current=null,zg(e,n),ch(n,e),og(Mi),bo=!!Ei,Mi=Ei=null,e.current=n,Ig(n),dm(),be=i,Ee=a,Xt.transition=l}else e.current=n;if(Hl&&(Hl=!1,An=e,Oo=s),l=e.pendingLanes,l===0&&(Xn=null),hm(n.stateNode),Tt(e,Ae()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Lo)throw Lo=!1,e=Ki,Ki=null,e;return Oo&1&&e.tag!==0&&qr(),l=e.pendingLanes,l&1?e===Qi?Us++:(Us=0,Qi=e):Us=0,Zn(),null}function qr(){if(An!==null){var e=Qf(Oo),t=Xt.transition,n=Ee;try{if(Xt.transition=null,Ee=16>e?16:e,An===null)var r=!1;else{if(e=An,An=null,Oo=0,be&6)throw Error(R(331));var s=be;for(be|=4,K=e.current;K!==null;){var l=K,a=l.child;if(K.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(K=d;K!==null;){var p=K;switch(p.tag){case 0:case 11:case 15:Fs(8,p,l)}var f=p.child;if(f!==null)f.return=p,K=f;else for(;K!==null;){p=K;var h=p.sibling,x=p.return;if(oh(p),p===d){K=null;break}if(h!==null){h.return=x,K=h;break}K=x}}}var w=l.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}K=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,K=a;else e:for(;K!==null;){if(l=K,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Fs(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,K=g;break e}K=l.return}}var m=e.current;for(K=m;K!==null;){a=K;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,K=v;else e:for(a=m;K!==null;){if(i=K,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:na(9,i)}}catch(j){Oe(i,i.return,j)}if(i===a){K=null;break e}var S=i.sibling;if(S!==null){S.return=i.return,K=S;break e}K=i.return}}if(be=s,Zn(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Ko,e)}catch(j){}r=!0}return r}finally{Ee=n,Xt.transition=t}}return!1}function wd(e,t,n){t=ss(n,t),t=Qp(e,t,1),e=Vn(e,t,1),t=vt(),e!==null&&(hl(e,1,t),Tt(e,t))}function Oe(e,t,n){if(e.tag===3)wd(e,e,n);else for(;t!==null;){if(t.tag===3){wd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xn===null||!Xn.has(r))){e=ss(n,e),e=Gp(t,e,1),t=Vn(t,e,1),e=vt(),t!==null&&(hl(t,1,e),Tt(t,e));break}}t=t.return}}function Bg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=vt(),e.pingedLanes|=e.suspendedLanes&n,nt===e&&(it&n)===n&&(Qe===4||Qe===3&&(it&130023424)===it&&500>Ae()-Hc?ur(e,0):Uc|=n),Tt(e,t)}function mh(e,t){t===0&&(e.mode&1?(t=Pl,Pl<<=1,!(Pl&130023424)&&(Pl=4194304)):t=1);var n=vt();e=Cn(e,t),e!==null&&(hl(e,t,n),Tt(e,n))}function Ug(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),mh(e,n)}function Hg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(t),mh(e,n)}var gh;gh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mt.current)Et=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Et=!1,Tg(e,t,n);Et=!!(e.flags&131072)}else Et=!1,Pe&&t.flags&1048576&&bp(t,Mo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;uo(e,t),e=t.pendingProps;var s=es(t,xt.current);Gr(t,n),s=Lc(null,t,r,e,s,n);var l=Oc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_t(r)?(l=!0,Co(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Dc(t),s.updater=ta,t.stateNode=s,s._reactInternals=t,Oi(t,r,e,n),t=Fi(null,t,r,!0,l,n)):(t.tag=0,Pe&&l&&Sc(t),yt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(uo(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Vg(r),e=qt(r,e),s){case 0:t=Ai(null,t,r,e,n);break e;case 1:t=ud(null,t,r,e,n);break e;case 11:t=id(null,t,r,e,n);break e;case 14:t=cd(null,t,r,qt(r.type,e),n);break e}throw Error(R(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),Ai(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),ud(e,t,r,s,n);case 3:e:{if(eh(t),e===null)throw Error(R(387));r=t.pendingProps,l=t.memoizedState,s=l.element,Ep(e,t),Do(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=ss(Error(R(423)),t),t=dd(e,t,r,n,s);break e}else if(r!==s){s=ss(Error(R(424)),t),t=dd(e,t,r,n,s);break e}else for(It=Wn(t.stateNode.containerInfo.firstChild),Lt=t,Pe=!0,Zt=null,n=Np(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ts(),r===s){t=En(e,t,n);break e}yt(e,t,r,n)}t=t.child}return t;case 5:return Mp(t),e===null&&zi(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,a=s.children,_i(r,s)?a=null:l!==null&&_i(r,l)&&(t.flags|=32),Zp(e,t),yt(e,t,a,n),t.child;case 6:return e===null&&zi(t),null;case 13:return th(e,t,n);case 4:return Rc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ns(t,null,r,n):yt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),id(e,t,r,s,n);case 7:return yt(e,t,t.pendingProps,n),t.child;case 8:return yt(e,t,t.pendingProps.children,n),t.child;case 12:return yt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,a=s.value,_e(_o,r._currentValue),r._currentValue=a,l!==null)if(nn(l.value,a)){if(l.children===s.children&&!Mt.current){t=En(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){a=l.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=jn(-1,n&-n),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),Ii(l.return,n,t),i.lanes|=n;break}c=c.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(R(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),Ii(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}yt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Gr(t,n),s=Yt(s),r=r(s),t.flags|=1,yt(e,t,r,n),t.child;case 14:return r=t.type,s=qt(r,t.pendingProps),s=qt(r.type,s),cd(e,t,r,s,n);case 15:return qp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),uo(e,t),t.tag=1,_t(r)?(e=!0,Co(t)):e=!1,Gr(t,n),Kp(t,r,s),Oi(t,r,s,n),Fi(null,t,r,!0,e,n);case 19:return nh(e,t,n);case 22:return Jp(e,t,n)}throw Error(R(156,t.tag))};function yh(e,t){return Vf(e,t)}function Wg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(e,t,n,r){return new Wg(e,t,n,r)}function Yc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vg(e){if(typeof e=="function")return Yc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fc)return 11;if(e===pc)return 14}return 2}function Kn(e,t){var n=e.alternate;return n===null?(n=Vt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ho(e,t,n,r,s,l){var a=2;if(r=e,typeof e=="function")Yc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case zr:return dr(n.children,s,l,t);case dc:a=8,s|=8;break;case ai:return e=Vt(12,n,t,s|2),e.elementType=ai,e.lanes=l,e;case ii:return e=Vt(13,n,t,s),e.elementType=ii,e.lanes=l,e;case ci:return e=Vt(19,n,t,s),e.elementType=ci,e.lanes=l,e;case Mf:return sa(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Cf:a=10;break e;case Ef:a=9;break e;case fc:a=11;break e;case pc:a=14;break e;case Pn:a=16,r=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=Vt(a,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function dr(e,t,n,r){return e=Vt(7,e,r,t),e.lanes=n,e}function sa(e,t,n,r){return e=Vt(22,e,r,t),e.elementType=Mf,e.lanes=n,e.stateNode={isHidden:!1},e}function Ya(e,t,n){return e=Vt(6,e,null,t),e.lanes=n,e}function Ka(e,t,n){return t=Vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xg(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ma(0),this.expirationTimes=Ma(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ma(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kc(e,t,n,r,s,l,a,i,c){return e=new Xg(e,t,n,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Vt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dc(l),e}function Yg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function vh(e){if(!e)return Gn;e=e._reactInternals;e:{if(wr(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_t(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var n=e.type;if(_t(n))return vp(e,n,t)}return t}function wh(e,t,n,r,s,l,a,i,c){return e=Kc(n,r,!0,e,s,l,a,i,c),e.context=vh(null),n=e.current,r=vt(),s=Yn(n),l=jn(r,s),l.callback=t!=null?t:null,Vn(n,l,s),e.current.lanes=s,hl(e,s,r),Tt(e,r),e}function la(e,t,n,r){var s=t.current,l=vt(),a=Yn(s);return n=vh(n),t.context===null?t.context=n:t.pendingContext=n,t=jn(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Vn(s,t,a),e!==null&&(tn(e,s,a,l),ao(e,s,a)),a}function Ao(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Qc(e,t){bd(e,t),(e=e.alternate)&&bd(e,t)}function Kg(){return null}var bh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}oa.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));la(e,t,null,null)};oa.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gr(function(){la(null,e,null,null)}),t[Nn]=null}};function oa(e){this._internalRoot=e}oa.prototype.unstable_scheduleHydration=function(e){if(e){var t=Jf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ln.length&&t!==0&&t<Ln[n].priority;n++);Ln.splice(n,0,e),n===0&&ep(e)}};function qc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function aa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kd(){}function Qg(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var d=Ao(a);l.call(d)}}var a=wh(t,r,e,0,null,!1,!1,"",kd);return e._reactRootContainer=a,e[Nn]=a.current,el(e.nodeType===8?e.parentNode:e),gr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var d=Ao(c);i.call(d)}}var c=Kc(e,0,!1,null,null,!1,!1,"",kd);return e._reactRootContainer=c,e[Nn]=c.current,el(e.nodeType===8?e.parentNode:e),gr(function(){la(t,c,n,r)}),c}function ia(e,t,n,r,s){var l=n._reactRootContainer;if(l){var a=l;if(typeof s=="function"){var i=s;s=function(){var c=Ao(a);i.call(c)}}la(t,a,e,s)}else a=Qg(n,t,e,s,r);return Ao(a)}Gf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Rs(t.pendingLanes);n!==0&&(mc(t,n|1),Tt(t,Ae()),!(be&6)&&(ls=Ae()+500,Zn()))}break;case 13:gr(function(){var r=Cn(e,1);if(r!==null){var s=vt();tn(r,e,1,s)}}),Qc(e,1)}};gc=function(e){if(e.tag===13){var t=Cn(e,134217728);if(t!==null){var n=vt();tn(t,e,134217728,n)}Qc(e,134217728)}};qf=function(e){if(e.tag===13){var t=Yn(e),n=Cn(e,t);if(n!==null){var r=vt();tn(n,e,t,r)}Qc(e,t)}};Jf=function(){return Ee};Zf=function(e,t){var n=Ee;try{return Ee=e,t()}finally{Ee=n}};vi=function(e,t,n){switch(t){case"input":if(fi(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Jo(r);if(!s)throw Error(R(90));Tf(r),fi(r,s)}}}break;case"textarea":Rf(e,n);break;case"select":t=n.value,t!=null&&Xr(e,!!n.multiple,t,!1)}};Af=Wc;Ff=gr;var Gg={usingClientEntryPoint:!1,Events:[ml,$r,Jo,Of,$f,Wc]},Es={findFiberByHostInstance:ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qg={bundleType:Es.bundleType,version:Es.version,rendererPackageName:Es.rendererPackageName,rendererConfig:Es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Hf(e),e===null?null:e.stateNode},findFiberByHostInstance:Es.findFiberByHostInstance||Kg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wl.isDisabled&&Wl.supportsFiber)try{Ko=Wl.inject(qg),hn=Wl}catch(e){}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gg;$t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qc(t))throw Error(R(200));return Yg(e,t,null,n)};$t.createRoot=function(e,t){if(!qc(e))throw Error(R(299));var n=!1,r="",s=bh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Kc(e,1,!1,null,null,n,!1,r,s),e[Nn]=t.current,el(e.nodeType===8?e.parentNode:e),new Gc(t)};$t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=Hf(t),e=e===null?null:e.stateNode,e};$t.flushSync=function(e){return gr(e)};$t.hydrate=function(e,t,n){if(!aa(t))throw Error(R(200));return ia(null,e,t,!0,n)};$t.hydrateRoot=function(e,t,n){if(!qc(e))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",a=bh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=wh(t,null,e,1,n!=null?n:null,s,!1,l,a),e[Nn]=t.current,el(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new oa(t)};$t.render=function(e,t,n){if(!aa(t))throw Error(R(200));return ia(null,e,t,!1,n)};$t.unmountComponentAtNode=function(e){if(!aa(e))throw Error(R(40));return e._reactRootContainer?(gr(function(){ia(null,null,e,!1,function(){e._reactRootContainer=null,e[Nn]=null})}),!0):!1};$t.unstable_batchedUpdates=Wc;$t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!aa(n))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return ia(e,t,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function kh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kh)}catch(e){console.error(e)}}kh(),kf.exports=$t;var Vr=kf.exports,jd=Vr;li.createRoot=jd.createRoot,li.hydrateRoot=jd.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cl.apply(this,arguments)}var Fn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Fn||(Fn={}));const Sd="popstate";function Jg(e){e===void 0&&(e={});function t(s,l){let{pathname:a="/",search:i="",hash:c=""}=br(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Ji("",{pathname:a,search:i,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(s,l){let a=s.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");i=d===-1?c:c.slice(0,d)}return i+"#"+(typeof l=="string"?l:jh(l))}function r(s,l){ca(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return ey(t,n,r,e)}function Ge(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function ca(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Zg(){return Math.random().toString(36).substr(2,8)}function Nd(e,t){return{usr:e.state,key:e.key,idx:t}}function Ji(e,t,n,r){return n===void 0&&(n=null),cl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?br(t):t,{state:n,key:t&&t.key||r||Zg()})}function jh(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function br(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ey(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,a=s.history,i=Fn.Pop,c=null,d=p();d==null&&(d=0,a.replaceState(cl({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function f(){i=Fn.Pop;let b=p(),g=b==null?null:b-d;d=b,c&&c({action:i,location:y.location,delta:g})}function h(b,g){i=Fn.Push;let m=Ji(y.location,b,g);n&&n(m,b),d=p()+1;let v=Nd(m,d),S=y.createHref(m);try{a.pushState(v,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}l&&c&&c({action:i,location:y.location,delta:1})}function x(b,g){i=Fn.Replace;let m=Ji(y.location,b,g);n&&n(m,b),d=p();let v=Nd(m,d),S=y.createHref(m);a.replaceState(v,"",S),l&&c&&c({action:i,location:y.location,delta:0})}function w(b){let g=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof b=="string"?b:jh(b);return m=m.replace(/ $/,"%20"),Ge(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let y={get action(){return i},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Sd,f),c=b,()=>{s.removeEventListener(Sd,f),c=null}},createHref(b){return t(s,b)},createURL:w,encodeLocation(b){let g=w(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:x,go(b){return a.go(b)}};return y}var Cd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Cd||(Cd={}));function ty(e,t,n){return n===void 0&&(n="/"),ny(e,t,n)}function ny(e,t,n,r){let s=typeof t=="string"?br(t):t,l=Ch(s.pathname||"/",n);if(l==null)return null;let a=Sh(e);ry(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let d=xy(l);i=fy(a[c],d)}return i}function Sh(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,a,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:a,route:l};c.relativePath.startsWith("/")&&(Ge(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=fr([r,c.relativePath]),p=n.concat(c);l.children&&l.children.length>0&&(Ge(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Sh(l.children,t,p,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:uy(d,l.index),routesMeta:p})};return e.forEach((l,a)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))s(l,a);else for(let c of Nh(l.path))s(l,a,c)}),t}function Nh(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let a=Nh(r.join("/")),i=[];return i.push(...a.map(c=>c===""?l:[l,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function ry(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:dy(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const sy=/^:[\w-]+$/,ly=3,oy=2,ay=1,iy=10,cy=-2,Ed=e=>e==="*";function uy(e,t){let n=e.split("/"),r=n.length;return n.some(Ed)&&(r+=cy),t&&(r+=oy),n.filter(s=>!Ed(s)).reduce((s,l)=>s+(sy.test(l)?ly:l===""?ay:iy),r)}function dy(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function fy(e,t,n){let{routesMeta:r}=e,s={},l="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],d=i===r.length-1,p=l==="/"?t:t.slice(l.length)||"/",f=py({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),h=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:fr([l,f.pathname]),pathnameBase:ky(fr([l,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(l=fr([l,f.pathnameBase]))}return a}function py(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=hy(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],a=l.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((d,p,f)=>{let{paramName:h,isOptional:x}=p;if(h==="*"){let y=i[f]||"";a=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const w=i[f];return x&&!w?d[h]=void 0:d[h]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:a,pattern:e}}function hy(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ca(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function xy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ca(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ch(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const my=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gy=e=>my.test(e);function yy(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?br(e):e,l;if(n)if(gy(n))l=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),ca(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?l=Md(n.substring(1),"/"):l=Md(n,t)}else l=t;return{pathname:l,search:jy(r),hash:Sy(s)}}function Md(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Qa(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vy(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function wy(e,t){let n=vy(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function by(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=br(e):(s=cl({},e),Ge(!s.pathname||!s.pathname.includes("?"),Qa("?","pathname","search",s)),Ge(!s.pathname||!s.pathname.includes("#"),Qa("#","pathname","hash",s)),Ge(!s.search||!s.search.includes("#"),Qa("#","search","hash",s)));let l=e===""||s.pathname==="",a=l?"/":s.pathname,i;if(a==null)i=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}i=f>=0?t[f]:"/"}let c=yy(s,i),d=a&&a!=="/"&&a.endsWith("/"),p=(l||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const fr=e=>e.join("/").replace(/\/\/+/g,"/"),ky=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),jy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Sy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ny(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Eh=["post","put","patch","delete"];new Set(Eh);const Cy=["get",...Eh];new Set(Cy);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ul(){return ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ul.apply(this,arguments)}const Jc=u.createContext(null),Ey=u.createContext(null),ua=u.createContext(null),da=u.createContext(null),kr=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Mh=u.createContext(null);function fa(){return u.useContext(da)!=null}function Zc(){return fa()||Ge(!1),u.useContext(da).location}function _h(e){u.useContext(ua).static||u.useLayoutEffect(e)}function Ft(){let{isDataRoute:e}=u.useContext(kr);return e?Fy():My()}function My(){fa()||Ge(!1);let e=u.useContext(Jc),{basename:t,future:n,navigator:r}=u.useContext(ua),{matches:s}=u.useContext(kr),{pathname:l}=Zc(),a=JSON.stringify(wy(s,n.v7_relativeSplatPath)),i=u.useRef(!1);return _h(()=>{i.current=!0}),u.useCallback(function(d,p){if(p===void 0&&(p={}),!i.current)return;if(typeof d=="number"){r.go(d);return}let f=by(d,JSON.parse(a),l,p.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:fr([t,f.pathname])),(p.replace?r.replace:r.push)(f,p.state,p)},[t,r,a,l,e])}function Th(){let{matches:e}=u.useContext(kr),t=e[e.length-1];return t?t.params:{}}function _y(e,t){return Ty(e,t)}function Ty(e,t,n,r){fa()||Ge(!1);let{navigator:s}=u.useContext(ua),{matches:l}=u.useContext(kr),a=l[l.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Zc(),p;if(t){var f;let b=typeof t=="string"?br(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Ge(!1),p=b}else p=d;let h=p.pathname||"/",x=h;if(c!=="/"){let b=c.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=ty(e,{pathname:x}),y=Iy(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},i,b.params),pathname:fr([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:fr([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,n,r);return t&&y?u.createElement(da.Provider,{value:{location:ul({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Fn.Pop}},y):y}function Dy(){let e=Ay(),t=Ny(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:s},n):null,null)}const Ry=u.createElement(Dy,null);class Py extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(kr.Provider,{value:this.props.routeContext},u.createElement(Mh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zy(e){let{routeContext:t,match:n,children:r}=e,s=u.useContext(Jc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(kr.Provider,{value:t},r)}function Iy(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let p=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);p>=0||Ge(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let f=a[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=p),f.route.id){let{loaderData:h,errors:x}=n,w=f.route.loader&&h[f.route.id]===void 0&&(!x||x[f.route.id]===void 0);if(f.route.lazy||w){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,f,h)=>{let x,w=!1,y=null,b=null;n&&(x=i&&f.route.id?i[f.route.id]:void 0,y=f.route.errorElement||Ry,c&&(d<0&&h===0?(By("route-fallback"),w=!0,b=null):d===h&&(w=!0,b=f.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,h+1)),m=()=>{let v;return x?v=y:w?v=b:f.route.Component?v=u.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=p,u.createElement(zy,{match:f,routeContext:{outlet:p,matches:g,isDataRoute:n!=null},children:v})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?u.createElement(Py,{location:n.location,revalidation:n.revalidation,component:y,error:x,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var Dh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Dh||{}),Rh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Rh||{});function Ly(e){let t=u.useContext(Jc);return t||Ge(!1),t}function Oy(e){let t=u.useContext(Ey);return t||Ge(!1),t}function $y(e){let t=u.useContext(kr);return t||Ge(!1),t}function Ph(e){let t=$y(),n=t.matches[t.matches.length-1];return n.route.id||Ge(!1),n.route.id}function Ay(){var e;let t=u.useContext(Mh),n=Oy(),r=Ph();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Fy(){let{router:e}=Ly(Dh.UseNavigateStable),t=Ph(Rh.UseNavigateStable),n=u.useRef(!1);return _h(()=>{n.current=!0}),u.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ul({fromRouteId:t},l)))},[e,t])}const _d={};function By(e,t,n){_d[e]||(_d[e]=!0)}function Uy(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function pt(e){Ge(!1)}function Hy(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Fn.Pop,navigator:l,static:a=!1,future:i}=e;fa()&&Ge(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:l,static:a,future:ul({v7_relativeSplatPath:!1},i)}),[c,i,l,a]);typeof r=="string"&&(r=br(r));let{pathname:p="/",search:f="",hash:h="",state:x=null,key:w="default"}=r,y=u.useMemo(()=>{let b=Ch(p,c);return b==null?null:{location:{pathname:b,search:f,hash:h,state:x,key:w},navigationType:s}},[c,p,f,h,x,w,s]);return y==null?null:u.createElement(ua.Provider,{value:d},u.createElement(da.Provider,{children:n,value:y}))}function Wy(e){let{children:t,location:n}=e;return _y(Zi(t),n)}new Promise(()=>{});function Zi(e,t){t===void 0&&(t=[]);let n=[];return u.Children.forEach(e,(r,s)=>{if(!u.isValidElement(r))return;let l=[...t,s];if(r.type===u.Fragment){n.push.apply(n,Zi(r.props.children,l));return}r.type!==pt&&Ge(!1),!r.props.index||!r.props.children||Ge(!1);let a={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Zi(r.props.children,l)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Vy="6";try{window.__reactRouterVersion=Vy}catch(e){}const Xy="startTransition",Td=Bx[Xy];function Yy(e){let{basename:t,children:n,future:r,window:s}=e,l=u.useRef();l.current==null&&(l.current=Jg({window:s,v5Compat:!0}));let a=l.current,[i,c]=u.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},p=u.useCallback(f=>{d&&Td?Td(()=>c(f)):c(f)},[c,d]);return u.useLayoutEffect(()=>a.listen(p),[a,p]),u.useEffect(()=>Uy(r),[r]),u.createElement(Hy,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}var Dd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Dd||(Dd={}));var Rd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Rd||(Rd={}));const eu="";async function Pd(){var r,s;const e=localStorage.getItem("whisper_token");if(e)return e;const t=(s=(r=window.Telegram)==null?void 0:r.WebApp)==null?void 0:s.initData;if(t){const a=await(await fetch(`${eu}/api/auth/telegram`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:t})})).json();if(a.success&&a.token)return localStorage.setItem("whisper_token",a.token),a.token}const n=new Error("need_login");throw n.code="NEED_LOGIN",n}async function B(e,t={}){let n=await Pd();const r=`${eu}${e}`,s=a=>fetch(r,{...t,cache:"no-store",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`,...t.headers},body:t.body?JSON.stringify(t.body):void 0});let l=await s(n);if(l.status===401&&(localStorage.removeItem("whisper_token"),n=await Pd(),l=await s(n)),l.status===204)return null;if(!l.ok){const a=await l.json().catch(()=>({}));throw new Error(a.detail||` (${l.status})`)}return l.json()}async function Ky(e){const n=await(await fetch(`${eu}/api/auth/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})})).json();if(n.success&&n.token)return localStorage.setItem("whisper_token",n.token),!0;throw new Error(n.detail||"")}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zh=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:a,...i},c)=>u.createElement("svg",{ref:c,...Gy,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:zh("lucide",s),...i},[...a.map(([d,p])=>u.createElement(d,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(e,t)=>{const n=u.forwardRef(({className:r,...s},l)=>u.createElement(qy,{ref:l,iconNode:t,className:zh(`lucide-${Qy(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=ge("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=ge("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=ge("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=ge("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=ge("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=ge("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=ge("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=ge("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=ge("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=ge("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=ge("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=ge("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=ge("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=ge("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=ge("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=ge("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=ge("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=ge("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=ge("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=ge("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=ge("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=ge("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=ge("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=ge("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=ge("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=ge("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=ge("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=ge("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),xv="WhisperMiniDB",mv=1,is="avatars",$h=()=>new Promise((e,t)=>{const n=indexedDB.open(xv,mv);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(is)||r.createObjectStore(is,{keyPath:"key"})}}),ec=async(e,t)=>{const n=await $h();return new Promise((r,s)=>{const l=n.transaction([is],"readwrite");l.objectStore(is).put({key:e,base64:t}),l.oncomplete=()=>r(),l.onerror=()=>s(l.error)})},hs=async e=>{const t=await $h();return new Promise((n,r)=>{const l=t.transaction([is],"readonly").objectStore(is).get(e);l.onsuccess=()=>{var a;return n(((a=l.result)==null?void 0:a.base64)||null)},l.onerror=()=>r(l.error)})},Nt={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function Dr({icon:e,label:t,desc:n,disabled:r,onClick:s,badge:l}){const[a,i]=u.useState(!1),c=()=>!r&&i(!0),d=()=>{i(!1),r||s==null||s()};return o.jsxs("button",{className:"flex flex-col items-start rounded-[18px] gap-2 text-left",style:{padding:"16px 14px",background:Nt.bg,boxShadow:a?"inset 3px 3px 8px rgba(174,176,182,0.5), inset -3px -3px 8px #ffffff":"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff",opacity:r?.4:1,transform:a?"scale(0.97)":"scale(1)",transition:"transform 0.1s, box-shadow 0.1s",cursor:r?"default":"pointer",WebkitTapHighlightColor:"transparent"},disabled:r,onTouchStart:c,onTouchEnd:d,onMouseDown:c,onMouseUp:d,onMouseLeave:()=>i(!1),children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-[12px]",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))"},children:e}),l&&o.jsx("div",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full",style:{background:"#ef4444",border:"2px solid var(--bg)"}})]}),o.jsxs("div",{className:"pl-1",children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:Nt.text},children:t}),o.jsx("div",{className:"mt-0.5 text-[10px] leading-snug",style:{color:Nt.textMuted},children:n})]})]})}function Ld({children:e}){return o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-[3px]",style:{color:Nt.textMuted},children:e})}function gv(){const e=Ft(),[t,n]=u.useState(()=>{try{return JSON.parse(localStorage.getItem("whisper_profile")||"null")}catch(d){return null}}),[r,s]=u.useState(null),[l,a]=u.useState(!1);u.useEffect(()=>{B("/api/user/profile").then(d=>{n(d),localStorage.setItem("whisper_profile",JSON.stringify(d))}).catch(()=>{}),hs("user-avatar").then(d=>{d&&s(d)}).catch(function(){}),B("/api/diary/unread-count").then(d=>{d.count>0&&a(!0)}).catch(()=>{})},[]);const i=(t==null?void 0:t.nickname)||"",c=(t==null?void 0:t.background_url)||"";return o.jsxs("div",{className:"flex flex-col overflow-y-auto",style:{background:Nt.bg,height:"100%",paddingBottom:16},children:[o.jsxs("div",{className:"flex flex-col px-5",style:{paddingTop:"max(12px, env(safe-area-inset-top))"},children:[o.jsx("h1",{className:"mb-4 text-center text-[17px] font-medium",style:{color:Nt.textMuted,letterSpacing:"4px"},children:"W H I S P E R"}),o.jsxs("button",{className:"mb-5 flex w-full items-center gap-4 rounded-[20px] p-5 text-left",style:{background:Nt.bg,boxShadow:"6px 6px 14px rgba(174,176,182,0.5), -6px -6px 14px #ffffff"},onClick:()=>e("/profile"),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:52,height:52,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Nt.bg},children:r?o.jsx("img",{src:r,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:22},children:""})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"text-[17px] font-bold truncate",style:{color:Nt.text},children:["@",i]}),o.jsxs("div",{className:"mt-0.5 text-[11px] italic",style:{color:Nt.textMuted},children:['"',c,'"']})]}),o.jsx(os,{size:16,style:{color:Nt.textMuted,flexShrink:0}})]}),o.jsx(Ld,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(Dr,{icon:o.jsx(tu,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/world-books")}),o.jsx(Dr,{icon:o.jsx(Zy,{size:18,color:"white"}),label:"",desc:"",onClick:()=>e("/memories")}),o.jsx(Dr,{icon:o.jsx(Ih,{size:18,color:"white"}),label:"",desc:"Core Blocks",onClick:()=>e("/assistants")}),o.jsx(Dr,{icon:o.jsx(fv,{size:18,color:"white"}),label:"",desc:"API",onClick:()=>e("/settings")})]}),o.jsx(Ld,{children:""}),o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3.5",children:[o.jsx(Dr,{icon:o.jsx(Jy,{size:18,color:"white"}),label:"",desc:"",badge:l,onClick:()=>e("/diary")}),o.jsx(Dr,{icon:o.jsx(pv,{size:18,color:"white"}),label:"",desc:"",disabled:!0})]}),o.jsx("button",{className:"flex w-full items-center justify-center rounded-[18px] py-4",style:{background:Nt.bg,boxShadow:"5px 5px 12px rgba(174,176,182,0.5), -5px -5px 12px #ffffff"},onClick:()=>e("/cot"),children:o.jsx(lv,{size:32,fill:Nt.accent,style:{color:Nt.accent,animation:"heartbeat 2s ease-in-out infinite"}})})]}),o.jsx("style",{children:`
        @keyframes heartbeat {
          0%, 100% { transform: scale(1); }
          15% { transform: scale(1.15); }
          30% { transform: scale(1); }
          45% { transform: scale(1.1); }
          60% { transform: scale(1); }
        }
      `})]})}function yv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const xa=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function xs(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function ru(e){return"nodeType"in e}function kt(e){var t,n;return e?xs(e)?e:ru(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function su(e){const{Document:t}=kt(e);return e instanceof t}function kl(e){return xs(e)?!1:e instanceof kt(e).HTMLElement}function Ah(e){return e instanceof kt(e).SVGElement}function ms(e){return e?xs(e)?e.document:ru(e)?su(e)?e:kl(e)||Ah(e)?e.ownerDocument:document:document:document}const rn=xa?u.useLayoutEffect:u.useEffect;function ma(e){const t=u.useRef(e);return rn(()=>{t.current=e}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function vv(){const e=u.useRef(null),t=u.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=u.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function dl(e,t){t===void 0&&(t=[e]);const n=u.useRef(e);return rn(()=>{n.current!==e&&(n.current=e)},t),n}function jl(e,t){const n=u.useRef();return u.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Fo(e){const t=ma(e),n=u.useRef(null),r=u.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function Bo(e){const t=u.useRef();return u.useEffect(()=>{t.current=e},[e]),t.current}let Ga={};function Sl(e,t){return u.useMemo(()=>{if(t)return t;const n=Ga[e]==null?0:Ga[e]+1;return Ga[e]=n,e+"-"+n},[e,t])}function Fh(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const i=Object.entries(a);for(const[c,d]of i){const p=l[c];p!=null&&(l[c]=p+e*d)}return l},{...t})}}const Jr=Fh(1),Uo=Fh(-1);function wv(e){return"clientX"in e&&"clientY"in e}function ga(e){if(!e)return!1;const{KeyboardEvent:t}=kt(e.target);return t&&e instanceof t}function bv(e){if(!e)return!1;const{TouchEvent:t}=kt(e.target);return t&&e instanceof t}function Ho(e){if(bv(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return wv(e)?{x:e.clientX,y:e.clientY}:null}const Mn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Mn.Translate.toString(e),Mn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Od="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function kv(e){return e.matches(Od)?e:e.querySelector(Od)}const jv={display:"none"};function Sv(e){let{id:t,value:n}=e;return De.createElement("div",{id:t,style:jv},n)}function Nv(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return De.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Cv(){const[e,t]=u.useState("");return{announce:u.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Bh=u.createContext(null);function Ev(e){const t=u.useContext(Bh);u.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Mv(){const[e]=u.useState(()=>new Set),t=u.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[u.useCallback(r=>{let{type:s,event:l}=r;e.forEach(a=>{var i;return(i=a[s])==null?void 0:i.call(a,l)})},[e]),t]}const _v={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Tv={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Dv(e){let{announcements:t=Tv,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=_v}=e;const{announce:l,announcement:a}=Cv(),i=Sl("DndLiveRegion"),[c,d]=u.useState(!1);if(u.useEffect(()=>{d(!0)},[]),Ev(u.useMemo(()=>({onDragStart(f){let{active:h}=f;l(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:x}=f;t.onDragMove&&l(t.onDragMove({active:h,over:x}))},onDragOver(f){let{active:h,over:x}=f;l(t.onDragOver({active:h,over:x}))},onDragEnd(f){let{active:h,over:x}=f;l(t.onDragEnd({active:h,over:x}))},onDragCancel(f){let{active:h,over:x}=f;l(t.onDragCancel({active:h,over:x}))}}),[l,t])),!c)return null;const p=De.createElement(De.Fragment,null,De.createElement(Sv,{id:r,value:s.draggable}),De.createElement(Nv,{id:i,announcement:a}));return n?Vr.createPortal(p,n):p}var Ke;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ke||(Ke={}));function Wo(){}function Vo(e,t){return u.useMemo(()=>({sensor:e,options:t!=null?t:{}}),[e,t])}function Uh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const sn=Object.freeze({x:0,y:0});function Rv(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Pv(e,t){const n=Ho(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function zv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Iv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Lv(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function $d(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Hh=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=$d(t,t.left,t.top),l=[];for(const a of r){const{id:i}=a,c=n.get(i);if(c){const d=Rv($d(c),s);l.push({id:i,data:{droppableContainer:a,value:d}})}}return l.sort(zv)};function Ov(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height),a=s-r,i=l-n;if(r<s&&n<l){const c=t.width*t.height,d=e.width*e.height,p=a*i,f=p/(c+d-p);return Number(f.toFixed(4))}return 0}const $v=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const l of r){const{id:a}=l,i=n.get(a);if(i){const c=Ov(i,t);c>0&&s.push({id:a,data:{droppableContainer:l,value:c}})}}return s.sort(Iv)};function Av(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Wh(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:sn}function Fv(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,i)=>({...a,top:a.top+e*i.y,bottom:a.bottom+e*i.y,left:a.left+e*i.x,right:a.right+e*i.x}),{...n})}}const Bv=Fv(1);function Vh(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Uv(e,t,n){const r=Vh(t);if(!r)return e;const{scaleX:s,scaleY:l,x:a,y:i}=r,c=e.left-a-(1-s)*parseFloat(n),d=e.top-i-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),p=s?e.width/s:e.width,f=l?e.height/l:e.height;return{width:p,height:f,top:d,right:c+p,bottom:d+f,left:c}}const Hv={ignoreTransform:!1};function gs(e,t){t===void 0&&(t=Hv);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:p}=kt(e).getComputedStyle(e);d&&(n=Uv(n,d,p))}const{top:r,left:s,width:l,height:a,bottom:i,right:c}=n;return{top:r,left:s,width:l,height:a,bottom:i,right:c}}function Ad(e){return gs(e,{ignoreTransform:!0})}function Wv(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Vv(e,t){return t===void 0&&(t=kt(e).getComputedStyle(e)),t.position==="fixed"}function Xv(e,t){t===void 0&&(t=kt(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=t[s];return typeof l=="string"?n.test(l):!1})}function lu(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(su(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!kl(s)||Ah(s)||n.includes(s))return n;const l=kt(e).getComputedStyle(s);return s!==e&&Xv(s,l)&&n.push(s),Vv(s,l)?n:r(s.parentNode)}return e?r(e):n}function Xh(e){const[t]=lu(e,1);return t!=null?t:null}function qa(e){return!xa||!e?null:xs(e)?e:ru(e)?su(e)||e===ms(e).scrollingElement?window:kl(e)?e:null:null}function Yh(e){return xs(e)?e.scrollX:e.scrollLeft}function Kh(e){return xs(e)?e.scrollY:e.scrollTop}function tc(e){return{x:Yh(e),y:Kh(e)}}var tt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(tt||(tt={}));function Qh(e){return!xa||!e?!1:e===document.scrollingElement}function Gh(e){const t={x:0,y:0},n=Qh(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,l=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:i,maxScroll:r,minScroll:t}}const Yv={x:.2,y:.2};function Kv(e,t,n,r,s){let{top:l,left:a,right:i,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=Yv);const{isTop:d,isBottom:p,isLeft:f,isRight:h}=Gh(e),x={x:0,y:0},w={x:0,y:0},y={height:t.height*s.y,width:t.width*s.x};return!d&&l<=t.top+y.height?(x.y=tt.Backward,w.y=r*Math.abs((t.top+y.height-l)/y.height)):!p&&c>=t.bottom-y.height&&(x.y=tt.Forward,w.y=r*Math.abs((t.bottom-y.height-c)/y.height)),!h&&i>=t.right-y.width?(x.x=tt.Forward,w.x=r*Math.abs((t.right-y.width-i)/y.width)):!f&&a<=t.left+y.width&&(x.x=tt.Backward,w.x=r*Math.abs((t.left+y.width-a)/y.width)),{direction:x,speed:w}}function Qv(e){if(e===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function qh(e){return e.reduce((t,n)=>Jr(t,tc(n)),sn)}function Gv(e){return e.reduce((t,n)=>t+Yh(n),0)}function qv(e){return e.reduce((t,n)=>t+Kh(n),0)}function Jh(e,t){if(t===void 0&&(t=gs),!e)return;const{top:n,left:r,bottom:s,right:l}=t(e);Xh(e)&&(s<=0||l<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Jv=[["x",["left","right"],Gv],["y",["top","bottom"],qv]];class ou{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=lu(n),s=qh(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[l,a,i]of Jv)for(const c of a)Object.defineProperty(this,c,{get:()=>{const d=i(r),p=s[l]-d;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Hs{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Zv(e){const{EventTarget:t}=kt(e);return e instanceof t?e:ms(e)}function Ja(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Ut;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ut||(Ut={}));function Fd(e){e.preventDefault()}function e1(e){e.stopPropagation()}var Se;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Se||(Se={}));const Zh={start:[Se.Space,Se.Enter],cancel:[Se.Esc],end:[Se.Space,Se.Enter,Se.Tab]},t1=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Se.Right:return{...n,x:n.x+25};case Se.Left:return{...n,x:n.x-25};case Se.Down:return{...n,y:n.y+25};case Se.Up:return{...n,y:n.y-25}}};class ex{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Hs(ms(n)),this.windowListeners=new Hs(kt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ut.Resize,this.handleCancel),this.windowListeners.add(Ut.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ut.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Jh(r),n(sn)}handleKeyDown(t){if(ga(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:l=Zh,coordinateGetter:a=t1,scrollBehavior:i="smooth"}=s,{code:c}=t;if(l.end.includes(c)){this.handleEnd(t);return}if(l.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:sn;this.referenceCoordinates||(this.referenceCoordinates=p);const f=a(t,{active:n,context:r.current,currentCoordinates:p});if(f){const h=Uo(f,p),x={x:0,y:0},{scrollableAncestors:w}=r.current;for(const y of w){const b=t.code,{isTop:g,isRight:m,isLeft:v,isBottom:S,maxScroll:j,minScroll:N}=Gh(y),k=Qv(y),E={x:Math.min(b===Se.Right?k.right-k.width/2:k.right,Math.max(b===Se.Right?k.left:k.left+k.width/2,f.x)),y:Math.min(b===Se.Down?k.bottom-k.height/2:k.bottom,Math.max(b===Se.Down?k.top:k.top+k.height/2,f.y))},D=b===Se.Right&&!m||b===Se.Left&&!v,P=b===Se.Down&&!S||b===Se.Up&&!g;if(D&&E.x!==f.x){const L=y.scrollLeft+h.x,ie=b===Se.Right&&L<=j.x||b===Se.Left&&L>=N.x;if(ie&&!h.y){y.scrollTo({left:L,behavior:i});return}ie?x.x=y.scrollLeft-L:x.x=b===Se.Right?y.scrollLeft-j.x:y.scrollLeft-N.x,x.x&&y.scrollBy({left:-x.x,behavior:i});break}else if(P&&E.y!==f.y){const L=y.scrollTop+h.y,ie=b===Se.Down&&L<=j.y||b===Se.Up&&L>=N.y;if(ie&&!h.x){y.scrollTo({top:L,behavior:i});return}ie?x.y=y.scrollTop-L:x.y=b===Se.Down?y.scrollTop-j.y:y.scrollTop-N.y,x.y&&y.scrollBy({top:-x.y,behavior:i});break}}this.handleMove(t,Jr(Uo(f,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ex.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Zh,onActivation:s}=t,{active:l}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const i=l.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function Bd(e){return!!(e&&"distance"in e)}function Ud(e){return!!(e&&"delay"in e)}class au{constructor(t,n,r){var s;r===void 0&&(r=Zv(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:l}=t,{target:a}=l;this.props=t,this.events=n,this.document=ms(a),this.documentListeners=new Hs(this.document),this.listeners=new Hs(r),this.windowListeners=new Hs(kt(a)),this.initialCoordinates=(s=Ho(l))!=null?s:sn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ut.Resize,this.handleCancel),this.windowListeners.add(Ut.DragStart,Fd),this.windowListeners.add(Ut.VisibilityChange,this.handleCancel),this.windowListeners.add(Ut.ContextMenu,Fd),this.documentListeners.add(Ut.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ud(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Bd(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ut.Click,e1,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ut.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:i}}=l;if(!s)return;const c=(n=Ho(t))!=null?n:sn,d=Uo(s,c);if(!r&&i){if(Bd(i)){if(i.tolerance!=null&&Ja(d,i.tolerance))return this.handleCancel();if(Ja(d,i.distance))return this.handleStart()}if(Ud(i)&&Ja(d,i.tolerance))return this.handleCancel();this.handlePending(i,d);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Se.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const n1={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ya extends au{constructor(t){const{event:n}=t,r=ms(n.target);super(t,n1,r)}}ya.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const r1={move:{name:"mousemove"},end:{name:"mouseup"}};var nc;(function(e){e[e.RightClick=2]="RightClick"})(nc||(nc={}));class s1 extends au{constructor(t){super(t,r1,ms(t.event.target))}}s1.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===nc.RightClick?!1:(r==null||r({event:n}),!0)}}];const Za={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class iu extends au{constructor(t){super(t,Za)}static setup(){return window.addEventListener(Za.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Za.move.name,t)};function t(){}}}iu.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Ws;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ws||(Ws={}));var Xo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Xo||(Xo={}));function l1(e){let{acceleration:t,activator:n=Ws.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:i=Xo.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:p,delta:f,threshold:h}=e;const x=a1({delta:f,disabled:!l}),[w,y]=vv(),b=u.useRef({x:0,y:0}),g=u.useRef({x:0,y:0}),m=u.useMemo(()=>{switch(n){case Ws.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Ws.DraggableRect:return s}},[n,s,c]),v=u.useRef(null),S=u.useCallback(()=>{const N=v.current;if(!N)return;const k=b.current.x*g.current.x,E=b.current.y*g.current.y;N.scrollBy(k,E)},[]),j=u.useMemo(()=>i===Xo.TreeOrder?[...d].reverse():d,[i,d]);u.useEffect(()=>{if(!l||!d.length||!m){y();return}for(const N of j){if((r==null?void 0:r(N))===!1)continue;const k=d.indexOf(N),E=p[k];if(!E)continue;const{direction:D,speed:P}=Kv(N,E,m,t,h);for(const L of["x","y"])x[L][D[L]]||(P[L]=0,D[L]=0);if(P.x>0||P.y>0){y(),v.current=N,w(S,a),b.current=P,g.current=D;return}}b.current={x:0,y:0},g.current={x:0,y:0},y()},[t,S,r,y,l,a,JSON.stringify(m),JSON.stringify(x),w,d,j,p,JSON.stringify(h)])}const o1={x:{[tt.Backward]:!1,[tt.Forward]:!1},y:{[tt.Backward]:!1,[tt.Forward]:!1}};function a1(e){let{delta:t,disabled:n}=e;const r=Bo(t);return jl(s=>{if(n||!r||!s)return o1;const l={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[tt.Backward]:s.x[tt.Backward]||l.x===-1,[tt.Forward]:s.x[tt.Forward]||l.x===1},y:{[tt.Backward]:s.y[tt.Backward]||l.y===-1,[tt.Forward]:s.y[tt.Forward]||l.y===1}}},[n,t,r])}function i1(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return jl(s=>{var l;return t==null?null:(l=r!=null?r:s)!=null?l:null},[r,t])}function c1(e,t){return u.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...l]},[]),[e,t])}var fl;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(fl||(fl={}));var rc;(function(e){e.Optimized="optimized"})(rc||(rc={}));const Hd=new Map;function u1(e,t){let{dragging:n,dependencies:r,config:s}=t;const[l,a]=u.useState(null),{frequency:i,measure:c,strategy:d}=s,p=u.useRef(e),f=b(),h=dl(f),x=u.useCallback(function(g){g===void 0&&(g=[]),!h.current&&a(m=>m===null?g:m.concat(g.filter(v=>!m.includes(v))))},[h]),w=u.useRef(null),y=jl(g=>{if(f&&!n)return Hd;if(!g||g===Hd||p.current!==e||l!=null){const m=new Map;for(let v of e){if(!v)continue;if(l&&l.length>0&&!l.includes(v.id)&&v.rect.current){m.set(v.id,v.rect.current);continue}const S=v.node.current,j=S?new ou(c(S),S):null;v.rect.current=j,j&&m.set(v.id,j)}return m}return g},[e,l,n,f,c]);return u.useEffect(()=>{p.current=e},[e]),u.useEffect(()=>{f||x()},[n,f]),u.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),u.useEffect(()=>{f||typeof i!="number"||w.current!==null||(w.current=setTimeout(()=>{x(),w.current=null},i))},[i,f,x,...r]),{droppableRects:y,measureDroppableContainers:x,measuringScheduled:l!=null};function b(){switch(d){case fl.Always:return!1;case fl.BeforeDragging:return n;default:return!n}}}function cu(e,t){return jl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function d1(e,t){return cu(e,t)}function f1(e){let{callback:t,disabled:n}=e;const r=ma(t),s=u.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:l}=window;return new l(r)},[r,n]);return u.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function va(e){let{callback:t,disabled:n}=e;const r=ma(t),s=u.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:l}=window;return new l(r)},[n]);return u.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function p1(e){return new ou(gs(e),e)}function Wd(e,t,n){t===void 0&&(t=p1);const[r,s]=u.useState(null);function l(){s(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c!=null?c:n)!=null?d:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=f1({callback(c){if(e)for(const d of c){const{type:p,target:f}=d;if(p==="childList"&&f instanceof HTMLElement&&f.contains(e)){l();break}}}}),i=va({callback:l});return rn(()=>{l(),e?(i==null||i.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),a==null||a.disconnect())},[e]),r}function h1(e){const t=cu(e);return Wh(e,t)}const Vd=[];function x1(e){const t=u.useRef(e),n=jl(r=>e?r&&r!==Vd&&e&&t.current&&e.parentNode===t.current.parentNode?r:lu(e):Vd,[e]);return u.useEffect(()=>{t.current=e},[e]),n}function m1(e){const[t,n]=u.useState(null),r=u.useRef(e),s=u.useCallback(l=>{const a=qa(l.target);a&&n(i=>i?(i.set(a,tc(a)),new Map(i)):null)},[]);return u.useEffect(()=>{const l=r.current;if(e!==l){a(l);const i=e.map(c=>{const d=qa(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,tc(d)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=e}return()=>{a(e),a(l)};function a(i){i.forEach(c=>{const d=qa(c);d==null||d.removeEventListener("scroll",s)})}},[s,e]),u.useMemo(()=>e.length?t?Array.from(t.values()).reduce((l,a)=>Jr(l,a),sn):qh(e):sn,[e,t])}function Xd(e,t){t===void 0&&(t=[]);const n=u.useRef(null);return u.useEffect(()=>{n.current=null},t),u.useEffect(()=>{const r=e!==sn;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Uo(e,n.current):sn}function g1(e){u.useEffect(()=>{if(!xa)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function y1(e,t){return u.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:l}=r;return n[s]=a=>{l(a,t)},n},{}),[e,t])}function tx(e){return u.useMemo(()=>e?Wv(e):null,[e])}const Yd=[];function v1(e,t){t===void 0&&(t=gs);const[n]=e,r=tx(n?kt(n):null),[s,l]=u.useState(Yd);function a(){l(()=>e.length?e.map(c=>Qh(c)?r:new ou(t(c),c)):Yd)}const i=va({callback:a});return rn(()=>{i==null||i.disconnect(),a(),e.forEach(c=>i==null?void 0:i.observe(c))},[e]),s}function nx(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return kl(t)?t:e}function w1(e){let{measure:t}=e;const[n,r]=u.useState(null),s=u.useCallback(d=>{for(const{target:p}of d)if(kl(p)){r(f=>{const h=t(p);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),l=va({callback:s}),a=u.useCallback(d=>{const p=nx(d);l==null||l.disconnect(),p&&(l==null||l.observe(p)),r(p?t(p):null)},[t,l]),[i,c]=Fo(a);return u.useMemo(()=>({nodeRef:i,rect:n,setRef:c}),[n,i,c])}const b1=[{sensor:ya,options:{}},{sensor:ex,options:{}}],k1={current:{}},xo={draggable:{measure:Ad},droppable:{measure:Ad,strategy:fl.WhileDragging,frequency:rc.Optimized},dragOverlay:{measure:gs}};class Vs extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const j1={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Vs,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Wo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:xo,measureDroppableContainers:Wo,windowRect:null,measuringScheduled:!1},rx={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Wo,draggableNodes:new Map,over:null,measureDroppableContainers:Wo},Nl=u.createContext(rx),sx=u.createContext(j1);function S1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Vs}}}function N1(e,t){switch(t.type){case Ke.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ke.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ke.DragEnd:case Ke.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ke.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Vs(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Ke.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,l=e.droppable.containers.get(n);if(!l||r!==l.key)return e;const a=new Vs(e.droppable.containers);return a.set(n,{...l,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case Ke.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const l=new Vs(e.droppable.containers);return l.delete(n),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function C1(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=u.useContext(Nl),l=Bo(r),a=Bo(n==null?void 0:n.id);return u.useEffect(()=>{if(!t&&!r&&l&&a!=null){if(!ga(l)||document.activeElement===l.target)return;const i=s.get(a);if(!i)return;const{activatorNode:c,node:d}=i;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[c.current,d.current]){if(!p)continue;const f=kv(p);if(f){f.focus();break}}})}},[r,t,s,a,l]),null}function lx(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,l)=>l({transform:s,...r}),n):n}function E1(e){return u.useMemo(()=>({draggable:{...xo.draggable,...e==null?void 0:e.draggable},droppable:{...xo.droppable,...e==null?void 0:e.droppable},dragOverlay:{...xo.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function M1(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const l=u.useRef(!1),{x:a,y:i}=typeof s=="boolean"?{x:s,y:s}:s;rn(()=>{if(!a&&!i||!t){l.current=!1;return}if(l.current||!r)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const p=n(d),f=Wh(p,r);if(a||(f.x=0),i||(f.y=0),l.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=Xh(d);h&&h.scrollBy({top:f.y,left:f.x})}},[t,a,i,r,n])}const wa=u.createContext({...sn,scaleX:1,scaleY:1});var In;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(In||(In={}));const ox=u.memo(function(t){var n,r,s,l;let{id:a,accessibility:i,autoScroll:c=!0,children:d,sensors:p=b1,collisionDetection:f=$v,measuring:h,modifiers:x,...w}=t;const y=u.useReducer(N1,void 0,S1),[b,g]=y,[m,v]=Mv(),[S,j]=u.useState(In.Uninitialized),N=S===In.Initialized,{draggable:{active:k,nodes:E,translate:D},droppable:{containers:P}}=b,L=k!=null?E.get(k):null,ie=u.useRef({initial:null,translated:null}),W=u.useMemo(()=>{var Je;return k!=null?{id:k,data:(Je=L==null?void 0:L.data)!=null?Je:k1,rect:ie}:null},[k,L]),z=u.useRef(null),[q,xe]=u.useState(null),[fe,O]=u.useState(null),Q=dl(w,Object.values(w)),_=Sl("DndDescribedBy",a),ee=u.useMemo(()=>P.getEnabled(),[P]),X=E1(h),{droppableRects:ke,measureDroppableContainers:ye,measuringScheduled:qe}=u1(ee,{dragging:N,dependencies:[D.x,D.y],config:X.droppable}),ve=i1(E,k),Y=u.useMemo(()=>fe?Ho(fe):null,[fe]),we=ys(),ue=d1(ve,X.draggable.measure);M1({activeNode:k!=null?E.get(k):null,config:we.layoutShiftCompensation,initialRect:ue,measure:X.draggable.measure});const se=Wd(ve,X.draggable.measure,ue),Ue=Wd(ve?ve.parentElement:null),je=u.useRef({activatorEvent:null,active:null,activeNode:ve,collisionRect:null,collisions:null,droppableRects:ke,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),rt=P.getNodeFor((n=je.current.over)==null?void 0:n.id),V=w1({measure:X.dragOverlay.measure}),$=(r=V.nodeRef.current)!=null?r:ve,le=N?(s=V.rect)!=null?s:se:null,ne=!!(V.nodeRef.current&&V.rect),pe=h1(ne?null:se),I=tx($?kt($):null),J=x1(N?rt!=null?rt:ve:null),re=v1(J),de=lx(x,{transform:{x:D.x-pe.x,y:D.y-pe.y,scaleX:1,scaleY:1},activatorEvent:fe,active:W,activeNodeRect:se,containerNodeRect:Ue,draggingNodeRect:le,over:je.current.over,overlayNodeRect:V.rect,scrollableAncestors:J,scrollableAncestorRects:re,windowRect:I}),He=Y?Jr(Y,D):null,We=m1(J),mn=Xd(We),ln=Xd(We,[se]),Rt=Jr(de,mn),jt=le?Bv(le,de):null,on=W&&jt?f({active:W,collisionRect:jt,droppableRects:ke,droppableContainers:ee,pointerCoordinates:He}):null,an=Lv(on,"id"),[ut,er]=u.useState(null),Sr=ne?de:Jr(de,ln),A=Av(Sr,(l=ut==null?void 0:ut.rect)!=null?l:null,se),ae=u.useRef(null),ce=u.useCallback((Je,lt)=>{let{sensor:ot,options:cn}=lt;if(z.current==null)return;const mt=E.get(z.current);if(!mt)return;const gt=Je.nativeEvent,Bt=new ot({active:z.current,activeNode:mt,event:gt,options:cn,context:je,onAbort(Ve){if(!E.get(Ve))return;const{onDragAbort:St}=Q.current,Pt={id:Ve};St==null||St(Pt),m({type:"onDragAbort",event:Pt})},onPending(Ve,un,St,Pt){if(!E.get(Ve))return;const{onDragPending:Nr}=Q.current,yn={id:Ve,constraint:un,initialCoordinates:St,offset:Pt};Nr==null||Nr(yn),m({type:"onDragPending",event:yn})},onStart(Ve){const un=z.current;if(un==null)return;const St=E.get(un);if(!St)return;const{onDragStart:Pt}=Q.current,tr={activatorEvent:gt,active:{id:un,data:St.data,rect:ie}};Vr.unstable_batchedUpdates(()=>{Pt==null||Pt(tr),j(In.Initializing),g({type:Ke.DragStart,initialCoordinates:Ve,active:un}),m({type:"onDragStart",event:tr}),xe(ae.current),O(gt)})},onMove(Ve){g({type:Ke.DragMove,coordinates:Ve})},onEnd:Tn(Ke.DragEnd),onCancel:Tn(Ke.DragCancel)});ae.current=Bt;function Tn(Ve){return async function(){const{active:St,collisions:Pt,over:tr,scrollAdjustedTranslate:Nr}=je.current;let yn=null;if(St&&Nr){const{cancelDrop:Cr}=Q.current;yn={activatorEvent:gt,active:St,collisions:Pt,delta:Nr,over:tr},Ve===Ke.DragEnd&&typeof Cr=="function"&&await Promise.resolve(Cr(yn))&&(Ve=Ke.DragCancel)}z.current=null,Vr.unstable_batchedUpdates(()=>{g({type:Ve}),j(In.Uninitialized),er(null),xe(null),O(null),ae.current=null;const Cr=Ve===Ke.DragEnd?"onDragEnd":"onDragCancel";if(yn){const El=Q.current[Cr];El==null||El(yn),m({type:Cr,event:yn})}})}}},[E]),Me=u.useCallback((Je,lt)=>(ot,cn)=>{const mt=ot.nativeEvent,gt=E.get(cn);if(z.current!==null||!gt||mt.dndKit||mt.defaultPrevented)return;const Bt={active:gt};Je(ot,lt.options,Bt)===!0&&(mt.dndKit={capturedBy:lt.sensor},z.current=cn,ce(ot,lt))},[E,ce]),st=c1(p,Me);g1(p),rn(()=>{se&&S===In.Initializing&&j(In.Initialized)},[se,S]),u.useEffect(()=>{const{onDragMove:Je}=Q.current,{active:lt,activatorEvent:ot,collisions:cn,over:mt}=je.current;if(!lt||!ot)return;const gt={active:lt,activatorEvent:ot,collisions:cn,delta:{x:Rt.x,y:Rt.y},over:mt};Vr.unstable_batchedUpdates(()=>{Je==null||Je(gt),m({type:"onDragMove",event:gt})})},[Rt.x,Rt.y]),u.useEffect(()=>{const{active:Je,activatorEvent:lt,collisions:ot,droppableContainers:cn,scrollAdjustedTranslate:mt}=je.current;if(!Je||z.current==null||!lt||!mt)return;const{onDragOver:gt}=Q.current,Bt=cn.get(an),Tn=Bt&&Bt.rect.current?{id:Bt.id,rect:Bt.rect.current,data:Bt.data,disabled:Bt.disabled}:null,Ve={active:Je,activatorEvent:lt,collisions:ot,delta:{x:mt.x,y:mt.y},over:Tn};Vr.unstable_batchedUpdates(()=>{er(Tn),gt==null||gt(Ve),m({type:"onDragOver",event:Ve})})},[an]),rn(()=>{je.current={activatorEvent:fe,active:W,activeNode:ve,collisionRect:jt,collisions:on,droppableRects:ke,draggableNodes:E,draggingNode:$,draggingNodeRect:le,droppableContainers:P,over:ut,scrollableAncestors:J,scrollAdjustedTranslate:Rt},ie.current={initial:le,translated:jt}},[W,ve,on,jt,E,$,le,ke,P,ut,J,Rt]),l1({...we,delta:D,draggingRect:jt,pointerCoordinates:He,scrollableAncestors:J,scrollableAncestorRects:re});const gn=u.useMemo(()=>({active:W,activeNode:ve,activeNodeRect:se,activatorEvent:fe,collisions:on,containerNodeRect:Ue,dragOverlay:V,draggableNodes:E,droppableContainers:P,droppableRects:ke,over:ut,measureDroppableContainers:ye,scrollableAncestors:J,scrollableAncestorRects:re,measuringConfiguration:X,measuringScheduled:qe,windowRect:I}),[W,ve,se,fe,on,Ue,V,E,P,ke,ut,ye,J,re,X,qe,I]),Cl=u.useMemo(()=>({activatorEvent:fe,activators:st,active:W,activeNodeRect:se,ariaDescribedById:{draggable:_},dispatch:g,draggableNodes:E,over:ut,measureDroppableContainers:ye}),[fe,st,W,se,g,_,E,ut,ye]);return De.createElement(Bh.Provider,{value:v},De.createElement(Nl.Provider,{value:Cl},De.createElement(sx.Provider,{value:gn},De.createElement(wa.Provider,{value:A},d)),De.createElement(C1,{disabled:(i==null?void 0:i.restoreFocus)===!1})),De.createElement(Dv,{...i,hiddenTextDescribedById:_}));function ys(){const Je=(q==null?void 0:q.autoScrollEnabled)===!1,lt=typeof c=="object"?c.enabled===!1:c===!1,ot=N&&!Je&&!lt;return typeof c=="object"?{...c,enabled:ot}:{enabled:ot}}}),_1=u.createContext(null),Kd="button",T1="Draggable";function D1(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const l=Sl(T1),{activators:a,activatorEvent:i,active:c,activeNodeRect:d,ariaDescribedById:p,draggableNodes:f,over:h}=u.useContext(Nl),{role:x=Kd,roleDescription:w="draggable",tabIndex:y=0}=s!=null?s:{},b=(c==null?void 0:c.id)===t,g=u.useContext(b?wa:_1),[m,v]=Fo(),[S,j]=Fo(),N=y1(a,t),k=dl(n);rn(()=>(f.set(t,{id:t,key:l,node:m,activatorNode:S,data:k}),()=>{const D=f.get(t);D&&D.key===l&&f.delete(t)}),[f,t]);const E=u.useMemo(()=>({role:x,tabIndex:y,"aria-disabled":r,"aria-pressed":b&&x===Kd?!0:void 0,"aria-roledescription":w,"aria-describedby":p.draggable}),[r,x,y,b,w,p.draggable]);return{active:c,activatorEvent:i,activeNodeRect:d,attributes:E,isDragging:b,listeners:r?void 0:N,node:m,over:h,setNodeRef:v,setActivatorNodeRef:j,transform:g}}function ax(){return u.useContext(sx)}const R1="Droppable",P1={timeout:25};function z1(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const l=Sl(R1),{active:a,dispatch:i,over:c,measureDroppableContainers:d}=u.useContext(Nl),p=u.useRef({disabled:n}),f=u.useRef(!1),h=u.useRef(null),x=u.useRef(null),{disabled:w,updateMeasurementsFor:y,timeout:b}={...P1,...s},g=dl(y!=null?y:r),m=u.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(g.current)?g.current:[g.current]),x.current=null},b)},[b]),v=va({callback:m,disabled:w||!a}),S=u.useCallback((E,D)=>{v&&(D&&(v.unobserve(D),f.current=!1),E&&v.observe(E))},[v]),[j,N]=Fo(S),k=dl(t);return u.useEffect(()=>{!v||!j.current||(v.disconnect(),f.current=!1,v.observe(j.current))},[j,v]),u.useEffect(()=>(i({type:Ke.RegisterDroppable,element:{id:r,key:l,disabled:n,node:j,rect:h,data:k}}),()=>i({type:Ke.UnregisterDroppable,key:l,id:r})),[r]),u.useEffect(()=>{n!==p.current.disabled&&(i({type:Ke.SetDroppableDisabled,id:r,key:l,disabled:n}),p.current.disabled=n)},[r,l,n,i]),{active:a,rect:h,isOver:(c==null?void 0:c.id)===r,node:j,over:c,setNodeRef:N}}function I1(e){let{animation:t,children:n}=e;const[r,s]=u.useState(null),[l,a]=u.useState(null),i=Bo(n);return!n&&!r&&i&&s(i),rn(()=>{if(!l)return;const c=r==null?void 0:r.key,d=r==null?void 0:r.props.id;if(c==null||d==null){s(null);return}Promise.resolve(t(d,l)).then(()=>{s(null)})},[t,r,l]),De.createElement(De.Fragment,null,n,r?u.cloneElement(r,{ref:a}):null)}const L1={x:0,y:0,scaleX:1,scaleY:1};function O1(e){let{children:t}=e;return De.createElement(Nl.Provider,{value:rx},De.createElement(wa.Provider,{value:L1},t))}const $1={position:"fixed",touchAction:"none"},A1=e=>ga(e)?"transform 250ms ease":void 0,F1=u.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:l,className:a,rect:i,style:c,transform:d,transition:p=A1}=e;if(!i)return null;const f=s?d:{...d,scaleX:1,scaleY:1},h={...$1,width:i.width,height:i.height,top:i.top,left:i.left,transform:Mn.Transform.toString(f),transformOrigin:s&&r?Pv(r,i):void 0,transition:typeof p=="function"?p(r):p,...c};return De.createElement(n,{className:a,style:h,ref:t},l)}),B1=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:l,className:a}=e;if(l!=null&&l.active)for(const[i,c]of Object.entries(l.active))c!==void 0&&(s[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,c));if(l!=null&&l.dragOverlay)for(const[i,c]of Object.entries(l.dragOverlay))c!==void 0&&r.node.style.setProperty(i,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,d]of Object.entries(s))n.node.style.setProperty(c,d);a!=null&&a.active&&n.node.classList.remove(a.active)}},U1=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Mn.Transform.toString(t)},{transform:Mn.Transform.toString(n)}]},H1={duration:250,easing:"ease",keyframes:U1,sideEffects:B1({styles:{active:{opacity:"0"}}})};function W1(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return ma((l,a)=>{if(t===null)return;const i=n.get(l);if(!i)return;const c=i.node.current;if(!c)return;const d=nx(a);if(!d)return;const{transform:p}=kt(a).getComputedStyle(a),f=Vh(p);if(!f)return;const h=typeof t=="function"?t:V1(t);return Jh(c,s.draggable.measure),h({active:{id:l,data:i.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function V1(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...H1,...e};return l=>{let{active:a,dragOverlay:i,transform:c,...d}=l;if(!t)return;const p={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},f={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/i.rect.height:1},h={x:c.x-p.x,y:c.y-p.y,...f},x=s({...d,active:a,dragOverlay:i,transform:{initial:c,final:h}}),[w]=x,y=x[x.length-1];if(JSON.stringify(w)===JSON.stringify(y))return;const b=r==null?void 0:r({active:a,dragOverlay:i,...d}),g=i.node.animate(x,{duration:t,easing:n,fill:"forwards"});return new Promise(m=>{g.onfinish=()=>{b==null||b(),m()}})}}let Qd=0;function X1(e){return u.useMemo(()=>{if(e!=null)return Qd++,Qd},[e])}const ix=De.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:l,modifiers:a,wrapperElement:i="div",className:c,zIndex:d=999}=e;const{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggableNodes:w,droppableContainers:y,dragOverlay:b,over:g,measuringConfiguration:m,scrollableAncestors:v,scrollableAncestorRects:S,windowRect:j}=ax(),N=u.useContext(wa),k=X1(f==null?void 0:f.id),E=lx(a,{activatorEvent:p,active:f,activeNodeRect:h,containerNodeRect:x,draggingNodeRect:b.rect,over:g,overlayNodeRect:b.rect,scrollableAncestors:v,scrollableAncestorRects:S,transform:N,windowRect:j}),D=cu(h),P=W1({config:r,draggableNodes:w,droppableContainers:y,measuringConfiguration:m}),L=D?b.setRef:void 0;return De.createElement(O1,null,De.createElement(I1,{animation:P},f&&k?De.createElement(F1,{key:k,id:f.id,ref:L,as:i,activatorEvent:p,adjustScale:t,className:c,transition:l,rect:D,style:{zIndex:d,...s},transform:E},n):null))});function ba(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Y1(e,t){return e.reduce((n,r,s)=>{const l=t.get(r);return l&&(n[s]=l),n},Array(e.length))}function Vl(e){return e!==null&&e>=0}function K1(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Q1(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const cx=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const l=ba(t,r,n),a=t[s],i=l[s];return!i||!a?null:{x:i.left-a.left,y:i.top-a.top,scaleX:i.width/a.width,scaleY:i.height/a.height}},Xl={scaleX:1,scaleY:1},ux=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:l,overIndex:a}=e;const i=(t=l[n])!=null?t:r;if(!i)return null;if(s===n){const d=l[a];return d?{x:0,y:n<a?d.top+d.height-(i.top+i.height):d.top-i.top,...Xl}:null}const c=G1(l,s,n);return s>n&&s<=a?{x:0,y:-i.height-c,...Xl}:s<n&&s>=a?{x:0,y:i.height+c,...Xl}:{x:0,y:0,...Xl}};function G1(e,t,n){const r=e[t],s=e[t-1],l=e[t+1];return r?n<t?s?r.top-(s.top+s.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const dx="Sortable",fx=De.createContext({activeIndex:-1,containerId:dx,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:cx,disabled:{draggable:!1,droppable:!1}});function px(e){let{children:t,id:n,items:r,strategy:s=cx,disabled:l=!1}=e;const{active:a,dragOverlay:i,droppableRects:c,over:d,measureDroppableContainers:p}=ax(),f=Sl(dx,n),h=i.rect!==null,x=u.useMemo(()=>r.map(N=>typeof N=="object"&&"id"in N?N.id:N),[r]),w=a!=null,y=a?x.indexOf(a.id):-1,b=d?x.indexOf(d.id):-1,g=u.useRef(x),m=!K1(x,g.current),v=b!==-1&&y===-1||m,S=Q1(l);rn(()=>{m&&w&&p(x)},[m,x,w,p]),u.useEffect(()=>{g.current=x},[x]);const j=u.useMemo(()=>({activeIndex:y,containerId:f,disabled:S,disableTransforms:v,items:x,overIndex:b,useDragOverlay:h,sortedRects:Y1(x,c),strategy:s}),[y,f,S.draggable,S.droppable,v,x,b,c,h,s]);return De.createElement(fx.Provider,{value:j},t)}const q1=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return ba(n,r,s).indexOf(t)},J1=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:l,newIndex:a,previousItems:i,previousContainerId:c,transition:d}=e;return!d||!r||i!==l&&s===a?!1:n?!0:a!==s&&t===c},Z1={duration:200,easing:"ease"},hx="transform",e0=Mn.Transition.toString({property:hx,duration:0,easing:"linear"}),t0={roleDescription:"sortable"};function n0(e){let{disabled:t,index:n,node:r,rect:s}=e;const[l,a]=u.useState(null),i=u.useRef(n);return rn(()=>{if(!t&&n!==i.current&&r.current){const c=s.current;if(c){const d=gs(r.current,{ignoreTransform:!0}),p={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(p.x||p.y)&&a(p)}}n!==i.current&&(i.current=n)},[t,n,r,s]),u.useEffect(()=>{l&&a(null)},[l]),l}function xx(e){let{animateLayoutChanges:t=J1,attributes:n,disabled:r,data:s,getNewIndex:l=q1,id:a,strategy:i,resizeObserverConfig:c,transition:d=Z1}=e;const{items:p,containerId:f,activeIndex:h,disabled:x,disableTransforms:w,sortedRects:y,overIndex:b,useDragOverlay:g,strategy:m}=u.useContext(fx),v=r0(r,x),S=p.indexOf(a),j=u.useMemo(()=>({sortable:{containerId:f,index:S,items:p},...s}),[f,s,S,p]),N=u.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:k,node:E,isOver:D,setNodeRef:P}=z1({id:a,data:j,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...c}}),{active:L,activatorEvent:ie,activeNodeRect:W,attributes:z,setNodeRef:q,listeners:xe,isDragging:fe,over:O,setActivatorNodeRef:Q,transform:_}=D1({id:a,data:j,attributes:{...t0,...n},disabled:v.draggable}),ee=yv(P,q),X=!!L,ke=X&&!w&&Vl(h)&&Vl(b),ye=!g&&fe,qe=ye&&ke?_:null,ve=i!=null?i:m,Y=ke?qe!=null?qe:ve({rects:y,activeNodeRect:W,activeIndex:h,overIndex:b,index:S}):null,we=Vl(h)&&Vl(b)?l({id:a,items:p,activeIndex:h,overIndex:b}):S,ue=L==null?void 0:L.id,se=u.useRef({activeId:ue,items:p,newIndex:we,containerId:f}),Ue=p!==se.current.items,je=t({active:L,containerId:f,isDragging:fe,isSorting:X,id:a,index:S,items:p,newIndex:se.current.newIndex,previousItems:se.current.items,previousContainerId:se.current.containerId,transition:d,wasDragging:se.current.activeId!=null}),rt=n0({disabled:!je,index:S,node:E,rect:k});return u.useEffect(()=>{X&&se.current.newIndex!==we&&(se.current.newIndex=we),f!==se.current.containerId&&(se.current.containerId=f),p!==se.current.items&&(se.current.items=p)},[X,we,f,p]),u.useEffect(()=>{if(ue===se.current.activeId)return;if(ue!=null&&se.current.activeId==null){se.current.activeId=ue;return}const $=setTimeout(()=>{se.current.activeId=ue},50);return()=>clearTimeout($)},[ue]),{active:L,activeIndex:h,attributes:z,data:j,rect:k,index:S,newIndex:we,items:p,isOver:D,isSorting:X,isDragging:fe,listeners:xe,node:E,overIndex:b,over:O,setNodeRef:ee,setActivatorNodeRef:Q,setDroppableNodeRef:P,setDraggableNodeRef:q,transform:rt!=null?rt:Y,transition:V()};function V(){if(rt||Ue&&se.current.newIndex===S)return e0;if(!(ye&&!ga(ie)||!d)&&(X||je))return Mn.Transition.toString({...d,property:hx})}}function r0(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}Se.Down,Se.Right,Se.Up,Se.Left;const Ne={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Gd={always:{label:"",color:"#6b9b6e",bg:"#e0f0e1"},keyword:{label:"",color:"#9b6b6b",bg:"#f0e0e0"},mood:{label:"",color:"#9b7a3b",bg:"#f0ebd8"},message_mode:{label:"",color:"#6b7b9b",bg:"#e0e6f0"}};function mx({activation:e}){const t=Gd[e]||Gd.always;return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:t.color,background:t.bg},children:t.label})}const Yl=80;function s0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Yl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{if(p.target.closest(".drag-handle"))return;const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Yl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Yl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Yl):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(ps,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function l0({book:e,onTap:t,onDelete:n}){var p;const{attributes:r,listeners:s,setNodeRef:l,transform:a,transition:i,isDragging:c}=xx({id:String(e.id)}),d={transform:Mn.Transform.toString(a),transition:i,opacity:c?0:1};return o.jsx("div",{ref:l,style:d,className:"mb-3",children:o.jsx(s0,{onDelete:()=>n(e),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Ne.bg,userSelect:"none"},children:[o.jsx("div",{...r,...s,className:"drag-handle shrink-0 cursor-grab touch-none px-1",style:{cursor:c?"grabbing":"grab"},children:o.jsx(yl,{size:18,style:{color:Ne.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>t(e),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:Ne.text},children:e.name}),o.jsx(mx,{activation:e.activation})]}),e.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:Ne.textMuted},children:e.folder}),e.activation==="keyword"&&((p=e.keywords)==null?void 0:p.length)>0&&o.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[e.keywords.slice(0,3).map((f,h)=>o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(232,160,191,0.15)",color:Ne.accentDark},children:f},h)),e.keywords.length>3&&o.jsxs("span",{className:"text-[10px]",style:{color:Ne.textMuted},children:["+",e.keywords.length-3]})]})]}),o.jsx(os,{size:16,style:{color:Ne.textMuted,flexShrink:0},onClick:()=>t(e)})]})})})}function o0({folder:e,books:t,onDelete:n,onTap:r,onReorder:s}){const[l,a]=u.useState(!0),[i,c]=u.useState(null),d=Uh(Vo(ya,{activationConstraint:{distance:5}}),Vo(iu,{activationConstraint:{delay:200,tolerance:5}})),p=({active:h,over:x})=>{if(c(null),!x||h.id===x.id)return;const w=t.findIndex(g=>String(g.id)===String(h.id)),y=t.findIndex(g=>String(g.id)===String(x.id));if(w<0||y<0)return;const b=ba(t,w,y);s(e,b)},f=i?t.find(h=>String(h.id)===String(i)):null;return o.jsxs("div",{className:"mb-4",children:[o.jsxs("button",{className:"mb-2 flex w-full items-center gap-2 px-1",onClick:()=>a(!l),children:[l?o.jsx(jr,{size:14,style:{color:Ne.textMuted}}):o.jsx(os,{size:14,style:{color:Ne.textMuted}}),o.jsx("span",{className:"text-[12px] font-bold tracking-wide",style:{color:Ne.textMuted},children:e||""}),o.jsx("span",{className:"ml-1 rounded-full px-1.5 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.12)",color:Ne.textMuted},children:t.length})]}),l&&o.jsxs(ox,{sensors:d,collisionDetection:Hh,onDragStart:({active:h})=>c(h.id),onDragEnd:p,children:[o.jsx(px,{items:t.map(h=>String(h.id)),strategy:ux,children:t.map(h=>o.jsx(l0,{book:h,onTap:r,onDelete:n},h.id))}),o.jsx(ix,{children:f&&o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:Ne.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx("div",{className:"shrink-0 px-1",children:o.jsx(yl,{size:18,style:{color:Ne.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"truncate text-[14px] font-semibold",style:{color:Ne.text},children:f.name}),o.jsx(mx,{activation:f.activation})]}),f.folder&&o.jsx("div",{className:"mt-0.5 text-[11px]",style:{color:Ne.textMuted},children:f.folder})]}),o.jsx(os,{size:16,style:{color:Ne.textMuted,flexShrink:0}})]})})]})]})}function a0(){const e=Ft(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[l,a]=u.useState(null),[i,c]=u.useState(null),d=y=>{c(y),setTimeout(()=>c(null),2e3)},p=()=>{s(!0),B("/api/world-books").then(y=>n(y.world_books||[])).catch(()=>d("")).finally(()=>s(!1))};u.useEffect(()=>{p()},[]);const f=async y=>{a(null);try{await B(`/api/world-books/${y.id}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==y.id)),d("")}catch(b){d("")}},h=(y,b)=>{const g=y||"";n(m=>[...m.filter(S=>(S.folder||"")!==g),...b]),B("/api/world-books/reorder",{method:"PUT",body:{ordered_ids:b.map(m=>m.id)}}).catch(()=>d(""))},x={};for(const y of t){const b=y.folder||"";x[b]||(x[b]=[]),x[b].push(y)}const w=Object.keys(x).sort((y,b)=>y===""?1:b===""?-1:y.localeCompare(b));return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ne.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full nm-active",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:Ne.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ne.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books/new"),children:o.jsx(fs,{size:20,style:{color:Ne.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:r?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-t-transparent",style:{borderColor:Ne.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(yl,{size:36,style:{color:Ne.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:Ne.textMuted},children:" + "})]}):w.map(y=>o.jsx(o0,{folder:y,books:x[y],onDelete:b=>a(b),onTap:b=>e(`/world-books/${b.id}`),onReorder:h},y))}),l&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>a(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:Ne.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:y=>y.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:Ne.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:Ne.textMuted},children:["",l.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:Ne.bg,boxShadow:"var(--card-shadow-sm)",color:Ne.text},onClick:()=>a(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>f(l),children:""})]})]})}),i&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const te={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function i0({label:e,value:t,onChange:n,placeholder:r}){return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:te.textMuted},children:e}),o.jsx("input",{type:"text",value:t,onChange:s=>n(s.target.value),placeholder:r,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:te.bg,color:te.text}})]})}function c0({value:e,onChange:t,folders:n}){const[r,s]=u.useState(!1),l=n.filter(a=>a!==e&&a.toLowerCase().includes(e.toLowerCase()));return o.jsxs("div",{className:"relative mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:te.textMuted},children:""}),o.jsx("input",{type:"text",value:e,onChange:a=>{t(a.target.value),s(!0)},onFocus:()=>s(!0),onBlur:()=>setTimeout(()=>s(!1),150),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:te.bg,color:te.text}}),r&&l.length>0&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[160px] overflow-y-auto rounded-[14px]",style:{background:te.bg,boxShadow:"var(--card-shadow)"},children:l.map(a=>o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:te.text},onMouseDown:()=>{t(a),s(!1)},children:a},a))})]})}function u0({value:e,onChange:t}){const n=[{value:"always",label:""},{value:"keyword",label:""},{value:"mood",label:""},{value:"message_mode",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:te.textMuted},children:""}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:te.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:e===r.value?te.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?te.accentDark:te.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})]})}function d0({selected:e,onChange:t}){const n=[{value:"long",label:""},{value:"short",label:""}];return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:te.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:te.bg,minHeight:48},children:n.map(r=>{const s=e===r.value;return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?te.accentDark:te.bg,color:s?"white":te.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>t(r.value),children:r.label},r.value)})})]})}const f0=[{value:"happy",label:""},{value:"sad",label:""},{value:"angry",label:""},{value:"anxious",label:""},{value:"tired",label:""},{value:"emo",label:""},{value:"flirty",label:""},{value:"proud",label:""},{value:"calm",label:""}];function p0({selected:e,onChange:t}){const n=r=>{e.includes(r)?t(e.filter(s=>s!==r)):t([...e,r])};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:te.textMuted},children:""}),o.jsx("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:te.bg,minHeight:48},children:f0.map(r=>{const s=e.includes(r.value);return o.jsx("button",{className:"rounded-full px-3 py-1.5 text-[13px] font-medium transition-all",style:{background:s?te.accentDark:te.bg,color:s?"white":te.textMuted,boxShadow:s?"none":"var(--card-shadow-sm)"},onClick:()=>n(r.value),children:r.label},r.value)})})]})}function h0({keywords:e,onChange:t}){const[n,r]=u.useState(""),s=()=>{const l=n.trim();if(!l||e.includes(l)){r("");return}t([...e,l]),r("")};return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:te.textMuted},children:""}),o.jsxs("div",{className:"flex flex-wrap gap-2 rounded-[14px] p-3",style:{boxShadow:"var(--inset-shadow)",background:te.bg,minHeight:48},children:[e.map(l=>o.jsxs("span",{className:"flex items-center gap-1 rounded-full px-2.5 py-1 text-[12px] font-medium",style:{background:"rgba(232,160,191,0.2)",color:te.accentDark},children:[l,o.jsx("button",{onClick:()=>t(e.filter(a=>a!==l)),children:o.jsx(bl,{size:10})})]},l)),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),onKeyDown:l=>{(l.key==="Enter"||l.key===",")&&(l.preventDefault(),s())},placeholder:"...",className:"w-24 bg-transparent text-[12px] outline-none",style:{color:te.text}}),n.trim()&&o.jsx("button",{className:"flex h-5 w-5 items-center justify-center rounded-full",style:{background:te.accentDark},onClick:s,children:o.jsx(fs,{size:10,color:"white"})})]})]}),o.jsx("p",{className:"mt-1 text-[10px]",style:{color:te.textMuted},children:" Enter "})]})}function x0({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:te.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:te.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:te.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(as,{size:18,style:{color:te.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:te.bg,color:te.text},placeholder:"..."})]})}function qd(){const e=Ft(),{id:t}=Th(),n=!t,[r,s]=u.useState(""),[l,a]=u.useState(""),[i,c]=u.useState("always"),[d,p]=u.useState([]),[f,h]=u.useState("long"),[x,w]=u.useState(""),[y,b]=u.useState(!1),[g,m]=u.useState(!n),[v,S]=u.useState(null),[j,N]=u.useState([]),[k,E]=u.useState(!1),D=u.useRef(null),P=W=>{var xe;const z=(xe=W.target.files)==null?void 0:xe[0];if(!z)return;const q=new FileReader;q.onload=fe=>w(fe.target.result||""),q.readAsText(z),W.target.value=""},L=W=>{S(W),setTimeout(()=>S(null),2e3)};u.useEffect(()=>{B("/api/world-books").then(W=>{const z=W.world_books||[];if(N([...new Set(z.map(q=>q.folder).filter(Boolean))]),!n){const q=z.find(xe=>String(xe.id)===String(t));q&&(s(q.name),a(q.folder||""),c(q.activation),p(q.keywords||[]),h(q.message_mode||"long"),w(q.content))}}).catch(()=>L("")).finally(()=>m(!1))},[t,n]);const ie=async()=>{if(!r.trim()){L("");return}b(!0);try{const W={name:r.trim(),folder:l.trim()||null,activation:i,keywords:i==="keyword"||i==="mood"?d:[],message_mode:i==="message_mode"?f:null,content:x};n?(await B("/api/world-books",{method:"POST",body:W}),L("")):(await B(`/api/world-books/${t}`,{method:"PUT",body:W}),L(""))}catch(W){L(": "+W.message)}finally{b(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:te.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:te.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/world-books",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:te.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:te.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:te.bg,boxShadow:y?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:ie,disabled:y,children:o.jsx(wl,{size:18,style:{color:te.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:g?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:te.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"rounded-[20px] p-5 mb-4",style:{background:te.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(i0,{label:"",value:r,onChange:s,placeholder:""}),o.jsx(c0,{value:l,onChange:a,folders:j}),o.jsx(u0,{value:i,onChange:c}),i==="keyword"&&o.jsx(h0,{keywords:d,onChange:p}),i==="mood"&&o.jsx(p0,{selected:d,onChange:p}),i==="message_mode"&&o.jsx(d0,{selected:f,onChange:h})]}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:te.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:te.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:te.bg},onClick:()=>{var W;return(W=D.current)==null?void 0:W.click()},title:"",children:o.jsx(pa,{size:13,style:{color:te.textMuted}})}),o.jsx("input",{ref:D,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:P}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:te.bg},onClick:()=>E(!0),title:"",children:o.jsx(vl,{size:13,style:{color:te.accentDark}})})]})]}),o.jsx("textarea",{value:x,onChange:W=>w(W.target.value),placeholder:"...",rows:10,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:te.bg,color:te.text}})]})]})}),k&&o.jsx(x0,{value:x,onChange:w,onClose:()=>E(!1)}),v&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:v})})]})}const $e={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Kl=80;function m0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Kl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Kl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Kl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Kl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:$e.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(ps,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function g0({assistant:e,localAvatar:t,onTap:n}){var s;const r=t||null;return o.jsxs("div",{className:"flex items-center gap-3 rounded-[18px] p-4",style:{background:$e.bg,userSelect:"none"},onClick:()=>n(e),children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:48,height:48,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:$e.bg},children:r?o.jsx("img",{src:r,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[20px]",style:{color:$e.accentDark},children:((s=e.name)==null?void 0:s[0])||"?"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[15px] font-bold",style:{color:$e.text},children:e.name}),e.created_at&&o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:$e.textMuted},children:e.created_at.slice(0,10)})]}),o.jsx(os,{size:16,style:{color:$e.textMuted,flexShrink:0}})]})}function y0(){const e=Ft(),[t,n]=u.useState([]),[r,s]=u.useState({}),[l,a]=u.useState(!0),[i,c]=u.useState(null),[d,p]=u.useState(null),f=w=>{p(w),setTimeout(()=>p(null),2e3)},h=()=>{a(!0),B("/api/assistants").then(async w=>{const y=w.assistants||[];n(y);const b={};await Promise.all(y.map(async g=>{const m=await hs(`assistant-avatar-${g.id}`).catch(()=>null);m&&(b[g.id]=m)})),s(b)}).catch(()=>f("")).finally(()=>a(!1))};u.useEffect(()=>{h()},[]);const x=async w=>{c(null);try{await B(`/api/assistants/${w.id}`,{method:"DELETE"}),n(y=>y.filter(b=>b.id!==w.id)),f("")}catch(y){f("")}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:$e.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:$e.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:$e.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:$e.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:$e.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants/new"),children:o.jsx(fs,{size:20,style:{color:$e.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8 pt-5",children:l?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:$e.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-20",children:[o.jsx(Ih,{size:36,style:{color:$e.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:$e.textMuted},children:" + "})]}):t.map(w=>o.jsx(m0,{onDelete:()=>c(w),children:o.jsx(g0,{assistant:w,localAvatar:r[w.id],onTap:y=>e(`/assistants/${y.id}`)})},w.id))}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>c(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:$e.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:w=>w.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:$e.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:$e.textMuted},children:["",i.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:$e.bg,boxShadow:"var(--card-shadow-sm)",color:$e.text},onClick:()=>c(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:()=>x(i),children:""})]})]})}),d&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:d})})]})}const M={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Jd({label:e,value:t,onChange:n,placeholder:r,rows:s,onExpand:l,onHistory:a}){const i=u.useRef(null),c=d=>{var h;const p=(h=d.target.files)==null?void 0:h[0];if(!p)return;const f=new FileReader;f.onload=x=>n(x.target.result||""),f.readAsText(p),d.target.value=""};return o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),o.jsxs("div",{className:"flex items-center gap-2",children:[a&&o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:a,children:o.jsx(ov,{size:13,style:{color:M.textMuted}})}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var d;return(d=i.current)==null?void 0:d.click()},children:o.jsx(pa,{size:13,style:{color:M.textMuted}})}),o.jsx("input",{ref:i,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:c}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:l,children:o.jsx(vl,{size:13,style:{color:M.accentDark}})})]})]}),o.jsx("textarea",{value:t,onChange:d=>n(d.target.value),placeholder:r,rows:s||6,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})}function ei({label:e,value:t,onChange:n,presets:r}){const[s,l]=u.useState(!1),a=r.find(i=>i.id===t);return o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text},onClick:()=>l(!s),children:[o.jsx("span",{style:{color:a?M.text:M.textMuted},children:a?a.name:""}),o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:M.textMuted,transform:s?"rotate(180deg)":"none",transition:"transform 0.2s"},children:o.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),s&&o.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:M.bg,boxShadow:"var(--card-shadow)",zIndex:40},children:[o.jsx("button",{className:"flex w-full items-center px-4 py-3 text-[14px]",style:{color:M.textMuted},onClick:()=>{n(null),l(!1)},children:""}),r.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[14px]",style:{color:M.text},onClick:()=>{n(i.id),l(!1)},children:[o.jsx("span",{children:i.name}),i.id===t&&o.jsx(yr,{size:14,style:{color:M.accentDark}})]},i.id))]})]})]})}function ti({value:e,onChange:t,onClose:n,title:r,placeholder:s}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:r||""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(as,{size:18,style:{color:M.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:l=>t(l.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:M.bg,color:M.text},placeholder:s||""})]})}const Ql=80;function v0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Ql);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Ql,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Ql)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Ql):l(0)};return o.jsxs("div",{className:"relative overflow-hidden rounded-[18px]",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(ps,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function w0({title:e,message:t,onConfirm:n,onCancel:r}){return o.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:r,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:M.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:s=>s.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:M.text},children:e||""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:M.textMuted},children:t}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.text},onClick:r,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:n,children:""})]})]})})}function b0({items:e,currentContent:t,onApply:n,onClose:r,onDelete:s}){const[l,a]=u.useState("current"),[i,c]=u.useState(null),[d,p]=u.useState(null),f=x=>x?new Date(x).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",h=async()=>{if(l==="current"){r();return}const x=e.find(w=>w.id===l);x&&await n(x.content),r()};return i?o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsxs("span",{className:"text-[15px] font-bold",style:{color:M.text},children:[" ",i.version]}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>c(null),children:o.jsx(as,{size:18,style:{color:M.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10",children:o.jsx("div",{className:"rounded-[14px] p-4",style:{boxShadow:"var(--inset-shadow)",background:M.bg},children:o.jsx("p",{className:"whitespace-pre-wrap text-[13px] leading-relaxed",style:{color:M.text},children:i.content})})})]}):o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:M.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:r,children:o.jsx(as,{size:18,style:{color:M.accentDark}})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[o.jsxs("div",{className:"mb-2 flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:l==="current"?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[o.jsx("button",{onClick:()=>a("current"),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:l==="current"?M.accentDark:M.bg,boxShadow:l==="current"?"none":"var(--icon-inset)"},children:l==="current"&&o.jsx(yr,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:""}),o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#2a9d5c",background:"rgba(42,157,92,0.12)"},children:""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:t})]})]}),e.length===0&&o.jsx("p",{className:"py-8 text-center text-[13px]",style:{color:M.textMuted},children:""}),e.map(x=>o.jsx("div",{className:"mb-2",children:o.jsx(v0,{onDelete:()=>p(x.id),children:o.jsxs("div",{className:"flex items-center gap-3 rounded-[14px] p-3",style:{boxShadow:l===x.id?"var(--inset-shadow)":"var(--card-shadow-sm)",background:M.bg},children:[o.jsx("button",{onClick:()=>a(x.id),className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:l===x.id?M.accentDark:M.bg,boxShadow:l===x.id?"none":"var(--icon-inset)"},children:l===x.id&&o.jsx(yr,{size:12,color:"white"})}),o.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>c(x),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-[13px] font-semibold",style:{color:M.text},children:[" ",x.version]}),o.jsx("span",{className:"text-[10px]",style:{color:M.textMuted},children:f(x.created_at)})]}),o.jsx("p",{className:"mt-0.5 truncate text-[11px]",style:{color:M.textMuted},children:x.content})]})]})})},x.id))]}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsx("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:h,children:""})}),d&&o.jsx(w0,{message:"",onCancel:()=>p(null),onConfirm:()=>{s(d),p(null)}})]})}function gx(e){return e==="always"?"":e==="keyword"?"":e==="message_mode"?"":""}function yx(e){return!e||!Array.isArray(e)?[]:e.map((t,n)=>typeof t=="object"&&t!==null?t:{id:t,position:"after",sort_order:n})}function k0({item:e,book:t,position:n,sectionList:r,onRemove:s,onChangePosition:l}){const{attributes:a,listeners:i,setNodeRef:c,transform:d,transition:p,isDragging:f}=xx({id:String(e.id)}),h={transform:Mn.Transform.toString(d),transition:p,opacity:f?0:1};return t?o.jsxs("div",{ref:c,style:h,className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",children:[o.jsx("div",{...a,...i,className:"cursor-grab touch-none p-1",style:{cursor:f?"grabbing":"grab"},children:o.jsx(yl,{size:14,style:{color:M.textMuted}})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.text},children:t.name}),o.jsxs("div",{className:"text-[10px]",style:{color:M.textMuted},children:[gx(t.activation),t.folder?`  ${t.folder}`:""]})]}),o.jsx("button",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},onClick:()=>l(e.id,n==="before"?"after":"before"),children:n==="before"?"":""}),o.jsx("button",{onClick:()=>s(e.id),children:o.jsx(bl,{size:14,style:{color:M.textMuted}})})]}):null}function j0({allBooks:e,mountedIds:t,onClose:n,onConfirm:r}){const[s,l]=u.useState(new Set(t)),a={};e.forEach(d=>{const p=d.folder||"";a[p]||(a[p]=[]),a[p].push(d)});const i=d=>{l(p=>{const f=new Set(p);return f.has(d)?f.delete(d):f.add(d),f})},c=d=>{const p=d.every(f=>s.has(f.id));l(f=>{const h=new Set(f);return p?d.forEach(x=>h.delete(x.id)):d.forEach(x=>h.add(x.id)),h})};return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-end",style:{background:"rgba(0,0,0,0.4)"},children:o.jsxs("div",{className:"flex w-full flex-col rounded-t-[24px]",style:{background:M.bg,maxHeight:"82vh"},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between p-5 pb-3",children:[o.jsx("h3",{className:"text-[16px] font-bold",style:{color:M.text},children:""}),o.jsx("button",{onClick:n,children:o.jsx(bl,{size:20,style:{color:M.textMuted}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5",children:Object.entries(a).map(([d,p])=>{const f=p.every(h=>s.has(h.id));return o.jsxs("div",{className:"mb-5",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:d}),o.jsx("button",{className:"rounded-full px-2.5 py-1 text-[11px] font-semibold",style:{background:f?"rgba(201,98,138,0.15)":"rgba(136,136,160,0.1)",color:f?M.accentDark:M.textMuted},onClick:()=>c(p),children:f?"":""})]}),o.jsx("div",{className:"space-y-2",children:p.map(h=>{const x=s.has(h.id);return o.jsxs("button",{className:"flex w-full items-center gap-3 rounded-[14px] p-3",style:{background:M.bg,boxShadow:x?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>i(h.id),children:[o.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:x?M.accentDark:M.bg,boxShadow:x?"none":"var(--icon-inset)"},children:x&&o.jsx(yr,{size:12,color:"white"})}),o.jsx("div",{className:"flex-1 min-w-0 text-left",children:o.jsx("div",{className:"truncate text-[13px] font-medium",style:{color:x?M.accentDark:M.text},children:h.name})}),o.jsx("span",{className:"shrink-0 rounded-full px-2 py-0.5 text-[10px]",style:{background:"rgba(136,136,160,0.1)",color:M.textMuted},children:gx(h.activation)})]},h.id)})})]},d)})}),o.jsx("div",{className:"shrink-0 p-5",children:o.jsxs("button",{className:"w-full rounded-[14px] py-3.5 text-[15px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>r([...s]),children:[" ",s.size,""]})})]})})}function S0({ruleSetIds:e,onChange:t,allBooks:n}){const[r,s]=u.useState(!1),[l,a]=u.useState(null),i=yx(e),c=i.filter(j=>j.position==="before").sort((j,N)=>j.sort_order-N.sort_order),d=i.filter(j=>j.position==="after").sort((j,N)=>j.sort_order-N.sort_order),p=j=>n.find(N=>N.id===j||N.id===Number(j)),f=Uh(Vo(ya,{activationConstraint:{distance:5}}),Vo(iu,{activationConstraint:{delay:150,tolerance:5}})),h=({active:j})=>a(j.id),x=({active:j,over:N})=>{if(!N)return;const k=i.find(D=>String(D.id)===String(j.id)),E=i.find(D=>String(D.id)===String(N.id));if(!(!k||!E)&&k.position!==E.position){const D=i.map(P=>String(P.id)===String(k.id)?{...P,position:E.position}:P);t(D)}},w=({active:j,over:N})=>{if(a(null),!N||j.id===N.id)return;const k=i.find(z=>String(z.id)===String(j.id)),E=i.find(z=>String(z.id)===String(N.id));if(!k||!E||k.position!==E.position)return;const D=k.position==="before"?[...c]:[...d],P=D.findIndex(z=>String(z.id)===String(j.id)),L=D.findIndex(z=>String(z.id)===String(N.id)),ie=ba(D,P,L).map((z,q)=>({...z,sort_order:q})),W=i.filter(z=>z.position!==k.position);t([...W,...ie])},y=j=>t(i.filter(N=>N.id!==j)),b=(j,N)=>{const E=(N==="before"?c:d).length;t(i.map(D=>D.id===j?{...D,position:N,sort_order:E}:D))},g=j=>{const N=i.map(L=>L.id),E=j.filter(L=>!N.includes(L)).map((L,ie)=>({id:L,position:"after",sort_order:d.length+ie})),D=new Set(N.filter(L=>!j.includes(L))),P=i.filter(L=>!D.has(L.id));t([...P,...E])},m=(j,N)=>j.length===0?o.jsx("div",{className:"py-3 text-center text-[12px]",style:{color:M.textMuted},children:""}):o.jsx(px,{items:j.map(k=>String(k.id)),strategy:ux,children:o.jsx("div",{className:"rounded-[14px] px-2 pt-1",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},children:j.map((k,E)=>o.jsxs("div",{children:[E>0&&o.jsx("div",{className:"mx-2",style:{height:1,background:"rgba(0,0,0,0.06)"}}),o.jsx(k0,{item:k,book:p(k.id),position:N,sectionList:j,onRemove:y,onChangePosition:b})]},k.id))})}),v=l?i.find(j=>String(j.id)===String(l)):null,S=v?p(v.id):null;return o.jsxs(ox,{sensors:f,collisionDetection:Hh,onDragStart:h,onDragOver:x,onDragEnd:w,children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(c,"before")]}),o.jsxs("div",{className:"my-4 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}}),o.jsx("span",{className:"rounded-full px-3 py-1 text-[11px] font-bold",style:{background:"rgba(232,160,191,0.15)",color:M.accentDark},children:"System Prompt"}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.25)"}})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wide",style:{color:M.textMuted},children:"System Prompt "}),m(d,"after")]}),o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-3 text-[14px] font-semibold",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)",color:M.accentDark},onClick:()=>s(!0),children:[o.jsx(fs,{size:16})," "]}),o.jsx(ix,{children:S&&o.jsxs("div",{className:"flex items-center gap-2 rounded-[14px] px-3 py-2.5",style:{background:M.bg,boxShadow:"var(--card-shadow)",opacity:.9},children:[o.jsx(yl,{size:14,style:{color:M.textMuted}}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("div",{className:"truncate text-[13px] font-semibold",style:{color:M.accentDark},children:S.name})})]})}),r&&o.jsx(j0,{allBooks:n,mountedIds:i.map(j=>j.id),onClose:()=>s(!1),onConfirm:j=>{g(j),s(!1)}})]})}function Zd(){const e=Ft(),{id:t}=Th(),n=!t,[r,s]=u.useState("basic"),[l,a]=u.useState(""),[i,c]=u.useState(""),[d,p]=u.useState(""),[f,h]=u.useState(null),[x,w]=u.useState(null),[y,b]=u.useState(null),[g,m]=u.useState(""),[v,S]=u.useState(""),[j,N]=u.useState(null),[k,E]=u.useState(null),[D,P]=u.useState([]),[L,ie]=u.useState([]),[W,z]=u.useState([]),[q,xe]=u.useState(!1),[fe,O]=u.useState(!n),[Q,_]=u.useState(null),[ee,X]=u.useState(!1),[ke,ye]=u.useState(!1),[qe,ve]=u.useState(!1),[Y,we]=u.useState(null),[ue,se]=u.useState([]),Ue=u.useRef(null),je=u.useRef(null),rt=I=>{var de;const J=(de=I.target.files)==null?void 0:de[0];if(!J)return;const re=new FileReader;re.onload=He=>p(He.target.result||""),re.readAsText(J),I.target.value=""},V=I=>{_(I),setTimeout(()=>_(null),2500)},$=async I=>{const J=I==="human"?j:k;if(!J){V("");return}try{const re=await B(`/api/core-blocks/${J}/history`);se(re.history||[]),we(I)}catch(re){V("")}};u.useEffect(()=>{(async()=>{const[J,re]=await Promise.all([B("/api/presets").catch(()=>({presets:[]})),B("/api/world-books").catch(()=>({world_books:[]}))]);if(ie(J.presets||[]),z(re.world_books||[]),n)O(!1);else try{const[de,He]=await Promise.all([B(`/api/assistants/${t}`),B(`/api/core-blocks?assistant_id=${t}`).catch(()=>({blocks:[]}))]);a(de.name||""),hs(`assistant-avatar-${t}`).then(We=>{We&&c(We)}).catch(function(){}),p(de.system_prompt||""),h(de.model_preset_id||null),w(de.summary_model_preset_id||null),b(de.summary_fallback_preset_id||null),P(de.rule_set_ids||[]);for(const We of He.blocks||[])We.block_type==="human"?(m(We.content||""),N(We.id)):We.block_type==="persona"&&(S(We.content||""),E(We.id))}catch(de){V(": "+de.message)}finally{O(!1)}})()},[t,n]);const le=I=>{var de;const J=(de=I.target.files)==null?void 0:de[0];if(!J)return;const re=new FileReader;re.onload=async He=>{const We=He.target.result,mn=`assistant-avatar-${t||"new"}`;try{await ec(mn,We),c(We)}catch(ln){V("")}},re.readAsDataURL(J),I.target.value=""},ne=async()=>{if(!l.trim()){V("");return}xe(!0);try{const I={name:l.trim(),avatar_url:i?`assistant-avatar-${t||"new"}`:null,system_prompt:d,model_preset_id:f,summary_model_preset_id:x,summary_fallback_preset_id:y,rule_set_ids:yx(D)};let J=t;if(n?(J=(await B("/api/assistants",{method:"POST",body:{name:l.trim()}})).id,i&&(await ec(`assistant-avatar-${J}`,i),I.avatar_url=`assistant-avatar-${J}`),await B(`/api/assistants/${J}`,{method:"PUT",body:I})):await B(`/api/assistants/${t}`,{method:"PUT",body:I}),j)await B(`/api/core-blocks/${j}`,{method:"PUT",body:{content:g}});else if(g.trim()){const re=await B("/api/core-blocks",{method:"POST",body:{block_type:"human",assistant_id:Number(J),content:g}});N(re.id)}if(k)await B(`/api/core-blocks/${k}`,{method:"PUT",body:{content:v}});else if(v.trim()){const re=await B("/api/core-blocks",{method:"POST",body:{block_type:"persona",assistant_id:Number(J),content:v}});E(re.id)}V("")}catch(I){V(": "+I.message)}finally{xe(!1)}},pe=[{key:"basic",label:""},{key:"about",label:"Core Blocks"},{key:"books",label:""}];return o.jsxs("div",{className:"flex h-full flex-col",style:{background:M.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/assistants",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:M.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:M.text},children:n?"":""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:M.bg,boxShadow:q?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:ne,disabled:q,children:o.jsx(wl,{size:18,style:{color:M.accentDark}})})]}),o.jsx("div",{className:"flex shrink-0 gap-1 px-5 pb-3",children:pe.map(I=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2.5 text-[13px] font-semibold transition-all",style:{background:r===I.key?M.bg:"transparent",boxShadow:r===I.key?"var(--card-shadow-sm)":"none",color:r===I.key?M.accentDark:M.textMuted},onClick:()=>s(I.key),children:I.label},I.key))}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:fe?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:M.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[r==="basic"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-4 flex items-center gap-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var I;return(I=Ue.current)==null?void 0:I.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:M.bg},children:i?o.jsx("img",{src:i,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[24px]",style:{color:M.accentDark},children:(l==null?void 0:l[0])||"?"})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:M.accentDark},children:o.jsx(Lh,{size:9,color:"white"})})]}),o.jsx("input",{ref:Ue,type:"file",accept:"image/*",className:"hidden",onChange:le}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),o.jsx("input",{type:"text",value:l,onChange:I=>a(I.target.value),placeholder:"",className:"w-full rounded-[12px] px-4 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]})]}),o.jsxs("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:M.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>{var I;return(I=je.current)==null?void 0:I.click()},title:"",children:o.jsx(pa,{size:13,style:{color:M.textMuted}})}),o.jsx("input",{ref:je,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:rt}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:M.bg},onClick:()=>X(!0),title:"",children:o.jsx(vl,{size:13,style:{color:M.accentDark}})})]})]}),o.jsx("textarea",{value:d,onChange:I=>p(I.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:M.bg,color:M.text}})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(ei,{label:"",value:f,onChange:h,presets:L}),o.jsx(ei,{label:"",value:x,onChange:w,presets:L}),o.jsx(ei,{label:"",value:y,onChange:b,presets:L})]})]}),r==="about"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-4 rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Jd,{label:"human block",value:g,onChange:m,placeholder:" AI ...",rows:7,onExpand:()=>ye(!0),onHistory:()=>$("human")})}),o.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(Jd,{label:"persona block",value:v,onChange:S,placeholder:"AI ...",rows:7,onExpand:()=>ve(!0),onHistory:()=>$("persona")})})]}),r==="books"&&o.jsx("div",{className:"rounded-[20px] p-4",style:{background:M.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(S0,{ruleSetIds:D,onChange:P,allBooks:W})})]})}),ee&&o.jsx(ti,{value:d,onChange:p,onClose:()=>X(!1),title:"",placeholder:"..."}),ke&&o.jsx(ti,{value:g,onChange:m,onClose:()=>ye(!1),title:"human block",placeholder:" AI ..."}),qe&&o.jsx(ti,{value:v,onChange:S,onClose:()=>ve(!1),title:"persona block",placeholder:"AI ..."}),Y&&o.jsx(b0,{items:ue,currentContent:Y==="human"?g:v,onApply:async I=>{const J=Y==="human"?j:k;try{await B(`/api/core-blocks/${J}`,{method:"PUT",body:{content:I}}),Y==="human"?m(I):S(I),V("")}catch(re){V("")}},onDelete:async I=>{try{await B(`/api/core-blocks/history/${I}`,{method:"DELETE"}),se(J=>J.filter(re=>re.id!==I)),V("")}catch(J){V("")}},onClose:()=>we(null)}),Q&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:Q})})]})}const oe={bg:"var(--bg)",accent:"var(--accent)",text:"var(--text)",textMuted:"var(--text-muted)"};function ni({icon:e,label:t,hint:n,onClick:r}){return o.jsxs("button",{className:"flex w-full items-center gap-4 px-4 py-4",onClick:r,children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:oe.bg},children:e}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:oe.text},children:t}),n&&o.jsx("div",{className:"text-[11px]",style:{color:oe.textMuted},children:n})]}),o.jsx(os,{size:16,style:{color:oe.textMuted}})]})}function ef(){return o.jsx("div",{className:"mx-4 h-px",style:{background:"rgba(136,136,160,0.15)"}})}function rr({value:e,onChange:t,min:n,max:r}){const[s,l]=u.useState(String(e));u.useEffect(()=>l(String(e)),[e]);const a=()=>{let i=parseInt(s);isNaN(i)&&(i=n),i=Math.max(n,Math.min(r,i)),l(String(i)),t(i)};return o.jsx("input",{type:"number",value:s,onChange:i=>l(i.target.value),onBlur:a,onKeyDown:i=>i.key==="Enter"&&a(),className:"w-20 rounded-[10px] py-2 text-center text-[14px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:oe.bg,color:oe.text},min:n,max:r})}function N0(){const e=Ft(),[t,n]=u.useState(()=>parseInt(localStorage.getItem("telegram_buffer_seconds")||"15")),[r,s]=u.useState(8),[l,a]=u.useState(8e3),[i,c]=u.useState(16e3),[d,p]=u.useState(800),[f,h]=u.useState(800),[x,w]=u.useState(2e3),[y,b]=u.useState(!1),[g,m]=u.useState(!1),[v,S]=u.useState(null),j=k=>{S(k),setTimeout(()=>S(null),2e3)};u.useEffect(()=>{B("/api/settings/context-budget").then(k=>{a(k.retain_budget),c(k.trigger_threshold),p(k.summary_budget_longterm),h(k.summary_budget_daily),w(k.summary_budget_recent),b(!0)}).catch(()=>b(!0))},[]),u.useEffect(()=>{localStorage.setItem("telegram_buffer_seconds",String(t)),B("/api/settings/buffer-seconds",{method:"PUT",body:{seconds:t}}).catch(()=>{})},[t]),u.useEffect(()=>{B("/api/settings/short-msg-max").then(k=>s(k.max_count||8)).catch(()=>{})},[]),u.useEffect(()=>{B("/api/settings/short-msg-max",{method:"PUT",body:{max_count:r}}).catch(()=>{})},[r]);const N=async()=>{m(!0);try{await B("/api/settings/context-budget",{method:"PUT",body:{retain_budget:l,trigger_threshold:i,summary_budget_longterm:d,summary_budget_daily:f,summary_budget_recent:x}}),j("")}catch(k){j("")}finally{m(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:oe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:oe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:oe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:oe.text},children:""}),o.jsx("div",{className:"w-10"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5 space-y-4",children:[o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:oe.bg,boxShadow:"var(--card-shadow)"},children:[o.jsx(ni,{icon:o.jsx(dv,{size:18,style:{color:oe.text}}),label:"API ",hint:"  ",onClick:()=>e("/settings/api")}),o.jsx(ef,{}),o.jsx(ni,{icon:o.jsx(cv,{size:18,style:{color:oe.textMuted}}),label:"",hint:"",onClick:()=>j("")})]}),o.jsx("div",{className:"rounded-[20px] overflow-hidden",style:{background:oe.bg,boxShadow:"var(--card-shadow)"},children:o.jsx(ni,{icon:o.jsx(iv,{size:18,style:{color:oe.text}}),label:"",hint:" AI ",onClick:()=>e("/settings/proactive")})}),o.jsxs("div",{className:"rounded-[20px] overflow-hidden",style:{background:oe.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:oe.bg},children:o.jsx(hv,{size:18,style:{color:oe.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:oe.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:oe.textMuted},children:" ()"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(rr,{value:t,onChange:n,min:1,max:120}),o.jsx("span",{className:"text-[12px]",style:{color:oe.textMuted},children:""})]})]}),o.jsx(ef,{}),o.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:oe.bg},children:o.jsx(sv,{size:18,style:{color:oe.text}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:oe.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:oe.textMuted},children:""})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(rr,{value:r,onChange:s,min:2,max:20}),o.jsx("span",{className:"text-[12px]",style:{color:oe.textMuted},children:""})]})]})]}),o.jsxs("div",{className:"rounded-[20px] p-4",style:{background:oe.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:oe.bg},children:o.jsx(tv,{size:18,style:{color:oe.text}})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:oe.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:oe.textMuted},children:""})]})]}),y?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:oe.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:oe.textMuted},children:" token "})]}),o.jsx(rr,{value:l,onChange:a,min:1e3,max:1e5})]}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:oe.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:oe.textMuted},children:""})]}),o.jsx(rr,{value:i,onChange:c,min:1e3,max:2e5})]}),o.jsx("div",{className:"h-px mb-4",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full",style:{boxShadow:"var(--icon-inset)",background:oe.bg},children:o.jsx(tu,{size:18,style:{color:oe.text}})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:oe.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:oe.textMuted},children:""})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:oe.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:oe.textMuted},children:""})]}),o.jsx(rr,{value:d,onChange:p,min:200,max:5e3})]}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:oe.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:oe.textMuted},children:""})]}),o.jsx(rr,{value:f,onChange:h,min:200,max:5e3})]}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[13px] font-medium",style:{color:oe.text},children:" (tokens)"}),o.jsx("div",{className:"text-[10px]",style:{color:oe.textMuted},children:""})]}),o.jsx(rr,{value:x,onChange:w,min:500,max:2e4})]}),o.jsx("button",{className:"w-full rounded-[14px] py-3 text-[14px] font-bold text-white",style:{background:g?"rgba(201,98,138,0.5)":"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"3px 3px 8px rgba(201,98,138,0.3)"},onClick:N,disabled:g,children:g?"...":""})]}):o.jsx("div",{className:"flex justify-center py-4",children:o.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2",style:{borderColor:oe.accent,borderTopColor:"transparent"}})})]})]}),v&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:v})})]})}const U={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},C0=["claude-opus-4-6","claude-opus-4-5-20251101","claude-sonnet-4-6","claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001"];function E0(e){try{return new URL(e).hostname}catch(t){return e}}function tf({label:e,value:t,onChange:n,placeholder:r,password:s,disabled:l}){const[a,i]=u.useState(!1);return o.jsxs("div",{className:"mb-4",children:[e&&o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:U.textMuted},children:e}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:s&&!a?"password":"text",value:t,onChange:c=>n(c.target.value),placeholder:r,disabled:l,className:"w-full rounded-[14px] px-4 py-3 text-[14px] outline-none pr-12",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:l?U.textMuted:U.text,opacity:l?.5:1}}),s&&o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>i(!a),children:a?o.jsx(rv,{size:16,style:{color:U.textMuted}}):o.jsx(nv,{size:16,style:{color:U.textMuted}})})]})]})}function M0({value:e,onChange:t,options:n}){return o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:U.bg},children:n.map(r=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[12px] font-semibold transition-all",style:{background:e===r.value?U.bg:"transparent",boxShadow:e===r.value?"var(--card-shadow-sm)":"none",color:e===r.value?U.accentDark:U.textMuted},onClick:()=>t(r.value),children:r.label},r.value))})}function _0({value:e,onChange:t,options:n,placeholder:r}){const[s,l]=u.useState(!1),a=u.useRef(null);return u.useEffect(()=>{if(!s)return;const i=c=>{a.current&&!a.current.contains(c.target)&&l(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[s]),o.jsxs("div",{className:"relative",ref:a,children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[14px] px-4 py-3 text-[14px] text-left",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:e?U.text:U.textMuted},onClick:()=>l(!s),children:[o.jsx("span",{className:"truncate",children:e||r||""}),o.jsx(jr,{size:16,style:{color:U.textMuted,flexShrink:0,transform:s?"rotate(180deg)":"none"}})]}),s&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:U.bg,boxShadow:"var(--card-shadow)"},children:n.map(i=>o.jsxs("button",{className:"flex w-full items-center justify-between px-4 py-3 text-[13px]",style:{color:U.text},onClick:()=>{t(i),l(!1)},children:[o.jsx("span",{className:"truncate",children:i}),i===e&&o.jsx(yr,{size:12,style:{color:U.accentDark,flexShrink:0}})]},i))})]})}function T0({value:e,onChange:t}){const[n,r]=u.useState(!1),s=u.useRef(null);return u.useEffect(()=>{if(!n)return;const l=a=>{s.current&&!s.current.contains(a.target)&&r(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[n]),o.jsxs("div",{className:"relative",ref:s,children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"",value:e,onChange:l=>t(l.target.value),className:"w-full rounded-[14px] px-4 py-3 pr-10 text-[14px] outline-none",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text}}),o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2",onClick:()=>r(!n),children:o.jsx(jr,{size:16,style:{color:U.textMuted}})})]}),n&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[14px]",style:{background:U.bg,boxShadow:"var(--card-shadow)"},children:C0.map(l=>o.jsx("button",{className:"flex w-full px-4 py-3 text-left text-[13px]",style:{color:U.text},onClick:()=>{t(l),r(!1)},children:l},l))})]})}function ri({value:e,onChange:t,min:n,max:r,step:s}){const[l,a]=u.useState(String(e));u.useEffect(()=>a(String(e)),[e]);const i=()=>{let c=parseFloat(l);isNaN(c)&&(c=n),c=Math.max(n,Math.min(r,c)),c=Math.round(c/s)*s,c=parseFloat(c.toFixed(4)),a(String(c)),t(c)};return o.jsx("input",{type:"number",value:l,onChange:c=>a(c.target.value),onBlur:i,onKeyDown:c=>c.key==="Enter"&&i(),step:s,min:n,max:r,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text}})}function nf({on:e,onToggle:t}){return o.jsx("button",{onClick:t,className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":U.bg,transition:"background 0.2s"},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function si({children:e,className:t=""}){return o.jsx("div",{className:`rounded-[20px] p-5 mb-4 space-y-4 ${t}`,style:{background:U.bg,boxShadow:"var(--card-shadow)"},children:e})}function D0(){const e=Ft(),[t,n]=u.useState([]),[r,s]=u.useState([]),[l,a]=u.useState(!0),[i,c]=u.useState(""),[d,p]=u.useState(""),[f,h]=u.useState("api_key"),[x,w]=u.useState(""),[y,b]=u.useState([]),[g,m]=u.useState(!1),[v,S]=u.useState(1),[j,N]=u.useState(!1),[k,E]=u.useState(1),[D,P]=u.useState(!1),[L,ie]=u.useState(4096),[W,z]=u.useState(null),[q,xe]=u.useState(0),[fe,O]=u.useState(null),[Q,_]=u.useState(!1),[ee,X]=u.useState(!1),[ke,ye]=u.useState(""),[qe,ve]=u.useState(!1),[Y,we]=u.useState(!1),[ue,se]=u.useState(null),[Ue,je]=u.useState(null),[rt,V]=u.useState(""),$=u.useRef(null),le=u.useRef(!1),ne=u.useRef(null),pe=u.useRef({});pe.current={baseUrl:i,apiKey:d,authType:f,modelName:x,temperature:v,tempEnabled:j,topP:k,topPEnabled:D,maxTokens:L,thinkingBudget:q,editingPreset:W,providers:t};const I=u.useCallback(A=>{O(A),setTimeout(()=>O(null),2500)},[]),J=u.useCallback(async()=>{try{const[A,ae]=await Promise.all([B("/api/providers"),B("/api/presets")]);n(A.providers||[]),s(ae.presets||[])}catch(A){I(": "+A.message)}finally{a(!1)}},[I]);u.useEffect(()=>{J()},[J]);const re=A=>{var ce,Me;z(A),w(A.model_name),N(A.temperature!=null),S((ce=A.temperature)!=null?ce:1),P(A.top_p!=null),E((Me=A.top_p)!=null?Me:1),ie(A.max_tokens),xe(A.thinking_budget||0);const ae=t.find(st=>st.id===A.api_provider_id);ae&&(c(ae.base_url),p(ae.api_key),h(ae.auth_type||"api_key"))},de=()=>{z(null),c(""),p(""),h("api_key"),w(""),S(1),N(!1),E(1),P(!1),ie(4096),xe(0),b([])},He=async()=>{if(!i.trim()||!d.trim()){I(" API  Key");return}m(!0);try{const A=await fetch(`${i.trim().replace(/\/+$/,"")}/models`,{headers:{Authorization:`Bearer ${d.trim()}`}});if(!A.ok)throw new Error(`HTTP ${A.status}`);const ce=((await A.json()).data||[]).map(Me=>Me.id).sort();b(ce),I(ce.length?` ${ce.length} `:"")}catch(A){I(": "+A.message)}finally{m(!1)}},We=async()=>{var A;if(!i.trim()||!d.trim()||!x.trim()){I(" API Key ");return}_(!0);try{const ae=i.trim().replace(/\/+$/,""),ce={"Content-Type":"application/json",Authorization:`Bearer ${d.trim()}`};f==="oauth_token"&&(ce["anthropic-beta"]="claude-code-20250219,oauth-2025-04-20,fine-grained-tool-streaming-2025-05-14",ce["anthropic-dangerous-direct-browser-access"]="true",ce["x-app"]="cli");const Me=await fetch(`${ae}/chat/completions`,{method:"POST",headers:ce,body:JSON.stringify({model:x.trim(),max_tokens:10,messages:[{role:"user",content:"Hi"}]})});if(!Me.ok){const st=await Me.json().catch(()=>({}));throw new Error(((A=st.error)==null?void 0:A.message)||`HTTP ${Me.status}`)}I(" ")}catch(ae){I(": "+ae.message)}finally{_(!1)}},mn=async A=>{const ae=pe.current,ce=ae.baseUrl.trim(),Me=ae.apiKey.trim(),st=ae.authType,gn=A.find(ys=>ys.base_url===ce);return gn?((gn.api_key!==Me||gn.auth_type!==st)&&await B(`/api/providers/${gn.id}`,{method:"PUT",body:{api_key:Me,auth_type:st}}),gn.id):(await B("/api/providers",{method:"POST",body:{name:E0(ce),base_url:ce,api_key:Me,auth_type:st}})).id},ln=async(A,ae)=>{const ce=pe.current;if(!ce.baseUrl.trim()||!ce.apiKey.trim()||!ce.modelName.trim()){I("");return}we(!0);try{const Me=await mn(ce.providers),st={name:A,model_name:ce.modelName.trim(),temperature:ce.tempEnabled?ce.temperature:null,top_p:ce.topPEnabled?ce.topP:null,max_tokens:Number(ce.maxTokens)||4096,thinking_budget:Number(ce.thinkingBudget)||0,api_provider_id:Me};ce.editingPreset&&!ae?(await B(`/api/presets/${ce.editingPreset.id}`,{method:"PUT",body:st}),I("")):(await B("/api/presets",{method:"POST",body:st}),I("")),await J()}catch(Me){I(": "+Me.message)}finally{we(!1)}},Rt=()=>{const A=ke.trim();A&&(X(!1),ln(A,qe))},jt=()=>{W&&ln(W.name,!1)},on=async()=>{if(ue){try{await B(`/api/presets/${ue.id}`,{method:"DELETE"}),I(""),(W==null?void 0:W.id)===ue.id&&de(),J()}catch(A){I(": "+A.message)}se(null)}},an=async()=>{const A=rt.trim();if(!(!A||!Ue)){try{await B(`/api/presets/${Ue.id}`,{method:"PUT",body:{name:A}}),I(""),J()}catch(ae){I("")}je(null)}},ut=(A,ae)=>{le.current=!1;const ce=A.touches?A.touches[0]:A;ne.current={x:ce.clientX,y:ce.clientY},$.current=setTimeout(()=>{le.current=!0,se(ae)},600)},er=A=>{if(!ne.current||!$.current)return;const ae=A.touches?A.touches[0]:A,ce=ae.clientX-ne.current.x,Me=ae.clientY-ne.current.y;ce*ce+Me*Me>100&&(clearTimeout($.current),$.current=null)},Sr=()=>clearTimeout($.current);return o.jsxs("div",{className:"flex h-full flex-col",style:{background:U.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:U.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:U.text},children:"API "}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:l?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:U.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs(si,{children:[o.jsx(tf,{label:"API ",value:i,onChange:c,placeholder:"https://api.openai.com/v1",disabled:f==="oauth_token"}),o.jsx(tf,{label:"API Key",value:d,onChange:p,placeholder:f==="oauth_token"?"sk-ant-oat01-...":"sk-...",password:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:U.textMuted},children:""}),o.jsx(M0,{value:f,onChange:A=>{h(A),A==="oauth_token"&&c("https://api.anthropic.com/v1")},options:[{value:"api_key",label:" API Key"},{value:"oauth_token",label:"Setup Token"}]})]})]}),o.jsxs(si,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1.5 block text-[11px] font-semibold uppercase tracking-wide",style:{color:U.textMuted},children:""}),f==="oauth_token"?o.jsx(T0,{value:x,onChange:w}):o.jsx(_0,{value:x,onChange:w,options:y})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:We,disabled:Q,children:[Q?o.jsx(Id,{size:14,className:"animate-spin"}):null,""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[14px] py-3 text-[13px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text,opacity:f==="oauth_token"?.4:1},onClick:He,disabled:g||f==="oauth_token",children:[g?o.jsx(Id,{size:14,className:"animate-spin"}):o.jsx(ha,{size:14}),""]})]})]}),o.jsxs(si,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:U.text},children:" (0-2)"}),o.jsx("div",{className:"text-[11px]",style:{color:U.textMuted},children:""})]}),o.jsx(nf,{on:j,onToggle:()=>N(!j)})]}),j&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:U.textMuted},children:""}),o.jsx(ri,{value:v,onChange:S,min:0,max:2,step:.1})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:U.text},children:"Top P (0-1)"}),o.jsx(nf,{on:D,onToggle:()=>P(!D)})]}),D&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[12px]",style:{color:U.textMuted},children:""}),o.jsx(ri,{value:k,onChange:E,min:0,max:1,step:.05})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[14px] font-semibold",style:{color:U.text},children:"Max Tokens"}),o.jsx(ri,{value:L,onChange:ie,min:128,max:2e5,step:1})]}),o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:U.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:U.textMuted},children:"Extended Thinking tokens"})]}),o.jsxs("select",{className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none appearance-none",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text,WebkitAppearance:"none",textAlignLast:"center"},value:q,onChange:A=>xe(Number(A.target.value)),children:[o.jsx("option",{value:0,children:""}),o.jsx("option",{value:1024,children:"1024"}),o.jsx("option",{value:2048,children:"2048"}),o.jsx("option",{value:4096,children:"4096"}),o.jsx("option",{value:8192,children:"8192"}),o.jsx("option",{value:16384,children:"16384"})]})]})]}),o.jsxs("div",{className:"mb-4 space-y-3",children:[W?o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:jt,disabled:Y,children:[o.jsx(wl,{size:14}),Y?"...":""]}),o.jsxs("button",{className:"flex flex-1 items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:()=>{ve(!0),ye(""),X(!0)},disabled:Y,children:[o.jsx(ev,{size:14}),""]})]}):o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[18px] py-3.5 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:()=>{ve(!0),ye(""),X(!0)},disabled:Y,children:[o.jsx(fs,{size:14}),""]}),W&&o.jsx("button",{className:"w-full py-1 text-center text-[12px]",style:{color:U.textMuted},onClick:de,children:""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"mb-3 text-[12px] font-bold uppercase tracking-wide",style:{color:U.textMuted},children:""}),r.length===0?o.jsx("div",{className:"rounded-[20px] py-8 text-center text-[13px]",style:{background:U.bg,boxShadow:"var(--card-shadow)",color:U.textMuted},children:""}):o.jsx("div",{className:"space-y-3",children:r.map(A=>{var ae,ce;return o.jsxs("div",{className:"rounded-[18px] p-4",style:{background:U.bg,boxShadow:(W==null?void 0:W.id)===A.id?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{le.current||re(A)},onTouchStart:Me=>ut(Me,A),onTouchMove:er,onTouchEnd:Sr,onMouseDown:Me=>ut(Me,A),onMouseMove:er,onMouseUp:Sr,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-[14px] font-bold truncate",style:{color:(W==null?void 0:W.id)===A.id?U.accentDark:U.text},children:A.name}),o.jsx(nu,{size:12,style:{color:U.textMuted,flexShrink:0,marginLeft:8}})]}),o.jsx("div",{className:"mt-0.5 truncate text-[11px]",style:{color:U.textMuted},children:A.model_name}),o.jsxs("div",{className:"mt-1 text-[10px] font-mono",style:{color:U.textMuted},children:["T: ",(ae=A.temperature)!=null?ae:""," | Top-P: ",(ce=A.top_p)!=null?ce:""," | Max: ",A.max_tokens,A.thinking_budget?` | Think: ${A.thinking_budget}`:""]})]},A.id)})})]})]})}),ee&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>X(!1),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:U.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:A=>A.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:U.text},children:""}),o.jsx("input",{type:"text",value:ke,onChange:A=>ye(A.target.value),placeholder:"",className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text},autoFocus:!0,onKeyDown:A=>A.key==="Enter"&&Rt()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:()=>X(!1),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:ke.trim()?"linear-gradient(135deg, var(--accent), var(--accent-dark))":"rgba(201,98,138,0.3)"},onClick:Rt,disabled:!ke.trim(),children:""})]})]})}),ue&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>se(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:U.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:A=>A.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:U.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:U.textMuted},children:["",ue.name,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:()=>se(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:on,children:""})]})]})}),Ue&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>je(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:U.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:A=>A.stopPropagation(),children:[o.jsx("p",{className:"mb-4 text-center text-[16px] font-bold",style:{color:U.text},children:""}),o.jsx("input",{autoFocus:!0,type:"text",value:rt,onChange:A=>V(A.target.value),className:"w-full rounded-[14px] px-4 py-3 text-[15px] outline-none mb-4",style:{boxShadow:"var(--inset-shadow)",background:U.bg,color:U.text},onKeyDown:A=>A.key==="Enter"&&an()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-semibold",style:{background:U.bg,boxShadow:"var(--card-shadow-sm)",color:U.text},onClick:()=>je(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[14px] font-bold text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))"},onClick:an,children:""})]})]})}),fe&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:fe})})]})}const Xe={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function Gl({on:e,onToggle:t,disabled:n}){return o.jsx("button",{onClick:()=>!n&&t(),className:"relative flex h-7 w-12 shrink-0 items-center rounded-full",style:{boxShadow:"var(--inset-shadow)",background:e?"var(--accent)":Xe.bg,transition:"background 0.2s",opacity:n?.4:1,cursor:n?"not-allowed":"pointer"},children:o.jsx("span",{className:"absolute h-5 w-5 rounded-full",style:{left:e?"calc(100% - 22px)":"2px",background:"white",boxShadow:"2px 2px 5px rgba(174,176,182,0.5)",transition:"left 0.2s ease"}})})}function Ms({label:e,hint:t,value:n,onChange:r,min:s,max:l,step:a=1,disabled:i}){const[c,d]=u.useState(String(n));u.useEffect(()=>d(String(n)),[n]);const p=()=>{let f=parseFloat(c);isNaN(f)&&(f=s),f=Math.max(s,Math.min(l,f)),f=Math.round(f/a)*a,f=parseFloat(f.toFixed(a<1?1:0)),d(String(f)),r(f)};return o.jsxs("div",{className:"flex items-center justify-between",style:{opacity:i?.4:1,pointerEvents:i?"none":"auto"},children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:Xe.text},children:e}),t&&o.jsx("div",{className:"text-[11px]",style:{color:Xe.textMuted},children:t})]}),o.jsx("input",{type:"number",value:c,onChange:f=>d(f.target.value),onBlur:p,onKeyDown:f=>f.key==="Enter"&&p(),step:a,min:s,max:l,disabled:i,className:"w-20 rounded-[10px] py-2 text-center text-[13px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:Xe.bg,color:Xe.text}})]})}function ql({children:e}){return o.jsx("div",{className:"rounded-[20px] p-5 mb-4 space-y-4",style:{background:Xe.bg,boxShadow:"var(--card-shadow)"},children:e})}function Jl(){return o.jsx("div",{className:"h-px",style:{background:"rgba(136,136,160,0.15)"}})}function R0(){const e=Ft(),[t,n]=u.useState(!0),[r,s]=u.useState(!1),[l,a]=u.useState({enabled:!1,random_mode:!1,interval:30,min_gap:30,retry_enabled:!0,retry_gap:1.5,max_retries:8,voice_enabled:!1,voice_chance:30}),[i,c]=u.useState(null),d=u.useCallback(w=>{c(w),setTimeout(()=>c(null),2e3)},[]);u.useEffect(()=>{(async()=>{try{const w=await B("/api/settings/proactive");a(w)}catch(w){d(": "+w.message)}finally{n(!1)}})()},[d]);const p=async()=>{s(!0);try{await B("/api/settings/proactive",{method:"PUT",body:l}),d("")}catch(w){d(": "+w.message)}finally{s(!1)}},f=w=>a(y=>({...y,...w})),h=!l.enabled,x=l.random_mode&&l.enabled;return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Xe.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Xe.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/settings",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:Xe.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Xe.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Xe.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:p,disabled:r,children:o.jsx(wl,{size:18,style:{color:Xe.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5",children:t?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Xe.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsxs(ql,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:Xe.text},children:""}),o.jsx(Gl,{on:l.enabled,onToggle:()=>f({enabled:!l.enabled})})]}),l.enabled&&o.jsxs(o.Fragment,{children:[o.jsx(Jl,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:Xe.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:Xe.textMuted},children:""})]}),o.jsx(Gl,{on:l.random_mode,onToggle:()=>f({random_mode:!l.random_mode})})]})]})]}),o.jsxs(ql,{children:[o.jsx(Ms,{label:" ()",hint:" (10-60)",value:x?10:l.interval,onChange:w=>f({interval:w}),min:10,max:60,disabled:h||x}),o.jsx(Jl,{}),o.jsx(Ms,{label:" ()",hint:" (15-120)",value:l.min_gap,onChange:w=>f({min_gap:w}),min:15,max:120,disabled:h||x})]}),o.jsxs(ql,{children:[o.jsxs("div",{className:"flex items-center justify-between",style:{opacity:h?.4:1,pointerEvents:h?"none":"auto"},children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:Xe.text},children:""}),o.jsx("div",{className:"text-[11px]",style:{color:Xe.textMuted},children:" = "})]}),o.jsx(Gl,{on:l.retry_enabled,onToggle:()=>f({retry_enabled:!l.retry_enabled}),disabled:h})]}),l.retry_enabled&&!h&&o.jsxs(o.Fragment,{children:[o.jsx(Jl,{}),o.jsx(Ms,{label:" ()",hint:"0.5-4.0",value:l.retry_gap,onChange:w=>f({retry_gap:w}),min:.5,max:4,step:.1,disabled:x}),o.jsx(Ms,{label:"",hint:"1-15",value:l.max_retries,onChange:w=>f({max_retries:w}),min:1,max:15})]})]}),o.jsxs(ql,{children:[o.jsxs("div",{className:"flex items-center justify-between",style:{opacity:h?.4:1,pointerEvents:h?"none":"auto"},children:[o.jsx("div",{className:"text-[14px] font-semibold",style:{color:Xe.text},children:""}),o.jsx(Gl,{on:l.voice_enabled,onToggle:()=>f({voice_enabled:!l.voice_enabled}),disabled:h})]}),l.voice_enabled&&!h&&o.jsxs(o.Fragment,{children:[o.jsx(Jl,{}),o.jsx(Ms,{label:" (%)",hint:"0-100",value:l.voice_chance,onChange:w=>f({voice_chance:w}),min:0,max:100})]})]})]})}),i&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:i})})]})}const he={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},ka={thinking:{bg:"rgba(168,130,200,0.12)",color:"#8860c8",label:""},tool_use:{bg:"rgba(232,160,60,0.12)",color:"#b8820a",label:""},tool_result:{bg:"rgba(80,160,200,0.12)",color:"#1a7ab0",label:""},injected_memories:{bg:"rgba(80,180,120,0.12)",color:"#3a8a5f",label:""}},rf=[{key:"short",label:""},{key:"long",label:""}],P0=[{key:"happy",label:""},{key:"sad",label:""},{key:"angry",label:""},{key:"anxious",label:""},{key:"tired",label:""},{key:"emo",label:""},{key:"flirty",label:""},{key:"proud",label:""},{key:"calm",label:""}],sf=300;function uu({block_type:e}){const t=ka[e]||{bg:"rgba(136,136,160,0.1)",color:he.textMuted,label:e};return o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:t.bg,color:t.color},children:t.label})}function vx({content:e}){const[t,n]=u.useState(!1),r=e.length>sf;return o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:he.text},children:r&&!t?e.slice(0,sf)+"...":e}),r&&o.jsx("div",{className:"mt-1.5 flex justify-center",children:o.jsx("button",{className:"rounded-full px-3 py-0.5 text-[11px]",style:{color:he.accentDark,background:"rgba(232,160,191,0.12)"},onClick:s=>{s.stopPropagation(),n(!t)},children:t?"":""})})]})}function z0({block:e,cacheKey:t,translateCache:n}){const r=n.current.get(t),[s,l]=u.useState(r||null),[a,i]=u.useState(!!r),[c,d]=u.useState(!1),p=ka.thinking,f=async h=>{if(h.stopPropagation(),s){i(!a);return}d(!0);try{const x=await B("/api/cot/translate",{method:"POST",body:{text:e.content}});l(x.translated),i(!0),n.current.set(t,x.translated)}catch(x){console.error("Translation failed:",x),alert("")}finally{d(!1)}};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:p.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(uu,{block_type:"thinking"}),o.jsx("span",{className:"flex-1"}),o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{color:"#1a7ab0",background:"rgba(80,160,200,0.15)"},onClick:f,disabled:c,children:c?"...":a?"":""})]}),o.jsx(vx,{content:a&&s?s:e.content})]})}function I0({avatarUrl:e}){return o.jsx("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full overflow-hidden",style:{boxShadow:"var(--icon-inset)",background:he.bg},children:e?o.jsx("img",{src:e,alt:"",className:"h-full w-full object-cover"}):o.jsx("span",{style:{fontSize:16},children:""})})}function lf(e){return e?e>=1e3?`${(e/1e3).toFixed(1)}k`:String(e):"0"}function L0(e){if(!e)return null;const t=e/1e3;return t>=100?`${Math.round(t)}s`:`${t.toFixed(1)}s`}function O0({prompt:e,completion:t,elapsedMs:n,hasToolCalls:r,cacheHit:s}){if(!(e||t||n)&&!r)return null;const a=s?"rgba(220,120,160,0.12)":"rgba(80,160,120,0.12)",i=s?"#d478a0":"#3a8a5f";return o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:a,color:i},children:["",lf(e)]}),o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(160,100,220,0.12)",color:"#8a5abf"},children:["",lf(t)]}),n?o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap",style:{background:"rgba(200,140,60,0.12)",color:"#b8820a"},children:L0(n)}):null]})}function $0(e){const t=[],n=[],r=[],s=[];for(const a of e)a.block_type==="thinking"?t.push(a):a.block_type==="tool_use"?n.push(a):a.block_type==="tool_result"?r.push(a):s.push(a);const l=[];for(let a=0;a<n.length;a++)l.push(n[a]),a<r.length&&l.push(r[a]);for(let a=n.length;a<r.length;a++)l.push(r[a]);return[...t,...l,...s]}function A0({memories:e}){const[t,n]=u.useState(!1);if(!e||e.length===0)return null;const r=ka.injected_memories;return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:r.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-2",onClick:()=>n(!t),children:[o.jsx(uu,{block_type:"injected_memories"}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:r.color},children:["(",e.length,")"]}),t?o.jsx(Oh,{size:12,style:{color:r.color}}):o.jsx(jr,{size:12,style:{color:r.color}})]}),t&&o.jsx("div",{className:"mt-2 space-y-1",children:e.map(s=>o.jsxs("p",{className:"text-[11px] leading-relaxed",style:{color:he.text},children:[o.jsxs("span",{style:{color:r.color,fontWeight:600},children:["#",s.id]})," ",s.content]},s.id))})]})}function F0({item:e,expanded:t,onToggle:n,live:r,avatarUrl:s,translateCache:l}){const a=e.rounds.map(c=>({...c,blocks:$0(c.blocks.filter(d=>d.block_type!=="text"&&d.block_type!=="usage"))})).filter(c=>c.blocks.length>0),i=a.length>0||e.injectedMemories&&e.injectedMemories.length>0||r&&e.textPreview;return o.jsxs("div",{className:"rounded-[18px] overflow-hidden",style:{background:he.bg},children:[o.jsxs("button",{className:"flex w-full items-center gap-3 p-4",onClick:n,children:[o.jsx(I0,{avatarUrl:s}),o.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r&&o.jsx("span",{className:"inline-block h-3 w-3 animate-spin rounded-full border-[1.5px]",style:{borderColor:he.accentDark,borderTopColor:"transparent"}}),e.has_tool_calls&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-semibold",style:{background:"rgba(232,160,60,0.15)",color:"#b8820a"},children:""}),o.jsx(O0,{prompt:e.prompt_tokens||0,completion:e.completion_tokens||0,elapsedMs:e.elapsed_ms||0,hasToolCalls:e.has_tool_calls,cacheHit:e.cache_hit}),o.jsx("span",{className:"text-[10px]",style:{color:he.textMuted},children:e.created_at||""})]}),o.jsx("p",{className:"mt-0.5 truncate text-[13px]",style:{color:he.text},children:e.preview||"()"})]}),t?o.jsx(Oh,{size:16,style:{color:he.textMuted,flexShrink:0}}):o.jsx(jr,{size:16,style:{color:he.textMuted,flexShrink:0}})]}),t&&i&&o.jsxs("div",{className:"px-4 pb-4",children:[o.jsx(A0,{memories:e.injectedMemories}),a.map(c=>o.jsxs("div",{className:"mb-3",children:[a.length>1&&o.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}}),o.jsxs("span",{className:"text-[10px] font-semibold",style:{color:he.textMuted},children:[" ",c.round_index+1]}),o.jsx("div",{className:"h-px flex-1",style:{background:"rgba(136,136,160,0.15)"}})]}),c.blocks.map((d,p)=>{if(d.block_type==="thinking")return o.jsx(z0,{block:d,cacheKey:`${e.request_id}:${c.round_index}:${p}`,translateCache:l},p);const f=ka[d.block_type]||{bg:"rgba(136,136,160,0.08)",color:he.textMuted,label:d.block_type};return o.jsxs("div",{className:"mb-2 rounded-[12px] p-3",style:{background:f.bg},children:[o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx(uu,{block_type:d.block_type}),d.tool_name&&o.jsx("span",{className:"text-[10px] font-mono",style:{color:f.color},children:d.tool_name})]}),o.jsx(vx,{content:d.content})]},p)})]},c.round_index)),r&&e.textPreview&&o.jsxs("div",{className:"rounded-[12px] p-3",style:{background:"rgba(232,160,191,0.08)"},children:[o.jsx("div",{className:"mb-1",children:o.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{background:"rgba(232,160,191,0.15)",color:he.accentDark},children:""})}),o.jsx("p",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed",style:{color:he.text},children:e.textPreview})]})]})]})}function B0(){var Q;const e=Ft(),[t,n]=u.useState([]),[r,s]=u.useState(!0),[l,a]=u.useState(new Set),[i,c]=u.useState(()=>localStorage.getItem("chat_mode")||"long"),[d,p]=u.useState(null),[f,h]=u.useState(!1),[x,w]=u.useState(new Set),[y,b]=u.useState(null),[g,m]=u.useState(null),v=u.useRef(null),S=u.useRef(new Map),[j,N]=u.useState(null),[k,E]=u.useState(!1),D=u.useRef(null),P=u.useRef(new Set),L=u.useRef(!1),ie=u.useRef([]),[W,z]=u.useState(()=>localStorage.getItem("whisper_token")),q=u.useRef(null),xe=()=>{s(!0),b(null),L.current=!1,B("/api/cot?limit=100").then(_=>{n(Array.isArray(_)?_:[]),L.current=!0;const ee=ie.current;if(ie.current=[],ee.length>0&&q.current)for(const X of ee)q.current(X)}).catch(_=>{console.error("COT load error:",_),b(_.message||""),L.current=!0}).finally(()=>{s(!1);const _=localStorage.getItem("whisper_token");_&&_!==W&&z(_)})};u.useEffect(()=>{xe()},[]),u.useEffect(()=>{B("/api/sessions?limit=1").then(_=>{var X;const ee=(X=_.sessions)==null?void 0:X[0];ee!=null&&ee.assistant_id&&hs(`assistant-avatar-${ee.assistant_id}`).then(ke=>{ke&&m(ke)}).catch(()=>{})}).catch(()=>{})},[]),u.useEffect(()=>{B("/api/settings/mood").then(_=>N(_.mood||"calm")).catch(()=>N("calm"))},[]),u.useEffect(()=>{if(!k)return;const _=ee=>{D.current&&!D.current.contains(ee.target)&&E(!1)};return document.addEventListener("pointerdown",_),()=>document.removeEventListener("pointerdown",_)},[k]),u.useEffect(()=>{if(!W){console.log("[COT WS] No token yet, waiting...");return}const ee=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws/cot?token=${encodeURIComponent(W)}`;console.log("[COT WS] Connecting to",ee);let X,ke,ye=!1;const qe=()=>{if(ye)return;X=new WebSocket(ee),v.current=X,X.onopen=()=>{console.log("[COT WS] Connected"),h(!0)};const ve=Y=>{var rt;const{type:we,request_id:ue}=Y,se=V=>{const $=V.findIndex(I=>I.request_id===ue);return $>=0?[V,$]:[[{request_id:ue,created_at:new Date().toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),preview:"...",has_tool_calls:!1,rounds:[],injectedMemories:[],textPreview:""},...V],0]},Ue=(V,$)=>{const le=V.findIndex(pe=>pe.round_index===$);if(le>=0)return[V,le];const ne=[...V,{round_index:$,blocks:[]}];return ne.sort((pe,I)=>pe.round_index-I.round_index),[ne,ne.findIndex(pe=>pe.round_index===$)]},je=V=>{P.current.has(V)||a($=>{if($.has(V))return $;const le=new Set($);return le.add(V),le})};if(we==="tokens_update"){n(V=>V.map($=>$.request_id===ue?{...$,prompt_tokens:Y.prompt_tokens||0,completion_tokens:Y.completion_tokens||0,cache_hit:Y.cache_hit||!1}:$));return}if(we==="replay_snapshot"){console.log("[COT] replay_snapshot",ue,"thinking_rounds:",(rt=Y.rounds)==null?void 0:rt.length,"text_len:",(Y.text_preview||"").length),n(V=>{let[$,le]=se(V);$=[...$];const ne={...$[le]};if(Y.rounds)for(const pe of Y.rounds){if(!pe.thinking)continue;let[I,J]=Ue([...ne.rounds],pe.round_index);const re={...I[J],blocks:[...I[J].blocks]},de=re.blocks.findIndex(He=>He.block_type==="thinking");de>=0?pe.thinking.length>re.blocks[de].content.length&&(re.blocks[de]={...re.blocks[de],content:pe.thinking}):re.blocks.push({block_type:"thinking",content:pe.thinking,tool_name:null}),I[J]=re,ne.rounds=I}return Y.text_preview&&Y.text_preview.length>(ne.textPreview||"").length&&(ne.textPreview=Y.text_preview,(!ne.preview||ne.preview==="...")&&(ne.preview=Y.text_preview.slice(0,80))),Y.injected_memories&&(ne.injectedMemories=Y.injected_memories),Y.prompt_tokens&&(ne.prompt_tokens=Y.prompt_tokens),Y.completion_tokens&&(ne.completion_tokens=Y.completion_tokens),Y.cache_hit&&(ne.cache_hit=Y.cache_hit),$[le]=ne,$}),w(V=>new Set(V).add(ue)),je(ue);return}if(we==="done"){w(V=>{const $=new Set(V);return $.delete(ue),$}),P.current.delete(ue),n(V=>V.map($=>$.request_id===ue?{...$,prompt_tokens:Y.prompt_tokens||0,completion_tokens:Y.completion_tokens||0,elapsed_ms:Y.elapsed_ms||0,cache_hit:Y.cache_hit||!1,textPreview:""}:$));return}if(we==="injected_memories"){n(V=>{let[$,le]=se(V);return $=[...$],$[le]={...$[le],injectedMemories:Y.memories||[]},$}),w(V=>new Set(V).add(ue)),je(ue);return}if(we==="thinking_delta"){n(V=>{let[$,le]=se(V);$=[...$];const ne={...$[le]};let[pe,I]=Ue([...ne.rounds],Y.round_index);const J={...pe[I],blocks:[...pe[I].blocks]};let re=-1;for(let de=J.blocks.length-1;de>=0;de--)if(J.blocks[de].block_type==="thinking"){re=de;break}return re>=0?J.blocks[re]={...J.blocks[re],content:J.blocks[re].content+Y.content}:J.blocks.push({block_type:"thinking",content:Y.content,tool_name:null}),pe[I]=J,ne.rounds=pe,$[le]=ne,$}),w(V=>new Set(V).add(ue)),je(ue);return}if(we==="text_delta"){n(V=>{let[$,le]=se(V);$=[...$];const ne={...$[le]};return ne.textPreview=(ne.textPreview||"")+Y.content,(!ne.preview||ne.preview==="...")&&(ne.preview=ne.textPreview.slice(0,80)),$[le]=ne,$}),w(V=>new Set(V).add(ue)),je(ue);return}if(we==="tool_use"||we==="tool_result"){n(V=>{let[$,le]=se(V);$=[...$];const ne={...$[le]};let[pe,I]=Ue([...ne.rounds],Y.round_index);return pe[I]={...pe[I],blocks:[...pe[I].blocks,{block_type:we,content:Y.content,tool_name:Y.tool_name}]},ne.rounds=pe,we==="tool_use"&&(ne.has_tool_calls=!0),$[le]=ne,$}),w(V=>new Set(V).add(ue)),je(ue);return}if(Y.block_type){const{round_index:V,block_type:$,content:le,tool_name:ne}=Y;n(pe=>{let[I,J]=se(pe);I=[...I];const re={...I[J]};let[de,He]=Ue([...re.rounds],V);return de[He]={...de[He],blocks:[...de[He].blocks,{block_type:$,content:le,tool_name:ne}]},re.rounds=de,$==="tool_use"&&(re.has_tool_calls=!0),$==="text"&&(!re.preview||re.preview==="...")&&(re.preview=le.slice(0,80)),I[J]=re,I}),w(pe=>new Set(pe).add(ue)),je(ue)}};q.current=ve,X.onmessage=Y=>{try{const we=JSON.parse(Y.data);if(!L.current){ie.current.push(we);return}ve(we)}catch(we){}},X.onclose=Y=>{console.log("[COT WS] Disconnected, code:",Y.code,"reason:",Y.reason),h(!1),v.current=null,ye||(ke=setTimeout(qe,3e3))},X.onerror=Y=>{console.error("[COT WS] Error:",Y),X.close()}};return qe(),()=>{ye=!0,clearTimeout(ke),v.current&&(v.current.onclose=null,v.current.close())}},[W]);const fe=u.useRef(!0);u.useEffect(()=>{if(fe.current){fe.current=!1;return}localStorage.setItem("chat_mode",i);const _=JSON.parse(localStorage.getItem("app-settings")||"{}");localStorage.setItem("app-settings",JSON.stringify({..._,shortMode:i==="short"})),B("/api/settings/chat-mode",{method:"PUT",body:{mode:i}}).catch(()=>{})},[i]);const O=_=>{N(_),E(!1),B("/api/settings/mood",{method:"PUT",body:{mood:_}}).catch(()=>{})};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:he.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:he.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:he.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:he.text},children:"COT "}),o.jsxs("div",{className:"flex items-center gap-2",children:[f&&o.jsx("div",{className:"h-2 w-2 rounded-full",style:{background:"#2a9d5c"},title:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:he.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:xe,disabled:r,children:o.jsx(ha,{size:16,style:{color:he.accentDark},className:r?"animate-spin":""})})]})]}),o.jsx("div",{className:"shrink-0 pb-3",style:{paddingLeft:20,paddingRight:20},children:o.jsxs("div",{className:"flex items-stretch gap-4 justify-center",children:[o.jsxs("div",{className:"relative flex",ref:D,children:[o.jsx("button",{className:"flex w-[42px] shrink-0 items-center justify-center rounded-[14px]",style:{background:he.bg,boxShadow:"var(--inset-shadow)"},onClick:()=>j&&E(!k),children:j?o.jsx("img",{src:`/miniapp/assets/mood/${j}.png`,alt:j,className:"h-6 w-6",style:{imageRendering:"pixelated"}}):o.jsx("div",{className:"h-6 w-6"})}),k&&o.jsx("div",{className:"absolute left-0 top-12 z-50 rounded-[16px] overflow-hidden",style:{background:he.bg,boxShadow:"var(--card-shadow-sm)",width:174},children:P0.map((_,ee)=>{const X=Math.floor(ee/3),ke=ee%3,ye=j===_.key;return o.jsxs("button",{className:"inline-flex flex-col items-center justify-center",style:{width:"calc(100% / 3)",padding:"8px 0 6px",background:ye?"rgba(232,160,191,0.18)":"transparent",boxShadow:[ke<2?"inset -1px 0 0 rgba(136,136,160,0.12)":"",X<2?"inset 0 -1px 0 rgba(136,136,160,0.12)":""].filter(Boolean).join(", ")||"none"},onClick:()=>O(_.key),children:[o.jsx("img",{src:`/miniapp/assets/mood/${_.key}.png`,alt:_.label,className:"h-7 w-7",style:{imageRendering:"pixelated",filter:ye?"drop-shadow(0 0 3px #e8a0bf)":"none"}}),o.jsx("span",{className:"text-[10px] mt-0.5",style:{color:ye?"#d48aab":he.textMuted},children:_.label})]},_.key)})})]}),o.jsx("div",{className:"flex rounded-[14px] p-1",style:{boxShadow:"var(--inset-shadow)",background:he.bg,width:160},children:rf.map(_=>o.jsx("button",{className:"flex-1 rounded-[10px] py-2 text-[13px] font-semibold transition-all",style:{background:i===_.key?he.bg:"transparent",boxShadow:i===_.key?"var(--card-shadow-sm)":"none",color:i===_.key?he.accentDark:he.textMuted},onClick:()=>{_.key!==i&&p(_.key)},children:_.label},_.key))})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8 pt-5",children:r?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:he.accent,borderTopColor:"transparent"}})}):y?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(zd,{size:36,style:{color:"#ef4444",opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:"#ef4444"},children:y})]}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center gap-3 py-16",children:[o.jsx(zd,{size:36,style:{color:he.textMuted,opacity:.5}}),o.jsx("p",{className:"text-[14px]",style:{color:he.textMuted},children:" COT "})]}):t.map(_=>o.jsx("div",{className:"mb-3 rounded-[18px]",style:{background:he.bg,boxShadow:"var(--card-shadow-sm)"},children:o.jsx(F0,{item:_,expanded:l.has(_.request_id),onToggle:()=>{a(ee=>{const X=new Set(ee);return X.has(_.request_id)?(X.delete(_.request_id),P.current.add(_.request_id)):(X.add(_.request_id),P.current.delete(_.request_id)),X})},live:x.has(_.request_id),avatarUrl:g,translateCache:S})},_.request_id))}),d&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>p(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:he.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:_=>_.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:he.text},children:""}),o.jsxs("p",{className:"mb-5 text-center text-[13px]",style:{color:he.textMuted},children:["",((Q=rf.find(_=>_.key===d))==null?void 0:Q.label)||d,""]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:he.bg,boxShadow:"var(--card-shadow-sm)",color:he.text},onClick:()=>p(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:he.accentDark,boxShadow:"4px 4px 10px rgba(201,98,138,0.4)"},onClick:()=>{c(d),p(null)},children:""})]})]})})]})}const Ze={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},Zl=80;function U0({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/Zl);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-Zl,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/Zl)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-Zl):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:Ze.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(ps,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function H0({msg:e,roleLabel:t,roleColor:n,fmtTime:r,onDelete:s}){const[l,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);return u.useLayoutEffect(()=>{const p=d.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e.content,l]),o.jsx(U0,{onDelete:s,children:o.jsxs("div",{className:"rounded-[18px] p-3",style:{background:Ze.bg},children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:n(e.role)},children:t(e.role)}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[e.summarized&&o.jsx("span",{className:"rounded-full px-1.5 py-0.5 text-[10px] font-semibold",style:{background:"rgba(58,138,95,0.15)",color:"#2d7a4a"},children:""}),o.jsx("span",{className:"text-[10px]",style:{color:Ze.textMuted},children:r(e.created_at)})]})]}),o.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:Ze.text}:{color:Ze.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:e.content}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:"#d48aab",background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})})]})})}function W0(){const e=Ft(),[t,n]=u.useState([]),[r,s]=u.useState(null),[l,a]=u.useState(!0),[i,c]=u.useState(!1),d=async()=>{var y;a(!0);try{const g=(y=(await B("/api/sessions?limit=1")).sessions)==null?void 0:y[0];if(!g){a(!1);return}s(g.id);const m=await B(`/api/sessions/${g.id}/messages?limit=50`);n((m.messages||[]).reverse()),c(m.has_more||!1)}catch(b){console.error(b)}a(!1)};u.useEffect(()=>{d()},[]);const p=async y=>{if(r)try{await B(`/api/sessions/${r}/messages/${y}`,{method:"DELETE"}),n(b=>b.filter(g=>g.id!==y))}catch(b){console.error("Delete failed",b)}},f=async()=>{if(!r||!i||l)return;const y=t[t.length-1];if(y){a(!0);try{const b=await B(`/api/sessions/${r}/messages?limit=50&before_id=${y.id}`),g=(b.messages||[]).reverse();n(m=>[...m,...g]),c(b.has_more||!1)}catch(b){console.error(b)}a(!1)}},h=y=>{if(!y)return"";const b=new Date(y),g=new Date;return b.toDateString()===g.toDateString()?b.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):b.toLocaleDateString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})},x=y=>y==="user"?"":y==="assistant"?"AI":"",w=y=>y==="user"?Ze.accentDark:y==="assistant"?"#3a9b5c":Ze.textMuted;return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ze.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ze.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:Ze.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ze.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ze.bg,boxShadow:l?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:d,disabled:l,children:o.jsx(ha,{size:16,style:{color:Ze.accentDark},className:l?"animate-spin":""})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("p",{className:"text-[11px]",style:{color:Ze.textMuted},children:""})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:l&&t.length===0?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ze.accent,borderTopColor:"transparent"}})}):t.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:Ze.textMuted},children:""}):o.jsxs(o.Fragment,{children:[t.map(y=>o.jsx(H0,{msg:y,roleLabel:x,roleColor:w,fmtTime:h,onDelete:()=>p(y.id)},y.id)),i&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:Ze.bg,boxShadow:"var(--card-shadow-sm)",color:Ze.accentDark},onClick:f,disabled:l,children:l?"...":""})]})})]})}const T={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},V0=[{key:"memories",label:""},{key:"summaries",label:""},{key:"messages",label:""}],of={identity:{color:"#7b5ea7",bg:"#ede4f7"},relationship:{color:"#c26a8a",bg:"#f7e0ea"},bond:{color:"#d48aab",bg:"#fce8f0"},conflict:{color:"#b5454a",bg:"#f5dede"},fact:{color:"#4a8ab5",bg:"#deedf5"},preference:{color:"#9b7a3b",bg:"#f0ebd8"},health:{color:"#4a9b6e",bg:"#ddf0e5"},task:{color:"#6b7b9b",bg:"#e0e6f0"},ephemeral:{color:"#9b9b9b",bg:"#ececec"},other:{color:"#8a7a6a",bg:"#efe8df"}},wx=[{value:"",label:""},{value:"identity",label:"identity"},{value:"relationship",label:"relationship"},{value:"bond",label:"bond"},{value:"conflict",label:"conflict"},{value:"fact",label:"fact"},{value:"preference",label:"preference"},{value:"health",label:"health"},{value:"task",label:"task"},{value:"ephemeral",label:"ephemeral"},{value:"other",label:"other"}],X0=[{value:"",label:""},{value:"sad",label:"sad"},{value:"angry",label:"angry"},{value:"anxious",label:"anxious"},{value:"tired",label:"tired"},{value:"emo",label:"emo"},{value:"happy",label:"happy"},{value:"flirty",label:"flirty"},{value:"proud",label:"proud"},{value:"calm",label:"calm"}],Y0=[{value:"",label:""},{value:"user",label:""},{value:"assistant",label:""},{value:"system",label:""}];function or(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function du({text:e,keyword:t}){if(!t||!e)return o.jsx(o.Fragment,{children:e});const n=e.toLowerCase(),r=t.toLowerCase(),s=[];let l=0,a=n.indexOf(r,l);for(;a!==-1;)a>l&&s.push(o.jsx("span",{children:e.slice(l,a)},l)),s.push(o.jsx("span",{style:{color:T.accentDark,fontWeight:600},children:e.slice(a,a+r.length)},`h${a}`)),l=a+r.length,a=n.indexOf(r,l);return l<e.length&&s.push(o.jsx("span",{children:e.slice(l)},l)),o.jsx(o.Fragment,{children:s})}function bx({selected:e}){return o.jsx("div",{className:"flex h-5 w-5 shrink-0 items-center justify-center rounded-full",style:e?{background:T.accentDark,boxShadow:"0 2px 6px rgba(201,98,138,0.3)"}:{background:T.bg,boxShadow:"var(--inset-shadow)"},children:e&&o.jsx(yr,{size:12,color:"white",strokeWidth:3})})}function K0({title:e="",message:t,confirmLabel:n="",confirmColor:r="#ff4d6d",onConfirm:s,onCancel:l}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:l,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:T.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:a=>a.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:T.text},children:e}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:T.textMuted},children:t}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)",color:T.text},onClick:l,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:r,boxShadow:`4px 4px 10px ${r}66`},onClick:s,children:n})]})]})})}function af({initialText:e,onSave:t,onCancel:n,memoryData:r}){var h;const[s,l]=u.useState(e),[a,i]=u.useState((r==null?void 0:r.klass)||"other"),[c,d]=u.useState((((h=r==null?void 0:r.tags)==null?void 0:h.topic)||[]).join(", ")),p=!!r,f=wx.filter(x=>x.value);return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-5 w-full max-w-[340px] rounded-[18px] p-4",style:{background:T.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:x=>x.stopPropagation(),children:[o.jsx("textarea",{className:"w-full rounded-[12px] p-3 text-[12px] leading-relaxed resize-none outline-none overflow-y-auto thin-scrollbar",style:{background:T.bg,boxShadow:"var(--inset-shadow)",color:T.text,minHeight:p?100:140,maxHeight:280},value:s,onChange:x=>l(x.target.value),autoFocus:!0}),p&&o.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:T.textMuted},children:""}),o.jsxs("div",{className:"relative flex-1",children:[o.jsx("select",{className:"w-full appearance-none rounded-[10px] px-3 py-1.5 text-[11px] font-medium outline-none",style:{background:T.bg,boxShadow:"var(--inset-shadow)",color:T.text,WebkitAppearance:"none"},value:a,onChange:x=>i(x.target.value),children:f.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))}),o.jsx(jr,{size:10,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2",style:{color:T.textMuted}})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"shrink-0 text-[11px] font-medium",style:{color:T.textMuted},children:""}),o.jsx("input",{className:"flex-1 rounded-[10px] px-3 py-1.5 text-[11px] outline-none",style:{background:T.bg,boxShadow:"var(--inset-shadow)",color:T.text},placeholder:", ",value:c,onChange:x=>d(x.target.value)})]})]}),o.jsxs("div",{className:"mt-3 flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)",color:T.textMuted},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)",color:T.accentDark},onClick:()=>{if(p){const x=c.split(/[,]/).map(w=>w.trim()).filter(Boolean);t(s,a,{topic:x})}else t(s)},disabled:!s.trim(),children:""})]})]})})}function cf({value:e,rawValue:t,onChange:n,options:r,width:s,active:l}){var p;const[a,i]=u.useState(!1),c=u.useRef(null);u.useEffect(()=>{if(!a)return;const f=h=>{c.current&&!c.current.contains(h.target)&&i(!1)};return document.addEventListener("mousedown",f),document.addEventListener("touchstart",f),()=>{document.removeEventListener("mousedown",f),document.removeEventListener("touchstart",f)}},[a]);const d=((p=r.find(f=>f.value===String(t)))==null?void 0:p.label)||e||"";return o.jsxs("div",{className:"relative",style:{width:s},ref:c,children:[o.jsxs("button",{className:"flex w-full items-center justify-between rounded-[12px] px-2.5 py-2 text-[11px] font-medium text-left",style:{boxShadow:"var(--card-shadow-sm)",background:T.bg,color:l?T.accentDark:T.text},onClick:()=>i(!a),children:[o.jsx("span",{className:"truncate flex-1",children:d}),o.jsx(jr,{size:10,style:{color:T.textMuted,flexShrink:0,marginLeft:2,transform:a?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),a&&o.jsx("div",{className:"absolute left-0 right-0 top-full z-40 mt-1 max-h-[200px] overflow-y-auto rounded-[12px]",style:{background:T.bg,boxShadow:"var(--card-shadow)"},children:r.map(f=>o.jsxs("button",{className:"flex w-full items-center justify-between px-3 py-2 text-[11px]",style:{color:T.text},onClick:()=>{n(f.value),i(!1)},children:[o.jsx("span",{className:"truncate",children:f.label}),String(t)===f.value&&o.jsx(yr,{size:10,style:{color:T.accentDark,flexShrink:0}})]},f.value))})]})}function uf({children:e,time:t,badge:n,keyword:r,onEdit:s,selectMode:l,selected:a,onToggle:i,onLongPress:c}){const[d,p]=u.useState(!1),[f,h]=u.useState(!1),x=u.useRef(null),w=typeof e=="string"?e:"",y=u.useRef(null),b=u.useRef(!1),g=u.useRef(null);u.useLayoutEffect(()=>{const N=x.current;N&&!d&&h(N.scrollHeight>N.clientHeight+1)},[w,d]);const m=N=>{if(l)return;const k=N.touches[0];g.current={x:k.clientX,y:k.clientY},b.current=!1,y.current=setTimeout(()=>{b.current=!0,c==null||c()},600)},v=N=>{if(!g.current||!y.current)return;const k=N.touches[0],E=k.clientX-g.current.x,D=k.clientY-g.current.y;E*E+D*D>100&&(clearTimeout(y.current),y.current=null)},S=()=>{clearTimeout(y.current)},j=()=>{if(!b.current&&l){i==null||i();return}};return o.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:m,onTouchMove:v,onTouchEnd:S,onTouchCancel:S,onClick:j,children:[l&&o.jsx("div",{className:"mt-1",children:o.jsx(bx,{selected:a})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between gap-1",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[n,o.jsx("div",{ref:x,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:d?{color:T.text}:{color:T.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:N=>{l||(N.stopPropagation(),p(!d))},children:o.jsx(du,{text:w,keyword:r})})]}),!l&&s&&o.jsx("button",{className:"mt-0.5 flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},onClick:N=>{N.stopPropagation(),s()},children:o.jsx(nu,{size:11,style:{color:T.accentDark}})})]}),o.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:T.textMuted},children:t||""}),!l&&(f||d)&&o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:T.accentDark,background:"rgba(232,160,191,0.1)"},onClick:N=>{N.stopPropagation(),p(!d)},children:d?"":""})]})]})]})}function Q0({content:e,deletedAt:t,keyword:n,onRestore:r,onPermanentDelete:s}){const[l,a]=u.useState(!1),[i,c]=u.useState(!1),d=u.useRef(null);return u.useLayoutEffect(()=>{const p=d.current;p&&!l&&c(p.scrollHeight>p.clientHeight+1)},[e,l]),o.jsxs("div",{className:"mb-2 rounded-[14px] p-3",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)",opacity:.75},children:[o.jsx("div",{ref:d,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:l?{color:T.text}:{color:T.text,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:()=>a(!l),children:o.jsx(du,{text:e,keyword:n})}),(i||l)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:T.accentDark,background:"rgba(232,160,191,0.1)"},onClick:p=>{p.stopPropagation(),a(!l)},children:l?"":""})}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:T.textMuted},children:t?(()=>{const p=Math.max(0,30-Math.floor((Date.now()-new Date(t).getTime())/864e5));return` ${or(t)}  ${p}`})():""}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(59,130,246,0.1)",color:"#3b82f6"},onClick:r,children:""}),o.jsx("button",{className:"rounded-lg px-2 py-1 text-[10px] font-medium",style:{background:"rgba(239,68,68,0.1)",color:"#ef4444"},onClick:s,children:""})]})]})]})}function G0({msg:e,keyword:t,roleLabel:n,roleColor:r,selectMode:s,selected:l,onToggle:a,onLongPress:i}){const[c,d]=u.useState(!1),[p,f]=u.useState(!1),h=u.useRef(null),x=u.useRef(null),w=u.useRef(!1),y=u.useRef(null);u.useLayoutEffect(()=>{const S=h.current;S&&!c&&f(S.scrollHeight>S.clientHeight+1)},[e.content,c]);const b=S=>{if(s)return;const j=S.touches[0];y.current={x:j.clientX,y:j.clientY},w.current=!1,x.current=setTimeout(()=>{w.current=!0,i==null||i()},600)},g=S=>{if(!y.current||!x.current)return;const j=S.touches[0],N=j.clientX-y.current.x,k=j.clientY-y.current.y;N*N+k*k>100&&(clearTimeout(x.current),x.current=null)},m=()=>{clearTimeout(x.current)},v=()=>{if(!w.current&&s){a==null||a();return}};return o.jsxs("div",{className:"mb-3 rounded-[18px] p-3 flex items-start gap-2.5",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},onTouchStart:b,onTouchMove:g,onTouchEnd:m,onTouchCancel:m,onClick:v,children:[s&&o.jsx("div",{className:"mt-1",children:o.jsx(bx,{selected:l})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"text-[11px] font-semibold",style:{color:r(e.role)},children:n(e.role)}),e.summary_group_id&&o.jsxs("span",{className:"rounded-full px-1.5 py-0.5 text-[9px] font-medium",style:{background:"rgba(74,138,181,0.1)",color:"#4a8ab5"},children:["",e.summary_group_id]})]}),o.jsx("span",{className:"text-[10px]",style:{color:T.textMuted},children:or(e.created_at)})]}),o.jsx("div",{ref:h,className:"text-[12px] leading-relaxed break-words cursor-pointer",style:c?{color:T.text}:{color:T.text,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:S=>{s||(S.stopPropagation(),d(!c))},children:o.jsx(du,{text:e.content,keyword:t})}),!s&&(p||c)&&o.jsx("div",{className:"mt-1 flex justify-center",children:o.jsx("button",{className:"rounded-full px-2 py-0.5 text-[10px]",style:{color:T.accentDark,background:"rgba(232,160,191,0.1)"},onClick:S=>{S.stopPropagation(),d(!c)},children:c?"":""})})]})]})}function q0(){var fu;const e=Ft(),[t,n]=u.useState("memories"),[r,s]=u.useState(!1),[l,a]=u.useState(!1),[i,c]=u.useState(null),[d,p]=u.useState([]),[f,h]=u.useState(null),[x,w]=u.useState(""),[y,b]=u.useState(null),[g,m]=u.useState(null),[v,S]=u.useState(""),[j,N]=u.useState(""),[k,E]=u.useState(""),[D,P]=u.useState(!1),[L,ie]=u.useState(new Set),[W,z]=u.useState([]),[q,xe]=u.useState([]),[fe,O]=u.useState([]),[Q,_]=u.useState([]),[ee,X]=u.useState([]),[ke,ye]=u.useState({longterm:null,daily:null}),[qe,ve]=u.useState(!1),[Y,we]=u.useState(null),[ue,se]=u.useState(!1),[Ue,je]=u.useState(null),[rt,V]=u.useState(null),[$,le]=u.useState(!0),[ne,pe]=u.useState(!1),[I,J]=u.useState(!1),[re,de]=u.useState(!1);u.useEffect(()=>{P(!1),ie(new Set)},[t,r]);const He=()=>{ve(!0),B("/api/settings/summary-layers").then(C=>ye({longterm:C.longterm,daily:C.daily})).catch(C=>console.error(C)).finally(()=>ve(!1))};u.useEffect(()=>{t!=="messages"||!r||He()},[t,r]);const We=async()=>{try{const C=await B("/api/settings/summary-layers/flush-status");V({...C,grayClicks:0})}catch(C){je(""),setTimeout(()=>je(null),3e3)}},mn=async()=>{var C,F;V(null),se(!0),je(null);try{const H=await B("/api/settings/summary-layers/flush",{method:"POST"}),Z=[];H.flushed&&Z.push(` ${H.flushed} `),(C=H.merge_triggered)!=null&&C.length&&Z.push(` ${H.merge_triggered.join("+")}`),je(Z.length?Z.join(""):""),(H.flushed||(F=H.merge_triggered)!=null&&F.length)&&setTimeout(He,5e3)}catch(H){je("")}finally{se(!1),setTimeout(()=>je(null),4e3)}};u.useEffect(()=>{B("/api/sessions?limit=50").then(C=>{const F=C.sessions||[];p(F),F.length>0&&!i&&c(F[0].id)}).catch(()=>{})},[]),u.useEffect(()=>{i&&B(`/api/sessions/${i}/info`).then(C=>h(C.assistant_name||null)).catch(()=>h(null))},[i]);const ln=50,Rt=u.useRef(""),jt=u.useRef(null),on=u.useRef({klass:"",mood:"",role:""});on.current={klass:v,mood:j,role:k},u.useEffect(()=>{i&&ut()},[i,l]),u.useEffect(()=>{i&&!l&&ut()},[t]),u.useEffect(()=>{i&&!l&&ut()},[v,j,k]),u.useEffect(()=>(jt.current&&clearTimeout(jt.current),jt.current=setTimeout(()=>{const C=x.trim();C!==Rt.current&&(Rt.current=C,i&&ut(C))},400),()=>{jt.current&&clearTimeout(jt.current)}),[x]);const an=C=>{const F=[],H=(C!=null?C:Rt.current||"").trim();H&&F.push(`search=${encodeURIComponent(H)}`);const Z=on.current;return t==="memories"&&Z.klass&&F.push(`klass=${encodeURIComponent(Z.klass)}`),t==="summaries"&&Z.mood&&F.push(`mood_tag=${encodeURIComponent(Z.mood)}`),t==="messages"&&Z.role&&F.push(`role=${encodeURIComponent(Z.role)}`),F.length?`&${F.join("&")}`:""},ut=async C=>{if(!i)return;le(!0);const F=an(C);try{if(l){const[H,Z]=await Promise.all([B("/api/memories/trash?limit=100"),B(`/api/sessions/${i}/summaries/trash`)]);_(H.memories||[]),X(Z.summaries||[])}else if(t==="memories"){const H=await B(`/api/memories?limit=${ln}&offset=0${F}`);z(H.memories||[]),pe((H.total||0)>(H.memories||[]).length)}else if(t==="summaries"){const H=await B(`/api/sessions/${i}/summaries?limit=${ln}&offset=0${F}`);xe(H.summaries||[]),J((H.total||0)>(H.summaries||[]).length)}else{const H=await B(`/api/sessions/${i}/messages?limit=50${F}`);O((H.messages||[]).reverse()),de(H.has_more||!1)}}catch(H){console.error(H)}le(!1)},er=async()=>{if(!ne||$)return;le(!0);const C=an();try{const F=await B(`/api/memories?limit=${ln}&offset=${W.length}${C}`),H=F.memories||[];z(Z=>[...Z,...H]),pe((F.total||0)>W.length+H.length)}catch(F){console.error(F)}le(!1)},Sr=async()=>{if(!i||!I||$)return;le(!0);const C=an();try{const F=await B(`/api/sessions/${i}/summaries?limit=${ln}&offset=${q.length}${C}`),H=F.summaries||[];xe(Z=>[...Z,...H]),J((F.total||0)>q.length+H.length)}catch(F){console.error(F)}le(!1)},A=async()=>{if(!i||!re||$)return;const C=fe[fe.length-1];if(!C)return;le(!0);const F=an();try{const H=await B(`/api/sessions/${i}/messages?limit=50&before_id=${C.id}${F}`);O(Z=>[...Z,...(H.messages||[]).reverse()]),de(H.has_more||!1)}catch(H){console.error(H)}le(!1)},ae=x.trim(),ce=u.useMemo(()=>ae?Q.filter(C=>C.content.toLowerCase().includes(ae.toLowerCase())):Q,[Q,ae]),Me=u.useMemo(()=>ae?ee.filter(C=>(C.summary_content||"").toLowerCase().includes(ae.toLowerCase())):ee,[ee,ae]),st=(C,F)=>b({message:C,action:F}),gn=async C=>{await B(`/api/memories/${C}/restore`,{method:"POST"}),_(F=>F.filter(H=>H.id!==C))},Cl=C=>st("",async()=>{await B(`/api/memories/${C}/permanent`,{method:"DELETE"}),_(F=>F.filter(H=>H.id!==C))}),ys=async C=>{await B(`/api/sessions/${i}/summaries/${C}/restore`,{method:"POST"}),X(F=>F.filter(H=>H.id!==C))},Je=C=>st("",async()=>{await B(`/api/sessions/${i}/summaries/${C}/permanent`,{method:"DELETE"}),X(F=>F.filter(H=>H.id!==C))}),lt=C=>{ie(F=>{const H=new Set(F);return H.has(C)?H.delete(C):H.add(C),H})},ot=C=>{P(!0),ie(new Set([C]))},cn=()=>{let C=[];t==="memories"?C=W.map(F=>F.id):t==="summaries"?C=q.map(F=>F.id):C=fe.map(F=>F.id),ie(new Set(C))},mt=()=>{P(!1),ie(new Set)},gt=()=>{if(L.size===0)return;const C=L.size,F=t==="messages"?` ${C} `:` ${C} ${t==="memories"?"":""}`;st(F,async()=>{const H=[...L];t==="memories"?(await B("/api/memories/batch",{method:"DELETE",body:{ids:H}}),z(Z=>Z.filter(Fe=>!L.has(Fe.id)))):t==="summaries"?(await B(`/api/sessions/${i}/summaries/batch`,{method:"DELETE",body:{ids:H}}),xe(Z=>Z.filter(Fe=>!L.has(Fe.id)))):(await B(`/api/sessions/${i}/messages/batch`,{method:"DELETE",body:{ids:H}}),O(Z=>Z.filter(Fe=>!L.has(Fe.id)))),mt()})},Bt=async(C,F,H)=>{if(g){try{if(g.type==="memory"){const Z={content:C};F!==void 0&&(Z.klass=F),H!==void 0&&(Z.tags=H),await B(`/api/memories/${g.id}`,{method:"PUT",body:Z}),z(Fe=>Fe.map(Qt=>Qt.id===g.id?{...Qt,content:C,...F!==void 0?{klass:F}:{},...H!==void 0?{tags:H}:{}}:Qt))}else await B(`/api/sessions/${i}/summaries/${g.id}`,{method:"PATCH",body:{summary_content:C}}),xe(Z=>Z.map(Fe=>Fe.id===g.id?{...Fe,summary_content:C}:Fe))}catch(Z){console.error(Z)}m(null)}},Tn=C=>{if(!Y)return;const F=Y.type;we(null),b({title:"",message:"",confirmLabel:"",confirmColor:T.accentDark,action:async()=>{await B(`/api/settings/summary-layers/${F}`,{method:"PUT",body:{content:C}}),ye(H=>({...H,[F]:{...H[F]||{},content:C}}))}})},Ve=C=>C==="user"?"":C==="assistant"?f||"":"",un=C=>C==="user"?T.accentDark:C==="assistant"?"#8d68c4":T.textMuted,St=t==="memories"?wx:t==="summaries"?X0:Y0,Pt=t==="memories"?v:t==="summaries"?j:k,tr=C=>{t==="memories"?S(C):t==="summaries"?N(C):E(C)},jx=l?(()=>{if($)return o.jsx(_s,{});const C=t==="memories"?ce:Me;return C.length===0?o.jsx(eo,{text:ae?"":""}):C.map(F=>o.jsx(Q0,{content:F.content||F.summary_content||"()",deletedAt:F.deleted_at,keyword:ae,onRestore:()=>t==="memories"?gn(F.id):ys(F.id),onPermanentDelete:()=>t==="memories"?Cl(F.id):Je(F.id)},F.id))})():t==="memories"?$&&W.length===0?o.jsx(_s,{}):W.length===0?o.jsx(eo,{text:ae?"":""}):o.jsxs(o.Fragment,{children:[!D&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:T.textMuted},children:""}),W.map(C=>o.jsx(uf,{time:C.updated_at?`${or(C.created_at)}   ${or(C.updated_at)}`:or(C.created_at),keyword:ae,onEdit:()=>m({type:"memory",id:C.id,text:C.content,klass:C.klass,tags:C.tags}),selectMode:D,selected:L.has(C.id),onToggle:()=>lt(C.id),onLongPress:()=>ot(C.id),badge:(()=>{var Z;const F=of[C.klass]||of.other,H=((Z=C.tags)==null?void 0:Z.topic)||[];return o.jsxs("div",{className:"flex flex-wrap items-center gap-1 mb-1",children:[o.jsx("span",{className:"inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:F.bg,color:F.color},children:C.klass}),o.jsxs("span",{className:"inline-block text-[10px]",style:{color:T.textMuted},children:["#",C.id]}),H.map((Fe,Qt)=>o.jsx("span",{className:"inline-block rounded-full px-1.5 py-0.5 text-[9px]",style:{background:"rgba(136,136,160,0.1)",color:T.textMuted},children:Fe},Qt))]})})(),children:C.content},C.id)),ne&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)",color:T.accentDark},onClick:er,disabled:$,children:$?"...":""})]}):t==="summaries"?$&&q.length===0?o.jsx(_s,{}):q.length===0?o.jsx(eo,{text:ae?"":""}):o.jsxs(o.Fragment,{children:[!D&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:T.textMuted},children:""}),q.map(C=>o.jsx(uf,{time:or(C.created_at),keyword:ae,onEdit:()=>m({type:"summary",id:C.id,text:C.summary_content}),selectMode:D,selected:L.has(C.id),onToggle:()=>lt(C.id),onLongPress:()=>ot(C.id),badge:o.jsxs(o.Fragment,{children:[C.mood_tag&&o.jsx("span",{className:"mb-1 inline-block rounded-full px-2 py-0.5 text-[10px] font-medium",style:{background:"rgba(232,160,191,0.15)",color:T.accentDark},children:C.mood_tag}),C.merged_into&&o.jsxs("span",{className:"mb-1 ml-1 inline-block rounded-full px-1.5 py-0.5 text-[9px] font-medium",style:{background:"rgba(155,120,200,0.12)",color:"#8b6abf"},children:["",C.merged_into==="daily"?"":""]}),o.jsxs("span",{className:"mb-1 ml-1 inline-block text-[10px]",style:{color:T.textMuted},children:["#",C.id]})]}),children:C.summary_content||"()"},C.id)),I&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)",color:T.accentDark},onClick:Sr,disabled:$,children:$?"...":""})]}):r?qe?o.jsx(_s,{}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-[14px] py-2.5 text-[13px] font-medium text-white",style:{background:"linear-gradient(135deg, var(--accent), var(--accent-dark))",boxShadow:"4px 4px 10px rgba(201,98,138,0.35)"},onClick:We,disabled:ue,children:[o.jsx(ha,{size:13,className:ue?"animate-spin":""}),Ue||(ue?"...":"")]}),[{type:"daily",label:"",hint:""},{type:"longterm",label:"",hint:""}].map(({type:C,label:F,hint:H})=>{var Qt,vs;const Z=ke[C],Fe=(Qt=Z==null?void 0:Z.content)==null?void 0:Qt.trim();return o.jsxs("div",{className:"rounded-[18px] p-4",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[15px] font-semibold",style:{color:T.text},children:F}),o.jsx("div",{className:"text-[11px]",style:{color:T.textMuted},children:H})]}),o.jsx("button",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>we({type:C,content:(Z==null?void 0:Z.content)||""}),children:o.jsx(nu,{size:11,style:{color:T.accentDark}})})]}),o.jsx("div",{className:"text-[12px] leading-relaxed whitespace-pre-wrap break-words",style:{color:Fe?T.text:T.textMuted},children:Fe?Z.content:""}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px]",style:{color:T.textMuted},children:Z!=null&&Z.updated_at?` ${or(Z.updated_at)}`:""}),o.jsxs("span",{className:"text-[10px]",style:{color:T.textMuted},children:[((vs=Z==null?void 0:Z.content)==null?void 0:vs.length)||0," "]})]})]},C)})]}):$&&fe.length===0?o.jsx(_s,{}):fe.length===0?o.jsx(eo,{text:ae?"":""}):o.jsxs(o.Fragment,{children:[!D&&o.jsx("p",{className:"mb-2 text-[11px]",style:{color:T.textMuted},children:""}),fe.map(C=>o.jsx(G0,{msg:C,keyword:ae,roleLabel:Ve,roleColor:un,selectMode:D,selected:L.has(C.id),onToggle:()=>lt(C.id),onLongPress:()=>ot(C.id)},C.id)),re&&o.jsx("button",{className:"mx-auto mt-2 block rounded-[10px] px-4 py-2 text-[12px]",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)",color:T.accentDark},onClick:A,disabled:$,children:$?"...":""})]});return o.jsxs("div",{className:"flex h-full flex-col",style:{background:T.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:T.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:T.text},children:l?"":""}),t==="messages"?o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:T.bg,boxShadow:r?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>s(!r),children:o.jsx(tu,{size:16,style:{color:r?T.accentDark:T.textMuted}})}):o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:T.bg,boxShadow:l?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>a(!l),children:o.jsx(ps,{size:16,style:{color:l?"#ef4444":T.accentDark}})})]}),D&&o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsxs("div",{className:"flex items-center justify-between rounded-[14px] px-4 py-2.5",style:{background:T.bg,boxShadow:"var(--inset-shadow)"},children:[o.jsxs("span",{className:"text-[12px] font-semibold",style:{color:T.accentDark},children:[" ",L.size," "]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:"rgba(59,130,246,0.15)",color:"#3b82f6"},onClick:cn,children:""}),o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)",color:T.textMuted},onClick:mt,children:""}),o.jsx("button",{className:"rounded-[10px] px-3 py-1.5 text-[12px] font-semibold text-white",style:{background:L.size>0?"#ff4d6d":"rgba(255,77,109,0.3)"},onClick:gt,disabled:L.size===0,children:""})]})]})}),!D&&o.jsx("div",{className:"shrink-0 px-5 pb-2",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:T.bg,boxShadow:"var(--inset-shadow)"},children:V0.map(C=>{const F=l&&C.key==="messages",H=t===C.key,Z=C.key==="messages"&&r?"":C.label;return o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:F?{color:T.textMuted,opacity:.35,cursor:"default"}:H?{background:T.bg,boxShadow:"var(--card-shadow-sm)",color:T.accentDark}:{color:T.textMuted},disabled:F,onClick:()=>!F&&n(C.key),children:Z},C.key)})})}),!D&&!(t==="messages"&&r)&&o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(cf,{value:i?`#${i}`:"",rawValue:i!=null?i:"",onChange:C=>c(Number(C)),options:d.map(C=>({value:String(C.id),label:`#${C.id} ${C.title||""}`})),width:"22%"}),o.jsx(cf,{value:((fu=St.find(C=>C.value===Pt))==null?void 0:fu.label)||St[0].label,rawValue:Pt,onChange:tr,options:St.map(C=>({value:C.value,label:C.label})),width:"22%",active:!!Pt}),o.jsxs("div",{className:"relative flex-1",children:[o.jsx(uv,{size:13,className:"absolute left-2.5 top-1/2 -translate-y-1/2",style:{color:T.textMuted}}),o.jsx("input",{className:"w-full rounded-[12px] py-2 pl-8 pr-7 text-[11px] outline-none",style:{background:T.bg,boxShadow:"var(--inset-shadow)",color:T.text},placeholder:"...",value:x,onChange:C=>w(C.target.value)}),x&&o.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>w(""),children:o.jsx(bl,{size:13,style:{color:T.textMuted}})})]})]})}),o.jsx("div",{className:`flex-1 overflow-y-auto px-5 pb-8${t==="messages"&&r?" pt-5":""}`,children:jx}),y&&o.jsx(K0,{title:y.title,message:y.message,confirmLabel:y.confirmLabel,confirmColor:y.confirmColor,onConfirm:async()=>{try{await y.action()}catch(C){console.error(C)}b(null)},onCancel:()=>b(null)}),g&&o.jsx(af,{initialText:g.text,onSave:Bt,onCancel:()=>m(null),memoryData:g.type==="memory"?{klass:g.klass,tags:g.tags}:null}),Y&&o.jsx(af,{initialText:Y.content,onSave:Tn,onCancel:()=>we(null)}),rt&&(()=>{const{pending_flush:C,pending_merge:F,already_merged:H,grayClicks:Z}=rt,Fe=Z>=2,Qt=C>0,vs=(F==null?void 0:F.length)>0,pu=(H==null?void 0:H.length)>0,nr=[];Fe?nr.push(` ${H.join("")} `):(Qt&&nr.push(`${C} `),vs&&nr.push(`${F.join("")} `),pu&&nr.push(`${H.join("")} `),nr.length||nr.push(""));let Er,Dn,Mr;return Fe?(Er="",Dn=!1,Mr=mn):Qt?(Er="",Dn=!1,Mr=mn):vs?(Er="",Dn=!1,Mr=mn):pu?(Er="",Dn=!0,Mr=()=>V(_r=>({..._r,grayClicks:(_r.grayClicks||0)+1}))):(Er="",Dn=!0,Mr=()=>{}),o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:()=>V(null),children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:T.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:_r=>_r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:T.text},children:Fe?"":""}),o.jsx("p",{className:"mb-5 text-center text-[13px] leading-relaxed",style:{color:T.textMuted},children:nr.map((_r,hu)=>o.jsxs("span",{children:[hu>0&&o.jsx("br",{}),_r]},hu))}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:T.bg,boxShadow:"var(--card-shadow-sm)",color:T.text},onClick:()=>V(null),children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:Dn?"#bbb":T.accentDark,boxShadow:Dn?"none":"4px 4px 10px rgba(201,98,138,0.4)",opacity:Dn?.5:1},onClick:Mr,children:Er})]})]})})})()]})}function _s(){return o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:T.accent,borderTopColor:"transparent"}})})}function eo({text:e}){return o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:T.textMuted},children:e})}const G={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"},J0=[{key:"theirs",label:""},{key:"mine",label:""}],to=80;function kx(e){if(!e)return"";const t=new Date(e),n=new Date,r=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),l=`${r}:${s}`;return n-t<864e5&&t.toDateString()===n.toDateString()?l:`${t.getMonth()+1}/${t.getDate()} ${l}`}function Z0({message:e,onConfirm:t,onCancel:n}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:n,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-6",style:{background:G.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:r=>r.stopPropagation(),children:[o.jsx("p",{className:"mb-1 text-center text-[16px] font-bold",style:{color:G.text},children:""}),o.jsx("p",{className:"mb-5 text-center text-[13px]",style:{color:G.textMuted},children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)",color:G.text},onClick:n,children:""}),o.jsx("button",{className:"flex-1 rounded-[16px] py-3 text-[15px] font-semibold text-white",style:{background:"#ff4d6d",boxShadow:"4px 4px 10px rgba(255,77,109,0.4)"},onClick:t,children:""})]})]})})}function ew({children:e,onDelete:t}){const n=u.useRef(null),r=u.useRef(null),s=u.useRef({startX:0,startY:0,base:0,current:0,dragging:!1,locked:!1,isH:!1}),l=(p,f)=>{const h=n.current,x=r.current;if(!h)return;const w="all 0.25s cubic-bezier(.4,0,.2,1)";if(h.style.transition=w,h.style.transform=p?`translateX(${p}px)`:"",x){const y=Math.min(1,Math.abs(p)/to);x.style.transition=w,x.style.opacity=`${y}`}p||(h.style.willChange="auto"),s.current.current=p},a=()=>l(0),i=p=>{const f=p.touches[0],h=s.current;h.startX=f.clientX,h.startY=f.clientY,h.base=h.current,h.dragging=!0,h.locked=!1,h.isH=!1,n.current&&(n.current.style.transition="none"),r.current&&(r.current.style.transition="none")},c=p=>{const f=s.current;if(!f.dragging)return;const h=p.touches[0],x=h.clientX-f.startX,w=h.clientY-f.startY;if(!f.locked){if(Math.abs(x)<5&&Math.abs(w)<5)return;f.locked=!0,f.isH=Math.abs(x)>Math.abs(w),f.isH&&n.current&&(n.current.style.willChange="transform")}if(!f.isH){f.dragging=!1;return}p.preventDefault();const y=Math.max(-to,Math.min(0,f.base+x));n.current&&(n.current.style.transform=`translateX(${y}px)`),r.current&&(r.current.style.opacity=`${Math.min(1,Math.abs(y)/to)}`),f.current=y},d=()=>{s.current.dragging=!1,s.current.current<-40?l(-to):l(0)};return o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-[18px]",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{ref:r,className:"absolute right-0 top-0 bottom-0 flex items-center pr-2",style:{opacity:0},children:o.jsxs("button",{className:"flex h-[calc(100%-12px)] w-[68px] flex-col items-center justify-center gap-1 rounded-[14px]",style:{background:"#ff4d6d"},onClick:()=>{a(),t()},children:[o.jsx(ps,{size:16,color:"white"}),o.jsx("span",{className:"text-[11px] font-medium text-white",children:""})]})}),o.jsx("div",{ref:n,className:"relative z-10",onTouchStart:i,onTouchMove:c,onTouchEnd:d,children:e})]})}function tw({unlockAt:e}){const[t,n]=u.useState(Date.now());u.useEffect(()=>{const d=setInterval(()=>n(Date.now()),1e3);return()=>clearInterval(d)},[]);const r=new Date(e).getTime()-t;if(r<=0)return null;const s=Math.floor(r/864e5),l=Math.floor(r%864e5/36e5),a=Math.floor(r%36e5/6e4),i=Math.floor(r%6e4/1e3);let c="";return s>0&&(c+=`${s}`),(l>0||s>0)&&(c+=`${l}`),c+=`${a}${i}`,o.jsxs("div",{className:"flex items-center gap-1.5 text-[12px]",style:{color:G.accentDark},children:[o.jsx(av,{size:12}),o.jsx("span",{children:c})]})}function nw({assistants:e,avatarMap:t,currentId:n,onSelect:r,onClose:s}){return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.25)"},onClick:s,children:o.jsxs("div",{className:"mx-6 w-full max-w-[300px] rounded-[22px] p-5",style:{background:G.bg,boxShadow:"0 8px 30px rgba(0,0,0,0.18)"},onClick:l=>l.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:G.text},children:""}),o.jsx("button",{onClick:s,children:o.jsx(bl,{size:18,style:{color:G.textMuted}})})]}),o.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:e.map(l=>{var i;const a=t[l.id]||l.avatar_url;return o.jsxs("button",{className:"mb-2 flex w-full items-center gap-3 rounded-[14px] p-3 text-left",style:{background:G.bg,boxShadow:l.id===n?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:()=>{r(l.id),s()},children:[o.jsx("div",{className:"shrink-0 rounded-full",style:{width:36,height:36,background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:2},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:G.bg},children:a?o.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:G.accentDark},children:((i=l.name)==null?void 0:i[0])||"?"})})}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:G.text},children:l.name})]},l.id)})})]})})}function rw({diary:e,onBack:t,onMarkRead:n}){return u.useEffect(()=>{e&&!e.is_read&&e.author==="assistant"&&(!e.unlock_at||new Date(e.unlock_at)<=new Date)&&n(e.id)},[e]),o.jsxs("div",{className:"flex h-full flex-col",style:{background:G.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:t,children:o.jsx(Dt,{size:22,style:{color:G.text}})}),o.jsx("h1",{className:"text-[15px] font-bold truncate max-w-[60%]",style:{color:G.text},children:e.title||""}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:o.jsxs("div",{className:"rounded-[18px] p-5",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("div",{className:"mb-3 text-[10px]",style:{color:G.textMuted},children:kx(e.created_at)}),o.jsx("div",{className:"text-[13px] leading-[28px]",style:{color:G.text},children:e.content.split(`
`).map((r,s)=>o.jsx("div",{style:{borderBottom:"1px solid rgba(0,0,0,0.06)",minHeight:28},children:r||""},s))})]})})]})}function sw({assistantId:e,onSave:t,onCancel:n}){const[r,s]=u.useState(""),[l,a]=u.useState(""),[i,c]=u.useState(!1),[d,p]=u.useState(""),[f,h]=u.useState(!1),[x,w]=u.useState(!1),y=async()=>{if(!(!l.trim()||f)){h(!0);try{const b={assistant_id:e,author:"user",title:r.trim(),content:l.trim()};i&&d&&(b.unlock_at=new Date(d).toISOString()),await t(b)}finally{h(!1)}}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:G.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(Dt,{size:22,style:{color:G.text}})}),o.jsx("h1",{className:"text-[15px] font-bold",style:{color:G.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:l.trim()?"var(--card-shadow-sm)":"var(--inset-shadow)"},onClick:y,disabled:!l.trim()||f,children:o.jsx("span",{className:"text-[12px] font-bold",style:{color:l.trim()?G.accentDark:G.textMuted},children:""})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[!x&&o.jsx("input",{className:"mb-3 w-full rounded-[12px] px-3 py-2.5 text-[13px] font-medium outline-none",style:{background:G.bg,boxShadow:"var(--inset-shadow)",color:G.text},placeholder:"",value:r,onChange:b=>s(b.target.value)}),o.jsxs("div",{className:"relative mb-3",children:[o.jsx("textarea",{className:"w-full rounded-[14px] p-3 text-[13px] leading-[28px] resize-none outline-none",style:{background:G.bg,boxShadow:"var(--inset-shadow)",color:G.text,minHeight:x?"calc(100vh - 120px)":200,backgroundImage:"repeating-linear-gradient(transparent, transparent 27px, rgba(0,0,0,0.05) 27px, rgba(0,0,0,0.05) 28px)",backgroundPositionY:9},placeholder:"...",value:l,onChange:b=>a(b.target.value),autoFocus:!0}),o.jsx("button",{className:"absolute top-2 right-2 flex h-7 w-7 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>w(!x),children:x?o.jsx(as,{size:13,style:{color:G.accentDark}}):o.jsx(vl,{size:13,style:{color:G.accentDark}})})]}),!x&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-[14px] px-4 py-3",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-[13px] font-medium",style:{color:G.text},children:""}),o.jsx("p",{className:"text-[10px]",style:{color:G.textMuted},children:""})]}),o.jsx("button",{className:"relative h-7 w-12 rounded-full transition-colors",style:{background:i?G.accent:"rgba(0,0,0,0.1)"},onClick:()=>{if(!i&&!d){const b=new Date;b.setDate(b.getDate()+1),b.setHours(9,0,0,0);const g=m=>String(m).padStart(2,"0");p(`${b.getFullYear()}-${g(b.getMonth()+1)}-${g(b.getDate())}T${g(b.getHours())}:${g(b.getMinutes())}`)}c(!i)},children:o.jsx("div",{className:"absolute top-0.5 h-6 w-6 rounded-full transition-transform",style:{background:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",transform:i?"translateX(22px)":"translateX(2px)"}})})]}),i&&o.jsxs("div",{className:"rounded-[14px] px-4 py-3",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},children:[o.jsx("p",{className:"mb-2 text-[12px] font-medium",style:{color:G.text},children:""}),o.jsx("input",{type:"datetime-local",className:"w-full rounded-[10px] px-3 py-2 text-[13px] outline-none",style:{background:G.bg,boxShadow:"var(--inset-shadow)",color:G.text},value:d,onChange:b=>p(b.target.value)})]})]})]})]})}function lw(){var W;const e=Ft(),[t,n]=u.useState("theirs"),[r,s]=u.useState([]),[l,a]=u.useState({}),[i,c]=u.useState(()=>{const z=localStorage.getItem("diary_assistant_id");return z?Number(z):null}),d=z=>{c(z),z!=null&&localStorage.setItem("diary_assistant_id",String(z))},[p,f]=u.useState(!1),[h,x]=u.useState([]),[w,y]=u.useState(!0),[b,g]=u.useState(null),[m,v]=u.useState(null),[S,j]=u.useState(!1);u.useEffect(()=>{B("/api/assistants").then(async z=>{const q=z.assistants||[];s(q),q.length>0&&(i&&q.some(O=>O.id===i)||d(q[0].id));const xe={};await Promise.all(q.map(async fe=>{const O=await hs(`assistant-avatar-${fe.id}`).catch(()=>null);O&&(xe[fe.id]=O)})),a(xe)}).catch(()=>{})},[]);const N=r.find(z=>z.id===i),k=i&&l[i]||(N==null?void 0:N.avatar_url);u.useEffect(()=>{i!=null&&E()},[i,t]);const E=async()=>{y(!0);try{const q=await B(`/api/diary?assistant_id=${i}&author=${t==="theirs"?"assistant":"user"}&limit=100`);x(q.diary||[])}catch(z){console.error(z)}y(!1)},D=z=>{g({message:"",action:async()=>{await B(`/api/diary/${z}`,{method:"DELETE"}),x(q=>q.filter(xe=>xe.id!==z))}})},P=async z=>{try{await B(`/api/diary/${z}/read`,{method:"POST"}),x(q=>q.map(xe=>xe.id===z?{...xe,is_read:!0}:xe))}catch(q){console.error(q)}},L=async z=>{await B("/api/diary",{method:"POST",body:z}),j(!1),E()},ie=z=>{z.unlock_at&&new Date(z.unlock_at)>new Date||v(z)};return m?o.jsx(rw,{diary:m,onBack:()=>{v(null),E()},onMarkRead:P}):S?o.jsx(sw,{assistantId:i,onSave:L,onCancel:()=>j(!1)}):o.jsxs("div",{className:"flex h-full flex-col",style:{background:G.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-3",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:G.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:G.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:G.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{border:"2px solid #e8a0bf",padding:2},onClick:()=>f(!0),children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:G.bg},children:k?o.jsx("img",{src:k,alt:"",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{className:"text-[14px]",style:{color:G.accentDark},children:((W=N==null?void 0:N.name)==null?void 0:W[0])||"?"})})})]}),o.jsx("div",{className:"shrink-0 px-5 pb-3",children:o.jsx("div",{className:"flex rounded-[14px] p-1",style:{background:G.bg,boxShadow:"var(--inset-shadow)"},children:J0.map(z=>o.jsx("button",{className:"flex-1 rounded-[12px] py-2 text-[12px] font-medium transition-all",style:t===z.key?{background:G.bg,boxShadow:"var(--card-shadow-sm)",color:G.accentDark}:{color:G.textMuted},onClick:()=>n(z.key),children:z.label},z.key))})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24 pt-5",children:w?o.jsx("div",{className:"flex justify-center py-16",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:G.accent,borderTopColor:"transparent"}})}):h.length===0?o.jsx("p",{className:"py-16 text-center text-[14px]",style:{color:G.textMuted},children:t==="theirs"?"":""}):h.map(z=>{const q=z.unlock_at&&new Date(z.unlock_at)>new Date;return o.jsx(ew,{onDelete:()=>D(z.id),children:o.jsxs("div",{className:"p-4 rounded-[18px]",style:{background:G.bg,userSelect:"none"},onClick:()=>ie(z),children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[!z.is_read&&z.author==="assistant"&&!q&&o.jsx("div",{className:"h-2 w-2 shrink-0 rounded-full",style:{background:"#ef4444"}}),o.jsx("span",{className:"text-[13px] font-medium truncate",style:{color:G.text},children:z.title||""})]}),o.jsx("span",{className:"text-[10px] shrink-0 ml-2",style:{color:G.textMuted},children:kx(z.created_at)})]}),q?o.jsx(tw,{unlockAt:z.unlock_at}):o.jsx("p",{className:"text-[12px] leading-relaxed break-words",style:{color:G.textMuted,maxHeight:40,overflow:"hidden"},children:z.content.length>60?z.content.slice(0,60)+"...":z.content})]})},z.id)})}),t==="mine"&&o.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center",style:{zIndex:30},children:o.jsx("button",{className:"flex h-12 w-12 items-center justify-center rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",boxShadow:"0 4px 14px rgba(232,160,191,0.4)"},onClick:()=>j(!0),children:o.jsx(fs,{size:22,color:"white"})})}),p&&o.jsx(nw,{assistants:r,avatarMap:l,currentId:i,onSelect:d,onClose:()=>f(!1)}),b&&o.jsx(Z0,{message:b.message,onConfirm:async()=>{try{await b.action()}catch(z){console.error(z)}g(null)},onCancel:()=>g(null)})]})}const Ce={bg:"var(--bg)",accent:"var(--accent)",accentDark:"var(--accent-dark)",text:"var(--text)",textMuted:"var(--text-muted)"};function ow({value:e,onChange:t,onClose:n}){return o.jsxs("div",{className:"fixed inset-0 z-[200] flex flex-col",style:{background:Ce.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 py-4",style:{paddingTop:"max(1rem, env(safe-area-inset-top))"},children:[o.jsx("span",{className:"text-[15px] font-bold",style:{color:Ce.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ce.bg,boxShadow:"var(--card-shadow-sm)"},onClick:n,children:o.jsx(as,{size:18,style:{color:Ce.accentDark}})})]}),o.jsx("textarea",{autoFocus:!0,value:e,onChange:r=>t(r.target.value),className:"flex-1 px-5 pb-10 text-[14px] resize-none outline-none",style:{background:Ce.bg,color:Ce.text},placeholder:"..."})]})}function aw(){const e=Ft(),[t,n]=u.useState(""),[r,s]=u.useState(""),[l,a]=u.useState(""),[i,c]=u.useState(""),[d,p]=u.useState(!1),[f,h]=u.useState(!0),[x,w]=u.useState(null),[y,b]=u.useState(!1),g=u.useRef(null),m=u.useRef(null),v=k=>{w(k),setTimeout(()=>w(null),2e3)};u.useEffect(()=>{B("/api/user/profile").then(k=>{n(k.nickname||""),s(k.background_url||""),a(k.basic_info||"")}).catch(()=>{}).finally(()=>h(!1)),hs("user-avatar").then(k=>{k&&c(k)}).catch(function(){})},[]);const S=k=>{var P;const E=(P=k.target.files)==null?void 0:P[0];if(!E)return;const D=new FileReader;D.onload=async L=>{const ie=L.target.result;try{await ec("user-avatar",ie),c(ie)}catch(W){v("")}},D.readAsDataURL(E),k.target.value=""},j=k=>{var P;const E=(P=k.target.files)==null?void 0:P[0];if(!E)return;const D=new FileReader;D.onload=L=>a(L.target.result||""),D.readAsText(E),k.target.value=""},N=async()=>{p(!0);try{const k={nickname:t.trim()||null,background_url:r||null,basic_info:l||null,avatar_url:i?"user-avatar":null};await B("/api/user/profile",{method:"PUT",body:k});try{const E=JSON.parse(localStorage.getItem("whisper_profile")||"{}");localStorage.setItem("whisper_profile",JSON.stringify({...E,...k}))}catch(E){}v("")}catch(k){v("")}finally{p(!1)}};return o.jsxs("div",{className:"flex h-full flex-col",style:{background:Ce.bg},children:[o.jsxs("div",{className:"flex shrink-0 items-center justify-between px-5 pb-4",style:{paddingTop:"max(1.25rem, env(safe-area-inset-top))"},children:[o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ce.bg,boxShadow:"var(--card-shadow-sm)"},onClick:()=>e("/",{replace:!0}),children:o.jsx(Dt,{size:22,style:{color:Ce.text}})}),o.jsx("h1",{className:"text-[17px] font-bold",style:{color:Ce.text},children:""}),o.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full",style:{background:Ce.bg,boxShadow:d?"var(--inset-shadow)":"var(--card-shadow-sm)"},onClick:N,disabled:d,children:o.jsx(wl,{size:18,style:{color:Ce.accentDark}})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-10 pt-5 space-y-4",children:f?o.jsx("div",{className:"flex h-40 items-center justify-center",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2",style:{borderColor:Ce.accent,borderTopColor:"transparent"}})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-[20px] p-5",style:{background:Ce.bg,boxShadow:"var(--card-shadow)"},children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsxs("button",{className:"relative shrink-0",style:{width:68,height:68},onClick:()=>{var k;return(k=g.current)==null?void 0:k.click()},children:[o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:"linear-gradient(135deg, #f0c4d8, var(--accent))",padding:3},children:o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden rounded-full",style:{background:Ce.bg},children:i?o.jsx("img",{src:i,alt:"avatar",className:"h-full w-full object-cover rounded-full"}):o.jsx("span",{style:{fontSize:24},children:""})})}),o.jsx("div",{className:"absolute bottom-0 right-0 flex h-5 w-5 items-center justify-center rounded-full",style:{background:Ce.accentDark},children:o.jsx(Lh,{size:9,color:"white"})})]}),o.jsx("input",{ref:g,type:"file",accept:"image/*",className:"hidden",onChange:S}),o.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Ce.textMuted},children:""}),o.jsx("input",{type:"text",value:t,onChange:k=>n(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2.5 text-[15px] font-bold outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ce.bg,color:Ce.text}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-[11px] font-semibold uppercase tracking-wide",style:{color:Ce.textMuted},children:""}),o.jsx("input",{type:"text",value:r,onChange:k=>s(k.target.value),placeholder:"",className:"w-full rounded-[12px] px-3 py-2 text-[13px] italic outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ce.bg,color:Ce.text}})]})]})]})}),o.jsxs("div",{className:"rounded-[20px] p-5",style:{background:Ce.bg,boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide",style:{color:Ce.textMuted},children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Ce.bg},onClick:()=>{var k;return(k=m.current)==null?void 0:k.click()},title:"",children:o.jsx(pa,{size:13,style:{color:Ce.textMuted}})}),o.jsx("input",{ref:m,type:"file",accept:".txt,.md,.text",className:"hidden",onChange:j}),o.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full",style:{boxShadow:"var(--card-shadow-sm)",background:Ce.bg},onClick:()=>b(!0),title:"",children:o.jsx(vl,{size:13,style:{color:Ce.accentDark}})})]})]}),o.jsx("textarea",{value:l,onChange:k=>a(k.target.value),placeholder:"...",rows:8,className:"w-full rounded-[14px] px-4 py-3 text-[14px] resize-none outline-none",style:{boxShadow:"var(--inset-shadow)",background:Ce.bg,color:Ce.text}})]})]})}),y&&o.jsx(ow,{value:l,onChange:a,onClose:()=>b(!1)}),x&&o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-1/2 z-[200] flex justify-center",children:o.jsx("div",{className:"rounded-2xl px-6 py-3 text-[14px] font-medium text-white",style:{background:"rgba(0,0,0,0.75)"},children:x})})]})}function Rr(){var n;const e=(n=window.Telegram)==null?void 0:n.WebApp,t=Math.max((e==null?void 0:e.viewportHeight)||0,window.innerHeight);document.documentElement.style.setProperty("--tg-viewport-height",t+"px")}function iw({onSuccess:e}){const[t,n]=u.useState(""),[r,s]=u.useState(""),[l,a]=u.useState(!1),i=async c=>{if(c.preventDefault(),!!t.trim()){a(!0),s("");try{await Ky(t),e()}catch(d){s(d.message||"")}finally{a(!1)}}};return o.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--bg)",padding:"2rem"},children:o.jsxs("div",{style:{width:"100%",maxWidth:320,borderRadius:24,padding:"2rem 1.5rem",background:"var(--bg)",boxShadow:"var(--card-shadow)"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontSize:36,marginBottom:8},children:""}),o.jsx("h1",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--text)",margin:0},children:"WHISPER"}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:4},children:""})]}),o.jsxs("form",{onSubmit:i,children:[o.jsx("input",{type:"password",value:t,onChange:c=>n(c.target.value),placeholder:"",autoFocus:!0,style:{width:"100%",padding:"12px 16px",borderRadius:14,border:"none",outline:"none",fontSize:14,color:"var(--text)",background:"var(--bg)",boxShadow:"var(--inset-shadow)",boxSizing:"border-box"}}),r&&o.jsx("p",{style:{color:"#ef4444",fontSize:"0.75rem",textAlign:"center",marginTop:8,marginBottom:0},children:r}),o.jsx("button",{type:"submit",disabled:l||!t.trim(),style:{width:"100%",marginTop:16,padding:"12px 0",borderRadius:14,border:"none",fontSize:14,fontWeight:600,color:"#fff",background:l||!t.trim()?"var(--text-muted)":"linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%)",cursor:l||!t.trim()?"not-allowed":"pointer",boxShadow:"var(--card-shadow-sm)"},children:l?"...":""})]})]})})}function cw(){const e=Zc();return u.useEffect(()=>{var n;const t=(n=window.Telegram)==null?void 0:n.WebApp;t&&!e.pathname.startsWith("/cot")&&t.expand(),Rr()},[e.pathname]),o.jsxs(Wy,{children:[o.jsx(pt,{path:"/",element:o.jsx(gv,{})}),o.jsx(pt,{path:"/profile",element:o.jsx(aw,{})}),o.jsx(pt,{path:"/world-books",element:o.jsx(a0,{})}),o.jsx(pt,{path:"/world-books/new",element:o.jsx(qd,{})}),o.jsx(pt,{path:"/world-books/:id",element:o.jsx(qd,{})}),o.jsx(pt,{path:"/assistants",element:o.jsx(y0,{})}),o.jsx(pt,{path:"/assistants/new",element:o.jsx(Zd,{})}),o.jsx(pt,{path:"/assistants/:id",element:o.jsx(Zd,{})}),o.jsx(pt,{path:"/settings",element:o.jsx(N0,{})}),o.jsx(pt,{path:"/settings/api",element:o.jsx(D0,{})}),o.jsx(pt,{path:"/settings/proactive",element:o.jsx(R0,{})}),o.jsx(pt,{path:"/cot",element:o.jsx(B0,{})}),o.jsx(pt,{path:"/memories",element:o.jsx(q0,{})}),o.jsx(pt,{path:"/diary",element:o.jsx(lw,{})}),o.jsx(pt,{path:"/messages",element:o.jsx(W0,{})})]})}function uw(){const[e,t]=u.useState(null);return u.useEffect(()=>{var r;const n=(r=window.Telegram)==null?void 0:r.WebApp;return localStorage.getItem("whisper_token")||n&&n.initData&&n.initData.length>0?t("ok"):t("login"),n&&(n.ready(),window.location.hash.startsWith("#/cot")||n.expand()),Rr(),n&&n.onEvent("viewportChanged",Rr),window.addEventListener("resize",Rr),()=>{n&&n.offEvent("viewportChanged",Rr),window.removeEventListener("resize",Rr)}},[]),e===null?null:e==="login"?o.jsx(iw,{onSuccess:()=>t("ok")}):o.jsx(Yy,{children:o.jsx(cw,{})})}window.location.hash&&!window.location.hash.startsWith("#/")&&history.replaceState(null,"",window.location.pathname+"#/cot");li.createRoot(document.getElementById("root")).render(o.jsx(De.StrictMode,{children:o.jsx(uw,{})}));
